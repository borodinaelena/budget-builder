import { Attribute, ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentFactoryResolver, ContentChild, ContentChildren, Directive, ElementRef, EventEmitter, Host, HostBinding, HostListener, Inject, Injectable, InjectionToken, Injector, Input, IterableDiffers, LOCALE_ID, NgModule, NgZone, Optional, Output, PLATFORM_ID, QueryList, Renderer2, SimpleChange, TemplateRef, Type, ViewChild, ViewChildren, ViewContainerRef, forwardRef, ɵɵdefineInjectable, ɵɵinject } from '@angular/core';
import * as i0 from '@angular/core';
import { __assign, __decorate, __extends, __metadata, __param, __spreadArrays } from 'tslib';
import { CommonModule, DOCUMENT, DatePipe, FormStyle, Location, TranslationWidth, getLocaleDayNames, getLocaleFirstDayOfWeek, getLocaleMonthNames, isPlatformBrowser } from '@angular/common';
import { BehaviorSubject, EMPTY, Observable, ReplaySubject, Subject, combineLatest, forkJoin, fromEvent, interval, merge, of, timer } from 'rxjs';
import { debounceTime, delay, distinctUntilChanged, filter, finalize, map, pairwise, repeat, share, skip, startWith, switchMap, take, takeUntil, takeWhile, tap } from 'rxjs/operators';
import { FormsModule, NG_VALIDATORS, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';
import { ActivatedRoute, NavigationEnd, Router, RouterModule } from '@angular/router';
import { ActiveDescendantKeyManager, FocusKeyManager, FocusMonitor, FocusTrap, FocusTrapFactory, InteractivityChecker } from '@angular/cdk/a11y';
import { CdkPortal, CdkPortalOutlet, ComponentPortal, PortalInjector, PortalModule, TemplatePortal } from '@angular/cdk/portal';
import { BlockScrollStrategy, FlexibleConnectedPositionStrategy, GlobalPositionStrategy, Overlay, OverlayContainer, OverlayModule, OverlayPositionBuilder, ScrollDispatcher, ScrollStrategyOptions, ViewportRuler } from '@angular/cdk/overlay';
import { Platform } from '@angular/cdk/platform';
import * as i1 from '@angular/cdk/platform';
import { DomSanitizer } from '@angular/platform-browser';
import { animate, state, style, transition, trigger } from '@angular/animations';
import 'intersection-observer';
import { BidiModule, Directionality } from '@angular/cdk/bidi';
import { CdkCell, CdkCellDef, CdkCellOutlet, CdkColumnDef, CdkFooterCell, CdkFooterCellDef, CdkFooterRow, CdkFooterRowDef, CdkHeaderCell, CdkHeaderCellDef, CdkHeaderRow, CdkHeaderRowDef, CdkRow, CdkRowDef, CdkTable, CdkTableModule, DataRowOutlet, DataSource, FooterRowOutlet, HeaderRowOutlet } from '@angular/cdk/table';
import { ENTER, ESCAPE } from '@angular/cdk/keycodes';
import * as _angular_cdk_keycodes from '@angular/cdk/keycodes';

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/cdk/a11y';
import * as ɵngcc2 from '@angular/common';
import * as ɵngcc3 from '@angular/cdk/overlay';
import * as ɵngcc4 from '@angular/platform-browser';
import * as ɵngcc5 from '@angular/router';
import * as ɵngcc6 from '@angular/forms';

function NbOverlayContainerComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 2);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.content);
} }
function NbOverlayContainerComponent_ng_template_1_Template(rf, ctx) { }
var _c0 = ["*"];
var _c1 = [[["nb-card-header"]], [["nb-card-body"]], "*", [["nb-card-footer"]]];
var _c2 = ["nb-card-header", "nb-card-body", "*", "nb-card-footer"];
function NbRevealCardComponent_a_3_Template(rf, ctx) { if (rf & 1) {
    var _r2 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 2);
    ɵngcc0.ɵɵlistener("click", function NbRevealCardComponent_a_3_Template_a_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); var ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.toggle(); });
    ɵngcc0.ɵɵelement(1, "nb-icon", 3);
    ɵngcc0.ɵɵelementEnd();
} }
var _c3 = [[["nb-card-front"]], [["nb-card-back"]]];
var _c4 = ["nb-card-front", "nb-card-back"];
function NbFlipCardComponent_a_3_Template(rf, ctx) { if (rf & 1) {
    var _r3 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 4);
    ɵngcc0.ɵɵlistener("click", function NbFlipCardComponent_a_3_Template_a_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.toggle(); });
    ɵngcc0.ɵɵelement(1, "nb-icon", 5);
    ɵngcc0.ɵɵelementEnd();
} }
function NbFlipCardComponent_a_6_Template(rf, ctx) { if (rf & 1) {
    var _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 4);
    ɵngcc0.ɵɵlistener("click", function NbFlipCardComponent_a_6_Template_a_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); var ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.toggle(); });
    ɵngcc0.ɵɵelement(1, "nb-icon", 5);
    ɵngcc0.ɵɵelementEnd();
} }
var _c5 = [[["nb-card"]]];
var _c6 = ["nb-card"];
var _c7 = ["nbButton", ""];
function NbCalendarDayPickerComponent_nb_calendar_week_numbers_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-calendar-week-numbers", 4);
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("weeks", ctx_r0.weeks)("size", ctx_r0.size)("weekNumberSymbol", ctx_r0.weekNumberSymbol);
} }
function NbCalendarDaysNamesComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var day_r1 = ctx.$implicit;
    ɵngcc0.ɵɵclassProp("holiday", day_r1.isHoliday);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(day_r1.name);
} }
function NbCalendarPickerComponent_nb_calendar_picker_row_0_Template(rf, ctx) { if (rf & 1) {
    var _r3 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nb-calendar-picker-row", 1);
    ɵngcc0.ɵɵlistener("select", function NbCalendarPickerComponent_nb_calendar_picker_row_0_Template_nb_calendar_picker_row_select_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.select.emit($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var row_r1 = ctx.$implicit;
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("row", row_r1)("visibleDate", ctx_r0.visibleDate)("selectedValue", ctx_r0.selectedValue)("component", ctx_r0.cellComponent)("min", ctx_r0.min)("max", ctx_r0.max)("filter", ctx_r0.filter)("size", ctx_r0.size);
} }
function NbCalendarPickerRowComponent_ng_template_0_Template(rf, ctx) { }
function NbCalendarWeekNumberComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 3);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var weekNumber_r1 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(weekNumber_r1);
} }
function NbBaseCalendarComponent_nb_card_header_1_Template(rf, ctx) { if (rf & 1) {
    var _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nb-card-header", 5);
    ɵngcc0.ɵɵelementStart(1, "nb-calendar-view-mode", 6);
    ɵngcc0.ɵɵlistener("changeMode", function NbBaseCalendarComponent_nb_card_header_1_Template_nb_calendar_view_mode_changeMode_1_listener() { ɵngcc0.ɵɵrestoreView(_r5); var ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onChangeViewMode(); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(2, "nb-calendar-pageable-navigation", 7);
    ɵngcc0.ɵɵlistener("prev", function NbBaseCalendarComponent_nb_card_header_1_Template_nb_calendar_pageable_navigation_prev_2_listener() { ɵngcc0.ɵɵrestoreView(_r5); var ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.navigatePrev(); })("next", function NbBaseCalendarComponent_nb_card_header_1_Template_nb_calendar_pageable_navigation_next_2_listener() { ɵngcc0.ɵɵrestoreView(_r5); var ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.navigateNext(); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("date", ctx_r0.visibleDate)("viewMode", ctx_r0.activeViewMode);
} }
function NbBaseCalendarComponent_nb_calendar_day_picker_3_Template(rf, ctx) { if (rf & 1) {
    var _r9 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nb-calendar-day-picker", 8);
    ɵngcc0.ɵɵlistener("dateChange", function NbBaseCalendarComponent_nb_calendar_day_picker_3_Template_nb_calendar_day_picker_dateChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r9); var ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.dateChange.emit($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("boundingMonths", ctx_r1.boundingMonth)("cellComponent", ctx_r1.dayCellComponent)("min", ctx_r1.min)("max", ctx_r1.max)("filter", ctx_r1.filter)("visibleDate", ctx_r1.visibleDate)("size", ctx_r1.size)("date", ctx_r1.date)("showWeekNumber", ctx_r1.showWeekNumber)("weekNumberSymbol", ctx_r1.weekNumberSymbol);
} }
function NbBaseCalendarComponent_nb_calendar_year_picker_4_Template(rf, ctx) { if (rf & 1) {
    var _r11 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nb-calendar-year-picker", 9);
    ɵngcc0.ɵɵlistener("yearChange", function NbBaseCalendarComponent_nb_calendar_year_picker_4_Template_nb_calendar_year_picker_yearChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r11); var ctx_r10 = ɵngcc0.ɵɵnextContext(); ctx_r10.setVisibleDate($event); return ctx_r10.setViewMode(ctx_r10.ViewMode.MONTH); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("cellComponent", ctx_r2.yearCellComponent)("date", ctx_r2.date)("min", ctx_r2.min)("max", ctx_r2.max)("filter", ctx_r2.filter)("size", ctx_r2.size)("year", ctx_r2.visibleDate);
} }
function NbBaseCalendarComponent_nb_calendar_month_picker_5_Template(rf, ctx) { if (rf & 1) {
    var _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nb-calendar-month-picker", 10);
    ɵngcc0.ɵɵlistener("monthChange", function NbBaseCalendarComponent_nb_calendar_month_picker_5_Template_nb_calendar_month_picker_monthChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); var ctx_r12 = ɵngcc0.ɵɵnextContext(); ctx_r12.setVisibleDate($event); return ctx_r12.setViewMode(ctx_r12.ViewMode.DATE); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("cellComponent", ctx_r3.monthCellComponent)("min", ctx_r3.min)("max", ctx_r3.max)("filter", ctx_r3.filter)("size", ctx_r3.size)("month", ctx_r3.visibleDate)("date", ctx_r3.date);
} }
var _c8 = ["layoutTopDynamicArea"];
var _c9 = ["scrollableContainer"];
var _c10 = ["layoutContainer"];
var _c11 = [[["nb-layout-header", 3, "subheader", ""]], [["nb-sidebar"]], [["nb-layout-header", "subheader", ""]], [["nb-layout-column"]], [["nb-layout-footer"]]];
var _c12 = ["nb-layout-header:not([subheader])", "nb-sidebar", "nb-layout-header[subheader]", "nb-layout-column", "nb-layout-footer"];
var _c13 = ["nbMenuItem", ""];
function NbMenuItemComponent_span_0_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 6);
} if (rf & 2) {
    var ctx_r6 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("config", ctx_r6.menuItem.icon);
} }
function NbMenuItemComponent_span_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_span_0_nb_icon_1_Template, 1, 1, "nb-icon", 5);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.menuItem.icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r0.menuItem.title, "\n");
} }
function NbMenuItemComponent_a_1_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 6);
} if (rf & 2) {
    var ctx_r7 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("config", ctx_r7.menuItem.icon);
} }
function NbMenuItemComponent_a_1_Template(rf, ctx) { if (rf & 1) {
    var _r9 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 7);
    ɵngcc0.ɵɵlistener("mouseenter", function NbMenuItemComponent_a_1_Template_a_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); var ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.onHoverItem(ctx_r8.menuItem); })("click", function NbMenuItemComponent_a_1_Template_a_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); var ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.onItemClick(ctx_r10.menuItem); });
    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_1_nb_icon_1_Template, 1, 1, "nb-icon", 5);
    ɵngcc0.ɵɵelementStart(2, "span", 8);
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("active", ctx_r1.menuItem.selected);
    ɵngcc0.ɵɵproperty("routerLink", ctx_r1.menuItem.link)("queryParams", ctx_r1.menuItem.queryParams)("fragment", ctx_r1.menuItem.fragment)("skipLocationChange", ctx_r1.menuItem.skipLocationChange);
    ɵngcc0.ɵɵattribute("target", ctx_r1.menuItem.target)("title", ctx_r1.menuItem.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.menuItem.icon);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.menuItem.title);
} }
function NbMenuItemComponent_a_2_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 6);
} if (rf & 2) {
    var ctx_r11 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("config", ctx_r11.menuItem.icon);
} }
function NbMenuItemComponent_a_2_Template(rf, ctx) { if (rf & 1) {
    var _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 9);
    ɵngcc0.ɵɵlistener("mouseenter", function NbMenuItemComponent_a_2_Template_a_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); var ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.onHoverItem(ctx_r12.menuItem); })("click", function NbMenuItemComponent_a_2_Template_a_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); var ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.onSelectItem(ctx_r14.menuItem); });
    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_2_nb_icon_1_Template, 1, 1, "nb-icon", 5);
    ɵngcc0.ɵɵelementStart(2, "span", 8);
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("active", ctx_r2.menuItem.selected);
    ɵngcc0.ɵɵattribute("href", ctx_r2.menuItem.url, ɵngcc0.ɵɵsanitizeUrl)("target", ctx_r2.menuItem.target)("title", ctx_r2.menuItem.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r2.menuItem.icon);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r2.menuItem.title);
} }
function NbMenuItemComponent_a_3_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 6);
} if (rf & 2) {
    var ctx_r15 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("config", ctx_r15.menuItem.icon);
} }
function NbMenuItemComponent_a_3_Template(rf, ctx) { if (rf & 1) {
    var _r17 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 9);
    ɵngcc0.ɵɵlistener("mouseenter", function NbMenuItemComponent_a_3_Template_a_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); var ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.onHoverItem(ctx_r16.menuItem); })("click", function NbMenuItemComponent_a_3_Template_a_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r17); var ctx_r18 = ɵngcc0.ɵɵnextContext(); $event.preventDefault(); return ctx_r18.onItemClick(ctx_r18.menuItem); });
    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_3_nb_icon_1_Template, 1, 1, "nb-icon", 5);
    ɵngcc0.ɵɵelementStart(2, "span", 8);
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("active", ctx_r3.menuItem.selected);
    ɵngcc0.ɵɵattribute("target", ctx_r3.menuItem.target)("title", ctx_r3.menuItem.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.menuItem.icon);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r3.menuItem.title);
} }
function NbMenuItemComponent_a_4_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 6);
} if (rf & 2) {
    var ctx_r19 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("config", ctx_r19.menuItem.icon);
} }
function NbMenuItemComponent_a_4_Template(rf, ctx) { if (rf & 1) {
    var _r21 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 10);
    ɵngcc0.ɵɵlistener("click", function NbMenuItemComponent_a_4_Template_a_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r21); var ctx_r20 = ɵngcc0.ɵɵnextContext(); $event.preventDefault(); return ctx_r20.onToggleSubMenu(ctx_r20.menuItem); })("mouseenter", function NbMenuItemComponent_a_4_Template_a_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r21); var ctx_r22 = ɵngcc0.ɵɵnextContext(); return ctx_r22.onHoverItem(ctx_r22.menuItem); });
    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_4_nb_icon_1_Template, 1, 1, "nb-icon", 5);
    ɵngcc0.ɵɵelementStart(2, "span", 8);
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(4, "nb-icon", 11);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("active", ctx_r4.menuItem.selected);
    ɵngcc0.ɵɵattribute("target", ctx_r4.menuItem.target)("title", ctx_r4.menuItem.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.menuItem.icon);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r4.menuItem.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("icon", ctx_r4.getExpandStateIcon());
} }
function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template(rf, ctx) { if (rf & 1) {
    var _r27 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li", 15);
    ɵngcc0.ɵɵlistener("hoverItem", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_hoverItem_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r27); var ctx_r26 = ɵngcc0.ɵɵnextContext(3); return ctx_r26.onHoverItem($event); })("toggleSubMenu", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_toggleSubMenu_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r27); var ctx_r28 = ɵngcc0.ɵɵnextContext(3); return ctx_r28.onToggleSubMenu($event); })("selectItem", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_selectItem_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r27); var ctx_r29 = ɵngcc0.ɵɵnextContext(3); return ctx_r29.onSelectItem($event); })("itemClick", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_itemClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r27); var ctx_r30 = ɵngcc0.ɵɵnextContext(3); return ctx_r30.onItemClick($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var item_r24 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵclassProp("menu-group", item_r24.group);
    ɵngcc0.ɵɵproperty("menuItem", item_r24);
} }
function NbMenuItemComponent_ul_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_ul_5_ng_container_1_li_1_Template, 1, 3, "li", 14);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var item_r24 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !item_r24.hidden);
} }
function NbMenuItemComponent_ul_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "ul", 12);
    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_ul_5_ng_container_1_Template, 2, 1, "ng-container", 13);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r5 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("collapsed", !(ctx_r5.menuItem.children && ctx_r5.menuItem.expanded))("expanded", ctx_r5.menuItem.expanded);
    ɵngcc0.ɵɵproperty("@toggle", ctx_r5.toggleState);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r5.menuItem.children);
} }
function NbMenuComponent_ng_container_1_li_1_Template(rf, ctx) { if (rf & 1) {
    var _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li", 3);
    ɵngcc0.ɵɵlistener("hoverItem", function NbMenuComponent_ng_container_1_li_1_Template_li_hoverItem_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r3 = ɵngcc0.ɵɵnextContext(2); return ctx_r3.onHoverItem($event); })("toggleSubMenu", function NbMenuComponent_ng_container_1_li_1_Template_li_toggleSubMenu_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.onToggleSubMenu($event); })("selectItem", function NbMenuComponent_ng_container_1_li_1_Template_li_selectItem_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r6 = ɵngcc0.ɵɵnextContext(2); return ctx_r6.onSelectItem($event); })("itemClick", function NbMenuComponent_ng_container_1_li_1_Template_li_itemClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.onItemClick($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var item_r1 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵclassProp("menu-group", item_r1.group);
    ɵngcc0.ɵɵproperty("menuItem", item_r1);
} }
function NbMenuComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbMenuComponent_ng_container_1_li_1_Template, 1, 3, "li", 2);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var item_r1 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !item_r1.hidden);
} }
function NbRouteTabsetComponent_ng_container_1_li_1_nb_icon_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 8);
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;
    ɵngcc0.ɵɵproperty("config", tab_r1.icon);
} }
function NbRouteTabsetComponent_ng_container_1_li_1_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 9);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(tab_r1.title);
} }
function NbRouteTabsetComponent_ng_container_1_li_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "li", 4);
    ɵngcc0.ɵɵelementStart(1, "a", 5);
    ɵngcc0.ɵɵtemplate(2, NbRouteTabsetComponent_ng_container_1_li_1_nb_icon_2_Template, 1, 1, "nb-icon", 6);
    ɵngcc0.ɵɵtemplate(3, NbRouteTabsetComponent_ng_container_1_li_1_span_3_Template, 2, 1, "span", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵclassProp("responsive", tab_r1.responsive);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.title);
} }
function NbRouteTabsetComponent_ng_container_1_ng_template_2_nb_icon_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 12);
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;
    ɵngcc0.ɵɵproperty("icon", tab_r1.icon);
} }
function NbRouteTabsetComponent_ng_container_1_ng_template_2_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 9);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(tab_r1.title);
} }
function NbRouteTabsetComponent_ng_container_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    var _r15 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li", 10);
    ɵngcc0.ɵɵlistener("click", function NbRouteTabsetComponent_ng_container_1_ng_template_2_Template_li_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r15); var tab_r1 = ɵngcc0.ɵɵnextContext().$implicit; var ctx_r14 = ɵngcc0.ɵɵnextContext(); $event.preventDefault(); return ctx_r14.selectTab(tab_r1); });
    ɵngcc0.ɵɵelementStart(1, "a", 5);
    ɵngcc0.ɵɵtemplate(2, NbRouteTabsetComponent_ng_container_1_ng_template_2_nb_icon_2_Template, 1, 1, "nb-icon", 11);
    ɵngcc0.ɵɵtemplate(3, NbRouteTabsetComponent_ng_container_1_ng_template_2_span_3_Template, 2, 1, "span", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;
    var ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("responsive", tab_r1.responsive);
    ɵngcc0.ɵɵproperty("routerLink", tab_r1.route)("routerLinkActiveOptions", ctx_r4.activeLinkOptions);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.title);
} }
function NbRouteTabsetComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbRouteTabsetComponent_ng_container_1_li_1_Template, 4, 4, "li", 2);
    ɵngcc0.ɵɵtemplate(2, NbRouteTabsetComponent_ng_container_1_ng_template_2_Template, 4, 6, "ng-template", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var tab_r1 = ctx.$implicit;
    var _r3 = ɵngcc0.ɵɵreference(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.disabled)("ngIfElse", _r3);
} }
var _c14 = [[["nb-sidebar-header"]], "*", [["nb-sidebar-footer"]]];
var _c15 = ["nb-sidebar-header", "*", "nb-sidebar-footer"];
function NbTabComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵprojection(1);
    ɵngcc0.ɵɵelementContainerEnd();
} }
function NbTabsetComponent_li_1_nb_icon_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 7);
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵproperty("config", tab_r1.tabIcon);
} }
function NbTabsetComponent_li_1_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 8);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(tab_r1.tabTitle);
} }
function NbTabsetComponent_li_1_nb_badge_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-badge", 9);
} if (rf & 2) {
    var tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵproperty("text", tab_r1.badgeText)("status", tab_r1.badgeStatus)("position", tab_r1.badgePosition);
} }
function NbTabsetComponent_li_1_Template(rf, ctx) { if (rf & 1) {
    var _r9 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li", 2);
    ɵngcc0.ɵɵlistener("click", function NbTabsetComponent_li_1_Template_li_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); var tab_r1 = ctx.$implicit; var ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.selectTab(tab_r1); })("keyup.space", function NbTabsetComponent_li_1_Template_li_keyup_space_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); var tab_r1 = ctx.$implicit; var ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.selectTab(tab_r1); })("keyup.enter", function NbTabsetComponent_li_1_Template_li_keyup_enter_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); var tab_r1 = ctx.$implicit; var ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.selectTab(tab_r1); });
    ɵngcc0.ɵɵelementStart(1, "a", 3);
    ɵngcc0.ɵɵlistener("click", function NbTabsetComponent_li_1_Template_a_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r9); return $event.preventDefault(); });
    ɵngcc0.ɵɵtemplate(2, NbTabsetComponent_li_1_nb_icon_2_Template, 1, 1, "nb-icon", 4);
    ɵngcc0.ɵɵtemplate(3, NbTabsetComponent_li_1_span_3_Template, 2, 1, "span", 5);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(4, NbTabsetComponent_li_1_nb_badge_4_Template, 1, 3, "nb-badge", 6);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var tab_r1 = ctx.$implicit;
    ɵngcc0.ɵɵclassProp("responsive", tab_r1.responsive)("active", tab_r1.active)("disabled", tab_r1.disabled);
    ɵngcc0.ɵɵattribute("tabindex", tab_r1.disabled ? 0 - 1 : 0);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.tabIcon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.tabTitle);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", tab_r1.badgeText);
} }
var _c16 = [[["nb-tab"]]];
var _c17 = ["nb-tab"];
function NbUserComponent_div_1_nb_badge_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-badge", 8);
} if (rf & 2) {
    var ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("text", ctx_r4.badgeText)("status", ctx_r4.badgeStatus)("position", ctx_r4.badgePosition);
} }
function NbUserComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 6);
    ɵngcc0.ɵɵtemplate(1, NbUserComponent_div_1_nb_badge_1_Template, 1, 3, "nb-badge", 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵstyleProp("background-image", ctx_r0.imageBackgroundStyle, ɵngcc0.ɵɵdefaultStyleSanitizer);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.badgeText);
} }
function NbUserComponent_div_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r5.getInitials(), " ");
} }
function NbUserComponent_div_2_nb_badge_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-badge", 8);
} if (rf & 2) {
    var ctx_r6 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("text", ctx_r6.badgeText)("status", ctx_r6.badgeStatus)("position", ctx_r6.badgePosition);
} }
function NbUserComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 9);
    ɵngcc0.ɵɵtemplate(1, NbUserComponent_div_2_ng_container_1_Template, 2, 1, "ng-container", 10);
    ɵngcc0.ɵɵtemplate(2, NbUserComponent_div_2_nb_badge_2_Template, 1, 3, "nb-badge", 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵstyleProp("background-color", ctx_r1.color);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.showInitials);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.badgeText);
} }
function NbUserComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 11);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r2.name);
} }
function NbUserComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 12);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r3.title);
} }
function NbActionComponent_ng_container_0_a_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "a", 6);
    ɵngcc0.ɵɵelement(1, "nb-icon", 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("routerLink", ctx_r4.link)("title", ctx_r4.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("config", ctx_r4.icon);
} }
function NbActionComponent_ng_container_0_a_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "a", 8);
    ɵngcc0.ɵɵelement(1, "nb-icon", 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("href", ctx_r5.href, ɵngcc0.ɵɵsanitizeUrl)("title", ctx_r5.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("config", ctx_r5.icon);
} }
function NbActionComponent_ng_container_0_a_3_Template(rf, ctx) { if (rf & 1) {
    var _r8 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "a", 9);
    ɵngcc0.ɵɵlistener("click", function NbActionComponent_ng_container_0_a_3_Template_a_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); return $event.preventDefault(); });
    ɵngcc0.ɵɵelement(1, "nb-icon", 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r6 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("title", ctx_r6.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("config", ctx_r6.icon);
} }
function NbActionComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbActionComponent_ng_container_0_a_1_Template, 2, 3, "a", 3);
    ɵngcc0.ɵɵtemplate(2, NbActionComponent_ng_container_0_a_2_Template, 2, 3, "a", 4);
    ɵngcc0.ɵɵtemplate(3, NbActionComponent_ng_container_0_a_3_Template, 2, 2, "a", 5);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.link);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.href && !ctx_r0.link);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r0.href && !ctx_r0.link);
} }
function NbActionComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0);
} }
function NbActionComponent_nb_badge_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-badge", 10);
} if (rf & 2) {
    var ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("text", ctx_r3.badgeText)("status", ctx_r3.badgeStatus)("position", ctx_r3.badgePosition);
} }
var _c18 = [[["nb-action"]]];
var _c19 = ["nb-action"];
var _c20 = ["searchInput"];
var _c21 = ["searchButton"];
function NbSearchComponent_nb_search_field_3_Template(rf, ctx) { if (rf & 1) {
    var _r3 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nb-search-field", 4);
    ɵngcc0.ɵɵlistener("search", function NbSearchComponent_nb_search_field_3_Template_nb_search_field_search_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.search($event); })("searchInput", function NbSearchComponent_nb_search_field_3_Template_nb_search_field_searchInput_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.emitInput($event); })("close", function NbSearchComponent_nb_search_field_3_Template_nb_search_field_close_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.emitDeactivate(); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("show", ctx_r1.showSearchField)("type", ctx_r1.type)("placeholder", ctx_r1.placeholder)("hint", ctx_r1.hint);
} }
function NbCheckboxComponent_nb_icon_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 6);
} }
function NbCheckboxComponent_nb_icon_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 7);
} }
function NbProgressBarComponent_span_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1("", ctx_r0.value, "%");
} }
function NbAlertComponent_button_0_Template(rf, ctx) { if (rf & 1) {
    var _r2 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 1);
    ɵngcc0.ɵɵlistener("click", function NbAlertComponent_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); var ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.onClose(); });
    ɵngcc0.ɵɵelementStart(1, "span", 2);
    ɵngcc0.ɵɵtext(2, "\u00D7");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} }
function NbChatFormComponent_div_0_ng_container_1_div_1_Template(rf, ctx) { if (rf & 1) {
    var _r8 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div");
    ɵngcc0.ɵɵelementStart(1, "span", 8);
    ɵngcc0.ɵɵlistener("click", function NbChatFormComponent_div_0_ng_container_1_div_1_Template_span_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r8); var file_r3 = ɵngcc0.ɵɵnextContext().$implicit; var ctx_r6 = ɵngcc0.ɵɵnextContext(2); return ctx_r6.removeFile(file_r3); });
    ɵngcc0.ɵɵtext(2, "\u00D7");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var file_r3 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵstyleProp("background-image", file_r3.urlStyle, ɵngcc0.ɵɵdefaultStyleSanitizer);
} }
function NbChatFormComponent_div_0_ng_container_1_nb_icon_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 9);
} }
function NbChatFormComponent_div_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r11 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbChatFormComponent_div_0_ng_container_1_div_1_Template, 3, 2, "div", 6);
    ɵngcc0.ɵɵelementStart(2, "div");
    ɵngcc0.ɵɵtemplate(3, NbChatFormComponent_div_0_ng_container_1_nb_icon_3_Template, 1, 0, "nb-icon", 7);
    ɵngcc0.ɵɵelementStart(4, "span", 8);
    ɵngcc0.ɵɵlistener("click", function NbChatFormComponent_div_0_ng_container_1_Template_span_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r11); var file_r3 = ctx.$implicit; var ctx_r10 = ɵngcc0.ɵɵnextContext(2); return ctx_r10.removeFile(file_r3); });
    ɵngcc0.ɵɵtext(5, "\u00D7");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var file_r3 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", file_r3.urlStyle);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", !file_r3.urlStyle);
} }
function NbChatFormComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 4);
    ɵngcc0.ɵɵtemplate(1, NbChatFormComponent_div_0_ng_container_1_Template, 6, 2, "ng-container", 5);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r0.droppedFiles);
} }
function NbChatFormComponent_button_3_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 13);
} if (rf & 2) {
    var ctx_r12 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("icon", ctx_r12.buttonIcon);
} }
function NbChatFormComponent_button_3_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtext(0);
} if (rf & 2) {
    var ctx_r14 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r14.buttonTitle);
} }
function NbChatFormComponent_button_3_Template(rf, ctx) { if (rf & 1) {
    var _r16 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 10);
    ɵngcc0.ɵɵlistener("click", function NbChatFormComponent_button_3_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); var ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.sendMessage(); });
    ɵngcc0.ɵɵtemplate(1, NbChatFormComponent_button_3_nb_icon_1_Template, 1, 1, "nb-icon", 11);
    ɵngcc0.ɵɵtemplate(2, NbChatFormComponent_button_3_ng_template_2_Template, 1, 1, "ng-template", null, 12, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var _r13 = ɵngcc0.ɵɵreference(3);
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("with-icon", !ctx_r1.buttonTitle);
    ɵngcc0.ɵɵproperty("status", ctx_r1.getButtonStatus());
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.buttonTitle)("ngIfElse", _r13);
} }
function NbChatMessageComponent_div_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r5.getInitials(), " ");
} }
function NbChatMessageComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 7);
    ɵngcc0.ɵɵtemplate(1, NbChatMessageComponent_div_0_ng_container_1_Template, 2, 1, "ng-container", 8);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵstyleProp("background-image", ctx_r0.avatarStyle, ɵngcc0.ɵɵdefaultStyleSanitizer);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r0.avatarStyle);
} }
function NbChatMessageComponent_nb_chat_message_file_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-chat-message-file", 9);
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("sender", ctx_r1.sender)("date", ctx_r1.date)("dateFormat", ctx_r1.dateFormat)("message", ctx_r1.message)("files", ctx_r1.files);
} }
function NbChatMessageComponent_nb_chat_message_quote_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-chat-message-quote", 10);
} if (rf & 2) {
    var ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("sender", ctx_r2.sender)("date", ctx_r2.date)("dateFormat", ctx_r2.dateFormat)("message", ctx_r2.message)("quote", ctx_r2.quote);
} }
function NbChatMessageComponent_nb_chat_message_map_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-chat-message-map", 11);
} if (rf & 2) {
    var ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("sender", ctx_r3.sender)("date", ctx_r3.date)("message", ctx_r3.message)("latitude", ctx_r3.latitude)("longitude", ctx_r3.longitude);
} }
function NbChatMessageComponent_nb_chat_message_text_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-chat-message-text", 12);
} if (rf & 2) {
    var ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("sender", ctx_r4.sender)("date", ctx_r4.date)("dateFormat", ctx_r4.dateFormat)("message", ctx_r4.message);
} }
var _c22 = ["scrollable"];
function NbChatComponent_p_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "p", 6);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.noMessagesPlaceholder);
} }
var _c23 = [[["nb-chat-message"]], [["nb-chat-form"]]];
var _c24 = ["nb-chat-message", "nb-chat-form"];
var _c25 = function (a0) { return [a0]; };
function NbChatMessageFileComponent_ng_container_2_a_2_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 7);
} if (rf & 2) {
    var file_r3 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵproperty("icon", file_r3.icon);
} }
function NbChatMessageFileComponent_ng_container_2_a_2_div_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div");
} if (rf & 2) {
    var file_r3 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵstyleProp("background-image", file_r3.urlStyle, ɵngcc0.ɵɵdefaultStyleSanitizer);
} }
function NbChatMessageFileComponent_ng_container_2_a_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "a", 4);
    ɵngcc0.ɵɵtemplate(1, NbChatMessageFileComponent_ng_container_2_a_2_nb_icon_1_Template, 1, 1, "nb-icon", 5);
    ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_2_a_2_div_2_Template, 1, 2, "div", 6);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var file_r3 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("href", file_r3.url, ɵngcc0.ɵɵsanitizeUrl);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !file_r3.urlStyle && file_r3.icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", file_r3.urlStyle);
} }
function NbChatMessageFileComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "div", 2);
    ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_2_a_2_Template, 3, 3, "a", 3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r0.readyFiles);
} }
function NbChatMessageFileComponent_ng_container_3_nb_icon_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 7);
} if (rf & 2) {
    var ctx_r8 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("icon", ctx_r8.readyFiles[0].icon);
} }
function NbChatMessageFileComponent_ng_container_3_div_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div");
} if (rf & 2) {
    var ctx_r9 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵstyleProp("background-image", ctx_r9.readyFiles[0].urlStyle, ɵngcc0.ɵɵdefaultStyleSanitizer);
} }
function NbChatMessageFileComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "a", 4);
    ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_3_nb_icon_2_Template, 1, 1, "nb-icon", 5);
    ɵngcc0.ɵɵtemplate(3, NbChatMessageFileComponent_ng_container_3_div_3_Template, 1, 2, "div", 6);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("href", ctx_r1.readyFiles[0].url, ɵngcc0.ɵɵsanitizeUrl);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.readyFiles[0].urlStyle && ctx_r1.readyFiles[0].icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.readyFiles[0].urlStyle);
} }
function NbChatMessageQuoteComponent_p_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "p", 3);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementStart(2, "time");
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵpipe(4, "date");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1("", ctx_r0.sender, " ");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(4, 2, ctx_r0.date, ctx_r0.dateFormat));
} }
function NbChatMessageTextComponent_p_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "p", 2);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementStart(2, "time");
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵpipe(4, "date");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1("", ctx_r0.sender, " ");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(4, 2, ctx_r0.date, ctx_r0.dateFormat));
} }
function NbChatMessageTextComponent_p_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "p", 3);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.message);
} }
function NbSpinnerComponent_span_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 2);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.message);
} }
function NbStepComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0);
} }
function NbStepperComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0);
} }
function NbStepperComponent_ng_container_2_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 6);
} if (rf & 2) {
    var index_r3 = ɵngcc0.ɵɵnextContext().index;
    var ctx_r5 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("connector-past", index_r3 <= ctx_r5.selectedIndex);
} }
function NbStepperComponent_ng_container_2_div_2_span_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var index_r3 = ɵngcc0.ɵɵnextContext(2).index;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(index_r3 + 1);
} }
function NbStepperComponent_ng_container_2_div_2_nb_icon_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 12);
} }
function NbStepperComponent_ng_container_2_div_2_ng_container_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0);
} }
function NbStepperComponent_ng_container_2_div_2_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbStepperComponent_ng_container_2_div_2_ng_container_5_ng_container_1_Template, 1, 0, "ng-container", 13);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var step_r2 = ɵngcc0.ɵɵnextContext(2).$implicit;
    var ctx_r10 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r10.getStepTemplate(step_r2));
} }
function NbStepperComponent_ng_container_2_div_2_span_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var step_r2 = ɵngcc0.ɵɵnextContext(2).$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(step_r2.label);
} }
function NbStepperComponent_ng_container_2_div_2_Template(rf, ctx) { if (rf & 1) {
    var _r17 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 7);
    ɵngcc0.ɵɵlistener("click", function NbStepperComponent_ng_container_2_div_2_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); var step_r2 = ɵngcc0.ɵɵnextContext().$implicit; var ctx_r16 = ɵngcc0.ɵɵnextContext(); return !ctx_r16.disableStepNavigation && step_r2.select(); });
    ɵngcc0.ɵɵelementStart(1, "div", 8);
    ɵngcc0.ɵɵtemplate(2, NbStepperComponent_ng_container_2_div_2_span_2_Template, 2, 1, "span", 9);
    ɵngcc0.ɵɵtemplate(3, NbStepperComponent_ng_container_2_div_2_nb_icon_3_Template, 1, 0, "nb-icon", 10);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(4, "div", 11);
    ɵngcc0.ɵɵtemplate(5, NbStepperComponent_ng_container_2_div_2_ng_container_5_Template, 2, 1, "ng-container", 9);
    ɵngcc0.ɵɵtemplate(6, NbStepperComponent_ng_container_2_div_2_span_6_Template, 2, 1, "span", 9);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var step_r2 = ɵngcc0.ɵɵnextContext().$implicit;
    var ctx_r6 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("selected", ctx_r6.isStepSelected(step_r2))("completed", !ctx_r6.isStepSelected(step_r2) && step_r2.completed)("noninteractive", ctx_r6.disableStepNavigation);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", !step_r2.completed || ctx_r6.isStepSelected(step_r2));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r6.isStepSelected(step_r2) && step_r2.completed);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", step_r2.isLabelTemplate);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !step_r2.isLabelTemplate);
} }
function NbStepperComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbStepperComponent_ng_container_2_div_1_Template, 1, 2, "div", 4);
    ɵngcc0.ɵɵtemplate(2, NbStepperComponent_ng_container_2_div_2_Template, 7, 10, "div", 5);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var step_r2 = ctx.$implicit;
    var first_r4 = ctx.first;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !first_r4 && !step_r2.hidden);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !step_r2.hidden);
} }
var _c26 = [[["nb-step"]]];
var _c27 = ["nb-step"];
var _c28 = [[["nb-accordion-item"]]];
var _c29 = ["nb-accordion-item"];
var _c30 = [[["nb-accordion-item-header"]], [["nb-accordion-item-body"]]];
var _c31 = ["nb-accordion-item-header", "nb-accordion-item-body"];
var _c32 = function (a0) { return { value: a0 }; };
function NbAccordionItemHeaderComponent_nb_icon_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 1);
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("@expansionIndicator", ctx_r0.state);
} }
var _c33 = [[["nb-accordion-item-title"]], [["nb-accordion-item-description"]], "*"];
var _c34 = ["nb-accordion-item-title", "nb-accordion-item-description", "*"];
var _c35 = [[["nb-list-item"]]];
var _c36 = ["nb-list-item"];
function NbDialogContainerComponent_ng_template_0_Template(rf, ctx) { }
function NbToastComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 4);
    ɵngcc0.ɵɵelement(1, "nb-icon", 5);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("config", ctx_r0.iconConfig);
} }
function NbToastrContainerComponent_nb_toast_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-toast", 1);
} if (rf & 2) {
    var toast_r1 = ctx.$implicit;
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("@fadeIn", ctx_r0.fadeIn)("toast", toast_r1);
} }
function NbTooltipComponent_nb_icon_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 4);
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("config", ctx_r0.context.icon);
} }
function NbTooltipComponent_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.content);
} }
function NbOptionComponent_nb_checkbox_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-checkbox", 1);
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("checked", ctx_r0.selected)("disabled", ctx_r0.disabled);
} }
var _c37 = ["selectButton"];
function NbSelectComponent_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵprojection(1);
    ɵngcc0.ɵɵelementContainerEnd();
} }
function NbSelectComponent_ng_container_2_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtext(0);
} if (rf & 2) {
    var ctx_r7 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r7.selectionView);
} }
function NbSelectComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbSelectComponent_ng_container_2_ng_container_1_Template, 2, 0, "ng-container", 2);
    ɵngcc0.ɵɵtemplate(2, NbSelectComponent_ng_container_2_ng_template_2_Template, 1, 1, "ng-template", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var _r6 = ɵngcc0.ɵɵreference(3);
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.customLabel)("ngIfElse", _r6);
} }
function NbSelectComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtext(0);
} if (rf & 2) {
    var ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵtextInterpolate(ctx_r3.placeholder);
} }
function NbSelectComponent_nb_option_list_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nb-option-list", 7);
    ɵngcc0.ɵɵprojection(1, 1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵstyleProp("width", ctx_r4.hostWidth, "px");
    ɵngcc0.ɵɵproperty("size", ctx_r4.size)("position", ctx_r4.overlayPosition);
} }
var _c38 = [[["nb-select-label"]], [["nb-option"], ["nb-option-group"]]];
var _c39 = ["nb-select-label", "nb-option, nb-option-group"];
var _c40 = [[["nb-option"], ["ng-container"]]];
var _c41 = ["nb-option, ng-container"];
function NbAutocompleteComponent_nb_option_list_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nb-option-list", 1);
    ɵngcc0.ɵɵprojection(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵstyleProp("width", ctx_r0.hostWidth, "px");
    ɵngcc0.ɵɵclassProp("empty", !(ctx_r0.options == null ? null : ctx_r0.options.length));
    ɵngcc0.ɵɵproperty("size", ctx_r0.size)("position", ctx_r0.overlayPosition)("id", ctx_r0.id);
} }
var _c42 = [[["nb-option"], ["nb-option-group"]]];
var _c43 = ["nb-option, nb-option-group"];
var _c44 = ["viewContainerRef"];
function NbWindowComponent_button_7_Template(rf, ctx) { if (rf & 1) {
    var _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 2);
    ɵngcc0.ɵɵlistener("click", function NbWindowComponent_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.maximize(); });
    ɵngcc0.ɵɵelement(1, "nb-icon", 7);
    ɵngcc0.ɵɵelementEnd();
} }
function NbWindowComponent_button_8_Template(rf, ctx) { if (rf & 1) {
    var _r6 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 2);
    ɵngcc0.ɵɵlistener("click", function NbWindowComponent_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); var ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.maximizeOrFullScreen(); });
    ɵngcc0.ɵɵelement(1, "nb-icon", 8);
    ɵngcc0.ɵɵelementEnd();
} }
function NbWindowComponent_nb_card_body_11_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nb-card-body");
    ɵngcc0.ɵɵelement(1, "nb-overlay-container");
    ɵngcc0.ɵɵelementEnd();
} }
var _c45 = ["input"];
var _c46 = [[["nb-radio"]]];
var _c47 = ["nb-radio"];
function NbSortIconComponent_ng_container_0_nb_icon_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 3);
} }
function NbSortIconComponent_ng_container_0_nb_icon_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 4);
} }
function NbSortIconComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, NbSortIconComponent_ng_container_0_nb_icon_1_Template, 1, 0, "nb-icon", 1);
    ɵngcc0.ɵɵtemplate(2, NbSortIconComponent_ng_container_0_nb_icon_2_Template, 1, 0, "nb-icon", 2);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.isAscending());
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.isDescending());
} }
var _c48 = ["nbSortHeader", ""];
function NbSortHeaderComponent_nb_sort_icon_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-sort-icon", 4);
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("direction", ctx_r0.direction);
} }
function NbSortHeaderComponent_ng_template_3_Template(rf, ctx) { }
var _c49 = ["nbTreeGrid", ""];
var _c50 = ["nbTreeGridRow", ""];
var _c51 = ["nbTreeGridHeaderRow", ""];
var _c52 = ["nbTreeGridFooterRow", ""];
function NbToggleComponent_nb_icon_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nb-icon", 6);
} }
function NbFormFieldComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 2);
    ɵngcc0.ɵɵpipe(1, "async");
    ɵngcc0.ɵɵprojection(2, 1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r0.prefixClasses$));
} }
function NbFormFieldComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 2);
    ɵngcc0.ɵɵpipe(1, "async");
    ɵngcc0.ɵɵprojection(2, 2);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r1.suffixClasses$));
} }
var _c53 = ["*", [["", "nbPrefix", ""]], [["", "nbSuffix", ""]]];
var _c54 = ["*", "[nbPrefix]", "[nbSuffix]"];
var NB_THEME_OPTIONS = new InjectionToken('Nebular Theme Options');
var NB_MEDIA_BREAKPOINTS = new InjectionToken('Nebular Media Breakpoints');
var NB_BUILT_IN_JS_THEMES = new InjectionToken('Nebular Built-in JS Themes');
var NB_JS_THEMES = new InjectionToken('Nebular JS Themes');
/**
 * We're providing browser apis with tokens to improve testing capabilities.
 * */
var NB_WINDOW = new InjectionToken('Window');
var NB_DOCUMENT = new InjectionToken('Document');

var palette = {
    primary: '#3366ff',
    success: '#00d68f',
    info: '#0095ff',
    warning: '#ffaa00',
    danger: '#ff3d71',
};
var DEFAULT_THEME = {
    name: 'default',
    variables: {
        fontMain: 'Open Sans, sans-serif',
        fontSecondary: 'Raleway, sans-serif',
        bg: '#ffffff',
        bg2: '#f7f9fc',
        bg3: '#edf1f7',
        bg4: '#e4e9f2',
        border: '#ffffff',
        border2: '#f7f9fc',
        border3: '#edf1f7',
        border4: '#e4e9f2',
        border5: '#c5cee0',
        fg: '#8f9bb3',
        fgHeading: '#1a2138',
        fgText: '#1a2138',
        fgHighlight: palette.primary,
        layoutBg: '#f7f9fc',
        separator: '#edf1f7',
        primary: palette.primary,
        success: palette.success,
        info: palette.info,
        warning: palette.warning,
        danger: palette.danger,
        primaryLight: '#598bff',
        successLight: '#2ce69b',
        infoLight: '#42aaff',
        warningLight: '#ffc94d',
        dangerLight: '#ff708d',
    },
};

var palette$1 = {
    primary: '#a16eff',
    success: '#00d68f',
    info: '#0095ff',
    warning: '#ffaa00',
    danger: '#ff3d71',
};
var COSMIC_THEME = {
    name: 'cosmic',
    variables: {
        fontMain: 'Open Sans, sans-serif',
        fontSecondary: 'Raleway, sans-serif',
        bg: '#323259',
        bg2: '#252547',
        bg3: '#1b1b38',
        bg4: '#13132b',
        border: '#323259',
        border2: '#252547',
        border3: '#1b1b38',
        border4: '#13132b',
        border5: '#13132b',
        fg: '#b4b4db',
        fgHeading: '#ffffff',
        fgText: '#ffffff',
        fgHighlight: palette$1.primary,
        layoutBg: '#151a30',
        separator: '#151a30',
        primary: palette$1.primary,
        success: palette$1.success,
        info: palette$1.info,
        warning: palette$1.warning,
        danger: palette$1.danger,
        primaryLight: '#b18aff',
        successLight: '#2ce69b',
        infoLight: '#42aaff',
        warningLight: '#ffc94d',
        dangerLight: '#ff708d',
    },
};

var palette$2 = {
    primary: '#73a1ff',
    success: '#5dcfe3',
    info: '#ba7fec',
    warning: '#ffa36b',
    danger: '#ff6b83',
};
var CORPORATE_THEME = {
    name: 'corporate',
    base: 'default',
    variables: {
        fontMain: 'Open Sans, sans-serif',
        fontSecondary: 'Raleway, sans-serif',
        bg: '#ffffff',
        bg2: '#f7f9fc',
        bg3: '#edf1f7',
        bg4: '#e4e9f2',
        border: '#ffffff',
        border2: '#f7f9fc',
        border3: '#edf1f7',
        border4: '#e4e9f2',
        border5: '#c5cee0',
        fg: '#8f9bb3',
        fgHeading: '#1a2138',
        fgText: '#1a2138',
        fgHighlight: palette$2.primary,
        layoutBg: '#f7f9fc',
        separator: '#edf1f7',
        primary: palette$2.primary,
        success: palette$2.success,
        info: palette$2.info,
        warning: palette$2.warning,
        danger: palette$2.danger,
        primaryLight: '#598bff',
        successLight: '#2ce69b',
        infoLight: '#42aaff',
        warningLight: '#ffc94d',
        dangerLight: '#ff708d',
    },
};

var palette$3 = {
    primary: '#3366ff',
    success: '#00d68f',
    info: '#0095ff',
    warning: '#ffaa00',
    danger: '#ff3d71',
};
var DARK_THEME = {
    name: 'dark',
    variables: {
        fontMain: 'Open Sans, sans-serif',
        fontSecondary: 'Raleway, sans-serif',
        bg: '#222b45',
        bg2: '#1a2138',
        bg3: '#151a30',
        bg4: '#101426',
        border: '#222b45',
        border2: '#1a2138',
        border3: '#151a30',
        border4: '#101426',
        border5: '#101426',
        fg: '#8f9bb3',
        fgHeading: '#ffffff',
        fgText: '#ffffff',
        fgHighlight: palette$3.primary,
        layoutBg: '#1b1b38',
        separator: '#1b1b38',
        primary: palette$3.primary,
        success: palette$3.success,
        info: palette$3.info,
        warning: palette$3.warning,
        danger: palette$3.danger,
        primaryLight: '#598bff',
        successLight: '#2ce69b',
        infoLight: '#42aaff',
        warningLight: '#ffc94d',
        dangerLight: '#ff708d',
    },
};

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var BUILT_IN_THEMES = [
    DEFAULT_THEME,
    COSMIC_THEME,
    CORPORATE_THEME,
    DARK_THEME,
];
/**
 * Js Themes registry - provides access to the JS themes' variables.
 * Usually shouldn't be used directly, but through the NbThemeService class methods (getJsTheme).
 */
var NbJSThemesRegistry = /** @class */ (function () {
    function NbJSThemesRegistry(builtInThemes, newThemes) {
        var _this = this;
        if (newThemes === void 0) { newThemes = []; }
        this.themes = {};
        var themes = this.combineByNames(newThemes, builtInThemes);
        themes.forEach(function (theme) {
            _this.register(theme, theme.name, theme.base);
        });
    }
    /**
     * Registers a new JS theme
     * @param config any
     * @param themeName string
     * @param baseTheme string
     */
    NbJSThemesRegistry.prototype.register = function (config, themeName, baseTheme) {
        var base = this.has(baseTheme) ? this.get(baseTheme) : {};
        this.themes[themeName] = this.mergeDeep({}, base, config);
    };
    /**
     * Checks whether the theme is registered
     * @param themeName
     * @returns boolean
     */
    NbJSThemesRegistry.prototype.has = function (themeName) {
        return !!this.themes[themeName];
    };
    /**
     * Return a theme
     * @param themeName
     * @returns NbJSThemeOptions
     */
    NbJSThemesRegistry.prototype.get = function (themeName) {
        if (!this.themes[themeName]) {
            throw Error("NbThemeConfig: no theme '" + themeName + "' found registered.");
        }
        return JSON.parse(JSON.stringify(this.themes[themeName]));
    };
    NbJSThemesRegistry.prototype.combineByNames = function (newThemes, oldThemes) {
        var _this = this;
        if (newThemes) {
            var mergedThemes_1 = [];
            newThemes.forEach(function (theme) {
                var sameOld = oldThemes.find(function (tm) { return tm.name === theme.name; })
                    || {};
                var mergedTheme = _this.mergeDeep({}, sameOld, theme);
                mergedThemes_1.push(mergedTheme);
            });
            oldThemes.forEach(function (theme) {
                if (!mergedThemes_1.find(function (tm) { return tm.name === theme.name; })) {
                    mergedThemes_1.push(theme);
                }
            });
            return mergedThemes_1;
        }
        return oldThemes;
    };
    NbJSThemesRegistry.prototype.isObject = function (item) {
        return item && typeof item === 'object' && !Array.isArray(item);
    };
    // TODO: move to helpers
    NbJSThemesRegistry.prototype.mergeDeep = function (target) {
        var _a, _b;
        var sources = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            sources[_i - 1] = arguments[_i];
        }
        if (!sources.length) {
            return target;
        }
        var source = sources.shift();
        if (this.isObject(target) && this.isObject(source)) {
            for (var key in source) {
                if (this.isObject(source[key])) {
                    if (!target[key]) {
                        Object.assign(target, (_a = {}, _a[key] = {}, _a));
                    }
                    this.mergeDeep(target[key], source[key]);
                }
                else {
                    Object.assign(target, (_b = {}, _b[key] = source[key], _b));
                }
            }
        }
        return this.mergeDeep.apply(this, __spreadArrays([target], sources));
    };
    NbJSThemesRegistry = __decorate([ __param(0, Inject(NB_BUILT_IN_JS_THEMES)),
        __param(1, Inject(NB_JS_THEMES)),
        __metadata("design:paramtypes", [Array, Array])
    ], NbJSThemesRegistry);
NbJSThemesRegistry.ɵfac = function NbJSThemesRegistry_Factory(t) { return new (t || NbJSThemesRegistry)(ɵngcc0.ɵɵinject(NB_BUILT_IN_JS_THEMES), ɵngcc0.ɵɵinject(NB_JS_THEMES)); };
NbJSThemesRegistry.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbJSThemesRegistry, factory: function (t) { return NbJSThemesRegistry.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbJSThemesRegistry, [{
        type: Injectable
    }], function () { return [{ type: Array, decorators: [{
                type: Inject,
                args: [NB_BUILT_IN_JS_THEMES]
            }] }, { type: Array, decorators: [{
                type: Inject,
                args: [NB_JS_THEMES]
            }] }]; }, null); })();
    return NbJSThemesRegistry;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var DEFAULT_MEDIA_BREAKPOINTS = [
    {
        name: 'xs',
        width: 0,
    },
    {
        name: 'is',
        width: 400,
    },
    {
        name: 'sm',
        width: 576,
    },
    {
        name: 'md',
        width: 768,
    },
    {
        name: 'lg',
        width: 992,
    },
    {
        name: 'xl',
        width: 1200,
    },
    {
        name: 'xxl',
        width: 1400,
    },
    {
        name: 'xxxl',
        width: 1600,
    },
];
/**
 * Manages media breakpoints
 *
 * Provides access to available media breakpoints to convert window width to a configured breakpoint,
 * e.g. 200px - *xs* breakpoint
 */
var NbMediaBreakpointsService = /** @class */ (function () {
    function NbMediaBreakpointsService(breakpoints) {
        this.breakpoints = breakpoints;
        this.breakpointsMap = this.breakpoints.reduce(function (res, b) {
            res[b.name] = b.width;
            return res;
        }, {});
    }
    /**
     * Returns a configured breakpoint by width
     * @param width number
     * @returns {Z|{name: string, width: number}}
     */
    NbMediaBreakpointsService.prototype.getByWidth = function (width) {
        var unknown = { name: 'unknown', width: width };
        var breakpoints = this.getBreakpoints();
        return breakpoints
            .find(function (point, index) {
            var next = breakpoints[index + 1];
            return width >= point.width && (!next || width < next.width);
        }) || unknown;
    };
    /**
     * Returns a configured breakpoint by name
     * @param name string
     * @returns NbMediaBreakpoint
     */
    NbMediaBreakpointsService.prototype.getByName = function (name) {
        var unknown = { name: 'unknown', width: NaN };
        var breakpoints = this.getBreakpoints();
        return breakpoints.find(function (point) { return name === point.name; }) || unknown;
    };
    /**
     * Returns a list of configured breakpoints for the theme
     * @returns NbMediaBreakpoint[]
     */
    NbMediaBreakpointsService.prototype.getBreakpoints = function () {
        return this.breakpoints;
    };
    /**
     * Returns a map of configured breakpoints for the theme
     * @returns {[p: string]: number}
     */
    NbMediaBreakpointsService.prototype.getBreakpointsMap = function () {
        return this.breakpointsMap;
    };
    NbMediaBreakpointsService = __decorate([ __param(0, Inject(NB_MEDIA_BREAKPOINTS)),
        __metadata("design:paramtypes", [Object])
    ], NbMediaBreakpointsService);
NbMediaBreakpointsService.ɵfac = function NbMediaBreakpointsService_Factory(t) { return new (t || NbMediaBreakpointsService)(ɵngcc0.ɵɵinject(NB_MEDIA_BREAKPOINTS)); };
NbMediaBreakpointsService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbMediaBreakpointsService, factory: function (t) { return NbMediaBreakpointsService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbMediaBreakpointsService, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_MEDIA_BREAKPOINTS]
            }] }]; }, null); })();
    return NbMediaBreakpointsService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Main Nebular service. Includes various helper methods.
 */
var NbThemeService = /** @class */ (function () {
    function NbThemeService(options, breakpointService, jsThemesRegistry) {
        this.options = options;
        this.breakpointService = breakpointService;
        this.jsThemesRegistry = jsThemesRegistry;
        this.themeChanges$ = new ReplaySubject(1);
        this.appendLayoutClass$ = new Subject();
        this.removeLayoutClass$ = new Subject();
        this.changeWindowWidth$ = new ReplaySubject(2);
        if (options && options.name) {
            this.changeTheme(options.name);
        }
    }
    /**
     * Change current application theme
     * @param {string} name
     */
    NbThemeService.prototype.changeTheme = function (name) {
        this.themeChanges$.next({ name: name, previous: this.currentTheme });
        this.currentTheme = name;
    };
    NbThemeService.prototype.changeWindowWidth = function (width) {
        this.changeWindowWidth$.next(width);
    };
    /**
     * Returns a theme object with variables (color/paddings/etc) on a theme change.
     * Once subscribed - returns current theme.
     *
     * @returns {Observable<NbJSThemeOptions>}
     */
    NbThemeService.prototype.getJsTheme = function () {
        var _this = this;
        return this.onThemeChange().pipe(map(function (theme) {
            return _this.jsThemesRegistry.get(theme.name);
        }));
    };
    /**
     * Triggers media query breakpoint change
     * Returns a pair where the first item is previous media breakpoint and the second item is current breakpoit.
     * ```ts
     *  [{ name: 'xs', width: 0 }, { name: 'md', width: 768 }] // change from `xs` to `md`
     * ```
     * @returns {Observable<[NbMediaBreakpoint, NbMediaBreakpoint]>}
     */
    NbThemeService.prototype.onMediaQueryChange = function () {
        var _this = this;
        return this.changeWindowWidth$
            .pipe(startWith(undefined), pairwise(), map(function (_a) {
            var prevWidth = _a[0], width = _a[1];
            return [
                _this.breakpointService.getByWidth(prevWidth),
                _this.breakpointService.getByWidth(width),
            ];
        }), filter(function (_a) {
            var prevPoint = _a[0], point = _a[1];
            return prevPoint.name !== point.name;
        }), distinctUntilChanged(null, function (params) { return params[0].name + params[1].name; }), share());
    };
    /**
     * Triggered when current theme is changed
     * @returns {Observable<any>}
     */
    NbThemeService.prototype.onThemeChange = function () {
        return this.themeChanges$.pipe(share());
    };
    /**
     * Append a class to nb-layout
     * @param {string} className
     */
    NbThemeService.prototype.appendLayoutClass = function (className) {
        this.appendLayoutClass$.next(className);
    };
    /**
     * Triggered when a new class is added to nb-layout through `appendLayoutClass` method
     * @returns {Observable<any>}
     */
    NbThemeService.prototype.onAppendLayoutClass = function () {
        return this.appendLayoutClass$.pipe(share());
    };
    /**
     * Removes a class from nb-layout
     * @param {string} className
     */
    NbThemeService.prototype.removeLayoutClass = function (className) {
        this.removeLayoutClass$.next(className);
    };
    /**
     * Triggered when a class is removed from nb-layout through `removeLayoutClass` method
     * @returns {Observable<any>}
     */
    NbThemeService.prototype.onRemoveLayoutClass = function () {
        return this.removeLayoutClass$.pipe(share());
    };
    NbThemeService = __decorate([ __param(0, Inject(NB_THEME_OPTIONS)),
        __metadata("design:paramtypes", [Object, NbMediaBreakpointsService,
            NbJSThemesRegistry])
    ], NbThemeService);
NbThemeService.ɵfac = function NbThemeService_Factory(t) { return new (t || NbThemeService)(ɵngcc0.ɵɵinject(NB_THEME_OPTIONS), ɵngcc0.ɵɵinject(NbMediaBreakpointsService), ɵngcc0.ɵɵinject(NbJSThemesRegistry)); };
NbThemeService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbThemeService, factory: function (t) { return NbThemeService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbThemeService, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_THEME_OPTIONS]
            }] }, { type: NbMediaBreakpointsService }, { type: NbJSThemesRegistry }]; }, null); })();
    return NbThemeService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Service to control the global page spinner.
 */
var NbSpinnerService = /** @class */ (function () {
    function NbSpinnerService(document) {
        this.document = document;
        this.loaders = [];
        this.selector = 'nb-global-spinner';
    }
    /**
     * Appends new loader to the list of loader to be completed before
     * spinner will be hidden
     * @param method Promise<any>
     */
    NbSpinnerService.prototype.registerLoader = function (method) {
        this.loaders.push(method);
    };
    /**
     * Clears the list of loader
     */
    NbSpinnerService.prototype.clear = function () {
        this.loaders = [];
    };
    /**
     * Start the loader process, show spinnder and execute loaders
     */
    NbSpinnerService.prototype.load = function () {
        this.showSpinner();
        this.executeAll();
    };
    NbSpinnerService.prototype.executeAll = function (done) {
        var _this = this;
        if (done === void 0) { done = function () { }; }
        Promise.all(this.loaders).then(function (values) {
            _this.hideSpinner();
            done.call(null, values);
        })
            .catch(function (error) {
            // TODO: Promise.reject
            console.error(error);
        });
    };
    // TODO is there any better way of doing this?
    NbSpinnerService.prototype.showSpinner = function () {
        var el = this.getSpinnerElement();
        if (el) {
            el.style['display'] = 'block';
        }
    };
    NbSpinnerService.prototype.hideSpinner = function () {
        var el = this.getSpinnerElement();
        if (el) {
            el.style['display'] = 'none';
        }
    };
    NbSpinnerService.prototype.getSpinnerElement = function () {
        return this.document.getElementById(this.selector);
    };
    NbSpinnerService = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [Object])
    ], NbSpinnerService);
NbSpinnerService.ɵfac = function NbSpinnerService_Factory(t) { return new (t || NbSpinnerService)(ɵngcc0.ɵɵinject(NB_DOCUMENT)); };
NbSpinnerService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbSpinnerService, factory: function (t) { return NbSpinnerService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSpinnerService, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }]; }, null); })();
    return NbSpinnerService;
}());

/**
 * Layout direction.
 * */
var NbLayoutDirection;
(function (NbLayoutDirection) {
    NbLayoutDirection["LTR"] = "ltr";
    NbLayoutDirection["RTL"] = "rtl";
})(NbLayoutDirection || (NbLayoutDirection = {}));

/**
 * Layout direction setting injection token.
 * */
var NB_LAYOUT_DIRECTION = new InjectionToken('Layout direction');
/**
 * Layout Direction Service.
 * Allows to set or get layout direction and listen to its changes
 */
var NbLayoutDirectionService = /** @class */ (function () {
    function NbLayoutDirectionService(direction) {
        if (direction === void 0) { direction = NbLayoutDirection.LTR; }
        this.direction = direction;
        this.$directionChange = new ReplaySubject(1);
        this.setDirection(direction);
    }
    /**
     * Returns true if layout direction set to left to right.
     * @returns boolean.
     * */
    NbLayoutDirectionService.prototype.isLtr = function () {
        return this.direction === NbLayoutDirection.LTR;
    };
    /**
     * Returns true if layout direction set to right to left.
     * @returns boolean.
     * */
    NbLayoutDirectionService.prototype.isRtl = function () {
        return this.direction === NbLayoutDirection.RTL;
    };
    /**
     * Returns current layout direction.
     * @returns NbLayoutDirection.
     * */
    NbLayoutDirectionService.prototype.getDirection = function () {
        return this.direction;
    };
    /**
     * Sets layout direction
     * @param {NbLayoutDirection} direction
     */
    NbLayoutDirectionService.prototype.setDirection = function (direction) {
        this.direction = direction;
        this.$directionChange.next(direction);
    };
    /**
     * Triggered when direction was changed.
     * @returns Observable<NbLayoutDirection>.
     */
    NbLayoutDirectionService.prototype.onDirectionChange = function () {
        return this.$directionChange.pipe(share());
    };
    NbLayoutDirectionService = __decorate([ __param(0, Optional()), __param(0, Inject(NB_LAYOUT_DIRECTION)),
        __metadata("design:paramtypes", [Object])
    ], NbLayoutDirectionService);
NbLayoutDirectionService.ɵfac = function NbLayoutDirectionService_Factory(t) { return new (t || NbLayoutDirectionService)(ɵngcc0.ɵɵinject(NB_LAYOUT_DIRECTION, 8)); };
NbLayoutDirectionService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbLayoutDirectionService, factory: function (t) { return NbLayoutDirectionService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutDirectionService, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [NB_LAYOUT_DIRECTION]
            }] }]; }, null); })();
    return NbLayoutDirectionService;
}());

/**
 * Layout scroll service. Provides information about current scroll position,
 * as well as methods to update position of the scroll.
 *
 * The reason we added this service is that in Nebular there are two scroll modes:
 * - the default mode when scroll is on body
 * - and the `withScroll` mode, when scroll is removed from the body and moved to an element inside of the
 * `nb-layout` component
 */
var NbLayoutScrollService = /** @class */ (function () {
    function NbLayoutScrollService() {
        this.scrollPositionReq$ = new Subject();
        this.manualScroll$ = new Subject();
        this.scroll$ = new Subject();
        this.scrollable$ = new Subject();
    }
    /**
     * Returns scroll position
     *
     * @returns {Observable<NbScrollPosition>}
     */
    NbLayoutScrollService.prototype.getPosition = function () {
        var _this = this;
        return Observable.create(function (observer) {
            var listener = new Subject();
            listener.subscribe(observer);
            _this.scrollPositionReq$.next({ listener: listener });
            return function () { return listener.complete(); };
        });
    };
    /**
     * Sets scroll position
     *
     * @param {number} x
     * @param {number} y
     */
    NbLayoutScrollService.prototype.scrollTo = function (x, y) {
        if (x === void 0) { x = null; }
        if (y === void 0) { y = null; }
        this.manualScroll$.next({ x: x, y: y });
    };
    /**
     * Returns a stream of scroll events
     *
     * @returns {Observable<any>}
     */
    NbLayoutScrollService.prototype.onScroll = function () {
        return this.scroll$.pipe(share());
    };
    /**
     * @private
     * @returns Observable<NbScrollPosition>.
     */
    NbLayoutScrollService.prototype.onManualScroll = function () {
        return this.manualScroll$.pipe(share());
    };
    /**
     * @private
     * @returns {Subject<any>}
     */
    NbLayoutScrollService.prototype.onGetPosition = function () {
        return this.scrollPositionReq$;
    };
    NbLayoutScrollService.prototype.onScrollableChange = function () {
        return this.scrollable$.pipe(share());
    };
    /**
     * @private
     * @param {any} event
     */
    NbLayoutScrollService.prototype.fireScrollChange = function (event) {
        this.scroll$.next(event);
    };
    NbLayoutScrollService.prototype.scrollable = function (scrollable) {
        this.scrollable$.next(scrollable);
    };
NbLayoutScrollService.ɵfac = function NbLayoutScrollService_Factory(t) { return new (t || NbLayoutScrollService)(); };
NbLayoutScrollService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbLayoutScrollService, factory: function (t) { return NbLayoutScrollService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutScrollService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbLayoutScrollService;
}());

/**
 * Simple helper service to return Layout dimensions
 * Depending of current Layout scroll mode (default or `withScroll` when scroll is moved to an element
 * inside of the layout) corresponding dimensions will be returns  - of `documentElement` in first case and
 * `.scrollable-container` in the second.
 */
var NbLayoutRulerService = /** @class */ (function () {
    function NbLayoutRulerService() {
        this.contentDimensionsReq$ = new Subject();
    }
    /**
     * Content dimensions
     * @returns {Observable<NbLayoutDimensions>}
     */
    NbLayoutRulerService.prototype.getDimensions = function () {
        var _this = this;
        return Observable.create(function (observer) {
            var listener = new Subject();
            listener.subscribe(observer);
            _this.contentDimensionsReq$.next({ listener: listener });
            return function () { return listener.complete(); };
        });
    };
    /**
     * @private
     * @returns {Subject<any>}
     */
    NbLayoutRulerService.prototype.onGetDimensions = function () {
        return this.contentDimensionsReq$;
    };
NbLayoutRulerService.ɵfac = function NbLayoutRulerService_Factory(t) { return new (t || NbLayoutRulerService)(); };
NbLayoutRulerService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbLayoutRulerService, factory: function (t) { return NbLayoutRulerService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutRulerService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbLayoutRulerService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbSharedModule = /** @class */ (function () {
    function NbSharedModule() {
    }
NbSharedModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbSharedModule });
NbSharedModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbSharedModule_Factory(t) { return new (t || NbSharedModule)(); }, imports: [CommonModule,
        // TODO: probably we don't need FormsModule in SharedModule
        FormsModule,
        RouterModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSharedModule, { exports: function () { return [CommonModule,
        // TODO: probably we don't need FormsModule in SharedModule
        FormsModule,
        RouterModule]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSharedModule, [{
        type: NgModule,
        args: [{
                exports: [
                    CommonModule,
                    // TODO: probably we don't need FormsModule in SharedModule
                    FormsModule,
                    RouterModule,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbSharedModule;
}());

/**
 * Overrides angular cdk focus trap to keep restore functionality inside trap.
 * */
var NbFocusTrap = /** @class */ (function (_super) {
    __extends(NbFocusTrap, _super);
    function NbFocusTrap(element, checker, ngZone, document, deferAnchors) {
        var _this = _super.call(this, element, checker, ngZone, document, deferAnchors) || this;
        _this.element = element;
        _this.checker = checker;
        _this.ngZone = ngZone;
        _this.document = document;
        _this.savePreviouslyFocusedElement();
        return _this;
    }
    NbFocusTrap.prototype.restoreFocus = function () {
        this.previouslyFocusedElement.focus();
        this.destroy();
    };
    NbFocusTrap.prototype.blurPreviouslyFocusedElement = function () {
        this.previouslyFocusedElement.blur();
    };
    NbFocusTrap.prototype.savePreviouslyFocusedElement = function () {
        this.previouslyFocusedElement = this.document.activeElement;
    };
    return NbFocusTrap;
}(FocusTrap));
var NbFocusTrapFactoryService = /** @class */ (function (_super) {
    __extends(NbFocusTrapFactoryService, _super);
    function NbFocusTrapFactoryService(checker, ngZone, document) {
        var _this = _super.call(this, checker, ngZone, document) || this;
        _this.checker = checker;
        _this.ngZone = ngZone;
        _this.document = document;
        return _this;
    }
    NbFocusTrapFactoryService.prototype.create = function (element, deferCaptureElements) {
        return new NbFocusTrap(element, this.checker, this.ngZone, this.document, deferCaptureElements);
    };
    NbFocusTrapFactoryService = __decorate([ __param(2, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [InteractivityChecker,
            NgZone, Object])
    ], NbFocusTrapFactoryService);
NbFocusTrapFactoryService.ɵfac = function NbFocusTrapFactoryService_Factory(t) { return new (t || NbFocusTrapFactoryService)(ɵngcc0.ɵɵinject(ɵngcc1.InteractivityChecker), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NB_DOCUMENT)); };
NbFocusTrapFactoryService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbFocusTrapFactoryService, factory: function (t) { return NbFocusTrapFactoryService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFocusTrapFactoryService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.InteractivityChecker }, { type: ɵngcc0.NgZone }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }]; }, null); })();
    return NbFocusTrapFactoryService;
}(FocusTrapFactory));

var NbFocusKeyManager = /** @class */ (function (_super) {
    __extends(NbFocusKeyManager, _super);
    function NbFocusKeyManager() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return NbFocusKeyManager;
}(FocusKeyManager));
var NbFocusKeyManagerFactoryService = /** @class */ (function () {
    function NbFocusKeyManagerFactoryService() {
    }
    NbFocusKeyManagerFactoryService.prototype.create = function (items) {
        return new NbFocusKeyManager(items);
    };
    return NbFocusKeyManagerFactoryService;
}());

var NbActiveDescendantKeyManager = /** @class */ (function (_super) {
    __extends(NbActiveDescendantKeyManager, _super);
    function NbActiveDescendantKeyManager() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return NbActiveDescendantKeyManager;
}(ActiveDescendantKeyManager));
var NbActiveDescendantKeyManagerFactoryService = /** @class */ (function () {
    function NbActiveDescendantKeyManagerFactoryService() {
    }
    NbActiveDescendantKeyManagerFactoryService.prototype.create = function (items) {
        return new NbActiveDescendantKeyManager(items);
    };
    return NbActiveDescendantKeyManagerFactoryService;
}());
var NbKeyManagerActiveItemMode;
(function (NbKeyManagerActiveItemMode) {
    NbKeyManagerActiveItemMode[NbKeyManagerActiveItemMode["RESET_ACTIVE"] = -1] = "RESET_ACTIVE";
    NbKeyManagerActiveItemMode[NbKeyManagerActiveItemMode["FIRST_ACTIVE"] = 0] = "FIRST_ACTIVE";
})(NbKeyManagerActiveItemMode || (NbKeyManagerActiveItemMode = {}));

var NbFocusMonitor = /** @class */ (function (_super) {
    __extends(NbFocusMonitor, _super);
    function NbFocusMonitor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbFocusMonitor.ɵfac = function NbFocusMonitor_Factory(t) { return ɵNbFocusMonitor_BaseFactory(t || NbFocusMonitor); };
NbFocusMonitor.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbFocusMonitor, factory: function (t) { return NbFocusMonitor.ɵfac(t); } });
var ɵNbFocusMonitor_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFocusMonitor);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFocusMonitor, [{
        type: Injectable
    }], null, null); })();
    return NbFocusMonitor;
}(FocusMonitor));
var NbA11yModule = /** @class */ (function () {
    function NbA11yModule() {
    }
    NbA11yModule_1 = NbA11yModule;
    NbA11yModule.forRoot = function () {
        return {
            ngModule: NbA11yModule_1,
            providers: [
                NbFocusTrapFactoryService,
                NbFocusKeyManagerFactoryService,
                NbActiveDescendantKeyManagerFactoryService,
                { provide: NbFocusMonitor, useClass: FocusMonitor },
            ],
        };
    };
    var NbA11yModule_1;
NbA11yModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbA11yModule });
NbA11yModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbA11yModule_Factory(t) { return new (t || NbA11yModule)(); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbA11yModule, [{
        type: NgModule,
        args: [{}]
    }], function () { return []; }, null); })();
    return NbA11yModule;
}());

var NbPortalDirective = /** @class */ (function (_super) {
    __extends(NbPortalDirective, _super);
    function NbPortalDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbPortalDirective.ɵfac = function NbPortalDirective_Factory(t) { return ɵNbPortalDirective_BaseFactory(t || NbPortalDirective); };
NbPortalDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbPortalDirective, selectors: [["", "nbPortal", ""]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbPortalDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPortalDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPortalDirective, [{
        type: Directive,
        args: [{ selector: '[nbPortal]' }]
    }], null, null); })();
    return NbPortalDirective;
}(CdkPortal));
var NbPortalOutletDirective = /** @class */ (function (_super) {
    __extends(NbPortalOutletDirective, _super);
    function NbPortalOutletDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbPortalOutletDirective.ɵfac = function NbPortalOutletDirective_Factory(t) { return ɵNbPortalOutletDirective_BaseFactory(t || NbPortalOutletDirective); };
NbPortalOutletDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbPortalOutletDirective, selectors: [["", "nbPortalOutlet", ""]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbPortalOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPortalOutletDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPortalOutletDirective, [{
        type: Directive,
        args: [{ selector: '[nbPortalOutlet]' }]
    }], null, null); })();
    return NbPortalOutletDirective;
}(CdkPortalOutlet));
var NbComponentPortal = /** @class */ (function (_super) {
    __extends(NbComponentPortal, _super);
    function NbComponentPortal() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return NbComponentPortal;
}(ComponentPortal));
var NbOverlay = /** @class */ (function (_super) {
    __extends(NbOverlay, _super);
    function NbOverlay() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbOverlay.ɵfac = function NbOverlay_Factory(t) { return ɵNbOverlay_BaseFactory(t || NbOverlay); };
NbOverlay.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbOverlay, factory: function (t) { return NbOverlay.ɵfac(t); } });
var ɵNbOverlay_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlay);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOverlay, [{
        type: Injectable
    }], null, null); })();
    return NbOverlay;
}(Overlay));
var NbOverlayPositionBuilder = /** @class */ (function (_super) {
    __extends(NbOverlayPositionBuilder, _super);
    function NbOverlayPositionBuilder() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbOverlayPositionBuilder.ɵfac = function NbOverlayPositionBuilder_Factory(t) { return ɵNbOverlayPositionBuilder_BaseFactory(t || NbOverlayPositionBuilder); };
NbOverlayPositionBuilder.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbOverlayPositionBuilder, factory: function (t) { return NbOverlayPositionBuilder.ɵfac(t); } });
var ɵNbOverlayPositionBuilder_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlayPositionBuilder);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOverlayPositionBuilder, [{
        type: Injectable
    }], null, null); })();
    return NbOverlayPositionBuilder;
}(OverlayPositionBuilder));
var NbTemplatePortal = /** @class */ (function (_super) {
    __extends(NbTemplatePortal, _super);
    function NbTemplatePortal(template, viewContainerRef, context) {
        return _super.call(this, template, viewContainerRef, context) || this;
    }
    return NbTemplatePortal;
}(TemplatePortal));
var NbOverlayContainer = /** @class */ (function (_super) {
    __extends(NbOverlayContainer, _super);
    function NbOverlayContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbOverlayContainer.ɵfac = function NbOverlayContainer_Factory(t) { return ɵNbOverlayContainer_BaseFactory(t || NbOverlayContainer); };
NbOverlayContainer.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbOverlayContainer, factory: function (t) { return NbOverlayContainer.ɵfac(t); } });
var ɵNbOverlayContainer_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlayContainer);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOverlayContainer, [{
        type: Injectable
    }], null, null); })();
    return NbOverlayContainer;
}(OverlayContainer));
var NbFlexibleConnectedPositionStrategy = /** @class */ (function (_super) {
    __extends(NbFlexibleConnectedPositionStrategy, _super);
    function NbFlexibleConnectedPositionStrategy() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return NbFlexibleConnectedPositionStrategy;
}(FlexibleConnectedPositionStrategy));
var NbPortalInjector = /** @class */ (function (_super) {
    __extends(NbPortalInjector, _super);
    function NbPortalInjector() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return NbPortalInjector;
}(PortalInjector));
var CDK_MODULES = [OverlayModule, PortalModule];
/**
 * This module helps us to keep all angular/cdk deps inside our cdk module via providing aliases.
 * Approach will help us move cdk in separate npm package and refactor nebular/theme code.
 * */
var NbCdkMappingModule = /** @class */ (function () {
    function NbCdkMappingModule() {
    }
    NbCdkMappingModule_1 = NbCdkMappingModule;
    NbCdkMappingModule.forRoot = function () {
        return {
            ngModule: NbCdkMappingModule_1,
            providers: [
                NbOverlay,
                NbOverlayPositionBuilder,
            ],
        };
    };
    var NbCdkMappingModule_1;
NbCdkMappingModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbCdkMappingModule });
NbCdkMappingModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbCdkMappingModule_Factory(t) { return new (t || NbCdkMappingModule)(); }, imports: [__spreadArrays(CDK_MODULES),
        OverlayModule, PortalModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCdkMappingModule, { declarations: [NbPortalDirective,
        NbPortalOutletDirective], imports: [OverlayModule, PortalModule], exports: [OverlayModule, PortalModule,
        NbPortalDirective,
        NbPortalOutletDirective] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCdkMappingModule, [{
        type: NgModule,
        args: [{
                imports: __spreadArrays(CDK_MODULES),
                exports: __spreadArrays(CDK_MODULES, [
                    NbPortalDirective,
                    NbPortalOutletDirective,
                ]),
                declarations: [NbPortalDirective, NbPortalOutletDirective]
            }]
    }], function () { return []; }, null); })();
    return NbCdkMappingModule;
}());

var NbPlatform = /** @class */ (function (_super) {
    __extends(NbPlatform, _super);
    function NbPlatform() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbPlatform.ɵprov = ɵɵdefineInjectable({ factory: function NbPlatform_Factory() { return new Platform(ɵɵinject(PLATFORM_ID, 8)); }, token: NbPlatform, providedIn: "root" });
NbPlatform.ɵfac = function NbPlatform_Factory(t) { return ɵNbPlatform_BaseFactory(t || NbPlatform); };
var ɵNbPlatform_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPlatform);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPlatform, [{
        type: Injectable,
        args: [{
                providedIn: 'root',
                useClass: Platform
            }]
    }], null, null); })();
    return NbPlatform;
}(Platform));

/**
 * Provides nb-layout as overlay container.
 * Container has to be cleared when layout destroys.
 * Another way previous version of the container will be used
 * but it isn't inserted in DOM and exists in memory only.
 * This case important only if you switch between multiple layouts.
 * */
var NbOverlayContainerAdapter = /** @class */ (function (_super) {
    __extends(NbOverlayContainerAdapter, _super);
    function NbOverlayContainerAdapter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbOverlayContainerAdapter.prototype.setContainer = function (container) {
        this.container = container;
    };
    NbOverlayContainerAdapter.prototype.clearContainer = function () {
        this.container = null;
        this._containerElement = null;
    };
    NbOverlayContainerAdapter.prototype._createContainer = function () {
        var container = this._document.createElement('div');
        container.classList.add('cdk-overlay-container');
        this.container.appendChild(container);
        this._containerElement = container;
    };
NbOverlayContainerAdapter.ɵfac = function NbOverlayContainerAdapter_Factory(t) { return ɵNbOverlayContainerAdapter_BaseFactory(t || NbOverlayContainerAdapter); };
NbOverlayContainerAdapter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbOverlayContainerAdapter, factory: function (t) { return NbOverlayContainerAdapter.ɵfac(t); } });
var ɵNbOverlayContainerAdapter_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlayContainerAdapter);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOverlayContainerAdapter, [{
        type: Injectable
    }], null, null); })();
    return NbOverlayContainerAdapter;
}(NbOverlayContainer));

var NbViewportRulerAdapter = /** @class */ (function (_super) {
    __extends(NbViewportRulerAdapter, _super);
    function NbViewportRulerAdapter(platform, ngZone, ruler, scroll) {
        var _this = _super.call(this, platform, ngZone) || this;
        _this.ruler = ruler;
        _this.scroll = scroll;
        return _this;
    }
    NbViewportRulerAdapter.prototype.getViewportSize = function () {
        var res;
        /*
        * getDimensions call is really synchronous operation.
        * And we have to conform with the interface of the original service.
        * */
        this.ruler.getDimensions()
            .pipe(map(function (dimensions) { return ({ width: dimensions.clientWidth, height: dimensions.clientHeight }); }))
            .subscribe(function (rect) { return res = rect; });
        return res;
    };
    NbViewportRulerAdapter.prototype.getViewportScrollPosition = function () {
        var res;
        /*
        * getPosition call is really synchronous operation.
        * And we have to conform with the interface of the original service.
        * */
        this.scroll.getPosition()
            .pipe(map(function (position) { return ({ top: position.y, left: position.x }); }))
            .subscribe(function (position) { return res = position; });
        return res;
    };
    NbViewportRulerAdapter = __decorate([ __metadata("design:paramtypes", [NbPlatform, NgZone,
            NbLayoutRulerService,
            NbLayoutScrollService])
    ], NbViewportRulerAdapter);
NbViewportRulerAdapter.ɵfac = function NbViewportRulerAdapter_Factory(t) { return new (t || NbViewportRulerAdapter)(ɵngcc0.ɵɵinject(NbPlatform), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NbLayoutRulerService), ɵngcc0.ɵɵinject(NbLayoutScrollService)); };
NbViewportRulerAdapter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbViewportRulerAdapter, factory: function (t) { return NbViewportRulerAdapter.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbViewportRulerAdapter, [{
        type: Injectable
    }], function () { return [{ type: NbPlatform }, { type: ɵngcc0.NgZone }, { type: NbLayoutRulerService }, { type: NbLayoutScrollService }]; }, null); })();
    return NbViewportRulerAdapter;
}(ViewportRuler));

var NbGlobalLogicalPosition;
(function (NbGlobalLogicalPosition) {
    NbGlobalLogicalPosition["TOP_START"] = "top-start";
    NbGlobalLogicalPosition["TOP_END"] = "top-end";
    NbGlobalLogicalPosition["BOTTOM_START"] = "bottom-start";
    NbGlobalLogicalPosition["BOTTOM_END"] = "bottom-end";
})(NbGlobalLogicalPosition || (NbGlobalLogicalPosition = {}));
var NbGlobalPhysicalPosition;
(function (NbGlobalPhysicalPosition) {
    NbGlobalPhysicalPosition["TOP_RIGHT"] = "top-right";
    NbGlobalPhysicalPosition["TOP_LEFT"] = "top-left";
    NbGlobalPhysicalPosition["BOTTOM_RIGHT"] = "bottom-right";
    NbGlobalPhysicalPosition["BOTTOM_LEFT"] = "bottom-left";
})(NbGlobalPhysicalPosition || (NbGlobalPhysicalPosition = {}));
var NbPositionHelper = /** @class */ (function () {
    function NbPositionHelper(layoutDirection) {
        this.layoutDirection = layoutDirection;
    }
    NbPositionHelper.prototype.toLogicalPosition = function (position) {
        if (Object.values(NbGlobalLogicalPosition).includes(position)) {
            return position;
        }
        if (this.layoutDirection.isLtr()) {
            return this.toLogicalPositionWhenLtr(position);
        }
        else {
            return this.toLogicalPositionWhenRtl(position);
        }
    };
    NbPositionHelper.prototype.toPhysicalPosition = function (position) {
        if (Object.values(NbGlobalPhysicalPosition).includes(position)) {
            return position;
        }
        if (this.layoutDirection.isLtr()) {
            return this.toPhysicalPositionWhenLtr(position);
        }
        else {
            return this.toPhysicalPositionWhenRtl(position);
        }
    };
    NbPositionHelper.prototype.isTopPosition = function (position) {
        var logicalPosition = this.toLogicalPosition(position);
        return logicalPosition === NbGlobalLogicalPosition.TOP_END
            || logicalPosition === NbGlobalLogicalPosition.TOP_START;
    };
    NbPositionHelper.prototype.isRightPosition = function (position) {
        var physicalPosition = this.toPhysicalPosition(position);
        return physicalPosition === NbGlobalPhysicalPosition.TOP_RIGHT
            || physicalPosition === NbGlobalPhysicalPosition.BOTTOM_RIGHT;
    };
    NbPositionHelper.prototype.toLogicalPositionWhenLtr = function (position) {
        switch (position) {
            case NbGlobalPhysicalPosition.TOP_RIGHT:
                return NbGlobalLogicalPosition.TOP_END;
            case NbGlobalPhysicalPosition.TOP_LEFT:
                return NbGlobalLogicalPosition.TOP_START;
            case NbGlobalPhysicalPosition.BOTTOM_RIGHT:
                return NbGlobalLogicalPosition.BOTTOM_END;
            case NbGlobalPhysicalPosition.BOTTOM_LEFT:
                return NbGlobalLogicalPosition.BOTTOM_START;
        }
    };
    NbPositionHelper.prototype.toLogicalPositionWhenRtl = function (position) {
        switch (position) {
            case NbGlobalPhysicalPosition.TOP_RIGHT:
                return NbGlobalLogicalPosition.TOP_START;
            case NbGlobalPhysicalPosition.TOP_LEFT:
                return NbGlobalLogicalPosition.TOP_END;
            case NbGlobalPhysicalPosition.BOTTOM_RIGHT:
                return NbGlobalLogicalPosition.BOTTOM_START;
            case NbGlobalPhysicalPosition.BOTTOM_LEFT:
                return NbGlobalLogicalPosition.BOTTOM_END;
        }
    };
    NbPositionHelper.prototype.toPhysicalPositionWhenLtr = function (position) {
        switch (position) {
            case NbGlobalLogicalPosition.TOP_START:
                return NbGlobalPhysicalPosition.TOP_LEFT;
            case NbGlobalLogicalPosition.TOP_END:
                return NbGlobalPhysicalPosition.TOP_RIGHT;
            case NbGlobalLogicalPosition.BOTTOM_START:
                return NbGlobalPhysicalPosition.BOTTOM_LEFT;
            case NbGlobalLogicalPosition.BOTTOM_END:
                return NbGlobalPhysicalPosition.BOTTOM_RIGHT;
        }
    };
    NbPositionHelper.prototype.toPhysicalPositionWhenRtl = function (position) {
        switch (position) {
            case NbGlobalLogicalPosition.TOP_START:
                return NbGlobalPhysicalPosition.TOP_RIGHT;
            case NbGlobalLogicalPosition.TOP_END:
                return NbGlobalPhysicalPosition.TOP_LEFT;
            case NbGlobalLogicalPosition.BOTTOM_START:
                return NbGlobalPhysicalPosition.BOTTOM_RIGHT;
            case NbGlobalLogicalPosition.BOTTOM_END:
                return NbGlobalPhysicalPosition.BOTTOM_LEFT;
        }
    };
    NbPositionHelper = __decorate([ __metadata("design:paramtypes", [NbLayoutDirectionService])
    ], NbPositionHelper);
NbPositionHelper.ɵfac = function NbPositionHelper_Factory(t) { return new (t || NbPositionHelper)(ɵngcc0.ɵɵinject(NbLayoutDirectionService)); };
NbPositionHelper.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbPositionHelper, factory: function (t) { return NbPositionHelper.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPositionHelper, [{
        type: Injectable
    }], function () { return [{ type: NbLayoutDirectionService }]; }, null); })();
    return NbPositionHelper;
}());

var _a;
var NbAdjustment;
(function (NbAdjustment) {
    NbAdjustment["NOOP"] = "noop";
    NbAdjustment["CLOCKWISE"] = "clockwise";
    NbAdjustment["COUNTERCLOCKWISE"] = "counterclockwise";
    NbAdjustment["VERTICAL"] = "vertical";
    NbAdjustment["HORIZONTAL"] = "horizontal";
})(NbAdjustment || (NbAdjustment = {}));
var NbPosition;
(function (NbPosition) {
    NbPosition["TOP"] = "top";
    NbPosition["BOTTOM"] = "bottom";
    NbPosition["LEFT"] = "left";
    NbPosition["RIGHT"] = "right";
    NbPosition["START"] = "start";
    NbPosition["END"] = "end";
    NbPosition["TOP_END"] = "top-end";
    NbPosition["TOP_START"] = "top-start";
    NbPosition["BOTTOM_END"] = "bottom-end";
    NbPosition["BOTTOM_START"] = "bottom-start";
    NbPosition["END_TOP"] = "end-top";
    NbPosition["END_BOTTOM"] = "end-bottom";
    NbPosition["START_TOP"] = "start-top";
    NbPosition["START_BOTTOM"] = "start-bottom";
})(NbPosition || (NbPosition = {}));
var POSITIONS = (_a = {},
    _a[NbPosition.RIGHT] = function (offset) {
        return { originX: 'end', originY: 'center', overlayX: 'start', overlayY: 'center', offsetX: offset };
    },
    _a[NbPosition.BOTTOM] = function (offset) {
        return { originX: 'center', originY: 'bottom', overlayX: 'center', overlayY: 'top', offsetY: offset };
    },
    _a[NbPosition.LEFT] = function (offset) {
        return { originX: 'start', originY: 'center', overlayX: 'end', overlayY: 'center', offsetX: -offset };
    },
    _a[NbPosition.TOP] = function (offset) {
        return { originX: 'center', originY: 'top', overlayX: 'center', overlayY: 'bottom', offsetY: -offset };
    },
    _a[NbPosition.START] = function (offset) {
        return this[NbPosition.LEFT](offset);
    },
    _a[NbPosition.END] = function (offset) {
        return this[NbPosition.RIGHT](offset);
    },
    _a[NbPosition.END_TOP] = function (offset) {
        return { originX: 'end', originY: 'bottom', overlayX: 'start', overlayY: 'bottom', offsetX: offset };
    },
    _a[NbPosition.END_BOTTOM] = function (offset) {
        return { originX: 'end', originY: 'top', overlayX: 'start', overlayY: 'top', offsetX: offset };
    },
    _a[NbPosition.BOTTOM_START] = function (offset) {
        return { originX: 'end', originY: 'bottom', overlayX: 'end', overlayY: 'top', offsetY: offset };
    },
    _a[NbPosition.BOTTOM_END] = function (offset) {
        return { originX: 'start', originY: 'bottom', overlayX: 'start', overlayY: 'top', offsetY: offset };
    },
    _a[NbPosition.START_TOP] = function (offset) {
        return { originX: 'start', originY: 'bottom', overlayX: 'end', overlayY: 'bottom', offsetX: -offset };
    },
    _a[NbPosition.START_BOTTOM] = function (offset) {
        return { originX: 'start', originY: 'top', overlayX: 'end', overlayY: 'top', offsetX: -offset };
    },
    _a[NbPosition.TOP_START] = function (offset) {
        return { originX: 'end', originY: 'top', overlayX: 'end', overlayY: 'bottom', offsetY: -offset };
    },
    _a[NbPosition.TOP_END] = function (offset) {
        return { originX: 'start', originY: 'top', overlayX: 'start', overlayY: 'bottom', offsetY: -offset };
    },
    _a);
var COUNTER_CLOCKWISE_POSITIONS = [
    NbPosition.TOP,
    NbPosition.TOP_END,
    NbPosition.TOP_START,
    NbPosition.START,
    NbPosition.START_TOP,
    NbPosition.START_BOTTOM,
    NbPosition.BOTTOM,
    NbPosition.BOTTOM_START,
    NbPosition.BOTTOM_END,
    NbPosition.END,
    NbPosition.END_BOTTOM,
    NbPosition.END_TOP,
];
var CLOCKWISE_POSITIONS = [
    NbPosition.TOP,
    NbPosition.TOP_START,
    NbPosition.TOP_END,
    NbPosition.END,
    NbPosition.END_TOP,
    NbPosition.END_BOTTOM,
    NbPosition.BOTTOM,
    NbPosition.BOTTOM_END,
    NbPosition.BOTTOM_START,
    NbPosition.START,
    NbPosition.START_BOTTOM,
    NbPosition.START_TOP,
];
var VERTICAL_POSITIONS = [NbPosition.BOTTOM, NbPosition.TOP];
var HORIZONTAL_POSITIONS = [NbPosition.START, NbPosition.END];
function comparePositions(p1, p2) {
    return p1.originX === p2.originX
        && p1.originY === p2.originY
        && p1.overlayX === p2.overlayX
        && p1.overlayY === p2.overlayY;
}
/**
 * The main idea of the adjustable connected strategy is to provide predefined set of positions for your overlay.
 * You have to provide adjustment and appropriate strategy will be chosen in runtime.
 * */
var NbAdjustableConnectedPositionStrategy = /** @class */ (function (_super) {
    __extends(NbAdjustableConnectedPositionStrategy, _super);
    function NbAdjustableConnectedPositionStrategy() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._offset = 15;
        _this.positionChange = _this.positionChanges.pipe(map(function (positionChange) { return positionChange.connectionPair; }), map(function (connectionPair) {
            return _this.appliedPositions.find(function (_a) {
                var connectedPosition = _a.connectedPosition;
                return comparePositions(connectedPosition, connectionPair);
            }).key;
        }));
        return _this;
    }
    NbAdjustableConnectedPositionStrategy.prototype.attach = function (overlayRef) {
        /**
         * We have to apply positions before attach because super.attach() validates positions and crashes app
         * if no positions provided.
         * */
        this.applyPositions();
        _super.prototype.attach.call(this, overlayRef);
    };
    NbAdjustableConnectedPositionStrategy.prototype.apply = function () {
        this.applyPositions();
        _super.prototype.apply.call(this);
    };
    NbAdjustableConnectedPositionStrategy.prototype.position = function (position) {
        this._position = position;
        return this;
    };
    NbAdjustableConnectedPositionStrategy.prototype.adjustment = function (adjustment) {
        this._adjustment = adjustment;
        return this;
    };
    NbAdjustableConnectedPositionStrategy.prototype.offset = function (offset) {
        this._offset = offset;
        return this;
    };
    NbAdjustableConnectedPositionStrategy.prototype.applyPositions = function () {
        var positions = this.createPositions();
        this.persistChosenPositions(positions);
        this.withPositions(this.appliedPositions.map(function (_a) {
            var connectedPosition = _a.connectedPosition;
            return connectedPosition;
        }));
    };
    NbAdjustableConnectedPositionStrategy.prototype.createPositions = function () {
        switch (this._adjustment) {
            case NbAdjustment.NOOP:
                return [this._position];
            case NbAdjustment.CLOCKWISE:
                return this.reorderPreferredPositions(CLOCKWISE_POSITIONS);
            case NbAdjustment.COUNTERCLOCKWISE:
                return this.reorderPreferredPositions(COUNTER_CLOCKWISE_POSITIONS);
            case NbAdjustment.HORIZONTAL:
                return this.reorderPreferredPositions(HORIZONTAL_POSITIONS);
            case NbAdjustment.VERTICAL:
                return this.reorderPreferredPositions(VERTICAL_POSITIONS);
        }
    };
    NbAdjustableConnectedPositionStrategy.prototype.persistChosenPositions = function (positions) {
        var _this = this;
        this.appliedPositions = positions.map(function (position) { return ({
            key: position,
            connectedPosition: POSITIONS[position](_this._offset),
        }); });
    };
    NbAdjustableConnectedPositionStrategy.prototype.reorderPreferredPositions = function (positions) {
        // Physical positions should be mapped to logical as adjustments use logical positions.
        var startPositionIndex = positions.indexOf(this.mapToLogicalPosition(this._position));
        var firstPart = positions.slice(startPositionIndex);
        var secondPart = positions.slice(0, startPositionIndex);
        return firstPart.concat(secondPart);
    };
    NbAdjustableConnectedPositionStrategy.prototype.mapToLogicalPosition = function (position) {
        if (position === NbPosition.LEFT) {
            return NbPosition.START;
        }
        if (position === NbPosition.RIGHT) {
            return NbPosition.END;
        }
        return position;
    };
    return NbAdjustableConnectedPositionStrategy;
}(NbFlexibleConnectedPositionStrategy));
var NbGlobalPositionStrategy = /** @class */ (function (_super) {
    __extends(NbGlobalPositionStrategy, _super);
    function NbGlobalPositionStrategy() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbGlobalPositionStrategy.prototype.position = function (position) {
        switch (position) {
            case NbGlobalLogicalPosition.TOP_START:
                return this.top().left();
            case NbGlobalLogicalPosition.TOP_END:
                return this.top().right();
            case NbGlobalLogicalPosition.BOTTOM_START:
                return this.bottom().left();
            case NbGlobalLogicalPosition.BOTTOM_END:
                return this.bottom().right();
        }
    };
    return NbGlobalPositionStrategy;
}(GlobalPositionStrategy));
var NbPositionBuilderService = /** @class */ (function () {
    function NbPositionBuilderService(document, viewportRuler, platform, positionBuilder, overlayContainer) {
        this.document = document;
        this.viewportRuler = viewportRuler;
        this.platform = platform;
        this.positionBuilder = positionBuilder;
        this.overlayContainer = overlayContainer;
    }
    NbPositionBuilderService.prototype.global = function () {
        return new NbGlobalPositionStrategy();
    };
    NbPositionBuilderService.prototype.connectedTo = function (elementRef) {
        return new NbAdjustableConnectedPositionStrategy(elementRef, this.viewportRuler, this.document, this.platform, this.overlayContainer)
            .withFlexibleDimensions(false)
            .withPush(false);
    };
    NbPositionBuilderService = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [Object, NbViewportRulerAdapter,
            NbPlatform,
            NbOverlayPositionBuilder,
            NbOverlayContainerAdapter])
    ], NbPositionBuilderService);
NbPositionBuilderService.ɵfac = function NbPositionBuilderService_Factory(t) { return new (t || NbPositionBuilderService)(ɵngcc0.ɵɵinject(NB_DOCUMENT), ɵngcc0.ɵɵinject(NbViewportRulerAdapter), ɵngcc0.ɵɵinject(NbPlatform), ɵngcc0.ɵɵinject(NbOverlayPositionBuilder), ɵngcc0.ɵɵinject(NbOverlayContainerAdapter)); };
NbPositionBuilderService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbPositionBuilderService, factory: function (t) { return NbPositionBuilderService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPositionBuilderService, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: NbViewportRulerAdapter }, { type: NbPlatform }, { type: NbOverlayPositionBuilder }, { type: NbOverlayContainerAdapter }]; }, null); })();
    return NbPositionBuilderService;
}());

var NbPositionedContainer = /** @class */ (function () {
    // @breaking-change @5.0.0 Rename to NbPositionedContainerComponent and enable ts lint
    // tslint:disable-next-line
    function NbPositionedContainer() {
    }
    Object.defineProperty(NbPositionedContainer.prototype, "top", {
        get: function () {
            return this.position === NbPosition.TOP;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "topStart", {
        get: function () {
            return this.position === NbPosition.TOP_START;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "topEnd", {
        get: function () {
            return this.position === NbPosition.TOP_END;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "right", {
        get: function () {
            return this.position === NbPosition.RIGHT || this.position === NbPosition.END;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "endTop", {
        get: function () {
            return this.position === NbPosition.END_TOP;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "endBottom", {
        get: function () {
            return this.position === NbPosition.END_BOTTOM;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "bottom", {
        get: function () {
            return this.position === NbPosition.BOTTOM;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "bottomStart", {
        get: function () {
            return this.position === NbPosition.BOTTOM_START;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "bottomEnd", {
        get: function () {
            return this.position === NbPosition.BOTTOM_END;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "left", {
        get: function () {
            return this.position === NbPosition.LEFT || this.position === NbPosition.START;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "startTop", {
        get: function () {
            return this.position === NbPosition.START_TOP;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPositionedContainer.prototype, "startBottom", {
        get: function () {
            return this.position === NbPosition.START_BOTTOM;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbPositionedContainer.prototype, "position", void 0);
    __decorate([
        HostBinding('class.nb-overlay-top'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "top", null);
    __decorate([
        HostBinding('class.nb-overlay-top-start'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "topStart", null);
    __decorate([
        HostBinding('class.nb-overlay-top-end'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "topEnd", null);
    __decorate([
        HostBinding('class.nb-overlay-right'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "right", null);
    __decorate([
        HostBinding('class.nb-overlay-end-top'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "endTop", null);
    __decorate([
        HostBinding('class.nb-overlay-end-bottom'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "endBottom", null);
    __decorate([
        HostBinding('class.nb-overlay-bottom'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "bottom", null);
    __decorate([
        HostBinding('class.nb-overlay-bottom-start'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "bottomStart", null);
    __decorate([
        HostBinding('class.nb-overlay-bottom-end'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "bottomEnd", null);
    __decorate([
        HostBinding('class.nb-overlay-left'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "left", null);
    __decorate([
        HostBinding('class.nb-overlay-start-top'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "startTop", null);
    __decorate([
        HostBinding('class.nb-overlay-start-bottom'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbPositionedContainer.prototype, "startBottom", null);
NbPositionedContainer.ɵfac = function NbPositionedContainer_Factory(t) { return new (t || NbPositionedContainer)(); };
NbPositionedContainer.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbPositionedContainer, selectors: [["ng-component"]], hostVars: 24, hostBindings: function NbPositionedContainer_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("nb-overlay-top", ctx.top)("nb-overlay-top-start", ctx.topStart)("nb-overlay-top-end", ctx.topEnd)("nb-overlay-right", ctx.right)("nb-overlay-end-top", ctx.endTop)("nb-overlay-end-bottom", ctx.endBottom)("nb-overlay-bottom", ctx.bottom)("nb-overlay-bottom-start", ctx.bottomStart)("nb-overlay-bottom-end", ctx.bottomEnd)("nb-overlay-left", ctx.left)("nb-overlay-start-top", ctx.startTop)("nb-overlay-start-bottom", ctx.startBottom);
    } }, inputs: { position: "position" }, decls: 0, vars: 0, template: function NbPositionedContainer_Template(rf, ctx) { }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPositionedContainer, [{
        type: Component,
        args: [{
                template: ''
            }]
    }], function () { return []; }, { top: [{
            type: HostBinding,
            args: ['class.nb-overlay-top']
        }], topStart: [{
            type: HostBinding,
            args: ['class.nb-overlay-top-start']
        }], topEnd: [{
            type: HostBinding,
            args: ['class.nb-overlay-top-end']
        }], right: [{
            type: HostBinding,
            args: ['class.nb-overlay-right']
        }], endTop: [{
            type: HostBinding,
            args: ['class.nb-overlay-end-top']
        }], endBottom: [{
            type: HostBinding,
            args: ['class.nb-overlay-end-bottom']
        }], bottom: [{
            type: HostBinding,
            args: ['class.nb-overlay-bottom']
        }], bottomStart: [{
            type: HostBinding,
            args: ['class.nb-overlay-bottom-start']
        }], bottomEnd: [{
            type: HostBinding,
            args: ['class.nb-overlay-bottom-end']
        }], left: [{
            type: HostBinding,
            args: ['class.nb-overlay-left']
        }], startTop: [{
            type: HostBinding,
            args: ['class.nb-overlay-start-top']
        }], startBottom: [{
            type: HostBinding,
            args: ['class.nb-overlay-start-bottom']
        }], position: [{
            type: Input
        }] }); })();
    return NbPositionedContainer;
}());
var NbOverlayContainerComponent = /** @class */ (function () {
    function NbOverlayContainerComponent(vcr, injector, changeDetectorRef) {
        this.vcr = vcr;
        this.injector = injector;
        this.changeDetectorRef = changeDetectorRef;
        this.isAttached = false;
    }
    Object.defineProperty(NbOverlayContainerComponent.prototype, "isStringContent", {
        get: function () {
            return !!this.content;
        },
        enumerable: true,
        configurable: true
    });
    NbOverlayContainerComponent.prototype.attachComponentPortal = function (portal, context) {
        portal.injector = this.createChildInjector(portal.componentFactoryResolver);
        var componentRef = this.portalOutlet.attachComponentPortal(portal);
        if (context) {
            Object.assign(componentRef.instance, context);
        }
        componentRef.changeDetectorRef.markForCheck();
        componentRef.changeDetectorRef.detectChanges();
        this.isAttached = true;
        return componentRef;
    };
    NbOverlayContainerComponent.prototype.attachTemplatePortal = function (portal) {
        var templateRef = this.portalOutlet.attachTemplatePortal(portal);
        templateRef.detectChanges();
        this.isAttached = true;
        return templateRef;
    };
    NbOverlayContainerComponent.prototype.attachStringContent = function (content) {
        this.content = content;
        this.changeDetectorRef.markForCheck();
        this.changeDetectorRef.detectChanges();
        this.isAttached = true;
    };
    NbOverlayContainerComponent.prototype.detach = function () {
        if (this.portalOutlet.hasAttached()) {
            this.portalOutlet.detach();
        }
        this.attachStringContent(null);
        this.isAttached = false;
    };
    NbOverlayContainerComponent.prototype.createChildInjector = function (cfr) {
        return new NbPortalInjector(this.injector, new WeakMap([
            [ComponentFactoryResolver, cfr],
        ]));
    };
    __decorate([
        ViewChild(NbPortalOutletDirective, { static: true }),
        __metadata("design:type", NbPortalOutletDirective)
    ], NbOverlayContainerComponent.prototype, "portalOutlet", void 0);
    NbOverlayContainerComponent = __decorate([ __metadata("design:paramtypes", [ViewContainerRef,
            Injector, ChangeDetectorRef])
    ], NbOverlayContainerComponent);
NbOverlayContainerComponent.ɵfac = function NbOverlayContainerComponent_Factory(t) { return new (t || NbOverlayContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbOverlayContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbOverlayContainerComponent, selectors: [["nb-overlay-container"]], viewQuery: function NbOverlayContainerComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(NbPortalOutletDirective, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portalOutlet = _t.first);
    } }, decls: 2, vars: 1, consts: [["class", "primitive-overlay", 4, "ngIf"], ["nbPortalOutlet", ""], [1, "primitive-overlay"]], template: function NbOverlayContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbOverlayContainerComponent_div_0_Template, 2, 1, "div", 0);
        ɵngcc0.ɵɵtemplate(1, NbOverlayContainerComponent_ng_template_1_Template, 0, 0, "ng-template", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.isStringContent);
    } }, directives: [ɵngcc2.NgIf, NbPortalOutletDirective], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOverlayContainerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-overlay-container',
                template: "\n    <div *ngIf=\"isStringContent\" class=\"primitive-overlay\">{{ content }}</div>\n    <ng-template nbPortalOutlet></ng-template>\n  "
            }]
    }], function () { return [{ type: ɵngcc0.ViewContainerRef }, { type: ɵngcc0.Injector }, { type: ɵngcc0.ChangeDetectorRef }]; }, { portalOutlet: [{
            type: ViewChild,
            args: [NbPortalOutletDirective, { static: true }]
        }] }); })();
    return NbOverlayContainerComponent;
}());

function patch(container, containerContext) {
    Object.assign(container.instance, containerContext);
    container.changeDetectorRef.detectChanges();
    return container;
}
function createContainer(ref, container, context, componentFactoryResolver) {
    var containerRef = ref.attach(new NbComponentPortal(container, null, null, componentFactoryResolver));
    patch(containerRef, context);
    return containerRef;
}
var NbOverlayService = /** @class */ (function () {
    function NbOverlayService(overlay, layoutDirection) {
        this.overlay = overlay;
        this.layoutDirection = layoutDirection;
    }
    Object.defineProperty(NbOverlayService.prototype, "scrollStrategies", {
        get: function () {
            return this.overlay.scrollStrategies;
        },
        enumerable: true,
        configurable: true
    });
    NbOverlayService.prototype.create = function (config) {
        var overlayRef = this.overlay.create(config);
        this.layoutDirection.onDirectionChange()
            .subscribe(function (dir) { return overlayRef.setDirection(dir); });
        return overlayRef;
    };
    NbOverlayService = __decorate([ __metadata("design:paramtypes", [NbOverlay, NbLayoutDirectionService])
    ], NbOverlayService);
NbOverlayService.ɵfac = function NbOverlayService_Factory(t) { return new (t || NbOverlayService)(ɵngcc0.ɵɵinject(NbOverlay), ɵngcc0.ɵɵinject(NbLayoutDirectionService)); };
NbOverlayService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbOverlayService, factory: function (t) { return NbOverlayService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOverlayService, [{
        type: Injectable
    }], function () { return [{ type: NbOverlay }, { type: NbLayoutDirectionService }]; }, null); })();
    return NbOverlayService;
}());

var NbScrollDispatcherAdapter = /** @class */ (function (_super) {
    __extends(NbScrollDispatcherAdapter, _super);
    function NbScrollDispatcherAdapter(ngZone, platform, scrollService) {
        var _this = _super.call(this, ngZone, platform) || this;
        _this.scrollService = scrollService;
        return _this;
    }
    NbScrollDispatcherAdapter.prototype.scrolled = function (auditTimeInMs) {
        return this.scrollService.onScroll();
    };
    NbScrollDispatcherAdapter = __decorate([ __metadata("design:paramtypes", [NgZone, NbPlatform, NbLayoutScrollService])
    ], NbScrollDispatcherAdapter);
NbScrollDispatcherAdapter.ɵfac = function NbScrollDispatcherAdapter_Factory(t) { return new (t || NbScrollDispatcherAdapter)(ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NbPlatform), ɵngcc0.ɵɵinject(NbLayoutScrollService)); };
NbScrollDispatcherAdapter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbScrollDispatcherAdapter, factory: function (t) { return NbScrollDispatcherAdapter.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbScrollDispatcherAdapter, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc0.NgZone }, { type: NbPlatform }, { type: NbLayoutScrollService }]; }, null); })();
    return NbScrollDispatcherAdapter;
}(ScrollDispatcher));

/**
 * Overrides default block scroll strategy because default strategy blocks scrolling on the body only.
 * But Nebular has its own scrollable container - nb-layout. So, we need to block scrolling in it to.
 * */
var NbBlockScrollStrategyAdapter = /** @class */ (function (_super) {
    __extends(NbBlockScrollStrategyAdapter, _super);
    function NbBlockScrollStrategyAdapter(document, viewportRuler, scrollService) {
        var _this = _super.call(this, viewportRuler, document) || this;
        _this.scrollService = scrollService;
        return _this;
    }
    NbBlockScrollStrategyAdapter.prototype.enable = function () {
        _super.prototype.enable.call(this);
        this.scrollService.scrollable(false);
    };
    NbBlockScrollStrategyAdapter.prototype.disable = function () {
        _super.prototype.disable.call(this);
        this.scrollService.scrollable(true);
    };
    NbBlockScrollStrategyAdapter = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [Object, NbViewportRulerAdapter,
            NbLayoutScrollService])
    ], NbBlockScrollStrategyAdapter);
NbBlockScrollStrategyAdapter.ɵfac = function NbBlockScrollStrategyAdapter_Factory(t) { return new (t || NbBlockScrollStrategyAdapter)(ɵngcc0.ɵɵinject(NB_DOCUMENT), ɵngcc0.ɵɵinject(NbViewportRulerAdapter), ɵngcc0.ɵɵinject(NbLayoutScrollService)); };
NbBlockScrollStrategyAdapter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbBlockScrollStrategyAdapter, factory: function (t) { return NbBlockScrollStrategyAdapter.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbBlockScrollStrategyAdapter, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: NbViewportRulerAdapter }, { type: NbLayoutScrollService }]; }, null); })();
    return NbBlockScrollStrategyAdapter;
}(BlockScrollStrategy));
var NbScrollStrategyOptions = /** @class */ (function (_super) {
    __extends(NbScrollStrategyOptions, _super);
    function NbScrollStrategyOptions(scrollService, scrollDispatcher, viewportRuler, ngZone, document) {
        var _this = _super.call(this, scrollDispatcher, viewportRuler, ngZone, document) || this;
        _this.scrollService = scrollService;
        _this.scrollDispatcher = scrollDispatcher;
        _this.viewportRuler = viewportRuler;
        _this.ngZone = ngZone;
        _this.document = document;
        _this.block = function () { return new NbBlockScrollStrategyAdapter(_this.document, _this.viewportRuler, _this.scrollService); };
        return _this;
    }
    NbScrollStrategyOptions = __decorate([ __param(4, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [NbLayoutScrollService,
            ScrollDispatcher,
            NbViewportRulerAdapter,
            NgZone, Object])
    ], NbScrollStrategyOptions);
NbScrollStrategyOptions.ɵfac = function NbScrollStrategyOptions_Factory(t) { return new (t || NbScrollStrategyOptions)(ɵngcc0.ɵɵinject(NbLayoutScrollService), ɵngcc0.ɵɵinject(ɵngcc3.ScrollDispatcher), ɵngcc0.ɵɵinject(NbViewportRulerAdapter), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NB_DOCUMENT)); };
NbScrollStrategyOptions.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbScrollStrategyOptions, factory: function (t) { return NbScrollStrategyOptions.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbScrollStrategyOptions, [{
        type: Injectable
    }], function () { return [{ type: NbLayoutScrollService }, { type: ɵngcc3.ScrollDispatcher }, { type: NbViewportRulerAdapter }, { type: ɵngcc0.NgZone }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }]; }, null); })();
    return NbScrollStrategyOptions;
}(ScrollStrategyOptions));

var NbCdkAdapterModule = /** @class */ (function () {
    function NbCdkAdapterModule() {
    }
    NbCdkAdapterModule_1 = NbCdkAdapterModule;
    NbCdkAdapterModule.forRoot = function () {
        return {
            ngModule: NbCdkAdapterModule_1,
            providers: [
                NbViewportRulerAdapter,
                NbOverlayContainerAdapter,
                NbBlockScrollStrategyAdapter,
                NbScrollDispatcherAdapter,
                NbScrollStrategyOptions,
                { provide: OverlayContainer, useExisting: NbOverlayContainerAdapter },
                { provide: NbOverlayContainer, useExisting: NbOverlayContainerAdapter },
                { provide: ScrollDispatcher, useExisting: NbScrollDispatcherAdapter },
                { provide: ScrollStrategyOptions, useExisting: NbScrollStrategyOptions },
            ],
        };
    };
    var NbCdkAdapterModule_1;
NbCdkAdapterModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbCdkAdapterModule });
NbCdkAdapterModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbCdkAdapterModule_Factory(t) { return new (t || NbCdkAdapterModule)(); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCdkAdapterModule, [{
        type: NgModule,
        args: [{}]
    }], function () { return []; }, null); })();
    return NbCdkAdapterModule;
}());

var NbTrigger;
(function (NbTrigger) {
    NbTrigger["NOOP"] = "noop";
    NbTrigger["CLICK"] = "click";
    NbTrigger["HOVER"] = "hover";
    NbTrigger["HINT"] = "hint";
    NbTrigger["FOCUS"] = "focus";
})(NbTrigger || (NbTrigger = {}));
/**
 * TODO maybe we have to use renderer.listen instead of observableFromEvent?
 * Renderer provides capability use it in service worker, ssr and so on.
 * */
var NbTriggerStrategyBase = /** @class */ (function () {
    function NbTriggerStrategyBase(document, host, container) {
        this.document = document;
        this.host = host;
        this.container = container;
        this.destroyed$ = new Subject();
    }
    NbTriggerStrategyBase.prototype.destroy = function () {
        this.destroyed$.next();
    };
    NbTriggerStrategyBase.prototype.isNotOnHostOrContainer = function (event) {
        return !this.isOnHost(event) && !this.isOnContainer(event);
    };
    NbTriggerStrategyBase.prototype.isOnHostOrContainer = function (event) {
        return this.isOnHost(event) || this.isOnContainer(event);
    };
    NbTriggerStrategyBase.prototype.isOnHost = function (_a) {
        var target = _a.target;
        return this.host.contains(target);
    };
    NbTriggerStrategyBase.prototype.isOnContainer = function (_a) {
        var target = _a.target;
        return this.container() && this.container().location.nativeElement.contains(target);
    };
    return NbTriggerStrategyBase;
}());
/**
 * Creates show and hide event streams.
 * Fires toggle event when the click was performed on the host element.
 * Fires close event when the click was performed on the document but
 * not on the host or container.
 * */
var NbClickTriggerStrategy = /** @class */ (function (_super) {
    __extends(NbClickTriggerStrategy, _super);
    function NbClickTriggerStrategy() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        // since we should track click for both SHOW and HIDE event we firstly need to track the click and the state
        // of the container and then later on decide should we hide it or show
        // if we track the click & state separately this will case a behavior when the container is getting shown
        // and then hidden right away
        _this.click$ = fromEvent(_this.document, 'click')
            .pipe(map(function (event) { return [!_this.container() && _this.isOnHost(event), event]; }), share(), takeUntil(_this.destroyed$));
        _this.show$ = _this.click$
            .pipe(filter(function (_a) {
            var shouldShow = _a[0];
            return shouldShow;
        }), map(function (_a) {
            var event = _a[1];
            return event;
        }), takeUntil(_this.destroyed$));
        _this.hide$ = _this.click$
            .pipe(filter(function (_a) {
            var shouldShow = _a[0], event = _a[1];
            return !shouldShow && !_this.isOnContainer(event);
        }), map(function (_a) {
            var event = _a[1];
            return event;
        }), takeUntil(_this.destroyed$));
        return _this;
    }
    return NbClickTriggerStrategy;
}(NbTriggerStrategyBase));
/**
 * Creates show and hide event streams.
 * Fires open event when a mouse hovers over the host element and stay over at least 100 milliseconds.
 * Fires close event when the mouse leaves the host element and stops out of the host and popover container.
 * */
var NbHoverTriggerStrategy = /** @class */ (function (_super) {
    __extends(NbHoverTriggerStrategy, _super);
    function NbHoverTriggerStrategy() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.show$ = fromEvent(_this.host, 'mouseenter')
            .pipe(filter(function () { return !_this.container(); }), 
        // this `delay & takeUntil & repeat` operators combination is a synonym for `conditional debounce`
        // meaning that if one event occurs in some time after the initial one we won't react to it
        delay(100), 
        // tslint:disable-next-line:rxjs-no-unsafe-takeuntil
        takeUntil(fromEvent(_this.host, 'mouseleave')), repeat(), takeUntil(_this.destroyed$));
        _this.hide$ = fromEvent(_this.host, 'mouseleave')
            .pipe(switchMap(function () { return fromEvent(_this.document, 'mousemove')
            .pipe(debounceTime(100), takeWhile(function () { return !!_this.container(); }), filter(function (event) { return _this.isNotOnHostOrContainer(event); })); }), takeUntil(_this.destroyed$));
        return _this;
    }
    return NbHoverTriggerStrategy;
}(NbTriggerStrategyBase));
/**
 * Creates show and hide event streams.
 * Fires open event when a mouse hovers over the host element and stay over at least 100 milliseconds.
 * Fires close event when the mouse leaves the host element.
 * */
var NbHintTriggerStrategy = /** @class */ (function (_super) {
    __extends(NbHintTriggerStrategy, _super);
    function NbHintTriggerStrategy() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.show$ = fromEvent(_this.host, 'mouseenter')
            .pipe(
        // this `delay & takeUntil & repeat` operators combination is a synonym for `conditional debounce`
        // meaning that if one event occurs in some time after the initial one we won't react to it
        delay(100), 
        // tslint:disable-next-line:rxjs-no-unsafe-takeuntil
        takeUntil(fromEvent(_this.host, 'mouseleave')), repeat(), takeUntil(_this.destroyed$));
        _this.hide$ = fromEvent(_this.host, 'mouseleave')
            .pipe(takeUntil(_this.destroyed$));
        return _this;
    }
    return NbHintTriggerStrategy;
}(NbTriggerStrategyBase));
/**
 * Creates show and hide event streams.
 * Fires open event when a focus is on the host element and stay over at least 100 milliseconds.
 * Fires close event when the focus leaves the host element.
 * */
var NbFocusTriggerStrategy = /** @class */ (function (_super) {
    __extends(NbFocusTriggerStrategy, _super);
    function NbFocusTriggerStrategy() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.focusOut$ = fromEvent(_this.host, 'focusout')
            .pipe(switchMap(function () { return fromEvent(_this.document, 'focusin')
            .pipe(takeWhile(function () { return !!_this.container(); }), filter(function (event) { return _this.isNotOnHostOrContainer(event); })); }), takeUntil(_this.destroyed$));
        _this.clickIn$ = fromEvent(_this.host, 'click')
            .pipe(filter(function () { return !_this.container(); }), takeUntil(_this.destroyed$));
        _this.clickOut$ = fromEvent(_this.document, 'click')
            .pipe(filter(function () { return !!_this.container(); }), filter(function (event) { return _this.isNotOnHostOrContainer(event); }), takeUntil(_this.destroyed$));
        _this.tabKeyPress$ = fromEvent(_this.document, 'keydown')
            .pipe(filter(function (event) { return event.keyCode === 9; }), filter(function () { return !!_this.container(); }), takeUntil(_this.destroyed$));
        _this.show$ = merge(fromEvent(_this.host, 'focusin'), _this.clickIn$)
            .pipe(filter(function () { return !_this.container(); }), debounceTime(100), 
        // tslint:disable-next-line:rxjs-no-unsafe-takeuntil
        takeUntil(fromEvent(_this.host, 'focusout')), repeat(), takeUntil(_this.destroyed$));
        _this.hide$ = merge(_this.focusOut$, _this.tabKeyPress$, _this.clickOut$)
            .pipe(takeUntil(_this.destroyed$));
        return _this;
    }
    return NbFocusTriggerStrategy;
}(NbTriggerStrategyBase));
/**
 * Creates empty show and hide event streams.
 * */
var NbNoopTriggerStrategy = /** @class */ (function (_super) {
    __extends(NbNoopTriggerStrategy, _super);
    function NbNoopTriggerStrategy() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.show$ = EMPTY;
        _this.hide$ = EMPTY;
        return _this;
    }
    return NbNoopTriggerStrategy;
}(NbTriggerStrategyBase));
var NbTriggerStrategyBuilderService = /** @class */ (function () {
    function NbTriggerStrategyBuilderService(_document) {
        this._document = _document;
    }
    NbTriggerStrategyBuilderService.prototype.trigger = function (trigger$$1) {
        this._trigger = trigger$$1;
        return this;
    };
    NbTriggerStrategyBuilderService.prototype.host = function (host) {
        this._host = host;
        return this;
    };
    NbTriggerStrategyBuilderService.prototype.container = function (container) {
        this._container = container;
        return this;
    };
    NbTriggerStrategyBuilderService.prototype.build = function () {
        switch (this._trigger) {
            case NbTrigger.CLICK:
                return new NbClickTriggerStrategy(this._document, this._host, this._container);
            case NbTrigger.HINT:
                return new NbHintTriggerStrategy(this._document, this._host, this._container);
            case NbTrigger.HOVER:
                return new NbHoverTriggerStrategy(this._document, this._host, this._container);
            case NbTrigger.FOCUS:
                return new NbFocusTriggerStrategy(this._document, this._host, this._container);
            case NbTrigger.NOOP:
                return new NbNoopTriggerStrategy(this._document, this._host, this._container);
            default:
                throw new Error('Trigger have to be provided');
        }
    };
    NbTriggerStrategyBuilderService = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [Object])
    ], NbTriggerStrategyBuilderService);
NbTriggerStrategyBuilderService.ɵfac = function NbTriggerStrategyBuilderService_Factory(t) { return new (t || NbTriggerStrategyBuilderService)(ɵngcc0.ɵɵinject(NB_DOCUMENT)); };
NbTriggerStrategyBuilderService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbTriggerStrategyBuilderService, factory: function (t) { return NbTriggerStrategyBuilderService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTriggerStrategyBuilderService, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }]; }, null); })();
    return NbTriggerStrategyBuilderService;
}());

var NbOverlayModule = /** @class */ (function () {
    function NbOverlayModule() {
    }
    NbOverlayModule_1 = NbOverlayModule;
    NbOverlayModule.forRoot = function () {
        return {
            ngModule: NbOverlayModule_1,
            providers: __spreadArrays([
                NbPositionBuilderService,
                NbTriggerStrategyBuilderService,
                NbOverlayService,
                NbPositionHelper
            ], NbCdkMappingModule.forRoot().providers, NbCdkAdapterModule.forRoot().providers, NbA11yModule.forRoot().providers),
        };
    };
    var NbOverlayModule_1;
NbOverlayModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbOverlayModule });
NbOverlayModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbOverlayModule_Factory(t) { return new (t || NbOverlayModule)(); }, imports: [[
            NbCdkMappingModule,
            NbSharedModule,
        ],
        NbCdkMappingModule,
        NbCdkAdapterModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbOverlayModule, { declarations: [NbPositionedContainer,
        NbOverlayContainerComponent], imports: [NbCdkMappingModule,
        NbSharedModule], exports: [NbCdkMappingModule,
        NbCdkAdapterModule,
        NbOverlayContainerComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOverlayModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbCdkMappingModule,
                    NbSharedModule,
                ],
                declarations: [
                    NbPositionedContainer,
                    NbOverlayContainerComponent,
                ],
                exports: [
                    NbCdkMappingModule,
                    NbCdkAdapterModule,
                    NbOverlayContainerComponent,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbOverlayModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
function windowFactory(platformId) {
    if (isPlatformBrowser(platformId)) {
        return window;
    }
    // Provide undefined to get the error when trying to access the window as it
    // shouldn't be used outside the browser. Those who need to provide something
    // instead of window (e.g. domino window when running in node) could override
    // NB_WINDOW token.
    return undefined;
}
var NbThemeModule = /** @class */ (function () {
    function NbThemeModule() {
    }
    NbThemeModule_1 = NbThemeModule;
    // TODO: check the options (throw exception?)
    /**
     * Main Theme Module
     *
     * @param nbThemeOptions {NbThemeOptions} Main theme options
     * @param nbJSThemes {NbJSThemeOptions[]} List of JS Themes, will be merged with default themes
     * @param nbMediaBreakpoints {NbMediaBreakpoint} Available media breakpoints
     * @param layoutDirection {NbLayoutDirection} Layout direction
     *
     * @returns {ModuleWithProviders}
     */
    NbThemeModule.forRoot = function (nbThemeOptions, nbJSThemes, nbMediaBreakpoints, layoutDirection) {
        if (nbThemeOptions === void 0) { nbThemeOptions = { name: 'default' }; }
        return {
            ngModule: NbThemeModule_1,
            providers: __spreadArrays([
                { provide: NB_THEME_OPTIONS, useValue: nbThemeOptions || {} },
                { provide: NB_BUILT_IN_JS_THEMES, useValue: BUILT_IN_THEMES },
                { provide: NB_JS_THEMES, useValue: nbJSThemes || [] },
                { provide: NB_MEDIA_BREAKPOINTS, useValue: nbMediaBreakpoints || DEFAULT_MEDIA_BREAKPOINTS },
                { provide: NB_DOCUMENT, useExisting: DOCUMENT },
                { provide: NB_WINDOW, useFactory: windowFactory, deps: [PLATFORM_ID] },
                NbJSThemesRegistry,
                NbThemeService,
                NbMediaBreakpointsService,
                NbSpinnerService,
                { provide: NB_LAYOUT_DIRECTION, useValue: layoutDirection || NbLayoutDirection.LTR },
                NbLayoutDirectionService,
                NbLayoutScrollService,
                NbLayoutRulerService
            ], NbOverlayModule.forRoot().providers),
        };
    };
    var NbThemeModule_1;
NbThemeModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbThemeModule });
NbThemeModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbThemeModule_Factory(t) { return new (t || NbThemeModule)(); }, imports: [[
            CommonModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbThemeModule, { imports: function () { return [CommonModule]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbThemeModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule,
                ],
                exports: []
            }]
    }], function () { return []; }, null); })();
    return NbThemeModule;
}());

var NbColorHelper = /** @class */ (function () {
    function NbColorHelper() {
    }
    NbColorHelper.shade = function (color, weight) {
        return NbColorHelper.mix('#000000', color, weight);
    };
    NbColorHelper.tint = function (color, weight) {
        return NbColorHelper.mix('#ffffff', color, weight);
    };
    NbColorHelper.mix = function (color1, color2, weight) {
        var d2h = function (d) { return d.toString(16); };
        var h2d = function (h) { return parseInt(h, 16); };
        var result = '#';
        for (var i = 1; i < 7; i += 2) {
            var firstPart = h2d(color1.substr(i, 2));
            var secondPart = h2d(color2.substr(i, 2));
            var resultPart = d2h(Math.floor(secondPart + (firstPart - secondPart) * (weight / 100.0)));
            result += ('0' + resultPart).slice(-2);
        }
        return result;
    };
    NbColorHelper.hexToRgbA = function (hex, alpha) {
        var c;
        if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {
            c = hex.substring(1).split('');
            if (c.length === 3) {
                c = [c[0], c[0], c[1], c[1], c[2], c[2]];
            }
            c = '0x' + c.join('');
            return 'rgba(' + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(',') + ',' + alpha + ')';
        }
        throw new Error('Bad Hex');
    };
    return NbColorHelper;
}());

var NbIconPackType;
(function (NbIconPackType) {
    NbIconPackType["SVG"] = "svg";
    NbIconPackType["FONT"] = "font";
})(NbIconPackType || (NbIconPackType = {}));

var NbFontIcon = /** @class */ (function () {
    function NbFontIcon(name, content, params) {
        if (params === void 0) { params = {}; }
        this.name = name;
        this.content = content;
        this.params = params;
    }
    NbFontIcon.prototype.getClasses = function (options) {
        var classes = [];
        if (this.params.packClass) {
            classes.push(this.params.packClass);
        }
        var name = this.params.iconClassPrefix ? this.params.iconClassPrefix + "-" + this.name : this.name;
        classes.push(name);
        return classes;
    };
    NbFontIcon.prototype.getContent = function (options) {
        return this.content;
    };
    return NbFontIcon;
}());
var NbSvgIcon = /** @class */ (function () {
    function NbSvgIcon(name, content, params) {
        if (params === void 0) { params = {}; }
        this.name = name;
        this.content = content;
        this.params = params;
    }
    NbSvgIcon.prototype.getClasses = function (options) {
        var classes = [];
        if (this.params.packClass) {
            classes.push(this.params.packClass);
        }
        return classes;
    };
    NbSvgIcon.prototype.getContent = function (options) {
        return this.content;
    };
    return NbSvgIcon;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbIconDefinition = /** @class */ (function () {
    function NbIconDefinition() {
    }
    return NbIconDefinition;
}());
function throwPackNotFoundError(name) {
    throw Error("Icon Pack '" + name + "' is not registered");
}
function throwNoDefaultPackError() {
    throw Error('Default pack is not registered.');
}
function throwIconNotFoundError(name, pack) {
    throw Error("Icon '" + name + "' is not registered in pack '" + pack + "'. Check icon name or consider switching icon pack.");
}
function throwWrongPackTypeError(name, type, desiredType) {
    throw Error("Pack '" + name + "' is not an '" + desiredType + "' Pack and its type is '" + type + "'");
}
/**
 * This service allows to register multiple icon packs to use them later within `<nb-icon></nb-icon>` component.
 */
var NbIconLibraries = /** @class */ (function () {
    function NbIconLibraries() {
        this.packs = new Map();
    }
    /**
     * Registers new Svg icon pack
     * @param {string} name
     * @param {NbIcon} icons
     * @param {NbIconPackParams} params
     */
    NbIconLibraries.prototype.registerSvgPack = function (name, icons, params) {
        if (params === void 0) { params = {}; }
        this.packs.set(name, {
            name: name,
            icons: new Map(Object.entries(icons)),
            params: params,
            type: NbIconPackType.SVG,
        });
    };
    /**
     * Registers new font pack
     * @param {string} name
     * @param {NbIconPackParams} params
     */
    NbIconLibraries.prototype.registerFontPack = function (name, params) {
        if (params === void 0) { params = {}; }
        this.packs.set(name, {
            name: name,
            params: params,
            icons: new Map(),
            type: NbIconPackType.FONT,
        });
    };
    /**
     * Returns pack by name
     * @param {string} name
     */
    NbIconLibraries.prototype.getPack = function (name) {
        return this.packs.get(name);
    };
    /**
     * Sets pack as a default
     * @param {string} name
     */
    NbIconLibraries.prototype.setDefaultPack = function (name) {
        if (!this.packs.has(name)) {
            throwPackNotFoundError(name);
        }
        this.defaultPack = this.packs.get(name);
    };
    /**
     * Returns Svg icon
     * @param {string} name
     * @param {string} pack
     *
     * @returns NbIconDefinition
     */
    NbIconLibraries.prototype.getSvgIcon = function (name, pack) {
        var iconsPack = pack ? this.getPackOrThrow(pack) : this.getDefaultPackOrThrow();
        if (iconsPack.type !== NbIconPackType.SVG) {
            throwWrongPackTypeError(iconsPack.name, iconsPack.type, 'SVG');
        }
        var icon = this.getIconFromPack(name, iconsPack);
        return {
            name: name,
            pack: iconsPack.name,
            type: NbIconPackType.SVG,
            icon: this.createSvgIcon(name, icon, iconsPack.params),
        };
    };
    /**
     * Returns Font icon
     * @param {string} name
     * @param {string} pack
     *
     * @returns NbIconDefinition
     */
    NbIconLibraries.prototype.getFontIcon = function (name, pack) {
        var iconsPack = pack ? this.getPackOrThrow(pack) : this.getDefaultPackOrThrow();
        if (iconsPack.type !== NbIconPackType.FONT) {
            throwWrongPackTypeError(iconsPack.name, iconsPack.type, 'Font');
        }
        var icon = this.getIconFromPack(name, iconsPack, false);
        return {
            name: name,
            pack: iconsPack.name,
            type: NbIconPackType.FONT,
            icon: this.createFontIcon(name, icon ? icon : '', iconsPack.params),
        };
    };
    /**
     * Returns an icon
     * @param {string} name
     * @param {string} pack
     *
     * @returns NbIconDefinition
     */
    NbIconLibraries.prototype.getIcon = function (name, pack) {
        var iconsPack = pack ? this.getPackOrThrow(pack) : this.getDefaultPackOrThrow();
        if (iconsPack.type === NbIconPackType.SVG) {
            return this.getSvgIcon(name, pack);
        }
        return this.getFontIcon(name, pack);
    };
    NbIconLibraries.prototype.createSvgIcon = function (name, content, params) {
        return content instanceof NbSvgIcon ? content : new NbSvgIcon(name, content, params);
    };
    NbIconLibraries.prototype.createFontIcon = function (name, content, params) {
        return content instanceof NbFontIcon ? content : new NbFontIcon(name, content, params);
    };
    NbIconLibraries.prototype.getPackOrThrow = function (name) {
        var pack = this.packs.get(name);
        if (!pack) {
            throwPackNotFoundError(name);
        }
        return pack;
    };
    NbIconLibraries.prototype.getDefaultPackOrThrow = function () {
        if (!this.defaultPack) {
            throwNoDefaultPackError();
        }
        return this.defaultPack;
    };
    NbIconLibraries.prototype.getIconFromPack = function (name, pack, shouldThrow) {
        if (shouldThrow === void 0) { shouldThrow = true; }
        if (shouldThrow && !pack.icons.has(name)) {
            throwIconNotFoundError(name, pack.name);
        }
        return pack.icons.get(name);
    };
    NbIconLibraries.ɵprov = ɵɵdefineInjectable({ factory: function NbIconLibraries_Factory() { return new NbIconLibraries(); }, token: NbIconLibraries, providedIn: "root" });
NbIconLibraries.ɵfac = function NbIconLibraries_Factory(t) { return new (t || NbIconLibraries)(); };
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbIconLibraries, [{
        type: Injectable,
        args: [{ providedIn: 'root' }]
    }], function () { return []; }, null); })();
    return NbIconLibraries;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Icon component. Allows to render both `svg` and `font` icons.
 * Starting from Nebular 4.0 uses [Eva Icons](https://akveo.github.io/eva-icons/) pack by default.
 *
 * Basic icon example:
 * @stacked-example(Showcase, icon/icon-showcase.component)
 *
 * Icon configuration:
 *
 * ```html
 * <nb-icon icon="star"></nb-icon>
 * ```
 * ### Installation
 *
 * By default Nebular comes without any pre-installed icon pack.
 * Starting with Nebular 4.0.0 we ship separate package called `@nebular/eva-icons`
 * which integrates SVG [Eva Icons](https://akveo.github.io/eva-icons/) pack to Nebular. To add it to your
 * project run:
 * ```sh
 * npm i @nebular/eva-icons
 * ```
 * This command will install Eva Icons pack. Then register `NbEvaIconsModule` into your app module:
 * ```ts
 * import { NbEvaIconsModule } from '@nebular/eva-icons';
 *
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbEvaIconsModule,
 *   ],
 * })
 * export class AppModule { }
 * ```
 * Last thing, import `NbIconModule` to your feature module where you need to show an icon:
 * ```ts
 * import { NbIconModule } from '@nebular/theme';
 *
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbIconModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Icon can be colored using `status` input:
 * ```html
 * <nb-icon icon="star" status="warning"></nb-icon>
 * ```
 *
 * Colored icons:
 * @stacked-example(Colored Icons, icon/icon-colors.component)
 *
 * In case you need to specify an icon from a specific icon pack, this could be done using `pack` input property:
 * ```html
 * <nb-icon icon="star" pack="font-awesome"></nb-icon>
 * ```
 * Additional icon settings (if available by the icon pack) could be passed using `options` input:
 *
 * ```html
 * <nb-icon icon="star" [options]="{ animation: { type: 'zoom' } }"></nb-icon>
 * ```
 *
 * @styles
 *
 * icon-font-size:
 * icon-line-height:
 * icon-width:
 * icon-height:
 * icon-svg-vertical-align:
 * icon-basic-color:
 * icon-primary-color:
 * icon-info-color:
 * icon-success-color:
 * icon-warning-color:
 * icon-danger-color:
 * icon-control-color:
 */
var NbIconComponent = /** @class */ (function () {
    function NbIconComponent(sanitizer, iconLibrary, el, renderer) {
        this.sanitizer = sanitizer;
        this.iconLibrary = iconLibrary;
        this.el = el;
        this.renderer = renderer;
        this.prevClasses = [];
        this.html = '';
    }
    Object.defineProperty(NbIconComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbIconComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbIconComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbIconComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbIconComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbIconComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbIconComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbIconComponent.prototype, "config", {
        /**
         * Sets all icon configurable properties via config object.
         * If passed value is a string set icon name.
         * @docs-private
         */
        get: function () {
            return this._config;
        },
        set: function (value) {
            if (!value) {
                return;
            }
            this._config = value;
            if (typeof value === 'string') {
                this.icon = value;
            }
            else {
                this.icon = value.icon;
                this.pack = value.pack;
                this.status = value.status;
                this.options = value.options;
            }
        },
        enumerable: true,
        configurable: true
    });
    NbIconComponent.prototype.ngOnInit = function () {
        this.iconDef = this.renderIcon(this.icon, this.pack, this.options);
    };
    NbIconComponent.prototype.ngOnChanges = function () {
        if (this.iconDef) {
            this.iconDef = this.renderIcon(this.icon, this.pack, this.options);
        }
    };
    NbIconComponent.prototype.renderIcon = function (name, pack, options) {
        var iconDefinition = this.iconLibrary.getIcon(name, pack);
        var content = iconDefinition.icon.getContent(options);
        if (content) {
            this.html = this.sanitizer.bypassSecurityTrustHtml(content);
        }
        this.assignClasses(iconDefinition.icon.getClasses(options));
        return iconDefinition;
    };
    NbIconComponent.prototype.assignClasses = function (classes) {
        var _this = this;
        this.prevClasses.forEach(function (className) {
            _this.renderer.removeClass(_this.el.nativeElement, className);
        });
        classes.forEach(function (className) {
            _this.renderer.addClass(_this.el.nativeElement, className);
        });
        this.prevClasses = classes;
    };
    __decorate([
        HostBinding('innerHtml'),
        __metadata("design:type", Object)
    ], NbIconComponent.prototype, "html", void 0);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbIconComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbIconComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbIconComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbIconComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbIconComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbIconComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbIconComponent.prototype, "control", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbIconComponent.prototype, "icon", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbIconComponent.prototype, "pack", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbIconComponent.prototype, "options", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbIconComponent.prototype, "status", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbIconComponent.prototype, "config", null);
    NbIconComponent = __decorate([ __metadata("design:paramtypes", [DomSanitizer,
            NbIconLibraries,
            ElementRef,
            Renderer2])
    ], NbIconComponent);
NbIconComponent.ɵfac = function NbIconComponent_Factory(t) { return new (t || NbIconComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(NbIconLibraries), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
NbIconComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbIconComponent, selectors: [["nb-icon"]], hostVars: 15, hostBindings: function NbIconComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵhostProperty("innerHtml", ctx.html, ɵngcc0.ɵɵsanitizeHtml);
        ɵngcc0.ɵɵclassProp("status-primary", ctx.primary)("status-info", ctx.info)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control);
    } }, inputs: { config: "config", icon: "icon", pack: "pack", options: "options", status: "status" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 0, vars: 0, template: function NbIconComponent_Template(rf, ctx) { }, styles: ["[_nghost-%COMP%]{display:inline-block}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbIconComponent, [{
        type: Component,
        args: [{
                selector: 'nb-icon',
                template: '',
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:inline-block}\n"]
            }]
    }], function () { return [{ type: ɵngcc4.DomSanitizer }, { type: NbIconLibraries }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, { html: [{
            type: HostBinding,
            args: ['innerHtml']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], config: [{
            type: Input
        }], icon: [{
            type: Input
        }], pack: [{
            type: Input
        }], options: [{
            type: Input
        }], status: [{
            type: Input
        }] }); })();
    return NbIconComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbIconModule = /** @class */ (function () {
    function NbIconModule(iconsLibrary) {
        this.iconsLibrary = iconsLibrary;
        this.essentialsPackName = 'nebular-essentials';
        // in case of consequent calls we don't need to enable `nebular-essentials` pack again
        if (this.iconsLibrary.getPack(this.essentialsPackName)) {
            return;
        }
        // tslint:disable:max-line-length
        this.iconsLibrary.registerSvgPack(this.essentialsPackName, {
            'chevron-down-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-down"><rect width="24" height="24" opacity="0"/><path d="M12 15.5a1 1 0 0 1-.71-.29l-4-4a1 1 0 1 1 1.42-1.42L12 13.1l3.3-3.18a1 1 0 1 1 1.38 1.44l-4 3.86a1 1 0 0 1-.68.28z"/></g></g></svg>',
            'chevron-up-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-up"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M16 14.5a1 1 0 0 1-.71-.29L12 10.9l-3.3 3.18a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.42l4-3.86a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.42 1 1 0 0 1-.69.28z"/></g></g></svg>',
            'chevron-left-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-left"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M13.36 17a1 1 0 0 1-.72-.31l-3.86-4a1 1 0 0 1 0-1.4l4-4a1 1 0 1 1 1.42 1.42L10.9 12l3.18 3.3a1 1 0 0 1 0 1.41 1 1 0 0 1-.72.29z"/></g></g></svg>',
            'chevron-right-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="chevron-right"><rect width="24" height="24" transform="rotate(-90 12 12)" opacity="0"/><path d="M10.5 17a1 1 0 0 1-.71-.29 1 1 0 0 1 0-1.42L13.1 12 9.92 8.69a1 1 0 0 1 0-1.41 1 1 0 0 1 1.42 0l3.86 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-.7.32z"/></g></g></svg>',
            'checkmark-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="checkmark"><rect width="24" height="24" opacity="0"/><path d="M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z"/></g></g></svg>',
            'paper-plane-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="paper-plane"><rect width="24" height="24" opacity="0"/><path d="M21 4a1.31 1.31 0 0 0-.06-.27v-.09a1 1 0 0 0-.2-.3 1 1 0 0 0-.29-.19h-.09a.86.86 0 0 0-.31-.15H20a1 1 0 0 0-.3 0l-18 6a1 1 0 0 0 0 1.9l8.53 2.84 2.84 8.53a1 1 0 0 0 1.9 0l6-18A1 1 0 0 0 21 4zm-4.7 2.29l-5.57 5.57L5.16 10zM14 18.84l-1.86-5.57 5.57-5.57z"/></g></g></svg>',
            'file-text-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="file-text"><rect width="24" height="24" opacity="0"/><path d="M15 16H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z"/><path d="M9 14h3a1 1 0 0 0 0-2H9a1 1 0 0 0 0 2z"/><path d="M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5z"/></g></g></svg>',
            'alert-triangle-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="alert-triangle"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M22.56 16.3L14.89 3.58a3.43 3.43 0 0 0-5.78 0L1.44 16.3a3 3 0 0 0-.05 3A3.37 3.37 0 0 0 4.33 21h15.34a3.37 3.37 0 0 0 2.94-1.66 3 3 0 0 0-.05-3.04zm-1.7 2.05a1.31 1.31 0 0 1-1.19.65H4.33a1.31 1.31 0 0 1-1.19-.65 1 1 0 0 1 0-1l7.68-12.73a1.48 1.48 0 0 1 2.36 0l7.67 12.72a1 1 0 0 1 .01 1.01z"/><circle cx="12" cy="16" r="1"/><path d="M12 8a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z"/></g></g></svg>',
            'question-mark-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="question-mark"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M17 9A5 5 0 0 0 7 9a1 1 0 0 0 2 0 3 3 0 1 1 3 3 1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-1.1A5 5 0 0 0 17 9z"/><circle cx="12" cy="19" r="1"/></g></g></svg>',
            'email-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="email"><rect width="24" height="24" opacity="0"/><path d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-.67 2L12 10.75 5.67 6zM19 18H5a1 1 0 0 1-1-1V7.25l7.4 5.55a1 1 0 0 0 .6.2 1 1 0 0 0 .6-.2L20 7.25V17a1 1 0 0 1-1 1z"/></g></g></svg>',
            'flash-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="flash"><rect width="24" height="24" opacity="0"/><path d="M11.11 23a1 1 0 0 1-.34-.06 1 1 0 0 1-.65-1.05l.77-7.09H5a1 1 0 0 1-.83-1.56l7.89-11.8a1 1 0 0 1 1.17-.38 1 1 0 0 1 .65 1l-.77 7.14H19a1 1 0 0 1 .83 1.56l-7.89 11.8a1 1 0 0 1-.83.44zM6.87 12.8H12a1 1 0 0 1 .74.33 1 1 0 0 1 .25.78l-.45 4.15 4.59-6.86H12a1 1 0 0 1-1-1.11l.45-4.15z"/></g></g></svg>',
            'search-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="search"><rect width="24" height="24" opacity="0"/><path d="M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z"/></g></g></svg>',
            'close-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>',
            'collapse-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="collapse"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 9h-2.58l3.29-3.29a1 1 0 1 0-1.42-1.42L15 7.57V5a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2z"/><path d="M10 13H5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L9 16.42V19a1 1 0 0 0 1 1 1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1z"/></g></g></svg>',
            'expand-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="expand"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M20 5a1 1 0 0 0-1-1h-5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42V10a1 1 0 0 0 1 1 1 1 0 0 0 1-1z"/><path d="M10.71 13.29a1 1 0 0 0-1.42 0L6 16.57V14a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2H7.42l3.29-3.29a1 1 0 0 0 0-1.42z"/></g></g></svg>',
            'minus-outline': '<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="minus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 13H5a1 1 0 0 1 0-2h14a1 1 0 0 1 0 2z"/></g></g></svg>',
            'minus-bold-outline': '<svg xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" viewBox="0 0 8 2" width="100%" height="100%"><defs><rect id="nb-mbo" y="3" width="8" height="2" rx="1"/></defs><use xlink:href="#nb-mbo" transform="translate(0 -3)" fill-rule="evenodd"/></svg>',
            'checkmark-bold-outline': '<svg xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" viewBox="0 0 8 7" width="100%" height="100%"><defs><path id="nb-cbo" d="M6.039 1.43a1.11 1.11 0 0 1 1.517-.228c.483.342.588.998.234 1.466L4.431 7.1a1 1 0 0 1-1.492.115L.317 4.677a1.023 1.023 0 0 1 .002-1.483 1.113 1.113 0 0 1 1.535.002l1.641 1.59L6.04 1.428z"/></defs><use xlink:href="#nb-cbo" transform="translate(0 -1)" fill-rule="evenodd"/></svg>',
            'arrow-back': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="arrow-back"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23 1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2z"/></g></g></svg>',
        });
        // tslint:enable:max-line-length
    }
    NbIconModule = __decorate([ __metadata("design:paramtypes", [NbIconLibraries])
    ], NbIconModule);
NbIconModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbIconModule });
NbIconModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbIconModule_Factory(t) { return new (t || NbIconModule)(ɵngcc0.ɵɵinject(NbIconLibraries)); }, imports: [[
            CommonModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbIconModule, { declarations: function () { return [NbIconComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [NbIconComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbIconModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule,
                ],
                declarations: [
                    NbIconComponent,
                ],
                exports: [
                    NbIconComponent,
                ]
            }]
    }], function () { return [{ type: NbIconLibraries }]; }, null); })();
    return NbIconModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Component intended to be used within the `<nb-card>` component.
 * It adds styles for a preset header section.
 *
 * @styles
 *
 * card-header-text-color:
 * card-header-text-font-family:
 * card-header-text-font-size:
 * card-header-text-font-weight:
 * card-header-text-line-height:
 * card-header-basic-background-color:
 * card-header-basic-text-color:
 * card-header-primary-background-color:
 * card-header-primary-text-color:
 * card-header-info-background-color:
 * card-header-info-text-color:
 * card-header-success-background-color:
 * card-header-success-text-color:
 * card-header-warning-background-color:
 * card-header-warning-text-color:
 * card-header-danger-background-color:
 * card-header-danger-text-color:
 * card-header-control-background-color:
 * card-header-control-text-color:
 */
var NbCardHeaderComponent = /** @class */ (function () {
    function NbCardHeaderComponent() {
    }
NbCardHeaderComponent.ɵfac = function NbCardHeaderComponent_Factory(t) { return new (t || NbCardHeaderComponent)(); };
NbCardHeaderComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCardHeaderComponent, selectors: [["nb-card-header"]], ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbCardHeaderComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCardHeaderComponent, [{
        type: Component,
        args: [{
                selector: 'nb-card-header',
                template: "<ng-content></ng-content>"
            }]
    }], function () { return []; }, null); })();
    return NbCardHeaderComponent;
}());
/**
 * Component intended to be used within  the `<nb-card>` component.
 * Adds styles for a preset body section.
 */
var NbCardBodyComponent = /** @class */ (function () {
    function NbCardBodyComponent() {
    }
NbCardBodyComponent.ɵfac = function NbCardBodyComponent_Factory(t) { return new (t || NbCardBodyComponent)(); };
NbCardBodyComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCardBodyComponent, selectors: [["nb-card-body"]], ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbCardBodyComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCardBodyComponent, [{
        type: Component,
        args: [{
                selector: 'nb-card-body',
                template: "<ng-content></ng-content>"
            }]
    }], function () { return []; }, null); })();
    return NbCardBodyComponent;
}());
/**
 * Component intended to be used within  the `<nb-card>` component.
 * Adds styles for a preset footer section.
 */
var NbCardFooterComponent = /** @class */ (function () {
    function NbCardFooterComponent() {
    }
NbCardFooterComponent.ɵfac = function NbCardFooterComponent_Factory(t) { return new (t || NbCardFooterComponent)(); };
NbCardFooterComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCardFooterComponent, selectors: [["nb-card-footer"]], ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbCardFooterComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCardFooterComponent, [{
        type: Component,
        args: [{
                selector: 'nb-card-footer',
                template: "<ng-content></ng-content>"
            }]
    }], function () { return []; }, null); })();
    return NbCardFooterComponent;
}());
/**
 * Basic content container component.
 *
 * Basic card example:
 * @stacked-example(Showcase, card/card-showcase.component)
 *
 * Basic card configuration:
 *
 * ```html
 * <nb-card>
 *   <nb-card-body>
 *     Card
 *   </nb-card-body>
 * </nb-card>
 * ```
 *
 * ### Installation
 *
 * Import `NbCardModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbCardModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Card with header and footer:
 * @stacked-example(With Header & Footer, card/card-full.component)
 *
 * Most of the time main card content goes to `nb-card-body`,
 * so it is styled and aligned in accordance with the header and footer.
 * In case you need a higher level of control, you can pass contend directly to `nb-card`,
 * so `nb-card-body` styling will not be applied.
 *
 * Consider an example with `nb-list` component:
 * @stacked-example(Card with list, card/card-without-body.component)
 *
 * Colored cards could be simply configured by providing a `status` property:
 * @stacked-example(Colored Card, card/card-colors.component)
 *
 * It is also possible to assign an `accent` property for a slight card highlight
 * as well as combine it with `status`:
 * @stacked-example(Accent Card, card/card-accents.component)
 *
 * Cards of smaller sizes could be combined and put on the same row with a bigger card so they have the same heights.
 * @stacked-example(Card sizes combinations, card/card-sizes-combinations.component)
 *
 * @additional-example(Multiple Sizes, card/card-sizes.component)
 *
 * @styles
 *
 * card-background-color:
 * card-text-color:
 * card-text-font-family:
 * card-text-font-size:
 * card-text-font-weight:
 * card-text-line-height:
 * card-border-width:
 * card-border-style:
 * card-border-color:
 * card-border-radius:
 * card-padding:
 * card-shadow:
 * card-divider-color:
 * card-divider-style:
 * card-divider-width:
 * card-height-tiny:
 * card-height-small:
 * card-height-medium:
 * card-height-large:
 * card-height-giant:
 * card-margin-bottom:
 * card-scrollbar-color:
 * card-scrollbar-background-color:
 * card-scrollbar-width:
 */
var NbCardComponent = /** @class */ (function () {
    function NbCardComponent() {
        this._size = '';
        /**
         * Card status:
         * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`
         */
        this.status = '';
        /**
         * Card accent (color of the top border):
         * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`
         */
        this.accent = '';
    }
    Object.defineProperty(NbCardComponent.prototype, "size", {
        /**
         * Card size, available sizes:
         * tiny, small, medium, large, giant
         */
        get: function () {
            return this._size;
        },
        set: function (value) {
            this._size = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "hasAccent", {
        get: function () {
            return this.accent;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "primaryAccent", {
        get: function () {
            return this.accent === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "infoAccent", {
        get: function () {
            return this.accent === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "successAccent", {
        get: function () {
            return this.accent === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "warningAccent", {
        get: function () {
            return this.accent === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "dangerAccent", {
        get: function () {
            return this.accent === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "basicAccent", {
        get: function () {
            return this.accent === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCardComponent.prototype, "controlAccent", {
        get: function () {
            return this.accent === 'control';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbCardComponent.prototype, "size", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCardComponent.prototype, "status", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCardComponent.prototype, "accent", void 0);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "control", null);
    __decorate([
        HostBinding('class.accent'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "hasAccent", null);
    __decorate([
        HostBinding('class.accent-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "primaryAccent", null);
    __decorate([
        HostBinding('class.accent-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "infoAccent", null);
    __decorate([
        HostBinding('class.accent-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "successAccent", null);
    __decorate([
        HostBinding('class.accent-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "warningAccent", null);
    __decorate([
        HostBinding('class.accent-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "dangerAccent", null);
    __decorate([
        HostBinding('class.accent-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "basicAccent", null);
    __decorate([
        HostBinding('class.accent-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCardComponent.prototype, "controlAccent", null);
NbCardComponent.ɵfac = function NbCardComponent_Factory(t) { return new (t || NbCardComponent)(); };
NbCardComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCardComponent, selectors: [["nb-card"]], hostVars: 40, hostBindings: function NbCardComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-info", ctx.info)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control)("accent", ctx.hasAccent)("accent-primary", ctx.primaryAccent)("accent-info", ctx.infoAccent)("accent-success", ctx.successAccent)("accent-warning", ctx.warningAccent)("accent-danger", ctx.dangerAccent)("accent-basic", ctx.basicAccent)("accent-control", ctx.controlAccent);
    } }, inputs: { status: "status", accent: "accent", size: "size" }, ngContentSelectors: _c2, decls: 4, vars: 0, template: function NbCardComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c1);
        ɵngcc0.ɵɵprojection(0);
        ɵngcc0.ɵɵprojection(1, 1);
        ɵngcc0.ɵɵprojection(2, 2);
        ɵngcc0.ɵɵprojection(3, 3);
    } }, styles: ["[_nghost-%COMP%]{display:flex;flex-direction:column}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCardComponent, [{
        type: Component,
        args: [{
                selector: 'nb-card',
                template: "\n    <ng-content select=\"nb-card-header\"></ng-content>\n    <ng-content select=\"nb-card-body\"></ng-content>\n    <ng-content></ng-content>\n    <ng-content select=\"nb-card-footer\"></ng-content>\n  ",
                styles: [":host{display:flex;flex-direction:column}\n"]
            }]
    }], function () { return []; }, { status: [{
            type: Input
        }], accent: [{
            type: Input
        }], size: [{
            type: Input
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], hasAccent: [{
            type: HostBinding,
            args: ['class.accent']
        }], primaryAccent: [{
            type: HostBinding,
            args: ['class.accent-primary']
        }], infoAccent: [{
            type: HostBinding,
            args: ['class.accent-info']
        }], successAccent: [{
            type: HostBinding,
            args: ['class.accent-success']
        }], warningAccent: [{
            type: HostBinding,
            args: ['class.accent-warning']
        }], dangerAccent: [{
            type: HostBinding,
            args: ['class.accent-danger']
        }], basicAccent: [{
            type: HostBinding,
            args: ['class.accent-basic']
        }], controlAccent: [{
            type: HostBinding,
            args: ['class.accent-control']
        }] }); })();
    return NbCardComponent;
}());

/**
 *
 * Reveal card example:
 * @stacked-example(My example, reveal-card/reveal-card-showcase.component)
 *
 * As a content Reveal card accepts two instances of `nb-card` - for front and back sides.
 *
 * Basic reveal card configuration:
 *
 * ```html
 * <nb-reveal-card>
 *   <nb-card-front>
 *     <nb-card>
 *       <nb-card-body>
 *         Front
 *       </nb-card-body>
 *     </nb-card>
 *   </nb-card-front>
 *   <nb-card-back>
 *     <nb-card>
 *       <nb-card-body>
 *         Back
 *       </nb-card-body>
 *     </nb-card>
 *   </nb-card-back>
 * </nb-reveal-card>
 * ```
 *
 * ### Installation
 *
 * Import `NbCardModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbCardModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Reveal Card with header and footer:
 * @stacked-example(With Header & Footer, reveal-card/reveal-card-full.component)
 *
 * Colored reveal-cards could be simply configured by providing a `status` property:
 * @stacked-example(Colored Card, reveal-card/reveal-card-colors.component)
 *
 * It is also possible to assign an `accent` property for a slight card highlight
 * as well as combine it with `status`:
 * @stacked-example(Accent Card, reveal-card/reveal-card-accents.component)
 *
 * @additional-example(Multiple Sizes, reveal-card/reveal-card-sizes.component)
 */
var NbRevealCardComponent = /** @class */ (function () {
    function NbRevealCardComponent() {
        /**
         * Reveal state
         * @type boolean
         */
        this.revealed = false;
        /**
         * Show/hide toggle button to be able to control toggle from your code
         * @type {boolean}
         */
        this.showToggleButton = true;
    }
    NbRevealCardComponent.prototype.toggle = function () {
        this.revealed = !this.revealed;
    };
    __decorate([
        Input(),
        HostBinding('class.revealed'),
        __metadata("design:type", Boolean)
    ], NbRevealCardComponent.prototype, "revealed", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbRevealCardComponent.prototype, "showToggleButton", void 0);
NbRevealCardComponent.ɵfac = function NbRevealCardComponent_Factory(t) { return new (t || NbRevealCardComponent)(); };
NbRevealCardComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbRevealCardComponent, selectors: [["nb-reveal-card"]], hostVars: 2, hostBindings: function NbRevealCardComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("revealed", ctx.revealed);
    } }, inputs: { revealed: "revealed", showToggleButton: "showToggleButton" }, ngContentSelectors: _c4, decls: 4, vars: 1, consts: [[1, "second-card-container"], ["class", "reveal-button", 3, "click", 4, "ngIf"], [1, "reveal-button", 3, "click"], ["icon", "chevron-down-outline", "pack", "nebular-essentials", "aria-hidden", "true"]], template: function NbRevealCardComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c3);
        ɵngcc0.ɵɵprojection(0);
        ɵngcc0.ɵɵelementStart(1, "div", 0);
        ɵngcc0.ɵɵprojection(2, 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(3, NbRevealCardComponent_a_3_Template, 2, 0, "a", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showToggleButton);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], styles: ["[_nghost-%COMP%]{display:block;position:relative;overflow:hidden}[_nghost-%COMP%]   .second-card-container[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;left:0;overflow:hidden;transition:top 0s 0.5s}[_nghost-%COMP%]     nb-card-front nb-card, [_nghost-%COMP%]     nb-card-back nb-card{box-shadow:none;margin:0}[_nghost-%COMP%]     nb-card-front{display:block;height:100%}[_nghost-%COMP%]     nb-card-back{position:absolute;left:0;top:100%;width:100%;transition:top 0.5s}[_nghost-%COMP%]   .reveal-button[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:0;bottom:0;transform:rotate(180deg);transition:transform 0.3s}.revealed[_nghost-%COMP%]   .second-card-container[_ngcontent-%COMP%]{top:0;transition:none}.revealed[_nghost-%COMP%]   .second-card-container[_ngcontent-%COMP%]     nb-card-back{top:0}.revealed[_nghost-%COMP%]   .reveal-button[_ngcontent-%COMP%]{transform:none}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRevealCardComponent, [{
        type: Component,
        args: [{
                selector: 'nb-reveal-card',
                template: "\n    <ng-content select=\"nb-card-front\"></ng-content>\n    <div class=\"second-card-container\">\n      <ng-content select=\"nb-card-back\"></ng-content>\n    </div>\n    <a *ngIf=\"showToggleButton\" class=\"reveal-button\" (click)=\"toggle()\">\n      <nb-icon icon=\"chevron-down-outline\" pack=\"nebular-essentials\" aria-hidden=\"true\"></nb-icon>\n    </a>\n  ",
                styles: [":host{display:block;position:relative;overflow:hidden}:host .second-card-container{position:absolute;top:100%;right:0;left:0;overflow:hidden;transition:top 0s 0.5s}:host ::ng-deep nb-card-front nb-card,:host ::ng-deep nb-card-back nb-card{box-shadow:none;margin:0}:host ::ng-deep nb-card-front{display:block;height:100%}:host ::ng-deep nb-card-back{position:absolute;left:0;top:100%;width:100%;transition:top 0.5s}:host .reveal-button{cursor:pointer;position:absolute;right:0;bottom:0;transform:rotate(180deg);transition:transform 0.3s}:host(.revealed) .second-card-container{top:0;transition:none}:host(.revealed) .second-card-container ::ng-deep nb-card-back{top:0}:host(.revealed) .reveal-button{transform:none}\n"]
            }]
    }], function () { return []; }, { revealed: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.revealed']
        }], showToggleButton: [{
            type: Input
        }] }); })();
    return NbRevealCardComponent;
}());

/**
 *
 * Flip card example:
 * @stacked-example(Showcase, flip-card/flip-card-showcase.component)
 *
 * As a content Flip card accepts two instances of `nb-card` - for front and back sides.
 *
 * Basic flip card configuration:
 *
 * ```html
 * <nb-flip-card>
 *   <nb-card-front>
 *     <nb-card>
 *       <nb-card-body>
 *         Front
 *       </nb-card-body>
 *     </nb-card>
 *   </nb-card-front>
 *   <nb-card-back>
 *     <nb-card>
 *       <nb-card-body>
 *         Back
 *       </nb-card-body>
 *     </nb-card>
 *   </nb-card-back>
 * </nb-flip-card>
 * ```
 *
 * ### Installation
 *
 * Import `NbCardModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbCardModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Flip Card with header and footer:
 * @stacked-example(With Header & Footer, flip-card/flip-card-full.component.ts)
 *
 * Colored flip-cards could be simply configured by providing a `status` property:
 * @stacked-example(Colored Card, flip-card/flip-card-colors.component)
 *
 * It is also possible to assign an `accent` property for a slight card highlight
 * as well as combine it with `status`:
 * @stacked-example(Accent Card, flip-card/flip-card-accents.component)
 *
 * @additional-example(Multiple Sizes, flip-card/flip-card-sizes.component)
 *
 */
var NbFlipCardComponent = /** @class */ (function () {
    function NbFlipCardComponent() {
        /**
         * Flip state
         * @type boolean
         */
        this.flipped = false;
        /**
         * Show/hide toggle button to be able to control toggle from your code
         * @type {boolean}
         */
        this.showToggleButton = true;
    }
    NbFlipCardComponent.prototype.toggle = function () {
        this.flipped = !this.flipped;
    };
    __decorate([
        Input(),
        HostBinding('class.flipped'),
        __metadata("design:type", Boolean)
    ], NbFlipCardComponent.prototype, "flipped", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbFlipCardComponent.prototype, "showToggleButton", void 0);
NbFlipCardComponent.ɵfac = function NbFlipCardComponent_Factory(t) { return new (t || NbFlipCardComponent)(); };
NbFlipCardComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbFlipCardComponent, selectors: [["nb-flip-card"]], hostVars: 2, hostBindings: function NbFlipCardComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("flipped", ctx.flipped);
    } }, inputs: { flipped: "flipped", showToggleButton: "showToggleButton" }, ngContentSelectors: _c4, decls: 7, vars: 2, consts: [[1, "flipcard-body"], [1, "front-container"], ["class", "flip-button", 3, "click", 4, "ngIf"], [1, "back-container"], [1, "flip-button", 3, "click"], ["icon", "chevron-left-outline", "pack", "nebular-essentials", "aria-hidden", "true"]], template: function NbFlipCardComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c3);
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵtemplate(3, NbFlipCardComponent_a_3_Template, 2, 0, "a", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(4, "div", 3);
        ɵngcc0.ɵɵprojection(5, 1);
        ɵngcc0.ɵɵtemplate(6, NbFlipCardComponent_a_6_Template, 2, 0, "a", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showToggleButton);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showToggleButton);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], styles: ["[_nghost-%COMP%]{display:block;perspective:1200px;position:relative}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]{transform:rotateY(-180deg)}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]{opacity:0;transition:opacity 0s 0.25s;backface-visibility:hidden;-webkit-backface-visibility:hidden}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%]{opacity:0;z-index:-1}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]{backface-visibility:visible;-webkit-backface-visibility:visible}.flipcard-body[_ngcontent-%COMP%]{display:flex;transition:transform 0.5s;transform-style:preserve-3d}.flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%], .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]{flex:1}.flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%], .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:0;bottom:0;opacity:1;transition:opacity 0s 0.15s}.flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]{backface-visibility:visible;-webkit-backface-visibility:visible;transition:opacity 0s 0.2s}.flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]{backface-visibility:hidden;-webkit-backface-visibility:hidden;transform:rotateY(180deg)}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFlipCardComponent, [{
        type: Component,
        args: [{
                selector: 'nb-flip-card',
                template: "\n    <div class=\"flipcard-body\">\n      <div class=\"front-container\">\n        <ng-content select=\"nb-card-front\"></ng-content>\n        <a *ngIf=\"showToggleButton\" class=\"flip-button\" (click)=\"toggle()\">\n          <nb-icon icon=\"chevron-left-outline\" pack=\"nebular-essentials\" aria-hidden=\"true\"></nb-icon>\n        </a>\n      </div>\n      <div class=\"back-container\">\n        <ng-content select=\"nb-card-back\"></ng-content>\n        <a *ngIf=\"showToggleButton\" class=\"flip-button\" (click)=\"toggle()\">\n          <nb-icon icon=\"chevron-left-outline\" pack=\"nebular-essentials\" aria-hidden=\"true\"></nb-icon>\n        </a>\n      </div>\n    </div>\n  ",
                styles: [":host{display:block;perspective:1200px;position:relative}:host-context(.flipped) .flipcard-body{transform:rotateY(-180deg)}:host-context(.flipped) .flipcard-body .front-container{opacity:0;transition:opacity 0s 0.25s;backface-visibility:hidden;-webkit-backface-visibility:hidden}:host-context(.flipped) .flipcard-body .front-container .flip-button{opacity:0;z-index:-1}:host-context(.flipped) .flipcard-body .back-container{backface-visibility:visible;-webkit-backface-visibility:visible}.flipcard-body{display:flex;transition:transform 0.5s;transform-style:preserve-3d}.flipcard-body .front-container,.flipcard-body .back-container{flex:1}.flipcard-body .front-container .flip-button,.flipcard-body .back-container .flip-button{cursor:pointer;position:absolute;right:0;bottom:0;opacity:1;transition:opacity 0s 0.15s}.flipcard-body .front-container{backface-visibility:visible;-webkit-backface-visibility:visible;transition:opacity 0s 0.2s}.flipcard-body .back-container{backface-visibility:hidden;-webkit-backface-visibility:hidden;transform:rotateY(180deg)}\n"]
            }]
    }], function () { return []; }, { flipped: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.flipped']
        }], showToggleButton: [{
            type: Input
        }] }); })();
    return NbFlipCardComponent;
}());

/**
 * Component intended to be used within the `<nb-flip-card>` and `<nb-reveal-card>` components.
 *
 * Use it as a container for the front card.
 */
var NbCardFrontComponent = /** @class */ (function () {
    function NbCardFrontComponent() {
    }
NbCardFrontComponent.ɵfac = function NbCardFrontComponent_Factory(t) { return new (t || NbCardFrontComponent)(); };
NbCardFrontComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCardFrontComponent, selectors: [["nb-card-front"]], ngContentSelectors: _c6, decls: 1, vars: 0, template: function NbCardFrontComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c5);
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCardFrontComponent, [{
        type: Component,
        args: [{
                selector: 'nb-card-front',
                template: '<ng-content select="nb-card"></ng-content>'
            }]
    }], function () { return []; }, null); })();
    return NbCardFrontComponent;
}());
/**
 * Component intended to be used within the `<nb-flip-card>` and `<nb-reveal-card>` components.
 *
 * Use it as a container for the back card.
 */
var NbCardBackComponent = /** @class */ (function () {
    function NbCardBackComponent() {
    }
NbCardBackComponent.ɵfac = function NbCardBackComponent_Factory(t) { return new (t || NbCardBackComponent)(); };
NbCardBackComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCardBackComponent, selectors: [["nb-card-back"]], ngContentSelectors: _c6, decls: 1, vars: 0, template: function NbCardBackComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c5);
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCardBackComponent, [{
        type: Component,
        args: [{
                selector: 'nb-card-back',
                template: '<ng-content select="nb-card"></ng-content>'
            }]
    }], function () { return []; }, null); })();
    return NbCardBackComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_CARD_COMPONENTS = [
    NbCardComponent,
    NbCardBodyComponent,
    NbCardFooterComponent,
    NbCardHeaderComponent,
    NbRevealCardComponent,
    NbFlipCardComponent,
    NbCardFrontComponent,
    NbCardBackComponent,
];
var NbCardModule = /** @class */ (function () {
    function NbCardModule() {
    }
NbCardModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbCardModule });
NbCardModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbCardModule_Factory(t) { return new (t || NbCardModule)(); }, imports: [[
            NbSharedModule,
            NbIconModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCardModule, { declarations: [NbCardComponent,
        NbCardBodyComponent,
        NbCardFooterComponent,
        NbCardHeaderComponent,
        NbRevealCardComponent,
        NbFlipCardComponent,
        NbCardFrontComponent,
        NbCardBackComponent], imports: [NbSharedModule,
        NbIconModule], exports: [NbCardComponent,
        NbCardBodyComponent,
        NbCardFooterComponent,
        NbCardHeaderComponent,
        NbRevealCardComponent,
        NbFlipCardComponent,
        NbCardFrontComponent,
        NbCardBackComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCardModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbIconModule,
                ],
                declarations: __spreadArrays(NB_CARD_COMPONENTS),
                exports: __spreadArrays(NB_CARD_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbCardModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarViewMode;
(function (NbCalendarViewMode) {
    NbCalendarViewMode["YEAR"] = "year";
    NbCalendarViewMode["MONTH"] = "month";
    NbCalendarViewMode["DATE"] = "date";
})(NbCalendarViewMode || (NbCalendarViewMode = {}));
var NbCalendarSize;
(function (NbCalendarSize) {
    NbCalendarSize["MEDIUM"] = "medium";
    NbCalendarSize["LARGE"] = "large";
})(NbCalendarSize || (NbCalendarSize = {}));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
function convertToBoolProperty(val) {
    if (typeof val === 'string') {
        val = val.toLowerCase().trim();
        return (val === 'true' || val === '');
    }
    return !!val;
}

function firstChildNotComment(node) {
    var children = Array
        .from(node.childNodes)
        .filter(function (child) { return child.nodeType !== Node.COMMENT_NODE; });
    return children[0];
}
function lastChildNotComment(node) {
    var children = Array
        .from(node.childNodes)
        .filter(function (child) { return child.nodeType !== Node.COMMENT_NODE; });
    return children[children.length - 1];
}
/*
 * @breaking-change Remove @6.0.0
 */
function emptyStatusWarning(source) {
    console.warn(source + ": Using empty string as a status is deprecated. Use `basic` instead.");
}

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Calendar component provides a capability to choose a date.
 *
 * ```html
 * <nb-calendar [(date)]="date"></nb-calendar>
 * <nb-calendar [date]="date" (dateChange)="handleDateChange($event)"></nb-calendar>
 * ```
 *
 * Basic usage example
 * @stacked-example(Showcase, calendar/calendar-showcase.component)
 *
 * ### Installation
 *
 * Import `NbCalendarModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbCalendarModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * If you want to select ranges you can use `NbCalendarRangeComponent`.
 *
 * ```html
 * <nb-calendar-range [(range)]="range"></nb-calendar-range>
 * <nb-calendar-range [range]="range" (rangeChange)="handleRangeChange($event)"></nb-calendar-range>
 * ```
 *
 * In order to use it, you have to import `NbCalendarRangeModule`.
 * @stacked-example(Range, calendar/calendar-range-showcase.component)
 *
 * The calendar component is supplied with a calendar navigation that contains navigate buttons.
 * If you do not want to use it you can hide calendar navigation using `showNavigation` property.
 * @stacked-example(Without navigation, calendar/calendar-without-navigation.component)
 *
 * As you can see in the basic usage example calendar contains previous and next month days
 * which can be disabled using `boundingMonth` property.
 * @stacked-example(Bounding months, calendar/calendar-bounding-month.component)
 *
 * You can define starting view of the calendar by setting `startView` property.
 * Available values: year, month and date.
 * @stacked-example(Start view, calendar/calendar-start-view.component)
 *
 * You can use a larger version of the calendar by defining size property.
 * Available values: medium(which is default) and large.
 * @stacked-example(Size, calendar/calendar-size.component)
 *
 * Calendar supports min and max dates which disables values out of min-max range.
 * @stacked-example(Borders, calendar/calendar-min-max.component)
 *
 * Also, you can define custom filter property that should be predicate which receives
 * date and returns false if this date has to be disabled. In this example, we provide the filter
 * which disables weekdays.
 * @stacked-example(Filter, calendar/calendar-filter.component)
 *
 * Week numbers column could be enabled via `showWeekNumber` binding:
 * @stacked-example(Week number, calendar/calendar-week-number.component)
 *
 * If you need create custom cells you can easily provide custom components for
 * calendar. For examples if you want to show any average price under each date you can
 * just provide custom `dayCellComponent`. Custom cells for month and year can be provided
 * the same way, check API reference.
 * @stacked-example(Custom day cell, calendar/calendar-custom-day-cell-showcase.component)
 *
 * @styles
 *
 * calendar-width:
 * calendar-background-color:
 * calendar-border-color:
 * calendar-border-style:
 * calendar-border-width:
 * calendar-border-radius:
 * calendar-text-color:
 * calendar-text-font-family:
 * calendar-text-font-size:
 * calendar-text-font-weight:
 * calendar-text-line-height:
 * calendar-picker-padding-top:
 * calendar-picker-padding-bottom:
 * calendar-picker-padding-start:
 * calendar-picker-padding-end:
 * calendar-navigation-text-color:
 * calendar-navigation-text-font-family:
 * calendar-navigation-title-text-font-size:
 * calendar-navigation-title-text-font-weight:
 * calendar-navigation-title-text-line-height:
 * calendar-navigation-padding:
 * calendar-cell-inactive-text-color:
 * calendar-cell-disabled-text-color:
 * calendar-cell-hover-background-color:
 * calendar-cell-hover-border-color:
 * calendar-cell-hover-text-color:
 * calendar-cell-hover-text-font-size:
 * calendar-cell-hover-text-font-weight:
 * calendar-cell-hover-text-line-height:
 * calendar-cell-active-background-color:
 * calendar-cell-active-border-color:
 * calendar-cell-active-text-color:
 * calendar-cell-active-text-font-size:
 * calendar-cell-active-text-font-weight:
 * calendar-cell-active-text-line-height:
 * calendar-cell-today-background-color:
 * calendar-cell-today-border-color:
 * calendar-cell-today-text-color:
 * calendar-cell-today-text-font-size:
 * calendar-cell-today-text-font-weight:
 * calendar-cell-today-text-line-height:
 * calendar-cell-today-hover-background-color:
 * calendar-cell-today-hover-border-color:
 * calendar-cell-today-active-background-color:
 * calendar-cell-today-active-border-color:
 * calendar-cell-today-disabled-border-color:
 * calendar-cell-today-selected-background-color:
 * calendar-cell-today-selected-border-color:
 * calendar-cell-today-selected-text-color:
 * calendar-cell-today-selected-hover-background-color:
 * calendar-cell-today-selected-hover-border-color:
 * calendar-cell-today-selected-active-background-color:
 * calendar-cell-today-selected-active-border-color:
 * calendar-cell-today-in-range-background-color:
 * calendar-cell-today-in-range-border-color:
 * calendar-cell-today-in-range-text-color:
 * calendar-cell-today-in-range-hover-background-color:
 * calendar-cell-today-in-range-hover-border-color:
 * calendar-cell-today-in-range-active-background-color:
 * calendar-cell-today-in-range-active-border-color:
 * calendar-cell-selected-background-color:
 * calendar-cell-selected-border-color:
 * calendar-cell-selected-text-color:
 * calendar-cell-selected-text-font-size:
 * calendar-cell-selected-text-font-weight:
 * calendar-cell-selected-text-line-height:
 * calendar-cell-selected-hover-background-color:
 * calendar-cell-selected-hover-border-color:
 * calendar-cell-selected-active-background-color:
 * calendar-cell-selected-active-border-color:
 * calendar-day-cell-width:
 * calendar-day-cell-height:
 * calendar-month-cell-width:
 * calendar-month-cell-height:
 * calendar-year-cell-width:
 * calendar-year-cell-height:
 * calendar-weekday-background:
 * calendar-weekday-divider-color:
 * calendar-weekday-divider-width:
 * calendar-weekday-text-color:
 * calendar-weekday-text-font-size:
 * calendar-weekday-text-font-weight:
 * calendar-weekday-text-line-height:
 * calendar-weekday-holiday-text-color:
 * calendar-weekday-height:
 * calendar-weekday-width:
 * calendar-weeknumber-background:
 * calendar-weeknumber-divider-color:
 * calendar-weeknumber-divider-width:
 * calendar-weeknumber-text-color:
 * calendar-weeknumber-text-font-size:
 * calendar-weeknumber-text-font-weight:
 * calendar-weeknumber-text-line-height:
 * calendar-weeknumber-height:
 * calendar-weeknumber-width:
 * calendar-large-width:
 * calendar-day-cell-large-width:
 * calendar-day-cell-large-height:
 * calendar-weekday-large-height:
 * calendar-weekday-large-width:
 * calendar-weeknumber-large-height:
 * calendar-weeknumber-large-width:
 * calendar-month-cell-large-width:
 * calendar-month-cell-large-height:
 * calendar-year-cell-large-width:
 * calendar-year-cell-large-height:
 * */
var NbCalendarComponent = /** @class */ (function () {
    function NbCalendarComponent() {
        /**
         * Defines if we should render previous and next months
         * in the current month view.
         * */
        this.boundingMonth = true;
        /**
         * Defines starting view for calendar.
         * */
        this.startView = NbCalendarViewMode.DATE;
        /**
         * Size of the calendar and entire components.
         * Can be 'medium' which is default or 'large'.
         * */
        this.size = NbCalendarSize.MEDIUM;
        /**
         * Determines should we show calendars navigation or not.
         * */
        this.showNavigation = true;
        this._showWeekNumber = false;
        /**
         * Sets symbol used as a header for week numbers column
         * */
        this.weekNumberSymbol = '#';
        /**
         * Emits date when selected.
         * */
        this.dateChange = new EventEmitter();
    }
    Object.defineProperty(NbCalendarComponent.prototype, "showWeekNumber", {
        /**
         * Determines should we show week numbers column.
         * False by default.
         * */
        get: function () {
            return this._showWeekNumber;
        },
        set: function (value) {
            this._showWeekNumber = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbCalendarComponent.prototype, "boundingMonth", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarComponent.prototype, "startView", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbCalendarComponent.prototype, "dayCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbCalendarComponent.prototype, "monthCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbCalendarComponent.prototype, "yearCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbCalendarComponent.prototype, "showNavigation", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbCalendarComponent.prototype, "showWeekNumber", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarComponent.prototype, "weekNumberSymbol", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarComponent.prototype, "dateChange", void 0);
NbCalendarComponent.ɵfac = function NbCalendarComponent_Factory(t) { return new (t || NbCalendarComponent)(); };
NbCalendarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarComponent, selectors: [["nb-calendar"]], inputs: { boundingMonth: "boundingMonth", startView: "startView", size: "size", showNavigation: "showNavigation", weekNumberSymbol: "weekNumberSymbol", showWeekNumber: "showWeekNumber", min: "min", max: "max", filter: "filter", dayCellComponent: "dayCellComponent", monthCellComponent: "monthCellComponent", yearCellComponent: "yearCellComponent", visibleDate: "visibleDate", date: "date" }, outputs: { dateChange: "dateChange" }, decls: 1, vars: 14, consts: [[3, "boundingMonth", "startView", "date", "min", "max", "filter", "dayCellComponent", "monthCellComponent", "yearCellComponent", "size", "visibleDate", "showNavigation", "showWeekNumber", "weekNumberSymbol", "dateChange"]], template: function NbCalendarComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nb-base-calendar", 0);
        ɵngcc0.ɵɵlistener("dateChange", function NbCalendarComponent_Template_nb_base_calendar_dateChange_0_listener($event) { return ctx.dateChange.emit($event); });
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("boundingMonth", ctx.boundingMonth)("startView", ctx.startView)("date", ctx.date)("min", ctx.min)("max", ctx.max)("filter", ctx.filter)("dayCellComponent", ctx.dayCellComponent)("monthCellComponent", ctx.monthCellComponent)("yearCellComponent", ctx.yearCellComponent)("size", ctx.size)("visibleDate", ctx.visibleDate)("showNavigation", ctx.showNavigation)("showWeekNumber", ctx.showWeekNumber)("weekNumberSymbol", ctx.weekNumberSymbol);
    } }, directives: function () { return [NbBaseCalendarComponent]; }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar',
                template: "\n    <nb-base-calendar\n      [boundingMonth]=\"boundingMonth\"\n      [startView]=\"startView\"\n      [date]=\"date\"\n      [min]=\"min\"\n      [max]=\"max\"\n      [filter]=\"filter\"\n      [dayCellComponent]=\"dayCellComponent\"\n      [monthCellComponent]=\"monthCellComponent\"\n      [yearCellComponent]=\"yearCellComponent\"\n      [size]=\"size\"\n      [visibleDate]=\"visibleDate\"\n      [showNavigation]=\"showNavigation\"\n      [showWeekNumber]=\"showWeekNumber\"\n      [weekNumberSymbol]=\"weekNumberSymbol\"\n      (dateChange)=\"dateChange.emit($event)\"\n    ></nb-base-calendar>\n  "
            }]
    }], function () { return []; }, { boundingMonth: [{
            type: Input
        }], startView: [{
            type: Input
        }], size: [{
            type: Input
        }], showNavigation: [{
            type: Input
        }], weekNumberSymbol: [{
            type: Input
        }], dateChange: [{
            type: Output
        }], showWeekNumber: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], dayCellComponent: [{
            type: Input
        }], monthCellComponent: [{
            type: Input
        }], yearCellComponent: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }], date: [{
            type: Input
        }] }); })();
    return NbCalendarComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Basic button component.
 *
 * Default button size is `medium` and status color is `basic`:
 * @stacked-example(Button Showcase, button/button-showcase.component)
 *
 * ```html
 * <button nbButton></button>
 * ```
 * ### Installation
 *
 * Import `NbButtonModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbButtonModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Buttons are available in multiple colors using `status` property:
 * @stacked-example(Button Colors, button/button-colors.component.html)
 *
 * There are three button sizes:
 *
 * @stacked-example(Button Sizes, button/button-sizes.component.html)
 *
 * And two additional style types - `outline`:
 *
 * @stacked-example(Outline Buttons, button/button-outline.component.html)
 *
 * and `hero`:
 *
 * @stacked-example(Button Hero, button/button-hero.component.html)
 *
 * Buttons available in different shapes, which could be combined with the other properties:
 * @stacked-example(Button Shapes, button/button-shapes.component)
 *
 * `nbButton` could be applied to the following selectors - `button`, `input[type="button"]`, `input[type="submit"]`
 * and `a`:
 * @stacked-example(Button Elements, button/button-types.component.html)
 *
 * Button can be made `fullWidth`:
 * @stacked-example(Full Width Button, button/button-full-width.component.html)
 *
 * Icon can be placed inside of a button as a child element:
 * @stacked-example(Icon Button, button/button-icon.component.html)
 *
 * @additional-example(Interactive example, button/button-interactive.component)
 *
 * @styles
 *
 * button-cursor:
 * button-outline-width:
 * button-outline-color:
 * button-text-font-family:
 * button-text-font-weight:
 * button-disabled-cursor:
 * button-tiny-text-font-size:
 * button-tiny-text-line-height:
 * button-tiny-icon-size:
 * button-tiny-icon-vertical-margin:
 * button-tiny-icon-offset:
 * button-small-text-font-size:
 * button-small-text-line-height:
 * button-small-icon-size:
 * button-small-icon-vertical-margin:
 * button-small-icon-offset:
 * button-medium-text-font-size:
 * button-medium-text-line-height:
 * button-medium-icon-size:
 * button-medium-icon-vertical-margin:
 * button-medium-icon-offset:
 * button-large-text-font-size:
 * button-large-text-line-height:
 * button-large-icon-size:
 * button-large-icon-vertical-margin:
 * button-large-icon-offset:
 * button-giant-text-font-size:
 * button-giant-text-line-height:
 * button-giant-icon-size:
 * button-giant-icon-vertical-margin:
 * button-giant-icon-offset:
 * button-rectangle-border-radius:
 * button-semi-round-border-radius:
 * button-round-border-radius:
 * button-filled-border-style:
 * button-filled-border-width:
 * button-filled-text-transform:
 * button-filled-tiny-padding:
 * button-filled-small-padding:
 * button-filled-medium-padding:
 * button-filled-large-padding:
 * button-filled-giant-padding:
 * button-filled-basic-background-color:
 * button-filled-basic-border-color:
 * button-filled-basic-text-color:
 * button-filled-basic-focus-background-color:
 * button-filled-basic-focus-border-color:
 * button-filled-basic-hover-background-color:
 * button-filled-basic-hover-border-color:
 * button-filled-basic-active-background-color:
 * button-filled-basic-active-border-color:
 * button-filled-basic-disabled-background-color:
 * button-filled-basic-disabled-border-color:
 * button-filled-basic-disabled-text-color:
 * button-filled-primary-background-color:
 * button-filled-primary-border-color:
 * button-filled-primary-text-color:
 * button-filled-primary-focus-background-color:
 * button-filled-primary-focus-border-color:
 * button-filled-primary-hover-background-color:
 * button-filled-primary-hover-border-color:
 * button-filled-primary-active-background-color:
 * button-filled-primary-active-border-color:
 * button-filled-primary-disabled-background-color:
 * button-filled-primary-disabled-border-color:
 * button-filled-primary-disabled-text-color:
 * button-filled-success-background-color:
 * button-filled-success-border-color:
 * button-filled-success-text-color:
 * button-filled-success-focus-background-color:
 * button-filled-success-focus-border-color:
 * button-filled-success-hover-background-color:
 * button-filled-success-hover-border-color:
 * button-filled-success-active-background-color:
 * button-filled-success-active-border-color:
 * button-filled-success-disabled-background-color:
 * button-filled-success-disabled-border-color:
 * button-filled-success-disabled-text-color:
 * button-filled-info-background-color:
 * button-filled-info-border-color:
 * button-filled-info-text-color:
 * button-filled-info-focus-background-color:
 * button-filled-info-focus-border-color:
 * button-filled-info-hover-background-color:
 * button-filled-info-hover-border-color:
 * button-filled-info-active-background-color:
 * button-filled-info-active-border-color:
 * button-filled-info-disabled-background-color:
 * button-filled-info-disabled-border-color:
 * button-filled-info-disabled-text-color:
 * button-filled-warning-background-color:
 * button-filled-warning-border-color:
 * button-filled-warning-text-color:
 * button-filled-warning-focus-background-color:
 * button-filled-warning-focus-border-color:
 * button-filled-warning-hover-background-color:
 * button-filled-warning-hover-border-color:
 * button-filled-warning-active-background-color:
 * button-filled-warning-active-border-color:
 * button-filled-warning-disabled-background-color:
 * button-filled-warning-disabled-border-color:
 * button-filled-warning-disabled-text-color:
 * button-filled-danger-background-color:
 * button-filled-danger-border-color:
 * button-filled-danger-text-color:
 * button-filled-danger-focus-background-color:
 * button-filled-danger-focus-border-color:
 * button-filled-danger-hover-background-color:
 * button-filled-danger-hover-border-color:
 * button-filled-danger-active-background-color:
 * button-filled-danger-active-border-color:
 * button-filled-danger-disabled-background-color:
 * button-filled-danger-disabled-border-color:
 * button-filled-danger-disabled-text-color:
 * button-filled-control-background-color:
 * button-filled-control-border-color:
 * button-filled-control-text-color:
 * button-filled-control-focus-background-color:
 * button-filled-control-focus-border-color:
 * button-filled-control-hover-background-color:
 * button-filled-control-hover-border-color:
 * button-filled-control-active-background-color:
 * button-filled-control-active-border-color:
 * button-filled-control-disabled-background-color:
 * button-filled-control-disabled-border-color:
 * button-filled-control-disabled-text-color:
 * button-outline-border-style:
 * button-outline-border-width:
 * button-outline-text-transform:
 * button-outline-focus-inset-shadow-length:
 * button-outline-tiny-padding:
 * button-outline-small-padding:
 * button-outline-medium-padding:
 * button-outline-large-padding:
 * button-outline-giant-padding:
 * button-outline-basic-background-color:
 * button-outline-basic-border-color:
 * button-outline-basic-text-color:
 * button-outline-basic-focus-background-color:
 * button-outline-basic-focus-border-color:
 * button-outline-basic-focus-text-color:
 * button-outline-basic-hover-background-color:
 * button-outline-basic-hover-border-color:
 * button-outline-basic-hover-text-color:
 * button-outline-basic-active-background-color:
 * button-outline-basic-active-border-color:
 * button-outline-basic-active-text-color:
 * button-outline-basic-disabled-background-color:
 * button-outline-basic-disabled-border-color:
 * button-outline-basic-disabled-text-color:
 * button-outline-primary-background-color:
 * button-outline-primary-border-color:
 * button-outline-primary-text-color:
 * button-outline-primary-focus-background-color:
 * button-outline-primary-focus-border-color:
 * button-outline-primary-focus-text-color:
 * button-outline-primary-hover-background-color:
 * button-outline-primary-hover-border-color:
 * button-outline-primary-hover-text-color:
 * button-outline-primary-active-background-color:
 * button-outline-primary-active-border-color:
 * button-outline-primary-active-text-color:
 * button-outline-primary-disabled-background-color:
 * button-outline-primary-disabled-border-color:
 * button-outline-primary-disabled-text-color:
 * button-outline-success-background-color:
 * button-outline-success-border-color:
 * button-outline-success-text-color:
 * button-outline-success-focus-background-color:
 * button-outline-success-focus-border-color:
 * button-outline-success-focus-text-color:
 * button-outline-success-hover-background-color:
 * button-outline-success-hover-border-color:
 * button-outline-success-hover-text-color:
 * button-outline-success-active-background-color:
 * button-outline-success-active-border-color:
 * button-outline-success-active-text-color:
 * button-outline-success-disabled-background-color:
 * button-outline-success-disabled-border-color:
 * button-outline-success-disabled-text-color:
 * button-outline-info-background-color:
 * button-outline-info-border-color:
 * button-outline-info-text-color:
 * button-outline-info-focus-background-color:
 * button-outline-info-focus-border-color:
 * button-outline-info-focus-text-color:
 * button-outline-info-hover-background-color:
 * button-outline-info-hover-border-color:
 * button-outline-info-hover-text-color:
 * button-outline-info-active-background-color:
 * button-outline-info-active-border-color:
 * button-outline-info-active-text-color:
 * button-outline-info-disabled-background-color:
 * button-outline-info-disabled-border-color:
 * button-outline-info-disabled-text-color:
 * button-outline-warning-background-color:
 * button-outline-warning-border-color:
 * button-outline-warning-text-color:
 * button-outline-warning-focus-background-color:
 * button-outline-warning-focus-border-color:
 * button-outline-warning-focus-text-color:
 * button-outline-warning-hover-background-color:
 * button-outline-warning-hover-border-color:
 * button-outline-warning-hover-text-color:
 * button-outline-warning-active-background-color:
 * button-outline-warning-active-border-color:
 * button-outline-warning-active-text-color:
 * button-outline-warning-disabled-background-color:
 * button-outline-warning-disabled-border-color:
 * button-outline-warning-disabled-text-color:
 * button-outline-danger-background-color:
 * button-outline-danger-border-color:
 * button-outline-danger-text-color:
 * button-outline-danger-focus-background-color:
 * button-outline-danger-focus-border-color:
 * button-outline-danger-focus-text-color:
 * button-outline-danger-hover-background-color:
 * button-outline-danger-hover-border-color:
 * button-outline-danger-hover-text-color:
 * button-outline-danger-active-background-color:
 * button-outline-danger-active-border-color:
 * button-outline-danger-active-text-color:
 * button-outline-danger-disabled-background-color:
 * button-outline-danger-disabled-border-color:
 * button-outline-danger-disabled-text-color:
 * button-outline-control-background-color:
 * button-outline-control-border-color:
 * button-outline-control-text-color:
 * button-outline-control-focus-background-color:
 * button-outline-control-focus-border-color:
 * button-outline-control-focus-text-color:
 * button-outline-control-hover-background-color:
 * button-outline-control-hover-border-color:
 * button-outline-control-hover-text-color:
 * button-outline-control-active-background-color:
 * button-outline-control-active-border-color:
 * button-outline-control-active-text-color:
 * button-outline-control-disabled-background-color:
 * button-outline-control-disabled-border-color:
 * button-outline-control-disabled-text-color:
 * button-ghost-background-color:
 * button-ghost-border-color:
 * button-ghost-border-style:
 * button-ghost-border-width:
 * button-ghost-text-transform:
 * button-ghost-focus-inset-shadow-length:
 * button-ghost-tiny-padding:
 * button-ghost-small-padding:
 * button-ghost-medium-padding:
 * button-ghost-large-padding:
 * button-ghost-giant-padding:
 * button-ghost-basic-text-color:
 * button-ghost-basic-focus-background-color:
 * button-ghost-basic-focus-border-color:
 * button-ghost-basic-focus-text-color:
 * button-ghost-basic-hover-background-color:
 * button-ghost-basic-hover-border-color:
 * button-ghost-basic-hover-text-color:
 * button-ghost-basic-active-background-color:
 * button-ghost-basic-active-border-color:
 * button-ghost-basic-active-text-color:
 * button-ghost-basic-disabled-background-color:
 * button-ghost-basic-disabled-border-color:
 * button-ghost-basic-disabled-text-color:
 * button-ghost-primary-text-color:
 * button-ghost-primary-focus-background-color:
 * button-ghost-primary-focus-border-color:
 * button-ghost-primary-focus-text-color:
 * button-ghost-primary-hover-background-color:
 * button-ghost-primary-hover-border-color:
 * button-ghost-primary-hover-text-color:
 * button-ghost-primary-active-background-color:
 * button-ghost-primary-active-border-color:
 * button-ghost-primary-active-text-color:
 * button-ghost-primary-disabled-background-color:
 * button-ghost-primary-disabled-border-color:
 * button-ghost-primary-disabled-text-color:
 * button-ghost-success-text-color:
 * button-ghost-success-focus-background-color:
 * button-ghost-success-focus-border-color:
 * button-ghost-success-focus-text-color:
 * button-ghost-success-hover-background-color:
 * button-ghost-success-hover-border-color:
 * button-ghost-success-hover-text-color:
 * button-ghost-success-active-background-color:
 * button-ghost-success-active-border-color:
 * button-ghost-success-active-text-color:
 * button-ghost-success-disabled-background-color:
 * button-ghost-success-disabled-border-color:
 * button-ghost-success-disabled-text-color:
 * button-ghost-info-text-color:
 * button-ghost-info-focus-background-color:
 * button-ghost-info-focus-border-color:
 * button-ghost-info-focus-text-color:
 * button-ghost-info-hover-background-color:
 * button-ghost-info-hover-border-color:
 * button-ghost-info-hover-text-color:
 * button-ghost-info-active-background-color:
 * button-ghost-info-active-border-color:
 * button-ghost-info-active-text-color:
 * button-ghost-info-disabled-background-color:
 * button-ghost-info-disabled-border-color:
 * button-ghost-info-disabled-text-color:
 * button-ghost-warning-text-color:
 * button-ghost-warning-focus-background-color:
 * button-ghost-warning-focus-border-color:
 * button-ghost-warning-focus-text-color:
 * button-ghost-warning-hover-background-color:
 * button-ghost-warning-hover-border-color:
 * button-ghost-warning-hover-text-color:
 * button-ghost-warning-active-background-color:
 * button-ghost-warning-active-border-color:
 * button-ghost-warning-active-text-color:
 * button-ghost-warning-disabled-background-color:
 * button-ghost-warning-disabled-border-color:
 * button-ghost-warning-disabled-text-color:
 * button-ghost-danger-text-color:
 * button-ghost-danger-focus-background-color:
 * button-ghost-danger-focus-border-color:
 * button-ghost-danger-focus-text-color:
 * button-ghost-danger-hover-background-color:
 * button-ghost-danger-hover-border-color:
 * button-ghost-danger-hover-text-color:
 * button-ghost-danger-active-background-color:
 * button-ghost-danger-active-border-color:
 * button-ghost-danger-active-text-color:
 * button-ghost-danger-disabled-background-color:
 * button-ghost-danger-disabled-border-color:
 * button-ghost-danger-disabled-text-color:
 * button-ghost-control-text-color:
 * button-ghost-control-focus-background-color:
 * button-ghost-control-focus-border-color:
 * button-ghost-control-focus-text-color:
 * button-ghost-control-hover-background-color:
 * button-ghost-control-hover-border-color:
 * button-ghost-control-hover-text-color:
 * button-ghost-control-active-background-color:
 * button-ghost-control-active-border-color:
 * button-ghost-control-active-text-color:
 * button-ghost-control-disabled-background-color:
 * button-ghost-control-disabled-border-color:
 * button-ghost-control-disabled-text-color:
 * button-hero-border-color:
 * button-hero-border-style:
 * button-hero-border-width:
 * button-hero-text-transform:
 * button-hero-tiny-padding:
 * button-hero-small-padding:
 * button-hero-medium-padding:
 * button-hero-large-padding:
 * button-hero-giant-padding:
 * button-hero-shadow:
 * button-hero-text-shadow:
 * button-hero-bevel-size:
 * button-hero-glow-size:
 * button-hero-outline-color:
 * button-hero-outline-width:
 * button-hero-basic-text-color:
 * button-hero-basic-bevel-color:
 * button-hero-basic-glow-color:
 * button-hero-basic-left-background-color:
 * button-hero-basic-right-background-color:
 * button-hero-basic-focus-left-background-color:
 * button-hero-basic-focus-right-background-color:
 * button-hero-basic-hover-left-background-color:
 * button-hero-basic-hover-right-background-color:
 * button-hero-basic-active-left-background-color:
 * button-hero-basic-active-right-background-color:
 * button-hero-basic-disabled-background-color:
 * button-hero-basic-disabled-text-color:
 * button-hero-primary-text-color:
 * button-hero-primary-bevel-color:
 * button-hero-primary-glow-color:
 * button-hero-primary-left-background-color:
 * button-hero-primary-right-background-color:
 * button-hero-primary-focus-left-background-color:
 * button-hero-primary-focus-right-background-color:
 * button-hero-primary-hover-left-background-color:
 * button-hero-primary-hover-right-background-color:
 * button-hero-primary-active-left-background-color:
 * button-hero-primary-active-right-background-color:
 * button-hero-primary-disabled-background-color:
 * button-hero-primary-disabled-text-color:
 * button-hero-success-text-color:
 * button-hero-success-bevel-color:
 * button-hero-success-glow-color:
 * button-hero-success-left-background-color:
 * button-hero-success-right-background-color:
 * button-hero-success-focus-left-background-color:
 * button-hero-success-focus-right-background-color:
 * button-hero-success-hover-left-background-color:
 * button-hero-success-hover-right-background-color:
 * button-hero-success-active-left-background-color:
 * button-hero-success-active-right-background-color:
 * button-hero-success-disabled-background-color:
 * button-hero-success-disabled-text-color:
 * button-hero-info-text-color:
 * button-hero-info-bevel-color:
 * button-hero-info-glow-color:
 * button-hero-info-left-background-color:
 * button-hero-info-right-background-color:
 * button-hero-info-focus-left-background-color:
 * button-hero-info-focus-right-background-color:
 * button-hero-info-hover-left-background-color:
 * button-hero-info-hover-right-background-color:
 * button-hero-info-active-left-background-color:
 * button-hero-info-active-right-background-color:
 * button-hero-info-disabled-background-color:
 * button-hero-info-disabled-text-color:
 * button-hero-warning-text-color:
 * button-hero-warning-bevel-color:
 * button-hero-warning-glow-color:
 * button-hero-warning-left-background-color:
 * button-hero-warning-right-background-color:
 * button-hero-warning-focus-left-background-color:
 * button-hero-warning-focus-right-background-color:
 * button-hero-warning-hover-left-background-color:
 * button-hero-warning-hover-right-background-color:
 * button-hero-warning-active-left-background-color:
 * button-hero-warning-active-right-background-color:
 * button-hero-warning-disabled-background-color:
 * button-hero-warning-disabled-text-color:
 * button-hero-danger-text-color:
 * button-hero-danger-bevel-color:
 * button-hero-danger-glow-color:
 * button-hero-danger-left-background-color:
 * button-hero-danger-right-background-color:
 * button-hero-danger-focus-left-background-color:
 * button-hero-danger-focus-right-background-color:
 * button-hero-danger-hover-left-background-color:
 * button-hero-danger-hover-right-background-color:
 * button-hero-danger-active-left-background-color:
 * button-hero-danger-active-right-background-color:
 * button-hero-danger-disabled-background-color:
 * button-hero-danger-disabled-text-color:
 * button-hero-control-text-color:
 * button-hero-control-bevel-color:
 * button-hero-control-glow-color:
 * button-hero-control-left-background-color:
 * button-hero-control-right-background-color:
 * button-hero-control-focus-left-background-color:
 * button-hero-control-focus-right-background-color:
 * button-hero-control-hover-left-background-color:
 * button-hero-control-hover-right-background-color:
 * button-hero-control-active-left-background-color:
 * button-hero-control-active-right-background-color:
 * button-hero-control-disabled-background-color:
 * button-hero-control-disabled-text-color:
 */
var NbButtonComponent = /** @class */ (function () {
    function NbButtonComponent(renderer, hostElement, cd, zone) {
        this.renderer = renderer;
        this.hostElement = hostElement;
        this.cd = cd;
        this.zone = zone;
        /**
         * Button size, available sizes:
         * `tiny`, `small`, `medium`, `large`, `giant`
         */
        this.size = 'medium';
        /**
         * Button status (adds specific styles):
         * `primary`, `info`, `success`, `warning`, `danger`
         */
        this.status = 'basic';
        /**
         * Button shapes: `rectangle`, `round`, `semi-round`
         */
        this.shape = 'rectangle';
        /**
         * Button appearance: `filled`, `outline`, `ghost`, `hero`
         */
        this.appearance = 'filled';
        this._fullWidth = false;
        this._disabled = false;
    }
    Object.defineProperty(NbButtonComponent.prototype, "filled", {
        /**
         * Sets `filled` appearance
         */
        get: function () {
            return this.appearance === 'filled';
        },
        set: function (value) {
            if (convertToBoolProperty(value)) {
                this.appearance = 'filled';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "outline", {
        /**
         * Sets `outline` appearance
         */
        get: function () {
            return this.appearance === 'outline';
        },
        set: function (value) {
            if (convertToBoolProperty(value)) {
                this.appearance = 'outline';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "ghost", {
        /**
         * Sets `ghost` appearance
         */
        get: function () {
            return this.appearance === 'ghost';
        },
        set: function (value) {
            if (convertToBoolProperty(value)) {
                this.appearance = 'ghost';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "hero", {
        /**
         * Sets `hero` appearance
         */
        get: function () {
            return this.appearance === 'hero';
        },
        set: function (value) {
            if (convertToBoolProperty(value)) {
                this.appearance = 'hero';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "fullWidth", {
        /**
         * If set element will fill its container
         */
        get: function () {
            return this._fullWidth;
        },
        set: function (value) {
            this._fullWidth = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "disabled", {
        /**
         * Disables the button
         */
        get: function () {
            return this._disabled;
        },
        set: function (value) {
            this._disabled = convertToBoolProperty(value);
            this.renderer.setProperty(this.hostElement.nativeElement, 'disabled', this.disabled);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "tabbable", {
        // issue #794
        get: function () {
            return this.disabled ? '-1' : '0';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "rectangle", {
        get: function () {
            return this.shape === 'rectangle';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "round", {
        get: function () {
            return this.shape === 'round';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "semiRound", {
        get: function () {
            return this.shape === 'semi-round';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "iconLeft", {
        get: function () {
            var el = this.hostElement.nativeElement;
            var icon = this.iconElement;
            return !!(icon && firstChildNotComment(el) === icon);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbButtonComponent.prototype, "iconRight", {
        get: function () {
            var el = this.hostElement.nativeElement;
            var icon = this.iconElement;
            return !!(icon && lastChildNotComment(el) === icon);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * Keep this handler to partially support anchor disabling.
     * Unlike button, anchor doesn't have 'disabled' DOM property,
     * so handler will be called anyway. We preventing navigation and bubbling.
     * Disabling is partial due to click handlers precedence. Consider example:
     * <a nbButton [disabled]="true" (click)="clickHandler()">...</a>
     * 'clickHandler' will be called before our host listener below. We can't prevent
     * such handlers call.
     */
    NbButtonComponent.prototype.onClick = function (event) {
        if (this.disabled) {
            event.preventDefault();
            event.stopImmediatePropagation();
        }
    };
    NbButtonComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // TODO: #2254
        this.zone.runOutsideAngular(function () { return setTimeout(function () {
            _this.renderer.addClass(_this.hostElement.nativeElement, 'nb-transition');
        }); });
    };
    Object.defineProperty(NbButtonComponent.prototype, "iconElement", {
        get: function () {
            var el = this.hostElement.nativeElement;
            return el.querySelector('nb-icon');
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbButtonComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbButtonComponent.prototype, "status", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbButtonComponent.prototype, "shape", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbButtonComponent.prototype, "appearance", void 0);
    __decorate([
        Input(),
        HostBinding('class.appearance-filled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbButtonComponent.prototype, "filled", null);
    __decorate([
        Input(),
        HostBinding('class.appearance-outline'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbButtonComponent.prototype, "outline", null);
    __decorate([
        Input(),
        HostBinding('class.appearance-ghost'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbButtonComponent.prototype, "ghost", null);
    __decorate([
        Input(),
        HostBinding('class.appearance-hero'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbButtonComponent.prototype, "hero", null);
    __decorate([
        Input(),
        HostBinding('class.full-width'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbButtonComponent.prototype, "fullWidth", null);
    __decorate([
        Input(),
        HostBinding('attr.aria-disabled'),
        HostBinding('class.btn-disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbButtonComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('attr.tabindex'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "tabbable", null);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "control", null);
    __decorate([
        HostBinding('class.shape-rectangle'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "rectangle", null);
    __decorate([
        HostBinding('class.shape-round'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "round", null);
    __decorate([
        HostBinding('class.shape-semi-round'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "semiRound", null);
    __decorate([
        HostBinding('class.icon-start'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "iconLeft", null);
    __decorate([
        HostBinding('class.icon-end'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbButtonComponent.prototype, "iconRight", null);
    __decorate([
        HostListener('click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbButtonComponent.prototype, "onClick", null);
    NbButtonComponent = __decorate([ __metadata("design:paramtypes", [Renderer2,
            ElementRef,
            ChangeDetectorRef,
            NgZone])
    ], NbButtonComponent);
NbButtonComponent.ɵfac = function NbButtonComponent_Factory(t) { return new (t || NbButtonComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
NbButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbButtonComponent, selectors: [["button", "nbButton", ""], ["a", "nbButton", ""], ["input", "type", "button", "nbButton", ""], ["input", "type", "submit", "nbButton", ""]], hostVars: 48, hostBindings: function NbButtonComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbButtonComponent_click_HostBindingHandler($event) { return ctx.onClick($event); });
    } if (rf & 2) {
        ɵngcc0.ɵɵattribute("aria-disabled", ctx.disabled)("tabindex", ctx.tabbable);
        ɵngcc0.ɵɵclassProp("appearance-filled", ctx.filled)("appearance-outline", ctx.outline)("appearance-ghost", ctx.ghost)("appearance-hero", ctx.hero)("full-width", ctx.fullWidth)("btn-disabled", ctx.disabled)("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-info", ctx.info)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control)("shape-rectangle", ctx.rectangle)("shape-round", ctx.round)("shape-semi-round", ctx.semiRound)("icon-start", ctx.iconLeft)("icon-end", ctx.iconRight);
    } }, inputs: { size: "size", status: "status", shape: "shape", appearance: "appearance", filled: "filled", outline: "outline", ghost: "ghost", hero: "hero", fullWidth: "fullWidth", disabled: "disabled" }, attrs: _c7, ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbButtonComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%]{appearance:none;text-align:center;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;vertical-align:middle;user-select:none}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{text-decoration:none}.full-width[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]     nb-icon{vertical-align:top}.nb-transition[_nghost-%COMP%]{transition-duration:0.15s;transition-property:background-color,border-color,box-shadow,color;transition-timing-function:ease-in}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbButtonComponent, [{
        type: Component,
        args: [{
                selector: 'button[nbButton],a[nbButton],input[type="button"][nbButton],input[type="submit"][nbButton]',
                template: "\n    <ng-content></ng-content>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{appearance:none;text-align:center;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;vertical-align:middle;user-select:none}:host:hover,:host:focus{text-decoration:none}:host.full-width{width:100%}:host ::ng-deep nb-icon{vertical-align:top}:host(.nb-transition){transition-duration:0.15s;transition-property:background-color,border-color,box-shadow,color;transition-timing-function:ease-in}\n"]
            }]
    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.NgZone }]; }, { size: [{
            type: Input
        }], status: [{
            type: Input
        }], shape: [{
            type: Input
        }], appearance: [{
            type: Input
        }], filled: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.appearance-filled']
        }], outline: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.appearance-outline']
        }], ghost: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.appearance-ghost']
        }], hero: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.appearance-hero']
        }], fullWidth: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.full-width']
        }], disabled: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['attr.aria-disabled']
        }, {
            type: HostBinding,
            args: ['class.btn-disabled']
        }], tabbable: [{
            type: HostBinding,
            args: ['attr.tabindex']
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], rectangle: [{
            type: HostBinding,
            args: ['class.shape-rectangle']
        }], round: [{
            type: HostBinding,
            args: ['class.shape-round']
        }], semiRound: [{
            type: HostBinding,
            args: ['class.shape-semi-round']
        }], iconLeft: [{
            type: HostBinding,
            args: ['class.icon-start']
        }], iconRight: [{
            type: HostBinding,
            args: ['class.icon-end']
        }], onClick: [{
            type: HostListener,
            args: ['click', ['$event']]
        }] }); })();
    return NbButtonComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_BUTTON_COMPONENTS = [
    NbButtonComponent,
];
var NbButtonModule = /** @class */ (function () {
    function NbButtonModule() {
    }
NbButtonModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbButtonModule });
NbButtonModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbButtonModule_Factory(t) { return new (t || NbButtonModule)(); }, imports: [[
            NbSharedModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbButtonModule, { declarations: [NbButtonComponent], imports: [NbSharedModule], exports: [NbButtonComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbButtonModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                ],
                declarations: __spreadArrays(NB_BUTTON_COMPONENTS),
                exports: __spreadArrays(NB_BUTTON_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbButtonModule;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbDateService = /** @class */ (function () {
    function NbDateService() {
        this.DAYS_IN_WEEK = 7;
    }
    NbDateService.prototype.setLocale = function (locale) {
        this.locale = locale;
    };
    /**
     * Checks if the date is between the start date and the end date.
     * */
    NbDateService.prototype.isBetween = function (date, start, end) {
        return this.compareDates(date, start) > 0 && this.compareDates(date, end) < 0;
    };
    
    /**
     * Checks is two dates have the same day.
     * */
    NbDateService.prototype.isSameDaySafe = function (date1, date2) {
        return date1 && date2 && this.isSameDay(date1, date2);
    };
    
    /**
     * Checks is two dates have the same month.
     * */
    NbDateService.prototype.isSameMonthSafe = function (date1, date2) {
        return date1 && date2 && this.isSameMonth(date1, date2);
    };
    /**
     * Checks is two dates have the same year.
     * */
    NbDateService.prototype.isSameYearSafe = function (date1, date2) {
        return date1 && date2 && this.isSameYear(date1, date2);
    };
    return NbDateService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var batch = function (target, batchSize, offset) {
    if (offset === void 0) { offset = 0; }
    return target.reduce(function (res, item, index) {
        var chunkIndex = Math.floor((index + offset) / batchSize);
        if (!res[chunkIndex]) {
            res[chunkIndex] = [];
        }
        res[chunkIndex].push(item);
        return res;
    }, []);
};
/**
 * returns array with numbers from zero to bound.
 * */
var range = function (bound, producer) {
    if (producer === void 0) { producer = function (i) { return i; }; }
    var arr = [];
    for (var i = 0; i < bound; i++) {
        arr.push(producer(i));
    }
    return arr;
};

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarMonthModelService = /** @class */ (function () {
    function NbCalendarMonthModelService(dateService) {
        this.dateService = dateService;
    }
    NbCalendarMonthModelService.prototype.createDaysGrid = function (activeMonth, boundingMonth) {
        if (boundingMonth === void 0) { boundingMonth = true; }
        var weeks = this.createDates(activeMonth);
        return this.withBoundingMonths(weeks, activeMonth, boundingMonth);
    };
    NbCalendarMonthModelService.prototype.createDates = function (activeMonth) {
        var days = this.createDateRangeForMonth(activeMonth);
        var startOfWeekDayDiff = this.getStartOfWeekDayDiff(activeMonth);
        return batch(days, this.dateService.DAYS_IN_WEEK, startOfWeekDayDiff);
    };
    NbCalendarMonthModelService.prototype.withBoundingMonths = function (weeks, activeMonth, boundingMonth) {
        var withBoundingMonths = weeks;
        if (this.isShouldAddPrevBoundingMonth(withBoundingMonths)) {
            withBoundingMonths = this.addPrevBoundingMonth(withBoundingMonths, activeMonth, boundingMonth);
        }
        if (this.isShouldAddNextBoundingMonth(withBoundingMonths)) {
            withBoundingMonths = this.addNextBoundingMonth(withBoundingMonths, activeMonth, boundingMonth);
        }
        return withBoundingMonths;
    };
    NbCalendarMonthModelService.prototype.addPrevBoundingMonth = function (weeks, activeMonth, boundingMonth) {
        var firstWeek = weeks.shift();
        var requiredItems = this.dateService.DAYS_IN_WEEK - firstWeek.length;
        firstWeek.unshift.apply(firstWeek, this.createPrevBoundingDays(activeMonth, boundingMonth, requiredItems));
        return __spreadArrays([firstWeek], weeks);
    };
    NbCalendarMonthModelService.prototype.addNextBoundingMonth = function (weeks, activeMonth, boundingMonth) {
        var lastWeek = weeks.pop();
        var requiredItems = this.dateService.DAYS_IN_WEEK - lastWeek.length;
        lastWeek.push.apply(lastWeek, this.createNextBoundingDays(activeMonth, boundingMonth, requiredItems));
        return __spreadArrays(weeks, [lastWeek]);
    };
    NbCalendarMonthModelService.prototype.createPrevBoundingDays = function (activeMonth, boundingMonth, requiredItems) {
        var month = this.dateService.addMonth(activeMonth, -1);
        var daysInMonth = this.dateService.getNumberOfDaysInMonth(month);
        return this.createDateRangeForMonth(month)
            .slice(daysInMonth - requiredItems)
            .map(function (date) { return boundingMonth ? date : null; });
    };
    NbCalendarMonthModelService.prototype.createNextBoundingDays = function (activeMonth, boundingMonth, requiredItems) {
        var month = this.dateService.addMonth(activeMonth, 1);
        return this.createDateRangeForMonth(month)
            .slice(0, requiredItems)
            .map(function (date) { return boundingMonth ? date : null; });
    };
    NbCalendarMonthModelService.prototype.getStartOfWeekDayDiff = function (date) {
        var startOfMonth = this.dateService.getMonthStart(date);
        return this.getWeekStartDiff(startOfMonth);
    };
    NbCalendarMonthModelService.prototype.getWeekStartDiff = function (date) {
        return (7 - this.dateService.getFirstDayOfWeek() + this.dateService.getDayOfWeek(date)) % 7;
    };
    NbCalendarMonthModelService.prototype.isShouldAddPrevBoundingMonth = function (weeks) {
        return weeks[0].length < this.dateService.DAYS_IN_WEEK;
    };
    NbCalendarMonthModelService.prototype.isShouldAddNextBoundingMonth = function (weeks) {
        return weeks[weeks.length - 1].length < this.dateService.DAYS_IN_WEEK;
    };
    NbCalendarMonthModelService.prototype.createDateRangeForMonth = function (date) {
        var _this = this;
        var daysInMonth = this.dateService.getNumberOfDaysInMonth(date);
        return range(daysInMonth, function (i) {
            var year = _this.dateService.getYear(date);
            var month = _this.dateService.getMonth(date);
            return _this.dateService.createDate(year, month, i + 1);
        });
    };
    NbCalendarMonthModelService = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarMonthModelService);
NbCalendarMonthModelService.ɵfac = function NbCalendarMonthModelService_Factory(t) { return new (t || NbCalendarMonthModelService)(ɵngcc0.ɵɵinject(NbDateService)); };
NbCalendarMonthModelService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbCalendarMonthModelService, factory: function (t) { return NbCalendarMonthModelService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarMonthModelService, [{
        type: Injectable
    }], function () { return [{ type: NbDateService }]; }, null); })();
    return NbCalendarMonthModelService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarDayCellComponent = /** @class */ (function () {
    function NbCalendarDayCellComponent(dateService) {
        this.dateService = dateService;
        this.size = NbCalendarSize.MEDIUM;
        this.select = new EventEmitter(true);
        this.dayCellClass = true;
    }
    Object.defineProperty(NbCalendarDayCellComponent.prototype, "today", {
        get: function () {
            return this.dateService.isSameDaySafe(this.date, this.dateService.today());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayCellComponent.prototype, "boundingMonth", {
        get: function () {
            return !this.dateService.isSameMonthSafe(this.date, this.visibleDate);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayCellComponent.prototype, "selected", {
        get: function () {
            return this.dateService.isSameDaySafe(this.date, this.selectedValue);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayCellComponent.prototype, "empty", {
        get: function () {
            return !this.date;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayCellComponent.prototype, "disabled", {
        get: function () {
            return this.smallerThanMin() || this.greaterThanMax() || this.dontFitFilter();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayCellComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayCellComponent.prototype, "day", {
        get: function () {
            return this.date && this.dateService.getDate(this.date);
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarDayCellComponent.prototype.onClick = function () {
        if (this.disabled || this.empty) {
            return;
        }
        this.select.emit(this.date);
    };
    NbCalendarDayCellComponent.prototype.smallerThanMin = function () {
        return this.date && this.min && this.dateService.compareDates(this.date, this.min) < 0;
    };
    NbCalendarDayCellComponent.prototype.greaterThanMax = function () {
        return this.date && this.max && this.dateService.compareDates(this.date, this.max) > 0;
    };
    NbCalendarDayCellComponent.prototype.dontFitFilter = function () {
        return this.date && this.filter && !this.filter(this.date);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayCellComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayCellComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayCellComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayCellComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayCellComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarDayCellComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarDayCellComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarDayCellComponent.prototype, "select", void 0);
    __decorate([
        HostBinding('class.today'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarDayCellComponent.prototype, "today", null);
    __decorate([
        HostBinding('class.bounding-month'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarDayCellComponent.prototype, "boundingMonth", null);
    __decorate([
        HostBinding('class.selected'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarDayCellComponent.prototype, "selected", null);
    __decorate([
        HostBinding('class.empty'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarDayCellComponent.prototype, "empty", null);
    __decorate([
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarDayCellComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarDayCellComponent.prototype, "isLarge", null);
    __decorate([
        HostBinding('class.day-cell'),
        __metadata("design:type", Object)
    ], NbCalendarDayCellComponent.prototype, "dayCellClass", void 0);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbCalendarDayCellComponent.prototype, "onClick", null);
    NbCalendarDayCellComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarDayCellComponent);
NbCalendarDayCellComponent.ɵfac = function NbCalendarDayCellComponent_Factory(t) { return new (t || NbCalendarDayCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarDayCellComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarDayCellComponent, selectors: [["nb-calendar-day-cell"]], hostVars: 14, hostBindings: function NbCalendarDayCellComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbCalendarDayCellComponent_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("day-cell", ctx.dayCellClass)("today", ctx.today)("bounding-month", ctx.boundingMonth)("selected", ctx.selected)("empty", ctx.empty)("disabled", ctx.disabled)("size-large", ctx.isLarge);
    } }, inputs: { size: "size", date: "date", selectedValue: "selectedValue", visibleDate: "visibleDate", min: "min", max: "max", filter: "filter" }, outputs: { select: "select" }, decls: 2, vars: 1, consts: [[1, "cell-content"]], template: function NbCalendarDayCellComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.day, " ");
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarDayCellComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-day-cell',
                template: "\n    <div class=\"cell-content\">\n      {{ day }}\n    </div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }]; }, { size: [{
            type: Input
        }], select: [{
            type: Output
        }], dayCellClass: [{
            type: HostBinding,
            args: ['class.day-cell']
        }], today: [{
            type: HostBinding,
            args: ['class.today']
        }], boundingMonth: [{
            type: HostBinding,
            args: ['class.bounding-month']
        }], selected: [{
            type: HostBinding,
            args: ['class.selected']
        }], empty: [{
            type: HostBinding,
            args: ['class.empty']
        }], disabled: [{
            type: HostBinding,
            args: ['class.disabled']
        }], isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }], date: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }] }); })();
    return NbCalendarDayCellComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Provides capability pick days.
 * */
var NbCalendarDayPickerComponent = /** @class */ (function () {
    function NbCalendarDayPickerComponent(monthModel) {
        this.monthModel = monthModel;
        /**
         * Defines if we should render previous and next months
         * in the current month view.
         * */
        this.boundingMonths = true;
        this.cellComponent = NbCalendarDayCellComponent;
        /**
         * Size of the component.
         * Can be 'medium' which is default or 'large'.
         * */
        this.size = NbCalendarSize.MEDIUM;
        this._showWeekNumber = false;
        /**
         * Fires newly selected date.
         * */
        this.dateChange = new EventEmitter();
    }
    Object.defineProperty(NbCalendarDayPickerComponent.prototype, "setCellComponent", {
        /**
         * Custom day cell component. Have to implement `NbCalendarCell` interface.
         * */
        set: function (cellComponent) {
            if (cellComponent) {
                this.cellComponent = cellComponent;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayPickerComponent.prototype, "showWeekNumber", {
        /**
         * Determines should we show week numbers column.
         * False by default.
         * */
        get: function () {
            return this._showWeekNumber;
        },
        set: function (value) {
            this._showWeekNumber = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarDayPickerComponent.prototype, "large", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarDayPickerComponent.prototype.ngOnChanges = function (_a) {
        var visibleDate = _a.visibleDate;
        if (visibleDate) {
            this.weeks = this.monthModel.createDaysGrid(this.visibleDate, this.boundingMonths);
        }
    };
    NbCalendarDayPickerComponent.prototype.onSelect = function (day) {
        this.dateChange.emit(day);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayPickerComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbCalendarDayPickerComponent.prototype, "boundingMonths", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayPickerComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayPickerComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarDayPickerComponent.prototype, "filter", void 0);
    __decorate([
        Input('cellComponent'),
        __metadata("design:type", Type),
        __metadata("design:paramtypes", [Type])
    ], NbCalendarDayPickerComponent.prototype, "setCellComponent", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarDayPickerComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarDayPickerComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbCalendarDayPickerComponent.prototype, "showWeekNumber", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarDayPickerComponent.prototype, "weekNumberSymbol", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbCalendarDayPickerComponent.prototype, "dateChange", void 0);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCalendarDayPickerComponent.prototype, "large", null);
    NbCalendarDayPickerComponent = __decorate([ __metadata("design:paramtypes", [NbCalendarMonthModelService])
    ], NbCalendarDayPickerComponent);
NbCalendarDayPickerComponent.ɵfac = function NbCalendarDayPickerComponent_Factory(t) { return new (t || NbCalendarDayPickerComponent)(ɵngcc0.ɵɵdirectiveInject(NbCalendarMonthModelService)); };
NbCalendarDayPickerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarDayPickerComponent, selectors: [["nb-calendar-day-picker"]], hostVars: 2, hostBindings: function NbCalendarDayPickerComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-large", ctx.large);
    } }, inputs: { boundingMonths: "boundingMonths", size: "size", setCellComponent: ["cellComponent", "setCellComponent"], showWeekNumber: "showWeekNumber", visibleDate: "visibleDate", min: "min", max: "max", filter: "filter", date: "date", weekNumberSymbol: "weekNumberSymbol" }, outputs: { dateChange: "dateChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 4, vars: 10, consts: [[3, "weeks", "size", "weekNumberSymbol", 4, "ngIf"], [1, "days-container"], [3, "size"], [3, "data", "visibleDate", "selectedValue", "cellComponent", "min", "max", "filter", "size", "select"], [3, "weeks", "size", "weekNumberSymbol"]], template: function NbCalendarDayPickerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbCalendarDayPickerComponent_nb_calendar_week_numbers_0_Template, 1, 3, "nb-calendar-week-numbers", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelement(2, "nb-calendar-days-names", 2);
        ɵngcc0.ɵɵelementStart(3, "nb-calendar-picker", 3);
        ɵngcc0.ɵɵlistener("select", function NbCalendarDayPickerComponent_Template_nb_calendar_picker_select_3_listener($event) { return ctx.onSelect($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.showWeekNumber);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("size", ctx.size);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("data", ctx.weeks)("visibleDate", ctx.visibleDate)("selectedValue", ctx.date)("cellComponent", ctx.cellComponent)("min", ctx.min)("max", ctx.max)("filter", ctx.filter)("size", ctx.size);
    } }, directives: function () { return [ɵngcc2.NgIf, NbCalendarDaysNamesComponent,
        NbCalendarPickerComponent,
        NbCalendarWeekNumberComponent]; }, styles: ["[_nghost-%COMP%]{display:flex}.days-container[_ngcontent-%COMP%]{width:100%}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarDayPickerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-day-picker',
                template: "\n    <nb-calendar-week-numbers *ngIf=\"showWeekNumber\"\n                              [weeks]=\"weeks\"\n                              [size]=\"size\"\n                              [weekNumberSymbol]=\"weekNumberSymbol\">\n    </nb-calendar-week-numbers>\n    <div class=\"days-container\">\n      <nb-calendar-days-names [size]=\"size\"></nb-calendar-days-names>\n      <nb-calendar-picker\n          [data]=\"weeks\"\n          [visibleDate]=\"visibleDate\"\n          [selectedValue]=\"date\"\n          [cellComponent]=\"cellComponent\"\n          [min]=\"min\"\n          [max]=\"max\"\n          [filter]=\"filter\"\n          [size]=\"size\"\n          (select)=\"onSelect($event)\">\n      </nb-calendar-picker>\n    </div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:flex}.days-container{width:100%}\n"]
            }]
    }], function () { return [{ type: NbCalendarMonthModelService }]; }, { boundingMonths: [{
            type: Input
        }], size: [{
            type: Input
        }], dateChange: [{
            type: Output
        }], setCellComponent: [{
            type: Input,
            args: ['cellComponent']
        }], showWeekNumber: [{
            type: Input
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], visibleDate: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], date: [{
            type: Input
        }], weekNumberSymbol: [{
            type: Input
        }] }); })();
    return NbCalendarDayPickerComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarDaysNamesComponent = /** @class */ (function () {
    function NbCalendarDaysNamesComponent(dateService) {
        this.dateService = dateService;
    }
    Object.defineProperty(NbCalendarDaysNamesComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarDaysNamesComponent.prototype.ngOnInit = function () {
        var days = this.createDaysNames();
        this.days = this.shiftStartOfWeek(days);
    };
    NbCalendarDaysNamesComponent.prototype.createDaysNames = function () {
        return this.dateService.getDayOfWeekNames()
            .map(this.markIfHoliday);
    };
    NbCalendarDaysNamesComponent.prototype.shiftStartOfWeek = function (days) {
        for (var i = 0; i < this.dateService.getFirstDayOfWeek(); i++) {
            days.push(days.shift());
        }
        return days;
    };
    NbCalendarDaysNamesComponent.prototype.markIfHoliday = function (name, i) {
        return { name: name, isHoliday: i % 6 === 0 };
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarDaysNamesComponent.prototype, "size", void 0);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarDaysNamesComponent.prototype, "isLarge", null);
    NbCalendarDaysNamesComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarDaysNamesComponent);
NbCalendarDaysNamesComponent.ɵfac = function NbCalendarDaysNamesComponent_Factory(t) { return new (t || NbCalendarDaysNamesComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarDaysNamesComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarDaysNamesComponent, selectors: [["nb-calendar-days-names"]], hostVars: 2, hostBindings: function NbCalendarDaysNamesComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-large", ctx.isLarge);
    } }, inputs: { size: "size" }, decls: 1, vars: 1, consts: [["class", "day", 3, "holiday", 4, "ngFor", "ngForOf"], [1, "day"]], template: function NbCalendarDaysNamesComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbCalendarDaysNamesComponent_div_0_Template, 2, 3, "div", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngForOf", ctx.days);
    } }, directives: [ɵngcc2.NgForOf], styles: ["[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .day[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarDaysNamesComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-days-names',
                template: "\n    <div class=\"day\" *ngFor=\"let day of days\" [class.holiday]=\"day.isHoliday\">{{ day.name }}</div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:flex;justify-content:space-between}:host .day{display:flex;align-items:center;justify-content:center}\n"]
            }]
    }], function () { return [{ type: NbDateService }]; }, { isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], size: [{
            type: Input
        }] }); })();
    return NbCalendarDaysNamesComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarMonthCellComponent = /** @class */ (function () {
    function NbCalendarMonthCellComponent(dateService) {
        this.dateService = dateService;
        this.size = NbCalendarSize.MEDIUM;
        this.select = new EventEmitter(true);
        this.monthCellClass = true;
    }
    Object.defineProperty(NbCalendarMonthCellComponent.prototype, "selected", {
        get: function () {
            return this.dateService.isSameMonthSafe(this.date, this.selectedValue);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarMonthCellComponent.prototype, "today", {
        get: function () {
            return this.dateService.isSameMonthSafe(this.date, this.dateService.today());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarMonthCellComponent.prototype, "disabled", {
        get: function () {
            return this.smallerThanMin() || this.greaterThanMax();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarMonthCellComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarMonthCellComponent.prototype, "month", {
        get: function () {
            return this.dateService.getMonthName(this.date);
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarMonthCellComponent.prototype.onClick = function () {
        if (this.disabled) {
            return;
        }
        this.select.emit(this.date);
    };
    NbCalendarMonthCellComponent.prototype.smallerThanMin = function () {
        return this.date && this.min && this.dateService.compareDates(this.monthEnd(), this.min) < 0;
    };
    NbCalendarMonthCellComponent.prototype.greaterThanMax = function () {
        return this.date && this.max && this.dateService.compareDates(this.monthStart(), this.max) > 0;
    };
    NbCalendarMonthCellComponent.prototype.monthStart = function () {
        return this.dateService.getMonthStart(this.date);
    };
    NbCalendarMonthCellComponent.prototype.monthEnd = function () {
        return this.dateService.getMonthEnd(this.date);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthCellComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthCellComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthCellComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthCellComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarMonthCellComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarMonthCellComponent.prototype, "select", void 0);
    __decorate([
        HostBinding('class.selected'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarMonthCellComponent.prototype, "selected", null);
    __decorate([
        HostBinding('class.today'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarMonthCellComponent.prototype, "today", null);
    __decorate([
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarMonthCellComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarMonthCellComponent.prototype, "isLarge", null);
    __decorate([
        HostBinding('class.month-cell'),
        __metadata("design:type", Object)
    ], NbCalendarMonthCellComponent.prototype, "monthCellClass", void 0);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbCalendarMonthCellComponent.prototype, "onClick", null);
    NbCalendarMonthCellComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarMonthCellComponent);
NbCalendarMonthCellComponent.ɵfac = function NbCalendarMonthCellComponent_Factory(t) { return new (t || NbCalendarMonthCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarMonthCellComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarMonthCellComponent, selectors: [["nb-calendar-month-cell"]], hostVars: 10, hostBindings: function NbCalendarMonthCellComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbCalendarMonthCellComponent_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("month-cell", ctx.monthCellClass)("selected", ctx.selected)("today", ctx.today)("disabled", ctx.disabled)("size-large", ctx.isLarge);
    } }, inputs: { size: "size", date: "date", selectedValue: "selectedValue", min: "min", max: "max" }, outputs: { select: "select" }, decls: 2, vars: 1, consts: [[1, "cell-content"]], template: function NbCalendarMonthCellComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.month, " ");
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarMonthCellComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-month-cell',
                template: "\n    <div class=\"cell-content\">\n      {{ month }}\n    </div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }]; }, { size: [{
            type: Input
        }], select: [{
            type: Output
        }], monthCellClass: [{
            type: HostBinding,
            args: ['class.month-cell']
        }], selected: [{
            type: HostBinding,
            args: ['class.selected']
        }], today: [{
            type: HostBinding,
            args: ['class.today']
        }], disabled: [{
            type: HostBinding,
            args: ['class.disabled']
        }], isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }], date: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }] }); })();
    return NbCalendarMonthCellComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var MONTHS_IN_VIEW = 12;
var MONTHS_IN_COLUMN = 4;
var NbCalendarMonthPickerComponent = /** @class */ (function () {
    function NbCalendarMonthPickerComponent(dateService) {
        this.dateService = dateService;
        this.size = NbCalendarSize.MEDIUM;
        this.monthChange = new EventEmitter();
        this.cellComponent = NbCalendarMonthCellComponent;
    }
    Object.defineProperty(NbCalendarMonthPickerComponent.prototype, "_cellComponent", {
        set: function (cellComponent) {
            if (cellComponent) {
                this.cellComponent = cellComponent;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarMonthPickerComponent.prototype, "large", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarMonthPickerComponent.prototype.ngOnChanges = function (changes) {
        if (changes.month) {
            this.initMonths();
        }
    };
    NbCalendarMonthPickerComponent.prototype.initMonths = function () {
        var date = this.dateService.getDate(this.month);
        var year = this.dateService.getYear(this.month);
        var firstMonth = this.dateService.createDate(year, 0, date);
        var months = [firstMonth];
        for (var monthIndex = 1; monthIndex < MONTHS_IN_VIEW; monthIndex++) {
            months.push(this.dateService.addMonth(firstMonth, monthIndex));
        }
        this.months = batch(months, MONTHS_IN_COLUMN);
    };
    NbCalendarMonthPickerComponent.prototype.onSelect = function (month) {
        this.monthChange.emit(month);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthPickerComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthPickerComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarMonthPickerComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarMonthPickerComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthPickerComponent.prototype, "month", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarMonthPickerComponent.prototype, "date", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarMonthPickerComponent.prototype, "monthChange", void 0);
    __decorate([
        Input('cellComponent'),
        __metadata("design:type", Type),
        __metadata("design:paramtypes", [Type])
    ], NbCalendarMonthPickerComponent.prototype, "_cellComponent", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCalendarMonthPickerComponent.prototype, "large", null);
    NbCalendarMonthPickerComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarMonthPickerComponent);
NbCalendarMonthPickerComponent.ɵfac = function NbCalendarMonthPickerComponent_Factory(t) { return new (t || NbCalendarMonthPickerComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarMonthPickerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarMonthPickerComponent, selectors: [["nb-calendar-month-picker"]], hostVars: 2, hostBindings: function NbCalendarMonthPickerComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-large", ctx.large);
    } }, inputs: { size: "size", _cellComponent: ["cellComponent", "_cellComponent"], min: "min", max: "max", filter: "filter", month: "month", date: "date" }, outputs: { monthChange: "monthChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 8, consts: [[3, "data", "min", "max", "filter", "selectedValue", "visibleDate", "cellComponent", "size", "select"]], template: function NbCalendarMonthPickerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nb-calendar-picker", 0);
        ɵngcc0.ɵɵlistener("select", function NbCalendarMonthPickerComponent_Template_nb_calendar_picker_select_0_listener($event) { return ctx.onSelect($event); });
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("data", ctx.months)("min", ctx.min)("max", ctx.max)("filter", ctx.filter)("selectedValue", ctx.date)("visibleDate", ctx.month)("cellComponent", ctx.cellComponent)("size", ctx.size);
    } }, directives: function () { return [NbCalendarPickerComponent]; }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarMonthPickerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-month-picker',
                template: "\n    <nb-calendar-picker\n      [data]=\"months\"\n      [min]=\"min\"\n      [max]=\"max\"\n      [filter]=\"filter\"\n      [selectedValue]=\"date\"\n      [visibleDate]=\"month\"\n      [cellComponent]=\"cellComponent\"\n      [size]=\"size\"\n      (select)=\"onSelect($event)\">\n    </nb-calendar-picker>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }]; }, { size: [{
            type: Input
        }], monthChange: [{
            type: Output
        }], _cellComponent: [{
            type: Input,
            args: ['cellComponent']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], month: [{
            type: Input
        }], date: [{
            type: Input
        }] }); })();
    return NbCalendarMonthPickerComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarYearModelService = /** @class */ (function () {
    function NbCalendarYearModelService(dateService) {
        this.dateService = dateService;
        this.yearsInView = 12;
        this.yearsInRow = 4;
    }
    NbCalendarYearModelService.prototype.getYearsInView = function () {
        return this.yearsInView;
    };
    NbCalendarYearModelService.prototype.getYearsInRow = function () {
        return this.yearsInRow;
    };
    NbCalendarYearModelService.prototype.getViewYears = function (viewYear) {
        var _this = this;
        var year = this.dateService.getYear(viewYear);
        var viewStartYear;
        if (year >= 0) {
            viewStartYear = year - (year % this.yearsInView);
        }
        else {
            viewStartYear = year - (year % this.yearsInView + this.yearsInView);
        }
        var years = range(this.yearsInView).map(function (i) { return _this.copyWithYear(viewStartYear + i, viewYear); });
        return batch(years, this.yearsInRow);
    };
    NbCalendarYearModelService.prototype.copyWithYear = function (year, date) {
        return this.dateService.createDate(year, this.dateService.getMonth(date), this.dateService.getDate(date));
    };
    NbCalendarYearModelService = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarYearModelService);
NbCalendarYearModelService.ɵfac = function NbCalendarYearModelService_Factory(t) { return new (t || NbCalendarYearModelService)(ɵngcc0.ɵɵinject(NbDateService)); };
NbCalendarYearModelService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbCalendarYearModelService, factory: function (t) { return NbCalendarYearModelService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarYearModelService, [{
        type: Injectable
    }], function () { return [{ type: NbDateService }]; }, null); })();
    return NbCalendarYearModelService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarViewModeComponent = /** @class */ (function () {
    function NbCalendarViewModeComponent(dateService, yearModelService) {
        this.dateService = dateService;
        this.yearModelService = yearModelService;
        this.viewMode = NbCalendarViewMode.DATE;
        this.changeMode = new EventEmitter(true);
    }
    NbCalendarViewModeComponent.prototype.getText = function () {
        if (!this.date) {
            return '';
        }
        switch (this.viewMode) {
            case NbCalendarViewMode.DATE: {
                var month = this.dateService.getMonthName(this.date, TranslationWidth.Wide);
                var year = this.dateService.getYear(this.date);
                return month + " " + year;
            }
            case NbCalendarViewMode.MONTH:
                return "" + this.dateService.getYear(this.date);
            case NbCalendarViewMode.YEAR:
                return this.getFirstYear() + " - " + this.getLastYear();
        }
    };
    NbCalendarViewModeComponent.prototype.getIcon = function () {
        if (this.viewMode === NbCalendarViewMode.DATE) {
            return 'chevron-down-outline';
        }
        return 'chevron-up-outline';
    };
    NbCalendarViewModeComponent.prototype.getFirstYear = function () {
        var years = this.yearModelService.getViewYears(this.date);
        return this.dateService.getYear(years[0][0]).toString();
    };
    NbCalendarViewModeComponent.prototype.getLastYear = function () {
        var years = this.yearModelService.getViewYears(this.date);
        var lastRow = years[years.length - 1];
        var lastYear = lastRow[lastRow.length - 1];
        return this.dateService.getYear(lastYear).toString();
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarViewModeComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarViewModeComponent.prototype, "viewMode", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbCalendarViewModeComponent.prototype, "changeMode", void 0);
    NbCalendarViewModeComponent = __decorate([ __metadata("design:paramtypes", [NbDateService,
            NbCalendarYearModelService])
    ], NbCalendarViewModeComponent);
NbCalendarViewModeComponent.ɵfac = function NbCalendarViewModeComponent_Factory(t) { return new (t || NbCalendarViewModeComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NbCalendarYearModelService)); };
NbCalendarViewModeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarViewModeComponent, selectors: [["nb-calendar-view-mode"]], inputs: { viewMode: "viewMode", date: "date" }, outputs: { changeMode: "changeMode" }, decls: 3, vars: 2, consts: [["nbButton", "", "ghost", "", "status", "basic", 3, "click"], ["pack", "nebular-essentials", 3, "icon"]], template: function NbCalendarViewModeComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "button", 0);
        ɵngcc0.ɵɵlistener("click", function NbCalendarViewModeComponent_Template_button_click_0_listener() { return ctx.changeMode.emit(); });
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelement(2, "nb-icon", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.getText(), " ");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("icon", ctx.getIcon());
    } }, directives: [NbButtonComponent,
        NbIconComponent], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarViewModeComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-view-mode',
                template: "\n    <button nbButton (click)=\"changeMode.emit()\" ghost status=\"basic\">\n      {{ getText() }}\n      <nb-icon [icon]=\"getIcon()\" pack=\"nebular-essentials\"></nb-icon>\n    </button>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }, { type: NbCalendarYearModelService }]; }, { viewMode: [{
            type: Input
        }], changeMode: [{
            type: Output
        }], date: [{
            type: Input
        }] }); })();
    return NbCalendarViewModeComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarPageableNavigationComponent = /** @class */ (function () {
    function NbCalendarPageableNavigationComponent(directionService) {
        this.directionService = directionService;
        this.next = new EventEmitter();
        this.prev = new EventEmitter();
    }
    Object.defineProperty(NbCalendarPageableNavigationComponent.prototype, "isLtr", {
        get: function () {
            return this.directionService.isLtr();
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbCalendarPageableNavigationComponent.prototype, "next", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbCalendarPageableNavigationComponent.prototype, "prev", void 0);
    NbCalendarPageableNavigationComponent = __decorate([ __metadata("design:paramtypes", [NbLayoutDirectionService])
    ], NbCalendarPageableNavigationComponent);
NbCalendarPageableNavigationComponent.ɵfac = function NbCalendarPageableNavigationComponent_Factory(t) { return new (t || NbCalendarPageableNavigationComponent)(ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService)); };
NbCalendarPageableNavigationComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarPageableNavigationComponent, selectors: [["nb-calendar-pageable-navigation"]], outputs: { next: "next", prev: "prev" }, decls: 4, vars: 2, consts: [["nbButton", "", "ghost", "", "status", "basic", 1, "prev-month", 3, "click"], ["pack", "nebular-essentials", 3, "icon"], ["nbButton", "", "ghost", "", "status", "basic", 1, "next-month", 3, "click"]], template: function NbCalendarPageableNavigationComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "button", 0);
        ɵngcc0.ɵɵlistener("click", function NbCalendarPageableNavigationComponent_Template_button_click_0_listener() { return ctx.prev.emit(); });
        ɵngcc0.ɵɵelement(1, "nb-icon", 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(2, "button", 2);
        ɵngcc0.ɵɵlistener("click", function NbCalendarPageableNavigationComponent_Template_button_click_2_listener() { return ctx.next.emit(); });
        ɵngcc0.ɵɵelement(3, "nb-icon", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("icon", ctx.isLtr ? "chevron-left-outline" : "chevron-right-outline");
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("icon", ctx.isLtr ? "chevron-right-outline" : "chevron-left-outline");
    } }, directives: [NbButtonComponent,
        NbIconComponent], styles: ["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:flex-start}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarPageableNavigationComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-pageable-navigation',
                template: "\n    <button nbButton (click)=\"prev.emit()\" ghost status=\"basic\" class=\"prev-month\">\n      <nb-icon [icon]=\"isLtr ? 'chevron-left-outline' : 'chevron-right-outline'\" pack=\"nebular-essentials\"></nb-icon>\n    </button>\n    <button nbButton (click)=\"next.emit()\" ghost status=\"basic\" class=\"next-month\">\n      <nb-icon [icon]=\"isLtr ? 'chevron-right-outline' : 'chevron-left-outline'\" pack=\"nebular-essentials\"></nb-icon>\n    </button>\n  ",
                styles: [":host{display:flex;align-items:center;justify-content:flex-start}\n"]
            }]
    }], function () { return [{ type: NbLayoutDirectionService }]; }, { next: [{
            type: Output
        }], prev: [{
            type: Output
        }] }); })();
    return NbCalendarPageableNavigationComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarPickerComponent = /** @class */ (function () {
    function NbCalendarPickerComponent() {
        this.size = NbCalendarSize.MEDIUM;
        this.select = new EventEmitter();
    }
    Object.defineProperty(NbCalendarPickerComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbCalendarPickerComponent.prototype, "data", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbCalendarPickerComponent.prototype, "cellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarPickerComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarPickerComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarPickerComponent.prototype, "select", void 0);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarPickerComponent.prototype, "isLarge", null);
NbCalendarPickerComponent.ɵfac = function NbCalendarPickerComponent_Factory(t) { return new (t || NbCalendarPickerComponent)(); };
NbCalendarPickerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarPickerComponent, selectors: [["nb-calendar-picker"]], hostVars: 2, hostBindings: function NbCalendarPickerComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-large", ctx.isLarge);
    } }, inputs: { size: "size", data: "data", visibleDate: "visibleDate", selectedValue: "selectedValue", cellComponent: "cellComponent", min: "min", max: "max", filter: "filter" }, outputs: { select: "select" }, decls: 1, vars: 1, consts: [[3, "row", "visibleDate", "selectedValue", "component", "min", "max", "filter", "size", "select", 4, "ngFor", "ngForOf"], [3, "row", "visibleDate", "selectedValue", "component", "min", "max", "filter", "size", "select"]], template: function NbCalendarPickerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbCalendarPickerComponent_nb_calendar_picker_row_0_Template, 1, 8, "nb-calendar-picker-row", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngForOf", ctx.data);
    } }, directives: function () { return [ɵngcc2.NgForOf, NbCalendarPickerRowComponent]; }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarPickerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-picker',
                template: "\n    <nb-calendar-picker-row\n      *ngFor=\"let row of data\"\n      [row]=\"row\"\n      [visibleDate]=\"visibleDate\"\n      [selectedValue]=\"selectedValue\"\n      [component]=\"cellComponent\"\n      [min]=\"min\"\n      [max]=\"max\"\n      [filter]=\"filter\"\n      [size]=\"size\"\n      (select)=\"select.emit($event)\">\n    </nb-calendar-picker-row>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return []; }, { size: [{
            type: Input
        }], select: [{
            type: Output
        }], isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], data: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }], cellComponent: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }] }); })();
    return NbCalendarPickerComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarPickerRowComponent = /** @class */ (function () {
    function NbCalendarPickerRowComponent(cfr) {
        this.cfr = cfr;
        this.size = NbCalendarSize.MEDIUM;
        this.select = new EventEmitter();
    }
    NbCalendarPickerRowComponent.prototype.ngOnChanges = function () {
        var _this = this;
        var factory = this.cfr.resolveComponentFactory(this.component);
        this.containerRef.clear();
        this.row.forEach(function (date) {
            var component = _this.containerRef.createComponent(factory);
            _this.patchWithContext(component.instance, date);
            component.changeDetectorRef.detectChanges();
        });
    };
    NbCalendarPickerRowComponent.prototype.patchWithContext = function (component, date) {
        component.visibleDate = this.visibleDate;
        component.selectedValue = this.selectedValue;
        component.date = date;
        component.min = this.min;
        component.max = this.max;
        component.filter = this.filter;
        component.size = this.size;
        component.select.subscribe(this.select.emit.bind(this.select));
    };
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbCalendarPickerRowComponent.prototype, "row", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerRowComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerRowComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbCalendarPickerRowComponent.prototype, "component", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerRowComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarPickerRowComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarPickerRowComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarPickerRowComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarPickerRowComponent.prototype, "select", void 0);
    __decorate([
        ViewChild(TemplateRef, { read: ViewContainerRef, static: true }),
        __metadata("design:type", ViewContainerRef)
    ], NbCalendarPickerRowComponent.prototype, "containerRef", void 0);
    NbCalendarPickerRowComponent = __decorate([ __metadata("design:paramtypes", [ComponentFactoryResolver])
    ], NbCalendarPickerRowComponent);
NbCalendarPickerRowComponent.ɵfac = function NbCalendarPickerRowComponent_Factory(t) { return new (t || NbCalendarPickerRowComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ComponentFactoryResolver)); };
NbCalendarPickerRowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarPickerRowComponent, selectors: [["nb-calendar-picker-row"]], viewQuery: function NbCalendarPickerRowComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(TemplateRef, true, ViewContainerRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.containerRef = _t.first);
    } }, inputs: { size: "size", row: "row", selectedValue: "selectedValue", visibleDate: "visibleDate", component: "component", min: "min", max: "max", filter: "filter" }, outputs: { select: "select" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 0, template: function NbCalendarPickerRowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbCalendarPickerRowComponent_ng_template_0_Template, 0, 0, "ng-template");
    } }, styles: ["[_nghost-%COMP%] {\n      display: flex;\n      justify-content: space-between;\n    }"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarPickerRowComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-picker-row',
                template: '<ng-template></ng-template>',
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: ["\n    :host {\n      display: flex;\n      justify-content: space-between;\n    }\n  "]
            }]
    }], function () { return [{ type: ɵngcc0.ComponentFactoryResolver }]; }, { size: [{
            type: Input
        }], select: [{
            type: Output
        }], row: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }], component: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], containerRef: [{
            type: ViewChild,
            args: [TemplateRef, { read: ViewContainerRef, static: true }]
        }] }); })();
    return NbCalendarPickerRowComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarYearCellComponent = /** @class */ (function () {
    function NbCalendarYearCellComponent(dateService) {
        this.dateService = dateService;
        this.size = NbCalendarSize.MEDIUM;
        this.select = new EventEmitter(true);
        this.yearCellClass = true;
    }
    Object.defineProperty(NbCalendarYearCellComponent.prototype, "selected", {
        get: function () {
            return this.dateService.isSameYearSafe(this.date, this.selectedValue);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarYearCellComponent.prototype, "today", {
        get: function () {
            return this.dateService.isSameYearSafe(this.date, this.dateService.today());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarYearCellComponent.prototype, "disabled", {
        get: function () {
            return this.smallerThanMin() || this.greaterThanMax();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarYearCellComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarYearCellComponent.prototype, "year", {
        get: function () {
            return this.dateService.getYear(this.date);
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarYearCellComponent.prototype.onClick = function () {
        if (this.disabled) {
            return;
        }
        this.select.emit(this.date);
    };
    NbCalendarYearCellComponent.prototype.smallerThanMin = function () {
        return this.date && this.min && this.dateService.compareDates(this.yearEnd(), this.min) < 0;
    };
    NbCalendarYearCellComponent.prototype.greaterThanMax = function () {
        return this.date && this.max && this.dateService.compareDates(this.yearStart(), this.max) > 0;
    };
    NbCalendarYearCellComponent.prototype.yearStart = function () {
        return this.dateService.getYearStart(this.date);
    };
    NbCalendarYearCellComponent.prototype.yearEnd = function () {
        return this.dateService.getYearEnd(this.date);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearCellComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearCellComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearCellComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearCellComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarYearCellComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarYearCellComponent.prototype, "select", void 0);
    __decorate([
        HostBinding('class.selected'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarYearCellComponent.prototype, "selected", null);
    __decorate([
        HostBinding('class.today'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarYearCellComponent.prototype, "today", null);
    __decorate([
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarYearCellComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarYearCellComponent.prototype, "isLarge", null);
    __decorate([
        HostBinding('class.year-cell'),
        __metadata("design:type", Object)
    ], NbCalendarYearCellComponent.prototype, "yearCellClass", void 0);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbCalendarYearCellComponent.prototype, "onClick", null);
    NbCalendarYearCellComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarYearCellComponent);
NbCalendarYearCellComponent.ɵfac = function NbCalendarYearCellComponent_Factory(t) { return new (t || NbCalendarYearCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarYearCellComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarYearCellComponent, selectors: [["nb-calendar-year-cell"]], hostVars: 10, hostBindings: function NbCalendarYearCellComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbCalendarYearCellComponent_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("year-cell", ctx.yearCellClass)("selected", ctx.selected)("today", ctx.today)("disabled", ctx.disabled)("size-large", ctx.isLarge);
    } }, inputs: { size: "size", date: "date", min: "min", max: "max", selectedValue: "selectedValue" }, outputs: { select: "select" }, decls: 2, vars: 1, consts: [[1, "cell-content"]], template: function NbCalendarYearCellComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.year, " ");
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarYearCellComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-year-cell',
                template: "\n    <div class=\"cell-content\">\n      {{ year }}\n    </div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }]; }, { size: [{
            type: Input
        }], select: [{
            type: Output
        }], yearCellClass: [{
            type: HostBinding,
            args: ['class.year-cell']
        }], selected: [{
            type: HostBinding,
            args: ['class.selected']
        }], today: [{
            type: HostBinding,
            args: ['class.today']
        }], disabled: [{
            type: HostBinding,
            args: ['class.disabled']
        }], isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }], date: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }] }); })();
    return NbCalendarYearCellComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarYearPickerComponent = /** @class */ (function () {
    function NbCalendarYearPickerComponent(dateService, yearModelService) {
        this.dateService = dateService;
        this.yearModelService = yearModelService;
        this.cellComponent = NbCalendarYearCellComponent;
        this.size = NbCalendarSize.MEDIUM;
        this.yearChange = new EventEmitter();
    }
    Object.defineProperty(NbCalendarYearPickerComponent.prototype, "_cellComponent", {
        set: function (cellComponent) {
            if (cellComponent) {
                this.cellComponent = cellComponent;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarYearPickerComponent.prototype, "large", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarYearPickerComponent.prototype.ngOnChanges = function () {
        this.years = this.yearModelService.getViewYears(this.year);
    };
    NbCalendarYearPickerComponent.prototype.onSelect = function (year) {
        this.yearChange.emit(year);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearPickerComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearPickerComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearPickerComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarYearPickerComponent.prototype, "filter", void 0);
    __decorate([
        Input('cellComponent'),
        __metadata("design:type", Type),
        __metadata("design:paramtypes", [Type])
    ], NbCalendarYearPickerComponent.prototype, "_cellComponent", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarYearPickerComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarYearPickerComponent.prototype, "year", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbCalendarYearPickerComponent.prototype, "yearChange", void 0);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCalendarYearPickerComponent.prototype, "large", null);
    NbCalendarYearPickerComponent = __decorate([ __metadata("design:paramtypes", [NbDateService,
            NbCalendarYearModelService])
    ], NbCalendarYearPickerComponent);
NbCalendarYearPickerComponent.ɵfac = function NbCalendarYearPickerComponent_Factory(t) { return new (t || NbCalendarYearPickerComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NbCalendarYearModelService)); };
NbCalendarYearPickerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarYearPickerComponent, selectors: [["nb-calendar-year-picker"]], hostVars: 2, hostBindings: function NbCalendarYearPickerComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-large", ctx.large);
    } }, inputs: { size: "size", _cellComponent: ["cellComponent", "_cellComponent"], date: "date", min: "min", max: "max", filter: "filter", year: "year" }, outputs: { yearChange: "yearChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 8, consts: [[3, "data", "min", "max", "filter", "selectedValue", "visibleDate", "cellComponent", "size", "select"]], template: function NbCalendarYearPickerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nb-calendar-picker", 0);
        ɵngcc0.ɵɵlistener("select", function NbCalendarYearPickerComponent_Template_nb_calendar_picker_select_0_listener($event) { return ctx.onSelect($event); });
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("data", ctx.years)("min", ctx.min)("max", ctx.max)("filter", ctx.filter)("selectedValue", ctx.date)("visibleDate", ctx.year)("cellComponent", ctx.cellComponent)("size", ctx.size);
    } }, directives: [NbCalendarPickerComponent], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarYearPickerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-year-picker',
                template: "\n    <nb-calendar-picker\n      [data]=\"years\"\n      [min]=\"min\"\n      [max]=\"max\"\n      [filter]=\"filter\"\n      [selectedValue]=\"date\"\n      [visibleDate]=\"year\"\n      [cellComponent]=\"cellComponent\"\n      [size]=\"size\"\n      (select)=\"onSelect($event)\">\n    </nb-calendar-picker>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }, { type: NbCalendarYearModelService }]; }, { size: [{
            type: Input
        }], yearChange: [{
            type: Output
        }], _cellComponent: [{
            type: Input,
            args: ['cellComponent']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], date: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], year: [{
            type: Input
        }] }); })();
    return NbCalendarYearPickerComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarWeekNumberComponent = /** @class */ (function () {
    function NbCalendarWeekNumberComponent(dateService) {
        this.dateService = dateService;
    }
    Object.defineProperty(NbCalendarWeekNumberComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarWeekNumberComponent.prototype.ngOnChanges = function (changes) {
        if (changes.weeks) {
            this.weekNumbers = this.getWeeks();
        }
    };
    NbCalendarWeekNumberComponent.prototype.getWeeks = function () {
        var _this = this;
        return this.weeks.map(function (week) {
            // Find last defined day as week could contain null days in case
            // boundingMonth set to false
            var lastDay = __spreadArrays(week).reverse().find(function (day) { return !!day; });
            // Use last day of the week to determine week number.
            // This way weeks which span between sibling years is marked first
            return _this.dateService.getWeekNumber(lastDay);
        });
    };
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbCalendarWeekNumberComponent.prototype, "weeks", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarWeekNumberComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarWeekNumberComponent.prototype, "weekNumberSymbol", void 0);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCalendarWeekNumberComponent.prototype, "isLarge", null);
    NbCalendarWeekNumberComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarWeekNumberComponent);
NbCalendarWeekNumberComponent.ɵfac = function NbCalendarWeekNumberComponent_Factory(t) { return new (t || NbCalendarWeekNumberComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarWeekNumberComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarWeekNumberComponent, selectors: [["nb-calendar-week-numbers"]], hostVars: 2, hostBindings: function NbCalendarWeekNumberComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-large", ctx.isLarge);
    } }, inputs: { weeks: "weeks", size: "size", weekNumberSymbol: "weekNumberSymbol" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 4, vars: 2, consts: [[1, "sign-container"], [1, "sign"], ["class", "week-number", 4, "ngFor", "ngForOf"], [1, "week-number"]], template: function NbCalendarWeekNumberComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵtext(2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(3, NbCalendarWeekNumberComponent_div_3_Template, 2, 1, "div", 2);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵtextInterpolate(ctx.weekNumberSymbol);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.weekNumbers);
    } }, directives: [ɵngcc2.NgForOf], styles: ["[_nghost-%COMP%]{display:flex;flex-direction:column}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarWeekNumberComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-week-numbers',
                template: "\n    <div class=\"sign-container\">\n      <div class=\"sign\">{{ weekNumberSymbol }}</div>\n    </div>\n    <div class=\"week-number\" *ngFor=\"let weekNumber of weekNumbers\">{{ weekNumber }}</div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:flex;flex-direction:column}\n"]
            }]
    }], function () { return [{ type: NbDateService }]; }, { isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], weeks: [{
            type: Input
        }], size: [{
            type: Input
        }], weekNumberSymbol: [{
            type: Input
        }] }); })();
    return NbCalendarWeekNumberComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbNativeDateService` is basic implementation of `NbDateService` using
 * native js date objects and angular localization services.
 * */
var NbNativeDateService = /** @class */ (function (_super) {
    __extends(NbNativeDateService, _super);
    function NbNativeDateService(locale) {
        var _this = _super.call(this) || this;
        _this.setLocale(locale);
        return _this;
    }
    NbNativeDateService.prototype.setLocale = function (locale) {
        _super.prototype.setLocale.call(this, locale);
        this.datePipe = new DatePipe(locale);
    };
    NbNativeDateService.prototype.isValidDateString = function (date, format) {
        return !isNaN(this.parse(date, format).getTime());
    };
    NbNativeDateService.prototype.today = function () {
        return new Date();
    };
    NbNativeDateService.prototype.getDate = function (date) {
        return date.getDate();
    };
    NbNativeDateService.prototype.getMonth = function (date) {
        return date.getMonth();
    };
    NbNativeDateService.prototype.getYear = function (date) {
        return date.getFullYear();
    };
    NbNativeDateService.prototype.getDayOfWeek = function (date) {
        return date.getDay();
    };
    /**
     * returns first day of the week, it can be 1 if week starts from monday
     * and 0 if from sunday and so on.
     * */
    NbNativeDateService.prototype.getFirstDayOfWeek = function () {
        return getLocaleFirstDayOfWeek(this.locale);
    };
    NbNativeDateService.prototype.getMonthName = function (date, style$$1) {
        if (style$$1 === void 0) { style$$1 = TranslationWidth.Abbreviated; }
        var index = date.getMonth();
        return this.getMonthNameByIndex(index, style$$1);
    };
    NbNativeDateService.prototype.getMonthNameByIndex = function (index, style$$1) {
        if (style$$1 === void 0) { style$$1 = TranslationWidth.Abbreviated; }
        return getLocaleMonthNames(this.locale, FormStyle.Format, style$$1)[index];
    };
    NbNativeDateService.prototype.getDayOfWeekNames = function () {
        return getLocaleDayNames(this.locale, FormStyle.Format, TranslationWidth.Short);
    };
    NbNativeDateService.prototype.format = function (date, format) {
        return this.datePipe.transform(date, format);
    };
    /**
     * We haven't got capability to parse date using formatting without third party libraries.
     * */
    NbNativeDateService.prototype.parse = function (date, format) {
        return new Date(Date.parse(date));
    };
    NbNativeDateService.prototype.addDay = function (date, num) {
        return this.createDate(date.getFullYear(), date.getMonth(), date.getDate() + num);
    };
    NbNativeDateService.prototype.addMonth = function (date, num) {
        var month = this.createDate(date.getFullYear(), date.getMonth() + num, 1);
        // In case of date has more days than calculated month js Date will change that month to the next one
        // because of the date overflow.
        month.setDate(Math.min(date.getDate(), this.getMonthEnd(month).getDate()));
        return month;
    };
    NbNativeDateService.prototype.addYear = function (date, num) {
        return this.createDate(date.getFullYear() + num, date.getMonth(), date.getDate());
    };
    NbNativeDateService.prototype.clone = function (date) {
        return new Date(date.getTime());
    };
    NbNativeDateService.prototype.compareDates = function (date1, date2) {
        return date1.getTime() - date2.getTime();
    };
    NbNativeDateService.prototype.createDate = function (year, month, date) {
        var result = new Date(year, month, date);
        // We need to correct for the fact that JS native Date treats years in range [0, 99] as
        // abbreviations for 19xx.
        if (year >= 0 && year < 100) {
            result.setFullYear(result.getFullYear() - 1900);
        }
        return result;
    };
    NbNativeDateService.prototype.getMonthEnd = function (date) {
        return this.createDate(date.getFullYear(), date.getMonth() + 1, 0);
    };
    NbNativeDateService.prototype.getMonthStart = function (date) {
        return this.createDate(date.getFullYear(), date.getMonth(), 1);
    };
    NbNativeDateService.prototype.getNumberOfDaysInMonth = function (date) {
        return this.getMonthEnd(date).getDate();
    };
    NbNativeDateService.prototype.getYearEnd = function (date) {
        return this.createDate(date.getFullYear(), 11, 31);
    };
    NbNativeDateService.prototype.getYearStart = function (date) {
        return this.createDate(date.getFullYear(), 0, 1);
    };
    NbNativeDateService.prototype.isSameDay = function (date1, date2) {
        return this.isSameMonth(date1, date2) &&
            date1.getDate() === date2.getDate();
    };
    NbNativeDateService.prototype.isSameMonth = function (date1, date2) {
        return this.isSameYear(date1, date2) &&
            date1.getMonth() === date2.getMonth();
    };
    NbNativeDateService.prototype.isSameYear = function (date1, date2) {
        return date1.getFullYear() === date2.getFullYear();
    };
    NbNativeDateService.prototype.getId = function () {
        return 'native';
    };
    NbNativeDateService.prototype.getWeekNumber = function (date) {
        return parseInt(this.datePipe.transform(date, 'w'), 10);
    };
    NbNativeDateService = __decorate([ __param(0, Inject(LOCALE_ID)),
        __metadata("design:paramtypes", [String])
    ], NbNativeDateService);
NbNativeDateService.ɵfac = function NbNativeDateService_Factory(t) { return new (t || NbNativeDateService)(ɵngcc0.ɵɵinject(LOCALE_ID)); };
NbNativeDateService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbNativeDateService, factory: function (t) { return NbNativeDateService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbNativeDateService, [{
        type: Injectable
    }], function () { return [{ type: String, decorators: [{
                type: Inject,
                args: [LOCALE_ID]
            }] }]; }, null); })();
    return NbNativeDateService;
}(NbDateService));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var SERVICES = [
    { provide: NbDateService, useClass: NbNativeDateService },
    DatePipe,
    NbCalendarMonthModelService,
    NbCalendarYearModelService,
];
var COMPONENTS = [
    NbCalendarViewModeComponent,
    NbCalendarPageableNavigationComponent,
    NbCalendarDaysNamesComponent,
    NbCalendarYearPickerComponent,
    NbCalendarMonthPickerComponent,
    NbCalendarDayPickerComponent,
    NbCalendarDayCellComponent,
    NbCalendarMonthCellComponent,
    NbCalendarYearCellComponent,
    NbCalendarPickerRowComponent,
    NbCalendarPickerComponent,
    NbCalendarWeekNumberComponent,
];
/**
 * `NbCalendarKitModule` is a module that contains multiple useful components for building custom calendars.
 * So if you think our calendars is not enough powerful for you just use calendar-kit and build your own calendar!
 *
 * Available components:
 * - `NbCalendarDayPicker`
 * - `NbCalendarDayCell`
 * - `NbCalendarMonthPicker`
 * - `NbCalendarMonthCell`
 * - `NbCalendarYearPicker`
 * - `NbCalendarYearCell`
 * - `NbCalendarViewModeComponent`
 * - `NbCalendarPageableNavigation`
 *
 * For example you can easily build full calendar:
 * @stacked-example(Full calendar, calendar-kit/calendar-kit-full-calendar.component)
 * */
var NbCalendarKitModule = /** @class */ (function () {
    function NbCalendarKitModule() {
    }
NbCalendarKitModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbCalendarKitModule });
NbCalendarKitModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbCalendarKitModule_Factory(t) { return new (t || NbCalendarKitModule)(); }, providers: __spreadArrays(SERVICES), imports: [[NbSharedModule, NbButtonModule, NbIconModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCalendarKitModule, { declarations: [NbCalendarViewModeComponent,
        NbCalendarPageableNavigationComponent,
        NbCalendarDaysNamesComponent,
        NbCalendarYearPickerComponent,
        NbCalendarMonthPickerComponent,
        NbCalendarDayPickerComponent,
        NbCalendarDayCellComponent,
        NbCalendarMonthCellComponent,
        NbCalendarYearCellComponent,
        NbCalendarPickerRowComponent,
        NbCalendarPickerComponent,
        NbCalendarWeekNumberComponent], imports: [NbSharedModule,
        NbButtonModule,
        NbIconModule], exports: [NbCalendarViewModeComponent,
        NbCalendarPageableNavigationComponent,
        NbCalendarDaysNamesComponent,
        NbCalendarYearPickerComponent,
        NbCalendarMonthPickerComponent,
        NbCalendarDayPickerComponent,
        NbCalendarDayCellComponent,
        NbCalendarMonthCellComponent,
        NbCalendarYearCellComponent,
        NbCalendarPickerRowComponent,
        NbCalendarPickerComponent,
        NbCalendarWeekNumberComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarKitModule, [{
        type: NgModule,
        args: [{
                imports: [NbSharedModule, NbButtonModule, NbIconModule],
                exports: __spreadArrays(COMPONENTS),
                declarations: __spreadArrays(COMPONENTS),
                providers: __spreadArrays(SERVICES),
                entryComponents: [
                    NbCalendarDayCellComponent,
                    NbCalendarMonthCellComponent,
                    NbCalendarYearCellComponent,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbCalendarKitModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The basis for calendar and range calendar components.
 * Encapsulates common behavior - store calendar state and perform navigation
 * between pickers.
 * */
var NbBaseCalendarComponent = /** @class */ (function () {
    function NbBaseCalendarComponent(dateService, yearModelService) {
        this.dateService = dateService;
        this.yearModelService = yearModelService;
        /**
         * Defines if we should render previous and next months
         * in the current month view.
         * */
        this.boundingMonth = true;
        /**
         * Defines active view for calendar.
         * */
        this.activeViewMode = NbCalendarViewMode.DATE;
        /**
         * Size of the calendar and entire components.
         * Can be 'medium' which is default or 'large'.
         * */
        this.size = NbCalendarSize.MEDIUM;
        /**
         * Determines whether we should show calendar navigation or not.
         * */
        this.showNavigation = true;
        this._showWeekNumber = false;
        /**
         * Emits date when selected.
         * */
        this.dateChange = new EventEmitter();
        this.ViewMode = NbCalendarViewMode;
    }
    Object.defineProperty(NbBaseCalendarComponent.prototype, "showWeekNumber", {
        /**
         * Determines should we show week numbers column.
         * False by default.
         * */
        get: function () {
            return this._showWeekNumber;
        },
        set: function (value) {
            this._showWeekNumber = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbBaseCalendarComponent.prototype.ngOnInit = function () {
        if (!this.visibleDate) {
            this.visibleDate = this.dateService.today();
        }
    };
    Object.defineProperty(NbBaseCalendarComponent.prototype, "large", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    NbBaseCalendarComponent.prototype.setViewMode = function (viewMode) {
        this.activeViewMode = viewMode;
    };
    NbBaseCalendarComponent.prototype.setVisibleDate = function (visibleDate) {
        this.visibleDate = visibleDate;
    };
    NbBaseCalendarComponent.prototype.prevMonth = function () {
        this.changeVisibleMonth(-1);
    };
    NbBaseCalendarComponent.prototype.nextMonth = function () {
        this.changeVisibleMonth(1);
    };
    NbBaseCalendarComponent.prototype.prevYear = function () {
        this.changeVisibleYear(-1);
    };
    NbBaseCalendarComponent.prototype.nextYear = function () {
        this.changeVisibleYear(1);
    };
    NbBaseCalendarComponent.prototype.prevYears = function () {
        this.changeVisibleYears(-1);
    };
    NbBaseCalendarComponent.prototype.nextYears = function () {
        this.changeVisibleYears(1);
    };
    NbBaseCalendarComponent.prototype.navigatePrev = function () {
        switch (this.activeViewMode) {
            case NbCalendarViewMode.DATE:
                return this.prevMonth();
            case NbCalendarViewMode.MONTH:
                return this.prevYear();
            case NbCalendarViewMode.YEAR:
                return this.prevYears();
        }
    };
    NbBaseCalendarComponent.prototype.navigateNext = function () {
        switch (this.activeViewMode) {
            case NbCalendarViewMode.DATE:
                return this.nextMonth();
            case NbCalendarViewMode.MONTH:
                return this.nextYear();
            case NbCalendarViewMode.YEAR:
                return this.nextYears();
        }
    };
    NbBaseCalendarComponent.prototype.onChangeViewMode = function () {
        if (this.activeViewMode === NbCalendarViewMode.DATE) {
            return this.setViewMode(NbCalendarViewMode.YEAR);
        }
        this.setViewMode(NbCalendarViewMode.DATE);
    };
    NbBaseCalendarComponent.prototype.changeVisibleMonth = function (direction) {
        this.visibleDate = this.dateService.addMonth(this.visibleDate, direction);
    };
    NbBaseCalendarComponent.prototype.changeVisibleYear = function (direction) {
        this.visibleDate = this.dateService.addYear(this.visibleDate, direction);
    };
    NbBaseCalendarComponent.prototype.changeVisibleYears = function (direction) {
        this.visibleDate = this.dateService.addYear(this.visibleDate, direction * this.yearModelService.getYearsInView());
    };
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbBaseCalendarComponent.prototype, "boundingMonth", void 0);
    __decorate([
        Input('startView'),
        __metadata("design:type", String)
    ], NbBaseCalendarComponent.prototype, "activeViewMode", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbBaseCalendarComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbBaseCalendarComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbBaseCalendarComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbBaseCalendarComponent.prototype, "dayCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbBaseCalendarComponent.prototype, "monthCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbBaseCalendarComponent.prototype, "yearCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbBaseCalendarComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbBaseCalendarComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        HostBinding('class.has-navigation'),
        __metadata("design:type", Boolean)
    ], NbBaseCalendarComponent.prototype, "showNavigation", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbBaseCalendarComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        HostBinding('class.has-week-number'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbBaseCalendarComponent.prototype, "showWeekNumber", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbBaseCalendarComponent.prototype, "weekNumberSymbol", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbBaseCalendarComponent.prototype, "dateChange", void 0);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbBaseCalendarComponent.prototype, "large", null);
    NbBaseCalendarComponent = __decorate([ __metadata("design:paramtypes", [NbDateService,
            NbCalendarYearModelService])
    ], NbBaseCalendarComponent);
NbBaseCalendarComponent.ɵfac = function NbBaseCalendarComponent_Factory(t) { return new (t || NbBaseCalendarComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NbCalendarYearModelService)); };
NbBaseCalendarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbBaseCalendarComponent, selectors: [["nb-base-calendar"]], hostVars: 6, hostBindings: function NbBaseCalendarComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("has-navigation", ctx.showNavigation)("has-week-number", ctx.showWeekNumber)("size-large", ctx.large);
    } }, inputs: { boundingMonth: "boundingMonth", activeViewMode: ["startView", "activeViewMode"], size: "size", showNavigation: "showNavigation", showWeekNumber: "showWeekNumber", visibleDate: "visibleDate", min: "min", max: "max", filter: "filter", dayCellComponent: "dayCellComponent", monthCellComponent: "monthCellComponent", yearCellComponent: "yearCellComponent", date: "date", weekNumberSymbol: "weekNumberSymbol" }, outputs: { dateChange: "dateChange" }, decls: 6, vars: 5, consts: [["class", "calendar-navigation", 4, "ngIf"], [3, "ngSwitch"], [3, "boundingMonths", "cellComponent", "min", "max", "filter", "visibleDate", "size", "date", "showWeekNumber", "weekNumberSymbol", "dateChange", 4, "ngSwitchCase"], [3, "cellComponent", "date", "min", "max", "filter", "size", "year", "yearChange", 4, "ngSwitchCase"], [3, "cellComponent", "min", "max", "filter", "size", "month", "date", "monthChange", 4, "ngSwitchCase"], [1, "calendar-navigation"], [3, "date", "viewMode", "changeMode"], [3, "prev", "next"], [3, "boundingMonths", "cellComponent", "min", "max", "filter", "visibleDate", "size", "date", "showWeekNumber", "weekNumberSymbol", "dateChange"], [3, "cellComponent", "date", "min", "max", "filter", "size", "year", "yearChange"], [3, "cellComponent", "min", "max", "filter", "size", "month", "date", "monthChange"]], template: function NbBaseCalendarComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nb-card");
        ɵngcc0.ɵɵtemplate(1, NbBaseCalendarComponent_nb_card_header_1_Template, 3, 2, "nb-card-header", 0);
        ɵngcc0.ɵɵelementStart(2, "nb-card-body", 1);
        ɵngcc0.ɵɵtemplate(3, NbBaseCalendarComponent_nb_calendar_day_picker_3_Template, 1, 10, "nb-calendar-day-picker", 2);
        ɵngcc0.ɵɵtemplate(4, NbBaseCalendarComponent_nb_calendar_year_picker_4_Template, 1, 7, "nb-calendar-year-picker", 3);
        ɵngcc0.ɵɵtemplate(5, NbBaseCalendarComponent_nb_calendar_month_picker_5_Template, 1, 7, "nb-calendar-month-picker", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showNavigation);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitch", ctx.activeViewMode);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", ctx.ViewMode.DATE);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", ctx.ViewMode.YEAR);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", ctx.ViewMode.MONTH);
    } }, directives: [NbCardComponent, ɵngcc2.NgIf, NbCardBodyComponent, ɵngcc2.NgSwitch, ɵngcc2.NgSwitchCase, NbCardHeaderComponent,
        NbCalendarViewModeComponent,
        NbCalendarPageableNavigationComponent,
        NbCalendarDayPickerComponent,
        NbCalendarYearPickerComponent,
        NbCalendarMonthPickerComponent], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbBaseCalendarComponent, [{
        type: Component,
        args: [{
                selector: 'nb-base-calendar',
                template: "<nb-card>\n  <nb-card-header *ngIf=\"showNavigation\" class=\"calendar-navigation\">\n    <nb-calendar-view-mode [date]=\"visibleDate\"\n                           [viewMode]=\"activeViewMode\"\n                           (changeMode)=\"onChangeViewMode()\">\n    </nb-calendar-view-mode>\n\n    <nb-calendar-pageable-navigation (prev)=\"navigatePrev()\" (next)=\"navigateNext()\">\n    </nb-calendar-pageable-navigation>\n  </nb-card-header>\n\n  <nb-card-body [ngSwitch]=\"activeViewMode\">\n\n    <nb-calendar-day-picker *ngSwitchCase=\"ViewMode.DATE\"\n                            [boundingMonths]=\"boundingMonth\"\n                            [cellComponent]=\"dayCellComponent\"\n                            [min]=\"min\"\n                            [max]=\"max\"\n                            [filter]=\"filter\"\n                            [visibleDate]=\"visibleDate\"\n                            [size]=\"size\"\n                            [date]=\"date\"\n                            [showWeekNumber]=\"showWeekNumber\"\n                            (dateChange)=\"dateChange.emit($any($event))\"\n                            [weekNumberSymbol]=\"weekNumberSymbol\">\n    </nb-calendar-day-picker>\n\n    <nb-calendar-year-picker *ngSwitchCase=\"ViewMode.YEAR\"\n                             [cellComponent]=\"yearCellComponent\"\n                             [date]=\"$any(date)\"\n                             [min]=\"min\"\n                             [max]=\"max\"\n                             [filter]=\"filter\"\n                             [size]=\"size\"\n                             [year]=\"visibleDate\"\n                             (yearChange)=\"setVisibleDate($event); setViewMode(ViewMode.MONTH)\">\n    </nb-calendar-year-picker>\n\n    <nb-calendar-month-picker *ngSwitchCase=\"ViewMode.MONTH\"\n                              [cellComponent]=\"monthCellComponent\"\n                              [min]=\"min\"\n                              [max]=\"max\"\n                              [filter]=\"filter\"\n                              [size]=\"size\"\n                              [month]=\"visibleDate\"\n                              [date]=\"$any(date)\"\n                              (monthChange)=\"setVisibleDate($event); setViewMode(ViewMode.DATE)\">\n    </nb-calendar-month-picker>\n\n  </nb-card-body>\n\n</nb-card>\n"
            }]
    }], function () { return [{ type: NbDateService }, { type: NbCalendarYearModelService }]; }, { boundingMonth: [{
            type: Input
        }], activeViewMode: [{
            type: Input,
            args: ['startView']
        }], size: [{
            type: Input
        }], showNavigation: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.has-navigation']
        }], dateChange: [{
            type: Output
        }], showWeekNumber: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.has-week-number']
        }], visibleDate: [{
            type: Input
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], dayCellComponent: [{
            type: Input
        }], monthCellComponent: [{
            type: Input
        }], yearCellComponent: [{
            type: Input
        }], date: [{
            type: Input
        }], weekNumberSymbol: [{
            type: Input
        }] }); })();
    return NbBaseCalendarComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbBaseCalendarModule = /** @class */ (function () {
    function NbBaseCalendarModule() {
    }
NbBaseCalendarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbBaseCalendarModule });
NbBaseCalendarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbBaseCalendarModule_Factory(t) { return new (t || NbBaseCalendarModule)(); }, imports: [[NbCalendarKitModule, NbSharedModule, NbCardModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbBaseCalendarModule, { declarations: [NbBaseCalendarComponent], imports: [NbCalendarKitModule,
        NbSharedModule,
        NbCardModule], exports: [NbBaseCalendarComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbBaseCalendarModule, [{
        type: NgModule,
        args: [{
                imports: [NbCalendarKitModule, NbSharedModule, NbCardModule],
                exports: [NbBaseCalendarComponent],
                declarations: [NbBaseCalendarComponent]
            }]
    }], function () { return []; }, null); })();
    return NbBaseCalendarModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarModule = /** @class */ (function () {
    function NbCalendarModule() {
    }
NbCalendarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbCalendarModule });
NbCalendarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbCalendarModule_Factory(t) { return new (t || NbCalendarModule)(); }, imports: [[NbBaseCalendarModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCalendarModule, { declarations: [NbCalendarComponent], imports: [NbBaseCalendarModule], exports: [NbCalendarComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarModule, [{
        type: NgModule,
        args: [{
                imports: [NbBaseCalendarModule],
                exports: [NbCalendarComponent],
                declarations: [NbCalendarComponent]
            }]
    }], function () { return []; }, null); })();
    return NbCalendarModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbBaseCalendarRangeCell = /** @class */ (function () {
    function NbBaseCalendarRangeCell() {
    }
    Object.defineProperty(NbBaseCalendarRangeCell.prototype, "hasRange", {
        get: function () {
            return !!(this.selectedValue && this.selectedValue.start && this.selectedValue.end);
        },
        enumerable: true,
        configurable: true
    });
    return NbBaseCalendarRangeCell;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarRangeDayCellComponent = /** @class */ (function (_super) {
    __extends(NbCalendarRangeDayCellComponent, _super);
    function NbCalendarRangeDayCellComponent(dateService) {
        var _this = _super.call(this) || this;
        _this.dateService = dateService;
        _this.size = NbCalendarSize.MEDIUM;
        _this.select = new EventEmitter(true);
        _this.rangeCellClass = true;
        _this.dayCellClass = true;
        return _this;
    }
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "inRange", {
        get: function () {
            if (this.date && this.hasRange) {
                return this.isInRange(this.date, this.selectedValue);
            }
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "start", {
        get: function () {
            return this.date && this.hasRange && this.dateService.isSameDay(this.date, this.selectedValue.start);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "end", {
        get: function () {
            return this.date && this.hasRange && this.dateService.isSameDay(this.date, this.selectedValue.end);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "today", {
        get: function () {
            return this.date && this.dateService.isSameDay(this.date, this.dateService.today());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "boundingMonth", {
        get: function () {
            return !this.dateService.isSameMonthSafe(this.date, this.visibleDate);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "selected", {
        get: function () {
            if (this.inRange) {
                return true;
            }
            if (this.selectedValue) {
                return this.dateService.isSameDay(this.date, this.selectedValue.start);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "empty", {
        get: function () {
            return !this.date;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "disabled", {
        get: function () {
            return this.smallerThanMin() || this.greaterThanMax() || this.dontFitFilter();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeDayCellComponent.prototype, "day", {
        get: function () {
            return this.date && this.dateService.getDate(this.date);
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarRangeDayCellComponent.prototype.onClick = function () {
        if (this.disabled || this.empty) {
            return;
        }
        this.select.emit(this.date);
    };
    NbCalendarRangeDayCellComponent.prototype.smallerThanMin = function () {
        return this.date && this.min && this.dateService.compareDates(this.date, this.min) < 0;
    };
    NbCalendarRangeDayCellComponent.prototype.greaterThanMax = function () {
        return this.date && this.max && this.dateService.compareDates(this.date, this.max) > 0;
    };
    NbCalendarRangeDayCellComponent.prototype.dontFitFilter = function () {
        return this.date && this.filter && !this.filter(this.date);
    };
    NbCalendarRangeDayCellComponent.prototype.isInRange = function (date, _a) {
        var start = _a.start, end = _a.end;
        var isGreaterThanStart = this.dateService.compareDates(this.date, start) >= 0;
        var isLessThanEnd = this.dateService.compareDates(this.date, end) <= 0;
        return isGreaterThanStart && isLessThanEnd;
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeDayCellComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeDayCellComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeDayCellComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeDayCellComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeDayCellComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarRangeDayCellComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarRangeDayCellComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarRangeDayCellComponent.prototype, "select", void 0);
    __decorate([
        HostBinding('class.in-range'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "inRange", null);
    __decorate([
        HostBinding('class.start'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "start", null);
    __decorate([
        HostBinding('class.end'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "end", null);
    __decorate([
        HostBinding('class.range-cell'),
        __metadata("design:type", Object)
    ], NbCalendarRangeDayCellComponent.prototype, "rangeCellClass", void 0);
    __decorate([
        HostBinding('class.day-cell'),
        __metadata("design:type", Object)
    ], NbCalendarRangeDayCellComponent.prototype, "dayCellClass", void 0);
    __decorate([
        HostBinding('class.today'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "today", null);
    __decorate([
        HostBinding('class.bounding-month'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "boundingMonth", null);
    __decorate([
        HostBinding('class.selected'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "selected", null);
    __decorate([
        HostBinding('class.empty'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "empty", null);
    __decorate([
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeDayCellComponent.prototype, "isLarge", null);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbCalendarRangeDayCellComponent.prototype, "onClick", null);
    NbCalendarRangeDayCellComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarRangeDayCellComponent);
NbCalendarRangeDayCellComponent.ɵfac = function NbCalendarRangeDayCellComponent_Factory(t) { return new (t || NbCalendarRangeDayCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarRangeDayCellComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarRangeDayCellComponent, selectors: [["nb-calendar-range-day-cell"]], hostVars: 22, hostBindings: function NbCalendarRangeDayCellComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbCalendarRangeDayCellComponent_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("in-range", ctx.inRange)("start", ctx.start)("end", ctx.end)("today", ctx.today)("bounding-month", ctx.boundingMonth)("selected", ctx.selected)("empty", ctx.empty)("disabled", ctx.disabled)("size-large", ctx.isLarge)("range-cell", ctx.rangeCellClass)("day-cell", ctx.dayCellClass);
    } }, inputs: { date: "date", selectedValue: "selectedValue", visibleDate: "visibleDate", min: "min", max: "max", filter: "filter", size: "size" }, outputs: { select: "select" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 1, consts: [[1, "cell-content"]], template: function NbCalendarRangeDayCellComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.day);
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarRangeDayCellComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-range-day-cell',
                template: "\n    <div class=\"cell-content\">{{ day }}</div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }]; }, { inRange: [{
            type: HostBinding,
            args: ['class.in-range']
        }], start: [{
            type: HostBinding,
            args: ['class.start']
        }], end: [{
            type: HostBinding,
            args: ['class.end']
        }], today: [{
            type: HostBinding,
            args: ['class.today']
        }], boundingMonth: [{
            type: HostBinding,
            args: ['class.bounding-month']
        }], selected: [{
            type: HostBinding,
            args: ['class.selected']
        }], empty: [{
            type: HostBinding,
            args: ['class.empty']
        }], disabled: [{
            type: HostBinding,
            args: ['class.disabled']
        }], isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }], date: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], size: [{
            type: Input
        }], select: [{
            type: Output
        }], rangeCellClass: [{
            type: HostBinding,
            args: ['class.range-cell']
        }], dayCellClass: [{
            type: HostBinding,
            args: ['class.day-cell']
        }] }); })();
    return NbCalendarRangeDayCellComponent;
}(NbBaseCalendarRangeCell));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarRangeYearCellComponent = /** @class */ (function (_super) {
    __extends(NbCalendarRangeYearCellComponent, _super);
    function NbCalendarRangeYearCellComponent(dateService) {
        var _this = _super.call(this) || this;
        _this.dateService = dateService;
        _this.size = NbCalendarSize.MEDIUM;
        _this.select = new EventEmitter(true);
        _this.yearCellClass = true;
        _this.rangeCellClass = true;
        return _this;
    }
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "inRange", {
        get: function () {
            return this.hasRange && this.isInRange(this.date, this.selectedValue);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "rangeStart", {
        get: function () {
            return this.hasRange && this.dateService.isSameYear(this.date, this.selectedValue.start);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "rangeEnd", {
        get: function () {
            return this.hasRange && this.dateService.isSameYear(this.date, this.selectedValue.end);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "selected", {
        get: function () {
            if (this.inRange) {
                return true;
            }
            if (this.selectedValue) {
                return this.dateService.isSameYear(this.date, this.selectedValue.start);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "today", {
        get: function () {
            return this.dateService.isSameYear(this.date, this.dateService.today());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "disabled", {
        get: function () {
            return this.smallerThanMin() || this.greaterThanMax();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeYearCellComponent.prototype, "year", {
        get: function () {
            return this.dateService.getYear(this.date);
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarRangeYearCellComponent.prototype.onClick = function () {
        if (this.disabled) {
            return;
        }
        this.select.emit(this.date);
    };
    NbCalendarRangeYearCellComponent.prototype.smallerThanMin = function () {
        return this.date && this.min && this.dateService.compareDates(this.yearEnd(), this.min) < 0;
    };
    NbCalendarRangeYearCellComponent.prototype.greaterThanMax = function () {
        return this.date && this.max && this.dateService.compareDates(this.yearStart(), this.max) > 0;
    };
    NbCalendarRangeYearCellComponent.prototype.yearStart = function () {
        return this.dateService.getYearStart(this.date);
    };
    NbCalendarRangeYearCellComponent.prototype.yearEnd = function () {
        return this.dateService.getYearEnd(this.date);
    };
    NbCalendarRangeYearCellComponent.prototype.isInRange = function (date, _a) {
        var start = _a.start, end = _a.end;
        if (start && end) {
            var cellYear = this.dateService.getYear(date);
            var startYear = this.dateService.getYear(start);
            var endYear = this.dateService.getYear(end);
            return cellYear >= startYear && cellYear <= endYear;
        }
        return this.dateService.isSameYear(date, start);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeYearCellComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeYearCellComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeYearCellComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeYearCellComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarRangeYearCellComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarRangeYearCellComponent.prototype, "select", void 0);
    __decorate([
        HostBinding('class.in-range'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeYearCellComponent.prototype, "inRange", null);
    __decorate([
        HostBinding('class.start'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeYearCellComponent.prototype, "rangeStart", null);
    __decorate([
        HostBinding('class.end'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeYearCellComponent.prototype, "rangeEnd", null);
    __decorate([
        HostBinding('class.selected'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeYearCellComponent.prototype, "selected", null);
    __decorate([
        HostBinding('class.today'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeYearCellComponent.prototype, "today", null);
    __decorate([
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeYearCellComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeYearCellComponent.prototype, "isLarge", null);
    __decorate([
        HostBinding('class.year-cell'),
        __metadata("design:type", Object)
    ], NbCalendarRangeYearCellComponent.prototype, "yearCellClass", void 0);
    __decorate([
        HostBinding('class.range-cell'),
        __metadata("design:type", Object)
    ], NbCalendarRangeYearCellComponent.prototype, "rangeCellClass", void 0);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbCalendarRangeYearCellComponent.prototype, "onClick", null);
    NbCalendarRangeYearCellComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarRangeYearCellComponent);
NbCalendarRangeYearCellComponent.ɵfac = function NbCalendarRangeYearCellComponent_Factory(t) { return new (t || NbCalendarRangeYearCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarRangeYearCellComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarRangeYearCellComponent, selectors: [["nb-calendar-range-year-cell"]], hostVars: 18, hostBindings: function NbCalendarRangeYearCellComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbCalendarRangeYearCellComponent_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("in-range", ctx.inRange)("start", ctx.rangeStart)("end", ctx.rangeEnd)("selected", ctx.selected)("today", ctx.today)("disabled", ctx.disabled)("size-large", ctx.isLarge)("year-cell", ctx.yearCellClass)("range-cell", ctx.rangeCellClass);
    } }, inputs: { date: "date", min: "min", max: "max", selectedValue: "selectedValue", size: "size" }, outputs: { select: "select" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 1, consts: [[1, "cell-content"]], template: function NbCalendarRangeYearCellComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.year, " ");
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarRangeYearCellComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-range-year-cell',
                template: "\n    <div class=\"cell-content\">\n      {{ year }}\n    </div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }]; }, { inRange: [{
            type: HostBinding,
            args: ['class.in-range']
        }], rangeStart: [{
            type: HostBinding,
            args: ['class.start']
        }], rangeEnd: [{
            type: HostBinding,
            args: ['class.end']
        }], selected: [{
            type: HostBinding,
            args: ['class.selected']
        }], today: [{
            type: HostBinding,
            args: ['class.today']
        }], disabled: [{
            type: HostBinding,
            args: ['class.disabled']
        }], isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }], date: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }], size: [{
            type: Input
        }], select: [{
            type: Output
        }], yearCellClass: [{
            type: HostBinding,
            args: ['class.year-cell']
        }], rangeCellClass: [{
            type: HostBinding,
            args: ['class.range-cell']
        }] }); })();
    return NbCalendarRangeYearCellComponent;
}(NbBaseCalendarRangeCell));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarRangeMonthCellComponent = /** @class */ (function (_super) {
    __extends(NbCalendarRangeMonthCellComponent, _super);
    function NbCalendarRangeMonthCellComponent(dateService) {
        var _this = _super.call(this) || this;
        _this.dateService = dateService;
        _this.size = NbCalendarSize.MEDIUM;
        _this.select = new EventEmitter(true);
        _this.monthCellClass = true;
        _this.rangeCellClass = true;
        return _this;
    }
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "month", {
        get: function () {
            return this.dateService.getMonthName(this.date);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "selected", {
        get: function () {
            if (this.inRange) {
                return true;
            }
            if (this.selectedValue) {
                return this.dateService.isSameMonth(this.date, this.selectedValue.start);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "inRange", {
        get: function () {
            if (this.hasRange) {
                return this.isInRage(this.date, this.selectedValue);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "rangeStart", {
        get: function () {
            if (this.hasRange) {
                return this.dateService.isSameMonth(this.date, this.selectedValue.start);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "rangeEnd", {
        get: function () {
            if (this.hasRange) {
                return this.dateService.isSameMonth(this.date, this.selectedValue.end);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "today", {
        get: function () {
            return this.dateService.isSameMonthSafe(this.date, this.dateService.today());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "disabled", {
        get: function () {
            return this.smallerThanMin() || this.greaterThanMax();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeMonthCellComponent.prototype, "isLarge", {
        get: function () {
            return this.size === NbCalendarSize.LARGE;
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarRangeMonthCellComponent.prototype.onClick = function () {
        if (this.disabled) {
            return;
        }
        this.select.emit(this.date);
    };
    NbCalendarRangeMonthCellComponent.prototype.smallerThanMin = function () {
        return this.date && this.min && this.dateService.compareDates(this.monthEnd(), this.min) < 0;
    };
    NbCalendarRangeMonthCellComponent.prototype.greaterThanMax = function () {
        return this.date && this.max && this.dateService.compareDates(this.monthStart(), this.max) > 0;
    };
    NbCalendarRangeMonthCellComponent.prototype.monthStart = function () {
        return this.dateService.getMonthStart(this.date);
    };
    NbCalendarRangeMonthCellComponent.prototype.monthEnd = function () {
        return this.dateService.getMonthEnd(this.date);
    };
    NbCalendarRangeMonthCellComponent.prototype.isInRage = function (date, range) {
        if (range.start && range.end) {
            var cellDate = this.dateService.getMonthStart(date);
            var start = this.dateService.getMonthStart(range.start);
            var end = this.dateService.getMonthStart(range.end);
            var isGreaterThanStart = this.dateService.compareDates(cellDate, start) >= 0;
            var isLessThanEnd = this.dateService.compareDates(cellDate, end) <= 0;
            return isGreaterThanStart && isLessThanEnd;
        }
        return this.dateService.isSameMonth(date, range.start);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeMonthCellComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeMonthCellComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeMonthCellComponent.prototype, "selectedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeMonthCellComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeMonthCellComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarRangeMonthCellComponent.prototype, "size", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarRangeMonthCellComponent.prototype, "select", void 0);
    __decorate([
        HostBinding('class.month-cell'),
        __metadata("design:type", Object)
    ], NbCalendarRangeMonthCellComponent.prototype, "monthCellClass", void 0);
    __decorate([
        HostBinding('class.range-cell'),
        __metadata("design:type", Object)
    ], NbCalendarRangeMonthCellComponent.prototype, "rangeCellClass", void 0);
    __decorate([
        HostBinding('class.selected'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeMonthCellComponent.prototype, "selected", null);
    __decorate([
        HostBinding('class.in-range'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeMonthCellComponent.prototype, "inRange", null);
    __decorate([
        HostBinding('class.start'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeMonthCellComponent.prototype, "rangeStart", null);
    __decorate([
        HostBinding('class.end'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeMonthCellComponent.prototype, "rangeEnd", null);
    __decorate([
        HostBinding('class.today'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeMonthCellComponent.prototype, "today", null);
    __decorate([
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeMonthCellComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbCalendarRangeMonthCellComponent.prototype, "isLarge", null);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbCalendarRangeMonthCellComponent.prototype, "onClick", null);
    NbCalendarRangeMonthCellComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarRangeMonthCellComponent);
NbCalendarRangeMonthCellComponent.ɵfac = function NbCalendarRangeMonthCellComponent_Factory(t) { return new (t || NbCalendarRangeMonthCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarRangeMonthCellComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarRangeMonthCellComponent, selectors: [["nb-calendar-range-month-cell"]], hostVars: 18, hostBindings: function NbCalendarRangeMonthCellComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbCalendarRangeMonthCellComponent_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("selected", ctx.selected)("in-range", ctx.inRange)("start", ctx.rangeStart)("end", ctx.rangeEnd)("today", ctx.today)("disabled", ctx.disabled)("size-large", ctx.isLarge)("month-cell", ctx.monthCellClass)("range-cell", ctx.rangeCellClass);
    } }, inputs: { date: "date", visibleDate: "visibleDate", selectedValue: "selectedValue", min: "min", max: "max", size: "size" }, outputs: { select: "select" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 1, consts: [[1, "cell-content"]], template: function NbCalendarRangeMonthCellComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.month, " ");
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarRangeMonthCellComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-range-month-cell',
                template: "\n    <div class=\"cell-content\">\n      {{ month }}\n    </div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbDateService }]; }, { selected: [{
            type: HostBinding,
            args: ['class.selected']
        }], inRange: [{
            type: HostBinding,
            args: ['class.in-range']
        }], rangeStart: [{
            type: HostBinding,
            args: ['class.start']
        }], rangeEnd: [{
            type: HostBinding,
            args: ['class.end']
        }], today: [{
            type: HostBinding,
            args: ['class.today']
        }], disabled: [{
            type: HostBinding,
            args: ['class.disabled']
        }], isLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }], date: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }], selectedValue: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], size: [{
            type: Input
        }], select: [{
            type: Output
        }], monthCellClass: [{
            type: HostBinding,
            args: ['class.month-cell']
        }], rangeCellClass: [{
            type: HostBinding,
            args: ['class.range-cell']
        }] }); })();
    return NbCalendarRangeMonthCellComponent;
}(NbBaseCalendarRangeCell));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * CalendarRange component provides a capability to choose a date range.
 *
 * ```html
 * <nb-calendar [(date)]="date"></nb-calendar>
 * <nb-calendar [date]="date" (dateChange)="handleDateChange($event)"></nb-calendar>
 * ```
 *
 * Basic usage example
 * @stacked-example(Range, calendar/calendar-range-showcase.component)
 *
 * ### Installation
 *
 * Import `NbCalendarRangeModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbCalendarRangeModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 *
 * ### Usage
 *
 * CalendarRange component supports all of the Calendar component customization properties. More defails can be found
 * in the [Calendar component docs](docs/components/calendar).
 *
 * @styles
 *
 * calendar-width:
 * calendar-background-color:
 * calendar-border-color:
 * calendar-border-style:
 * calendar-border-width:
 * calendar-border-radius:
 * calendar-text-color:
 * calendar-text-font-family:
 * calendar-text-font-size:
 * calendar-text-font-weight:
 * calendar-text-line-height:
 * calendar-picker-padding-top:
 * calendar-picker-padding-bottom:
 * calendar-picker-padding-start:
 * calendar-picker-padding-end:
 * calendar-navigation-text-color:
 * calendar-navigation-text-font-family:
 * calendar-navigation-title-text-font-size:
 * calendar-navigation-title-text-font-weight:
 * calendar-navigation-title-text-line-height:
 * calendar-navigation-padding:
 * calendar-cell-inactive-text-color:
 * calendar-cell-disabled-text-color:
 * calendar-cell-hover-background-color:
 * calendar-cell-hover-border-color:
 * calendar-cell-hover-text-color:
 * calendar-cell-hover-text-font-size:
 * calendar-cell-hover-text-font-weight:
 * calendar-cell-hover-text-line-height:
 * calendar-cell-active-background-color:
 * calendar-cell-active-border-color:
 * calendar-cell-active-text-color:
 * calendar-cell-active-text-font-size:
 * calendar-cell-active-text-font-weight:
 * calendar-cell-active-text-line-height:
 * calendar-cell-today-background-color:
 * calendar-cell-today-border-color:
 * calendar-cell-today-text-color:
 * calendar-cell-today-text-font-size:
 * calendar-cell-today-text-font-weight:
 * calendar-cell-today-text-line-height:
 * calendar-cell-today-hover-background-color:
 * calendar-cell-today-hover-border-color:
 * calendar-cell-today-active-background-color:
 * calendar-cell-today-active-border-color:
 * calendar-cell-today-disabled-border-color:
 * calendar-cell-today-selected-background-color:
 * calendar-cell-today-selected-border-color:
 * calendar-cell-today-selected-text-color:
 * calendar-cell-today-selected-hover-background-color:
 * calendar-cell-today-selected-hover-border-color:
 * calendar-cell-today-selected-active-background-color:
 * calendar-cell-today-selected-active-border-color:
 * calendar-cell-today-in-range-background-color:
 * calendar-cell-today-in-range-border-color:
 * calendar-cell-today-in-range-text-color:
 * calendar-cell-today-in-range-hover-background-color:
 * calendar-cell-today-in-range-hover-border-color:
 * calendar-cell-today-in-range-active-background-color:
 * calendar-cell-today-in-range-active-border-color:
 * calendar-cell-selected-background-color:
 * calendar-cell-selected-border-color:
 * calendar-cell-selected-text-color:
 * calendar-cell-selected-text-font-size:
 * calendar-cell-selected-text-font-weight:
 * calendar-cell-selected-text-line-height:
 * calendar-cell-selected-hover-background-color:
 * calendar-cell-selected-hover-border-color:
 * calendar-cell-selected-active-background-color:
 * calendar-cell-selected-active-border-color:
 * calendar-day-cell-width:
 * calendar-day-cell-height:
 * calendar-month-cell-width:
 * calendar-month-cell-height:
 * calendar-year-cell-width:
 * calendar-year-cell-height:
 * calendar-weekday-background:
 * calendar-weekday-divider-color:
 * calendar-weekday-divider-width:
 * calendar-weekday-text-color:
 * calendar-weekday-text-font-size:
 * calendar-weekday-text-font-weight:
 * calendar-weekday-text-line-height:
 * calendar-weekday-holiday-text-color:
 * calendar-weekday-height:
 * calendar-weekday-width:
 * calendar-weeknumber-background:
 * calendar-weeknumber-divider-color:
 * calendar-weeknumber-divider-width:
 * calendar-weeknumber-text-color:
 * calendar-weeknumber-text-font-size:
 * calendar-weeknumber-text-font-weight:
 * calendar-weeknumber-text-line-height:
 * calendar-weeknumber-height:
 * calendar-weeknumber-width:
 * calendar-large-width:
 * calendar-day-cell-large-width:
 * calendar-day-cell-large-height:
 * calendar-weekday-large-height:
 * calendar-weekday-large-width:
 * calendar-weeknumber-large-height:
 * calendar-weeknumber-large-width:
 * calendar-month-cell-large-width:
 * calendar-month-cell-large-height:
 * calendar-year-cell-large-width:
 * calendar-year-cell-large-height:
 * */
var NbCalendarRangeComponent = /** @class */ (function () {
    function NbCalendarRangeComponent(dateService) {
        this.dateService = dateService;
        /**
         * Defines if we should render previous and next months
         * in the current month view.
         * */
        this.boundingMonth = true;
        /**
         * Defines starting view for the calendar.
         * */
        this.startView = NbCalendarViewMode.DATE;
        this.dayCellComponent = NbCalendarRangeDayCellComponent;
        /**
         * Custom month cell component. Have to implement `NbCalendarCell` interface.
         * */
        this.monthCellComponent = NbCalendarRangeMonthCellComponent;
        this.yearCellComponent = NbCalendarRangeYearCellComponent;
        /**
         * Size of the calendar and entire components.
         * Can be 'medium' which is default or 'large'.
         * */
        this.size = NbCalendarSize.MEDIUM;
        /**
         * Determines should we show calendars navigation or not.
         * */
        this.showNavigation = true;
        this._showWeekNumber = false;
        /**
         * Sets symbol used as a header for week numbers column
         * */
        this.weekNumberSymbol = '#';
        /**
         * Emits range when start selected and emits again when end selected.
         * */
        this.rangeChange = new EventEmitter();
    }
    Object.defineProperty(NbCalendarRangeComponent.prototype, "_cellComponent", {
        /**
         * Custom day cell component. Have to implement `NbCalendarCell` interface.
         * */
        set: function (cellComponent) {
            if (cellComponent) {
                this.dayCellComponent = cellComponent;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeComponent.prototype, "_yearCellComponent", {
        /**
         * Custom year cell component. Have to implement `NbCalendarCell` interface.
         * */
        set: function (cellComponent) {
            if (cellComponent) {
                this.yearCellComponent = cellComponent;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCalendarRangeComponent.prototype, "showWeekNumber", {
        /**
         * Determines should we show week numbers column.
         * False by default.
         * */
        get: function () {
            return this._showWeekNumber;
        },
        set: function (value) {
            this._showWeekNumber = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbCalendarRangeComponent.prototype.onChange = function (date) {
        this.initDateIfNull();
        this.handleSelected(date);
    };
    NbCalendarRangeComponent.prototype.initDateIfNull = function () {
        if (!this.range) {
            this.range = { start: null, end: null };
        }
    };
    NbCalendarRangeComponent.prototype.handleSelected = function (date) {
        if (this.selectionStarted()) {
            this.selectEnd(date);
        }
        else {
            this.selectStart(date);
        }
    };
    NbCalendarRangeComponent.prototype.selectionStarted = function () {
        var _a = this.range, start = _a.start, end = _a.end;
        return start && !end;
    };
    NbCalendarRangeComponent.prototype.selectStart = function (start) {
        this.selectRange({ start: start });
    };
    NbCalendarRangeComponent.prototype.selectEnd = function (date) {
        var start = this.range.start;
        if (this.dateService.compareDates(date, start) > 0) {
            this.selectRange({ start: start, end: date });
        }
        else {
            this.selectRange({ start: date, end: start });
        }
    };
    NbCalendarRangeComponent.prototype.selectRange = function (range) {
        this.range = range;
        this.rangeChange.emit(range);
    };
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbCalendarRangeComponent.prototype, "boundingMonth", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarRangeComponent.prototype, "startView", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbCalendarRangeComponent.prototype, "filter", void 0);
    __decorate([
        Input('dayCellComponent'),
        __metadata("design:type", Type),
        __metadata("design:paramtypes", [Type])
    ], NbCalendarRangeComponent.prototype, "_cellComponent", null);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbCalendarRangeComponent.prototype, "monthCellComponent", void 0);
    __decorate([
        Input('yearCellComponent'),
        __metadata("design:type", Type),
        __metadata("design:paramtypes", [Type])
    ], NbCalendarRangeComponent.prototype, "_yearCellComponent", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarRangeComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbCalendarRangeComponent.prototype, "showNavigation", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbCalendarRangeComponent.prototype, "range", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbCalendarRangeComponent.prototype, "showWeekNumber", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbCalendarRangeComponent.prototype, "weekNumberSymbol", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbCalendarRangeComponent.prototype, "rangeChange", void 0);
    NbCalendarRangeComponent = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbCalendarRangeComponent);
NbCalendarRangeComponent.ɵfac = function NbCalendarRangeComponent_Factory(t) { return new (t || NbCalendarRangeComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService)); };
NbCalendarRangeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCalendarRangeComponent, selectors: [["nb-calendar-range"]], inputs: { boundingMonth: "boundingMonth", startView: "startView", monthCellComponent: "monthCellComponent", size: "size", showNavigation: "showNavigation", weekNumberSymbol: "weekNumberSymbol", _cellComponent: ["dayCellComponent", "_cellComponent"], _yearCellComponent: ["yearCellComponent", "_yearCellComponent"], showWeekNumber: "showWeekNumber", range: "range", min: "min", max: "max", filter: "filter", visibleDate: "visibleDate" }, outputs: { rangeChange: "rangeChange" }, decls: 1, vars: 14, consts: [[3, "date", "min", "max", "filter", "startView", "boundingMonth", "dayCellComponent", "monthCellComponent", "yearCellComponent", "visibleDate", "showNavigation", "size", "showWeekNumber", "weekNumberSymbol", "dateChange"]], template: function NbCalendarRangeComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nb-base-calendar", 0);
        ɵngcc0.ɵɵlistener("dateChange", function NbCalendarRangeComponent_Template_nb_base_calendar_dateChange_0_listener($event) { return ctx.onChange($event); });
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("date", ctx.range)("min", ctx.min)("max", ctx.max)("filter", ctx.filter)("startView", ctx.startView)("boundingMonth", ctx.boundingMonth)("dayCellComponent", ctx.dayCellComponent)("monthCellComponent", ctx.monthCellComponent)("yearCellComponent", ctx.yearCellComponent)("visibleDate", ctx.visibleDate)("showNavigation", ctx.showNavigation)("size", ctx.size)("showWeekNumber", ctx.showWeekNumber)("weekNumberSymbol", ctx.weekNumberSymbol);
    } }, directives: [NbBaseCalendarComponent], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarRangeComponent, [{
        type: Component,
        args: [{
                selector: 'nb-calendar-range',
                template: "\n    <nb-base-calendar\n      [date]=\"range\"\n      (dateChange)=\"onChange($any($event))\"\n      [min]=\"min\"\n      [max]=\"max\"\n      [filter]=\"filter\"\n      [startView]=\"startView\"\n      [boundingMonth]=\"boundingMonth\"\n      [dayCellComponent]=\"dayCellComponent\"\n      [monthCellComponent]=\"monthCellComponent\"\n      [yearCellComponent]=\"yearCellComponent\"\n      [visibleDate]=\"visibleDate\"\n      [showNavigation]=\"showNavigation\"\n      [size]=\"size\"\n      [showWeekNumber]=\"showWeekNumber\"\n      [weekNumberSymbol]=\"weekNumberSymbol\"\n    ></nb-base-calendar>\n  "
            }]
    }], function () { return [{ type: NbDateService }]; }, { boundingMonth: [{
            type: Input
        }], startView: [{
            type: Input
        }], monthCellComponent: [{
            type: Input
        }], size: [{
            type: Input
        }], showNavigation: [{
            type: Input
        }], weekNumberSymbol: [{
            type: Input
        }], rangeChange: [{
            type: Output
        }], _cellComponent: [{
            type: Input,
            args: ['dayCellComponent']
        }], _yearCellComponent: [{
            type: Input,
            args: ['yearCellComponent']
        }], showWeekNumber: [{
            type: Input
        }], range: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }] }); })();
    return NbCalendarRangeComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCalendarRangeModule = /** @class */ (function () {
    function NbCalendarRangeModule() {
    }
NbCalendarRangeModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbCalendarRangeModule });
NbCalendarRangeModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbCalendarRangeModule_Factory(t) { return new (t || NbCalendarRangeModule)(); }, imports: [[NbBaseCalendarModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCalendarRangeModule, { declarations: [NbCalendarRangeComponent,
        NbCalendarRangeDayCellComponent,
        NbCalendarRangeYearCellComponent,
        NbCalendarRangeMonthCellComponent], imports: [NbBaseCalendarModule], exports: [NbCalendarRangeComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCalendarRangeModule, [{
        type: NgModule,
        args: [{
                imports: [NbBaseCalendarModule],
                exports: [NbCalendarRangeComponent],
                declarations: [
                    NbCalendarRangeComponent,
                    NbCalendarRangeDayCellComponent,
                    NbCalendarRangeYearCellComponent,
                    NbCalendarRangeMonthCellComponent,
                ],
                entryComponents: [
                    NbCalendarRangeDayCellComponent,
                    NbCalendarRangeMonthCellComponent,
                    NbCalendarRangeYearCellComponent,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbCalendarRangeModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
function isUrlPathEqual(path, link) {
    var locationPath = getPathPartOfUrl(path);
    return link === locationPath;
}
function isUrlPathContain(path, link) {
    var locationPath = getPathPartOfUrl(path);
    var endOfUrlSegmentRegExp = /\/|^$/;
    return locationPath.startsWith(link) &&
        locationPath.slice(link.length).charAt(0).search(endOfUrlSegmentRegExp) !== -1;
}
function getPathPartOfUrl(url) {
    return url.match(/.*?(?=[?;#]|$)/)[0];
}
function getFragmentPartOfUrl(url) {
    var matched = url.match(/#(.+)/);
    return matched ? matched[1] : '';
}
function isFragmentEqual(path, fragment) {
    return getFragmentPartOfUrl(path) === fragment;
}
function isFragmentContain(path, fragment) {
    return getFragmentPartOfUrl(path).includes(fragment);
}

/**
 * This service determines whether we should scroll the layout back to top.
 * This occurs when the page is changed, so when current url PATH is not equal to the previous one.
 *
 *  TODO: this is most likely a temporary solutions as recently Angular introduces ViewportScroll
 *  and scroll restoration process
 */
var NbRestoreScrollTopHelper = /** @class */ (function () {
    function NbRestoreScrollTopHelper(router) {
        this.router = router;
    }
    NbRestoreScrollTopHelper.prototype.shouldRestore = function () {
        var _this = this;
        return this.router.events
            .pipe(startWith(null), filter(function (event) { return event === null || event instanceof NavigationEnd; }), pairwise(), map(function (_a) {
            var prev = _a[0], current = _a[1];
            return _this.pageChanged(prev, current);
        }), filter(function (res) { return !!res; }));
    };
    NbRestoreScrollTopHelper.prototype.pageChanged = function (prev, current) {
        return !prev || getPathPartOfUrl(prev.url) !== getPathPartOfUrl(current.url);
    };
    NbRestoreScrollTopHelper = __decorate([ __metadata("design:paramtypes", [Router])
    ], NbRestoreScrollTopHelper);
NbRestoreScrollTopHelper.ɵfac = function NbRestoreScrollTopHelper_Factory(t) { return new (t || NbRestoreScrollTopHelper)(ɵngcc0.ɵɵinject(ɵngcc5.Router)); };
NbRestoreScrollTopHelper.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbRestoreScrollTopHelper, factory: function (t) { return NbRestoreScrollTopHelper.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRestoreScrollTopHelper, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc5.Router }]; }, null); })();
    return NbRestoreScrollTopHelper;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Layout container component.
 * When using with Nebular Theme System it is required that all child components should be placed inside.
 *
 * Basic example of two column layout with header:
 *
 * @stacked-example(Showcase, layout/layout-showcase.component)
 *
 * Can contain the following components inside:
 *
 * ```html
 * <nb-layout>
 *  <nb-layout-header></nb-layout-header>
 *  <nb-layout-footer></nb-layout-footer>
 *  <nb-layout-column></nb-layout-column>
 *  <nb-sidebar></nb-sidebar>
 * </nb-layout>
 * ```
 * ### Installation
 *
 * Import `NbLayoutModule` to your app module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbLayoutModule,
 *   ],
 * })
 * export class AppModule { }
 * ```
 * ### Usage
 * By default the layout fills up the whole view-port.
 * The window scrollbars are disabled on the body and moved inside of the nb-layout, so that the scrollbars
 * won't mess with the fixed nb-header.
 *
 * The child components are projected into a flexible layout structure allowing to adjust the layout behavior
 * based on the settings provided.
 *
 * The layout content (columns) becomes centered when the window width is more than
 * the value specified in the theme variable `layout-content-width`.
 *
 * The layout also contains the area on the very top (the first child of the nb-layout), which could be used
 * to dynamically append some components like modals or spinners/loaders
 * so that they are located on top of the elements hierarchy.
 * More details are under the `ThemeService` section.
 *
 * The layout component is also responsible for changing application themes.
 * It listens to the `themeChange` event and change a theme CSS class appended to body.
 * Based on the class appended, specific CSS-theme is applied to the application.
 * More details of the Theme System could be found here [Enabling Theme System](#/docs/concepts/theme-system)
 *
 * A simple layout with footer:
 *
 * @stacked-example(Layout With Footer, layout/layout-w-footer.component)
 *
 * It is possible to ask the layout to center the columns (notice: we added a `center` attribute
 * to the layout:
 *
 * ```html
 * <nb-layout center>
 *   <nb-layout-header>Awesome Company</nb-layout-header>
 *
 *   <nb-layout-column>
 *     Hello World!
 *   </nb-layout-column>
 *
 *   <nb-layout-footer>Contact us</nb-layout-footer>
 * </nb-layout>
 * ```
 *
 * @styles
 *
 * layout-background-color:
 * layout-text-color:
 * layout-text-font-family:
 * layout-text-font-size:
 * layout-text-font-weight:
 * layout-text-line-height:
 * layout-min-height:
 * layout-content-width:
 * layout-window-mode-min-width:
 * layout-window-mode-max-width:
 * layout-window-mode-background-color:
 * layout-window-mode-padding-top:
 * layout-window-shadow:
 * layout-padding:
 * layout-medium-padding:
 * layout-small-padding:
 * layout-scrollbar-background-color:
 * layout-scrollbar-color:
 * layout-scrollbar-width:
 */
var NbLayoutComponent = /** @class */ (function () {
    function NbLayoutComponent(themeService, spinnerService, elementRef, renderer, window, document, platformId, layoutDirectionService, scrollService, rulerService, scrollTop, overlayContainer) {
        var _this = this;
        this.themeService = themeService;
        this.spinnerService = spinnerService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.window = window;
        this.document = document;
        this.platformId = platformId;
        this.layoutDirectionService = layoutDirectionService;
        this.scrollService = scrollService;
        this.rulerService = rulerService;
        this.scrollTop = scrollTop;
        this.overlayContainer = overlayContainer;
        this.scrollBlockClass = 'nb-global-scrollblock';
        this.isScrollBlocked = false;
        this.centerValue = false;
        this.restoreScrollTopValue = true;
        this.windowModeValue = false;
        this.withScrollValue = false;
        this.withSubheader = false;
        this.afterViewInit$ = new BehaviorSubject(null);
        this.destroy$ = new Subject();
        this.registerAsOverlayContainer();
        this.themeService.onThemeChange()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (theme) {
            var body = _this.document.getElementsByTagName('body')[0];
            if (theme.previous) {
                _this.renderer.removeClass(body, "nb-theme-" + theme.previous);
            }
            _this.renderer.addClass(body, "nb-theme-" + theme.name);
        });
        this.themeService.onAppendLayoutClass()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (className) {
            _this.renderer.addClass(_this.elementRef.nativeElement, className);
        });
        this.themeService.onRemoveLayoutClass()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (className) {
            _this.renderer.removeClass(_this.elementRef.nativeElement, className);
        });
        this.spinnerService.registerLoader(new Promise(function (resolve, reject) {
            _this.afterViewInit$
                .pipe(takeUntil(_this.destroy$))
                .subscribe(function (_) { return resolve(); });
        }));
        this.spinnerService.load();
        this.rulerService.onGetDimensions()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (_a) {
            var listener = _a.listener;
            listener.next(_this.getDimensions());
            listener.complete();
        });
        this.scrollService
            .onScrollableChange()
            .pipe(filter(function () { return _this.withScrollValue; }))
            .subscribe(function (scrollable) {
            /**
             * In case when Nebular Layout custom scroll `withScroll` mode is enabled
             * we need to disable default CDK scroll blocker (@link NbBlockScrollStrategyAdapter) on HTML element
             * so that it won't add additional positioning.
             */
            if (scrollable) {
                _this.enableScroll();
            }
            else {
                _this.blockScroll();
            }
        });
        if (isPlatformBrowser(this.platformId)) {
            // trigger first time so that after the change we have the initial value
            this.themeService.changeWindowWidth(this.window.innerWidth);
        }
    }
    Object.defineProperty(NbLayoutComponent.prototype, "center", {
        /**
         * Defines whether the layout columns will be centered after some width
         * @param {boolean} val
         */
        set: function (val) {
            this.centerValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbLayoutComponent.prototype, "windowMode", {
        /**
         * Defines whether the layout enters a 'window' mode, when the layout content (including sidebars and fixed header)
         * becomes centered by width with a margin from the top of the screen, like a floating window.
         * Automatically enables `withScroll` mode, as in the window mode scroll must be inside the layout and cannot be on
         * window. (TODO: check this)
         * @param {boolean} val
         */
        set: function (val) {
            this.windowModeValue = convertToBoolProperty(val);
            this.withScroll = this.windowModeValue;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbLayoutComponent.prototype, "withScroll", {
        /**
         * Defines whether to move the scrollbars to layout or leave it at the body level.
         * Automatically set to true when `windowMode` is enabled.
         * @param {boolean} val
         */
        set: function (val) {
            this.withScrollValue = convertToBoolProperty(val);
            // TODO: is this the best way of doing it? as we don't have access to body from theme styles
            // TODO: add e2e test
            var body = this.document.getElementsByTagName('body')[0];
            if (this.withScrollValue) {
                this.renderer.setStyle(body, 'overflow', 'hidden');
            }
            else {
                this.renderer.setStyle(body, 'overflow', 'initial');
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbLayoutComponent.prototype, "restoreScrollTop", {
        /**
         * Restores scroll to the top of the page after navigation
         * @param {boolean} val
         */
        set: function (val) {
            this.restoreScrollTopValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    NbLayoutComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.scrollService.onGetPosition()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (_a) {
            var listener = _a.listener;
            listener.next(_this.getScrollPosition());
            listener.complete();
        });
        this.scrollTop.shouldRestore()
            .pipe(filter(function () { return _this.restoreScrollTopValue; }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.scroll(0, 0); });
        this.layoutDirectionService.onDirectionChange()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (direction) { return _this.document.dir = direction; });
        this.scrollService.onManualScroll()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (_a) {
            var x = _a.x, y = _a.y;
            return _this.scroll(x, y);
        });
        this.afterViewInit$.next(true);
    };
    NbLayoutComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
        this.unregisterAsOverlayContainer();
    };
    NbLayoutComponent.prototype.onScroll = function ($event) {
        this.scrollService.fireScrollChange($event);
    };
    NbLayoutComponent.prototype.onResize = function (event) {
        this.themeService.changeWindowWidth(event.target.innerWidth);
    };
    /**
     * Returns scroll and client height/width
     *
     * Depending on the current scroll mode (`withScroll=true`) returns sizes from the body element
     * or from the `.scrollable-container`
     * @returns {NbLayoutDimensions}
     */
    NbLayoutComponent.prototype.getDimensions = function () {
        var clientWidth, clientHeight, scrollWidth, scrollHeight = 0;
        if (this.withScrollValue) {
            var container = this.scrollableContainerRef.nativeElement;
            clientWidth = container.clientWidth;
            clientHeight = container.clientHeight;
            scrollWidth = container.scrollWidth;
            scrollHeight = container.scrollHeight;
        }
        else {
            var _a = this.document, documentElement = _a.documentElement, body = _a.body;
            clientWidth = documentElement.clientWidth || body.clientWidth;
            clientHeight = documentElement.clientHeight || body.clientHeight;
            scrollWidth = documentElement.scrollWidth || body.scrollWidth;
            scrollHeight = documentElement.scrollHeight || body.scrollHeight;
        }
        return {
            clientWidth: clientWidth,
            clientHeight: clientHeight,
            scrollWidth: scrollWidth,
            scrollHeight: scrollHeight,
        };
    };
    /**
     * Returns scroll position of current scroll container.
     *
     * If `withScroll` = true, returns scroll position of the `.scrollable-container` element,
     * otherwise - of the scrollable element of the window (which may be different depending of a browser)
     *
     * @returns {NbScrollPosition}
     */
    NbLayoutComponent.prototype.getScrollPosition = function () {
        if (!isPlatformBrowser(this.platformId)) {
            return { x: 0, y: 0 };
        }
        if (this.withScrollValue) {
            var container = this.scrollableContainerRef.nativeElement;
            return { x: container.scrollLeft, y: container.scrollTop };
        }
        var documentRect = this.document.documentElement.getBoundingClientRect();
        var x = -documentRect.left || this.document.body.scrollLeft || this.window.scrollX ||
            this.document.documentElement.scrollLeft || 0;
        var y = -documentRect.top || this.document.body.scrollTop || this.window.scrollY ||
            this.document.documentElement.scrollTop || 0;
        return { x: x, y: y };
    };
    NbLayoutComponent.prototype.registerAsOverlayContainer = function () {
        if (this.overlayContainer.setContainer) {
            this.overlayContainer.setContainer(this.elementRef.nativeElement);
        }
    };
    NbLayoutComponent.prototype.unregisterAsOverlayContainer = function () {
        if (this.overlayContainer.clearContainer) {
            this.overlayContainer.clearContainer();
        }
    };
    NbLayoutComponent.prototype.scroll = function (x, y) {
        if (x === void 0) { x = null; }
        if (y === void 0) { y = null; }
        var _a = this.getScrollPosition(), currentX = _a.x, currentY = _a.y;
        x = x == null ? currentX : x;
        y = y == null ? currentY : y;
        if (!isPlatformBrowser(this.platformId)) {
            return;
        }
        if (this.withScrollValue) {
            var scrollable = this.scrollableContainerRef.nativeElement;
            if (scrollable.scrollTo) {
                scrollable.scrollTo(x, y);
            }
            else {
                scrollable.scrollLeft = x;
                scrollable.scrollTop = y;
            }
        }
        else {
            this.window.scrollTo(x, y);
        }
    };
    // TODO: Extract into block scroll strategy
    NbLayoutComponent.prototype.blockScroll = function () {
        if (this.isScrollBlocked) {
            return;
        }
        this.isScrollBlocked = true;
        this.renderer.addClass(this.document.documentElement, this.scrollBlockClass);
        var scrollableContainerElement = this.scrollableContainerRef.nativeElement;
        var layoutElement = this.layoutContainerRef.nativeElement;
        var layoutWithScrollWidth = layoutElement.clientWidth;
        this.scrollableContainerOverflowOldValue = scrollableContainerElement.style.overflow;
        scrollableContainerElement.style.overflow = 'hidden';
        var layoutWithoutScrollWidth = layoutElement.clientWidth;
        var scrollWidth = layoutWithoutScrollWidth - layoutWithScrollWidth;
        if (!scrollWidth) {
            return;
        }
        this.layoutPaddingOldValue = {
            left: layoutElement.style.paddingLeft,
            right: layoutElement.style.paddingRight,
        };
        if (this.layoutDirectionService.isLtr()) {
            layoutElement.style.paddingRight = scrollWidth + "px";
        }
        else {
            layoutElement.style.paddingLeft = scrollWidth + "px";
        }
    };
    NbLayoutComponent.prototype.enableScroll = function () {
        if (this.isScrollBlocked) {
            this.isScrollBlocked = false;
            this.renderer.removeClass(this.document.documentElement, this.scrollBlockClass);
            this.scrollableContainerRef.nativeElement.style.overflow = this.scrollableContainerOverflowOldValue;
            if (this.layoutPaddingOldValue) {
                var layoutElement = this.layoutContainerRef.nativeElement;
                layoutElement.style.paddingLeft = this.layoutPaddingOldValue.left;
                layoutElement.style.paddingRight = this.layoutPaddingOldValue.right;
                this.layoutPaddingOldValue = null;
            }
        }
    };
    __decorate([
        HostBinding('class.window-mode'),
        __metadata("design:type", Boolean)
    ], NbLayoutComponent.prototype, "windowModeValue", void 0);
    __decorate([
        HostBinding('class.with-scroll'),
        __metadata("design:type", Boolean)
    ], NbLayoutComponent.prototype, "withScrollValue", void 0);
    __decorate([
        HostBinding('class.with-subheader'),
        __metadata("design:type", Boolean)
    ], NbLayoutComponent.prototype, "withSubheader", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutComponent.prototype, "center", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutComponent.prototype, "windowMode", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutComponent.prototype, "withScroll", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutComponent.prototype, "restoreScrollTop", null);
    __decorate([
        ViewChild('layoutTopDynamicArea', { read: ViewContainerRef }),
        __metadata("design:type", ViewContainerRef)
    ], NbLayoutComponent.prototype, "veryTopRef", void 0);
    __decorate([
        ViewChild('scrollableContainer', { read: ElementRef }),
        __metadata("design:type", ElementRef)
    ], NbLayoutComponent.prototype, "scrollableContainerRef", void 0);
    __decorate([
        ViewChild('layoutContainer', { read: ElementRef }),
        __metadata("design:type", ElementRef)
    ], NbLayoutComponent.prototype, "layoutContainerRef", void 0);
    __decorate([
        HostListener('window:scroll', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbLayoutComponent.prototype, "onScroll", null);
    __decorate([
        HostListener('window:resize', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbLayoutComponent.prototype, "onResize", null);
    NbLayoutComponent = __decorate([ __param(4, Inject(NB_WINDOW)),
        __param(5, Inject(NB_DOCUMENT)),
        __param(6, Inject(PLATFORM_ID)),
        __metadata("design:paramtypes", [NbThemeService,
            NbSpinnerService,
            ElementRef,
            Renderer2, Object, Object, Object,
            NbLayoutDirectionService,
            NbLayoutScrollService,
            NbLayoutRulerService,
            NbRestoreScrollTopHelper,
            NbOverlayContainerAdapter])
    ], NbLayoutComponent);
NbLayoutComponent.ɵfac = function NbLayoutComponent_Factory(t) { return new (t || NbLayoutComponent)(ɵngcc0.ɵɵdirectiveInject(NbThemeService), ɵngcc0.ɵɵdirectiveInject(NbSpinnerService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(NbLayoutScrollService), ɵngcc0.ɵɵdirectiveInject(NbLayoutRulerService), ɵngcc0.ɵɵdirectiveInject(NbRestoreScrollTopHelper), ɵngcc0.ɵɵdirectiveInject(NbOverlayContainerAdapter)); };
NbLayoutComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbLayoutComponent, selectors: [["nb-layout"]], viewQuery: function NbLayoutComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c8, true, ViewContainerRef);
        ɵngcc0.ɵɵviewQuery(_c9, true, ElementRef);
        ɵngcc0.ɵɵviewQuery(_c10, true, ElementRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.veryTopRef = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.scrollableContainerRef = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.layoutContainerRef = _t.first);
    } }, hostVars: 6, hostBindings: function NbLayoutComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("scroll", function NbLayoutComponent_scroll_HostBindingHandler($event) { return ctx.onScroll($event); }, false, ɵngcc0.ɵɵresolveWindow)("resize", function NbLayoutComponent_resize_HostBindingHandler($event) { return ctx.onResize($event); }, false, ɵngcc0.ɵɵresolveWindow);
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("window-mode", ctx.windowModeValue)("with-scroll", ctx.withScrollValue)("with-subheader", ctx.withSubheader);
    } }, inputs: { center: "center", windowMode: "windowMode", withScroll: "withScroll", restoreScrollTop: "restoreScrollTop" }, ngContentSelectors: _c12, decls: 12, vars: 2, consts: [[1, "scrollable-container", 3, "scroll"], ["scrollableContainer", ""], [1, "layout"], ["layoutContainer", ""], [1, "layout-container"], [1, "content"], [1, "columns"]], template: function NbLayoutComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c11);
        ɵngcc0.ɵɵelementStart(0, "div", 0, 1);
        ɵngcc0.ɵɵlistener("scroll", function NbLayoutComponent_Template_div_scroll_0_listener($event) { return ctx.onScroll($event); });
        ɵngcc0.ɵɵelementStart(2, "div", 2, 3);
        ɵngcc0.ɵɵprojection(4);
        ɵngcc0.ɵɵelementStart(5, "div", 4);
        ɵngcc0.ɵɵprojection(6, 1);
        ɵngcc0.ɵɵelementStart(7, "div", 5);
        ɵngcc0.ɵɵprojection(8, 2);
        ɵngcc0.ɵɵelementStart(9, "div", 6);
        ɵngcc0.ɵɵprojection(10, 3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵprojection(11, 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(7);
        ɵngcc0.ɵɵclassProp("center", ctx.centerValue);
    } }, styles: ["[_nghost-%COMP%]{-webkit-font-smoothing:antialiased}[dir=ltr]   [_nghost-%COMP%]{text-align:left}[dir=rtl]   [_nghost-%COMP%]{text-align:right}[_nghost-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]     nb-layout-header{display:block}[_nghost-%COMP%]     nb-layout-header nav{align-items:center;justify-content:flex-start;display:flex}[_nghost-%COMP%]     nb-layout-header.fixed{position:fixed;top:0;left:0;right:0;z-index:1040}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.left{order:0}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.left{order:2}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.right{order:2}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.right{order:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.end{order:2}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar .fixed{position:fixed;width:100%;overflow-y:auto;height:100%}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:column;min-width:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content.center[_ngcontent-%COMP%]{max-width:100%;position:relative;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row;width:100%}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column{order:1;flex:1 0;min-width:0}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.left{order:0}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.left{order:2}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.start{order:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     nb-layout-footer{display:block;margin-top:auto}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     nb-layout-footer nav{justify-content:center;display:flex}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutComponent, [{
        type: Component,
        args: [{
                selector: 'nb-layout',
                template: "\n    <div class=\"scrollable-container\" #scrollableContainer (scroll)=\"onScroll($event)\">\n      <div class=\"layout\" #layoutContainer>\n        <ng-content select=\"nb-layout-header:not([subheader])\"></ng-content>\n        <div class=\"layout-container\">\n          <ng-content select=\"nb-sidebar\"></ng-content>\n          <div class=\"content\" [class.center]=\"centerValue\">\n            <ng-content select=\"nb-layout-header[subheader]\"></ng-content>\n            <div class=\"columns\">\n              <ng-content select=\"nb-layout-column\"></ng-content>\n            </div>\n            <ng-content select=\"nb-layout-footer\"></ng-content>\n          </div>\n        </div>\n      </div>\n    </div>\n  ",
                styles: [":host{-webkit-font-smoothing:antialiased}[dir=ltr] :host{text-align:left}[dir=rtl] :host{text-align:right}:host .layout{display:flex;flex-direction:column}:host ::ng-deep nb-layout-header{display:block}:host ::ng-deep nb-layout-header nav{align-items:center;justify-content:flex-start;display:flex}:host ::ng-deep nb-layout-header.fixed{position:fixed;top:0;left:0;right:0;z-index:1040}:host .layout-container{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row}[dir=ltr] :host .layout-container ::ng-deep nb-sidebar.left{order:0}[dir=rtl] :host .layout-container ::ng-deep nb-sidebar.left{order:2}[dir=ltr] :host .layout-container ::ng-deep nb-sidebar.right{order:2}[dir=rtl] :host .layout-container ::ng-deep nb-sidebar.right{order:0}:host .layout-container ::ng-deep nb-sidebar.end{order:2}:host .layout-container ::ng-deep nb-sidebar .fixed{position:fixed;width:100%;overflow-y:auto;height:100%}:host .layout-container .content{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:column;min-width:0}:host .layout-container .content.center{max-width:100%;position:relative;margin-left:auto;margin-right:auto}:host .layout-container .content .columns{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row;width:100%}:host .layout-container .content .columns ::ng-deep nb-layout-column{order:1;flex:1 0;min-width:0}[dir=ltr] :host .layout-container .content .columns ::ng-deep nb-layout-column.left{order:0}[dir=rtl] :host .layout-container .content .columns ::ng-deep nb-layout-column.left{order:2}:host .layout-container .content .columns ::ng-deep nb-layout-column.start{order:0}:host .layout-container .content ::ng-deep nb-layout-footer{display:block;margin-top:auto}:host .layout-container .content ::ng-deep nb-layout-footer nav{justify-content:center;display:flex}\n"]
            }]
    }], function () { return [{ type: NbThemeService }, { type: NbSpinnerService }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_WINDOW]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [PLATFORM_ID]
            }] }, { type: NbLayoutDirectionService }, { type: NbLayoutScrollService }, { type: NbLayoutRulerService }, { type: NbRestoreScrollTopHelper }, { type: NbOverlayContainerAdapter }]; }, { windowModeValue: [{
            type: HostBinding,
            args: ['class.window-mode']
        }], withScrollValue: [{
            type: HostBinding,
            args: ['class.with-scroll']
        }], withSubheader: [{
            type: HostBinding,
            args: ['class.with-subheader']
        }], center: [{
            type: Input
        }], windowMode: [{
            type: Input
        }], withScroll: [{
            type: Input
        }], restoreScrollTop: [{
            type: Input
        }], onScroll: [{
            type: HostListener,
            args: ['window:scroll', ['$event']]
        }], onResize: [{
            type: HostListener,
            args: ['window:resize', ['$event']]
        }], veryTopRef: [{
            type: ViewChild,
            args: ['layoutTopDynamicArea', { read: ViewContainerRef }]
        }], scrollableContainerRef: [{
            type: ViewChild,
            args: ['scrollableContainer', { read: ElementRef }]
        }], layoutContainerRef: [{
            type: ViewChild,
            args: ['layoutContainer', { read: ElementRef }]
        }] }); })();
    return NbLayoutComponent;
}());
/**
 * A container component which determines a content position inside of the layout.
 * The layout could contain unlimited columns (not including the sidebars).
 *
 * By default the columns are ordered from the left to the right,
 * but it's also possible to overwrite this behavior by setting a `left` attribute to the column,
 * moving it to the very first position:
 *
 * @stacked-example(Column Left, layout/layout-column-left.component)
 */
var NbLayoutColumnComponent = /** @class */ (function () {
    function NbLayoutColumnComponent() {
    }
    Object.defineProperty(NbLayoutColumnComponent.prototype, "left", {
        /**
         * Move the column to the very left position in the layout.
         * @param {boolean} val
         */
        set: function (val) {
            this.leftValue = convertToBoolProperty(val);
            this.startValue = false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbLayoutColumnComponent.prototype, "start", {
        /**
         * Make column first in the layout.
         * @param {boolean} val
         */
        set: function (val) {
            this.startValue = convertToBoolProperty(val);
            this.leftValue = false;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        HostBinding('class.left'),
        __metadata("design:type", Boolean)
    ], NbLayoutColumnComponent.prototype, "leftValue", void 0);
    __decorate([
        HostBinding('class.start'),
        __metadata("design:type", Boolean)
    ], NbLayoutColumnComponent.prototype, "startValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutColumnComponent.prototype, "left", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutColumnComponent.prototype, "start", null);
NbLayoutColumnComponent.ɵfac = function NbLayoutColumnComponent_Factory(t) { return new (t || NbLayoutColumnComponent)(); };
NbLayoutColumnComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbLayoutColumnComponent, selectors: [["nb-layout-column"]], hostVars: 4, hostBindings: function NbLayoutColumnComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("left", ctx.leftValue)("start", ctx.startValue);
    } }, inputs: { left: "left", start: "start" }, ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbLayoutColumnComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutColumnComponent, [{
        type: Component,
        args: [{
                selector: 'nb-layout-column',
                template: "\n    <ng-content></ng-content>\n  "
            }]
    }], function () { return []; }, { left: [{
            type: Input
        }], start: [{
            type: Input
        }], leftValue: [{
            type: HostBinding,
            args: ['class.left']
        }], startValue: [{
            type: HostBinding,
            args: ['class.start']
        }] }); })();
    return NbLayoutColumnComponent;
}());
/**
 * Page header component.
 * Located on top of the page above the layout columns and sidebars.
 * Could be made `fixed` by setting the corresponding property. In the fixed mode the header becomes
 * sticky to the top of the nb-layout (to of the page). Here's an example:
 *
 * @stacked-example(Fixed Header, layout/layout-fixed-header.component)
 *
 * In a pair with sidebar it is possible to setup a configuration when header is placed on a side of the sidebar
 * and not on top of it. To achieve this simply put a `subheader` property to the header like this:
 * ```html
 * <nb-layout-header subheader></nb-layout-header>
 * ```
 * @stacked-example(Subheader, layout/layout-sidebar-subheader.component)
 * Note that in such configuration sidebar shadow is removed and header cannot be make `fixed`.
 *
 * Same way you can put both `fixed` and `clipped` headers adding creating a sub-header for your app:
 *
 * @stacked-example(Subheader, layout/layout-subheader.component)
 *
 * @styles
 *
 * header-background-color:
 * header-text-color:
 * header-text-font-family:
 * header-text-font-size:
 * header-text-font-weight:
 * header-text-line-height:
 * header-height:
 * header-padding:
 * header-shadow:
 */
var NbLayoutHeaderComponent = /** @class */ (function () {
    function NbLayoutHeaderComponent(layout) {
        this.layout = layout;
    }
    Object.defineProperty(NbLayoutHeaderComponent.prototype, "fixed", {
        /**
         * Makes the header sticky to the top of the nb-layout.
         * @param {boolean} val
         */
        set: function (val) {
            this.fixedValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbLayoutHeaderComponent.prototype, "subheader", {
        /**
         * Places header on a side of the sidebar, and not above.
         * Disables fixed mode for this header and remove a shadow from the sidebar.
         * @param {boolean} val
         */
        set: function (val) {
            this.subheaderValue = convertToBoolProperty(val);
            this.fixedValue = false;
            this.layout.withSubheader = this.subheaderValue;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        HostBinding('class.fixed'),
        __metadata("design:type", Boolean)
    ], NbLayoutHeaderComponent.prototype, "fixedValue", void 0);
    __decorate([
        HostBinding('class.subheader'),
        __metadata("design:type", Boolean)
    ], NbLayoutHeaderComponent.prototype, "subheaderValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutHeaderComponent.prototype, "fixed", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutHeaderComponent.prototype, "subheader", null);
    NbLayoutHeaderComponent = __decorate([ __metadata("design:paramtypes", [NbLayoutComponent])
    ], NbLayoutHeaderComponent);
NbLayoutHeaderComponent.ɵfac = function NbLayoutHeaderComponent_Factory(t) { return new (t || NbLayoutHeaderComponent)(ɵngcc0.ɵɵdirectiveInject(NbLayoutComponent)); };
NbLayoutHeaderComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbLayoutHeaderComponent, selectors: [["nb-layout-header"]], hostVars: 4, hostBindings: function NbLayoutHeaderComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("fixed", ctx.fixedValue)("subheader", ctx.subheaderValue);
    } }, inputs: { fixed: "fixed", subheader: "subheader" }, ngContentSelectors: _c0, decls: 2, vars: 2, template: function NbLayoutHeaderComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "nav");
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("fixed", ctx.fixedValue);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutHeaderComponent, [{
        type: Component,
        args: [{
                selector: 'nb-layout-header',
                template: "\n    <nav [class.fixed]=\"fixedValue\">\n      <ng-content></ng-content>\n    </nav>\n  "
            }]
    }], function () { return [{ type: NbLayoutComponent }]; }, { fixed: [{
            type: Input
        }], subheader: [{
            type: Input
        }], fixedValue: [{
            type: HostBinding,
            args: ['class.fixed']
        }], subheaderValue: [{
            type: HostBinding,
            args: ['class.subheader']
        }] }); })();
    return NbLayoutHeaderComponent;
}());
/**
 * Page footer.
 * Located under the nb-layout content (specifically, under the columns).
 * Could be made `fixed`, becoming sticky to the bottom of the view port (window).
 *
 * @styles
 *
 * footer-background-color:
 * footer-text-color:
 * footer-text-font-family:
 * footer-text-font-size:
 * footer-text-font-weight:
 * footer-text-line-height:
 * footer-text-highlight-color:
 * footer-height:
 * footer-padding:
 * footer-divider-color:
 * footer-divider-style:
 * footer-divider-width:
 * footer-shadow:
 */
var NbLayoutFooterComponent = /** @class */ (function () {
    function NbLayoutFooterComponent() {
    }
    Object.defineProperty(NbLayoutFooterComponent.prototype, "fixed", {
        /**
         * Makes the footer sticky to the bottom of the window.
         * @param {boolean} val
         */
        set: function (val) {
            this.fixedValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        HostBinding('class.fixed'),
        __metadata("design:type", Boolean)
    ], NbLayoutFooterComponent.prototype, "fixedValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbLayoutFooterComponent.prototype, "fixed", null);
NbLayoutFooterComponent.ɵfac = function NbLayoutFooterComponent_Factory(t) { return new (t || NbLayoutFooterComponent)(); };
NbLayoutFooterComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbLayoutFooterComponent, selectors: [["nb-layout-footer"]], hostVars: 2, hostBindings: function NbLayoutFooterComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("fixed", ctx.fixedValue);
    } }, inputs: { fixed: "fixed" }, ngContentSelectors: _c0, decls: 2, vars: 2, template: function NbLayoutFooterComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "nav");
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("fixed", ctx.fixedValue);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutFooterComponent, [{
        type: Component,
        args: [{
                selector: 'nb-layout-footer',
                template: "\n    <nav [class.fixed]=\"fixedValue\">\n      <ng-content></ng-content>\n    </nav>\n  "
            }]
    }], function () { return []; }, { fixed: [{
            type: Input
        }], fixedValue: [{
            type: HostBinding,
            args: ['class.fixed']
        }] }); })();
    return NbLayoutFooterComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_LAYOUT_COMPONENTS = [
    NbLayoutComponent,
    NbLayoutColumnComponent,
    NbLayoutFooterComponent,
    NbLayoutHeaderComponent,
];
var NbLayoutModule = /** @class */ (function () {
    function NbLayoutModule() {
    }
NbLayoutModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbLayoutModule });
NbLayoutModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbLayoutModule_Factory(t) { return new (t || NbLayoutModule)(); }, providers: [
        NbRestoreScrollTopHelper,
    ], imports: [[
            NbSharedModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbLayoutModule, { declarations: [NbLayoutComponent,
        NbLayoutColumnComponent,
        NbLayoutFooterComponent,
        NbLayoutHeaderComponent], imports: [NbSharedModule], exports: [NbLayoutComponent,
        NbLayoutColumnComponent,
        NbLayoutFooterComponent,
        NbLayoutHeaderComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbLayoutModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                ],
                declarations: __spreadArrays(NB_LAYOUT_COMPONENTS),
                providers: [
                    NbRestoreScrollTopHelper,
                ],
                exports: __spreadArrays(NB_LAYOUT_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbLayoutModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var itemClick$ = new Subject();
var addItems$ = new ReplaySubject(1);
var navigateHome$ = new ReplaySubject(1);
var getSelectedItem$ = new ReplaySubject(1);
var itemSelect$ = new ReplaySubject(1);
var itemHover$ = new ReplaySubject(1);
var submenuToggle$ = new ReplaySubject(1);
var collapseAll$ = new ReplaySubject(1);
// TODO: check if we need both URL and LINK
/**
 *
 *
 * Menu Item options example
 * @stacked-example(Menu Link Parameters, menu/menu-link-params.component)
 *
 *
 */
var NbMenuItem = /** @class */ (function () {
    function NbMenuItem() {
        /**
         * Item is selected when partly or fully equal to the current url
         * @type {string}
         */
        this.pathMatch = 'full';
    }
    /**
     * @returns item parents in top-down order
     */
    NbMenuItem.getParents = function (item) {
        var parents = [];
        var parent = item.parent;
        while (parent) {
            parents.unshift(parent);
            parent = parent.parent;
        }
        return parents;
    };
    NbMenuItem.isParent = function (item, possibleChild) {
        return possibleChild.parent
            ? possibleChild.parent === item || this.isParent(item, possibleChild.parent)
            : false;
    };
    return NbMenuItem;
}());
// TODO: map select events to router change events
// TODO: review the interface
/**
 *
 *
 * Menu Service. Allows you to listen to menu events, or to interact with a menu.
 * @stacked-example(Menu Service, menu/menu-service.component)
 *
 *
 */
var NbMenuService = /** @class */ (function () {
    function NbMenuService() {
    }
    /**
     * Add items to the end of the menu items list
     * @param {List<NbMenuItem>} items
     * @param {string} tag
     */
    NbMenuService.prototype.addItems = function (items, tag) {
        addItems$.next({ tag: tag, items: items });
    };
    /**
     * Collapses all menu items
     * @param {string} tag
     */
    NbMenuService.prototype.collapseAll = function (tag) {
        collapseAll$.next({ tag: tag });
    };
    /**
     * Navigate to the home menu item
     * @param {string} tag
     */
    NbMenuService.prototype.navigateHome = function (tag) {
        navigateHome$.next({ tag: tag });
    };
    /**
     * Returns currently selected item. Won't subscribe to the future events.
     * @param {string} tag
     * @returns {Observable<{tag: string; item: NbMenuItem}>}
     */
    NbMenuService.prototype.getSelectedItem = function (tag) {
        var listener = new BehaviorSubject(null);
        getSelectedItem$.next({ tag: tag, listener: listener });
        return listener.asObservable();
    };
    NbMenuService.prototype.onItemClick = function () {
        return itemClick$.pipe(share());
    };
    NbMenuService.prototype.onItemSelect = function () {
        return itemSelect$.pipe(share());
    };
    NbMenuService.prototype.onItemHover = function () {
        return itemHover$.pipe(share());
    };
    NbMenuService.prototype.onSubmenuToggle = function () {
        return submenuToggle$.pipe(share());
    };
NbMenuService.ɵfac = function NbMenuService_Factory(t) { return new (t || NbMenuService)(); };
NbMenuService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbMenuService, factory: function (t) { return NbMenuService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbMenuService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbMenuService;
}());
var NbMenuInternalService = /** @class */ (function () {
    function NbMenuInternalService(location) {
        this.location = location;
    }
    NbMenuInternalService.prototype.prepareItems = function (items) {
        var _this = this;
        var defaultItem = new NbMenuItem();
        items.forEach(function (i) {
            _this.applyDefaults(i, defaultItem);
            _this.setParent(i);
        });
    };
    NbMenuInternalService.prototype.selectFromUrl = function (items, tag, collapseOther) {
        if (collapseOther === void 0) { collapseOther = false; }
        var selectedItem = this.findItemByUrl(items);
        if (selectedItem) {
            this.selectItem(selectedItem, items, collapseOther, tag);
        }
    };
    NbMenuInternalService.prototype.selectItem = function (item, items, collapseOther, tag) {
        if (collapseOther === void 0) { collapseOther = false; }
        var unselectedItems = this.resetSelection(items);
        var collapsedItems = collapseOther ? this.collapseItems(items) : [];
        for (var _i = 0, _a = NbMenuItem.getParents(item); _i < _a.length; _i++) {
            var parent_1 = _a[_i];
            parent_1.selected = true;
            // emit event only for items that weren't selected before ('unselectedItems' contains items that were selected)
            if (!unselectedItems.includes(parent_1)) {
                this.itemSelect(parent_1, tag);
            }
            var wasNotExpanded = !parent_1.expanded;
            parent_1.expanded = true;
            var i = collapsedItems.indexOf(parent_1);
            // emit event only for items that weren't expanded before.
            // 'collapsedItems' contains items that were expanded, so no need to emit event.
            // in case 'collapseOther' is false, 'collapsedItems' will be empty,
            // so also check if item isn't expanded already ('wasNotExpanded').
            if (i === -1 && wasNotExpanded) {
                this.submenuToggle(parent_1, tag);
            }
            else {
                collapsedItems.splice(i, 1);
            }
        }
        item.selected = true;
        // emit event only for items that weren't selected before ('unselectedItems' contains items that were selected)
        if (!unselectedItems.includes(item)) {
            this.itemSelect(item, tag);
        }
        // remaining items which wasn't expanded back after expanding all currently selected items
        for (var _b = 0, collapsedItems_1 = collapsedItems; _b < collapsedItems_1.length; _b++) {
            var collapsedItem = collapsedItems_1[_b];
            this.submenuToggle(collapsedItem, tag);
        }
    };
    NbMenuInternalService.prototype.collapseAll = function (items, tag, except) {
        var collapsedItems = this.collapseItems(items, except);
        for (var _i = 0, collapsedItems_2 = collapsedItems; _i < collapsedItems_2.length; _i++) {
            var item = collapsedItems_2[_i];
            this.submenuToggle(item, tag);
        }
    };
    NbMenuInternalService.prototype.onAddItem = function () {
        return addItems$.pipe(share());
    };
    NbMenuInternalService.prototype.onNavigateHome = function () {
        return navigateHome$.pipe(share());
    };
    NbMenuInternalService.prototype.onCollapseAll = function () {
        return collapseAll$.pipe(share());
    };
    NbMenuInternalService.prototype.onGetSelectedItem = function () {
        return getSelectedItem$.pipe(share());
    };
    NbMenuInternalService.prototype.itemHover = function (item, tag) {
        itemHover$.next({ tag: tag, item: item });
    };
    NbMenuInternalService.prototype.submenuToggle = function (item, tag) {
        submenuToggle$.next({ tag: tag, item: item });
    };
    NbMenuInternalService.prototype.itemSelect = function (item, tag) {
        itemSelect$.next({ tag: tag, item: item });
    };
    NbMenuInternalService.prototype.itemClick = function (item, tag) {
        itemClick$.next({ tag: tag, item: item });
    };
    /**
     * Unselect all given items deeply.
     * @param items array of items to unselect.
     * @returns items which selected value was changed.
     */
    NbMenuInternalService.prototype.resetSelection = function (items) {
        var unselectedItems = [];
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            if (item.selected) {
                unselectedItems.push(item);
            }
            item.selected = false;
            if (item.children) {
                unselectedItems.push.apply(unselectedItems, this.resetSelection(item.children));
            }
        }
        return unselectedItems;
    };
    /**
     * Collapse all given items deeply.
     * @param items array of items to collapse.
     * @param except menu item which shouldn't be collapsed, also disables collapsing for parents of this item.
     * @returns items which expanded value was changed.
     */
    NbMenuInternalService.prototype.collapseItems = function (items, except) {
        var collapsedItems = [];
        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {
            var item = items_2[_i];
            if (except && (item === except || NbMenuItem.isParent(item, except))) {
                continue;
            }
            if (item.expanded) {
                collapsedItems.push(item);
            }
            item.expanded = false;
            if (item.children) {
                collapsedItems.push.apply(collapsedItems, this.collapseItems(item.children));
            }
        }
        return collapsedItems;
    };
    NbMenuInternalService.prototype.applyDefaults = function (item, defaultItem) {
        var _this = this;
        var menuItem = __assign({}, item);
        Object.assign(item, defaultItem, menuItem);
        item.children && item.children.forEach(function (child) {
            _this.applyDefaults(child, defaultItem);
        });
    };
    NbMenuInternalService.prototype.setParent = function (item) {
        var _this = this;
        item.children && item.children.forEach(function (child) {
            child.parent = item;
            _this.setParent(child);
        });
    };
    /**
     * Find deepest item which link matches current URL path.
     * @param items array of items to search in.
     * @returns found item of undefined.
     */
    NbMenuInternalService.prototype.findItemByUrl = function (items) {
        var _this = this;
        var selectedItem;
        items.some(function (item) {
            if (item.children) {
                selectedItem = _this.findItemByUrl(item.children);
            }
            if (!selectedItem && _this.isSelectedInUrl(item)) {
                selectedItem = item;
            }
            return selectedItem;
        });
        return selectedItem;
    };
    NbMenuInternalService.prototype.isSelectedInUrl = function (item) {
        var exact = item.pathMatch === 'full';
        var link = item.link;
        var isSelectedInPath = exact
            ? isUrlPathEqual(this.location.path(), link)
            : isUrlPathContain(this.location.path(), link);
        if (isSelectedInPath && item.fragment != null) {
            return exact
                ? isFragmentEqual(this.location.path(true), item.fragment)
                : isFragmentContain(this.location.path(true), item.fragment);
        }
        return isSelectedInPath;
    };
    NbMenuInternalService = __decorate([ __metadata("design:paramtypes", [Location])
    ], NbMenuInternalService);
NbMenuInternalService.ɵfac = function NbMenuInternalService_Factory(t) { return new (t || NbMenuInternalService)(ɵngcc0.ɵɵinject(ɵngcc2.Location)); };
NbMenuInternalService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbMenuInternalService, factory: function (t) { return NbMenuInternalService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbMenuInternalService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc2.Location }]; }, null); })();
    return NbMenuInternalService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbToggleStates;
(function (NbToggleStates) {
    NbToggleStates["Expanded"] = "expanded";
    NbToggleStates["Collapsed"] = "collapsed";
})(NbToggleStates || (NbToggleStates = {}));
var NbMenuItemComponent = /** @class */ (function () {
    function NbMenuItemComponent(menuService, directionService) {
        this.menuService = menuService;
        this.directionService = directionService;
        this.menuItem = null;
        this.hoverItem = new EventEmitter();
        this.toggleSubMenu = new EventEmitter();
        this.selectItem = new EventEmitter();
        this.itemClick = new EventEmitter();
        this.destroy$ = new Subject();
    }
    NbMenuItemComponent.prototype.ngDoCheck = function () {
        this.toggleState = this.menuItem.expanded ? NbToggleStates.Expanded : NbToggleStates.Collapsed;
    };
    NbMenuItemComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.menuService.onSubmenuToggle()
            .pipe(filter(function (_a) {
            var item = _a.item;
            return item === _this.menuItem;
        }), map(function (_a) {
            var item = _a.item;
            return item.expanded;
        }), takeUntil(this.destroy$))
            .subscribe(function (isExpanded) { return _this.toggleState = isExpanded ? NbToggleStates.Expanded : NbToggleStates.Collapsed; });
    };
    NbMenuItemComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbMenuItemComponent.prototype.onToggleSubMenu = function (item) {
        this.toggleSubMenu.emit(item);
    };
    NbMenuItemComponent.prototype.onHoverItem = function (item) {
        this.hoverItem.emit(item);
    };
    NbMenuItemComponent.prototype.onSelectItem = function (item) {
        this.selectItem.emit(item);
    };
    NbMenuItemComponent.prototype.onItemClick = function (item) {
        this.itemClick.emit(item);
    };
    NbMenuItemComponent.prototype.getExpandStateIcon = function () {
        if (this.menuItem.expanded) {
            return 'chevron-down-outline';
        }
        return this.directionService.isLtr()
            ? 'chevron-left-outline'
            : 'chevron-right-outline';
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbMenuItemComponent.prototype, "menuItem", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbMenuItemComponent.prototype, "hoverItem", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbMenuItemComponent.prototype, "toggleSubMenu", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbMenuItemComponent.prototype, "selectItem", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbMenuItemComponent.prototype, "itemClick", void 0);
    NbMenuItemComponent = __decorate([ __metadata("design:paramtypes", [NbMenuService,
            NbLayoutDirectionService])
    ], NbMenuItemComponent);
NbMenuItemComponent.ɵfac = function NbMenuItemComponent_Factory(t) { return new (t || NbMenuItemComponent)(ɵngcc0.ɵɵdirectiveInject(NbMenuService), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService)); };
NbMenuItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbMenuItemComponent, selectors: [["", "nbMenuItem", ""]], inputs: { menuItem: "menuItem" }, outputs: { hoverItem: "hoverItem", toggleSubMenu: "toggleSubMenu", selectItem: "selectItem", itemClick: "itemClick" }, attrs: _c13, decls: 6, vars: 6, consts: [[4, "ngIf"], [3, "routerLink", "queryParams", "fragment", "skipLocationChange", "active", "mouseenter", "click", 4, "ngIf"], [3, "active", "mouseenter", "click", 4, "ngIf"], ["href", "#", 3, "active", "click", "mouseenter", 4, "ngIf"], ["class", "menu-items", 3, "collapsed", "expanded", 4, "ngIf"], ["class", "menu-icon", 3, "config", 4, "ngIf"], [1, "menu-icon", 3, "config"], [3, "routerLink", "queryParams", "fragment", "skipLocationChange", "mouseenter", "click"], [1, "menu-title"], [3, "mouseenter", "click"], ["href", "#", 3, "click", "mouseenter"], ["pack", "nebular-essentials", 1, "expand-state", 3, "icon"], [1, "menu-items"], [4, "ngFor", "ngForOf"], ["nbMenuItem", "", "class", "menu-item", 3, "menuItem", "menu-group", "hoverItem", "toggleSubMenu", "selectItem", "itemClick", 4, "ngIf"], ["nbMenuItem", "", 1, "menu-item", 3, "menuItem", "hoverItem", "toggleSubMenu", "selectItem", "itemClick"]], template: function NbMenuItemComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbMenuItemComponent_span_0_Template, 3, 2, "span", 0);
        ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_1_Template, 4, 10, "a", 1);
        ɵngcc0.ɵɵtemplate(2, NbMenuItemComponent_a_2_Template, 4, 7, "a", 2);
        ɵngcc0.ɵɵtemplate(3, NbMenuItemComponent_a_3_Template, 4, 6, "a", 2);
        ɵngcc0.ɵɵtemplate(4, NbMenuItemComponent_a_4_Template, 5, 7, "a", 3);
        ɵngcc0.ɵɵtemplate(5, NbMenuItemComponent_ul_5_Template, 2, 6, "ul", 4);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.menuItem.group);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.menuItem.link && !ctx.menuItem.url && !ctx.menuItem.children && !ctx.menuItem.group);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.menuItem.url && !ctx.menuItem.children && !ctx.menuItem.link && !ctx.menuItem.group);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.menuItem.children && !ctx.menuItem.link && !ctx.menuItem.url && !ctx.menuItem.group);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.menuItem.children);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.menuItem.children);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent, ɵngcc5.RouterLinkWithHref, ɵngcc2.NgForOf, NbMenuItemComponent], encapsulation: 2, data: { animation: [
            trigger('toggle', [
                state(NbToggleStates.Collapsed, style({ height: '0', margin: '0' })),
                state(NbToggleStates.Expanded, style({ height: '*' })),
                transition(NbToggleStates.Collapsed + " <=> " + NbToggleStates.Expanded, animate(300)),
            ]),
        ] } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbMenuItemComponent, [{
        type: Component,
        args: [{
                selector: '[nbMenuItem]',
                template: "<span *ngIf=\"menuItem.group\">\n  <nb-icon class=\"menu-icon\" [config]=\"menuItem.icon\" *ngIf=\"menuItem.icon\"></nb-icon>\n  {{ menuItem.title }}\n</span>\n<a *ngIf=\"menuItem.link && !menuItem.url && !menuItem.children && !menuItem.group\"\n   [routerLink]=\"menuItem.link\"\n   [queryParams]=\"menuItem.queryParams\"\n   [fragment]=\"menuItem.fragment\"\n   [skipLocationChange]=\"menuItem.skipLocationChange\"\n   [attr.target]=\"menuItem.target\"\n   [attr.title]=\"menuItem.title\"\n   [class.active]=\"menuItem.selected\"\n   (mouseenter)=\"onHoverItem(menuItem)\"\n   (click)=\"onItemClick(menuItem);\">\n  <nb-icon class=\"menu-icon\" [config]=\"menuItem.icon\" *ngIf=\"menuItem.icon\"></nb-icon>\n  <span class=\"menu-title\">{{ menuItem.title }}</span>\n</a>\n<a *ngIf=\"menuItem.url && !menuItem.children && !menuItem.link && !menuItem.group\"\n   [attr.href]=\"menuItem.url\"\n   [attr.target]=\"menuItem.target\"\n   [attr.title]=\"menuItem.title\"\n   [class.active]=\"menuItem.selected\"\n   (mouseenter)=\"onHoverItem(menuItem)\"\n   (click)=\"onSelectItem(menuItem)\">\n  <nb-icon class=\"menu-icon\" [config]=\"menuItem.icon\" *ngIf=\"menuItem.icon\"></nb-icon>\n  <span class=\"menu-title\">{{ menuItem.title }}</span>\n</a>\n<a *ngIf=\"!menuItem.children && !menuItem.link && !menuItem.url && !menuItem.group\"\n   [attr.target]=\"menuItem.target\"\n   [attr.title]=\"menuItem.title\"\n   [class.active]=\"menuItem.selected\"\n   (mouseenter)=\"onHoverItem(menuItem)\"\n   (click)=\"$event.preventDefault(); onItemClick(menuItem);\">\n  <nb-icon class=\"menu-icon\" [config]=\"menuItem.icon\" *ngIf=\"menuItem.icon\"></nb-icon>\n  <span class=\"menu-title\">{{ menuItem.title }}</span>\n</a>\n<a *ngIf=\"menuItem.children\"\n   (click)=\"$event.preventDefault(); onToggleSubMenu(menuItem);\"\n   [attr.target]=\"menuItem.target\"\n   [attr.title]=\"menuItem.title\"\n   [class.active]=\"menuItem.selected\"\n   (mouseenter)=\"onHoverItem(menuItem)\"\n   href=\"#\">\n  <nb-icon class=\"menu-icon\" [config]=\"menuItem.icon\" *ngIf=\"menuItem.icon\"></nb-icon>\n  <span class=\"menu-title\">{{ menuItem.title }}</span>\n  <nb-icon class=\"expand-state\" [icon]=\"getExpandStateIcon()\" pack=\"nebular-essentials\"></nb-icon>\n</a>\n<ul *ngIf=\"menuItem.children\"\n    [class.collapsed]=\"!(menuItem.children && menuItem.expanded)\"\n    [class.expanded]=\"menuItem.expanded\"\n    [@toggle]=\"toggleState\"\n    class=\"menu-items\">\n  <ng-container *ngFor=\"let item of menuItem.children\">\n    <li nbMenuItem *ngIf=\"!item.hidden\"\n        [menuItem]=\"item\"\n        [class.menu-group]=\"item.group\"\n        (hoverItem)=\"onHoverItem($event)\"\n        (toggleSubMenu)=\"onToggleSubMenu($event)\"\n        (selectItem)=\"onSelectItem($event)\"\n        (itemClick)=\"onItemClick($event)\"\n        class=\"menu-item\">\n    </li>\n  </ng-container>\n</ul>\n",
                animations: [
                    trigger('toggle', [
                        state(NbToggleStates.Collapsed, style({ height: '0', margin: '0' })),
                        state(NbToggleStates.Expanded, style({ height: '*' })),
                        transition(NbToggleStates.Collapsed + " <=> " + NbToggleStates.Expanded, animate(300)),
                    ]),
                ]
            }]
    }], function () { return [{ type: NbMenuService }, { type: NbLayoutDirectionService }]; }, { menuItem: [{
            type: Input
        }], hoverItem: [{
            type: Output
        }], toggleSubMenu: [{
            type: Output
        }], selectItem: [{
            type: Output
        }], itemClick: [{
            type: Output
        }] }); })();
    return NbMenuItemComponent;
}());
/**
 * Vertical menu component.
 *
 * Accepts a list of menu items and renders them accordingly. Supports multi-level menus.
 *
 * Basic example
 * @stacked-example(Showcase, menu/menu-showcase.component)
 *
 * ```ts
 * // ...
 * items: NbMenuItem[] = [
 *  {
 *    title: home,
 *    link: '/'
 *  },
 *  {
 *    title: dashboard,
 *    link: 'dashboard'
 *  }
 * ];
 * // ...
 * <nb-menu [items]="items"></nb-menu>
 * ```
 * ### Installation
 *
 * Import `NbMenuModule.forRoot()` to your app module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbMenuModule.forRoot(),
 *   ],
 * })
 * export class AppModule { }
 * ```
 * and `NbMenuModule` to your feature module where the component should be shown:
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbMenuModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Two-level menu example
 * @stacked-example(Two Levels, menu/menu-children.component)
 *
 *
 * Autocollapse menu example
 * @stacked-example(Autocollapse Menu, menu/menu-autocollapse.component)
 *
 *
 * @styles
 *
 * menu-background-color:
 * menu-text-color:
 * menu-text-font-family:
 * menu-text-font-size:
 * menu-text-font-weight:
 * menu-text-line-height:
 * menu-group-text-color:
 * menu-item-border-radius:
 * menu-item-padding:
 * menu-item-hover-background-color:
 * menu-item-hover-cursor:
 * menu-item-hover-text-color:
 * menu-item-icon-hover-color:
 * menu-item-active-background-color:
 * menu-item-active-text-color:
 * menu-item-icon-active-color:
 * menu-item-icon-color:
 * menu-item-icon-margin:
 * menu-item-icon-width:
 * menu-item-divider-color:
 * menu-item-divider-style:
 * menu-item-divider-width:
 * menu-submenu-background-color:
 * menu-submenu-text-color:
 * menu-submenu-margin:
 * menu-submenu-padding:
 * menu-submenu-item-border-color:
 * menu-submenu-item-border-style:
 * menu-submenu-item-border-width:
 * menu-submenu-item-border-radius:
 * menu-submenu-item-padding:
 * menu-submenu-item-hover-background-color:
 * menu-submenu-item-hover-border-color:
 * menu-submenu-item-hover-text-color:
 * menu-submenu-item-icon-hover-color:
 * menu-submenu-item-active-background-color:
 * menu-submenu-item-active-border-color:
 * menu-submenu-item-active-text-color:
 * menu-submenu-item-icon-active-color:
 * menu-submenu-item-active-hover-background-color:
 * menu-submenu-item-active-hover-border-color:
 * menu-submenu-item-active-hover-text-color:
 * menu-submenu-item-icon-active-hover-color:
 */
var NbMenuComponent = /** @class */ (function () {
    function NbMenuComponent(window, platformId, menuInternalService, router) {
        this.window = window;
        this.platformId = platformId;
        this.menuInternalService = menuInternalService;
        this.router = router;
        this._autoCollapse = false;
        this.destroy$ = new Subject();
    }
    Object.defineProperty(NbMenuComponent.prototype, "autoCollapse", {
        /**
         * Collapse all opened submenus on the toggle event
         * Default value is "false"
         * @type boolean
         */
        get: function () {
            return this._autoCollapse;
        },
        set: function (value) {
            this._autoCollapse = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbMenuComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.menuInternalService.prepareItems(this.items);
        this.menuInternalService
            .onAddItem()
            .pipe(filter(function (data) { return _this.compareTag(data.tag); }), takeUntil(this.destroy$))
            .subscribe(function (data) { return _this.onAddItem(data); });
        this.menuInternalService
            .onNavigateHome()
            .pipe(filter(function (data) { return _this.compareTag(data.tag); }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.navigateHome(); });
        this.menuInternalService
            .onGetSelectedItem()
            .pipe(filter(function (data) { return _this.compareTag(data.tag); }), takeUntil(this.destroy$))
            .subscribe(function (data) {
            data.listener.next({ tag: _this.tag, item: _this.getSelectedItem(_this.items) });
        });
        this.menuInternalService
            .onCollapseAll()
            .pipe(filter(function (data) { return _this.compareTag(data.tag); }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.collapseAll(); });
        this.router.events
            .pipe(filter(function (event) { return event instanceof NavigationEnd; }), takeUntil(this.destroy$))
            .subscribe(function () {
            _this.menuInternalService.selectFromUrl(_this.items, _this.tag, _this.autoCollapse);
        });
    };
    NbMenuComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        setTimeout(function () { return _this.menuInternalService.selectFromUrl(_this.items, _this.tag, _this.autoCollapse); });
    };
    NbMenuComponent.prototype.onAddItem = function (data) {
        var _a;
        (_a = this.items).push.apply(_a, data.items);
        this.menuInternalService.prepareItems(this.items);
        this.menuInternalService.selectFromUrl(this.items, this.tag, this.autoCollapse);
    };
    NbMenuComponent.prototype.onHoverItem = function (item) {
        this.menuInternalService.itemHover(item, this.tag);
    };
    NbMenuComponent.prototype.onToggleSubMenu = function (item) {
        if (this.autoCollapse) {
            this.menuInternalService.collapseAll(this.items, this.tag, item);
        }
        item.expanded = !item.expanded;
        this.menuInternalService.submenuToggle(item, this.tag);
    };
    // TODO: is not fired on page reload
    NbMenuComponent.prototype.onSelectItem = function (item) {
        this.menuInternalService.selectItem(item, this.items, this.autoCollapse, this.tag);
    };
    NbMenuComponent.prototype.onItemClick = function (item) {
        this.menuInternalService.itemClick(item, this.tag);
    };
    NbMenuComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbMenuComponent.prototype.navigateHome = function () {
        var homeItem = this.getHomeItem(this.items);
        if (homeItem) {
            if (homeItem.link) {
                this.router.navigate([homeItem.link], { queryParams: homeItem.queryParams, fragment: homeItem.fragment });
            }
            if (homeItem.url && isPlatformBrowser(this.platformId)) {
                this.window.location.href = homeItem.url;
            }
        }
    };
    NbMenuComponent.prototype.collapseAll = function () {
        this.menuInternalService.collapseAll(this.items, this.tag);
    };
    NbMenuComponent.prototype.getHomeItem = function (items) {
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            if (item.home) {
                return item;
            }
            var homeItem = item.children && this.getHomeItem(item.children);
            if (homeItem) {
                return homeItem;
            }
        }
    };
    NbMenuComponent.prototype.compareTag = function (tag) {
        return !tag || tag === this.tag;
    };
    NbMenuComponent.prototype.getSelectedItem = function (items) {
        var _this = this;
        var selected = null;
        items.forEach(function (item) {
            if (item.selected) {
                selected = item;
            }
            if (item.selected && item.children && item.children.length > 0) {
                selected = _this.getSelectedItem(item.children);
            }
        });
        return selected;
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbMenuComponent.prototype, "tag", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbMenuComponent.prototype, "items", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbMenuComponent.prototype, "autoCollapse", null);
    NbMenuComponent = __decorate([ __param(0, Inject(NB_WINDOW)),
        __param(1, Inject(PLATFORM_ID)),
        __metadata("design:paramtypes", [Object, Object, NbMenuInternalService,
            Router])
    ], NbMenuComponent);
NbMenuComponent.ɵfac = function NbMenuComponent_Factory(t) { return new (t || NbMenuComponent)(ɵngcc0.ɵɵdirectiveInject(NB_WINDOW), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NbMenuInternalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc5.Router)); };
NbMenuComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbMenuComponent, selectors: [["nb-menu"]], inputs: { autoCollapse: "autoCollapse", tag: "tag", items: "items" }, decls: 2, vars: 1, consts: [[1, "menu-items"], [4, "ngFor", "ngForOf"], ["nbMenuItem", "", "class", "menu-item", 3, "menuItem", "menu-group", "hoverItem", "toggleSubMenu", "selectItem", "itemClick", 4, "ngIf"], ["nbMenuItem", "", 1, "menu-item", 3, "menuItem", "hoverItem", "toggleSubMenu", "selectItem", "itemClick"]], template: function NbMenuComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "ul", 0);
        ɵngcc0.ɵɵtemplate(1, NbMenuComponent_ng_container_1_Template, 2, 1, "ng-container", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.items);
    } }, directives: [ɵngcc2.NgForOf, ɵngcc2.NgIf, NbMenuItemComponent], styles: ["[_nghost-%COMP%]    {display:block}[_nghost-%COMP%]     .menu-items, [_nghost-%COMP%]     .menu-item>.menu-items{list-style-type:none;overflow:hidden}[_nghost-%COMP%]     .menu-item a{display:flex;text-decoration:none;align-items:center}[_nghost-%COMP%]     .menu-item a .menu-title{flex:1 0 auto}[dir=rtl]   [_nghost-%COMP%]     .menu-item a .menu-title{text-align:right}[_nghost-%COMP%]     .menu-group span{display:flex}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbMenuComponent, [{
        type: Component,
        args: [{
                selector: 'nb-menu',
                template: "\n    <ul class=\"menu-items\">\n      <ng-container *ngFor=\"let item of items\">\n        <li nbMenuItem *ngIf=\"!item.hidden\"\n            [menuItem]=\"item\"\n            [class.menu-group]=\"item.group\"\n            (hoverItem)=\"onHoverItem($event)\"\n            (toggleSubMenu)=\"onToggleSubMenu($event)\"\n            (selectItem)=\"onSelectItem($event)\"\n            (itemClick)=\"onItemClick($event)\"\n            class=\"menu-item\">\n        </li>\n      </ng-container>\n    </ul>\n  ",
                styles: [":host ::ng-deep{display:block}:host ::ng-deep .menu-items,:host ::ng-deep .menu-item>.menu-items{list-style-type:none;overflow:hidden}:host ::ng-deep .menu-item a{display:flex;text-decoration:none;align-items:center}:host ::ng-deep .menu-item a .menu-title{flex:1 0 auto}[dir=rtl] :host ::ng-deep .menu-item a .menu-title{text-align:right}:host ::ng-deep .menu-group span{display:flex}\n"]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_WINDOW]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [PLATFORM_ID]
            }] }, { type: NbMenuInternalService }, { type: ɵngcc5.Router }]; }, { autoCollapse: [{
            type: Input
        }], tag: [{
            type: Input
        }], items: [{
            type: Input
        }] }); })();
    return NbMenuComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var nbMenuComponents = [NbMenuComponent, NbMenuItemComponent];
var NB_MENU_PROVIDERS = [NbMenuService, NbMenuInternalService];
var NbMenuModule = /** @class */ (function () {
    function NbMenuModule() {
    }
    NbMenuModule_1 = NbMenuModule;
    NbMenuModule.forRoot = function () {
        return {
            ngModule: NbMenuModule_1,
            providers: __spreadArrays(NB_MENU_PROVIDERS),
        };
    };
    var NbMenuModule_1;
NbMenuModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbMenuModule });
NbMenuModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbMenuModule_Factory(t) { return new (t || NbMenuModule)(); }, imports: [[NbSharedModule, NbIconModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbMenuModule, { declarations: [NbMenuComponent,
        NbMenuItemComponent], imports: [NbSharedModule,
        NbIconModule], exports: [NbMenuComponent,
        NbMenuItemComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbMenuModule, [{
        type: NgModule,
        args: [{
                imports: [NbSharedModule, NbIconModule],
                declarations: __spreadArrays(nbMenuComponents),
                exports: __spreadArrays(nbMenuComponents)
            }]
    }], function () { return []; }, null); })();
    return NbMenuModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Route tabset components.
 * Renders tabs inside of a router-outlet.
 *
 * ```ts
 *  tabs = [
 *  {
 *    title: 'Route tab #1',
 *    route: '/pages/description',
 *    icon: 'home',
 *    responsive: true, // hide title before `route-tabs-icon-only-max-width` value
 *  },
 *  {
 *    title: 'Route tab #2',
 *    route: '/pages/images',
 *    }
 *  ];
 *
 *  <nb-route-tabset [tabs]="tabs"></nb-route-tabset>
 * ```
 * ### Installation
 *
 * Import `NbRouteTabsetModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbRouteTabsetModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 *
 * @stacked-example(Route Tabset, tabset/route-tabset-showcase.component)
 *
 * @styles
 *
 * route-tabset-background-color:
 * route-tabset-border-radius:
 * route-tabset-shadow:
 * route-tabset-tab-background-color:
 * route-tabset-tab-padding:
 * route-tabset-tab-text-color:
 * route-tabset-tab-text-font-family:
 * route-tabset-tab-text-font-size:
 * route-tabset-tab-text-font-weight:
 * route-tabset-tab-text-line-height:
 * route-tabset-tab-text-transform:
 * route-tabset-tab-underline-width:
 * route-tabset-tab-underline-color:
 * route-tabset-tab-active-background-color:
 * route-tabset-tab-active-text-color:
 * route-tabset-tab-active-underline-color:
 * route-tabset-tab-focus-background-color:
 * route-tabset-tab-focus-text-color:
 * route-tabset-tab-focus-underline-color:
 * route-tabset-tab-hover-background-color:
 * route-tabset-tab-hover-text-color:
 * route-tabset-tab-hover-underline-color:
 * route-tabset-tab-disabled-background-color:
 * route-tabset-tab-disabled-text-color:
 * route-tabset-tab-disabled-underline-color:
 * route-tabset-divider-color:
 * route-tabset-divider-style:
 * route-tabset-divider-width:
 * route-tabset-scrollbar-color:
 * route-tabset-scrollbar-background-color:
 * route-tabset-scrollbar-width:
 * route-tabset-tab-text-hide-breakpoint:
 */
var NbRouteTabsetComponent = /** @class */ (function () {
    function NbRouteTabsetComponent() {
        this.fullWidthValue = false;
        /**
         * Options passed to `routerLinkActiveOptions` directive which set on tab links.
         * `{ exact: true }` by default.
         */
        this.activeLinkOptions = { exact: true };
        /**
         * Emits when tab is selected
         * @type {EventEmitter<any>}
         */
        this.changeTab = new EventEmitter();
    }
    Object.defineProperty(NbRouteTabsetComponent.prototype, "fullWidth", {
        /**
         * Take full width of a parent
         * @param {boolean} val
         */
        set: function (val) {
            this.fullWidthValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    NbRouteTabsetComponent.prototype.selectTab = function (tab) {
        this.changeTab.emit(tab);
    };
    __decorate([
        HostBinding('class.full-width'),
        __metadata("design:type", Boolean)
    ], NbRouteTabsetComponent.prototype, "fullWidthValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbRouteTabsetComponent.prototype, "tabs", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbRouteTabsetComponent.prototype, "activeLinkOptions", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbRouteTabsetComponent.prototype, "fullWidth", null);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbRouteTabsetComponent.prototype, "changeTab", void 0);
NbRouteTabsetComponent.ɵfac = function NbRouteTabsetComponent_Factory(t) { return new (t || NbRouteTabsetComponent)(); };
NbRouteTabsetComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbRouteTabsetComponent, selectors: [["nb-route-tabset"]], hostVars: 2, hostBindings: function NbRouteTabsetComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("full-width", ctx.fullWidthValue);
    } }, inputs: { activeLinkOptions: "activeLinkOptions", fullWidth: "fullWidth", tabs: "tabs" }, outputs: { changeTab: "changeTab" }, decls: 3, vars: 1, consts: [[1, "route-tabset"], [4, "ngFor", "ngForOf"], ["class", "route-tab disabled", "tabindex", "-1", 3, "responsive", 4, "ngIf", "ngIfElse"], ["enabled", ""], ["tabindex", "-1", 1, "route-tab", "disabled"], ["tabindex", "-1", 1, "tab-link"], [3, "config", 4, "ngIf"], ["class", "tab-text", 4, "ngIf"], [3, "config"], [1, "tab-text"], ["routerLinkActive", "active", "tabindex", "0", 1, "route-tab", 3, "routerLink", "routerLinkActiveOptions", "click"], [3, "icon", 4, "ngIf"], [3, "icon"]], template: function NbRouteTabsetComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "ul", 0);
        ɵngcc0.ɵɵtemplate(1, NbRouteTabsetComponent_ng_container_1_Template, 4, 2, "ng-container", 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(2, "router-outlet");
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.tabs);
    } }, directives: [ɵngcc2.NgForOf, ɵngcc5.RouterOutlet, ɵngcc2.NgIf, NbIconComponent, ɵngcc5.RouterLinkActive, ɵngcc5.RouterLink], styles: [".route-tabset[_ngcontent-%COMP%]{display:flex;flex-direction:row;list-style-type:none;margin:0;padding:0}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]{margin-bottom:-1px;text-align:center;padding:0}.route-tabset[_ngcontent-%COMP%]   .route-tab.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{display:block}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;text-decoration:none;display:inline-block}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{position:absolute;content:'';width:100%;border-radius:3px;bottom:-2px;left:0}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{vertical-align:middle}[dir=ltr]   [_nghost-%COMP%]   .tab-link[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .tab-link[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-right:.5rem}.full-width[_nghost-%COMP%]   .route-tabset[_ngcontent-%COMP%]{justify-content:space-around}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRouteTabsetComponent, [{
        type: Component,
        args: [{
                selector: 'nb-route-tabset',
                template: "\n    <ul class=\"route-tabset\">\n      <ng-container *ngFor=\"let tab of tabs\">\n        <li *ngIf=\"tab.disabled; else enabled\"\n            [class.responsive]=\"tab.responsive\"\n            class=\"route-tab disabled\"\n            tabindex=\"-1\">\n          <a tabindex=\"-1\" class=\"tab-link\">\n            <nb-icon *ngIf=\"tab.icon\" [config]=\"tab.icon\"></nb-icon>\n            <span *ngIf=\"tab.title\" class=\"tab-text\">{{ tab.title }}</span>\n          </a>\n        </li>\n\n        <ng-template #enabled>\n          <li (click)=\"$event.preventDefault(); selectTab(tab)\"\n              [routerLink]=\"tab.route\"\n              routerLinkActive=\"active\"\n              [routerLinkActiveOptions]=\"activeLinkOptions\"\n              [class.responsive]=\"tab.responsive\"\n              tabindex=\"0\"\n              class=\"route-tab\">\n            <a tabindex=\"-1\" class=\"tab-link\">\n              <nb-icon *ngIf=\"tab.icon\" [icon]=\"tab.icon\"></nb-icon>\n              <span *ngIf=\"tab.title\" class=\"tab-text\">{{ tab.title }}</span>\n            </a>\n          </li>\n        </ng-template>\n      </ng-container>\n    </ul>\n    <router-outlet></router-outlet>\n  ",
                styles: [".route-tabset{display:flex;flex-direction:row;list-style-type:none;margin:0;padding:0}.route-tabset .route-tab{margin-bottom:-1px;text-align:center;padding:0}.route-tabset .route-tab.active a::before{display:block}.route-tabset .route-tab a{position:relative;text-decoration:none;display:inline-block}.route-tabset .route-tab a::before{position:absolute;content:'';width:100%;border-radius:3px;bottom:-2px;left:0}.route-tabset .route-tab a nb-icon{vertical-align:middle}[dir=ltr] :host .tab-link nb-icon+span{margin-left:.5rem}[dir=rtl] :host .tab-link nb-icon+span{margin-right:.5rem}:host(.full-width) .route-tabset{justify-content:space-around}\n"]
            }]
    }], function () { return []; }, { fullWidthValue: [{
            type: HostBinding,
            args: ['class.full-width']
        }], activeLinkOptions: [{
            type: Input
        }], changeTab: [{
            type: Output
        }], fullWidth: [{
            type: Input
        }], tabs: [{
            type: Input
        }] }); })();
    return NbRouteTabsetComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbRouteTabsetModule = /** @class */ (function () {
    function NbRouteTabsetModule() {
    }
NbRouteTabsetModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbRouteTabsetModule });
NbRouteTabsetModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbRouteTabsetModule_Factory(t) { return new (t || NbRouteTabsetModule)(); }, imports: [[
            NbSharedModule,
            NbIconModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbRouteTabsetModule, { declarations: [NbRouteTabsetComponent], imports: [NbSharedModule,
        NbIconModule], exports: [NbRouteTabsetComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRouteTabsetModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbIconModule,
                ],
                declarations: [
                    NbRouteTabsetComponent,
                ],
                exports: [
                    NbRouteTabsetComponent,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbRouteTabsetModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Sidebar service.
 *
 * Root module service to control the sidebar from any part of the app.
 *
 * Allows you to change sidebar state dynamically from any part of the app:
 * @stacked-example(Sidebar State, sidebar/sidebar-toggle.component)
 */
var NbSidebarService = /** @class */ (function () {
    function NbSidebarService() {
        this.toggle$ = new Subject();
        this.expand$ = new Subject();
        this.collapse$ = new Subject();
        this.compact$ = new Subject();
    }
    /**
     * Subscribe to toggle events
     *
     * @returns Observable<{ compact: boolean, tag: string }>
     */
    NbSidebarService.prototype.onToggle = function () {
        return this.toggle$.pipe(share());
    };
    /**
     * Subscribe to expand events
     * @returns Observable<{ tag: string }>
     */
    NbSidebarService.prototype.onExpand = function () {
        return this.expand$.pipe(share());
    };
    /**
     * Subscribe to collapse evens
     * @returns Observable<{ tag: string }>
     */
    NbSidebarService.prototype.onCollapse = function () {
        return this.collapse$.pipe(share());
    };
    /**
     * Subscribe to compact evens
     * @returns Observable<{ tag: string }>
     */
    NbSidebarService.prototype.onCompact = function () {
        return this.compact$.pipe(share());
    };
    /**
     * Toggle a sidebar
     * @param {boolean} compact
     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here
     * to specify which sidebar you want to control
     */
    NbSidebarService.prototype.toggle = function (compact, tag) {
        if (compact === void 0) { compact = false; }
        this.toggle$.next({ compact: compact, tag: tag });
    };
    /**
     * Expands a sidebar
     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here
     * to specify which sidebar you want to control
     */
    NbSidebarService.prototype.expand = function (tag) {
        this.expand$.next({ tag: tag });
    };
    /**
     * Collapses a sidebar
     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here
     * to specify which sidebar you want to control
     */
    NbSidebarService.prototype.collapse = function (tag) {
        this.collapse$.next({ tag: tag });
    };
    /**
     * Makes sidebar compact
     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here
     * to specify which sidebar you want to control
     */
    NbSidebarService.prototype.compact = function (tag) {
        this.compact$.next({ tag: tag });
    };
NbSidebarService.ɵfac = function NbSidebarService_Factory(t) { return new (t || NbSidebarService)(); };
NbSidebarService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbSidebarService, factory: function (t) { return NbSidebarService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSidebarService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbSidebarService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Sidebar header container.
 *
 * Placeholder which contains a sidebar header content,
 * placed at the very top of the sidebar outside of the scroll area.
 */
var NbSidebarHeaderComponent = /** @class */ (function () {
    function NbSidebarHeaderComponent() {
    }
NbSidebarHeaderComponent.ɵfac = function NbSidebarHeaderComponent_Factory(t) { return new (t || NbSidebarHeaderComponent)(); };
NbSidebarHeaderComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSidebarHeaderComponent, selectors: [["nb-sidebar-header"]], ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbSidebarHeaderComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSidebarHeaderComponent, [{
        type: Component,
        args: [{
                selector: 'nb-sidebar-header',
                template: "\n    <ng-content></ng-content>\n  "
            }]
    }], function () { return []; }, null); })();
    return NbSidebarHeaderComponent;
}());
/**
 * Sidebar footer container.
 *
 * Placeholder which contains a sidebar footer content,
 * placed at the very bottom of the sidebar outside of the scroll area.
 */
var NbSidebarFooterComponent = /** @class */ (function () {
    function NbSidebarFooterComponent() {
    }
NbSidebarFooterComponent.ɵfac = function NbSidebarFooterComponent_Factory(t) { return new (t || NbSidebarFooterComponent)(); };
NbSidebarFooterComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSidebarFooterComponent, selectors: [["nb-sidebar-footer"]], ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbSidebarFooterComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSidebarFooterComponent, [{
        type: Component,
        args: [{
                selector: 'nb-sidebar-footer',
                template: "\n    <ng-content></ng-content>\n  "
            }]
    }], function () { return []; }, null); })();
    return NbSidebarFooterComponent;
}());
/**
 * Layout sidebar component.
 *
 * @stacked-example(Showcase, sidebar/sidebar-showcase.component)
 *
 * ### Installation
 *
 * Import `NbSidebarModule.forRoot()` to your app module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbSidebarModule.forRoot(),
 *   ],
 * })
 * export class AppModule { }
 * ```
 * and `NbSidebarModule` to your feature module where the component should be shown:
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbSidebarModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Sidebar can be placed on the left or the right side of the layout,
 * or on start/end position of layout (depends on document direction, left to right or right to left)
 * It can be fixed (shown above the content) or can push the layout when opened.
 *
 * There are three states - `expanded`, `collapsed`, `compacted`.
 * By default sidebar content is fixed and saves its position while the page is being scrolled.
 *
 * Compacted sidebar example:
 * @stacked-example(Compacted Sidebar, sidebar/sidebar-compacted.component)
 *
 * Sidebar also supports a `responsive` behavior, listening to window size change and changing its size respectably.
 *
 * In a pair with header it is possible to setup a configuration when header is placed on a side of the sidebar
 * and not on top of it. To achieve this simply put a `subheader` property to the header like this:
 * ```html
 * <nb-layout-header subheader></nb-layout-header>
 * ```
 * @stacked-example(Subheader, layout/layout-sidebar-subheader.component)
 * Note that in such configuration sidebar shadow is removed and header cannot be make `fixed`.
 *
 * @additional-example(Right Sidebar, sidebar/sidebar-right.component)
 * @additional-example(Fixed Sidebar, sidebar/sidebar-fixed.component)
 *
 * @styles
 *
 * sidebar-background-color:
 * sidebar-text-color:
 * sidebar-text-font-family:
 * sidebar-text-font-size:
 * sidebar-text-font-weight:
 * sidebar-text-line-height:
 * sidebar-height:
 * sidebar-width:
 * sidebar-width-compact:
 * sidebar-padding:
 * sidebar-header-height:
 * sidebar-footer-height:
 * sidebar-shadow:
 * sidebar-menu-item-highlight-color:
 * sidebar-scrollbar-background-color:
 * sidebar-scrollbar-color:
 * sidebar-scrollbar-width:
 */
var NbSidebarComponent = /** @class */ (function () {
    function NbSidebarComponent(sidebarService, themeService, element) {
        this.sidebarService = sidebarService;
        this.themeService = themeService;
        this.element = element;
        this.responsiveValue = false;
        this.destroy$ = new Subject();
        this.containerFixedValue = true;
        this.fixedValue = false;
        this.rightValue = false;
        this.leftValue = true;
        this.startValue = false;
        this.endValue = false;
        // TODO: get width by the key and define only max width for the tablets and mobiles
        /**
         * Controls on which screen sizes sidebar should be switched to compacted state.
         * Works only when responsive mode is on.
         * Default values are `['xs', 'is', 'sm', 'md', 'lg']`.
         *
         * @type string[]
         */
        this.compactedBreakpoints = ['xs', 'is', 'sm', 'md', 'lg'];
        /**
         * Controls on which screen sizes sidebar should be switched to collapsed state.
         * Works only when responsive mode is on.
         * Default values are `['xs', 'is']`.
         *
         * @type string[]
         */
        this.collapsedBreakpoints = ['xs', 'is'];
        this.responsiveState = NbSidebarComponent_1.RESPONSIVE_STATE_PC;
    }
    NbSidebarComponent_1 = NbSidebarComponent;
    Object.defineProperty(NbSidebarComponent.prototype, "expanded", {
        // TODO: rename stateValue to state (take a look to the card component)
        get: function () {
            return this.stateValue === NbSidebarComponent_1.STATE_EXPANDED;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "collapsed", {
        get: function () {
            return this.stateValue === NbSidebarComponent_1.STATE_COLLAPSED;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "compacted", {
        get: function () {
            return this.stateValue === NbSidebarComponent_1.STATE_COMPACTED;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "right", {
        /**
         * Places sidebar on the right side
         * @type {boolean}
         */
        set: function (val) {
            this.rightValue = convertToBoolProperty(val);
            this.leftValue = !this.rightValue;
            this.startValue = false;
            this.endValue = false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "left", {
        /**
         * Places sidebar on the left side
         * @type {boolean}
         */
        set: function (val) {
            this.leftValue = convertToBoolProperty(val);
            this.rightValue = !this.leftValue;
            this.startValue = false;
            this.endValue = false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "start", {
        /**
         * Places sidebar on the start edge of layout
         * @type {boolean}
         */
        set: function (val) {
            this.startValue = convertToBoolProperty(val);
            this.endValue = !this.startValue;
            this.leftValue = false;
            this.rightValue = false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "end", {
        /**
         * Places sidebar on the end edge of layout
         * @type {boolean}
         */
        set: function (val) {
            this.endValue = convertToBoolProperty(val);
            this.startValue = !this.endValue;
            this.leftValue = false;
            this.rightValue = false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "fixed", {
        /**
         * Makes sidebar fixed (shown above the layout content)
         * @type {boolean}
         */
        set: function (val) {
            this.fixedValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "containerFixed", {
        /**
         * Makes sidebar container fixed
         * @type {boolean}
         */
        set: function (val) {
            this.containerFixedValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "state", {
        /**
         * Initial sidebar state, `expanded`|`collapsed`|`compacted`
         * @type {string}
         */
        set: function (val) {
            this.stateValue = val;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSidebarComponent.prototype, "responsive", {
        /**
         * Makes sidebar listen to media query events and change its behaviour
         * @type {boolean}
         */
        set: function (val) {
            this.responsiveValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    NbSidebarComponent.prototype.toggleResponsive = function (enabled) {
        if (enabled) {
            this.mediaQuerySubscription = this.onMediaQueryChanges();
        }
        else if (this.mediaQuerySubscription) {
            this.mediaQuerySubscription.unsubscribe();
        }
    };
    NbSidebarComponent.prototype.ngOnChanges = function (changes) {
        if (changes.responsive) {
            this.toggleResponsive(this.responsiveValue);
        }
    };
    NbSidebarComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.sidebarService.onToggle()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (data) {
            if (!_this.tag || _this.tag === data.tag) {
                _this.toggle(data.compact);
            }
        });
        this.sidebarService.onExpand()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (data) {
            if (!_this.tag || _this.tag === data.tag) {
                _this.expand();
            }
        });
        this.sidebarService.onCollapse()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (data) {
            if (!_this.tag || _this.tag === data.tag) {
                _this.collapse();
            }
        });
        this.sidebarService.onCompact()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (data) {
            if (!_this.tag || _this.tag === data.tag) {
                _this.compact();
            }
        });
    };
    NbSidebarComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
        if (this.mediaQuerySubscription) {
            this.mediaQuerySubscription.unsubscribe();
        }
    };
    // TODO: this is more of a workaround, should be a better way to make components communicate to each other
    NbSidebarComponent.prototype.onClick = function (event) {
        var menu = this.element.nativeElement.querySelector('nb-menu');
        if (menu && menu.contains(event.target)) {
            var link = this.getMenuLink(event.target);
            if (link && link.nextElementSibling && link.nextElementSibling.classList.contains('menu-items')) {
                this.sidebarService.expand(this.tag);
            }
        }
    };
    /**
     * Collapses the sidebar
     */
    NbSidebarComponent.prototype.collapse = function () {
        this.state = NbSidebarComponent_1.STATE_COLLAPSED;
    };
    /**
     * Expands the sidebar
     */
    NbSidebarComponent.prototype.expand = function () {
        this.state = NbSidebarComponent_1.STATE_EXPANDED;
    };
    /**
     * Compacts the sidebar (minimizes)
     */
    NbSidebarComponent.prototype.compact = function () {
        this.state = NbSidebarComponent_1.STATE_COMPACTED;
    };
    /**
     * Toggles sidebar state (expanded|collapsed|compacted)
     * @param {boolean} compact If true, then sidebar state will be changed between expanded & compacted,
     * otherwise - between expanded & collapsed. False by default.
     *
     * Toggle sidebar state
     *
     * ```ts
     * this.sidebar.toggle(true);
     * ```
     */
    NbSidebarComponent.prototype.toggle = function (compact) {
        if (compact === void 0) { compact = false; }
        if (this.responsiveEnabled()) {
            if (this.responsiveState === NbSidebarComponent_1.RESPONSIVE_STATE_MOBILE) {
                compact = false;
            }
        }
        var closedStates = [NbSidebarComponent_1.STATE_COMPACTED, NbSidebarComponent_1.STATE_COLLAPSED];
        if (compact) {
            this.state = closedStates.includes(this.stateValue) ?
                NbSidebarComponent_1.STATE_EXPANDED : NbSidebarComponent_1.STATE_COMPACTED;
        }
        else {
            this.state = closedStates.includes(this.stateValue) ?
                NbSidebarComponent_1.STATE_EXPANDED : NbSidebarComponent_1.STATE_COLLAPSED;
        }
    };
    NbSidebarComponent.prototype.onMediaQueryChanges = function () {
        var _this = this;
        return this.themeService.onMediaQueryChange()
            .subscribe(function (_a) {
            var prev = _a[0], current = _a[1];
            var isCollapsed = _this.collapsedBreakpoints.includes(current.name);
            var isCompacted = _this.compactedBreakpoints.includes(current.name);
            if (isCompacted) {
                _this.fixed = _this.containerFixedValue;
                _this.compact();
                _this.responsiveState = NbSidebarComponent_1.RESPONSIVE_STATE_TABLET;
            }
            if (isCollapsed) {
                _this.fixed = true;
                _this.collapse();
                _this.responsiveState = NbSidebarComponent_1.RESPONSIVE_STATE_MOBILE;
            }
            if (!isCollapsed && !isCompacted && prev.width < current.width) {
                _this.expand();
                _this.fixed = false;
                _this.responsiveState = NbSidebarComponent_1.RESPONSIVE_STATE_PC;
            }
        });
    };
    NbSidebarComponent.prototype.responsiveEnabled = function () {
        return this.responsiveValue;
    };
    NbSidebarComponent.prototype.getMenuLink = function (element) {
        if (!element || element.tagName.toLowerCase() === 'nb-menu') {
            return;
        }
        if (element.tagName.toLowerCase() === 'a') {
            return element;
        }
        return this.getMenuLink(element.parentElement);
    };
    var NbSidebarComponent_1;
    NbSidebarComponent.STATE_EXPANDED = 'expanded';
    NbSidebarComponent.STATE_COLLAPSED = 'collapsed';
    NbSidebarComponent.STATE_COMPACTED = 'compacted';
    NbSidebarComponent.RESPONSIVE_STATE_MOBILE = 'mobile';
    NbSidebarComponent.RESPONSIVE_STATE_TABLET = 'tablet';
    NbSidebarComponent.RESPONSIVE_STATE_PC = 'pc';
    __decorate([
        HostBinding('class.fixed'),
        __metadata("design:type", Boolean)
    ], NbSidebarComponent.prototype, "fixedValue", void 0);
    __decorate([
        HostBinding('class.right'),
        __metadata("design:type", Boolean)
    ], NbSidebarComponent.prototype, "rightValue", void 0);
    __decorate([
        HostBinding('class.left'),
        __metadata("design:type", Boolean)
    ], NbSidebarComponent.prototype, "leftValue", void 0);
    __decorate([
        HostBinding('class.start'),
        __metadata("design:type", Boolean)
    ], NbSidebarComponent.prototype, "startValue", void 0);
    __decorate([
        HostBinding('class.end'),
        __metadata("design:type", Boolean)
    ], NbSidebarComponent.prototype, "endValue", void 0);
    __decorate([
        HostBinding('class.expanded'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSidebarComponent.prototype, "expanded", null);
    __decorate([
        HostBinding('class.collapsed'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSidebarComponent.prototype, "collapsed", null);
    __decorate([
        HostBinding('class.compacted'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSidebarComponent.prototype, "compacted", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSidebarComponent.prototype, "right", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSidebarComponent.prototype, "left", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSidebarComponent.prototype, "start", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSidebarComponent.prototype, "end", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSidebarComponent.prototype, "fixed", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSidebarComponent.prototype, "containerFixed", null);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbSidebarComponent.prototype, "state", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSidebarComponent.prototype, "responsive", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSidebarComponent.prototype, "tag", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbSidebarComponent.prototype, "compactedBreakpoints", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbSidebarComponent.prototype, "collapsedBreakpoints", void 0);
    NbSidebarComponent = NbSidebarComponent_1 = __decorate([ __metadata("design:paramtypes", [NbSidebarService,
            NbThemeService,
            ElementRef])
    ], NbSidebarComponent);
NbSidebarComponent.ɵfac = function NbSidebarComponent_Factory(t) { return new (t || NbSidebarComponent)(ɵngcc0.ɵɵdirectiveInject(NbSidebarService), ɵngcc0.ɵɵdirectiveInject(NbThemeService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
NbSidebarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSidebarComponent, selectors: [["nb-sidebar"]], hostVars: 16, hostBindings: function NbSidebarComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("fixed", ctx.fixedValue)("right", ctx.rightValue)("left", ctx.leftValue)("start", ctx.startValue)("end", ctx.endValue)("expanded", ctx.expanded)("collapsed", ctx.collapsed)("compacted", ctx.compacted);
    } }, inputs: { compactedBreakpoints: "compactedBreakpoints", collapsedBreakpoints: "collapsedBreakpoints", right: "right", left: "left", start: "start", end: "end", fixed: "fixed", containerFixed: "containerFixed", state: "state", responsive: "responsive", tag: "tag" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c15, decls: 5, vars: 2, consts: [[1, "main-container"], [1, "scrollable", 3, "click"]], template: function NbSidebarComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c14);
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementStart(2, "div", 1);
        ɵngcc0.ɵɵlistener("click", function NbSidebarComponent_Template_div_click_2_listener($event) { return ctx.onClick($event); });
        ɵngcc0.ɵɵprojection(3, 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵprojection(4, 2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("main-container-fixed", ctx.containerFixedValue);
    } }, styles: ["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;z-index:auto;order:0}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;flex:1}[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0);display:flex;flex-direction:column}[_nghost-%COMP%]   .main-container-fixed[_ngcontent-%COMP%]{position:fixed}.right[_nghost-%COMP%]{margin-right:0;margin-left:auto}[dir=ltr]   .right[_nghost-%COMP%]{order:4}[dir=rtl]   .right[_nghost-%COMP%]{order:0}.end[_nghost-%COMP%]{order:4}[dir=ltr]   .end[_nghost-%COMP%]{margin-right:0;margin-left:auto}[dir=rtl]   .end[_nghost-%COMP%]{margin-left:0;margin-right:auto}.fixed[_nghost-%COMP%]{position:fixed;height:100%;z-index:999;top:0;bottom:0;left:0}.fixed.right[_nghost-%COMP%]{right:0}[dir=ltr]   .fixed.start[_nghost-%COMP%]{left:0}[dir=rtl]   .fixed.start[_nghost-%COMP%]{right:0}[dir=ltr]   .fixed.end[_nghost-%COMP%]{right:0}[dir=rtl]   .fixed.end[_nghost-%COMP%]{left:0}[_nghost-%COMP%]     nb-sidebar-footer{margin-top:auto;display:block}[_nghost-%COMP%]     nb-sidebar-header{display:block}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSidebarComponent, [{
        type: Component,
        args: [{
                selector: 'nb-sidebar',
                template: "\n    <div class=\"main-container\"\n         [class.main-container-fixed]=\"containerFixedValue\">\n      <ng-content select=\"nb-sidebar-header\"></ng-content>\n      <div class=\"scrollable\" (click)=\"onClick($event)\">\n        <ng-content></ng-content>\n      </div>\n      <ng-content select=\"nb-sidebar-footer\"></ng-content>\n    </div>\n  ",
                styles: [":host{display:flex;flex-direction:column;overflow:hidden;z-index:auto;order:0}:host .scrollable{overflow-y:auto;overflow-x:hidden;flex:1}:host .main-container{transform:translate3d(0, 0, 0);display:flex;flex-direction:column}:host .main-container-fixed{position:fixed}:host.right{margin-right:0;margin-left:auto}[dir=ltr] :host.right{order:4}[dir=rtl] :host.right{order:0}:host.end{order:4}[dir=ltr] :host.end{margin-right:0;margin-left:auto}[dir=rtl] :host.end{margin-left:0;margin-right:auto}:host.fixed{position:fixed;height:100%;z-index:999;top:0;bottom:0;left:0}:host.fixed.right{right:0}[dir=ltr] :host.fixed.start{left:0}[dir=rtl] :host.fixed.start{right:0}[dir=ltr] :host.fixed.end{right:0}[dir=rtl] :host.fixed.end{left:0}:host ::ng-deep nb-sidebar-footer{margin-top:auto;display:block}:host ::ng-deep nb-sidebar-header{display:block}\n"]
            }]
    }], function () { return [{ type: NbSidebarService }, { type: NbThemeService }, { type: ɵngcc0.ElementRef }]; }, { fixedValue: [{
            type: HostBinding,
            args: ['class.fixed']
        }], rightValue: [{
            type: HostBinding,
            args: ['class.right']
        }], leftValue: [{
            type: HostBinding,
            args: ['class.left']
        }], startValue: [{
            type: HostBinding,
            args: ['class.start']
        }], endValue: [{
            type: HostBinding,
            args: ['class.end']
        }], compactedBreakpoints: [{
            type: Input
        }], collapsedBreakpoints: [{
            type: Input
        }], expanded: [{
            type: HostBinding,
            args: ['class.expanded']
        }], collapsed: [{
            type: HostBinding,
            args: ['class.collapsed']
        }], compacted: [{
            type: HostBinding,
            args: ['class.compacted']
        }], right: [{
            type: Input
        }], left: [{
            type: Input
        }], start: [{
            type: Input
        }], end: [{
            type: Input
        }], fixed: [{
            type: Input
        }], containerFixed: [{
            type: Input
        }], state: [{
            type: Input
        }], responsive: [{
            type: Input
        }], tag: [{
            type: Input
        }] }); })();
    return NbSidebarComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_SIDEBAR_COMPONENTS = [
    NbSidebarComponent,
    NbSidebarFooterComponent,
    NbSidebarHeaderComponent,
];
var NB_SIDEBAR_PROVIDERS = [
    NbSidebarService,
];
var NbSidebarModule = /** @class */ (function () {
    function NbSidebarModule() {
    }
    NbSidebarModule_1 = NbSidebarModule;
    NbSidebarModule.forRoot = function () {
        return {
            ngModule: NbSidebarModule_1,
            providers: __spreadArrays(NB_SIDEBAR_PROVIDERS),
        };
    };
    var NbSidebarModule_1;
NbSidebarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbSidebarModule });
NbSidebarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbSidebarModule_Factory(t) { return new (t || NbSidebarModule)(); }, imports: [[
            NbSharedModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSidebarModule, { declarations: [NbSidebarComponent,
        NbSidebarFooterComponent,
        NbSidebarHeaderComponent], imports: [NbSharedModule], exports: [NbSidebarComponent,
        NbSidebarFooterComponent,
        NbSidebarHeaderComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSidebarModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                ],
                declarations: __spreadArrays(NB_SIDEBAR_COMPONENTS),
                exports: __spreadArrays(NB_SIDEBAR_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbSidebarModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Specific tab container.
 *
 * ```ts
 * <nb-tab tabTitle="Users"
 *   badgeText="99+"
 *   badgeStatus="danger">
 *   <p>List of <strong>users</strong>.</p>
 * </nb-tab>
 ```
 */
var NbTabComponent = /** @class */ (function () {
    function NbTabComponent() {
        this.activeValue = false;
        this.responsiveValue = false;
        this.disabledValue = false;
        /**
         * Badge status (adds specific styles):
         * 'primary', 'info', 'success', 'warning', 'danger'
         * @param {string} val
         */
        this.badgeStatus = 'basic';
        this.init = false;
    }
    Object.defineProperty(NbTabComponent.prototype, "disabled", {
        /**
         * Item is disabled and cannot be opened.
         * @type {boolean}
         */
        get: function () {
            return this.disabledValue;
        },
        set: function (val) {
            this.disabledValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTabComponent.prototype, "responsive", {
        get: function () {
            return this.responsiveValue;
        },
        /**
         * Show only icons when width is smaller than `tabs-icon-only-max-width`
         * @type {boolean}
         */
        set: function (val) {
            this.responsiveValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTabComponent.prototype, "active", {
        /**
         * Specifies active tab
         * @returns {boolean}
         */
        get: function () {
            return this.activeValue;
        },
        set: function (val) {
            this.activeValue = convertToBoolProperty(val);
            if (this.activeValue) {
                this.init = true;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTabComponent.prototype, "lazyLoad", {
        /**
         * Lazy load content before tab selection
         * TODO: rename, as lazy is by default, and this is more `instant load`
         * @param {boolean} val
         */
        set: function (val) {
            this.init = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTabComponent.prototype, "tabTitle", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTabComponent.prototype, "tabId", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbTabComponent.prototype, "tabIcon", void 0);
    __decorate([
        Input('disabled'),
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbTabComponent.prototype, "disabled", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbTabComponent.prototype, "responsive", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTabComponent.prototype, "route", void 0);
    __decorate([
        HostBinding('class.content-active'),
        __metadata("design:type", Boolean)
    ], NbTabComponent.prototype, "activeValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbTabComponent.prototype, "active", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbTabComponent.prototype, "lazyLoad", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTabComponent.prototype, "badgeText", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTabComponent.prototype, "badgeStatus", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTabComponent.prototype, "badgePosition", void 0);
NbTabComponent.ɵfac = function NbTabComponent_Factory(t) { return new (t || NbTabComponent)(); };
NbTabComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTabComponent, selectors: [["nb-tab"]], hostVars: 4, hostBindings: function NbTabComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("content-active", ctx.activeValue)("disabled", ctx.disabled);
    } }, inputs: { badgeStatus: "badgeStatus", disabled: "disabled", responsive: "responsive", active: "active", lazyLoad: "lazyLoad", tabTitle: "tabTitle", tabId: "tabId", tabIcon: "tabIcon", route: "route", badgeText: "badgeText", badgePosition: "badgePosition" }, ngContentSelectors: _c0, decls: 1, vars: 1, consts: [[4, "ngIf"]], template: function NbTabComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, NbTabComponent_ng_container_0_Template, 2, 0, "ng-container", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.init);
    } }, directives: [ɵngcc2.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTabComponent, [{
        type: Component,
        args: [{
                selector: 'nb-tab',
                template: "\n    <ng-container *ngIf=\"init\">\n      <ng-content></ng-content>\n    </ng-container>\n  "
            }]
    }], function () { return []; }, { activeValue: [{
            type: HostBinding,
            args: ['class.content-active']
        }], badgeStatus: [{
            type: Input
        }], disabled: [{
            type: Input,
            args: ['disabled']
        }, {
            type: HostBinding,
            args: ['class.disabled']
        }], responsive: [{
            type: Input
        }], active: [{
            type: Input
        }], lazyLoad: [{
            type: Input
        }], tabTitle: [{
            type: Input
        }], tabId: [{
            type: Input
        }], tabIcon: [{
            type: Input
        }], route: [{
            type: Input
        }], badgeText: [{
            type: Input
        }], badgePosition: [{
            type: Input
        }] }); })();
    return NbTabComponent;
}());
// TODO: Combine tabset with route-tabset, so that we can:
// - have similar interface
// - easy to migrate from one to another
// - can mix them both (route/content tab)
/**
 *
 * Dynamic tabset component.
 * @stacked-example(Showcase, tabset/tabset-showcase.component)
 *
 * Basic tabset example
 *
 * ```html
 * <nb-tabset>
 *  <nb-tab tabTitle="Simple Tab #1">
 *    Tab content 1
 *  </nb-tab>
 *  <nb-tab tabTitle="Simple Tab #2">
 *    Tab content 2
 *  </nb-tab>
 * </nb-tabset>
 * ```
 *
 * ### Installation
 *
 * Import `NbTabsetModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbTabsetModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * It is also possible to set a badge to a particular tab:
 * @stacked-example(Tab With Badge, tabset/tabset-badge.component)
 *
 * and we can set it to full a width of a parent component
 * @stacked-example(Full Width, tabset/tabset-width.component)
 *
 * `tabIcon` should be used to add an icon to the tab. Icon can also be combined with title.
 * `responsive` tab property if set allows you to hide the title on smaller screens
 * (`tabs-icon-only-max-width` property) for better responsive behaviour. You can open the following example and make
 * your screen smaller - titles will be hidden in the last tabset in the list:
 *
 * @stacked-example(Icon, tabset/tabset-icon.component)
 *
 * It is also possible to disable a tab using `disabled` property:
 * @stacked-example(Disabled Tab, tabset/tabset-disabled.component)
 *
 * @styles
 *
 * tabset-background-color:
 * tabset-border-radius:
 * tabset-shadow:
 * tabset-tab-background-color:
 * tabset-tab-padding:
 * tabset-tab-text-color:
 * tabset-tab-text-font-family:
 * tabset-tab-text-font-size:
 * tabset-tab-text-font-weight:
 * tabset-tab-text-line-height:
 * tabset-tab-text-transform:
 * tabset-tab-underline-width:
 * tabset-tab-underline-color:
 * tabset-tab-active-background-color:
 * tabset-tab-active-text-color:
 * tabset-tab-active-underline-color:
 * tabset-tab-focus-background-color:
 * tabset-tab-focus-text-color:
 * tabset-tab-focus-underline-color:
 * tabset-tab-hover-background-color:
 * tabset-tab-hover-text-color:
 * tabset-tab-hover-underline-color:
 * tabset-tab-disabled-background-color:
 * tabset-tab-disabled-text-color:
 * tabset-tab-disabled-underline-color:
 * tabset-divider-color:
 * tabset-divider-style:
 * tabset-divider-width:
 * tabset-content-background-color:
 * tabset-content-padding:
 * tabset-content-text-color:
 * tabset-content-text-font-family:
 * tabset-content-text-font-size:
 * tabset-content-text-font-weight:
 * tabset-content-text-line-height:
 * tabset-scrollbar-color:
 * tabset-scrollbar-background-color:
 * tabset-scrollbar-width:
 * tabset-tab-text-hide-breakpoint:
 */
var NbTabsetComponent = /** @class */ (function () {
    function NbTabsetComponent(route, changeDetectorRef) {
        this.route = route;
        this.changeDetectorRef = changeDetectorRef;
        this.fullWidthValue = false;
        /**
         * Emits when tab is selected
         * @type EventEmitter<any>
         */
        this.changeTab = new EventEmitter();
    }
    Object.defineProperty(NbTabsetComponent.prototype, "fullWidth", {
        /**
         * Take full width of a parent
         * @param {boolean} val
         */
        set: function (val) {
            this.fullWidthValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    // TODO: refactoring this component, avoid change detection loop
    NbTabsetComponent.prototype.ngAfterContentInit = function () {
        var _this = this;
        this.route.params
            .pipe(map(function (params) {
            return _this.tabs.find(function (tab) { return _this.routeParam ? tab.route === params[_this.routeParam] : tab.active; });
        }), delay(0), map(function (tab) { return tab || _this.tabs.first; }), filter(function (tab) { return !!tab; }))
            .subscribe(function (tabToSelect) {
            _this.selectTab(tabToSelect);
            _this.changeDetectorRef.markForCheck();
        });
    };
    // TODO: navigate to routeParam
    NbTabsetComponent.prototype.selectTab = function (selectedTab) {
        if (!selectedTab.disabled) {
            this.tabs.forEach(function (tab) { return tab.active = tab === selectedTab; });
            this.changeTab.emit(selectedTab);
        }
    };
    __decorate([
        ContentChildren(NbTabComponent),
        __metadata("design:type", QueryList)
    ], NbTabsetComponent.prototype, "tabs", void 0);
    __decorate([
        HostBinding('class.full-width'),
        __metadata("design:type", Boolean)
    ], NbTabsetComponent.prototype, "fullWidthValue", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbTabsetComponent.prototype, "fullWidth", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTabsetComponent.prototype, "routeParam", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbTabsetComponent.prototype, "changeTab", void 0);
    NbTabsetComponent = __decorate([ __metadata("design:paramtypes", [ActivatedRoute,
            ChangeDetectorRef])
    ], NbTabsetComponent);
NbTabsetComponent.ɵfac = function NbTabsetComponent_Factory(t) { return new (t || NbTabsetComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc5.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbTabsetComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTabsetComponent, selectors: [["nb-tabset"]], contentQueries: function NbTabsetComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbTabComponent, false);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tabs = _t);
    } }, hostVars: 2, hostBindings: function NbTabsetComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("full-width", ctx.fullWidthValue);
    } }, inputs: { fullWidth: "fullWidth", routeParam: "routeParam" }, outputs: { changeTab: "changeTab" }, ngContentSelectors: _c17, decls: 3, vars: 1, consts: [[1, "tabset"], ["class", "tab", 3, "responsive", "active", "disabled", "click", "keyup.space", "keyup.enter", 4, "ngFor", "ngForOf"], [1, "tab", 3, "click", "keyup.space", "keyup.enter"], ["href", "", "tabindex", "-1", 1, "tab-link", 3, "click"], [3, "config", 4, "ngIf"], ["class", "tab-text", 4, "ngIf"], [3, "text", "status", "position", 4, "ngIf"], [3, "config"], [1, "tab-text"], [3, "text", "status", "position"]], template: function NbTabsetComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c16);
        ɵngcc0.ɵɵelementStart(0, "ul", 0);
        ɵngcc0.ɵɵtemplate(1, NbTabsetComponent_li_1_Template, 5, 10, "li", 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵprojection(2);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.tabs);
    } }, directives: function () { return [ɵngcc2.NgForOf, ɵngcc2.NgIf, NbIconComponent,
        NbBadgeComponent]; }, styles: ["[_nghost-%COMP%]{display:block}.full-width[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]{justify-content:space-around}[_nghost-%COMP%]     nb-tab{flex:1;-ms-flex:1 1 auto;overflow:auto;display:none}[_nghost-%COMP%]     nb-tab.content-active{display:block}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]{display:flex;flex-direction:row;list-style-type:none;margin:0;padding:0}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{margin-bottom:-1px;text-align:center;position:relative}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{display:block}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;position:relative;text-decoration:none}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{position:absolute;content:'';width:100%;border-radius:3px;bottom:-2px;left:0}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{vertical-align:middle}[dir=ltr]   [_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-right:.5rem}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTabsetComponent, [{
        type: Component,
        args: [{
                selector: 'nb-tabset',
                template: "\n    <ul class=\"tabset\">\n      <li *ngFor=\"let tab of tabs\"\n          (click)=\"selectTab(tab)\"\n          (keyup.space)=\"selectTab(tab)\"\n          (keyup.enter)=\"selectTab(tab)\"\n          [class.responsive]=\"tab.responsive\"\n          [class.active]=\"tab.active\"\n          [class.disabled]=\"tab.disabled\"\n          [attr.tabindex]=\"tab.disabled ? -1 : 0\"\n          class=\"tab\">\n        <a href (click)=\"$event.preventDefault()\" tabindex=\"-1\" class=\"tab-link\">\n          <nb-icon *ngIf=\"tab.tabIcon\" [config]=\"tab.tabIcon\"></nb-icon>\n          <span *ngIf=\"tab.tabTitle\" class=\"tab-text\">{{ tab.tabTitle }}</span>\n        </a>\n        <nb-badge *ngIf=\"tab.badgeText\"\n          [text]=\"tab.badgeText\"\n          [status]=\"tab.badgeStatus\"\n          [position]=\"tab.badgePosition\">\n        </nb-badge>\n      </li>\n    </ul>\n    <ng-content select=\"nb-tab\"></ng-content>\n  ",
                styles: [":host{display:block}:host.full-width .tabset{justify-content:space-around}:host ::ng-deep nb-tab{flex:1;-ms-flex:1 1 auto;overflow:auto;display:none}:host ::ng-deep nb-tab.content-active{display:block}:host .tabset{display:flex;flex-direction:row;list-style-type:none;margin:0;padding:0}:host .tabset .tab{margin-bottom:-1px;text-align:center;position:relative}:host .tabset .tab.active a::before{display:block}:host .tabset .tab a{display:flex;position:relative;text-decoration:none}:host .tabset .tab a::before{position:absolute;content:'';width:100%;border-radius:3px;bottom:-2px;left:0}:host .tabset .tab a nb-icon{vertical-align:middle}[dir=ltr] :host .tabset .tab a nb-icon+span{margin-left:.5rem}[dir=rtl] :host .tabset .tab a nb-icon+span{margin-right:.5rem}\n"]
            }]
    }], function () { return [{ type: ɵngcc5.ActivatedRoute }, { type: ɵngcc0.ChangeDetectorRef }]; }, { fullWidthValue: [{
            type: HostBinding,
            args: ['class.full-width']
        }], changeTab: [{
            type: Output
        }], fullWidth: [{
            type: Input
        }], tabs: [{
            type: ContentChildren,
            args: [NbTabComponent]
        }], routeParam: [{
            type: Input
        }] }); })();
    return NbTabsetComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Badge is a simple labeling component.
 * It can be used to add additional information to any content or highlight unread items.
 *
 * Element is absolute positioned, so parent should be
 * [positioned element](https://developer.mozilla.org/en-US/docs/Web/CSS/position).
 * It means parent `position` should be set to anything except `static`, e.g. `relative`,
 * `absolute`, `fixed`, or `sticky`.
 *
 * ### Installation
 *
 * Import `NbBadgeModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbBadgeModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Badge with default position and status(color):
 *
 * ```html
 * <nb-badge text="badgeText"></nb-badge>
 * ```
 *
 * For example, badge can be placed into nb-card header:
 * @stacked-example(Showcase, badge/badge-showcase.component)
 *
 * Badge located on the bottom right with warning status:
 *
 * ```html
 * <nb-badge text="badgeText" status="warning" position="bottom right">
 * </nb-badge>
 * ```
 *
 * @styles
 *
 * badge-border-radius:
 * badge-text-font-family:
 * badge-text-font-size:
 * badge-text-font-weight:
 * badge-text-line-height:
 * badge-padding:
 * badge-basic-background-color:
 * badge-basic-text-color:
 * badge-primary-background-color:
 * badge-primary-text-color:
 * badge-success-background-color:
 * badge-success-text-color:
 * badge-info-background-color:
 * badge-info-text-color:
 * badge-warning-background-color:
 * badge-warning-text-color:
 * badge-danger-background-color:
 * badge-danger-text-color:
 * badge-control-background-color:
 * badge-control-text-color:
 */
var NbBadgeComponent = /** @class */ (function () {
    function NbBadgeComponent() {
        /**
         * Text to display
         * @type string
         */
        this.text = '';
        this._defaultPosition = 'top right';
        this._position = this._defaultPosition;
        this._status = 'basic';
    }
    Object.defineProperty(NbBadgeComponent.prototype, "position", {
        /**
         * Badge position
         *
         * Can be set to any class or to one of predefined positions:
         * 'top left', 'top right', 'bottom left', 'bottom right',
         * 'top start', 'top end', 'bottom start', 'bottom end'
         * @type string
         */
        get: function () {
            return this._position;
        },
        set: function (value) {
            this._position = value || this._defaultPosition;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "status", {
        /**
         * Badge status (adds specific styles):
         * 'basic', 'primary', 'info', 'success', 'warning', 'danger', 'control'
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbBadge');
                value = 'basic';
            }
            this._status = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "top", {
        get: function () {
            return this.position.includes('top');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "right", {
        get: function () {
            return this.position.includes('right');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "bottom", {
        get: function () {
            return this.position.includes('bottom');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "left", {
        get: function () {
            return this.position.includes('left');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "start", {
        get: function () {
            return this.position.includes('start');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBadgeComponent.prototype, "end", {
        get: function () {
            return this.position.includes('end');
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbBadgeComponent.prototype, "text", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbBadgeComponent.prototype, "position", null);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbBadgeComponent.prototype, "status", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "control", null);
    __decorate([
        HostBinding('class.position-top'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "top", null);
    __decorate([
        HostBinding('class.position-right'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "right", null);
    __decorate([
        HostBinding('class.position-bottom'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "bottom", null);
    __decorate([
        HostBinding('class.position-left'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "left", null);
    __decorate([
        HostBinding('class.position-start'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "start", null);
    __decorate([
        HostBinding('class.position-end'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbBadgeComponent.prototype, "end", null);
NbBadgeComponent.ɵfac = function NbBadgeComponent_Factory(t) { return new (t || NbBadgeComponent)(); };
NbBadgeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbBadgeComponent, selectors: [["nb-badge"]], hostVars: 26, hostBindings: function NbBadgeComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("status-primary", ctx.primary)("status-success", ctx.success)("status-info", ctx.info)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control)("position-top", ctx.top)("position-right", ctx.right)("position-bottom", ctx.bottom)("position-left", ctx.left)("position-start", ctx.start)("position-end", ctx.end);
    } }, inputs: { text: "text", position: "position", status: "status" }, decls: 1, vars: 1, template: function NbBadgeComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtext(0);
    } if (rf & 2) {
        ɵngcc0.ɵɵtextInterpolate(ctx.text);
    } }, styles: ["[_nghost-%COMP%]{position:absolute;text-align:center;white-space:nowrap;vertical-align:baseline}.position-top[_nghost-%COMP%]{top:0}.position-right[_nghost-%COMP%]{right:0}.position-bottom[_nghost-%COMP%]{bottom:0}.position-left[_nghost-%COMP%]{left:0}[dir=ltr]   .position-start[_nghost-%COMP%]{left:0}[dir=rtl]   .position-start[_nghost-%COMP%]{right:0}[dir=ltr]   .position-end[_nghost-%COMP%]{right:0}[dir=rtl]   .position-end[_nghost-%COMP%]{left:0}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbBadgeComponent, [{
        type: Component,
        args: [{
                selector: 'nb-badge',
                template: "{{text}}",
                styles: [":host{position:absolute;text-align:center;white-space:nowrap;vertical-align:baseline}:host(.position-top){top:0}:host(.position-right){right:0}:host(.position-bottom){bottom:0}:host(.position-left){left:0}[dir=ltr] :host(.position-start){left:0}[dir=rtl] :host(.position-start){right:0}[dir=ltr] :host(.position-end){right:0}[dir=rtl] :host(.position-end){left:0}\n"]
            }]
    }], function () { return []; }, { text: [{
            type: Input
        }], position: [{
            type: Input
        }], status: [{
            type: Input
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], top: [{
            type: HostBinding,
            args: ['class.position-top']
        }], right: [{
            type: HostBinding,
            args: ['class.position-right']
        }], bottom: [{
            type: HostBinding,
            args: ['class.position-bottom']
        }], left: [{
            type: HostBinding,
            args: ['class.position-left']
        }], start: [{
            type: HostBinding,
            args: ['class.position-start']
        }], end: [{
            type: HostBinding,
            args: ['class.position-end']
        }] }); })();
    return NbBadgeComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbBadgeModule = /** @class */ (function () {
    function NbBadgeModule() {
    }
NbBadgeModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbBadgeModule });
NbBadgeModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbBadgeModule_Factory(t) { return new (t || NbBadgeModule)(); } });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbBadgeModule, { declarations: [NbBadgeComponent], exports: [NbBadgeComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbBadgeModule, [{
        type: NgModule,
        args: [{
                exports: [NbBadgeComponent],
                declarations: [NbBadgeComponent]
            }]
    }], function () { return []; }, null); })();
    return NbBadgeModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_TABSET_COMPONENTS = [
    NbTabsetComponent,
    NbTabComponent,
];
var NbTabsetModule = /** @class */ (function () {
    function NbTabsetModule() {
    }
NbTabsetModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbTabsetModule });
NbTabsetModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbTabsetModule_Factory(t) { return new (t || NbTabsetModule)(); }, imports: [[
            NbSharedModule,
            NbBadgeModule,
            NbIconModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTabsetModule, { declarations: [NbTabsetComponent,
        NbTabComponent], imports: [NbSharedModule,
        NbBadgeModule,
        NbIconModule], exports: [NbTabsetComponent,
        NbTabComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTabsetModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbBadgeModule,
                    NbIconModule,
                ],
                declarations: __spreadArrays(NB_TABSET_COMPONENTS),
                exports: __spreadArrays(NB_TABSET_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbTabsetModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Represents a component showing a user avatar (picture) with a user name on the right.
 * @stacked-example(Showcase, user/user-showcase.component)
 *
 * ```ts
 *   <nb-user name="John Doe" title="Engineer"></nb-user>
 * ```
 *
 * ### Installation
 *
 * Import `NbUserModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbUserModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Available in multiple sizes:
 * @stacked-example(Multiple Sizes, user/user-sizes.component)
 *
 *
 * You can hide unnecessary captions (name, title or both):
 * @stacked-example(Hide captions in user component, user/user-hide-captions.component)
 *
 *
 * You can set custom avatar background-color, user image (as link or BASE64 string) and disable user initials:
 * @stacked-example(Avatar image settings, user/user-avatar-settings.component)
 *
 * Component shape could be controlled with `shape` input.
 * @stacked-example(Shapes, user/user-shape.component)
 *
 * @styles
 *
 * user-picture-box-background-color:
 * user-picture-box-border-color:
 * user-picture-box-border-width:
 * user-initials-text-color:
 * user-initials-text-font-family:
 * user-initials-text-font-weight:
 * user-name-text-color:
 * user-name-text-font-family:
 * user-name-text-font-weight:
 * user-title-text-color:
 * user-title-text-font-family:
 * user-title-text-font-weight:
 * user-rectangle-border-radius:
 * user-semi-round-border-radius:
 * user-round-border-radius:
 * user-tiny-height:
 * user-tiny-width:
 * user-tiny-initials-text-font-size:
 * user-tiny-initials-text-line-height:
 * user-tiny-name-text-font-size:
 * user-tiny-name-text-line-height:
 * user-tiny-title-text-font-size:
 * user-tiny-title-text-line-height:
 * user-small-height:
 * user-small-width:
 * user-small-initials-text-font-size:
 * user-small-initials-text-line-height:
 * user-small-name-text-font-size:
 * user-small-name-text-line-height:
 * user-small-title-text-font-size:
 * user-small-title-text-line-height:
 * user-medium-height:
 * user-medium-width:
 * user-medium-initials-text-font-size:
 * user-medium-initials-text-line-height:
 * user-medium-name-text-font-size:
 * user-medium-name-text-line-height:
 * user-medium-title-text-font-size:
 * user-medium-title-text-line-height:
 * user-large-height:
 * user-large-width:
 * user-large-initials-text-font-size:
 * user-large-initials-text-line-height:
 * user-large-name-text-font-size:
 * user-large-name-text-line-height:
 * user-large-title-text-font-size:
 * user-large-title-text-line-height:
 * user-giant-height:
 * user-giant-width:
 * user-giant-initials-text-font-size:
 * user-giant-initials-text-line-height:
 * user-giant-name-text-font-size:
 * user-giant-name-text-line-height:
 * user-giant-title-text-font-size:
 * user-giant-title-text-line-height:
 */
var NbUserComponent = /** @class */ (function () {
    function NbUserComponent(domSanitizer) {
        this.domSanitizer = domSanitizer;
        /**
         * Specifies a name to be shown on the right of a user picture
         * @type string
         */
        this.name = 'Anonymous';
        /**
         * Size of the component.
         * Possible values: `tiny`, `small`, `medium` (default), `large`, 'giant'.
         */
        this.size = 'medium';
        /**
         * Shape of the picture box.
         * Possible values: `rectangle`, `semi-round`, `round`.
         */
        this.shape = 'round';
        this._showName = true;
        this._showTitle = true;
        this._showInitials = true;
        /**
         * Badge status (adds specific styles):
         * `primary`, `info`, `success`, `warning`, `danger`
         * @param {string} val
         */
        this.badgeStatus = 'basic';
    }
    Object.defineProperty(NbUserComponent.prototype, "picture", {
        /**
         * Absolute path to a user picture or base64 image.
         * User name initials will be shown if no picture specified (JD for John Doe).
         * @type string
         */
        set: function (value) {
            this.imageBackgroundStyle = value ? this.domSanitizer.bypassSecurityTrustStyle("url(" + value + ")") : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "showName", {
        /**
         * Whether to show a user name or not
         */
        get: function () {
            return this._showName;
        },
        set: function (val) {
            this._showName = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "showTitle", {
        /**
         * Whether to show a user title or not
         * @type boolean
         */
        get: function () {
            return this._showTitle;
        },
        set: function (val) {
            this._showTitle = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "showInitials", {
        /**
         * Whether to show a user initials (if no picture specified) or not
         * @type boolean
         */
        get: function () {
            return this._showInitials;
        },
        set: function (val) {
            this._showInitials = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "onlyPicture", {
        /**
         * Whether to show only a picture or also show the name and title
         * @type boolean
         */
        get: function () {
            return !this.showName && !this.showTitle;
        },
        set: function (val) {
            this.showName = this.showTitle = !convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "rectangle", {
        get: function () {
            return this.shape === 'rectangle';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "semiRound", {
        get: function () {
            return this.shape === 'semi-round';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbUserComponent.prototype, "round", {
        get: function () {
            return this.shape === 'round';
        },
        enumerable: true,
        configurable: true
    });
    NbUserComponent.prototype.getInitials = function () {
        if (this.name) {
            var names = this.name.split(' ');
            return names.map(function (n) { return n.charAt(0); }).splice(0, 2).join('').toUpperCase();
        }
        return '';
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "name", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "title", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbUserComponent.prototype, "picture", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "color", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "shape", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbUserComponent.prototype, "showName", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbUserComponent.prototype, "showTitle", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbUserComponent.prototype, "showInitials", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbUserComponent.prototype, "onlyPicture", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "badgeText", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "badgeStatus", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbUserComponent.prototype, "badgePosition", void 0);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.shape-rectangle'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "rectangle", null);
    __decorate([
        HostBinding('class.shape-semi-round'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "semiRound", null);
    __decorate([
        HostBinding('class.shape-round'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbUserComponent.prototype, "round", null);
    NbUserComponent = __decorate([ __metadata("design:paramtypes", [DomSanitizer])
    ], NbUserComponent);
NbUserComponent.ɵfac = function NbUserComponent_Factory(t) { return new (t || NbUserComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer)); };
NbUserComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbUserComponent, selectors: [["nb-user"]], hostVars: 16, hostBindings: function NbUserComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("shape-rectangle", ctx.rectangle)("shape-semi-round", ctx.semiRound)("shape-round", ctx.round);
    } }, inputs: { name: "name", size: "size", shape: "shape", badgeStatus: "badgeStatus", picture: "picture", showName: "showName", showTitle: "showTitle", showInitials: "showInitials", onlyPicture: "onlyPicture", title: "title", color: "color", badgeText: "badgeText", badgePosition: "badgePosition" }, decls: 6, vars: 4, consts: [[1, "user-container"], ["class", "user-picture image", 3, "background-image", 4, "ngIf"], ["class", "user-picture initials", 3, "background-color", 4, "ngIf"], [1, "info-container"], ["class", "user-name", 4, "ngIf"], ["class", "user-title", 4, "ngIf"], [1, "user-picture", "image"], [3, "text", "status", "position", 4, "ngIf"], [3, "text", "status", "position"], [1, "user-picture", "initials"], [4, "ngIf"], [1, "user-name"], [1, "user-title"]], template: function NbUserComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtemplate(1, NbUserComponent_div_1_Template, 2, 3, "div", 1);
        ɵngcc0.ɵɵtemplate(2, NbUserComponent_div_2_Template, 3, 4, "div", 2);
        ɵngcc0.ɵɵelementStart(3, "div", 3);
        ɵngcc0.ɵɵtemplate(4, NbUserComponent_div_4_Template, 2, 1, "div", 4);
        ɵngcc0.ɵɵtemplate(5, NbUserComponent_div_5_Template, 2, 1, "div", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.imageBackgroundStyle);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.imageBackgroundStyle);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showName && ctx.name);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showTitle && ctx.title);
    } }, directives: [ɵngcc2.NgIf, NbBadgeComponent], styles: ["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .user-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}[_nghost-%COMP%]   .user-picture[_ngcontent-%COMP%]{position:relative;flex-shrink:0}[_nghost-%COMP%]   .user-picture.image[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat}[_nghost-%COMP%]   .user-picture.initials[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[dir=rtl]   [_nghost-%COMP%]   .user-name[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .user-title[_ngcontent-%COMP%]{text-align:right}[dir=ltr]   [_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]{margin-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]{margin-right:.5rem}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbUserComponent, [{
        type: Component,
        args: [{
                selector: 'nb-user',
                template: "<div class=\"user-container\">\n  <div *ngIf=\"imageBackgroundStyle\" class=\"user-picture image\" [style.background-image]=\"imageBackgroundStyle\">\n    <nb-badge *ngIf=\"badgeText\" [text]=\"badgeText\" [status]=\"badgeStatus\" [position]=\"badgePosition\"></nb-badge>\n  </div>\n  <div *ngIf=\"!imageBackgroundStyle\" class=\"user-picture initials\" [style.background-color]=\"color\">\n    <ng-container *ngIf=\"showInitials\">\n      {{ getInitials() }}\n    </ng-container>\n    <nb-badge *ngIf=\"badgeText\" [text]=\"badgeText\" [status]=\"badgeStatus\" [position]=\"badgePosition\"></nb-badge>\n  </div>\n\n  <div class=\"info-container\">\n    <div *ngIf=\"showName && name\" class=\"user-name\">{{ name }}</div>\n    <div *ngIf=\"showTitle && title\" class=\"user-title\">{{ title }}</div>\n  </div>\n</div>\n",
                styles: [":host{display:flex}:host .user-container{position:relative;display:flex;align-items:center}:host .user-picture{position:relative;flex-shrink:0}:host .user-picture.image{background-size:cover;background-repeat:no-repeat}:host .user-picture.initials{display:flex;align-items:center;justify-content:center}[dir=rtl] :host .user-name,[dir=rtl] :host .user-title{text-align:right}[dir=ltr] :host .info-container{margin-left:.5rem}[dir=rtl] :host .info-container{margin-right:.5rem}\n"]
            }]
    }], function () { return [{ type: ɵngcc4.DomSanitizer }]; }, { name: [{
            type: Input
        }], size: [{
            type: Input
        }], shape: [{
            type: Input
        }], badgeStatus: [{
            type: Input
        }], picture: [{
            type: Input
        }], showName: [{
            type: Input
        }], showTitle: [{
            type: Input
        }], showInitials: [{
            type: Input
        }], onlyPicture: [{
            type: Input
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], rectangle: [{
            type: HostBinding,
            args: ['class.shape-rectangle']
        }], semiRound: [{
            type: HostBinding,
            args: ['class.shape-semi-round']
        }], round: [{
            type: HostBinding,
            args: ['class.shape-round']
        }], title: [{
            type: Input
        }], color: [{
            type: Input
        }], badgeText: [{
            type: Input
        }], badgePosition: [{
            type: Input
        }] }); })();
    return NbUserComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_USER_COMPONENTS = [
    NbUserComponent,
];
var NbUserModule = /** @class */ (function () {
    function NbUserModule() {
    }
NbUserModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbUserModule });
NbUserModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbUserModule_Factory(t) { return new (t || NbUserModule)(); }, imports: [[
            NbSharedModule,
            NbBadgeModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbUserModule, { declarations: [NbUserComponent], imports: [NbSharedModule,
        NbBadgeModule], exports: [NbUserComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbUserModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbBadgeModule,
                ],
                declarations: __spreadArrays(NB_USER_COMPONENTS),
                exports: __spreadArrays(NB_USER_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbUserModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Action item, display a link with an icon, or any other content provided instead.
 */
var NbActionComponent = /** @class */ (function () {
    function NbActionComponent() {
        /**
         * Optional title for mouseover
         * @type string
         */
        this.title = '';
        this._disabled = false;
        /**
         * Badge status (adds specific styles):
         * 'primary', 'info', 'success', 'warning', 'danger'
         * @param {string} val
         */
        this.badgeStatus = 'basic';
    }
    Object.defineProperty(NbActionComponent.prototype, "disabled", {
        /**
         * Visually disables the item
         * @type boolean
         */
        get: function () {
            return this._disabled;
        },
        set: function (value) {
            this._disabled = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbActionComponent.prototype, "link", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbActionComponent.prototype, "href", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbActionComponent.prototype, "title", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbActionComponent.prototype, "icon", void 0);
    __decorate([
        Input(),
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbActionComponent.prototype, "disabled", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbActionComponent.prototype, "badgeText", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbActionComponent.prototype, "badgeStatus", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbActionComponent.prototype, "badgePosition", void 0);
NbActionComponent.ɵfac = function NbActionComponent_Factory(t) { return new (t || NbActionComponent)(); };
NbActionComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbActionComponent, selectors: [["nb-action"]], hostVars: 2, hostBindings: function NbActionComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("disabled", ctx.disabled);
    } }, inputs: { title: "title", badgeStatus: "badgeStatus", disabled: "disabled", link: "link", href: "href", icon: "icon", badgeText: "badgeText", badgePosition: "badgePosition" }, ngContentSelectors: _c0, decls: 4, vars: 3, consts: [[4, "ngIf", "ngIfElse"], ["projectedContent", ""], [3, "text", "status", "position", 4, "ngIf"], ["class", "icon-container", 3, "routerLink", "title", 4, "ngIf"], ["class", "icon-container", 3, "href", "title", 4, "ngIf"], ["class", "icon-container", "href", "#", 3, "title", "click", 4, "ngIf"], [1, "icon-container", 3, "routerLink", "title"], [3, "config"], [1, "icon-container", 3, "href", "title"], ["href", "#", 1, "icon-container", 3, "title", "click"], [3, "text", "status", "position"]], template: function NbActionComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, NbActionComponent_ng_container_0_Template, 4, 3, "ng-container", 0);
        ɵngcc0.ɵɵtemplate(1, NbActionComponent_ng_template_1_Template, 1, 0, "ng-template", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵtemplate(3, NbActionComponent_nb_badge_3_Template, 1, 3, "nb-badge", 2);
    } if (rf & 2) {
        var _r1 = ɵngcc0.ɵɵreference(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.icon)("ngIfElse", _r1);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.badgeText);
    } }, directives: [ɵngcc2.NgIf, ɵngcc5.RouterLinkWithHref, NbIconComponent,
        NbBadgeComponent], styles: ["[_nghost-%COMP%]{background:transparent;display:flex;align-items:center;position:relative}.disabled[_nghost-%COMP%]{cursor:not-allowed}.disabled[_nghost-%COMP%]   a[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:not-allowed}nb-actions.full-width[_nghost-%COMP%], nb-actions.full-width   [_nghost-%COMP%]{justify-content:center;width:100%}a.icon-container[_ngcontent-%COMP%]:hover, a.icon-container[_ngcontent-%COMP%]:focus{text-decoration:none}nb-icon[_ngcontent-%COMP%]:hover{cursor:pointer}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbActionComponent, [{
        type: Component,
        args: [{
                selector: 'nb-action',
                template: "\n    <ng-container *ngIf=\"icon; else projectedContent\">\n      <a class=\"icon-container\"\n         [routerLink]=\"link\"\n         [title]=\"title\"\n         *ngIf=\"link\">\n        <nb-icon [config]=\"icon\"></nb-icon>\n      </a>\n      <a class=\"icon-container\"\n         [href]=\"href\"\n         [title]=\"title\"\n         *ngIf=\"href && !link\">\n        <nb-icon [config]=\"icon\"></nb-icon>\n      </a>\n      <a class=\"icon-container\"\n         href=\"#\"\n         [title]=\"title\"\n         *ngIf=\"!href && !link\"\n         (click)=\"$event.preventDefault()\">\n        <nb-icon [config]=\"icon\"></nb-icon>\n      </a>\n    </ng-container>\n\n    <ng-template #projectedContent>\n      <ng-content></ng-content>\n    </ng-template>\n\n    <nb-badge *ngIf=\"badgeText\"\n              [text]=\"badgeText\"\n              [status]=\"badgeStatus\"\n              [position]=\"badgePosition\">\n    </nb-badge>\n  ",
                styles: [":host{background:transparent;display:flex;align-items:center;position:relative}:host(.disabled){cursor:not-allowed}:host(.disabled) a,:host(.disabled) nb-icon{cursor:not-allowed}:host-context(nb-actions.full-width){justify-content:center;width:100%}a.icon-container:hover,a.icon-container:focus{text-decoration:none}nb-icon:hover{cursor:pointer}\n"]
            }]
    }], function () { return []; }, { title: [{
            type: Input
        }], badgeStatus: [{
            type: Input
        }], disabled: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.disabled']
        }], link: [{
            type: Input
        }], href: [{
            type: Input
        }], icon: [{
            type: Input
        }], badgeText: [{
            type: Input
        }], badgePosition: [{
            type: Input
        }] }); })();
    return NbActionComponent;
}());
/**
 * Shows a horizontal list of actions, available in multiple sizes.
 * Aligns items vertically.
 *
 * @stacked-example(Showcase, action/action-showcase.component)
 *
 * Basic actions setup:
 * ```html
 * <nb-actions size="small">
 *   <nb-action icon="nb-search"></nb-action>
 *   <nb-action icon="nb-power-circled"></nb-action>
 *   <nb-action icon="nb-person"></nb-action>
 * </nb-actions>
 * ```
 * ### Installation
 *
 * Import `NbActionsModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbActionsModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Multiple sizes example:
 * @stacked-example(Multiple Sizes, action/action-sizes.component)
 *
 * It is also possible to specify a `badge` value:
 *
 * @stacked-example(Action Badge, action/action-badge.component)
 *
 * and we can set it to full a width of a parent component
 * @stacked-example(Full Width, action/action-width.component)
 *
 * @styles
 *
 * actions-background-color:
 * actions-divider-color:
 * actions-divider-style:
 * actions-divider-width:
 * actions-icon-color:
 * actions-text-color:
 * actions-text-font-family:
 * actions-text-font-weight:
 * actions-text-line-height:
 * actions-disabled-icon-color:
 * actions-disabled-text-color:
 * actions-tiny-height:
 * actions-tiny-icon-height:
 * actions-tiny-padding:
 * actions-tiny-text-font-size:
 * actions-small-height:
 * actions-small-icon-height:
 * actions-small-padding:
 * actions-small-text-font-size:
 * actions-medium-height:
 * actions-medium-icon-height:
 * actions-medium-padding:
 * actions-medium-text-font-size:
 * actions-large-height:
 * actions-large-icon-height:
 * actions-large-padding:
 * actions-large-text-font-size:
 * actions-giant-height:
 * actions-giant-icon-height:
 * actions-giant-padding:
 * actions-giant-text-font-size:
 */
var NbActionsComponent = /** @class */ (function () {
    function NbActionsComponent() {
        this._size = 'small';
        this._fullWidth = false;
    }
    Object.defineProperty(NbActionsComponent.prototype, "size", {
        /**
         * Size of the component: 'tiny', 'small' (default), 'medium', 'large', 'giant'
         */
        get: function () {
            return this._size;
        },
        set: function (value) {
            this._size = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbActionsComponent.prototype, "fullWidth", {
        /**
         * Component will fill full width of the container
         */
        get: function () {
            return this._fullWidth;
        },
        set: function (value) {
            this._fullWidth = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbActionsComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbActionsComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbActionsComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbActionsComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbActionsComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbActionsComponent.prototype, "size", null);
    __decorate([
        Input(),
        HostBinding('class.full-width'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbActionsComponent.prototype, "fullWidth", null);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbActionsComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbActionsComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbActionsComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbActionsComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbActionsComponent.prototype, "giant", null);
NbActionsComponent.ɵfac = function NbActionsComponent_Factory(t) { return new (t || NbActionsComponent)(); };
NbActionsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbActionsComponent, selectors: [["nb-actions"]], hostVars: 12, hostBindings: function NbActionsComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("full-width", ctx.fullWidth)("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant);
    } }, inputs: { size: "size", fullWidth: "fullWidth" }, ngContentSelectors: _c19, decls: 1, vars: 0, template: function NbActionsComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c18);
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%]{display:flex;align-items:center}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbActionsComponent, [{
        type: Component,
        args: [{
                selector: 'nb-actions',
                template: "\n    <ng-content select=\"nb-action\"></ng-content>\n  ",
                styles: [":host{display:flex;align-items:center}\n"]
            }]
    }], function () { return []; }, { size: [{
            type: Input
        }], fullWidth: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.full-width']
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }] }); })();
    return NbActionsComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_ACTIONS_COMPONENTS = [
    NbActionComponent,
    NbActionsComponent,
];
var NbActionsModule = /** @class */ (function () {
    function NbActionsModule() {
    }
NbActionsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbActionsModule });
NbActionsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbActionsModule_Factory(t) { return new (t || NbActionsModule)(); }, imports: [[
            NbSharedModule,
            NbBadgeModule,
            NbIconModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbActionsModule, { declarations: [NbActionComponent,
        NbActionsComponent], imports: [NbSharedModule,
        NbBadgeModule,
        NbIconModule], exports: [NbActionComponent,
        NbActionsComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbActionsModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbBadgeModule,
                    NbIconModule,
                ],
                declarations: __spreadArrays(NB_ACTIONS_COMPONENTS),
                exports: __spreadArrays(NB_ACTIONS_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbActionsModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Search component service, connects your code to a page-level search component.
 */
var NbSearchService = /** @class */ (function () {
    function NbSearchService() {
        this.searchSubmittings$ = new Subject();
        this.searchActivations$ = new Subject();
        this.searchDeactivations$ = new Subject();
        this.searchInput$ = new Subject();
    }
    /***
     * Activate (open) search component
     * @param {string} searchType
     * @param {string} tag
     */
    NbSearchService.prototype.activateSearch = function (searchType, tag) {
        this.searchActivations$.next({ searchType: searchType, tag: tag });
    };
    /**
     * Deactibate (close) search component
     * @param {string} searchType
     * @param {string} tag
     */
    NbSearchService.prototype.deactivateSearch = function (searchType, tag) {
        this.searchDeactivations$.next({ searchType: searchType, tag: tag });
    };
    /**
     * Trigger search submit
     * @param {string} term
     * @param {string} tag
     */
    NbSearchService.prototype.submitSearch = function (term, tag) {
        this.searchSubmittings$.next({ term: term, tag: tag });
    };
    /**
     * Trigger search submit by input event
     * @param {string} term
     * @param {string} tag
     */
    NbSearchService.prototype.searchInput = function (term, tag) {
        this.searchInput$.next({ term: term, tag: tag });
    };
    /**
     * Subscribe to 'activate' event
     * @returns Observable<{searchType: string; tag?: string}>
     */
    NbSearchService.prototype.onSearchActivate = function () {
        return this.searchActivations$.pipe(share());
    };
    /**
     * Subscribe to 'deactivate' event
     * @returns Observable<{searchType: string; tag?: string}>
     */
    NbSearchService.prototype.onSearchDeactivate = function () {
        return this.searchDeactivations$.pipe(share());
    };
    /**
     * Subscribe to 'submit' event (when submit button clicked)
     * @returns Observable<{term: string; tag?: string}>
     */
    NbSearchService.prototype.onSearchSubmit = function () {
        return this.searchSubmittings$.pipe(share());
    };
    /**
     * Subscribe to input event
     * @returns Observable<{term: string; tag?: string}>
     */
    NbSearchService.prototype.onSearchInput = function () {
        return this.searchInput$.pipe(share());
    };
NbSearchService.ɵfac = function NbSearchService_Factory(t) { return new (t || NbSearchService)(); };
NbSearchService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbSearchService, factory: function (t) { return NbSearchService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSearchService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbSearchService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * search-field-component is used under the hood by nb-search component
 * can't be used itself
 */
var NbSearchFieldComponent = /** @class */ (function () {
    function NbSearchFieldComponent() {
        this.show = false;
        this.close = new EventEmitter();
        this.search = new EventEmitter();
        this.searchInput = new EventEmitter();
    }
    NbSearchFieldComponent_1 = NbSearchFieldComponent;
    Object.defineProperty(NbSearchFieldComponent.prototype, "showClass", {
        get: function () {
            return this.show;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSearchFieldComponent.prototype, "modalZoomin", {
        get: function () {
            return this.type === NbSearchFieldComponent_1.TYPE_MODAL_ZOOMIN;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSearchFieldComponent.prototype, "rotateLayout", {
        get: function () {
            return this.type === NbSearchFieldComponent_1.TYPE_ROTATE_LAYOUT;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSearchFieldComponent.prototype, "modalMove", {
        get: function () {
            return this.type === NbSearchFieldComponent_1.TYPE_MODAL_MOVE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSearchFieldComponent.prototype, "curtain", {
        get: function () {
            return this.type === NbSearchFieldComponent_1.TYPE_CURTAIN;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSearchFieldComponent.prototype, "columnCurtain", {
        get: function () {
            return this.type === NbSearchFieldComponent_1.TYPE_COLUMN_CURTAIN;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSearchFieldComponent.prototype, "modalDrop", {
        get: function () {
            return this.type === NbSearchFieldComponent_1.TYPE_MODAL_DROP;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSearchFieldComponent.prototype, "modalHalf", {
        get: function () {
            return this.type === NbSearchFieldComponent_1.TYPE_MODAL_HALF;
        },
        enumerable: true,
        configurable: true
    });
    NbSearchFieldComponent.prototype.ngOnChanges = function (_a) {
        var show = _a.show;
        var becameHidden = !show.isFirstChange() && show.currentValue === false;
        if (becameHidden && this.inputElement) {
            this.inputElement.nativeElement.value = '';
        }
        this.focusInput();
    };
    NbSearchFieldComponent.prototype.ngAfterViewInit = function () {
        this.focusInput();
    };
    NbSearchFieldComponent.prototype.emitClose = function () {
        this.close.emit();
    };
    NbSearchFieldComponent.prototype.submitSearch = function (term) {
        if (term) {
            this.search.emit(term);
        }
    };
    NbSearchFieldComponent.prototype.emitSearchInput = function (term) {
        this.searchInput.emit(term);
    };
    NbSearchFieldComponent.prototype.focusInput = function () {
        if (this.show && this.inputElement) {
            this.inputElement.nativeElement.focus();
        }
    };
    var NbSearchFieldComponent_1;
    NbSearchFieldComponent.TYPE_MODAL_ZOOMIN = 'modal-zoomin';
    NbSearchFieldComponent.TYPE_ROTATE_LAYOUT = 'rotate-layout';
    NbSearchFieldComponent.TYPE_MODAL_MOVE = 'modal-move';
    NbSearchFieldComponent.TYPE_CURTAIN = 'curtain';
    NbSearchFieldComponent.TYPE_COLUMN_CURTAIN = 'column-curtain';
    NbSearchFieldComponent.TYPE_MODAL_DROP = 'modal-drop';
    NbSearchFieldComponent.TYPE_MODAL_HALF = 'modal-half';
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSearchFieldComponent.prototype, "type", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSearchFieldComponent.prototype, "placeholder", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSearchFieldComponent.prototype, "hint", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbSearchFieldComponent.prototype, "show", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbSearchFieldComponent.prototype, "close", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbSearchFieldComponent.prototype, "search", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbSearchFieldComponent.prototype, "searchInput", void 0);
    __decorate([
        ViewChild('searchInput'),
        __metadata("design:type", ElementRef)
    ], NbSearchFieldComponent.prototype, "inputElement", void 0);
    __decorate([
        HostBinding('class.show'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "showClass", null);
    __decorate([
        HostBinding('class.modal-zoomin'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "modalZoomin", null);
    __decorate([
        HostBinding('class.rotate-layout'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "rotateLayout", null);
    __decorate([
        HostBinding('class.modal-move'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "modalMove", null);
    __decorate([
        HostBinding('class.curtain'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "curtain", null);
    __decorate([
        HostBinding('class.column-curtain'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "columnCurtain", null);
    __decorate([
        HostBinding('class.modal-drop'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "modalDrop", null);
    __decorate([
        HostBinding('class.modal-half'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSearchFieldComponent.prototype, "modalHalf", null);
NbSearchFieldComponent.ɵfac = function NbSearchFieldComponent_Factory(t) { return new (t || NbSearchFieldComponent)(); };
NbSearchFieldComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSearchFieldComponent, selectors: [["nb-search-field"]], viewQuery: function NbSearchFieldComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c20, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.inputElement = _t.first);
    } }, hostVars: 16, hostBindings: function NbSearchFieldComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("show", ctx.showClass)("modal-zoomin", ctx.modalZoomin)("rotate-layout", ctx.rotateLayout)("modal-move", ctx.modalMove)("curtain", ctx.curtain)("column-curtain", ctx.columnCurtain)("modal-drop", ctx.modalDrop)("modal-half", ctx.modalHalf);
    } }, inputs: { show: "show", type: "type", placeholder: "placeholder", hint: "hint" }, outputs: { close: "close", search: "search", searchInput: "searchInput" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 10, vars: 2, consts: [[1, "search", 3, "keyup.esc"], ["nbButton", "", "ghost", "", 1, "close-button", 3, "click"], ["icon", "close-outline", "pack", "nebular-essentials"], [1, "form-wrapper"], [1, "form", 3, "keyup.enter"], [1, "form-content"], ["autocomplete", "off", "tabindex", "-1", 1, "search-input", 3, "input", "blur"], ["searchInput", ""], [1, "info"]], template: function NbSearchFieldComponent_Template(rf, ctx) { if (rf & 1) {
        var _r1 = ɵngcc0.ɵɵgetCurrentView();
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵlistener("keyup.esc", function NbSearchFieldComponent_Template_div_keyup_esc_0_listener() { return ctx.emitClose(); });
        ɵngcc0.ɵɵelementStart(1, "button", 1);
        ɵngcc0.ɵɵlistener("click", function NbSearchFieldComponent_Template_button_click_1_listener() { return ctx.emitClose(); });
        ɵngcc0.ɵɵelement(2, "nb-icon", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(3, "div", 3);
        ɵngcc0.ɵɵelementStart(4, "form", 4);
        ɵngcc0.ɵɵlistener("keyup.enter", function NbSearchFieldComponent_Template_form_keyup_enter_4_listener() { ɵngcc0.ɵɵrestoreView(_r1); var _r0 = ɵngcc0.ɵɵreference(7); return ctx.submitSearch(_r0.value); });
        ɵngcc0.ɵɵelementStart(5, "div", 5);
        ɵngcc0.ɵɵelementStart(6, "input", 6, 7);
        ɵngcc0.ɵɵlistener("input", function NbSearchFieldComponent_Template_input_input_6_listener() { ɵngcc0.ɵɵrestoreView(_r1); var _r0 = ɵngcc0.ɵɵreference(7); return ctx.emitSearchInput(_r0.value); })("blur", function NbSearchFieldComponent_Template_input_blur_6_listener() { return ctx.focusInput(); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(8, "span", 8);
        ɵngcc0.ɵɵtext(9);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(6);
        ɵngcc0.ɵɵattribute("placeholder", ctx.placeholder);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ctx.hint);
    } }, directives: [NbButtonComponent,
        NbIconComponent, ɵngcc6.ɵangular_packages_forms_forms_y, ɵngcc6.NgControlStatusGroup, ɵngcc6.NgForm], styles: ["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{margin:0;padding:0;cursor:pointer;border:none;background:none}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border-top:0;border-right:0;border-left:0;background:transparent;border-radius:0;line-height:1;display:inline-block;box-sizing:border-box;padding:0.05rem 0;-webkit-appearance:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]::placeholder{opacity:0.3}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{font-size:90%;font-weight:bold;display:block;width:75%;margin:0 auto;padding:0.85rem 0;text-align:right}.modal-zoomin[_nghost-%COMP%]{display:block}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.5s}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before, .modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{content:'';position:absolute;width:calc(100% + 15px);height:calc(100% + 15px);pointer-events:none}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{top:0;left:0;border-right-width:0;border-bottom-width:0;transform:translate3d(-15px, -15px, 0)}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{right:0;bottom:0;border-top-width:0;border-left-width:0;transform:translate3d(15px, 15px, 0)}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:3rem;font-size:2.5rem}[dir=ltr]   .modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:10vw;width:75%}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto;opacity:1}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before, .modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{transform:translate3d(0, 0, 0);transition:transform 0.5s}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}@media screen and (max-width: 40rem){.modal-zoomin[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin:5rem 0 1rem}.modal-zoomin[_nghost-%COMP%]   span[_ngcontent-%COMP%]{text-align:left}}", "nb-layout.rotate-layout{position:fixed;overflow:hidden;width:100%}  nb-layout.rotate-layout .scrollable-container{position:relative;z-index:10001;transition:transform 0.5s cubic-bezier(0.2, 1, 0.3, 1)}  nb-layout.rotate-layout.with-search .scrollable-container{transition:transform 0.5s cubic-bezier(0.2, 1, 0.3, 1);transform-origin:50vw 50vh;transform:perspective(1000px) translate3d(0, 50vh, 0) rotate3d(1, 0, 0, 30deg);pointer-events:none}.rotate-layout[_nghost-%COMP%]{position:absolute;display:block;width:100vw;height:100vh;pointer-events:none;opacity:0;transition-property:opacity;transition-delay:0.4s}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1050;position:fixed;top:0;left:0;width:100%;height:50vh;pointer-events:none;opacity:0;transition:opacity 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:3rem;font-size:2.5rem;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}[dir=ltr]   .rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:5rem 0;opacity:0;transform:scale3d(0.7, 0.7, 1);transition:opacity 0.5s, transform 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:7vw;width:75%}.rotate-layout.show[_nghost-%COMP%]{opacity:1;transition-delay:0s}.rotate-layout.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto;opacity:1}.rotate-layout.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.rotate-layout.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}", "nb-layout.modal-move .layout{transition:transform 0.5s}  nb-layout.modal-move.with-search .layout{transform:scale3d(0.8, 0.8, 1);pointer-events:none}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.5s}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:3rem;font-size:2.5rem;opacity:0;transition:opacity 0.5s}[dir=ltr]   .modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:5rem 0;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:10vw;width:75%;transform:scale3d(0, 1, 1);transform-origin:0 50%;transition:transform 0.3s}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto;opacity:1}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:scale3d(1, 1, 1);transition-duration:0.5s}@media screen and (max-width: 40rem){.modal-move[_nghost-%COMP%]   span[_ngcontent-%COMP%]{text-align:left}}", ".curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{position:fixed;z-index:1050;top:0;left:100%;overflow:hidden;height:100vh;width:100%;padding:3rem;pointer-events:none;transition:transform 0.3s;transition-delay:0.4s;transition-timing-function:ease-out}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;transition:transform 0.3s;transition-timing-function:ease-out}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2.5rem;position:absolute;top:3rem;transition:opacity 0.1s;transition-delay:0.3s}[dir=ltr]   .curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:50%;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:6vw}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;pointer-events:auto;transform:translate3d(-100%, 0, 0);transition-delay:0s}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{transform:translate3d(100%, 0, 0);transition-delay:0.4s}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}@media screen and (max-width: 40em){.curtain[_nghost-%COMP%]   span[_ngcontent-%COMP%]{width:90%}.curtain[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:2em;width:90%}}  nb-layout.curtain .scrollable-container{position:relative;z-index:0}", "nb-layout.column-curtain.with-search .layout{pointer-events:none}.column-curtain[_nghost-%COMP%]{display:block;position:fixed;z-index:1050;top:0;left:50%;overflow:hidden;width:50%;height:100vh;pointer-events:none}.column-curtain[_nghost-%COMP%]::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;transform:scale3d(0, 1, 1);transform-origin:0 50%;transition:transform 0.3s;transition-timing-function:cubic-bezier(0.86, 0, 0.07, 1)}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{position:relative;padding:2.5rem 1.5rem 0;background:transparent}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:2rem;font-size:2.5rem;opacity:0;transition:opacity 0.5s}[dir=ltr]   .column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:2rem}[dir=rtl]   .column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:2rem}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:85%;transform:translate3d(-150%, 0, 0);transition:transform 0.3s}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:2.5rem;width:100%}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:85%}.column-curtain.show[_nghost-%COMP%]{pointer-events:auto}.column-curtain.show[_nghost-%COMP%]::before{transform:scale3d(1, 1, 1)}.column-curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0);transition-delay:0.15s;transition-timing-function:cubic-bezier(0.86, 0, 0.07, 1)}.column-curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;z-index:100}@media screen and (max-width: 40rem){.column-curtain[_nghost-%COMP%]   span[_ngcontent-%COMP%]{width:90%}.column-curtain[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:2rem;width:90%}}", "nb-layout.modal-drop .layout{position:relative;transition:transform 0.4s, opacity 0.4s;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}  nb-layout.modal-drop.with-search .layout{opacity:0;transform:scale3d(0.9, 0.9, 1);pointer-events:none}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1050;position:fixed;top:0;left:0;width:100%;height:100vh;background:none;pointer-events:none}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{content:'';position:absolute;top:0;right:0;width:100%;height:100%;opacity:0;transition:opacity 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2.5rem;position:absolute;top:3rem;display:block;opacity:0;transition:opacity 0.4s}[dir=ltr]   .modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:relative;margin:5rem 0 2rem}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:6vw;width:60%;padding:0.25rem;text-align:center;opacity:0;transition:opacity 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:9;display:block;width:60%;padding:0.85rem 0;opacity:0;transform:translate3d(0, -50px, 0);transition:opacity 0.4s, transform 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{position:relative;z-index:10;overflow:hidden;transform:translate3d(0, -50px, 0);transition:transform 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]::after{content:'';position:absolute;top:0;left:20%;width:60%;height:105%;opacity:0;transform-origin:50% 0}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{opacity:1}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0);transition:none}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]::after{animation:scaleUpDown 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:1;transition:opacity 0s 0.4s}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1;transform:translate3d(0, 0, 0);transition-delay:0.4s;transition-timing-function:ease-out}@keyframes scaleUpDown{0%{opacity:1;transform:scale3d(1, 0, 1)}50%{transform:scale3d(1, 1, 1);transform-origin:50% 0;transition-timing-function:ease-out}50.1%{transform-origin:50% 100%;transition-timing-function:ease-out}100%{opacity:1;transform:scale3d(1, 0, 1);transform-origin:50% 100%;transition-timing-function:ease-out}}@media screen and (max-width: 40rem){.modal-drop[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin:2rem 0}.modal-drop[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%;left:0}}", "nb-layout.modal-half .layout{transition:transform 0.6s, opacity 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}  nb-layout.modal-half.with-search .layout{transform:scale3d(0.8, 0.8, 1);pointer-events:none}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{text-align:center;position:fixed;z-index:1050;top:0;left:0;overflow:hidden;width:100%;height:100vh;background:none;pointer-events:none}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;transition:opacity 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2.5rem;position:absolute;top:3rem;display:block;z-index:100;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.6s, transform 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}[dir=ltr]   .modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:50%;transition:transform 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1);transform:translate3d(0, -100%, 0)}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:75%;margin:0 auto}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:7vw;width:100%}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{opacity:1}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0)}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSearchFieldComponent, [{
        type: Component,
        args: [{
                selector: 'nb-search-field',
                changeDetection: ChangeDetectionStrategy.OnPush,
                template: "\n    <div class=\"search\" (keyup.esc)=\"emitClose()\">\n      <button (click)=\"emitClose()\" nbButton ghost class=\"close-button\">\n        <nb-icon icon=\"close-outline\" pack=\"nebular-essentials\"></nb-icon>\n      </button>\n      <div class=\"form-wrapper\">\n        <form class=\"form\" (keyup.enter)=\"submitSearch(searchInput.value)\">\n          <div class=\"form-content\">\n            <input class=\"search-input\"\n                   #searchInput\n                   (input)=\"emitSearchInput(searchInput.value)\"\n                   autocomplete=\"off\"\n                   [attr.placeholder]=\"placeholder\"\n                   tabindex=\"-1\"\n                   (blur)=\"focusInput()\"/>\n          </div>\n          <span class=\"info\">{{ hint }}</span>\n        </form>\n      </div>\n    </div>\n  ",
                styles: [":host button{margin:0;padding:0;cursor:pointer;border:none;background:none}:host button:focus{box-shadow:none;outline:none}:host input{border-top:0;border-right:0;border-left:0;background:transparent;border-radius:0;line-height:1;display:inline-block;box-sizing:border-box;padding:0.05rem 0;-webkit-appearance:none}:host input:focus{outline:none}:host input::placeholder{opacity:0.3}:host span{font-size:90%;font-weight:bold;display:block;width:75%;margin:0 auto;padding:0.85rem 0;text-align:right}:host.modal-zoomin{display:block}:host.modal-zoomin .search{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.5s}:host.modal-zoomin .search::before,:host.modal-zoomin .search::after{content:'';position:absolute;width:calc(100% + 15px);height:calc(100% + 15px);pointer-events:none}:host.modal-zoomin .search::before{top:0;left:0;border-right-width:0;border-bottom-width:0;transform:translate3d(-15px, -15px, 0)}:host.modal-zoomin .search::after{right:0;bottom:0;border-top-width:0;border-left-width:0;transform:translate3d(15px, 15px, 0)}:host.modal-zoomin .search button{position:absolute;top:3rem;font-size:2.5rem}[dir=ltr] :host.modal-zoomin .search button{right:3rem}[dir=rtl] :host.modal-zoomin .search button{left:3rem}:host.modal-zoomin .search input{font-size:10vw;width:75%}:host.modal-zoomin .search button{opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}:host.modal-zoomin .search form{opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}:host.modal-zoomin.show .search{pointer-events:auto;opacity:1}:host.modal-zoomin.show .search::before,:host.modal-zoomin.show .search::after{transform:translate3d(0, 0, 0);transition:transform 0.5s}:host.modal-zoomin.show .search button{opacity:1;transform:scale3d(1, 1, 1)}:host.modal-zoomin.show .search form{opacity:1;transform:scale3d(1, 1, 1)}@media screen and (max-width: 40rem){:host.modal-zoomin form{margin:5rem 0 1rem}:host.modal-zoomin span{text-align:left}}\n", "::ng-deep nb-layout.rotate-layout{position:fixed;overflow:hidden;width:100%}::ng-deep nb-layout.rotate-layout .scrollable-container{position:relative;z-index:10001;transition:transform 0.5s cubic-bezier(0.2, 1, 0.3, 1)}::ng-deep nb-layout.rotate-layout.with-search .scrollable-container{transition:transform 0.5s cubic-bezier(0.2, 1, 0.3, 1);transform-origin:50vw 50vh;transform:perspective(1000px) translate3d(0, 50vh, 0) rotate3d(1, 0, 0, 30deg);pointer-events:none}:host.rotate-layout{position:absolute;display:block;width:100vw;height:100vh;pointer-events:none;opacity:0;transition-property:opacity;transition-delay:0.4s}:host.rotate-layout .search{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1050;position:fixed;top:0;left:0;width:100%;height:50vh;pointer-events:none;opacity:0;transition:opacity 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}:host.rotate-layout .search button{position:absolute;top:3rem;font-size:2.5rem;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}[dir=ltr] :host.rotate-layout .search button{right:3rem}[dir=rtl] :host.rotate-layout .search button{left:3rem}:host.rotate-layout .search form{margin:5rem 0;opacity:0;transform:scale3d(0.7, 0.7, 1);transition:opacity 0.5s, transform 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}:host.rotate-layout .search input{font-size:7vw;width:75%}:host.rotate-layout.show{opacity:1;transition-delay:0s}:host.rotate-layout.show .search{pointer-events:auto;opacity:1}:host.rotate-layout.show .search button{opacity:1;transform:scale3d(1, 1, 1)}:host.rotate-layout.show .search form{opacity:1;transform:scale3d(1, 1, 1)}\n", "::ng-deep nb-layout.modal-move .layout{transition:transform 0.5s}::ng-deep nb-layout.modal-move.with-search .layout{transform:scale3d(0.8, 0.8, 1);pointer-events:none}:host.modal-move .search{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.5s}:host.modal-move .search button{position:absolute;top:3rem;font-size:2.5rem;opacity:0;transition:opacity 0.5s}[dir=ltr] :host.modal-move .search button{right:3rem}[dir=rtl] :host.modal-move .search button{left:3rem}:host.modal-move .search form{margin:5rem 0;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}:host.modal-move .search input{font-size:10vw;width:75%;transform:scale3d(0, 1, 1);transform-origin:0 50%;transition:transform 0.3s}:host.modal-move.show .search{pointer-events:auto;opacity:1}:host.modal-move.show .search button{opacity:1}:host.modal-move.show .search form{opacity:1;transform:scale3d(1, 1, 1)}:host.modal-move.show .search input{transform:scale3d(1, 1, 1);transition-duration:0.5s}@media screen and (max-width: 40rem){:host.modal-move span{text-align:left}}\n", ":host.curtain .search{position:fixed;z-index:1050;top:0;left:100%;overflow:hidden;height:100vh;width:100%;padding:3rem;pointer-events:none;transition:transform 0.3s;transition-delay:0.4s;transition-timing-function:ease-out}:host.curtain .search::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;transition:transform 0.3s;transition-timing-function:ease-out}:host.curtain .search button{font-size:2.5rem;position:absolute;top:3rem;transition:opacity 0.1s;transition-delay:0.3s}[dir=ltr] :host.curtain .search button{right:3rem}[dir=rtl] :host.curtain .search button{left:3rem}:host.curtain .search form{width:50%;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}:host.curtain .search input{width:100%;font-size:6vw}:host.curtain.show .search{width:100%;pointer-events:auto;transform:translate3d(-100%, 0, 0);transition-delay:0s}:host.curtain.show .search::after{transform:translate3d(100%, 0, 0);transition-delay:0.4s}:host.curtain.show .search button{opacity:1;transform:scale3d(1, 1, 1)}:host.curtain.show .search form{opacity:1;transform:scale3d(1, 1, 1)}@media screen and (max-width: 40em){:host.curtain span{width:90%}:host.curtain input{font-size:2em;width:90%}}::ng-deep nb-layout.curtain .scrollable-container{position:relative;z-index:0}\n", "::ng-deep nb-layout.column-curtain.with-search .layout{pointer-events:none}:host.column-curtain{display:block;position:fixed;z-index:1050;top:0;left:50%;overflow:hidden;width:50%;height:100vh;pointer-events:none}:host.column-curtain::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;transform:scale3d(0, 1, 1);transform-origin:0 50%;transition:transform 0.3s;transition-timing-function:cubic-bezier(0.86, 0, 0.07, 1)}:host.column-curtain .search{position:relative;padding:2.5rem 1.5rem 0;background:transparent}:host.column-curtain .search button{position:absolute;top:2rem;font-size:2.5rem;opacity:0;transition:opacity 0.5s}[dir=ltr] :host.column-curtain .search button{right:2rem}[dir=rtl] :host.column-curtain .search button{left:2rem}:host.column-curtain .search form{width:85%;transform:translate3d(-150%, 0, 0);transition:transform 0.3s}:host.column-curtain .search input{font-size:2.5rem;width:100%}:host.column-curtain .search span{font-size:85%}:host.column-curtain.show{pointer-events:auto}:host.column-curtain.show::before{transform:scale3d(1, 1, 1)}:host.column-curtain.show .search form{transform:translate3d(0, 0, 0);transition-delay:0.15s;transition-timing-function:cubic-bezier(0.86, 0, 0.07, 1)}:host.column-curtain.show .search button{opacity:1;z-index:100}@media screen and (max-width: 40rem){:host.column-curtain span{width:90%}:host.column-curtain input{font-size:2rem;width:90%}}\n", "::ng-deep nb-layout.modal-drop .layout{position:relative;transition:transform 0.4s, opacity 0.4s;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}::ng-deep nb-layout.modal-drop.with-search .layout{opacity:0;transform:scale3d(0.9, 0.9, 1);pointer-events:none}:host.modal-drop .search{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1050;position:fixed;top:0;left:0;width:100%;height:100vh;background:none;pointer-events:none}:host.modal-drop .search::before{content:'';position:absolute;top:0;right:0;width:100%;height:100%;opacity:0;transition:opacity 0.4s}:host.modal-drop .search button{font-size:2.5rem;position:absolute;top:3rem;display:block;opacity:0;transition:opacity 0.4s}[dir=ltr] :host.modal-drop .search button{right:3rem}[dir=rtl] :host.modal-drop .search button{left:3rem}:host.modal-drop .search form{position:relative;margin:5rem 0 2rem}:host.modal-drop .search input{font-size:6vw;width:60%;padding:0.25rem;text-align:center;opacity:0;transition:opacity 0.4s}:host.modal-drop .search span{position:relative;z-index:9;display:block;width:60%;padding:0.85rem 0;opacity:0;transform:translate3d(0, -50px, 0);transition:opacity 0.4s, transform 0.4s}:host.modal-drop .search .form-content{position:relative;z-index:10;overflow:hidden;transform:translate3d(0, -50px, 0);transition:transform 0.4s}:host.modal-drop .search .form-content::after{content:'';position:absolute;top:0;left:20%;width:60%;height:105%;opacity:0;transform-origin:50% 0}:host.modal-drop.show .search{pointer-events:auto}:host.modal-drop.show .search::before{opacity:1}:host.modal-drop.show .search button{opacity:1}:host.modal-drop.show .search .form-content{transform:translate3d(0, 0, 0);transition:none}:host.modal-drop.show .search .form-content::after{animation:scaleUpDown 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards}:host.modal-drop.show .search input{opacity:1;transition:opacity 0s 0.4s}:host.modal-drop.show .search span{opacity:1;transform:translate3d(0, 0, 0);transition-delay:0.4s;transition-timing-function:ease-out}@keyframes scaleUpDown{0%{opacity:1;transform:scale3d(1, 0, 1)}50%{transform:scale3d(1, 1, 1);transform-origin:50% 0;transition-timing-function:ease-out}50.1%{transform-origin:50% 100%;transition-timing-function:ease-out}100%{opacity:1;transform:scale3d(1, 0, 1);transform-origin:50% 100%;transition-timing-function:ease-out}}@media screen and (max-width: 40rem){:host.modal-drop form{margin:2rem 0}:host.modal-drop input{width:100%;left:0}}\n", "::ng-deep nb-layout.modal-half .layout{transition:transform 0.6s, opacity 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}::ng-deep nb-layout.modal-half.with-search .layout{transform:scale3d(0.8, 0.8, 1);pointer-events:none}:host.modal-half .search{text-align:center;position:fixed;z-index:1050;top:0;left:0;overflow:hidden;width:100%;height:100vh;background:none;pointer-events:none}:host.modal-half .search::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;transition:opacity 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}:host.modal-half .search button{font-size:2.5rem;position:absolute;top:3rem;display:block;z-index:100;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.6s, transform 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}[dir=ltr] :host.modal-half .search button{right:3rem}[dir=rtl] :host.modal-half .search button{left:3rem}:host.modal-half .search .form-wrapper{position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:50%;transition:transform 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1);transform:translate3d(0, -100%, 0)}:host.modal-half .search form{width:75%;margin:0 auto}:host.modal-half .search input{font-size:7vw;width:100%}:host.modal-half.show .search{pointer-events:auto}:host.modal-half.show .search::before{opacity:1}:host.modal-half.show .search button{opacity:1;transform:scale3d(1, 1, 1)}:host.modal-half.show .search .form-wrapper{transform:translate3d(0, 0, 0)}\n"]
            }]
    }], function () { return []; }, { show: [{
            type: Input
        }], close: [{
            type: Output
        }], search: [{
            type: Output
        }], searchInput: [{
            type: Output
        }], showClass: [{
            type: HostBinding,
            args: ['class.show']
        }], modalZoomin: [{
            type: HostBinding,
            args: ['class.modal-zoomin']
        }], rotateLayout: [{
            type: HostBinding,
            args: ['class.rotate-layout']
        }], modalMove: [{
            type: HostBinding,
            args: ['class.modal-move']
        }], curtain: [{
            type: HostBinding,
            args: ['class.curtain']
        }], columnCurtain: [{
            type: HostBinding,
            args: ['class.column-curtain']
        }], modalDrop: [{
            type: HostBinding,
            args: ['class.modal-drop']
        }], modalHalf: [{
            type: HostBinding,
            args: ['class.modal-half']
        }], type: [{
            type: Input
        }], placeholder: [{
            type: Input
        }], hint: [{
            type: Input
        }], inputElement: [{
            type: ViewChild,
            args: ['searchInput']
        }] }); })();
    return NbSearchFieldComponent;
}());
/**
 * Beautiful full-page search control.
 *
 * @stacked-example(Showcase, search/search-showcase.component)
 *
 * Basic setup:
 *
 * ```ts
 *  <nb-search type="rotate-layout"></nb-search>
 * ```
 * ### Installation
 *
 * Import `NbSearchModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbSearchModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Several animation types are available:
 * modal-zoomin, rotate-layout, modal-move, curtain, column-curtain, modal-drop, modal-half
 *
 * It is also possible to handle search event using `NbSearchService`:
 *
 * @stacked-example(Search Event, search/search-event.component)
 *
 * @styles
 *
 * search-background-color:
 * search-divider-color:
 * search-divider-style:
 * search-divider-width:
 * search-extra-background-color:
 * search-text-color:
 * search-text-font-family:
 * search-text-font-size:
 * search-text-font-weight:
 * search-text-line-height:
 * search-placeholder-text-color:
 * search-info-text-color:
 * search-info-text-font-family:
 * search-info-text-font-size:
 * search-info-text-font-weight:
 * search-info-text-line-height:
 */
var NbSearchComponent = /** @class */ (function () {
    function NbSearchComponent(searchService, themeService, router, overlayService, changeDetector) {
        this.searchService = searchService;
        this.themeService = themeService;
        this.router = router;
        this.overlayService = overlayService;
        this.changeDetector = changeDetector;
        this.destroy$ = new Subject();
        this.showSearchField = false;
        /**
         * Search input placeholder
         * @type {string}
         */
        this.placeholder = 'Search...';
        /**
         * Hint showing under the input field to improve user experience
         *
         * @type {string}
         */
        this.hint = 'Hit enter to search';
    }
    NbSearchComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.router.events
            .pipe(filter(function (event) { return event instanceof NavigationEnd; }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.hideSearch(); });
        this.searchService.onSearchActivate()
            .pipe(filter(function (data) { return !_this.tag || data.tag === _this.tag; }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.openSearch(); });
        this.searchService.onSearchDeactivate()
            .pipe(filter(function (data) { return !_this.tag || data.tag === _this.tag; }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.hideSearch(); });
    };
    NbSearchComponent.prototype.ngOnDestroy = function () {
        if (this.overlayRef && this.overlayRef.hasAttached()) {
            this.removeLayoutClasses();
            this.overlayRef.detach();
        }
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbSearchComponent.prototype.openSearch = function () {
        var _this = this;
        if (!this.overlayRef) {
            this.overlayRef = this.overlayService.create();
            this.overlayRef.attach(this.searchFieldPortal);
        }
        this.themeService.appendLayoutClass(this.type);
        of(null).pipe(delay(0)).subscribe(function () {
            _this.themeService.appendLayoutClass('with-search');
            _this.showSearchField = true;
            _this.changeDetector.detectChanges();
        });
    };
    NbSearchComponent.prototype.hideSearch = function () {
        this.removeLayoutClasses();
        this.showSearchField = false;
        this.changeDetector.detectChanges();
        this.searchButton.nativeElement.focus();
    };
    NbSearchComponent.prototype.search = function (term) {
        this.searchService.submitSearch(term, this.tag);
        this.hideSearch();
    };
    NbSearchComponent.prototype.emitInput = function (term) {
        this.searchService.searchInput(term, this.tag);
    };
    NbSearchComponent.prototype.emitActivate = function () {
        this.searchService.activateSearch(this.type, this.tag);
    };
    NbSearchComponent.prototype.emitDeactivate = function () {
        this.searchService.deactivateSearch(this.type, this.tag);
    };
    NbSearchComponent.prototype.removeLayoutClasses = function () {
        var _this = this;
        this.themeService.removeLayoutClass('with-search');
        of(null).pipe(delay(500)).subscribe(function () {
            _this.themeService.removeLayoutClass(_this.type);
        });
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSearchComponent.prototype, "tag", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSearchComponent.prototype, "placeholder", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSearchComponent.prototype, "hint", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSearchComponent.prototype, "type", void 0);
    __decorate([
        ViewChild(NbPortalDirective),
        __metadata("design:type", NbPortalDirective)
    ], NbSearchComponent.prototype, "searchFieldPortal", void 0);
    __decorate([
        ViewChild('searchButton', { read: ElementRef }),
        __metadata("design:type", ElementRef)
    ], NbSearchComponent.prototype, "searchButton", void 0);
    NbSearchComponent = __decorate([ __metadata("design:paramtypes", [NbSearchService,
            NbThemeService,
            Router,
            NbOverlayService,
            ChangeDetectorRef])
    ], NbSearchComponent);
NbSearchComponent.ɵfac = function NbSearchComponent_Factory(t) { return new (t || NbSearchComponent)(ɵngcc0.ɵɵdirectiveInject(NbSearchService), ɵngcc0.ɵɵdirectiveInject(NbThemeService), ɵngcc0.ɵɵdirectiveInject(ɵngcc5.Router), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbSearchComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSearchComponent, selectors: [["nb-search"]], viewQuery: function NbSearchComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(NbPortalDirective, true);
        ɵngcc0.ɵɵviewQuery(_c21, true, ElementRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.searchFieldPortal = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.searchButton = _t.first);
    } }, inputs: { placeholder: "placeholder", hint: "hint", tag: "tag", type: "type" }, decls: 4, vars: 0, consts: [["nbButton", "", "ghost", "", 1, "start-search", 3, "click"], ["searchButton", ""], ["icon", "search-outline", "pack", "nebular-essentials"], [3, "show", "type", "placeholder", "hint", "search", "searchInput", "close", 4, "nbPortal"], [3, "show", "type", "placeholder", "hint", "search", "searchInput", "close"]], template: function NbSearchComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "button", 0, 1);
        ɵngcc0.ɵɵlistener("click", function NbSearchComponent_Template_button_click_0_listener() { return ctx.emitActivate(); });
        ɵngcc0.ɵɵelement(2, "nb-icon", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(3, NbSearchComponent_nb_search_field_3_Template, 1, 4, "nb-search-field", 3);
    } }, directives: [NbButtonComponent,
        NbIconComponent,
        NbPortalDirective,
        NbSearchFieldComponent], styles: ["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{font-size:2rem;margin:0 auto;padding:0;cursor:pointer;border:none;background:none}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}  nb-layout.with-search .scrollable-container{position:relative;z-index:0}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSearchComponent, [{
        type: Component,
        args: [{
                selector: 'nb-search',
                changeDetection: ChangeDetectionStrategy.OnPush,
                template: "\n    <button #searchButton class=\"start-search\" (click)=\"emitActivate()\" nbButton ghost>\n      <nb-icon icon=\"search-outline\" pack=\"nebular-essentials\"></nb-icon>\n    </button>\n    <nb-search-field\n      *nbPortal\n      [show]=\"showSearchField\"\n      [type]=\"type\"\n      [placeholder]=\"placeholder\"\n      [hint]=\"hint\"\n      (search)=\"search($event)\"\n      (searchInput)=\"emitInput($event)\"\n      (close)=\"emitDeactivate()\">\n    </nb-search-field>\n  ",
                styles: [":host button{font-size:2rem;margin:0 auto;padding:0;cursor:pointer;border:none;background:none}:host button:focus{box-shadow:none;outline:none}::ng-deep nb-layout.with-search .scrollable-container{position:relative;z-index:0}\n"]
            }]
    }], function () { return [{ type: NbSearchService }, { type: NbThemeService }, { type: ɵngcc5.Router }, { type: NbOverlayService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { placeholder: [{
            type: Input
        }], hint: [{
            type: Input
        }], tag: [{
            type: Input
        }], type: [{
            type: Input
        }], searchFieldPortal: [{
            type: ViewChild,
            args: [NbPortalDirective]
        }], searchButton: [{
            type: ViewChild,
            args: ['searchButton', { read: ElementRef }]
        }] }); })();
    return NbSearchComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbSearchModule = /** @class */ (function () {
    function NbSearchModule() {
    }
NbSearchModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbSearchModule });
NbSearchModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbSearchModule_Factory(t) { return new (t || NbSearchModule)(); }, providers: [
        NbSearchService,
    ], imports: [[
            NbSharedModule,
            NbOverlayModule,
            NbIconModule,
            NbButtonModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSearchModule, { declarations: [NbSearchComponent,
        NbSearchFieldComponent], imports: [NbSharedModule,
        NbOverlayModule,
        NbIconModule,
        NbButtonModule], exports: [NbSearchComponent,
        NbSearchFieldComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSearchModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbOverlayModule,
                    NbIconModule,
                    NbButtonModule,
                ],
                declarations: [
                    NbSearchComponent,
                    NbSearchFieldComponent,
                ],
                exports: [
                    NbSearchComponent,
                    NbSearchFieldComponent,
                ],
                providers: [
                    NbSearchService,
                ],
                entryComponents: [
                    NbSearchFieldComponent,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbSearchModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Styled checkbox component
 *
 * @stacked-example(Showcase, checkbox/checkbox-showcase.component)
 *
 * ### Installation
 *
 * Import `NbCheckboxComponent` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbCheckboxModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Checkbox is available in multiple colors using `status` property:
 * @stacked-example(Colored Checkboxes, checkbox/checkbox-status.component)
 *
 * Indeterminate state is also supported:
 * @stacked-example(Indeterminate Checkbox, checkbox/checkbox-indeterminate.component)
 *
 * Checkbox can be disabled via `disabled` attribute.
 * @stacked-example(Disabled Checkbox, checkbox/checkbox-disabled.component)
 *
 * @styles
 *
 * checkbox-height:
 * checkbox-width:
 * checkbox-border-style:
 * checkbox-border-width:
 * checkbox-border-radius:
 * checkbox-outline-width:
 * checkbox-outline-color:
 * checkbox-text-font-family:
 * checkbox-text-font-size:
 * checkbox-text-font-weight:
 * checkbox-text-line-height:
 * checkbox-text-space:
 * checkbox-padding:
 * checkbox-focus-inset-shadow-length:
 * checkbox-basic-text-color:
 * checkbox-basic-background-color:
 * checkbox-basic-border-color:
 * checkbox-basic-checked-background-color:
 * checkbox-basic-checked-border-color:
 * checkbox-basic-checked-checkmark-color:
 * checkbox-basic-indeterminate-background-color:
 * checkbox-basic-indeterminate-border-color:
 * checkbox-basic-indeterminate-checkmark-color:
 * checkbox-basic-focus-background-color:
 * checkbox-basic-focus-border-color:
 * checkbox-basic-focus-checked-background-color:
 * checkbox-basic-focus-checked-border-color:
 * checkbox-basic-hover-background-color:
 * checkbox-basic-hover-border-color:
 * checkbox-basic-hover-checked-background-color:
 * checkbox-basic-hover-checked-border-color:
 * checkbox-basic-active-background-color:
 * checkbox-basic-active-border-color:
 * checkbox-basic-active-checked-background-color:
 * checkbox-basic-active-checked-border-color:
 * checkbox-basic-disabled-background-color:
 * checkbox-basic-disabled-border-color:
 * checkbox-basic-disabled-checkmark-color:
 * checkbox-basic-disabled-text-color:
 * checkbox-basic-disabled-checked-background-color:
 * checkbox-primary-text-color:
 * checkbox-primary-background-color:
 * checkbox-primary-border-color:
 * checkbox-primary-checked-background-color:
 * checkbox-primary-checked-border-color:
 * checkbox-primary-checked-checkmark-color:
 * checkbox-primary-indeterminate-background-color:
 * checkbox-primary-indeterminate-border-color:
 * checkbox-primary-indeterminate-checkmark-color:
 * checkbox-primary-focus-background-color:
 * checkbox-primary-focus-border-color:
 * checkbox-primary-focus-checked-background-color:
 * checkbox-primary-focus-checked-border-color:
 * checkbox-primary-hover-background-color:
 * checkbox-primary-hover-border-color:
 * checkbox-primary-hover-checked-background-color:
 * checkbox-primary-hover-checked-border-color:
 * checkbox-primary-active-background-color:
 * checkbox-primary-active-border-color:
 * checkbox-primary-active-checked-background-color:
 * checkbox-primary-active-checked-border-color:
 * checkbox-primary-disabled-background-color:
 * checkbox-primary-disabled-border-color:
 * checkbox-primary-disabled-checkmark-color:
 * checkbox-primary-disabled-text-color:
 * checkbox-primary-disabled-checked-background-color:
 * checkbox-success-text-color:
 * checkbox-success-background-color:
 * checkbox-success-border-color:
 * checkbox-success-checked-background-color:
 * checkbox-success-checked-border-color:
 * checkbox-success-checked-checkmark-color:
 * checkbox-success-indeterminate-background-color:
 * checkbox-success-indeterminate-border-color:
 * checkbox-success-indeterminate-checkmark-color:
 * checkbox-success-focus-background-color:
 * checkbox-success-focus-border-color:
 * checkbox-success-focus-checked-background-color:
 * checkbox-success-focus-checked-border-color:
 * checkbox-success-hover-background-color:
 * checkbox-success-hover-border-color:
 * checkbox-success-hover-checked-background-color:
 * checkbox-success-hover-checked-border-color:
 * checkbox-success-active-background-color:
 * checkbox-success-active-border-color:
 * checkbox-success-active-checked-background-color:
 * checkbox-success-active-checked-border-color:
 * checkbox-success-disabled-background-color:
 * checkbox-success-disabled-border-color:
 * checkbox-success-disabled-checkmark-color:
 * checkbox-success-disabled-text-color:
 * checkbox-success-disabled-checked-background-color:
 * checkbox-info-text-color:
 * checkbox-info-background-color:
 * checkbox-info-border-color:
 * checkbox-info-checked-background-color:
 * checkbox-info-checked-border-color:
 * checkbox-info-checked-checkmark-color:
 * checkbox-info-indeterminate-background-color:
 * checkbox-info-indeterminate-border-color:
 * checkbox-info-indeterminate-checkmark-color:
 * checkbox-info-focus-background-color:
 * checkbox-info-focus-border-color:
 * checkbox-info-focus-checked-background-color:
 * checkbox-info-focus-checked-border-color:
 * checkbox-info-hover-background-color:
 * checkbox-info-hover-border-color:
 * checkbox-info-hover-checked-background-color:
 * checkbox-info-hover-checked-border-color:
 * checkbox-info-active-background-color:
 * checkbox-info-active-border-color:
 * checkbox-info-active-checked-background-color:
 * checkbox-info-active-checked-border-color:
 * checkbox-info-disabled-background-color:
 * checkbox-info-disabled-border-color:
 * checkbox-info-disabled-checkmark-color:
 * checkbox-info-disabled-text-color:
 * checkbox-info-disabled-checked-background-color:
 * checkbox-warning-text-color:
 * checkbox-warning-background-color:
 * checkbox-warning-border-color:
 * checkbox-warning-checked-background-color:
 * checkbox-warning-checked-border-color:
 * checkbox-warning-checked-checkmark-color:
 * checkbox-warning-indeterminate-background-color:
 * checkbox-warning-indeterminate-border-color:
 * checkbox-warning-indeterminate-checkmark-color:
 * checkbox-warning-focus-background-color:
 * checkbox-warning-focus-border-color:
 * checkbox-warning-focus-checked-background-color:
 * checkbox-warning-focus-checked-border-color:
 * checkbox-warning-hover-background-color:
 * checkbox-warning-hover-border-color:
 * checkbox-warning-hover-checked-background-color:
 * checkbox-warning-hover-checked-border-color:
 * checkbox-warning-active-background-color:
 * checkbox-warning-active-border-color:
 * checkbox-warning-active-checked-background-color:
 * checkbox-warning-active-checked-border-color:
 * checkbox-warning-disabled-background-color:
 * checkbox-warning-disabled-border-color:
 * checkbox-warning-disabled-checkmark-color:
 * checkbox-warning-disabled-text-color:
 * checkbox-warning-disabled-checked-background-color:
 * checkbox-danger-text-color:
 * checkbox-danger-background-color:
 * checkbox-danger-border-color:
 * checkbox-danger-checked-background-color:
 * checkbox-danger-checked-border-color:
 * checkbox-danger-checked-checkmark-color:
 * checkbox-danger-indeterminate-background-color:
 * checkbox-danger-indeterminate-border-color:
 * checkbox-danger-indeterminate-checkmark-color:
 * checkbox-danger-focus-background-color:
 * checkbox-danger-focus-border-color:
 * checkbox-danger-focus-checked-background-color:
 * checkbox-danger-focus-checked-border-color:
 * checkbox-danger-hover-background-color:
 * checkbox-danger-hover-border-color:
 * checkbox-danger-hover-checked-background-color:
 * checkbox-danger-hover-checked-border-color:
 * checkbox-danger-active-background-color:
 * checkbox-danger-active-border-color:
 * checkbox-danger-active-checked-background-color:
 * checkbox-danger-active-checked-border-color:
 * checkbox-danger-disabled-background-color:
 * checkbox-danger-disabled-border-color:
 * checkbox-danger-disabled-checkmark-color:
 * checkbox-danger-disabled-text-color:
 * checkbox-danger-disabled-checked-background-color:
 * checkbox-control-text-color:
 * checkbox-control-background-color:
 * checkbox-control-border-color:
 * checkbox-control-checked-background-color:
 * checkbox-control-checked-border-color:
 * checkbox-control-checked-checkmark-color:
 * checkbox-control-indeterminate-background-color:
 * checkbox-control-indeterminate-border-color:
 * checkbox-control-indeterminate-checkmark-color:
 * checkbox-control-focus-background-color:
 * checkbox-control-focus-border-color:
 * checkbox-control-focus-checked-background-color:
 * checkbox-control-focus-checked-border-color:
 * checkbox-control-hover-background-color:
 * checkbox-control-hover-border-color:
 * checkbox-control-hover-checked-background-color:
 * checkbox-control-hover-checked-border-color:
 * checkbox-control-active-background-color:
 * checkbox-control-active-border-color:
 * checkbox-control-active-checked-background-color:
 * checkbox-control-active-checked-border-color:
 * checkbox-control-disabled-background-color:
 * checkbox-control-disabled-border-color:
 * checkbox-control-disabled-checkmark-color:
 * checkbox-control-disabled-text-color:
 * checkbox-control-disabled-checked-background-color:
 */
var NbCheckboxComponent = /** @class */ (function () {
    function NbCheckboxComponent(changeDetector, renderer, hostElement, zone) {
        this.changeDetector = changeDetector;
        this.renderer = renderer;
        this.hostElement = hostElement;
        this.zone = zone;
        this.onChange = function () { };
        this.onTouched = function () { };
        this._checked = false;
        this._disabled = false;
        this._status = 'basic';
        this._indeterminate = false;
        /**
         * Output when checked state is changed by a user
         * @type EventEmitter<boolean>
         */
        this.checkedChange = new EventEmitter();
    }
    NbCheckboxComponent_1 = NbCheckboxComponent;
    Object.defineProperty(NbCheckboxComponent.prototype, "value", {
        /**
         * Checkbox value
         * @deprecated
         * @breaking-change Remove @5.0.0
         */
        get: function () {
            return this.checked;
        },
        /**
         * @deprecated
         * @breaking-change Remove @5.0.0
         */
        set: function (value) {
            console.warn('NbCheckbox: `value` is deprecated and will be removed in 5.0.0. Use `checked` instead.');
            this.checked = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "checked", {
        get: function () {
            return this._checked;
        },
        set: function (value) {
            this._checked = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "disabled", {
        /**
         * Controls input disabled state
         */
        get: function () {
            return this._disabled;
        },
        set: function (value) {
            this._disabled = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "status", {
        /**
         * Checkbox status.
         * Possible values are: `basic`, `primary`, `success`, `warning`, `danger`, `info`, `control`.
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbCheckbox');
                this._status = 'basic';
            }
            else {
                this._status = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "indeterminate", {
        /**
         * Controls checkbox indeterminate state
         */
        get: function () {
            return this._indeterminate;
        },
        set: function (value) {
            this._indeterminate = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "valueChange", {
        /**
         * Output when checked state is changed by a user
         * @deprecated
         * @breaking-change Remove @5.0.0
         * @type EventEmitter<boolean>
         */
        get: function () {
            console.warn('NbCheckbox: `valueChange` is deprecated and will be removed in 5.0.0. Use `checkedChange` instead.');
            return this.checkedChange;
        },
        set: function (valueChange) {
            this.checkedChange = valueChange;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbCheckboxComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    NbCheckboxComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // TODO: #2254
        this.zone.runOutsideAngular(function () { return setTimeout(function () {
            _this.renderer.addClass(_this.hostElement.nativeElement, 'nb-transition');
        }); });
    };
    NbCheckboxComponent.prototype.registerOnChange = function (fn) {
        this.onChange = fn;
    };
    NbCheckboxComponent.prototype.registerOnTouched = function (fn) {
        this.onTouched = fn;
    };
    NbCheckboxComponent.prototype.writeValue = function (val) {
        this._checked = val;
        this.changeDetector.markForCheck();
    };
    NbCheckboxComponent.prototype.setDisabledState = function (val) {
        this.disabled = convertToBoolProperty(val);
        this.changeDetector.markForCheck();
    };
    NbCheckboxComponent.prototype.setTouched = function () {
        this.onTouched();
    };
    NbCheckboxComponent.prototype.updateValueAndIndeterminate = function (event) {
        var input = event.target;
        this.checked = input.checked;
        this.checkedChange.emit(this.checked);
        this.onChange(this.checked);
        this.indeterminate = input.indeterminate;
    };
    var NbCheckboxComponent_1;
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbCheckboxComponent.prototype, "value", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbCheckboxComponent.prototype, "checked", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbCheckboxComponent.prototype, "disabled", null);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbCheckboxComponent.prototype, "status", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbCheckboxComponent.prototype, "indeterminate", null);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter),
        __metadata("design:paramtypes", [EventEmitter])
    ], NbCheckboxComponent.prototype, "valueChange", null);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbCheckboxComponent.prototype, "checkedChange", void 0);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCheckboxComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCheckboxComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCheckboxComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCheckboxComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCheckboxComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCheckboxComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbCheckboxComponent.prototype, "control", null);
    NbCheckboxComponent = NbCheckboxComponent_1 = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef,
            Renderer2,
            ElementRef,
            NgZone])
    ], NbCheckboxComponent);
NbCheckboxComponent.ɵfac = function NbCheckboxComponent_Factory(t) { return new (t || NbCheckboxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
NbCheckboxComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbCheckboxComponent, selectors: [["nb-checkbox"]], hostVars: 14, hostBindings: function NbCheckboxComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("status-primary", ctx.primary)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-info", ctx.info)("status-basic", ctx.basic)("status-control", ctx.control);
    } }, inputs: { value: "value", checked: "checked", disabled: "disabled", status: "status", indeterminate: "indeterminate" }, outputs: { checkedChange: "checkedChange", valueChange: "valueChange" }, features: [ɵngcc0.ɵɵProvidersFeature([{
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(function () { return NbCheckboxComponent_1; }),
                multi: true
            }])], ngContentSelectors: _c0, decls: 7, vars: 9, consts: [[1, "label"], ["type", "checkbox", 1, "native-input", "visually-hidden", 3, "disabled", "checked", "indeterminate", "change", "blur", "click"], [1, "custom-checkbox"], ["icon", "minus-bold-outline", "pack", "nebular-essentials", 4, "ngIf"], ["icon", "checkmark-bold-outline", "pack", "nebular-essentials", 4, "ngIf"], [1, "text"], ["icon", "minus-bold-outline", "pack", "nebular-essentials"], ["icon", "checkmark-bold-outline", "pack", "nebular-essentials"]], template: function NbCheckboxComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵelementStart(1, "input", 1);
        ɵngcc0.ɵɵlistener("change", function NbCheckboxComponent_Template_input_change_1_listener($event) { return ctx.updateValueAndIndeterminate($event); })("blur", function NbCheckboxComponent_Template_input_blur_1_listener() { return ctx.setTouched(); })("click", function NbCheckboxComponent_Template_input_click_1_listener($event) { return $event.stopPropagation(); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(2, "span", 2);
        ɵngcc0.ɵɵtemplate(3, NbCheckboxComponent_nb_icon_3_Template, 1, 0, "nb-icon", 3);
        ɵngcc0.ɵɵtemplate(4, NbCheckboxComponent_nb_icon_4_Template, 1, 0, "nb-icon", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(5, "span", 5);
        ɵngcc0.ɵɵprojection(6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled)("checked", ctx.checked)("indeterminate", ctx.indeterminate);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵclassProp("indeterminate", ctx.indeterminate)("checked", ctx.checked);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.indeterminate);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.checked && !ctx.indeterminate);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], styles: ["[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;margin:0;min-height:inherit}[_nghost-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{flex-shrink:0}.nb-transition[_nghost-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:background-color,border,box-shadow;transition-timing-function:ease-in}.nb-transition[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:color;transition-timing-function:ease-in}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCheckboxComponent, [{
        type: Component,
        args: [{
                selector: 'nb-checkbox',
                template: "\n    <label class=\"label\">\n      <input type=\"checkbox\" class=\"native-input visually-hidden\"\n             [disabled]=\"disabled\"\n             [checked]=\"checked\"\n             (change)=\"updateValueAndIndeterminate($event)\"\n             (blur)=\"setTouched()\"\n             (click)=\"$event.stopPropagation()\"\n             [indeterminate]=\"indeterminate\">\n      <span [class.indeterminate]=\"indeterminate\" [class.checked]=\"checked\" class=\"custom-checkbox\">\n        <nb-icon *ngIf=\"indeterminate\" icon=\"minus-bold-outline\" pack=\"nebular-essentials\"></nb-icon>\n        <nb-icon *ngIf=\"checked && !indeterminate\" icon=\"checkmark-bold-outline\" pack=\"nebular-essentials\"></nb-icon>\n      </span>\n      <span class=\"text\">\n        <ng-content></ng-content>\n      </span>\n    </label>\n  ",
                providers: [{
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(function () { return NbCheckboxComponent_1; }),
                        multi: true
                    }],
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host .label{position:relative;display:inline-flex;align-items:center;margin:0;min-height:inherit}:host .custom-checkbox{flex-shrink:0}:host(.nb-transition) .custom-checkbox{transition-duration:0.15s;transition-property:background-color,border,box-shadow;transition-timing-function:ease-in}:host(.nb-transition) .text{transition-duration:0.15s;transition-property:color;transition-timing-function:ease-in}\n"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }]; }, { checkedChange: [{
            type: Output
        }], value: [{
            type: Input
        }], checked: [{
            type: Input
        }], disabled: [{
            type: Input
        }], status: [{
            type: Input
        }], indeterminate: [{
            type: Input
        }], valueChange: [{
            type: Output
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }] }); })();
    return NbCheckboxComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbCheckboxModule = /** @class */ (function () {
    function NbCheckboxModule() {
    }
NbCheckboxModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbCheckboxModule });
NbCheckboxModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbCheckboxModule_Factory(t) { return new (t || NbCheckboxModule)(); }, imports: [[
            NbSharedModule,
            NbIconModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCheckboxModule, { declarations: [NbCheckboxComponent], imports: [NbSharedModule,
        NbIconModule], exports: [NbCheckboxComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCheckboxModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbIconModule,
                ],
                declarations: [NbCheckboxComponent],
                exports: [NbCheckboxComponent]
            }]
    }], function () { return []; }, null); })();
    return NbCheckboxModule;
}());

var NbDynamicOverlay = /** @class */ (function () {
    function NbDynamicOverlay(overlay, componentFactoryResolver, zone, overlayContainer) {
        this.overlay = overlay;
        this.componentFactoryResolver = componentFactoryResolver;
        this.zone = zone;
        this.overlayContainer = overlayContainer;
        this.context = {};
        this.overlayConfig = {};
        this.positionStrategyChange$ = new Subject();
        this.isShown$ = new BehaviorSubject(false);
        this.destroy$ = new Subject();
    }
    Object.defineProperty(NbDynamicOverlay.prototype, "isAttached", {
        get: function () {
            return this.ref && this.ref.hasAttached();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbDynamicOverlay.prototype, "isShown", {
        get: function () {
            return this.isShown$.pipe(distinctUntilChanged());
        },
        enumerable: true,
        configurable: true
    });
    NbDynamicOverlay.prototype.create = function (componentType, content, context, positionStrategy, overlayConfig) {
        if (overlayConfig === void 0) { overlayConfig = {}; }
        this.setContentAndContext(content, context);
        this.setComponent(componentType);
        this.setPositionStrategy(positionStrategy);
        this.setOverlayConfig(overlayConfig);
        return this;
    };
    NbDynamicOverlay.prototype.setContent = function (content) {
        this.content = content;
        if (this.container) {
            this.updateContext();
        }
    };
    NbDynamicOverlay.prototype.setContext = function (context) {
        this.context = context;
        if (this.container) {
            this.updateContext();
        }
    };
    NbDynamicOverlay.prototype.setContentAndContext = function (content, context) {
        this.content = content;
        this.context = context;
        if (this.container) {
            this.updateContext();
        }
    };
    NbDynamicOverlay.prototype.setComponent = function (componentType) {
        this.componentType = componentType;
        // in case the component is shown we recreate it and show it back
        var wasAttached = this.isAttached;
        this.disposeOverlayRef();
        if (wasAttached) {
            this.show();
        }
    };
    NbDynamicOverlay.prototype.setPositionStrategy = function (positionStrategy) {
        var _this = this;
        this.positionStrategyChange$.next();
        this.positionStrategy = positionStrategy;
        this.positionStrategy.positionChange
            .pipe(filter(function () { return !!_this.container; }), takeUntil(merge(this.positionStrategyChange$, this.destroy$)))
            .subscribe(function (position) {
            _this.lastAppliedPosition = position;
            patch(_this.container, { position: position });
        });
        if (this.ref) {
            this.ref.updatePositionStrategy(this.positionStrategy);
        }
    };
    NbDynamicOverlay.prototype.setOverlayConfig = function (overlayConfig) {
        this.overlayConfig = overlayConfig;
        var wasAttached = this.isAttached;
        this.disposeOverlayRef();
        if (wasAttached) {
            this.show();
        }
    };
    NbDynamicOverlay.prototype.show = function () {
        if (!this.ref) {
            this.createOverlay();
        }
        this.renderContainer();
        if (!this.hasOverlayInContainer()) {
            // Dispose overlay ref as it refers to the old overlay container and create new by calling `show`
            this.disposeOverlayRef();
            return this.show();
        }
        this.isShown$.next(true);
    };
    NbDynamicOverlay.prototype.hide = function () {
        if (!this.ref) {
            return;
        }
        this.ref.detach();
        this.container = null;
        this.isShown$.next(false);
    };
    NbDynamicOverlay.prototype.toggle = function () {
        if (this.isAttached) {
            this.hide();
        }
        else {
            this.show();
        }
    };
    NbDynamicOverlay.prototype.dispose = function () {
        this.destroy$.next();
        this.destroy$.complete();
        this.hide();
        this.disposeOverlayRef();
        this.isShown$.complete();
        this.positionStrategyChange$.complete();
    };
    NbDynamicOverlay.prototype.getContainer = function () {
        return this.container;
    };
    NbDynamicOverlay.prototype.createOverlay = function () {
        this.ref = this.overlay.create(__assign({ positionStrategy: this.positionStrategy, scrollStrategy: this.overlay.scrollStrategies.reposition() }, this.overlayConfig));
        this.updatePositionWhenStable();
    };
    NbDynamicOverlay.prototype.renderContainer = function () {
        var containerContext = this.createContainerContext();
        if (!this.container) {
            this.container = createContainer(this.ref, this.componentType, containerContext, this.componentFactoryResolver);
        }
        this.container.instance.renderContent();
    };
    NbDynamicOverlay.prototype.updateContext = function () {
        var containerContext = this.createContainerContext();
        Object.assign(this.container.instance, containerContext);
        this.container.instance.renderContent();
        this.container.changeDetectorRef.detectChanges();
    };
    NbDynamicOverlay.prototype.createContainerContext = function () {
        return {
            content: this.content,
            context: this.context,
            cfr: this.componentFactoryResolver,
            position: this.lastAppliedPosition,
        };
    };
    /**
     * Dimensions of the container may change after content update. So we listen to zone.stable event to
     * reposition the container.
     */
    NbDynamicOverlay.prototype.updatePositionWhenStable = function () {
        var _this = this;
        this.zone.onStable
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () {
            _this.ref && _this.ref.updatePosition();
        });
    };
    NbDynamicOverlay.prototype.hasOverlayInContainer = function () {
        return this.overlayContainer.getContainerElement().contains(this.ref.hostElement);
    };
    NbDynamicOverlay.prototype.disposeOverlayRef = function () {
        if (this.ref) {
            this.ref.dispose();
            this.ref = null;
            this.container = null;
        }
    };
    NbDynamicOverlay = __decorate([ __metadata("design:paramtypes", [NbOverlayService,
            ComponentFactoryResolver,
            NgZone,
            NbOverlayContainer])
    ], NbDynamicOverlay);
NbDynamicOverlay.ɵfac = function NbDynamicOverlay_Factory(t) { return new (t || NbDynamicOverlay)(ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NbOverlayContainer)); };
NbDynamicOverlay.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbDynamicOverlay, factory: function (t) { return NbDynamicOverlay.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDynamicOverlay, [{
        type: Injectable
    }], function () { return [{ type: NbOverlayService }, { type: ɵngcc0.ComponentFactoryResolver }, { type: ɵngcc0.NgZone }, { type: NbOverlayContainer }]; }, null); })();
    return NbDynamicOverlay;
}());

var NbDynamicOverlayChange = /** @class */ (function (_super) {
    __extends(NbDynamicOverlayChange, _super);
    function NbDynamicOverlayChange(previousValue, currentValue, firstChange) {
        if (firstChange === void 0) { firstChange = false; }
        return _super.call(this, previousValue, currentValue, firstChange) || this;
    }
    NbDynamicOverlayChange.prototype.isChanged = function () {
        return this.currentValue !== this.previousValue;
    };
    return NbDynamicOverlayChange;
}(SimpleChange));
var NbDynamicOverlayHandler = /** @class */ (function () {
    function NbDynamicOverlayHandler(positionBuilder, triggerStrategyBuilder, dynamicOverlayService) {
        this.positionBuilder = positionBuilder;
        this.triggerStrategyBuilder = triggerStrategyBuilder;
        this.dynamicOverlayService = dynamicOverlayService;
        this._context = {};
        this._trigger = NbTrigger.NOOP;
        this._position = NbPosition.TOP;
        this._adjustment = NbAdjustment.NOOP;
        this._offset = 15;
        this._overlayConfig = {};
        this.changes = {};
    }
    NbDynamicOverlayHandler.prototype.host = function (host) {
        this.changes.host = new NbDynamicOverlayChange(this._host, host);
        this._host = host;
        return this;
    };
    NbDynamicOverlayHandler.prototype.trigger = function (trigger$$1) {
        this.changes.trigger = new NbDynamicOverlayChange(this._trigger, trigger$$1);
        this._trigger = trigger$$1;
        return this;
    };
    NbDynamicOverlayHandler.prototype.position = function (position) {
        this.changes.position = new NbDynamicOverlayChange(this._position, position);
        this._position = position;
        return this;
    };
    NbDynamicOverlayHandler.prototype.adjustment = function (adjustment) {
        this.changes.adjustment = new NbDynamicOverlayChange(this._adjustment, adjustment);
        this._adjustment = adjustment;
        return this;
    };
    NbDynamicOverlayHandler.prototype.componentType = function (componentType) {
        this.changes.componentType = new NbDynamicOverlayChange(this._componentType, componentType);
        this._componentType = componentType;
        return this;
    };
    NbDynamicOverlayHandler.prototype.content = function (content) {
        this.changes.content = new NbDynamicOverlayChange(this._content, content);
        this._content = content;
        return this;
    };
    NbDynamicOverlayHandler.prototype.context = function (context) {
        this.changes.context = new NbDynamicOverlayChange(this._context, context);
        this._context = context;
        return this;
    };
    NbDynamicOverlayHandler.prototype.offset = function (offset) {
        this.changes.offset = new NbDynamicOverlayChange(this._offset, offset);
        this._offset = offset;
        return this;
    };
    NbDynamicOverlayHandler.prototype.overlayConfig = function (overlayConfig) {
        this.changes.overlayConfig = new NbDynamicOverlayChange(this._overlayConfig, overlayConfig);
        this._overlayConfig = overlayConfig;
        return this;
    };
    NbDynamicOverlayHandler.prototype.build = function () {
        if (!this._componentType || !this._host) {
            throw Error("NbDynamicOverlayHandler: at least 'componentType' and 'host' should be\n      passed before building a dynamic overlay.");
        }
        this.dynamicOverlay = this.dynamicOverlayService.create(this._componentType, this._content, this._context, this.createPositionStrategy(), this._overlayConfig);
        this.connect();
        this.clearChanges();
        return this.dynamicOverlay;
    };
    NbDynamicOverlayHandler.prototype.rebuild = function () {
        /**
         * we should not throw here
         * as we use rebuilt in lifecycle hooks
         * which it could be called before the build
         * so we just ignore this call
         */
        if (!this.dynamicOverlay) {
            return;
        }
        if (this.isPositionStrategyUpdateRequired()) {
            this.dynamicOverlay.setPositionStrategy(this.createPositionStrategy());
        }
        if (this.isTriggerStrategyUpdateRequired()) {
            this.connect();
        }
        if (this.isContainerRerenderRequired()) {
            this.dynamicOverlay.setContentAndContext(this._content, this._context);
        }
        if (this.isComponentTypeUpdateRequired()) {
            this.dynamicOverlay.setComponent(this._componentType);
        }
        if (this.isOverlayConfigUpdateRequired()) {
            this.dynamicOverlay.setOverlayConfig(this._overlayConfig);
        }
        this.clearChanges();
        return this.dynamicOverlay;
    };
    NbDynamicOverlayHandler.prototype.connect = function () {
        if (!this.dynamicOverlay) {
            throw new Error("NbDynamicOverlayHandler: cannot connect to DynamicOverlay\n      as it is not created yet. Call build() first");
        }
        this.disconnect();
        this.subscribeOnTriggers(this.dynamicOverlay);
    };
    NbDynamicOverlayHandler.prototype.disconnect = function () {
        if (this.triggerStrategy) {
            this.triggerStrategy.destroy();
        }
    };
    NbDynamicOverlayHandler.prototype.destroy = function () {
        this.disconnect();
        this.clearChanges();
        if (this.dynamicOverlay) {
            this.dynamicOverlay.dispose();
        }
    };
    NbDynamicOverlayHandler.prototype.createPositionStrategy = function () {
        return this.positionBuilder
            .connectedTo(this._host)
            .position(this._position)
            .adjustment(this._adjustment)
            .offset(this._offset);
    };
    NbDynamicOverlayHandler.prototype.subscribeOnTriggers = function (dynamicOverlay) {
        this.triggerStrategy = this.triggerStrategyBuilder
            .trigger(this._trigger)
            .host(this._host.nativeElement)
            .container(function () { return dynamicOverlay.getContainer(); })
            .build();
        this.triggerStrategy.show$.subscribe(function () { return dynamicOverlay.show(); });
        this.triggerStrategy.hide$.subscribe(function () { return dynamicOverlay.hide(); });
    };
    NbDynamicOverlayHandler.prototype.isContainerRerenderRequired = function () {
        return this.isContentUpdated()
            || this.isContextUpdated()
            || this.isPositionStrategyUpdateRequired();
    };
    NbDynamicOverlayHandler.prototype.isPositionStrategyUpdateRequired = function () {
        return this.isAdjustmentUpdated() || this.isPositionUpdated() || this.isOffsetUpdated() || this.isHostUpdated();
    };
    NbDynamicOverlayHandler.prototype.isTriggerStrategyUpdateRequired = function () {
        return this.isTriggerUpdated() || this.isHostUpdated();
    };
    NbDynamicOverlayHandler.prototype.isComponentTypeUpdateRequired = function () {
        return this.isComponentTypeUpdated();
    };
    NbDynamicOverlayHandler.prototype.isOverlayConfigUpdateRequired = function () {
        return this.isOverlayConfigUpdated();
    };
    NbDynamicOverlayHandler.prototype.isComponentTypeUpdated = function () {
        return this.changes.componentType && this.changes.componentType.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isContentUpdated = function () {
        return this.changes.content && this.changes.content.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isContextUpdated = function () {
        return this.changes.context && this.changes.context.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isAdjustmentUpdated = function () {
        return this.changes.adjustment && this.changes.adjustment.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isPositionUpdated = function () {
        return this.changes.position && this.changes.position.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isHostUpdated = function () {
        return this.changes.host && this.changes.host.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isTriggerUpdated = function () {
        return this.changes.trigger && this.changes.trigger.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isOffsetUpdated = function () {
        return this.changes.offset && this.changes.offset.isChanged();
    };
    NbDynamicOverlayHandler.prototype.isOverlayConfigUpdated = function () {
        return this.changes.overlayConfig && this.changes.overlayConfig.isChanged();
    };
    NbDynamicOverlayHandler.prototype.clearChanges = function () {
        this.changes = {};
    };
    NbDynamicOverlayHandler = __decorate([ __metadata("design:paramtypes", [NbPositionBuilderService,
            NbTriggerStrategyBuilderService,
            NbDynamicOverlay])
    ], NbDynamicOverlayHandler);
NbDynamicOverlayHandler.ɵfac = function NbDynamicOverlayHandler_Factory(t) { return new (t || NbDynamicOverlayHandler)(ɵngcc0.ɵɵinject(NbPositionBuilderService), ɵngcc0.ɵɵinject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵinject(NbDynamicOverlay)); };
NbDynamicOverlayHandler.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbDynamicOverlayHandler, factory: function (t) { return NbDynamicOverlayHandler.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDynamicOverlayHandler, [{
        type: Injectable
    }], function () { return [{ type: NbPositionBuilderService }, { type: NbTriggerStrategyBuilderService }, { type: NbDynamicOverlay }]; }, null); })();
    return NbDynamicOverlayHandler;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Overlay container.
 * Renders provided content inside.
 *
 * @styles
 *
 * popover-text-color:
 * popover-text-font-family:
 * popover-text-font-size:
 * popover-text-font-weight:
 * popover-text-line-height:
 * popover-background-color:
 * popover-border-width:
 * popover-border-color:
 * popover-border-radius:
 * popover-shadow:
 * popover-arrow-size:
 * popover-padding:
 * */
var NbPopoverComponent = /** @class */ (function (_super) {
    __extends(NbPopoverComponent, _super);
    function NbPopoverComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbPopoverComponent.prototype.renderContent = function () {
        this.detachContent();
        this.attachContent();
    };
    NbPopoverComponent.prototype.detachContent = function () {
        this.overlayContainer.detach();
    };
    NbPopoverComponent.prototype.attachContent = function () {
        if (this.content instanceof TemplateRef) {
            this.attachTemplate();
        }
        else if (this.content instanceof Type) {
            this.attachComponent();
        }
        else {
            this.attachString();
        }
    };
    NbPopoverComponent.prototype.attachTemplate = function () {
        this.overlayContainer
            .attachTemplatePortal(new NbTemplatePortal(this.content, null, { $implicit: this.context }));
    };
    NbPopoverComponent.prototype.attachComponent = function () {
        var portal = new NbComponentPortal(this.content, null, null, this.cfr);
        var ref = this.overlayContainer.attachComponentPortal(portal, this.context);
        ref.changeDetectorRef.detectChanges();
    };
    NbPopoverComponent.prototype.attachString = function () {
        this.overlayContainer.attachStringContent(this.content);
    };
    __decorate([
        ViewChild(NbOverlayContainerComponent),
        __metadata("design:type", NbOverlayContainerComponent)
    ], NbPopoverComponent.prototype, "overlayContainer", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbPopoverComponent.prototype, "content", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbPopoverComponent.prototype, "context", void 0);
    __decorate([
        Input(),
        __metadata("design:type", ComponentFactoryResolver)
    ], NbPopoverComponent.prototype, "cfr", void 0);
NbPopoverComponent.ɵfac = function NbPopoverComponent_Factory(t) { return ɵNbPopoverComponent_BaseFactory(t || NbPopoverComponent); };
NbPopoverComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbPopoverComponent, selectors: [["nb-popover"]], viewQuery: function NbPopoverComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(NbOverlayContainerComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.overlayContainer = _t.first);
    } }, inputs: { content: "content", context: "context", cfr: "cfr" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 0, consts: [[1, "arrow"]], template: function NbPopoverComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "span", 0);
        ɵngcc0.ɵɵelement(1, "nb-overlay-container");
    } }, directives: [NbOverlayContainerComponent], styles: ["[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;width:0;height:0}"] });
var ɵNbPopoverComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPopoverComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPopoverComponent, [{
        type: Component,
        args: [{
                selector: 'nb-popover',
                template: "\n    <span class=\"arrow\"></span>\n    <nb-overlay-container></nb-overlay-container>\n  ",
                styles: [":host .arrow{position:absolute;width:0;height:0}\n"]
            }]
    }], null, { overlayContainer: [{
            type: ViewChild,
            args: [NbOverlayContainerComponent]
        }], content: [{
            type: Input
        }], context: [{
            type: Input
        }], cfr: [{
            type: Input
        }] }); })();
    return NbPopoverComponent;
}(NbPositionedContainer));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Powerful popover directive, which provides the best UX for your users.
 *
 * @stacked-example(Showcase, popover/popover-showcase.component)
 *
 * Popover can accept different content such as:
 * TemplateRef
 *
 * ```html
 * <button [nbPopover]="templateRef"></button>
 * <ng-template #templateRef>
 *   <span>Hello, Popover!</span>
 * </ng-template>
 * ```
 * ### Installation
 *
 * Import `NbPopoverModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbPopoverModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Custom components
 *
 * ```html
 * <button [nbPopover]="MyPopoverComponent"></button>
 * ```
 *
 * Both custom components and templateRef popovers can receive *contentContext* property
 * that will be passed to the content props.
 *
 * Primitive types
 *
 * ```html
 * <button nbPopover="Hello, Popover!"></button>
 * ```
 *
 * Popover has different placements, such as: top, bottom, left, right, start and end
 * which can be used as following:
 *
 * @stacked-example(Placements, popover/popover-placements.component)
 *
 * By default popover will try to adjust itself to maximally fit viewport
 * and provide the best user experience. It will try to change position of the popover container.
 * If you want to disable this behaviour set it `noop`.
 *
 * ```html
 * <button nbPopover="Hello, Popover!" nbPopoverAdjustment="noop"></button>
 * ```
 *
 * Popover has a number of triggers which provides an ability to show and hide the component in different ways:
 *
 * - Click mode shows the component when a user clicks on the host element and hides when the user clicks
 * somewhere on the document outside the component.
 * - Hint provides capability to show the component when the user hovers over the host element
 * and hide when the user hovers out of the host.
 * - Hover works like hint mode with one exception - when the user moves mouse from host element to
 * the container element the component remains open, so that it is possible to interact with it content.
 * - Focus mode is applied when user focuses the element.
 * - Noop mode - the component won't react to the user interaction.
 *
 * @stacked-example(Available Triggers, popover/popover-modes.component.html)
 *
 * Noop mode is especially useful when you need to control Popover programmatically, for example show/hide
 * as a result of some third-party action, like HTTP request or validation check:
 *
 * @stacked-example(Manual Control, popover/popover-noop.component)
 *
 * Below are examples for manual popover settings control, both via template binding and code.
 * @stacked-example(Popover Settings, popover/popover-dynamic.component)
 *
 * Please note, while manipulating Popover setting via code, you need to call `rebuild()` method to apply the settings
 * changed.
 * @stacked-example(Popover Settings Code, popover/popover-dynamic-code.component)
 *
 * @additional-example(Template Ref, popover/popover-template-ref.component)
 * @additional-example(Custom Component, popover/popover-custom-component.component)
 * */
var NbPopoverDirective = /** @class */ (function () {
    function NbPopoverDirective(hostRef, dynamicOverlayHandler) {
        this.hostRef = hostRef;
        this.dynamicOverlayHandler = dynamicOverlayHandler;
        this.popoverComponent = NbPopoverComponent;
        this.destroy$ = new Subject();
        /**
         * Container content context. Will be applied to the rendered component.
         * */
        this.context = {};
        /**
         * Position will be calculated relatively host element based on the position.
         * Can be top, right, bottom, left, start or end.
         * */
        this.position = NbPosition.TOP;
        this._adjustment = NbAdjustment.CLOCKWISE;
        /**
         * Describes when the container will be shown.
         * Available options: `click`, `hover`, `hint`, `focus` and `noop`
         * */
        this.trigger = NbTrigger.CLICK;
        /**
         * Sets popover offset
         * */
        this.offset = 15;
        this.popoverClass = '';
        this.nbPopoverShowStateChange = new EventEmitter();
    }
    Object.defineProperty(NbPopoverDirective.prototype, "adjustment", {
        /**
         * Container position will be changes automatically based on this strategy if container can't fit view port.
         * Set this property to `noop` value if you want to disable automatically adjustment.
         * Available values: `clockwise` (default), `counterclockwise`, `vertical`, `horizontal`, `noop`.
         * */
        get: function () {
            return this._adjustment;
        },
        set: function (value) {
            if (!value) {
                // @breaking-change Remove @5.0.0
                console.warn("Falsy values for 'nbPopoverAdjustment' are deprecated and will be removed in Nebular 5.\n Use 'noop' instead.");
                value = NbAdjustment.NOOP;
            }
            this._adjustment = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbPopoverDirective.prototype, "isShown", {
        get: function () {
            return !!(this.dynamicOverlay && this.dynamicOverlay.isAttached);
        },
        enumerable: true,
        configurable: true
    });
    NbPopoverDirective.prototype.ngOnInit = function () {
        this.dynamicOverlayHandler
            .host(this.hostRef)
            .componentType(this.popoverComponent);
    };
    NbPopoverDirective.prototype.ngOnChanges = function () {
        this.rebuild();
    };
    NbPopoverDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.dynamicOverlay = this.configureDynamicOverlay()
            .build();
        this.dynamicOverlay.isShown
            .pipe(skip(1), takeUntil(this.destroy$))
            .subscribe(function (isShown) { return _this.nbPopoverShowStateChange.emit({ isShown: isShown }); });
    };
    NbPopoverDirective.prototype.rebuild = function () {
        this.dynamicOverlay = this.configureDynamicOverlay()
            .rebuild();
    };
    NbPopoverDirective.prototype.show = function () {
        this.dynamicOverlay.show();
    };
    NbPopoverDirective.prototype.hide = function () {
        this.dynamicOverlay.hide();
    };
    NbPopoverDirective.prototype.toggle = function () {
        this.dynamicOverlay.toggle();
    };
    NbPopoverDirective.prototype.ngOnDestroy = function () {
        this.dynamicOverlayHandler.destroy();
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbPopoverDirective.prototype.configureDynamicOverlay = function () {
        return this.dynamicOverlayHandler
            .position(this.position)
            .trigger(this.trigger)
            .offset(this.offset)
            .adjustment(this.adjustment)
            .content(this.content)
            .context(this.context)
            .overlayConfig({ panelClass: this.popoverClass });
    };
    __decorate([
        Input('nbPopover'),
        __metadata("design:type", Object)
    ], NbPopoverDirective.prototype, "content", void 0);
    __decorate([
        Input('nbPopoverContext'),
        __metadata("design:type", Object)
    ], NbPopoverDirective.prototype, "context", void 0);
    __decorate([
        Input('nbPopoverPlacement'),
        __metadata("design:type", String)
    ], NbPopoverDirective.prototype, "position", void 0);
    __decorate([
        Input('nbPopoverAdjustment'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbPopoverDirective.prototype, "adjustment", null);
    __decorate([
        Input('nbPopoverTrigger'),
        __metadata("design:type", String)
    ], NbPopoverDirective.prototype, "trigger", void 0);
    __decorate([
        Input('nbPopoverOffset'),
        __metadata("design:type", Object)
    ], NbPopoverDirective.prototype, "offset", void 0);
    __decorate([
        Input('nbPopoverClass'),
        __metadata("design:type", String)
    ], NbPopoverDirective.prototype, "popoverClass", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbPopoverDirective.prototype, "nbPopoverShowStateChange", void 0);
    NbPopoverDirective = __decorate([ __metadata("design:paramtypes", [ElementRef,
            NbDynamicOverlayHandler])
    ], NbPopoverDirective);
NbPopoverDirective.ɵfac = function NbPopoverDirective_Factory(t) { return new (t || NbPopoverDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbDynamicOverlayHandler)); };
NbPopoverDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbPopoverDirective, selectors: [["", "nbPopover", ""]], inputs: { context: ["nbPopoverContext", "context"], position: ["nbPopoverPlacement", "position"], trigger: ["nbPopoverTrigger", "trigger"], offset: ["nbPopoverOffset", "offset"], popoverClass: ["nbPopoverClass", "popoverClass"], adjustment: ["nbPopoverAdjustment", "adjustment"], content: ["nbPopover", "content"] }, outputs: { nbPopoverShowStateChange: "nbPopoverShowStateChange" }, exportAs: ["nbPopover"], features: [ɵngcc0.ɵɵProvidersFeature([NbDynamicOverlayHandler, NbDynamicOverlay]), ɵngcc0.ɵɵNgOnChangesFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPopoverDirective, [{
        type: Directive,
        args: [{
                selector: '[nbPopover]',
                exportAs: 'nbPopover',
                providers: [NbDynamicOverlayHandler, NbDynamicOverlay]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NbDynamicOverlayHandler }]; }, { context: [{
            type: Input,
            args: ['nbPopoverContext']
        }], position: [{
            type: Input,
            args: ['nbPopoverPlacement']
        }], trigger: [{
            type: Input,
            args: ['nbPopoverTrigger']
        }], offset: [{
            type: Input,
            args: ['nbPopoverOffset']
        }], popoverClass: [{
            type: Input,
            args: ['nbPopoverClass']
        }], nbPopoverShowStateChange: [{
            type: Output
        }], adjustment: [{
            type: Input,
            args: ['nbPopoverAdjustment']
        }], content: [{
            type: Input,
            args: ['nbPopover']
        }] }); })();
    return NbPopoverDirective;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbPopoverModule = /** @class */ (function () {
    function NbPopoverModule() {
    }
NbPopoverModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbPopoverModule });
NbPopoverModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbPopoverModule_Factory(t) { return new (t || NbPopoverModule)(); }, imports: [[NbOverlayModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbPopoverModule, { declarations: [NbPopoverDirective,
        NbPopoverComponent], imports: [NbOverlayModule], exports: [NbPopoverDirective] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPopoverModule, [{
        type: NgModule,
        args: [{
                imports: [NbOverlayModule],
                declarations: [NbPopoverDirective, NbPopoverComponent],
                exports: [NbPopoverDirective],
                entryComponents: [NbPopoverComponent]
            }]
    }], function () { return []; }, null); })();
    return NbPopoverModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Context menu component used as content within NbContextMenuDirective.
 *
 * @styles
 *
 * context-menu-background-color:
 * context-menu-border-color:
 * context-menu-border-style:
 * context-menu-border-width:
 * context-menu-border-radius:
 * context-menu-text-align:
 * context-menu-min-width:
 * context-menu-max-width:
 * context-menu-shadow:
 * */
var NbContextMenuComponent = /** @class */ (function (_super) {
    __extends(NbContextMenuComponent, _super);
    function NbContextMenuComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.items = [];
        _this.context = { items: [] };
        return _this;
    }
    /**
     * The method is empty since we don't need to do anything additionally
     * render is handled by change detection
     */
    NbContextMenuComponent.prototype.renderContent = function () { };
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbContextMenuComponent.prototype, "items", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbContextMenuComponent.prototype, "tag", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbContextMenuComponent.prototype, "context", void 0);
NbContextMenuComponent.ɵfac = function NbContextMenuComponent_Factory(t) { return ɵNbContextMenuComponent_BaseFactory(t || NbContextMenuComponent); };
NbContextMenuComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbContextMenuComponent, selectors: [["nb-context-menu"]], inputs: { items: "items", tag: "tag", context: "context" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 1, vars: 2, consts: [[1, "context-menu", 3, "items", "tag"]], template: function NbContextMenuComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "nb-menu", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("items", ctx.context.items)("tag", ctx.context.tag);
    } }, directives: [NbMenuComponent], encapsulation: 2 });
var ɵNbContextMenuComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbContextMenuComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbContextMenuComponent, [{
        type: Component,
        args: [{
                selector: 'nb-context-menu',
                template: "\n    <nb-menu class=\"context-menu\" [items]=\"context.items\" [tag]=\"context.tag\"></nb-menu>\n  "
            }]
    }], null, { items: [{
            type: Input
        }], tag: [{
            type: Input
        }], context: [{
            type: Input
        }] }); })();
    return NbContextMenuComponent;
}(NbPositionedContainer));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Full featured context menu directive.
 *
 * @stacked-example(Showcase, context-menu/context-menu-showcase.component)
 *
 * Just pass menu items array:
 *
 * ```html
 * <button [nbContextMenu]="items"></button>
 * ...
 * items = [{ title: 'Profile' }, { title: 'Log out' }];
 * ```
 * ### Installation
 *
 * Import `NbContextMenuModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbContextMenuModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * Also make sure `NbMenuModule` is imported to your `app.module`.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbMenuModule.forRoot(),
 *   ],
 * })
 * export class AppModule { }
 * ```
 *
 * ### Usage
 *
 * If you want to handle context menu clicks you have to pass `nbContextMenuTag`
 * param and register to events using NbMenuService.
 * `NbContextMenu` renders plain `NbMenu` inside, so
 * you have to work with it just like with `NbMenu` component:
 *
 * @stacked-example(Menu item click, context-menu/context-menu-click.component)
 *
 * Context menu has different placements, such as: top, bottom, left and right
 * which can be used as following:
 *
 * ```html
 * <button [nbContextMenu]="items" nbContextMenuPlacement="right"></button>
 * ```
 *
 * ```ts
 * items = [{ title: 'Profile' }, { title: 'Log out' }];
 * ```
 *
 * By default context menu will try to adjust itself to maximally fit viewport
 * and provide the best user experience. It will try to change position of the context menu.
 * If you wanna disable this behaviour just set it falsy value.
 *
 * ```html
 * <button [nbContextMenu]="items" nbContextMenuAdjustment="counterclockwise"></button>
 * ```
 *
 * ```ts
 * items = [{ title: 'Profile' }, { title: 'Log out' }];
 * ```
 * Context menu has a number of triggers which provides an ability to show and hide the component in different ways:
 *
 * - Click mode shows the component when a user clicks on the host element and hides when the user clicks
 * somewhere on the document outside the component.
 * - Hint provides capability to show the component when the user hovers over the host element
 * and hide when the user hovers out of the host.
 * - Hover works like hint mode with one exception - when the user moves mouse from host element to
 * the container element the component remains open, so that it is possible to interact with it content.
 * - Focus mode is applied when user focuses the element.
 * - Noop mode - the component won't react to the user interaction.
 *
 * @stacked-example(Available Triggers, context-menu/context-menu-modes.component.html)
 *
 * Noop mode is especially useful when you need to control Popover programmatically, for example show/hide
 * as a result of some third-party action, like HTTP request or validation check:
 *
 * @stacked-example(Manual Control, context-menu/context-menu-noop.component)
 *
 * @stacked-example(Manual Control, context-menu/context-menu-right-click.component)
 * */
var NbContextMenuDirective = /** @class */ (function () {
    function NbContextMenuDirective(hostRef, menuService, dynamicOverlayHandler) {
        this.hostRef = hostRef;
        this.menuService = menuService;
        this.dynamicOverlayHandler = dynamicOverlayHandler;
        this.contextMenuHost = true;
        /**
         * Position will be calculated relatively host element based on the position.
         * Can be top, right, bottom and left.
         * */
        this.position = NbPosition.BOTTOM;
        /**
         * Container position will be changes automatically based on this strategy if container can't fit view port.
         * Set this property to any falsy value if you want to disable automatically adjustment.
         * Available values: clockwise, counterclockwise.
         * */
        this.adjustment = NbAdjustment.CLOCKWISE;
        /**
         * Describes when the container will be shown.
         * Available options: `click`, `hover`, `hint`, `focus` and `noop`
         * */
        this.trigger = NbTrigger.CLICK;
        this.contextMenuClass = '';
        this.destroy$ = new Subject();
        this._items = [];
    }
    Object.defineProperty(NbContextMenuDirective.prototype, "items", {
        /**
         * Basic menu items, will be passed to the internal NbMenuComponent.
         * */
        set: function (items) {
            this.validateItems(items);
            this._items = items;
        },
        enumerable: true,
        configurable: true
    });
    
    NbContextMenuDirective.prototype.ngOnInit = function () {
        this.dynamicOverlayHandler
            .host(this.hostRef)
            .componentType(NbContextMenuComponent);
    };
    NbContextMenuDirective.prototype.ngOnChanges = function () {
        this.rebuild();
    };
    NbContextMenuDirective.prototype.ngAfterViewInit = function () {
        this.dynamicOverlay = this.configureDynamicOverlay()
            .build();
        this.subscribeOnItemClick();
    };
    NbContextMenuDirective.prototype.rebuild = function () {
        this.dynamicOverlay = this.configureDynamicOverlay()
            .rebuild();
    };
    NbContextMenuDirective.prototype.show = function () {
        this.dynamicOverlay.show();
    };
    NbContextMenuDirective.prototype.hide = function () {
        this.dynamicOverlay.hide();
    };
    NbContextMenuDirective.prototype.toggle = function () {
        this.dynamicOverlay.toggle();
    };
    NbContextMenuDirective.prototype.ngOnDestroy = function () {
        this.dynamicOverlayHandler.destroy();
    };
    NbContextMenuDirective.prototype.configureDynamicOverlay = function () {
        return this.dynamicOverlayHandler
            .position(this.position)
            .trigger(this.trigger)
            .adjustment(this.adjustment)
            .context({
            position: this.position,
            items: this._items,
            tag: this.tag,
        })
            .overlayConfig({ panelClass: this.contextMenuClass });
    };
    /*
     * NbMenuComponent will crash if don't pass menu items to it.
     * So, we just validating them and throw custom obvious error.
     * */
    NbContextMenuDirective.prototype.validateItems = function (items) {
        if (!items || !items.length) {
            throw Error("List of menu items expected, but given: " + items);
        }
    };
    NbContextMenuDirective.prototype.subscribeOnItemClick = function () {
        var _this = this;
        this.menuService.onItemClick()
            .pipe(filter(function (_a) {
            var tag = _a.tag;
            return tag === _this.tag;
        }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.hide(); });
    };
    __decorate([
        HostBinding('class.context-menu-host'),
        __metadata("design:type", Object)
    ], NbContextMenuDirective.prototype, "contextMenuHost", void 0);
    __decorate([
        Input('nbContextMenuPlacement'),
        __metadata("design:type", String)
    ], NbContextMenuDirective.prototype, "position", void 0);
    __decorate([
        Input('nbContextMenuAdjustment'),
        __metadata("design:type", String)
    ], NbContextMenuDirective.prototype, "adjustment", void 0);
    __decorate([
        Input('nbContextMenuTag'),
        __metadata("design:type", String)
    ], NbContextMenuDirective.prototype, "tag", void 0);
    __decorate([
        Input('nbContextMenu'),
        __metadata("design:type", Array),
        __metadata("design:paramtypes", [Array])
    ], NbContextMenuDirective.prototype, "items", null);
    __decorate([
        Input('nbContextMenuTrigger'),
        __metadata("design:type", String)
    ], NbContextMenuDirective.prototype, "trigger", void 0);
    __decorate([
        Input('nbContextMenuClass'),
        __metadata("design:type", String)
    ], NbContextMenuDirective.prototype, "contextMenuClass", void 0);
    NbContextMenuDirective = __decorate([ __metadata("design:paramtypes", [ElementRef,
            NbMenuService,
            NbDynamicOverlayHandler])
    ], NbContextMenuDirective);
NbContextMenuDirective.ɵfac = function NbContextMenuDirective_Factory(t) { return new (t || NbContextMenuDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbMenuService), ɵngcc0.ɵɵdirectiveInject(NbDynamicOverlayHandler)); };
NbContextMenuDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbContextMenuDirective, selectors: [["", "nbContextMenu", ""]], hostVars: 2, hostBindings: function NbContextMenuDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("context-menu-host", ctx.contextMenuHost);
    } }, inputs: { position: ["nbContextMenuPlacement", "position"], adjustment: ["nbContextMenuAdjustment", "adjustment"], trigger: ["nbContextMenuTrigger", "trigger"], contextMenuClass: ["nbContextMenuClass", "contextMenuClass"], items: ["nbContextMenu", "items"], tag: ["nbContextMenuTag", "tag"] }, features: [ɵngcc0.ɵɵProvidersFeature([NbDynamicOverlayHandler, NbDynamicOverlay]), ɵngcc0.ɵɵNgOnChangesFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbContextMenuDirective, [{
        type: Directive,
        args: [{
                selector: '[nbContextMenu]',
                providers: [NbDynamicOverlayHandler, NbDynamicOverlay]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NbMenuService }, { type: NbDynamicOverlayHandler }]; }, { contextMenuHost: [{
            type: HostBinding,
            args: ['class.context-menu-host']
        }], position: [{
            type: Input,
            args: ['nbContextMenuPlacement']
        }], adjustment: [{
            type: Input,
            args: ['nbContextMenuAdjustment']
        }], trigger: [{
            type: Input,
            args: ['nbContextMenuTrigger']
        }], contextMenuClass: [{
            type: Input,
            args: ['nbContextMenuClass']
        }], items: [{
            type: Input,
            args: ['nbContextMenu']
        }], tag: [{
            type: Input,
            args: ['nbContextMenuTag']
        }] }); })();
    return NbContextMenuDirective;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbContextMenuModule = /** @class */ (function () {
    function NbContextMenuModule() {
    }
NbContextMenuModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbContextMenuModule });
NbContextMenuModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbContextMenuModule_Factory(t) { return new (t || NbContextMenuModule)(); }, imports: [[CommonModule, NbOverlayModule, NbMenuModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbContextMenuModule, { declarations: function () { return [NbContextMenuDirective,
        NbContextMenuComponent]; }, imports: function () { return [CommonModule,
        NbOverlayModule,
        NbMenuModule]; }, exports: function () { return [NbContextMenuDirective]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbContextMenuModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule, NbOverlayModule, NbMenuModule],
                exports: [NbContextMenuDirective],
                declarations: [NbContextMenuDirective, NbContextMenuComponent],
                entryComponents: [NbContextMenuComponent]
            }]
    }], function () { return []; }, null); })();
    return NbContextMenuModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Progress Bar is a component for indicating progress.
 *
 * Simple usage:
 *
 * ```html
 * <nb-progress-bar [value]="50"></nb-progress-bar>
 * ```
 * ### Installation
 *
 * Import `NbProgressBarModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbProgressBarModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Progress bar accepts property `value` in range 0-100
 * @stacked-example(Progress bar, progress-bar/progress-bar-showcase.component)
 *
 * Progress bar background could be configured by providing a `status` property:
 * @stacked-example(Progress bar status, progress-bar/progress-bar-status.component)
 *
 * Progress bar size (height and font-size) could be configured by providing a `size` property:
 * @stacked-example(Progress bar size, progress-bar/progress-bar-size.component)
 *
 * `displayValue` property shows current value inside progress bar. It's also possible to add custom text inside:
 * @stacked-example(Progress bar value, progress-bar/progress-bar-value.component)
 *
 * Progress bar supports `width` and `background-color` transition:
 * @stacked-example(Progress bar interactive, progress-bar/progress-bar-interactive.component)
 *
 * @styles
 *
 * progress-bar-animation-duration:
 * progress-bar-border-radius:
 * progress-bar-text-font-family:
 * progress-bar-tiny-height:
 * progress-bar-tiny-text-font-size:
 * progress-bar-tiny-text-font-weight:
 * progress-bar-tiny-text-line-height:
 * progress-bar-small-height:
 * progress-bar-small-text-font-size:
 * progress-bar-small-text-font-weight:
 * progress-bar-small-text-line-height:
 * progress-bar-medium-height:
 * progress-bar-medium-text-font-size:
 * progress-bar-medium-text-font-weight:
 * progress-bar-medium-text-line-height:
 * progress-bar-large-height:
 * progress-bar-large-text-font-size:
 * progress-bar-large-text-font-weight:
 * progress-bar-large-text-line-height:
 * progress-bar-giant-height:
 * progress-bar-giant-text-font-size:
 * progress-bar-giant-text-font-weight:
 * progress-bar-giant-text-line-height:
 * progress-bar-basic-background-color:
 * progress-bar-basic-filled-background-color:
 * progress-bar-basic-text-color:
 * progress-bar-primary-background-color:
 * progress-bar-primary-filled-background-color:
 * progress-bar-primary-text-color:
 * progress-bar-success-background-color:
 * progress-bar-success-filled-background-color:
 * progress-bar-success-text-color:
 * progress-bar-info-background-color:
 * progress-bar-info-filled-background-color:
 * progress-bar-info-text-color:
 * progress-bar-warning-background-color:
 * progress-bar-warning-filled-background-color:
 * progress-bar-warning-text-color:
 * progress-bar-danger-background-color:
 * progress-bar-danger-filled-background-color:
 * progress-bar-danger-text-color:
 * progress-bar-control-background-color:
 * progress-bar-control-filled-background-color:
 * progress-bar-control-text-color:
 */
var NbProgressBarComponent = /** @class */ (function () {
    function NbProgressBarComponent() {
        /**
         * Progress bar value in percent (0 - 100)
         */
        this.value = 0;
        /**
         * Progress bar background (`basic` (default), `primary`, `info`, `success`, `warning`, `danger`, `control`)
         */
        this.status = 'basic';
        /**
         * Progress bar size (`tiny`, `small`, `medium` (default), `large`, `giant`)
         */
        this.size = 'medium';
        /**
         * Displays value inside progress bar
         */
        this.displayValue = false;
    }
    Object.defineProperty(NbProgressBarComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbProgressBarComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbProgressBarComponent.prototype, "value", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbProgressBarComponent.prototype, "status", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbProgressBarComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbProgressBarComponent.prototype, "displayValue", void 0);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbProgressBarComponent.prototype, "control", null);
NbProgressBarComponent.ɵfac = function NbProgressBarComponent_Factory(t) { return new (t || NbProgressBarComponent)(); };
NbProgressBarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbProgressBarComponent, selectors: [["nb-progress-bar"]], hostVars: 24, hostBindings: function NbProgressBarComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-success", ctx.success)("status-info", ctx.info)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control);
    } }, inputs: { value: "value", status: "status", size: "size", displayValue: "displayValue" }, ngContentSelectors: _c0, decls: 4, vars: 3, consts: [[1, "progress-container"], [1, "progress-value"], [4, "ngIf"]], template: function NbProgressBarComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵtemplate(2, NbProgressBarComponent_span_2_Template, 2, 1, "span", 2);
        ɵngcc0.ɵɵprojection(3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵstyleProp("width", ctx.value, "%");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.displayValue);
    } }, directives: [ɵngcc2.NgIf], styles: ["[_nghost-%COMP%]{display:block}.progress-container[_ngcontent-%COMP%]{overflow:hidden}.progress-value[_ngcontent-%COMP%]{height:100%;text-align:center;overflow:hidden}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbProgressBarComponent, [{
        type: Component,
        args: [{
                selector: 'nb-progress-bar',
                template: "\n    <div class=\"progress-container\">\n      <div class=\"progress-value\" [style.width.%]=\"value\">\n        <span *ngIf=\"displayValue\">{{ value }}%</span>\n        <ng-content></ng-content>\n      </div>\n    </div>\n  ",
                styles: [":host{display:block}.progress-container{overflow:hidden}.progress-value{height:100%;text-align:center;overflow:hidden}\n"]
            }]
    }], function () { return []; }, { value: [{
            type: Input
        }], status: [{
            type: Input
        }], size: [{
            type: Input
        }], displayValue: [{
            type: Input
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }] }); })();
    return NbProgressBarComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbProgressBarModule = /** @class */ (function () {
    function NbProgressBarModule() {
    }
NbProgressBarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbProgressBarModule });
NbProgressBarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbProgressBarModule_Factory(t) { return new (t || NbProgressBarModule)(); }, imports: [[
            NbSharedModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbProgressBarModule, { declarations: [NbProgressBarComponent], imports: [NbSharedModule], exports: [NbProgressBarComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbProgressBarModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                ],
                declarations: [NbProgressBarComponent],
                exports: [NbProgressBarComponent]
            }]
    }], function () { return []; }, null); })();
    return NbProgressBarModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Alert component.
 *
 * Basic alert example:
 * @stacked-example(Showcase, alert/alert-showcase.component)
 *
 * Alert configuration:
 *
 * ```html
 * <nb-alert status="success">
 *   You have been successfully authenticated!
 * </nb-alert>
 * ```
 * ### Installation
 *
 * Import `NbAlertModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbAlertModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Alert could additionally have a `close` button when `closable` property is set:
 * ```html
 * <nb-alert status="success" closable (close)="onClose()">
 *   You have been successfully authenticated!
 * </nb-alert>
 * ```
 *
 * Colored alerts could be simply configured by providing a `status` property:
 * @stacked-example(Alert status, alert/alert-colors.component)
 *
 * It is also possible to assign an `accent` property for a slight alert highlight
 * as well as combine it with `status`:
 * @stacked-example(Alert accent, alert/alert-accents.component)
 *
 * And `outline` property:
 * @stacked-example(Outline Alert, alert/alert-outline.component)
 *
 * @additional-example(Multiple Sizes, alert/alert-sizes.component)
 *
 * @styles
 *
 * alert-border-radius:
 * alert-bottom-margin:
 * alert-padding:
 * alert-scrollbar-color:
 * alert-scrollbar-background-color:
 * alert-scrollbar-width:
 * alert-shadow:
 * alert-text-font-family:
 * alert-text-font-size:
 * alert-text-font-weight:
 * alert-text-line-height:
 * alert-closable-start-padding:
 * alert-tiny-height:
 * alert-small-height:
 * alert-medium-height:
 * alert-medium-padding:
 * alert-large-height:
 * alert-giant-height:
 * alert-basic-background-color:
 * alert-basic-text-color:
 * alert-primary-background-color:
 * alert-primary-text-color:
 * alert-success-background-color:
 * alert-success-text-color:
 * alert-info-background-color:
 * alert-info-text-color:
 * alert-warning-background-color:
 * alert-warning-text-color:
 * alert-danger-background-color:
 * alert-danger-text-color:
 * alert-control-background-color:
 * alert-control-text-color:
 * alert-accent-basic-color:
 * alert-accent-primary-color:
 * alert-accent-info-color:
 * alert-accent-success-color:
 * alert-accent-warning-color:
 * alert-accent-danger-color:
 * alert-accent-control-color:
 * alert-outline-width:
 * alert-outline-basic-color:
 * alert-outline-primary-color:
 * alert-outline-info-color:
 * alert-outline-success-color:
 * alert-outline-warning-color:
 * alert-outline-danger-color:
 * alert-outline-control-color:
 */
var NbAlertComponent = /** @class */ (function () {
    function NbAlertComponent() {
        /**
         * Alert size, available sizes:
         * `tiny`, `small`, `medium`, `large`, `giant`
         * Unset by default.
         */
        this.size = '';
        this._status = 'basic';
        /**
         * Alert accent (color of the top border):
         * `basic`, `primary`, `success`, `info`, `warning`, `danger`, `control`.
         * Unset by default.
         */
        this.accent = '';
        /**
         * Alert outline (color of the border):
         * `basic`, `primary`, `success`, `info`, `warning`, `danger`, `control`.
         * Unset by default.
         */
        this.outline = '';
        this._closable = false;
        /**
         * Emits when chip is removed
         * @type EventEmitter<any>
         */
        this.close = new EventEmitter();
    }
    Object.defineProperty(NbAlertComponent.prototype, "status", {
        /**
         * Alert status (adds specific styles):
         * `basic` (default), `primary`, `success`, `info`, `warning`, `danger`, `control`.
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbAlert');
                value = 'basic';
            }
            this._status = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "closable", {
        /**
         * Shows `close` icon
         */
        get: function () {
            return this._closable;
        },
        set: function (value) {
            this._closable = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Emits the removed chip event
     */
    NbAlertComponent.prototype.onClose = function () {
        this.close.emit();
    };
    Object.defineProperty(NbAlertComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "primaryAccent", {
        get: function () {
            return this.accent === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "successAccent", {
        get: function () {
            return this.accent === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "infoAccent", {
        get: function () {
            return this.accent === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "warningAccent", {
        get: function () {
            return this.accent === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "dangerAccent", {
        get: function () {
            return this.accent === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "basicAccent", {
        get: function () {
            return this.accent === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "controlAccent", {
        get: function () {
            return this.accent === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "primaryOutline", {
        get: function () {
            return this.outline === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "successOutline", {
        get: function () {
            return this.outline === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "infoOutline", {
        get: function () {
            return this.outline === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "warningOutline", {
        get: function () {
            return this.outline === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "dangerOutline", {
        get: function () {
            return this.outline === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "basicOutline", {
        get: function () {
            return this.outline === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAlertComponent.prototype, "controlOutline", {
        get: function () {
            return this.outline === 'control';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbAlertComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbAlertComponent.prototype, "status", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbAlertComponent.prototype, "accent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbAlertComponent.prototype, "outline", void 0);
    __decorate([
        Input(),
        HostBinding('class.closable'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbAlertComponent.prototype, "closable", null);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbAlertComponent.prototype, "close", void 0);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "control", null);
    __decorate([
        HostBinding('class.accent-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "primaryAccent", null);
    __decorate([
        HostBinding('class.accent-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "successAccent", null);
    __decorate([
        HostBinding('class.accent-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "infoAccent", null);
    __decorate([
        HostBinding('class.accent-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "warningAccent", null);
    __decorate([
        HostBinding('class.accent-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "dangerAccent", null);
    __decorate([
        HostBinding('class.accent-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "basicAccent", null);
    __decorate([
        HostBinding('class.accent-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "controlAccent", null);
    __decorate([
        HostBinding('class.outline-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "primaryOutline", null);
    __decorate([
        HostBinding('class.outline-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "successOutline", null);
    __decorate([
        HostBinding('class.outline-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "infoOutline", null);
    __decorate([
        HostBinding('class.outline-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "warningOutline", null);
    __decorate([
        HostBinding('class.outline-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "dangerOutline", null);
    __decorate([
        HostBinding('class.outline-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "basicOutline", null);
    __decorate([
        HostBinding('class.outline-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAlertComponent.prototype, "controlOutline", null);
NbAlertComponent.ɵfac = function NbAlertComponent_Factory(t) { return new (t || NbAlertComponent)(); };
NbAlertComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbAlertComponent, selectors: [["nb-alert"]], hostVars: 54, hostBindings: function NbAlertComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("closable", ctx.closable)("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-success", ctx.success)("status-info", ctx.info)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control)("accent-primary", ctx.primaryAccent)("accent-success", ctx.successAccent)("accent-info", ctx.infoAccent)("accent-warning", ctx.warningAccent)("accent-danger", ctx.dangerAccent)("accent-basic", ctx.basicAccent)("accent-control", ctx.controlAccent)("outline-primary", ctx.primaryOutline)("outline-success", ctx.successOutline)("outline-info", ctx.infoOutline)("outline-warning", ctx.warningOutline)("outline-danger", ctx.dangerOutline)("outline-basic", ctx.basicOutline)("outline-control", ctx.controlOutline);
    } }, inputs: { size: "size", accent: "accent", outline: "outline", status: "status", closable: "closable" }, outputs: { close: "close" }, ngContentSelectors: _c0, decls: 2, vars: 1, consts: [["type", "button", "class", "close", "aria-label", "Close", 3, "click", 4, "ngIf"], ["type", "button", "aria-label", "Close", 1, "close", 3, "click"], ["aria-hidden", "true"]], template: function NbAlertComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, NbAlertComponent_button_0_Template, 3, 0, "button", 0);
        ɵngcc0.ɵɵprojection(1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.closable);
    } }, directives: [ɵngcc2.NgIf], styles: ["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}[dir=ltr]   [_nghost-%COMP%]   .close[_ngcontent-%COMP%]{right:0}[dir=rtl]   [_nghost-%COMP%]   .close[_ngcontent-%COMP%]{left:0}.close[_ngcontent-%COMP%]{position:absolute;top:0;color:inherit;background-color:transparent;border:0;appearance:none}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAlertComponent, [{
        type: Component,
        args: [{
                selector: 'nb-alert',
                template: "\n    <button *ngIf=\"closable\" type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"onClose()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    <ng-content></ng-content>\n  ",
                styles: [":host{display:flex;flex-direction:column;position:relative}[dir=ltr] :host .close{right:0}[dir=rtl] :host .close{left:0}.close{position:absolute;top:0;color:inherit;background-color:transparent;border:0;appearance:none}\n"]
            }]
    }], function () { return []; }, { size: [{
            type: Input
        }], accent: [{
            type: Input
        }], outline: [{
            type: Input
        }], close: [{
            type: Output
        }], status: [{
            type: Input
        }], closable: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.closable']
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], primaryAccent: [{
            type: HostBinding,
            args: ['class.accent-primary']
        }], successAccent: [{
            type: HostBinding,
            args: ['class.accent-success']
        }], infoAccent: [{
            type: HostBinding,
            args: ['class.accent-info']
        }], warningAccent: [{
            type: HostBinding,
            args: ['class.accent-warning']
        }], dangerAccent: [{
            type: HostBinding,
            args: ['class.accent-danger']
        }], basicAccent: [{
            type: HostBinding,
            args: ['class.accent-basic']
        }], controlAccent: [{
            type: HostBinding,
            args: ['class.accent-control']
        }], primaryOutline: [{
            type: HostBinding,
            args: ['class.outline-primary']
        }], successOutline: [{
            type: HostBinding,
            args: ['class.outline-success']
        }], infoOutline: [{
            type: HostBinding,
            args: ['class.outline-info']
        }], warningOutline: [{
            type: HostBinding,
            args: ['class.outline-warning']
        }], dangerOutline: [{
            type: HostBinding,
            args: ['class.outline-danger']
        }], basicOutline: [{
            type: HostBinding,
            args: ['class.outline-basic']
        }], controlOutline: [{
            type: HostBinding,
            args: ['class.outline-control']
        }] }); })();
    return NbAlertComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbAlertModule = /** @class */ (function () {
    function NbAlertModule() {
    }
NbAlertModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbAlertModule });
NbAlertModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbAlertModule_Factory(t) { return new (t || NbAlertModule)(); }, imports: [[
            NbSharedModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbAlertModule, { declarations: [NbAlertComponent], imports: [NbSharedModule], exports: [NbAlertComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAlertModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                ],
                declarations: [
                    NbAlertComponent,
                ],
                exports: [
                    NbAlertComponent,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbAlertModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Chat form component.
 *
 * Show a message form with a send message button.
 *
 * ```ts
 * <nb-chat-form showButton="true" buttonIcon="nb-send">
 * </nb-chat-form>
 * ```
 *
 * When `[dropFiles]="true"` handles files drag&drop with a file preview.
 *
 * Drag & drop available for files and images:
 * @stacked-example(Drag & Drop Chat, chat/chat-drop.component)
 *
 * New message could be tracked outside by using `(send)` output.
 *
 * ```ts
 * <nb-chat-form (send)="onNewMessage($event)">
 * </nb-chat-form>
 *
 * // ...
 *
 * onNewMessage({ message: string, files: any[] }) {
 *   this.service.sendToServer(message, files);
 * }
 * ```
 */
var NbChatFormComponent = /** @class */ (function () {
    function NbChatFormComponent(cd, domSanitizer) {
        this.cd = cd;
        this.domSanitizer = domSanitizer;
        this.status = 'basic';
        this.inputFocus = false;
        this.inputHover = false;
        this.droppedFiles = [];
        this.imgDropTypes = ['image/png', 'image/jpeg', 'image/gif'];
        /**
         * Predefined message text
         * @type {string}
         */
        this.message = '';
        /**
         * Message placeholder text
         * @type {string}
         */
        this.messagePlaceholder = 'Type a message';
        /**
         * Send button title
         * @type {string}
         */
        this.buttonTitle = '';
        /**
         * Send button icon, shown if `buttonTitle` is empty
         * @type {string}
         */
        this.buttonIcon = 'paper-plane-outline';
        /**
         * Show send button
         * @type {boolean}
         */
        this.showButton = true;
        /**
         * Show send button
         * @type {boolean}
         */
        this.dropFiles = false;
        /**
         * File drop placeholder text
         * @type {string}
         */
        this.dropFilePlaceholder = 'Drop file to send';
        /**
         *
         * @type {EventEmitter<{ message: string, files: File[] }>}
         */
        this.send = new EventEmitter();
        this.fileOver = false;
    }
    NbChatFormComponent.prototype.onDrop = function (event) {
        var _this = this;
        if (this.dropFiles) {
            event.preventDefault();
            event.stopPropagation();
            this.fileOver = false;
            if (event.dataTransfer && event.dataTransfer.files) {
                var _loop_1 = function (file) {
                    var res = file;
                    if (this_1.imgDropTypes.includes(file.type)) {
                        var fr = new FileReader();
                        fr.onload = function (e) {
                            res.src = e.target.result;
                            res.urlStyle = _this.domSanitizer.bypassSecurityTrustStyle("url(" + res.src + ")");
                            _this.cd.detectChanges();
                        };
                        fr.readAsDataURL(file);
                    }
                    this_1.droppedFiles.push(res);
                };
                var this_1 = this;
                for (var _i = 0, _a = event.dataTransfer.files; _i < _a.length; _i++) {
                    var file = _a[_i];
                    _loop_1(file);
                }
            }
        }
    };
    NbChatFormComponent.prototype.removeFile = function (file) {
        var index = this.droppedFiles.indexOf(file);
        if (index >= 0) {
            this.droppedFiles.splice(index, 1);
        }
    };
    NbChatFormComponent.prototype.onDragOver = function () {
        if (this.dropFiles) {
            this.fileOver = true;
        }
    };
    NbChatFormComponent.prototype.onDragLeave = function () {
        if (this.dropFiles) {
            this.fileOver = false;
        }
    };
    NbChatFormComponent.prototype.sendMessage = function () {
        if (this.droppedFiles.length || String(this.message).trim().length) {
            this.send.emit({ message: this.message, files: this.droppedFiles });
            this.message = '';
            this.droppedFiles = [];
        }
    };
    NbChatFormComponent.prototype.setStatus = function (status) {
        if (this.status !== status) {
            this.status = status;
            this.cd.detectChanges();
        }
    };
    NbChatFormComponent.prototype.getInputStatus = function () {
        if (this.fileOver) {
            return this.getHighlightStatus();
        }
        if (this.inputFocus || this.inputHover) {
            return this.status;
        }
        return 'basic';
    };
    NbChatFormComponent.prototype.getButtonStatus = function () {
        return this.getHighlightStatus();
    };
    NbChatFormComponent.prototype.getHighlightStatus = function () {
        if (this.status === 'basic' || this.status === 'control') {
            return 'primary';
        }
        return this.status;
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatFormComponent.prototype, "message", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatFormComponent.prototype, "messagePlaceholder", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatFormComponent.prototype, "buttonTitle", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatFormComponent.prototype, "buttonIcon", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbChatFormComponent.prototype, "showButton", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbChatFormComponent.prototype, "dropFiles", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatFormComponent.prototype, "dropFilePlaceholder", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbChatFormComponent.prototype, "send", void 0);
    __decorate([
        HostBinding('class.file-over'),
        __metadata("design:type", Object)
    ], NbChatFormComponent.prototype, "fileOver", void 0);
    __decorate([
        HostListener('drop', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbChatFormComponent.prototype, "onDrop", null);
    __decorate([
        HostListener('dragover'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbChatFormComponent.prototype, "onDragOver", null);
    __decorate([
        HostListener('dragleave'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbChatFormComponent.prototype, "onDragLeave", null);
    NbChatFormComponent = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef, DomSanitizer])
    ], NbChatFormComponent);
NbChatFormComponent.ɵfac = function NbChatFormComponent_Factory(t) { return new (t || NbChatFormComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer)); };
NbChatFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbChatFormComponent, selectors: [["nb-chat-form"]], hostVars: 2, hostBindings: function NbChatFormComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("drop", function NbChatFormComponent_drop_HostBindingHandler($event) { return ctx.onDrop($event); })("dragover", function NbChatFormComponent_dragover_HostBindingHandler() { return ctx.onDragOver(); })("dragleave", function NbChatFormComponent_dragleave_HostBindingHandler() { return ctx.onDragLeave(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("file-over", ctx.fileOver);
    } }, inputs: { message: "message", messagePlaceholder: "messagePlaceholder", buttonTitle: "buttonTitle", buttonIcon: "buttonIcon", showButton: "showButton", dropFiles: "dropFiles", dropFilePlaceholder: "dropFilePlaceholder" }, outputs: { send: "send" }, decls: 4, vars: 7, consts: [["class", "dropped-files", 4, "ngIf"], [1, "message-row"], ["nbInput", "", "fullWidth", "", "type", "text", 3, "status", "ngModel", "placeholder", "focus", "blur", "mouseenter", "mouseleave", "ngModelChange", "keyup.enter"], ["nbButton", "", "class", "send-button", 3, "status", "with-icon", "click", 4, "ngIf"], [1, "dropped-files"], [4, "ngFor", "ngForOf"], [3, "background-image", 4, "ngIf"], ["icon", "file-text-outline", "pack", "nebular-essentials", 4, "ngIf"], [1, "remove", 3, "click"], ["icon", "file-text-outline", "pack", "nebular-essentials"], ["nbButton", "", 1, "send-button", 3, "status", "click"], ["pack", "nebular-essentials", 3, "icon", 4, "ngIf", "ngIfElse"], ["title", ""], ["pack", "nebular-essentials", 3, "icon"]], template: function NbChatFormComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbChatFormComponent_div_0_Template, 2, 1, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "input", 2);
        ɵngcc0.ɵɵlistener("focus", function NbChatFormComponent_Template_input_focus_2_listener() { return ctx.inputFocus = true; })("blur", function NbChatFormComponent_Template_input_blur_2_listener() { return ctx.inputFocus = false; })("mouseenter", function NbChatFormComponent_Template_input_mouseenter_2_listener() { return ctx.inputHover = true; })("mouseleave", function NbChatFormComponent_Template_input_mouseleave_2_listener() { return ctx.inputHover = false; })("ngModelChange", function NbChatFormComponent_Template_input_ngModelChange_2_listener($event) { return ctx.message = $event; })("keyup.enter", function NbChatFormComponent_Template_input_keyup_enter_2_listener() { return ctx.sendMessage(); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(3, NbChatFormComponent_button_3_Template, 4, 5, "button", 3);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.droppedFiles == null ? null : ctx.droppedFiles.length);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵclassProp("with-button", ctx.showButton);
        ɵngcc0.ɵɵpropertyInterpolate("placeholder", ctx.fileOver ? ctx.dropFilePlaceholder : ctx.messagePlaceholder);
        ɵngcc0.ɵɵproperty("status", ctx.getInputStatus())("ngModel", ctx.message);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showButton);
    } }, directives: function () { return [ɵngcc2.NgIf, NbInputDirective, ɵngcc6.DefaultValueAccessor, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc2.NgForOf, NbIconComponent,
        NbButtonComponent]; }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatFormComponent, [{
        type: Component,
        args: [{
                selector: 'nb-chat-form',
                template: "\n    <div class=\"dropped-files\" *ngIf=\"droppedFiles?.length\">\n      <ng-container *ngFor=\"let file of droppedFiles\">\n        <div *ngIf=\"file.urlStyle\" [style.background-image]=\"file.urlStyle\">\n          <span class=\"remove\" (click)=\"removeFile(file)\">&times;</span>\n        </div>\n\n        <div>\n          <nb-icon *ngIf=\"!file.urlStyle\" icon=\"file-text-outline\" pack=\"nebular-essentials\"></nb-icon>\n          <span class=\"remove\" (click)=\"removeFile(file)\">&times;</span>\n        </div>\n      </ng-container>\n    </div>\n    <div class=\"message-row\">\n      <input nbInput\n             fullWidth\n             [status]=\"getInputStatus()\"\n             (focus)=\"inputFocus = true\"\n             (blur)=\"inputFocus = false\"\n             (mouseenter)=\"inputHover = true\"\n             (mouseleave)=\"inputHover = false\"\n             [(ngModel)]=\"message\"\n             [class.with-button]=\"showButton\"\n             type=\"text\"\n             placeholder=\"{{ fileOver ? dropFilePlaceholder : messagePlaceholder }}\"\n             (keyup.enter)=\"sendMessage()\">\n      <button nbButton\n              [status]=\"getButtonStatus()\"\n              *ngIf=\"showButton\"\n              [class.with-icon]=\"!buttonTitle\"\n              (click)=\"sendMessage()\"\n              class=\"send-button\">\n        <nb-icon *ngIf=\"!buttonTitle; else title\" [icon]=\"buttonIcon\" pack=\"nebular-essentials\"></nb-icon>\n        <ng-template #title>{{ buttonTitle }}</ng-template>\n      </button>\n    </div>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc4.DomSanitizer }]; }, { message: [{
            type: Input
        }], messagePlaceholder: [{
            type: Input
        }], buttonTitle: [{
            type: Input
        }], buttonIcon: [{
            type: Input
        }], showButton: [{
            type: Input
        }], dropFiles: [{
            type: Input
        }], dropFilePlaceholder: [{
            type: Input
        }], send: [{
            type: Output
        }], fileOver: [{
            type: HostBinding,
            args: ['class.file-over']
        }], onDrop: [{
            type: HostListener,
            args: ['drop', ['$event']]
        }], onDragOver: [{
            type: HostListener,
            args: ['dragover']
        }], onDragLeave: [{
            type: HostListener,
            args: ['dragleave']
        }] }); })();
    return NbChatFormComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Chat message component.
 *
 * Multiple message types are available through a `type` property, such as
 * - text - simple text message
 * - file - could be a file preview or a file icon
 * if multiple files are provided grouped files are shown
 * - quote - quotes a message with specific quote styles
 * - map - shows a google map picture by provided [latitude] and [longitude] properties
 *
 * @stacked-example(Available Types, chat/chat-message-types-showcase.component)
 *
 * Message with attached files:
 * ```html
 * <nb-chat-message
 *   type="file"
 *   [files]="[ { url: '...' } ]"
 *   message="Hello world!">
 * </nb-chat-message>
 * ```
 *
 * Map message:
 * ```html
 * <nb-chat-message
 *   type="map"
 *   [latitude]="53.914"
 *   [longitude]="27.59"
 *   message="Here I am">
 * </nb-chat-message>
 * ```
 *
 * @styles
 *
 * chat-message-background:
 * chat-message-text-color:
 * chat-message-reply-background-color:
 * chat-message-reply-text-color:
 * chat-message-avatar-background-color:
 * chat-message-sender-text-color:
 * chat-message-quote-background-color:
 * chat-message-quote-text-color:
 * chat-message-file-text-color:
 * chat-message-file-background-color:
 */
var NbChatMessageComponent = /** @class */ (function () {
    function NbChatMessageComponent(domSanitizer) {
        this.domSanitizer = domSanitizer;
        this._reply = false;
    }
    Object.defineProperty(NbChatMessageComponent.prototype, "flyInOut", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatMessageComponent.prototype, "notReply", {
        get: function () {
            return !this.reply;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatMessageComponent.prototype, "reply", {
        /**
         * Determines if a message is a reply
         */
        get: function () {
            return this._reply;
        },
        set: function (value) {
            this._reply = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatMessageComponent.prototype, "avatar", {
        /**
         * Message send avatar
         * @type {string}
         */
        set: function (value) {
            this.avatarStyle = value ? this.domSanitizer.bypassSecurityTrustStyle("url(" + value + ")") : null;
        },
        enumerable: true,
        configurable: true
    });
    NbChatMessageComponent.prototype.getInitials = function () {
        if (this.sender) {
            var names = this.sender.split(' ');
            return names.map(function (n) { return n.charAt(0); }).splice(0, 2).join('').toUpperCase();
        }
        return '';
    };
    __decorate([
        HostBinding('@flyInOut'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbChatMessageComponent.prototype, "flyInOut", null);
    __decorate([
        HostBinding('class.not-reply'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbChatMessageComponent.prototype, "notReply", null);
    __decorate([
        Input(),
        HostBinding('class.reply'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbChatMessageComponent.prototype, "reply", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageComponent.prototype, "message", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageComponent.prototype, "sender", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Date)
    ], NbChatMessageComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageComponent.prototype, "dateFormat", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbChatMessageComponent.prototype, "files", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageComponent.prototype, "quote", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbChatMessageComponent.prototype, "latitude", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbChatMessageComponent.prototype, "longitude", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbChatMessageComponent.prototype, "avatar", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageComponent.prototype, "type", void 0);
    NbChatMessageComponent = __decorate([ __metadata("design:paramtypes", [DomSanitizer])
    ], NbChatMessageComponent);
NbChatMessageComponent.ɵfac = function NbChatMessageComponent_Factory(t) { return new (t || NbChatMessageComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer)); };
NbChatMessageComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbChatMessageComponent, selectors: [["nb-chat-message"]], hostVars: 5, hostBindings: function NbChatMessageComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵupdateSyntheticHostBinding("@flyInOut", ctx.flyInOut);
        ɵngcc0.ɵɵclassProp("not-reply", ctx.notReply)("reply", ctx.reply);
    } }, inputs: { reply: "reply", avatar: "avatar", message: "message", sender: "sender", date: "date", dateFormat: "dateFormat", files: "files", quote: "quote", latitude: "latitude", longitude: "longitude", type: "type" }, decls: 7, vars: 5, consts: [["class", "avatar", 3, "background-image", 4, "ngIf"], [1, "message"], [3, "ngSwitch"], [3, "sender", "date", "dateFormat", "message", "files", 4, "ngSwitchCase"], [3, "sender", "date", "dateFormat", "message", "quote", 4, "ngSwitchCase"], [3, "sender", "date", "message", "latitude", "longitude", 4, "ngSwitchCase"], [3, "sender", "date", "dateFormat", "message", 4, "ngSwitchDefault"], [1, "avatar"], [4, "ngIf"], [3, "sender", "date", "dateFormat", "message", "files"], [3, "sender", "date", "dateFormat", "message", "quote"], [3, "sender", "date", "message", "latitude", "longitude"], [3, "sender", "date", "dateFormat", "message"]], template: function NbChatMessageComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbChatMessageComponent_div_0_Template, 2, 3, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelementContainerStart(2, 2);
        ɵngcc0.ɵɵtemplate(3, NbChatMessageComponent_nb_chat_message_file_3_Template, 1, 5, "nb-chat-message-file", 3);
        ɵngcc0.ɵɵtemplate(4, NbChatMessageComponent_nb_chat_message_quote_4_Template, 1, 5, "nb-chat-message-quote", 4);
        ɵngcc0.ɵɵtemplate(5, NbChatMessageComponent_nb_chat_message_map_5_Template, 1, 5, "nb-chat-message-map", 5);
        ɵngcc0.ɵɵtemplate(6, NbChatMessageComponent_nb_chat_message_text_6_Template, 1, 4, "nb-chat-message-text", 6);
        ɵngcc0.ɵɵelementContainerEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", !ctx.reply);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngSwitch", ctx.type);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "file");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "quote");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "map");
    } }, directives: function () { return [ɵngcc2.NgIf, ɵngcc2.NgSwitch, ɵngcc2.NgSwitchCase, ɵngcc2.NgSwitchDefault, NbChatMessageFileComponent,
        NbChatMessageQuoteComponent,
        NbChatMessageMapComponent,
        NbChatMessageTextComponent]; }, encapsulation: 2, data: { animation: [
            trigger('flyInOut', [
                state('in', style({ transform: 'translateX(0)' })),
                transition('void => *', [
                    style({ transform: 'translateX(-100%)' }),
                    animate(80),
                ]),
                transition('* => void', [
                    animate(80, style({ transform: 'translateX(100%)' })),
                ]),
            ]),
        ] }, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatMessageComponent, [{
        type: Component,
        args: [{
                selector: 'nb-chat-message',
                template: "\n    <div class=\"avatar\" [style.background-image]=\"avatarStyle\" *ngIf=\"!reply\">\n      <ng-container *ngIf=\"!avatarStyle\">\n        {{ getInitials() }}\n      </ng-container>\n    </div>\n    <div class=\"message\">\n      <ng-container [ngSwitch]=\"type\">\n\n        <nb-chat-message-file *ngSwitchCase=\"'file'\"\n                              [sender]=\"sender\" [date]=\"date\" [dateFormat]=\"dateFormat\"\n                              [message]=\"message\" [files]=\"files\">\n        </nb-chat-message-file>\n\n        <nb-chat-message-quote *ngSwitchCase=\"'quote'\"\n                              [sender]=\"sender\" [date]=\"date\" [dateFormat]=\"dateFormat\"\n                              [message]=\"message\" [quote]=\"quote\">\n        </nb-chat-message-quote>\n\n        <nb-chat-message-map *ngSwitchCase=\"'map'\"\n                              [sender]=\"sender\" [date]=\"date\"\n                              [message]=\"message\" [latitude]=\"latitude\" [longitude]=\"longitude\">\n        </nb-chat-message-map>\n\n        <nb-chat-message-text *ngSwitchDefault\n                              [sender]=\"sender\" [date]=\"date\" [dateFormat]=\"dateFormat\"\n                              [message]=\"message\">\n        </nb-chat-message-text>\n      </ng-container>\n    </div>\n  ",
                animations: [
                    trigger('flyInOut', [
                        state('in', style({ transform: 'translateX(0)' })),
                        transition('void => *', [
                            style({ transform: 'translateX(-100%)' }),
                            animate(80),
                        ]),
                        transition('* => void', [
                            animate(80, style({ transform: 'translateX(100%)' })),
                        ]),
                    ]),
                ],
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc4.DomSanitizer }]; }, { flyInOut: [{
            type: HostBinding,
            args: ['@flyInOut']
        }], notReply: [{
            type: HostBinding,
            args: ['class.not-reply']
        }], reply: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.reply']
        }], avatar: [{
            type: Input
        }], message: [{
            type: Input
        }], sender: [{
            type: Input
        }], date: [{
            type: Input
        }], dateFormat: [{
            type: Input
        }], files: [{
            type: Input
        }], quote: [{
            type: Input
        }], latitude: [{
            type: Input
        }], longitude: [{
            type: Input
        }], type: [{
            type: Input
        }] }); })();
    return NbChatMessageComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Conversational UI collection - a set of components for chat-like UI construction.
 *
 * Main features:
 * - different message types support (text, image, file, file group, map, etc)
 * - drag & drop for images and files with preview
 * - different UI styles
 * - custom action buttons (coming soon)
 *
 * Here's a complete example build in a bot-like app. Type `help` to be able to receive different message types.
 * Enjoy the conversation and the beautiful UI.
 * @stacked-example(Showcase, chat/chat-showcase.component)
 *
 * Basic chat configuration and usage:
 * ```ts
 * <nb-chat title="Nebular Conversational UI">
 *       <nb-chat-message *ngFor="let msg of messages"
 *                        [type]="msg.type"
 *                        [message]="msg.text"
 *                        [reply]="msg.reply"
 *                        [sender]="msg.user.name"
 *                        [date]="msg.date"
 *                        [files]="msg.files"
 *                        [quote]="msg.quote"
 *                        [latitude]="msg.latitude"
 *                        [longitude]="msg.longitude"
 *                        [avatar]="msg.user.avatar">
 *   </nb-chat-message>
 *
 *   <nb-chat-form (send)="sendMessage($event)" [dropFiles]="true">
 *   </nb-chat-form>
 * </nb-chat>
 * ```
 * ### Installation
 *
 * Import `NbChatModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbChatModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 *
 * If you need to provide an API key for a `map` message type (which is required by Google Maps)
 * you may use `NbChatModule.forRoot({ ... })` call if this is a global app configuration
 * or `NbChatModule.forChild({ ... })` for a feature module configuration:
 *
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbChatModule.forRoot({ messageGoogleMapKey: 'MAP_KEY' }),
 *   ],
 * })
 * export class AppModule { }
 * ```
 *
 * ### Usage
 *
 * There are three main components:
 * ```ts
 * <nb-chat>
 * </nb-chat> // chat container
 *
 * <nb-chat-form>
 * </nb-chat-form> // chat form with drag&drop files feature
 *
 * <nb-chat-message>
 * </nb-chat-message> // chat message, available multiple types
 * ```
 *
 * Two users conversation showcase:
 * @stacked-example(Conversation, chat/chat-conversation-showcase.component)
 *
 * Chat UI is also available in different colors by specifying a `[status]` input:
 *
 * @stacked-example(Colored Chat, chat/chat-colors.component)
 *
 * Also it is possible to configure sizes through `[size]` input:
 *
 * @stacked-example(Chat Sizes, chat/chat-sizes.component)
 *
 * @styles
 *
 * chat-background-color:
 * chat-border:
 * chat-border-radius:
 * chat-shadow:
 * chat-padding:
 * chat-scrollbar-color:
 * chat-scrollbar-background-color:
 * chat-scrollbar-width:
 * chat-text-color:
 * chat-text-font-family:
 * chat-text-font-size:
 * chat-text-font-weight:
 * chat-text-line-height:
 * chat-header-text-font-family:
 * chat-header-text-font-size:
 * chat-header-text-font-weight:
 * chat-header-text-line-height:
 * chat-tiny-height:
 * chat-small-height:
 * chat-medium-height:
 * chat-large-height:
 * chat-giant-height:
 * chat-basic-background-color:
 * chat-basic-text-color:
 * chat-primary-background-color:
 * chat-primary-text-color:
 * chat-success-background-color:
 * chat-success-text-color:
 * chat-info-background-color:
 * chat-info-text-color:
 * chat-warning-background-color:
 * chat-warning-text-color:
 * chat-danger-background-color:
 * chat-danger-text-color:
 * chat-control-background-color:
 * chat-control-text-color:
 * chat-divider-color:
 * chat-divider-style:
 * chat-divider-width:
 * chat-message-background:
 * chat-message-text-color:
 * chat-message-reply-background-color:
 * chat-message-reply-text-color:
 * chat-message-avatar-background-color:
 * chat-message-sender-text-color:
 * chat-message-quote-background-color:
 * chat-message-quote-text-color:
 * chat-message-file-text-color:
 * chat-message-file-background-color:
 */
var NbChatComponent = /** @class */ (function () {
    function NbChatComponent() {
        this._status = 'basic';
        this.noMessagesPlaceholder = 'No messages yet.';
        this._scrollBottom = true;
    }
    Object.defineProperty(NbChatComponent.prototype, "status", {
        /**
         * Chat status color (adds specific styles):
         * `basic` (default), `primary`, `success`, `info`, `warning`, `danger`, `control`.
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (!value) {
                emptyStatusWarning('NbChat');
                value = 'basic';
            }
            this._status = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "scrollBottom", {
        /**
         * Scroll chat to the bottom of the list when a new message arrives
         */
        get: function () {
            return this._scrollBottom;
        },
        set: function (value) {
            this._scrollBottom = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbChatComponent.prototype.ngOnChanges = function (changes) {
        if ('status' in changes) {
            this.updateFormStatus();
        }
    };
    NbChatComponent.prototype.ngAfterContentInit = function () {
        this.updateFormStatus();
    };
    NbChatComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.messages.changes
            .subscribe(function (messages) {
            _this.messages = messages;
            _this.updateView();
        });
        this.updateView();
    };
    NbChatComponent.prototype.updateView = function () {
        if (this.scrollBottom) {
            this.scrollListBottom();
        }
    };
    NbChatComponent.prototype.scrollListBottom = function () {
        this.scrollable.nativeElement.scrollTop = this.scrollable.nativeElement.scrollHeight;
    };
    NbChatComponent.prototype.updateFormStatus = function () {
        if (this.chatForm) {
            this.chatForm.setStatus(this.status);
        }
    };
    Object.defineProperty(NbChatComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbChatComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatComponent.prototype, "title", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbChatComponent.prototype, "status", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatComponent.prototype, "noMessagesPlaceholder", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbChatComponent.prototype, "scrollBottom", null);
    __decorate([
        ViewChild('scrollable'),
        __metadata("design:type", ElementRef)
    ], NbChatComponent.prototype, "scrollable", void 0);
    __decorate([
        ContentChildren(NbChatMessageComponent),
        __metadata("design:type", QueryList)
    ], NbChatComponent.prototype, "messages", void 0);
    __decorate([
        ContentChild(NbChatFormComponent),
        __metadata("design:type", NbChatFormComponent)
    ], NbChatComponent.prototype, "chatForm", void 0);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbChatComponent.prototype, "control", null);
NbChatComponent.ɵfac = function NbChatComponent_Factory(t) { return new (t || NbChatComponent)(); };
NbChatComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbChatComponent, selectors: [["nb-chat"]], contentQueries: function NbChatComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbChatFormComponent, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbChatMessageComponent, false);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.chatForm = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.messages = _t);
    } }, viewQuery: function NbChatComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c22, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.scrollable = _t.first);
    } }, hostVars: 24, hostBindings: function NbChatComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-success", ctx.success)("status-info", ctx.info)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control);
    } }, inputs: { noMessagesPlaceholder: "noMessagesPlaceholder", status: "status", scrollBottom: "scrollBottom", title: "title", size: "size" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c24, decls: 9, vars: 2, consts: [[1, "header"], [1, "scrollable"], ["scrollable", ""], [1, "messages"], ["class", "no-messages", 4, "ngIf"], [1, "form"], [1, "no-messages"]], template: function NbChatComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c23);
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(2, "div", 1, 2);
        ɵngcc0.ɵɵelementStart(4, "div", 3);
        ɵngcc0.ɵɵprojection(5);
        ɵngcc0.ɵɵtemplate(6, NbChatComponent_p_6_Template, 2, 1, "p", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(7, "div", 5);
        ɵngcc0.ɵɵprojection(8, 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.title);
        ɵngcc0.ɵɵadvance(5);
        ɵngcc0.ɵɵproperty("ngIf", !(ctx.messages == null ? null : ctx.messages.length));
    } }, directives: [ɵngcc2.NgIf], styles: ["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatComponent, [{
        type: Component,
        args: [{
                selector: 'nb-chat',
                template: "\n    <div class=\"header\">{{ title }}</div>\n    <div class=\"scrollable\" #scrollable>\n      <div class=\"messages\">\n        <ng-content select=\"nb-chat-message\"></ng-content>\n        <p class=\"no-messages\" *ngIf=\"!messages?.length\">{{ noMessagesPlaceholder }}</p>\n      </div>\n    </div>\n    <div class=\"form\">\n      <ng-content select=\"nb-chat-form\"></ng-content>\n    </div>\n  ",
                styles: [":host{display:flex;flex-direction:column;position:relative;height:100%}\n"]
            }]
    }], function () { return []; }, { noMessagesPlaceholder: [{
            type: Input
        }], status: [{
            type: Input
        }], scrollBottom: [{
            type: Input
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], title: [{
            type: Input
        }], size: [{
            type: Input
        }], scrollable: [{
            type: ViewChild,
            args: ['scrollable']
        }], messages: [{
            type: ContentChildren,
            args: [NbChatMessageComponent]
        }], chatForm: [{
            type: ContentChild,
            args: [NbChatFormComponent]
        }] }); })();
    return NbChatComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbChatOptions = /** @class */ (function () {
    function NbChatOptions() {
    }
    return NbChatOptions;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Chat message component.
 */
var NbChatMessageMapComponent = /** @class */ (function () {
    function NbChatMessageMapComponent(options) {
        /**
         * Message send date format, default 'shortTime'
         * @type {string}
         */
        this.dateFormat = 'shortTime';
        this.mapKey = options.messageGoogleMapKey;
    }
    Object.defineProperty(NbChatMessageMapComponent.prototype, "file", {
        get: function () {
            return {
                // tslint:disable-next-line:max-line-length
                url: "https://maps.googleapis.com/maps/api/staticmap?center=" + this.latitude + "," + this.longitude + "&zoom=12&size=400x400&key=" + this.mapKey,
                type: 'image/png',
                icon: 'location',
            };
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageMapComponent.prototype, "message", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageMapComponent.prototype, "sender", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Date)
    ], NbChatMessageMapComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageMapComponent.prototype, "dateFormat", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbChatMessageMapComponent.prototype, "latitude", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbChatMessageMapComponent.prototype, "longitude", void 0);
    NbChatMessageMapComponent = __decorate([ __metadata("design:paramtypes", [NbChatOptions])
    ], NbChatMessageMapComponent);
NbChatMessageMapComponent.ɵfac = function NbChatMessageMapComponent_Factory(t) { return new (t || NbChatMessageMapComponent)(ɵngcc0.ɵɵdirectiveInject(NbChatOptions)); };
NbChatMessageMapComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbChatMessageMapComponent, selectors: [["nb-chat-message-map"]], inputs: { dateFormat: "dateFormat", message: "message", sender: "sender", date: "date", latitude: "latitude", longitude: "longitude" }, decls: 1, vars: 7, consts: [[3, "files", "message", "sender", "date", "dateFormat"]], template: function NbChatMessageMapComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "nb-chat-message-file", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("files", ɵngcc0.ɵɵpureFunction1(5, _c25, ctx.file))("message", ctx.message)("sender", ctx.sender)("date", ctx.date)("dateFormat", ctx.dateFormat);
    } }, directives: function () { return [NbChatMessageFileComponent]; }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatMessageMapComponent, [{
        type: Component,
        args: [{
                selector: 'nb-chat-message-map',
                template: "\n    <nb-chat-message-file [files]=\"[file]\" [message]=\"message\" [sender]=\"sender\" [date]=\"date\"\n     [dateFormat]=\"dateFormat\"></nb-chat-message-file>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbChatOptions }]; }, { dateFormat: [{
            type: Input
        }], message: [{
            type: Input
        }], sender: [{
            type: Input
        }], date: [{
            type: Input
        }], latitude: [{
            type: Input
        }], longitude: [{
            type: Input
        }] }); })();
    return NbChatMessageMapComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Chat message component.
 */
var NbChatMessageFileComponent = /** @class */ (function () {
    function NbChatMessageFileComponent(cd, domSanitizer) {
        this.cd = cd;
        this.domSanitizer = domSanitizer;
        /**
         * Message send date format, default 'shortTime'
         * @type {string}
         */
        this.dateFormat = 'shortTime';
    }
    Object.defineProperty(NbChatMessageFileComponent.prototype, "files", {
        /**
         * Message file path
         * @type {Date}
         */
        set: function (files) {
            var _this = this;
            this.readyFiles = (files || []).map(function (file) {
                var isImage = _this.isImage(file);
                return __assign(__assign({}, file), { urlStyle: isImage && _this.domSanitizer.bypassSecurityTrustStyle("url(" + file.url + ")"), isImage: isImage });
            });
            this.cd.detectChanges();
        },
        enumerable: true,
        configurable: true
    });
    NbChatMessageFileComponent.prototype.isImage = function (file) {
        var type = file.type;
        if (type) {
            return ['image/png', 'image/jpeg', 'image/gif'].includes(type);
        }
        return false;
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageFileComponent.prototype, "message", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageFileComponent.prototype, "sender", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Date)
    ], NbChatMessageFileComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageFileComponent.prototype, "dateFormat", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array),
        __metadata("design:paramtypes", [Array])
    ], NbChatMessageFileComponent.prototype, "files", null);
    NbChatMessageFileComponent = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef, DomSanitizer])
    ], NbChatMessageFileComponent);
NbChatMessageFileComponent.ɵfac = function NbChatMessageFileComponent_Factory(t) { return new (t || NbChatMessageFileComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer)); };
NbChatMessageFileComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbChatMessageFileComponent, selectors: [["nb-chat-message-file"]], inputs: { dateFormat: "dateFormat", files: "files", message: "message", sender: "sender", date: "date" }, decls: 4, vars: 7, consts: [[3, "sender", "date", "dateFormat", "message"], [4, "ngIf"], [1, "message-content-group"], ["target", "_blank", 3, "href", 4, "ngFor", "ngForOf"], ["target", "_blank", 3, "href"], [3, "icon", 4, "ngIf"], [3, "background-image", 4, "ngIf"], [3, "icon"]], template: function NbChatMessageFileComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nb-chat-message-text", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_2_Template, 3, 1, "ng-container", 1);
        ɵngcc0.ɵɵtemplate(3, NbChatMessageFileComponent_ng_container_3_Template, 4, 3, "ng-container", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("sender", ctx.sender)("date", ctx.date)("dateFormat", ctx.dateFormat)("message", ctx.message);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.message, " ");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", (ctx.readyFiles == null ? null : ctx.readyFiles.length) > 1);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", (ctx.readyFiles == null ? null : ctx.readyFiles.length) === 1);
    } }, directives: function () { return [NbChatMessageTextComponent, ɵngcc2.NgIf, ɵngcc2.NgForOf, NbIconComponent]; }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatMessageFileComponent, [{
        type: Component,
        args: [{
                selector: 'nb-chat-message-file',
                template: "\n    <nb-chat-message-text [sender]=\"sender\" [date]=\"date\" [dateFormat]=\"dateFormat\" [message]=\"message\">\n      {{ message }}\n    </nb-chat-message-text>\n\n    <ng-container *ngIf=\"readyFiles?.length > 1\">\n      <div class=\"message-content-group\">\n        <a *ngFor=\"let file of readyFiles\" [href]=\"file.url\" target=\"_blank\">\n          <nb-icon [icon]=\"file.icon\" *ngIf=\"!file.urlStyle && file.icon\"></nb-icon>\n          <div *ngIf=\"file.urlStyle\" [style.background-image]=\"file.urlStyle\"></div>\n        </a>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"readyFiles?.length === 1\">\n      <a [href]=\"readyFiles[0].url\" target=\"_blank\">\n        <nb-icon [icon]=\"readyFiles[0].icon\" *ngIf=\"!readyFiles[0].urlStyle && readyFiles[0].icon\"></nb-icon>\n        <div *ngIf=\"readyFiles[0].urlStyle\" [style.background-image]=\"readyFiles[0].urlStyle\"></div>\n      </a>\n    </ng-container>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc4.DomSanitizer }]; }, { dateFormat: [{
            type: Input
        }], files: [{
            type: Input
        }], message: [{
            type: Input
        }], sender: [{
            type: Input
        }], date: [{
            type: Input
        }] }); })();
    return NbChatMessageFileComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Chat message component.
 */
var NbChatMessageQuoteComponent = /** @class */ (function () {
    function NbChatMessageQuoteComponent() {
        /**
          * Message send date format, default 'shortTime'
          * @type {string}
          */
        this.dateFormat = 'shortTime';
    }
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageQuoteComponent.prototype, "message", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageQuoteComponent.prototype, "sender", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Date)
    ], NbChatMessageQuoteComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageQuoteComponent.prototype, "dateFormat", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageQuoteComponent.prototype, "quote", void 0);
NbChatMessageQuoteComponent.ɵfac = function NbChatMessageQuoteComponent_Factory(t) { return new (t || NbChatMessageQuoteComponent)(); };
NbChatMessageQuoteComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbChatMessageQuoteComponent, selectors: [["nb-chat-message-quote"]], inputs: { dateFormat: "dateFormat", message: "message", sender: "sender", date: "date", quote: "quote" }, decls: 5, vars: 4, consts: [["class", "sender", 4, "ngIf"], [1, "quote"], [3, "message"], [1, "sender"]], template: function NbChatMessageQuoteComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbChatMessageQuoteComponent_p_0_Template, 5, 5, "p", 0);
        ɵngcc0.ɵɵelementStart(1, "p", 1);
        ɵngcc0.ɵɵtext(2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(3, "nb-chat-message-text", 2);
        ɵngcc0.ɵɵtext(4);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.sender || ctx.date);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.quote, " ");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("message", ctx.message);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.message, " ");
    } }, directives: function () { return [ɵngcc2.NgIf, NbChatMessageTextComponent]; }, pipes: function () { return [ɵngcc2.DatePipe]; }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatMessageQuoteComponent, [{
        type: Component,
        args: [{
                selector: 'nb-chat-message-quote',
                template: "\n    <p class=\"sender\" *ngIf=\"sender || date\">{{ sender }} <time>{{ date | date: dateFormat }}</time></p>\n    <p class=\"quote\">\n      {{ quote }}\n    </p>\n    <nb-chat-message-text [message]=\"message\">\n      {{ message }}\n    </nb-chat-message-text>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return []; }, { dateFormat: [{
            type: Input
        }], message: [{
            type: Input
        }], sender: [{
            type: Input
        }], date: [{
            type: Input
        }], quote: [{
            type: Input
        }] }); })();
    return NbChatMessageQuoteComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Chat message component.
 */
var NbChatMessageTextComponent = /** @class */ (function () {
    function NbChatMessageTextComponent() {
        /**
         * Message send date format, default 'shortTime'
         * @type {string}
         */
        this.dateFormat = 'shortTime';
    }
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageTextComponent.prototype, "sender", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageTextComponent.prototype, "message", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Date)
    ], NbChatMessageTextComponent.prototype, "date", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbChatMessageTextComponent.prototype, "dateFormat", void 0);
NbChatMessageTextComponent.ɵfac = function NbChatMessageTextComponent_Factory(t) { return new (t || NbChatMessageTextComponent)(); };
NbChatMessageTextComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbChatMessageTextComponent, selectors: [["nb-chat-message-text"]], inputs: { dateFormat: "dateFormat", sender: "sender", message: "message", date: "date" }, decls: 2, vars: 2, consts: [["class", "sender", 4, "ngIf"], ["class", "text", 4, "ngIf"], [1, "sender"], [1, "text"]], template: function NbChatMessageTextComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbChatMessageTextComponent_p_0_Template, 5, 5, "p", 0);
        ɵngcc0.ɵɵtemplate(1, NbChatMessageTextComponent_p_1_Template, 2, 1, "p", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.sender || ctx.date);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.message);
    } }, directives: [ɵngcc2.NgIf], pipes: [ɵngcc2.DatePipe], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatMessageTextComponent, [{
        type: Component,
        args: [{
                selector: 'nb-chat-message-text',
                template: "\n    <p class=\"sender\" *ngIf=\"sender || date\">{{ sender }} <time>{{ date  | date: dateFormat }}</time></p>\n    <p class=\"text\" *ngIf=\"message\">{{ message }}</p>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return []; }, { dateFormat: [{
            type: Input
        }], sender: [{
            type: Input
        }], message: [{
            type: Input
        }], date: [{
            type: Input
        }] }); })();
    return NbChatMessageTextComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/*
 * Class used as injection token to provide form element.
 **/
var NbFormFieldControl = /** @class */ (function () {
    function NbFormFieldControl() {
    }
NbFormFieldControl.ɵfac = function NbFormFieldControl_Factory(t) { return new (t || NbFormFieldControl)(); };
NbFormFieldControl.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbFormFieldControl, factory: function (t) { return NbFormFieldControl.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFormFieldControl, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbFormFieldControl;
}());
/*
 * Optional config to be provided on NbFormFieldControl to alter default settings.
 **/
var NbFormFieldControlConfig = /** @class */ (function () {
    function NbFormFieldControlConfig() {
        this.supportsPrefix = true;
        this.supportsSuffix = true;
    }
NbFormFieldControlConfig.ɵfac = function NbFormFieldControlConfig_Factory(t) { return new (t || NbFormFieldControlConfig)(); };
NbFormFieldControlConfig.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbFormFieldControlConfig, factory: function (t) { return NbFormFieldControlConfig.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFormFieldControlConfig, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbFormFieldControlConfig;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Basic input directive.
 *
 * ```html
 * <input nbInput></input>
 * ```
 *
 * ### Installation
 *
 * Import `NbInputModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbInputModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Default input size is `medium`:
 * @stacked-example(Showcase, input/input-showcase.component)
 *
 * Inputs are available in multiple colors using `status` property:
 * @stacked-example(Input Colors, input/input-colors.component)
 *
 * There are three input sizes:
 *
 * @stacked-example(Input Sizes, input/input-sizes.component)
 *
 * Inputs available in different shapes, which could be combined with the other properties:
 * @stacked-example(Input Shapes, input/input-shapes.component)
 *
 * `nbInput` could be applied to the following selectors - `input`, `textarea`:
 * @stacked-example(Input Elements, input/input-types.component)
 *
 * You can add `fullWidth` attribute to make element fill container:
 * @stacked-example(Full width inputs, input/input-full-width.component)
 *
 * Or you can bind control with form controls or ngModel:
 * @stacked-example(Input form binding, input/input-form.component)
 *
 * Use `<nb-form-field>` to add custom content to the input field.
 * First import `NbFormFieldModule`. Then put the input field and custom content into
 * `<nb-form-field>` and add `nbPrefix` or `nbSuffix` directive to the custom content.
 * `nbPrefix` puts content before input and `nbSuffix` after.
 *
 * @stacked-example(Input with icon, form-field/form-field-input.component)
 * @stacked-example(Input with button, form-field/form-field-password.component)
 *
 * @styles
 *
 * input-border-style:
 * input-border-width:
 * input-outline-color:
 * input-outline-width:
 * input-placeholder-text-font-family:
 * input-text-font-family:
 * input-basic-text-color:
 * input-basic-placeholder-text-color:
 * input-basic-background-color:
 * input-basic-border-color:
 * input-basic-focus-background-color:
 * input-basic-focus-border-color:
 * input-basic-hover-background-color:
 * input-basic-hover-border-color:
 * input-basic-disabled-background-color:
 * input-basic-disabled-border-color:
 * input-basic-disabled-text-color:
 * input-basic-disabled-placeholder-text-color:
 * input-primary-text-color:
 * input-primary-placeholder-text-color:
 * input-primary-background-color:
 * input-primary-border-color:
 * input-primary-focus-background-color:
 * input-primary-focus-border-color:
 * input-primary-hover-background-color:
 * input-primary-hover-border-color:
 * input-primary-disabled-background-color:
 * input-primary-disabled-border-color:
 * input-primary-disabled-text-color:
 * input-primary-disabled-placeholder-text-color:
 * input-success-text-color:
 * input-success-placeholder-text-color:
 * input-success-background-color:
 * input-success-border-color:
 * input-success-focus-background-color:
 * input-success-focus-border-color:
 * input-success-hover-background-color:
 * input-success-hover-border-color:
 * input-success-disabled-background-color:
 * input-success-disabled-border-color:
 * input-success-disabled-text-color:
 * input-success-disabled-placeholder-text-color:
 * input-info-text-color:
 * input-info-placeholder-text-color:
 * input-info-background-color:
 * input-info-border-color:
 * input-info-focus-background-color:
 * input-info-focus-border-color:
 * input-info-hover-background-color:
 * input-info-hover-border-color:
 * input-info-disabled-background-color:
 * input-info-disabled-border-color:
 * input-info-disabled-text-color:
 * input-info-disabled-placeholder-text-color:
 * input-warning-text-color:
 * input-warning-placeholder-text-color:
 * input-warning-background-color:
 * input-warning-border-color:
 * input-warning-focus-background-color:
 * input-warning-focus-border-color:
 * input-warning-hover-background-color:
 * input-warning-hover-border-color:
 * input-warning-disabled-background-color:
 * input-warning-disabled-border-color:
 * input-warning-disabled-text-color:
 * input-warning-disabled-placeholder-text-color:
 * input-danger-text-color:
 * input-danger-placeholder-text-color:
 * input-danger-background-color:
 * input-danger-border-color:
 * input-danger-focus-background-color:
 * input-danger-focus-border-color:
 * input-danger-hover-background-color:
 * input-danger-hover-border-color:
 * input-danger-disabled-background-color:
 * input-danger-disabled-border-color:
 * input-danger-disabled-text-color:
 * input-danger-disabled-placeholder-text-color:
 * input-control-text-color:
 * input-control-placeholder-text-color:
 * input-control-background-color:
 * input-control-border-color:
 * input-control-focus-background-color:
 * input-control-focus-border-color:
 * input-control-hover-background-color:
 * input-control-hover-border-color:
 * input-control-disabled-background-color:
 * input-control-disabled-border-color:
 * input-control-disabled-text-color:
 * input-control-disabled-placeholder-text-color:
 * input-rectangle-border-radius:
 * input-semi-round-border-radius:
 * input-round-border-radius:
 * input-tiny-text-font-size:
 * input-tiny-text-font-weight:
 * input-tiny-text-line-height:
 * input-tiny-placeholder-text-font-size:
 * input-tiny-placeholder-text-font-weight:
 * input-tiny-placeholder-text-line-height:
 * input-tiny-padding:
 * input-tiny-max-width:
 * input-small-text-font-size:
 * input-small-text-font-weight:
 * input-small-text-line-height:
 * input-small-placeholder-text-font-size:
 * input-small-placeholder-text-font-weight:
 * input-small-placeholder-text-line-height:
 * input-small-padding:
 * input-small-max-width:
 * input-medium-text-font-size:
 * input-medium-text-font-weight:
 * input-medium-text-line-height:
 * input-medium-placeholder-text-font-size:
 * input-medium-placeholder-text-font-weight:
 * input-medium-placeholder-text-line-height:
 * input-medium-padding:
 * input-medium-max-width:
 * input-large-text-font-size:
 * input-large-text-font-weight:
 * input-large-text-line-height:
 * input-large-placeholder-text-font-size:
 * input-large-placeholder-text-font-weight:
 * input-large-placeholder-text-line-height:
 * input-large-padding:
 * input-large-max-width:
 * input-giant-text-font-size:
 * input-giant-text-font-weight:
 * input-giant-text-line-height:
 * input-giant-placeholder-text-font-size:
 * input-giant-placeholder-text-font-weight:
 * input-giant-placeholder-text-line-height:
 * input-giant-padding:
 * input-giant-max-width:
 */
var NbInputDirective = /** @class */ (function () {
    function NbInputDirective(elementRef, focusMonitor, renderer, zone) {
        this.elementRef = elementRef;
        this.focusMonitor = focusMonitor;
        this.renderer = renderer;
        this.zone = zone;
        this.destroy$ = new Subject();
        /**
         * Field size modifications. Possible values: `small`, `medium` (default), `large`.
         */
        this.fieldSize = 'medium';
        this._status = 'basic';
        /**
         * Field shapes modifications. Possible values: `rectangle` (default), `round`, `semi-round`.
         */
        this.shape = 'rectangle';
        this._fullWidth = false;
        /*
         * @docs-private
         **/
        this.status$ = new BehaviorSubject(this.status);
        /*
         * @docs-private
         **/
        this.size$ = new BehaviorSubject(this.fieldSize);
        /*
         * @docs-private
         **/
        this.focused$ = new BehaviorSubject(false);
        /*
         * @docs-private
         **/
        this.disabled$ = new BehaviorSubject(false);
    }
    NbInputDirective_1 = NbInputDirective;
    Object.defineProperty(NbInputDirective.prototype, "status", {
        /**
         * Field status (adds specific styles):
         * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbInput');
                this._status = 'basic';
            }
            else {
                this._status = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "fullWidth", {
        /**
         * If set element will fill container. `false` by default.
         */
        get: function () {
            return this._fullWidth;
        },
        set: function (value) {
            this._fullWidth = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbInputDirective.prototype.ngDoCheck = function () {
        var isDisabled = this.elementRef.nativeElement.disabled;
        if (isDisabled !== this.disabled$.value) {
            this.disabled$.next(isDisabled);
        }
    };
    NbInputDirective.prototype.ngOnChanges = function (_a) {
        var status = _a.status, fieldSize = _a.fieldSize;
        if (status) {
            this.status$.next(this.status);
        }
        if (fieldSize) {
            this.size$.next(this.fieldSize);
        }
    };
    NbInputDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.focusMonitor.monitor(this.elementRef)
            .pipe(map(function (origin) { return !!origin; }), finalize(function () { return _this.focusMonitor.stopMonitoring(_this.elementRef); }), takeUntil(this.destroy$))
            .subscribe(this.focused$);
    };
    NbInputDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        // TODO: #2254
        this.zone.runOutsideAngular(function () { return setTimeout(function () {
            _this.renderer.addClass(_this.elementRef.nativeElement, 'nb-transition');
        }); });
    };
    NbInputDirective.prototype.ngOnDestroy = function () {
        this.destroy$.next();
    };
    Object.defineProperty(NbInputDirective.prototype, "tiny", {
        get: function () {
            return this.fieldSize === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "small", {
        get: function () {
            return this.fieldSize === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "medium", {
        get: function () {
            return this.fieldSize === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "large", {
        get: function () {
            return this.fieldSize === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "giant", {
        get: function () {
            return this.fieldSize === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "rectangle", {
        get: function () {
            return this.shape === 'rectangle';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "semiRound", {
        get: function () {
            return this.shape === 'semi-round';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInputDirective.prototype, "round", {
        get: function () {
            return this.shape === 'round';
        },
        enumerable: true,
        configurable: true
    });
    var NbInputDirective_1;
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbInputDirective.prototype, "fieldSize", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbInputDirective.prototype, "status", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbInputDirective.prototype, "shape", void 0);
    __decorate([
        Input(),
        HostBinding('class.input-full-width'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbInputDirective.prototype, "fullWidth", null);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "info", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "control", null);
    __decorate([
        HostBinding('class.shape-rectangle'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "rectangle", null);
    __decorate([
        HostBinding('class.shape-semi-round'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "semiRound", null);
    __decorate([
        HostBinding('class.shape-round'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbInputDirective.prototype, "round", null);
    NbInputDirective = NbInputDirective_1 = __decorate([ __metadata("design:paramtypes", [ElementRef,
            NbFocusMonitor,
            Renderer2,
            NgZone])
    ], NbInputDirective);
NbInputDirective.ɵfac = function NbInputDirective_Factory(t) { return new (t || NbInputDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbFocusMonitor), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
NbInputDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbInputDirective, selectors: [["input", "nbInput", ""], ["textarea", "nbInput", ""]], hostVars: 32, hostBindings: function NbInputDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("input-full-width", ctx.fullWidth)("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-info", ctx.info)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control)("shape-rectangle", ctx.rectangle)("shape-semi-round", ctx.semiRound)("shape-round", ctx.round);
    } }, inputs: { fieldSize: "fieldSize", shape: "shape", status: "status", fullWidth: "fullWidth" }, features: [ɵngcc0.ɵɵProvidersFeature([
            { provide: NbFormFieldControl, useExisting: NbInputDirective_1 },
        ]), ɵngcc0.ɵɵNgOnChangesFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbInputDirective, [{
        type: Directive,
        args: [{
                selector: 'input[nbInput],textarea[nbInput]',
                providers: [
                    { provide: NbFormFieldControl, useExisting: NbInputDirective_1 },
                ]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NbFocusMonitor }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.NgZone }]; }, { fieldSize: [{
            type: Input
        }], shape: [{
            type: Input
        }], status: [{
            type: Input
        }], fullWidth: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.input-full-width']
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], rectangle: [{
            type: HostBinding,
            args: ['class.shape-rectangle']
        }], semiRound: [{
            type: HostBinding,
            args: ['class.shape-semi-round']
        }], round: [{
            type: HostBinding,
            args: ['class.shape-round']
        }] }); })();
    return NbInputDirective;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_INPUT_COMPONENTS = [
    NbInputDirective,
];
var NbInputModule = /** @class */ (function () {
    function NbInputModule() {
    }
NbInputModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbInputModule });
NbInputModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbInputModule_Factory(t) { return new (t || NbInputModule)(); }, imports: [[NbSharedModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbInputModule, { declarations: [NbInputDirective], imports: [NbSharedModule], exports: [NbInputDirective] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbInputModule, [{
        type: NgModule,
        args: [{
                imports: [NbSharedModule],
                declarations: NB_INPUT_COMPONENTS,
                exports: NB_INPUT_COMPONENTS
            }]
    }], function () { return []; }, null); })();
    return NbInputModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_CHAT_COMPONENTS = [
    NbChatComponent,
    NbChatMessageComponent,
    NbChatFormComponent,
    NbChatMessageTextComponent,
    NbChatMessageFileComponent,
    NbChatMessageQuoteComponent,
    NbChatMessageMapComponent,
];
var NbChatModule = /** @class */ (function () {
    function NbChatModule() {
    }
    NbChatModule_1 = NbChatModule;
    NbChatModule.forRoot = function (options) {
        return {
            ngModule: NbChatModule_1,
            providers: [
                { provide: NbChatOptions, useValue: options || {} },
            ],
        };
    };
    NbChatModule.forChild = function (options) {
        return {
            ngModule: NbChatModule_1,
            providers: [
                { provide: NbChatOptions, useValue: options || {} },
            ],
        };
    };
    var NbChatModule_1;
NbChatModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbChatModule });
NbChatModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbChatModule_Factory(t) { return new (t || NbChatModule)(); }, imports: [[
            NbSharedModule,
            NbIconModule,
            NbInputModule,
            NbButtonModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbChatModule, { declarations: [NbChatComponent,
        NbChatMessageComponent,
        NbChatFormComponent,
        NbChatMessageTextComponent,
        NbChatMessageFileComponent,
        NbChatMessageQuoteComponent,
        NbChatMessageMapComponent], imports: [NbSharedModule,
        NbIconModule,
        NbInputModule,
        NbButtonModule], exports: [NbChatComponent,
        NbChatMessageComponent,
        NbChatFormComponent,
        NbChatMessageTextComponent,
        NbChatMessageFileComponent,
        NbChatMessageQuoteComponent,
        NbChatMessageMapComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbChatModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbIconModule,
                    NbInputModule,
                    NbButtonModule,
                ],
                declarations: __spreadArrays(NB_CHAT_COMPONENTS),
                exports: __spreadArrays(NB_CHAT_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbChatModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Styled spinner component
 *
 * @styles
 *
 * spinner-text-color:
 * spinner-text-font-family:
 * spinner-text-font-size:
 * spinner-text-font-weight:
 * spinner-text-line-height:
 * spinner-basic-background-color:
 * spinner-basic-circle-filled-color:
 * spinner-basic-circle-empty-color:
 * spinner-primary-background-color:
 * spinner-primary-circle-filled-color:
 * spinner-primary-circle-empty-color:
 * spinner-info-background-color:
 * spinner-info-circle-filled-color:
 * spinner-info-circle-empty-color:
 * spinner-success-background-color:
 * spinner-success-circle-filled-color:
 * spinner-success-circle-empty-color:
 * spinner-warning-background-color:
 * spinner-warning-circle-filled-color:
 * spinner-warning-circle-empty-color:
 * spinner-danger-background-color:
 * spinner-danger-circle-filled-color:
 * spinner-danger-circle-empty-color:
 * spinner-control-background-color:
 * spinner-control-circle-filled-color:
 * spinner-control-circle-empty-color:
 * spinner-height-tiny:
 * spinner-height-small:
 * spinner-height-medium:
 * spinner-height-large:
 * spinner-height-giant:
 */
var NbSpinnerComponent = /** @class */ (function () {
    function NbSpinnerComponent() {
        /**
         * Loading text that is shown near the icon
         * @type string
         */
        this.message = 'Loading...';
        /**
         * Spinner size, available sizes:
         * tiny, small, medium, large, giant
         * @param {string} value
         */
        this.size = 'medium';
        this._status = 'basic';
    }
    Object.defineProperty(NbSpinnerComponent.prototype, "status", {
        /**
         * Spinner status (adds specific styles):
         * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`.
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbSpinner');
                value = 'basic';
            }
            this._status = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSpinnerComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSpinnerComponent.prototype, "message", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSpinnerComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbSpinnerComponent.prototype, "status", null);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbSpinnerComponent.prototype, "control", null);
NbSpinnerComponent.ɵfac = function NbSpinnerComponent_Factory(t) { return new (t || NbSpinnerComponent)(); };
NbSpinnerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSpinnerComponent, selectors: [["nb-spinner"]], hostVars: 24, hostBindings: function NbSpinnerComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-info", ctx.info)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control);
    } }, inputs: { message: "message", size: "size", status: "status" }, decls: 2, vars: 1, consts: [[1, "spin-circle"], ["class", "message", 4, "ngIf"], [1, "message"]], template: function NbSpinnerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "span", 0);
        ɵngcc0.ɵɵtemplate(1, NbSpinnerComponent_span_1_Template, 2, 1, "span", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.message);
    } }, directives: [ɵngcc2.NgIf], styles: ["[_nghost-%COMP%]{opacity:1;position:absolute;border-radius:inherit;top:0;right:0;left:0;bottom:0;overflow:hidden;z-index:9999;display:flex;justify-content:center;align-items:center;visibility:visible}[_nghost-%COMP%]   .spin-circle[_ngcontent-%COMP%]{animation:spin 0.8s infinite linear;border-radius:50%;border-style:solid;border-width:0.125em;width:1em;height:1em}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{margin-left:0.5rem}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSpinnerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-spinner',
                template: "\n    <span class=\"spin-circle\"></span>\n    <span class=\"message\" *ngIf=\"message\">{{ message }}</span>\n  ",
                styles: [":host{opacity:1;position:absolute;border-radius:inherit;top:0;right:0;left:0;bottom:0;overflow:hidden;z-index:9999;display:flex;justify-content:center;align-items:center;visibility:visible}:host .spin-circle{animation:spin 0.8s infinite linear;border-radius:50%;border-style:solid;border-width:0.125em;width:1em;height:1em}:host .message{margin-left:0.5rem}\n"]
            }]
    }], function () { return []; }, { message: [{
            type: Input
        }], size: [{
            type: Input
        }], status: [{
            type: Input
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }] }); })();
    return NbSpinnerComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Styled spinner directive
 *
 * @stacked-example(Spinner Showcase, spinner/spinner-card.component)
 *
 *
 * ```ts
 * <nb-card [nbSpinner]="loading" nbSpinnerStatus="danger">
 *   <nb-card-body>Card Content</nb-card-body>
 * </nb-card>
 * ```
 *
 * ### Installation
 *
 * Import `NbSpinnerModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbSpinnerModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Could be colored using `status` property
 *
 * @stacked-example(Spinner Colors, spinner/spinner-colors.component)
 *
 * Available in different sizes with `size` property:
 *
 * @stacked-example(Spinner Sizes, spinner/spinner-sizes.component)
 *
 * It is also possible to place it into the button:
 * @stacked-example(Buttons with spinner, spinner/spinner-button.component)
 *
 * Or tabs:
 * @stacked-example(Spinner in tabs, spinner/spinner-tabs.component)
 */
var NbSpinnerDirective = /** @class */ (function () {
    function NbSpinnerDirective(directiveView, componentFactoryResolver, renderer, directiveElement) {
        this.directiveView = directiveView;
        this.componentFactoryResolver = componentFactoryResolver;
        this.renderer = renderer;
        this.directiveElement = directiveElement;
        this.shouldShow = false;
        /**
         * Spinner status color
         * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`.
         */
        this.spinnerStatus = 'basic';
        /**
         * Spinner size. Possible values: `tiny`, `small`, `medium` (default), `large`, `giant`
         */
        this.spinnerSize = 'medium';
        this.isSpinnerExist = false;
    }
    Object.defineProperty(NbSpinnerDirective.prototype, "nbSpinner", {
        /**
         * Directive value - show or hide spinner
         * @param {boolean} val
         */
        set: function (val) {
            if (this.componentFactory) {
                if (val) {
                    this.show();
                }
                else {
                    this.hide();
                }
            }
            else {
                this.shouldShow = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    NbSpinnerDirective.prototype.ngOnInit = function () {
        this.componentFactory = this.componentFactoryResolver.resolveComponentFactory(NbSpinnerComponent);
        if (this.shouldShow) {
            this.show();
        }
    };
    NbSpinnerDirective.prototype.hide = function () {
        if (this.isSpinnerExist) {
            this.directiveView.remove();
            this.isSpinnerExist = false;
        }
    };
    NbSpinnerDirective.prototype.show = function () {
        if (!this.isSpinnerExist) {
            this.spinner = this.directiveView.createComponent(this.componentFactory);
            this.setInstanceInputs(this.spinner.instance);
            this.spinner.changeDetectorRef.detectChanges();
            this.renderer.appendChild(this.directiveElement.nativeElement, this.spinner.location.nativeElement);
            this.isSpinnerExist = true;
        }
    };
    NbSpinnerDirective.prototype.setInstanceInputs = function (instance) {
        instance.message = this.spinnerMessage;
        typeof this.spinnerStatus !== 'undefined' && (instance.status = this.spinnerStatus);
        typeof this.spinnerSize !== 'undefined' && (instance.size = this.spinnerSize);
    };
    __decorate([
        Input('nbSpinnerMessage'),
        __metadata("design:type", String)
    ], NbSpinnerDirective.prototype, "spinnerMessage", void 0);
    __decorate([
        Input('nbSpinnerStatus'),
        __metadata("design:type", String)
    ], NbSpinnerDirective.prototype, "spinnerStatus", void 0);
    __decorate([
        Input('nbSpinnerSize'),
        __metadata("design:type", String)
    ], NbSpinnerDirective.prototype, "spinnerSize", void 0);
    __decorate([
        Input('nbSpinner'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSpinnerDirective.prototype, "nbSpinner", null);
    __decorate([
        HostBinding('class.nb-spinner-container'),
        __metadata("design:type", Object)
    ], NbSpinnerDirective.prototype, "isSpinnerExist", void 0);
    NbSpinnerDirective = __decorate([ __metadata("design:paramtypes", [ViewContainerRef,
            ComponentFactoryResolver,
            Renderer2,
            ElementRef])
    ], NbSpinnerDirective);
NbSpinnerDirective.ɵfac = function NbSpinnerDirective_Factory(t) { return new (t || NbSpinnerDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
NbSpinnerDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbSpinnerDirective, selectors: [["", "nbSpinner", ""]], hostVars: 2, hostBindings: function NbSpinnerDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("nb-spinner-container", ctx.isSpinnerExist);
    } }, inputs: { spinnerStatus: ["nbSpinnerStatus", "spinnerStatus"], spinnerSize: ["nbSpinnerSize", "spinnerSize"], nbSpinner: "nbSpinner", spinnerMessage: ["nbSpinnerMessage", "spinnerMessage"] } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSpinnerDirective, [{
        type: Directive,
        args: [{ selector: '[nbSpinner]' }]
    }], function () { return [{ type: ɵngcc0.ViewContainerRef }, { type: ɵngcc0.ComponentFactoryResolver }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }]; }, { spinnerStatus: [{
            type: Input,
            args: ['nbSpinnerStatus']
        }], spinnerSize: [{
            type: Input,
            args: ['nbSpinnerSize']
        }], isSpinnerExist: [{
            type: HostBinding,
            args: ['class.nb-spinner-container']
        }], nbSpinner: [{
            type: Input,
            args: ['nbSpinner']
        }], spinnerMessage: [{
            type: Input,
            args: ['nbSpinnerMessage']
        }] }); })();
    return NbSpinnerDirective;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbSpinnerModule = /** @class */ (function () {
    function NbSpinnerModule() {
    }
NbSpinnerModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbSpinnerModule });
NbSpinnerModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbSpinnerModule_Factory(t) { return new (t || NbSpinnerModule)(); }, imports: [[
            NbSharedModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSpinnerModule, { declarations: [NbSpinnerComponent,
        NbSpinnerDirective], imports: [NbSharedModule], exports: [NbSpinnerComponent,
        NbSpinnerDirective] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSpinnerModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                ],
                exports: [NbSpinnerComponent, NbSpinnerDirective],
                declarations: [NbSpinnerComponent, NbSpinnerDirective],
                entryComponents: [NbSpinnerComponent]
            }]
    }], function () { return []; }, null); })();
    return NbSpinnerModule;
}());

var NB_STEPPER = new InjectionToken('Nebular Stepper Component');

/**
 * Component intended to be used within  the `<nb-stepper>` component.
 * Container for a step
 */
var NbStepComponent = /** @class */ (function () {
    function NbStepComponent(stepper) {
        this._hidden = false;
        this._completed = false;
        this.interacted = false;
        this.stepper = stepper;
    }
    Object.defineProperty(NbStepComponent.prototype, "hidden", {
        /**
         * Whether step will be displayed in wizard
         *
         * @type {boolean}
         */
        get: function () {
            return this._hidden;
        },
        set: function (value) {
            this._hidden = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepComponent.prototype, "isLabelTemplate", {
        /**
         * Check that label is a TemplateRef.
         *
         * @return boolean
         * */
        get: function () {
            return this.label instanceof TemplateRef;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepComponent.prototype, "completed", {
        /**
         * Whether step is marked as completed.
         *
         * @type {boolean}
         */
        get: function () {
            return this._completed || this.isCompleted;
        },
        set: function (value) {
            this._completed = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepComponent.prototype, "isCompleted", {
        get: function () {
            return this.stepControl ? this.stepControl.valid && this.interacted : this.interacted;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Mark step as selected
     * */
    NbStepComponent.prototype.select = function () {
        this.stepper.selected = this;
    };
    /**
     * Reset step and stepControl state
     * */
    NbStepComponent.prototype.reset = function () {
        this.interacted = false;
        if (this.stepControl) {
            this.stepControl.reset();
        }
    };
    __decorate([
        ViewChild(TemplateRef, { static: true }),
        __metadata("design:type", TemplateRef)
    ], NbStepComponent.prototype, "content", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbStepComponent.prototype, "stepControl", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbStepComponent.prototype, "label", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbStepComponent.prototype, "hidden", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbStepComponent.prototype, "completed", null);
    NbStepComponent = __decorate([ __param(0, Inject(NB_STEPPER)),
        __metadata("design:paramtypes", [Object])
    ], NbStepComponent);
NbStepComponent.ɵfac = function NbStepComponent_Factory(t) { return new (t || NbStepComponent)(ɵngcc0.ɵɵdirectiveInject(NB_STEPPER)); };
NbStepComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbStepComponent, selectors: [["nb-step"]], viewQuery: function NbStepComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(TemplateRef, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.content = _t.first);
    } }, inputs: { hidden: "hidden", completed: "completed", stepControl: "stepControl", label: "label" }, ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbStepComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, NbStepComponent_ng_template_0_Template, 1, 0, "ng-template");
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbStepComponent, [{
        type: Component,
        args: [{
                selector: 'nb-step',
                template: "\n    <ng-template>\n      <ng-content></ng-content>\n    </ng-template>\n  "
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_STEPPER]
            }] }]; }, { hidden: [{
            type: Input
        }], completed: [{
            type: Input
        }], content: [{
            type: ViewChild,
            args: [TemplateRef, { static: true }]
        }], stepControl: [{
            type: Input
        }], label: [{
            type: Input
        }] }); })();
    return NbStepComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Stepper component
 *
 * @stacked-example(Showcase, stepper/stepper-showcase.component)
 *
 * ### Installation
 *
 * Import `NbStepperModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbStepperModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * If step label is string you can pass it as `label` attribute. Otherwise ng-template should be used:
 * ```html
 * // ...
 * <nb-stepper orientation="horizontal">
 *   <nb-step label="step number one">
 *       // ... step content here
 *   </nb-step>
 *   <nb-step label="stepLabel">
 *       <ng-template #stepLabel>
 *           <div>
 *               step number two
 *           </div>
 *       </ng-template>
 *       // ... step content here
 *   </nb-step>
 * </nb-stepper>
 * ```
 *
 * When linear mode enabled user can't move forward unless current step is complete.
 * @stacked-example(Linear, stepper/stepper-linear.component)
 *
 * Specify `[stepControl]="form"` and stepper allow go to the next step only if form is valid.
 * You can disable it via `linear` mode setting.
 * ```html
 * // ...
 * <nb-stepper  orientation="horizontal">
 *   <nb-step label="step number one" [stepControl]="form">
 *     <form [formGroup]="form">
 *       // ...
 *     </form>
 *   </nb-step>
 *    // ...
 * </nb-stepper>
 * ```
 *
 * @stacked-example(Validation, stepper/stepper-validation.component)
 *
 * Stepper component has two layout options - `vertical` & `horizontal`
 * @stacked-example(Vertical, stepper/stepper-vertical.component)
 *
 * `disableStepNavigation` disables navigation by clicking on steps, so user can navigate only using
 * 'nbStepperPrevious' and 'nbStepperNext' buttons.
 * @stacked-example(Disabled steps navigation, stepper/stepper-disabled-step-nav.component)
 *
 * @styles
 *
 * stepper-step-text-color:
 * stepper-step-text-font-family:
 * stepper-step-text-font-size:
 * stepper-step-text-font-weight:
 * stepper-step-text-line-height:
 * stepper-step-active-text-color:
 * stepper-step-completed-text-color:
 * stepper-step-index-border-color:
 * stepper-step-index-border-style:
 * stepper-step-index-border-width:
 * stepper-step-index-border-radius:
 * stepper-step-index-width:
 * stepper-step-index-active-border-color:
 * stepper-step-index-completed-background-color:
 * stepper-step-index-completed-border-color:
 * stepper-step-index-completed-text-color:
 * stepper-connector-background-color:
 * stepper-connector-completed-background-color:
 * stepper-horizontal-connector-margin:
 * stepper-vertical-connector-margin:
 * stepper-step-content-padding:
 */
var NbStepperComponent = /** @class */ (function () {
    function NbStepperComponent() {
        this._selectedIndex = 0;
        this._disableStepNavigation = false;
        /**
         * Stepper orientation - `horizontal`|`vertical`
         */
        this.orientation = 'horizontal';
        this._linear = true;
    }
    NbStepperComponent_1 = NbStepperComponent;
    Object.defineProperty(NbStepperComponent.prototype, "selectedIndex", {
        /**
         * Selected step index
         */
        get: function () {
            return this._selectedIndex;
        },
        set: function (index) {
            if (!this.steps) {
                this._selectedIndex = index;
                return;
            }
            this.markCurrentStepInteracted();
            if (this.canBeSelected(index)) {
                this._selectedIndex = index;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepperComponent.prototype, "disableStepNavigation", {
        get: function () {
            return this._disableStepNavigation;
        },
        /**
         * Disables navigation by clicking on steps. False by default
         * @param {boolean} value
         */
        set: function (value) {
            this._disableStepNavigation = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepperComponent.prototype, "selected", {
        /**
         * Selected step component
         */
        get: function () {
            return this.steps ? this.steps.toArray()[this.selectedIndex] : undefined;
        },
        set: function (step) {
            if (!this.steps) {
                return;
            }
            this.selectedIndex = this.steps.toArray().indexOf(step);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepperComponent.prototype, "linear", {
        get: function () {
            return this._linear;
        },
        /**
         * Allow moving forward only if the current step is complete
         * @default true
         */
        set: function (value) {
            this._linear = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepperComponent.prototype, "vertical", {
        get: function () {
            return this.orientation === 'vertical';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbStepperComponent.prototype, "horizontal", {
        get: function () {
            return this.orientation === 'horizontal';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Navigate to next step
     * */
    NbStepperComponent.prototype.next = function () {
        this.selectedIndex = Math.min(this.selectedIndex + 1, this.steps.length - 1);
    };
    /**
     * Navigate to previous step
     * */
    NbStepperComponent.prototype.previous = function () {
        this.selectedIndex = Math.max(this.selectedIndex - 1, 0);
    };
    /**
     * Reset stepper and stepControls to initial state
     * */
    NbStepperComponent.prototype.reset = function () {
        this._selectedIndex = 0;
        this.steps.forEach(function (step) { return step.reset(); });
    };
    NbStepperComponent.prototype.isStepSelected = function (step) {
        return this.selected === step;
    };
    /*
     * @docs-private
     **/
    NbStepperComponent.prototype.getStepTemplate = function (step) {
        if (step.isLabelTemplate) {
            return step.label;
        }
        return null;
    };
    NbStepperComponent.prototype.isStepValid = function (index) {
        return this.steps.toArray()[index].completed;
    };
    NbStepperComponent.prototype.canBeSelected = function (indexToCheck) {
        var noSteps = !this.steps || this.steps.length === 0;
        if (noSteps || indexToCheck < 0 || indexToCheck >= this.steps.length) {
            return false;
        }
        if (indexToCheck <= this.selectedIndex || !this.linear) {
            return true;
        }
        var isAllStepsValid = true;
        for (var i = this.selectedIndex; i < indexToCheck; i++) {
            if (!this.isStepValid(i)) {
                isAllStepsValid = false;
                break;
            }
        }
        return isAllStepsValid;
    };
    NbStepperComponent.prototype.markCurrentStepInteracted = function () {
        if (this.selected) {
            this.selected.interacted = true;
        }
    };
    var NbStepperComponent_1;
    __decorate([
        Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], NbStepperComponent.prototype, "selectedIndex", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbStepperComponent.prototype, "disableStepNavigation", null);
    __decorate([
        Input(),
        __metadata("design:type", NbStepComponent),
        __metadata("design:paramtypes", [NbStepComponent])
    ], NbStepperComponent.prototype, "selected", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbStepperComponent.prototype, "orientation", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbStepperComponent.prototype, "linear", null);
    __decorate([
        HostBinding('class.vertical'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbStepperComponent.prototype, "vertical", null);
    __decorate([
        HostBinding('class.horizontal'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbStepperComponent.prototype, "horizontal", null);
    __decorate([
        ContentChildren(NbStepComponent),
        __metadata("design:type", QueryList)
    ], NbStepperComponent.prototype, "steps", void 0);
NbStepperComponent.ɵfac = function NbStepperComponent_Factory(t) { return new (t || NbStepperComponent)(); };
NbStepperComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbStepperComponent, selectors: [["nb-stepper"]], contentQueries: function NbStepperComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbStepComponent, false);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.steps = _t);
    } }, hostVars: 4, hostBindings: function NbStepperComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("vertical", ctx.vertical)("horizontal", ctx.horizontal);
    } }, inputs: { orientation: "orientation", selectedIndex: "selectedIndex", disableStepNavigation: "disableStepNavigation", selected: "selected", linear: "linear" }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NB_STEPPER, useExisting: NbStepperComponent_1 }])], ngContentSelectors: _c27, decls: 5, vars: 2, consts: [[1, "header"], [4, "ngFor", "ngForOf"], [1, "step-content"], [3, "ngTemplateOutlet"], ["class", "connector", 3, "connector-past", 4, "ngIf"], ["class", "step", 3, "selected", "completed", "noninteractive", "click", 4, "ngIf"], [1, "connector"], [1, "step", 3, "click"], [1, "label-index"], [4, "ngIf"], ["icon", "checkmark-outline", "pack", "nebular-essentials", 4, "ngIf"], [1, "label"], ["icon", "checkmark-outline", "pack", "nebular-essentials"], [4, "ngTemplateOutlet"]], template: function NbStepperComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c26);
        ɵngcc0.ɵɵtemplate(0, NbStepperComponent_ng_template_0_Template, 1, 0, "ng-template");
        ɵngcc0.ɵɵelementStart(1, "div", 0);
        ɵngcc0.ɵɵtemplate(2, NbStepperComponent_ng_container_2_Template, 3, 2, "ng-container", 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(3, "div", 2);
        ɵngcc0.ɵɵelementContainer(4, 3);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.steps);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx.selected == null ? null : ctx.selected.content);
    } }, directives: [ɵngcc2.NgForOf, ɵngcc2.NgTemplateOutlet, ɵngcc2.NgIf, NbIconComponent], styles: [".horizontal[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{flex-direction:column}.horizontal[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{height:2px}.horizontal[_nghost-%COMP%]   .label-index[_ngcontent-%COMP%]{margin-bottom:10px}.vertical[_nghost-%COMP%]{display:flex;height:100%}.vertical[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{flex-direction:column}.vertical[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin:0 10px}.vertical[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{width:2px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}.header[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{flex:auto}.header[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.header[_ngcontent-%COMP%]   .step.noninteractive[_ngcontent-%COMP%]{cursor:default}.header[_ngcontent-%COMP%]   .label-index[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:max-content}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbStepperComponent, [{
        type: Component,
        args: [{
                selector: 'nb-stepper',
                template: "<ng-template><ng-content select=\"nb-step\"></ng-content></ng-template>\n<div class=\"header\">\n  <ng-container *ngFor=\"let step of steps; let index = index; let first = first\">\n\n    <div *ngIf=\"!first && !step.hidden\"\n         [class.connector-past]=\"index <= selectedIndex\"\n         class=\"connector\"></div>\n\n    <div *ngIf=\"!step.hidden\" class=\"step\"\n         [class.selected]=\"isStepSelected(step)\"\n         [class.completed]=\"!isStepSelected(step) && step.completed\"\n         [class.noninteractive]=\"disableStepNavigation\"\n         (click)=\"!disableStepNavigation && step.select()\">\n      <div class=\"label-index\">\n        <span *ngIf=\"!step.completed || isStepSelected(step)\">{{ index + 1 }}</span>\n        <nb-icon *ngIf=\"!isStepSelected(step) && step.completed\" icon=\"checkmark-outline\" pack=\"nebular-essentials\">\n        </nb-icon>\n      </div>\n      <div class=\"label\">\n        <ng-container *ngIf=\"step.isLabelTemplate\">\n          <ng-container *ngTemplateOutlet=\"getStepTemplate(step)\"></ng-container>\n        </ng-container>\n        <span *ngIf=\"!step.isLabelTemplate\">{{ step.label }}</span>\n      </div>\n    </div>\n  </ng-container>\n</div>\n<div class=\"step-content\">\n  <ng-container [ngTemplateOutlet]=\"selected?.content\"></ng-container>\n</div>\n",
                providers: [{ provide: NB_STEPPER, useExisting: NbStepperComponent_1 }],
                styles: [":host(.horizontal) .header .step{flex-direction:column}:host(.horizontal) .header .connector{height:2px}:host(.horizontal) .label-index{margin-bottom:10px}:host(.vertical){display:flex;height:100%}:host(.vertical) .header{flex-direction:column}:host(.vertical) .header .label{margin:0 10px}:host(.vertical) .header .connector{width:2px}.header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}.header .connector{flex:auto}.header .step{display:flex;align-items:center;cursor:pointer}.header .step.noninteractive{cursor:default}.header .label-index{display:flex;justify-content:center;align-items:center}.header .label{width:max-content}\n"]
            }]
    }], function () { return []; }, { orientation: [{
            type: Input
        }], selectedIndex: [{
            type: Input
        }], disableStepNavigation: [{
            type: Input
        }], selected: [{
            type: Input
        }], linear: [{
            type: Input
        }], vertical: [{
            type: HostBinding,
            args: ['class.vertical']
        }], horizontal: [{
            type: HostBinding,
            args: ['class.horizontal']
        }], steps: [{
            type: ContentChildren,
            args: [NbStepComponent]
        }] }); })();
    return NbStepperComponent;
}());

var NbStepperNextDirective = /** @class */ (function () {
    function NbStepperNextDirective(stepper) {
        this.stepper = stepper;
        this.type = 'submit';
    }
    NbStepperNextDirective.prototype.onClick = function () {
        this.stepper.next();
    };
    __decorate([
        Input(), HostBinding('attr.type'),
        __metadata("design:type", String)
    ], NbStepperNextDirective.prototype, "type", void 0);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbStepperNextDirective.prototype, "onClick", null);
    NbStepperNextDirective = __decorate([ __metadata("design:paramtypes", [NbStepperComponent])
    ], NbStepperNextDirective);
NbStepperNextDirective.ɵfac = function NbStepperNextDirective_Factory(t) { return new (t || NbStepperNextDirective)(ɵngcc0.ɵɵdirectiveInject(NbStepperComponent)); };
NbStepperNextDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbStepperNextDirective, selectors: [["button", "nbStepperNext", ""]], hostVars: 1, hostBindings: function NbStepperNextDirective_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbStepperNextDirective_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵattribute("type", ctx.type);
    } }, inputs: { type: "type" } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbStepperNextDirective, [{
        type: Directive,
        args: [{
                selector: 'button[nbStepperNext]'
            }]
    }], function () { return [{ type: NbStepperComponent }]; }, { type: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['attr.type']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }] }); })();
    return NbStepperNextDirective;
}());
var NbStepperPreviousDirective = /** @class */ (function () {
    function NbStepperPreviousDirective(stepper) {
        this.stepper = stepper;
        this.type = 'button';
    }
    NbStepperPreviousDirective.prototype.onClick = function () {
        this.stepper.previous();
    };
    __decorate([
        Input(), HostBinding('attr.type'),
        __metadata("design:type", String)
    ], NbStepperPreviousDirective.prototype, "type", void 0);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbStepperPreviousDirective.prototype, "onClick", null);
    NbStepperPreviousDirective = __decorate([ __metadata("design:paramtypes", [NbStepperComponent])
    ], NbStepperPreviousDirective);
NbStepperPreviousDirective.ɵfac = function NbStepperPreviousDirective_Factory(t) { return new (t || NbStepperPreviousDirective)(ɵngcc0.ɵɵdirectiveInject(NbStepperComponent)); };
NbStepperPreviousDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbStepperPreviousDirective, selectors: [["button", "nbStepperPrevious", ""]], hostVars: 1, hostBindings: function NbStepperPreviousDirective_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbStepperPreviousDirective_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵattribute("type", ctx.type);
    } }, inputs: { type: "type" } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbStepperPreviousDirective, [{
        type: Directive,
        args: [{
                selector: 'button[nbStepperPrevious]'
            }]
    }], function () { return [{ type: NbStepperComponent }]; }, { type: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['attr.type']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }] }); })();
    return NbStepperPreviousDirective;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbStepperModule = /** @class */ (function () {
    function NbStepperModule() {
    }
NbStepperModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbStepperModule });
NbStepperModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbStepperModule_Factory(t) { return new (t || NbStepperModule)(); }, imports: [[
            NbSharedModule,
            NbIconModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbStepperModule, { declarations: [NbStepperComponent,
        NbStepComponent,
        NbStepperNextDirective,
        NbStepperPreviousDirective], imports: [NbSharedModule,
        NbIconModule], exports: [NbStepperComponent,
        NbStepComponent,
        NbStepperNextDirective,
        NbStepperPreviousDirective] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbStepperModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbIconModule,
                ],
                declarations: [
                    NbStepperComponent,
                    NbStepComponent,
                    NbStepperNextDirective,
                    NbStepperPreviousDirective,
                ],
                exports: [
                    NbStepperComponent,
                    NbStepComponent,
                    NbStepperNextDirective,
                    NbStepperPreviousDirective,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbStepperModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * An accordion allows to toggle the display of sections of content
 *
 * Basic example
 * @stacked-example(Showcase, accordion/accordion-showcase.component)
 *
 * ```ts
 * <nb-accordion>
 *  <nb-accordion-item>
 *   <nb-accordion-item-header>Product Details</nb-accordion-item-header>
 *   <nb-accordion-item-body>
 *     Item Content
 *   </nb-accordion-item-body>
 *  </nb-accordion-item>
 * </nb-accordion>
 * ```
 * ### Installation
 *
 * Import `NbAccordionModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbAccordionModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * With `multi` mode accordion can have multiple items expanded:
 * @stacked-example(Multiple expanded items, accordion/accordion-multi.component)
 *
 * `NbAccordionItemComponent` has several methods, for example it is possible to trigger item click/toggle:
 * @stacked-example(Expand API, accordion/accordion-toggle.component)
 *
 * @styles
 *
 * accordion-border-radius:
 * accordion-padding:
 * accordion-shadow:
 * accordion-header-text-color:
 * accordion-header-text-font-family:
 * accordion-header-text-font-size:
 * accordion-header-text-font-weight:
 * accordion-header-text-line-height:
 * accordion-header-disabled-text-color:
 * accordion-header-border-color:
 * accordion-header-border-style:
 * accordion-header-border-width:
 * accordion-item-background-color:
 * accordion-item-text-color:
 * accordion-item-text-font-family:
 * accordion-item-text-font-size:
 * accordion-item-text-font-weight:
 * accordion-item-text-line-height:
 */
var NbAccordionComponent = /** @class */ (function () {
    function NbAccordionComponent() {
        this.openCloseItems = new Subject();
        this.multiValue = false;
    }
    Object.defineProperty(NbAccordionComponent.prototype, "multi", {
        /**
         *  Allow multiple items to be expanded at the same time.
         * @type {boolean}
         */
        get: function () {
            return this.multiValue;
        },
        set: function (val) {
            this.multiValue = convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Opens all enabled accordion items.
     */
    NbAccordionComponent.prototype.openAll = function () {
        if (this.multi) {
            this.openCloseItems.next(false);
        }
    };
    /**
     * Closes all enabled accordion items.
     */
    NbAccordionComponent.prototype.closeAll = function () {
        this.openCloseItems.next(true);
    };
    __decorate([
        Input('multi'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbAccordionComponent.prototype, "multi", null);
NbAccordionComponent.ɵfac = function NbAccordionComponent_Factory(t) { return new (t || NbAccordionComponent)(); };
NbAccordionComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbAccordionComponent, selectors: [["nb-accordion"]], inputs: { multi: "multi" }, ngContentSelectors: _c29, decls: 1, vars: 0, template: function NbAccordionComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c28);
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAccordionComponent, [{
        type: Component,
        args: [{
                selector: 'nb-accordion',
                template: "\n    <ng-content select=\"nb-accordion-item\"></ng-content>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return []; }, { multi: [{
            type: Input,
            args: ['multi']
        }] }); })();
    return NbAccordionComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Component intended to be used within `<nb-accordion>` component
 */
var NbAccordionItemComponent = /** @class */ (function () {
    function NbAccordionItemComponent(accordion, cd) {
        this.accordion = accordion;
        this.cd = cd;
        /**
         * Emits whenever the expanded state of the accordion changes.
         * Primarily used to facilitate two-way binding.
         */
        this.collapsedChange = new EventEmitter();
        this.accordionItemInvalidate = new Subject();
        this.collapsedValue = true;
        this.disabledValue = false;
        this.destroy$ = new Subject();
    }
    Object.defineProperty(NbAccordionItemComponent.prototype, "collapsed", {
        /**
         * Item is collapse (`true` by default)
         * @type {boolean}
         */
        get: function () {
            return this.collapsedValue;
        },
        set: function (val) {
            this.collapsedValue = convertToBoolProperty(val);
            this.collapsedChange.emit(this.collapsedValue);
            this.invalidate();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAccordionItemComponent.prototype, "expanded", {
        /**
         * Item is expanded (`false` by default)
         * @type {boolean}
         */
        get: function () {
            return !this.collapsed;
        },
        set: function (val) {
            this.collapsedValue = !convertToBoolProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAccordionItemComponent.prototype, "disabled", {
        /**
         * Item is disabled and cannot be opened.
         * @type {boolean}
         */
        get: function () {
            return this.disabledValue;
        },
        set: function (val) {
            this.disabledValue = convertToBoolProperty(val);
            this.invalidate();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Open/close the item
     */
    NbAccordionItemComponent.prototype.toggle = function () {
        if (!this.disabled) {
            // we need this temporary variable as `openCloseItems.next` will change current value we need to save
            var willSet = !this.collapsed;
            if (!this.accordion.multi) {
                this.accordion.openCloseItems.next(true);
            }
            this.collapsed = willSet;
        }
    };
    /**
     * Open the item.
     */
    NbAccordionItemComponent.prototype.open = function () {
        !this.disabled && (this.collapsed = false);
    };
    /**
     * Collapse the item.
     */
    NbAccordionItemComponent.prototype.close = function () {
        !this.disabled && (this.collapsed = true);
    };
    NbAccordionItemComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.accordion.openCloseItems
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (collapsed) {
            !_this.disabled && (_this.collapsed = collapsed);
        });
    };
    NbAccordionItemComponent.prototype.ngOnChanges = function (changes) {
        this.accordionItemInvalidate.next(true);
    };
    NbAccordionItemComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
        this.accordionItemInvalidate.complete();
    };
    NbAccordionItemComponent.prototype.invalidate = function () {
        this.accordionItemInvalidate.next(true);
        this.cd.markForCheck();
    };
    __decorate([
        Input('collapsed'),
        HostBinding('class.collapsed'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbAccordionItemComponent.prototype, "collapsed", null);
    __decorate([
        Input('expanded'),
        HostBinding('class.expanded'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbAccordionItemComponent.prototype, "expanded", null);
    __decorate([
        Input('disabled'),
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbAccordionItemComponent.prototype, "disabled", null);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbAccordionItemComponent.prototype, "collapsedChange", void 0);
    NbAccordionItemComponent = __decorate([ __param(0, Host()),
        __metadata("design:paramtypes", [NbAccordionComponent, ChangeDetectorRef])
    ], NbAccordionItemComponent);
NbAccordionItemComponent.ɵfac = function NbAccordionItemComponent_Factory(t) { return new (t || NbAccordionItemComponent)(ɵngcc0.ɵɵdirectiveInject(NbAccordionComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbAccordionItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbAccordionItemComponent, selectors: [["nb-accordion-item"]], hostVars: 6, hostBindings: function NbAccordionItemComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("collapsed", ctx.collapsed)("expanded", ctx.expanded)("disabled", ctx.disabled);
    } }, inputs: { collapsed: "collapsed", expanded: "expanded", disabled: "disabled" }, outputs: { collapsedChange: "collapsedChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c31, decls: 2, vars: 0, template: function NbAccordionItemComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c30);
        ɵngcc0.ɵɵprojection(0);
        ɵngcc0.ɵɵprojection(1, 1);
    } }, styles: ["[_nghost-%COMP%]{display:flex;flex-direction:column}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAccordionItemComponent, [{
        type: Component,
        args: [{
                selector: 'nb-accordion-item',
                template: "\n    <ng-content select=\"nb-accordion-item-header\"></ng-content>\n    <ng-content select=\"nb-accordion-item-body\"></ng-content>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:flex;flex-direction:column}\n"]
            }]
    }], function () { return [{ type: NbAccordionComponent, decorators: [{
                type: Host
            }] }, { type: ɵngcc0.ChangeDetectorRef }]; }, { collapsedChange: [{
            type: Output
        }], collapsed: [{
            type: Input,
            args: ['collapsed']
        }, {
            type: HostBinding,
            args: ['class.collapsed']
        }], expanded: [{
            type: Input,
            args: ['expanded']
        }, {
            type: HostBinding,
            args: ['class.expanded']
        }], disabled: [{
            type: Input,
            args: ['disabled']
        }, {
            type: HostBinding,
            args: ['class.disabled']
        }] }); })();
    return NbAccordionItemComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var accordionItemBodyTrigger = trigger('accordionItemBody', [
    state('collapsed', style({
        overflow: 'hidden',
        visibility: 'hidden',
        height: 0,
    })),
    state('expanded', style({
        overflow: 'hidden',
        visibility: 'visible',
    })),
    transition('collapsed => expanded', animate('100ms ease-in')),
    transition('expanded => collapsed', animate('100ms ease-out')),
]);
/**
 * Component intended to be used within `<nb-accordion-item>` component
 */
var NbAccordionItemBodyComponent = /** @class */ (function () {
    function NbAccordionItemBodyComponent(accordionItem, cd) {
        this.accordionItem = accordionItem;
        this.cd = cd;
        this.destroy$ = new Subject();
    }
    Object.defineProperty(NbAccordionItemBodyComponent.prototype, "state", {
        get: function () {
            return this.accordionItem.collapsed ? 'collapsed' : 'expanded';
        },
        enumerable: true,
        configurable: true
    });
    NbAccordionItemBodyComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.accordionItem.accordionItemInvalidate
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.cd.markForCheck(); });
    };
    NbAccordionItemBodyComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbAccordionItemBodyComponent = __decorate([ __param(0, Host()),
        __metadata("design:paramtypes", [NbAccordionItemComponent, ChangeDetectorRef])
    ], NbAccordionItemBodyComponent);
NbAccordionItemBodyComponent.ɵfac = function NbAccordionItemBodyComponent_Factory(t) { return new (t || NbAccordionItemBodyComponent)(ɵngcc0.ɵɵdirectiveInject(NbAccordionItemComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbAccordionItemBodyComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbAccordionItemBodyComponent, selectors: [["nb-accordion-item-body"]], ngContentSelectors: _c0, decls: 3, vars: 3, consts: [[1, "item-body"]], template: function NbAccordionItemBodyComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "div");
        ɵngcc0.ɵɵelementStart(1, "div", 0);
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("@accordionItemBody", ɵngcc0.ɵɵpureFunction1(1, _c32, ctx.state));
    } }, encapsulation: 2, data: { animation: [accordionItemBodyTrigger] }, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAccordionItemBodyComponent, [{
        type: Component,
        args: [{
                selector: 'nb-accordion-item-body',
                template: "\n    <div [@accordionItemBody]=\"{ value: state }\">\n      <div class=\"item-body\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  ",
                animations: [accordionItemBodyTrigger],
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: NbAccordionItemComponent, decorators: [{
                type: Host
            }] }, { type: ɵngcc0.ChangeDetectorRef }]; }, null); })();
    return NbAccordionItemBodyComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Component intended to be used within `<nb-accordion-item>` component
 */
var NbAccordionItemHeaderComponent = /** @class */ (function () {
    function NbAccordionItemHeaderComponent(accordionItem, cd) {
        this.accordionItem = accordionItem;
        this.cd = cd;
        this.destroy$ = new Subject();
    }
    Object.defineProperty(NbAccordionItemHeaderComponent.prototype, "isCollapsed", {
        get: function () {
            return this.accordionItem.collapsed;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAccordionItemHeaderComponent.prototype, "expanded", {
        get: function () {
            return !this.accordionItem.collapsed;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAccordionItemHeaderComponent.prototype, "tabbable", {
        // issue #794
        get: function () {
            return this.accordionItem.disabled ? '-1' : '0';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAccordionItemHeaderComponent.prototype, "disabled", {
        get: function () {
            return this.accordionItem.disabled;
        },
        enumerable: true,
        configurable: true
    });
    NbAccordionItemHeaderComponent.prototype.toggle = function () {
        this.accordionItem.toggle();
    };
    Object.defineProperty(NbAccordionItemHeaderComponent.prototype, "state", {
        get: function () {
            if (this.isCollapsed) {
                return 'collapsed';
            }
            if (this.expanded) {
                return 'expanded';
            }
        },
        enumerable: true,
        configurable: true
    });
    NbAccordionItemHeaderComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.accordionItem.accordionItemInvalidate
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.cd.markForCheck(); });
    };
    NbAccordionItemHeaderComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    __decorate([
        HostBinding('class.accordion-item-header-collapsed'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAccordionItemHeaderComponent.prototype, "isCollapsed", null);
    __decorate([
        HostBinding('class.accordion-item-header-expanded'),
        HostBinding('attr.aria-expanded'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAccordionItemHeaderComponent.prototype, "expanded", null);
    __decorate([
        HostBinding('attr.tabindex'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbAccordionItemHeaderComponent.prototype, "tabbable", null);
    __decorate([
        HostBinding('attr.aria-disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAccordionItemHeaderComponent.prototype, "disabled", null);
    __decorate([
        HostListener('click'),
        HostListener('keydown.space'),
        HostListener('keydown.enter'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbAccordionItemHeaderComponent.prototype, "toggle", null);
    NbAccordionItemHeaderComponent = __decorate([ __param(0, Host()),
        __metadata("design:paramtypes", [NbAccordionItemComponent, ChangeDetectorRef])
    ], NbAccordionItemHeaderComponent);
NbAccordionItemHeaderComponent.ɵfac = function NbAccordionItemHeaderComponent_Factory(t) { return new (t || NbAccordionItemHeaderComponent)(ɵngcc0.ɵɵdirectiveInject(NbAccordionItemComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbAccordionItemHeaderComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbAccordionItemHeaderComponent, selectors: [["nb-accordion-item-header"]], hostVars: 7, hostBindings: function NbAccordionItemHeaderComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbAccordionItemHeaderComponent_click_HostBindingHandler() { return ctx.toggle(); })("keydown.space", function NbAccordionItemHeaderComponent_keydown_space_HostBindingHandler() { return ctx.toggle(); })("keydown.enter", function NbAccordionItemHeaderComponent_keydown_enter_HostBindingHandler() { return ctx.toggle(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵattribute("aria-expanded", ctx.expanded)("tabindex", ctx.tabbable)("aria-disabled", ctx.disabled);
        ɵngcc0.ɵɵclassProp("accordion-item-header-collapsed", ctx.isCollapsed)("accordion-item-header-expanded", ctx.expanded);
    } }, ngContentSelectors: _c34, decls: 4, vars: 1, consts: [["icon", "chevron-down-outline", "pack", "nebular-essentials", "class", "expansion-indicator", 4, "ngIf"], ["icon", "chevron-down-outline", "pack", "nebular-essentials", 1, "expansion-indicator"]], template: function NbAccordionItemHeaderComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c33);
        ɵngcc0.ɵɵprojection(0);
        ɵngcc0.ɵɵprojection(1, 1);
        ɵngcc0.ɵɵprojection(2, 2);
        ɵngcc0.ɵɵtemplate(3, NbAccordionItemHeaderComponent_nb_icon_3_Template, 1, 1, "nb-icon", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.disabled);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], styles: ["[_nghost-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]:focus{outline:0}"], data: { animation: [
            trigger('expansionIndicator', [
                state('expanded', style({
                    transform: 'rotate(180deg)'
                })),
                transition('collapsed => expanded', animate('100ms ease-in')),
                transition('expanded => collapsed', animate('100ms ease-out')),
            ]),
        ] }, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAccordionItemHeaderComponent, [{
        type: Component,
        args: [{
                selector: 'nb-accordion-item-header',
                template: "\n    <ng-content select=\"nb-accordion-item-title\"></ng-content>\n    <ng-content select=\"nb-accordion-item-description\"></ng-content>\n    <ng-content></ng-content>\n    <nb-icon icon=\"chevron-down-outline\"\n             pack=\"nebular-essentials\"\n             [@expansionIndicator]=\"state\"\n             *ngIf=\"!disabled\"\n             class=\"expansion-indicator\">\n    </nb-icon>\n  ",
                animations: [
                    trigger('expansionIndicator', [
                        state('expanded', style({
                            transform: 'rotate(180deg)'
                        })),
                        transition('collapsed => expanded', animate('100ms ease-in')),
                        transition('expanded => collapsed', animate('100ms ease-out')),
                    ]),
                ],
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:flex;align-items:center;cursor:pointer}:host:focus{outline:0}\n"]
            }]
    }], function () { return [{ type: NbAccordionItemComponent, decorators: [{
                type: Host
            }] }, { type: ɵngcc0.ChangeDetectorRef }]; }, { isCollapsed: [{
            type: HostBinding,
            args: ['class.accordion-item-header-collapsed']
        }], expanded: [{
            type: HostBinding,
            args: ['class.accordion-item-header-expanded']
        }, {
            type: HostBinding,
            args: ['attr.aria-expanded']
        }], tabbable: [{
            type: HostBinding,
            args: ['attr.tabindex']
        }], disabled: [{
            type: HostBinding,
            args: ['attr.aria-disabled']
        }], toggle: [{
            type: HostListener,
            args: ['click']
        }, {
            type: HostListener,
            args: ['keydown.space']
        }, {
            type: HostListener,
            args: ['keydown.enter']
        }] }); })();
    return NbAccordionItemHeaderComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_ACCORDION_COMPONENTS = [
    NbAccordionComponent,
    NbAccordionItemComponent,
    NbAccordionItemHeaderComponent,
    NbAccordionItemBodyComponent,
];
var NbAccordionModule = /** @class */ (function () {
    function NbAccordionModule() {
    }
NbAccordionModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbAccordionModule });
NbAccordionModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbAccordionModule_Factory(t) { return new (t || NbAccordionModule)(); }, providers: [], imports: [[CommonModule, NbIconModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbAccordionModule, { declarations: function () { return [NbAccordionComponent,
        NbAccordionItemComponent,
        NbAccordionItemHeaderComponent,
        NbAccordionItemBodyComponent]; }, imports: function () { return [CommonModule,
        NbIconModule]; }, exports: function () { return [NbAccordionComponent,
        NbAccordionItemComponent,
        NbAccordionItemHeaderComponent,
        NbAccordionItemBodyComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAccordionModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule, NbIconModule],
                exports: __spreadArrays(NB_ACCORDION_COMPONENTS),
                declarations: __spreadArrays(NB_ACCORDION_COMPONENTS),
                providers: []
            }]
    }], function () { return []; }, null); })();
    return NbAccordionModule;
}());

/**
 * List is a container component that wraps `nb-list-item` component.
 *
 * Basic example:
 * @stacked-example(Simple list, list/simple-list-showcase.component)
 *
 * `nb-list-item` accepts arbitrary content, so you can create a list of any components.
 *
 * ### Installation
 *
 * Import `NbListModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbListModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * List of users:
 * @stacked-example(Users list, list/users-list-showcase.component)
 *
 * @styles
 *
 * list-item-divider-color:
 * list-item-divider-style:
 * list-item-divider-width:
 * list-item-padding:
 * list-item-text-color:
 * list-item-font-family:
 * list-item-font-size:
 * list-item-font-weight:
 * list-item-line-height:
 */
var NbListComponent = /** @class */ (function () {
    function NbListComponent() {
        /**
         * Role attribute value
         *
         * @type {string}
         */
        this.role = 'list';
    }
    __decorate([
        Input(),
        HostBinding('attr.role'),
        __metadata("design:type", Object)
    ], NbListComponent.prototype, "role", void 0);
NbListComponent.ɵfac = function NbListComponent_Factory(t) { return new (t || NbListComponent)(); };
NbListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbListComponent, selectors: [["nb-list"]], hostVars: 1, hostBindings: function NbListComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵattribute("role", ctx.role);
    } }, inputs: { role: "role" }, ngContentSelectors: _c36, decls: 1, vars: 0, template: function NbListComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c35);
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;overflow:auto}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbListComponent, [{
        type: Component,
        args: [{
                selector: 'nb-list',
                template: "<ng-content select=\"nb-list-item\"></ng-content>",
                styles: [":host{display:flex;flex-direction:column;flex:1 1 auto;overflow:auto}\n"]
            }]
    }], function () { return []; }, { role: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['attr.role']
        }] }); })();
    return NbListComponent;
}());
/**
 * List item component is a grouping component that accepts arbitrary content.
 * It should be direct child of `nb-list` componet.
 */
var NbListItemComponent = /** @class */ (function () {
    function NbListItemComponent() {
        /**
         * Role attribute value
         *
         * @type {string}
         */
        this.role = 'listitem';
    }
    __decorate([
        Input(),
        HostBinding('attr.role'),
        __metadata("design:type", Object)
    ], NbListItemComponent.prototype, "role", void 0);
NbListItemComponent.ɵfac = function NbListItemComponent_Factory(t) { return new (t || NbListItemComponent)(); };
NbListItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbListItemComponent, selectors: [["nb-list-item"]], hostVars: 1, hostBindings: function NbListItemComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵattribute("role", ctx.role);
    } }, inputs: { role: "role" }, ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbListItemComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%]{display:flex;align-items:center;flex-shrink:0}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbListItemComponent, [{
        type: Component,
        args: [{
                selector: 'nb-list-item',
                template: "<ng-content></ng-content>",
                styles: [":host{display:flex;align-items:center;flex-shrink:0}\n"]
            }]
    }], function () { return []; }, { role: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['attr.role']
        }] }); })();
    return NbListItemComponent;
}());

/**
 * List pager directive
 *
 * Directive allows you to determine page of currently viewing items.
 *
 */
var NbListPageTrackerDirective = /** @class */ (function () {
    function NbListPageTrackerDirective() {
        var _this = this;
        this.destroy$ = new Subject();
        /**
         * Page to start counting with.
         */
        this.startPage = 1;
        /**
         * Emits when another page become visible.
         */
        this.pageChange = new EventEmitter();
        this.observer = new IntersectionObserver(function (entries) { return _this.checkForPageChange(entries); }, { threshold: 0.5 });
    }
    NbListPageTrackerDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.listItems && this.listItems.length) {
            this.observeItems();
        }
        this.listItems.changes
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.observeItems(); });
    };
    NbListPageTrackerDirective.prototype.ngOnDestroy = function () {
        this.observer.disconnect && this.observer.disconnect();
    };
    NbListPageTrackerDirective.prototype.observeItems = function () {
        var _this = this;
        this.listItems.forEach(function (i) { return _this.observer.observe(i.nativeElement); });
    };
    NbListPageTrackerDirective.prototype.checkForPageChange = function (entries) {
        var mostVisiblePage = this.findMostVisiblePage(entries);
        if (mostVisiblePage && this.currentPage !== mostVisiblePage) {
            this.currentPage = mostVisiblePage;
            this.pageChange.emit(this.currentPage);
        }
    };
    NbListPageTrackerDirective.prototype.findMostVisiblePage = function (entries) {
        var intersectionRatioByPage = new Map();
        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {
            var entry = entries_1[_i];
            if (entry.intersectionRatio < 0.5) {
                continue;
            }
            var elementIndex = this.elementIndex(entry.target);
            if (elementIndex === -1) {
                continue;
            }
            var page = this.startPage + Math.floor(elementIndex / this.pageSize);
            var ratio = entry.intersectionRatio;
            if (intersectionRatioByPage.has(page)) {
                ratio += intersectionRatioByPage.get(page);
            }
            intersectionRatioByPage.set(page, ratio);
        }
        var maxRatio = 0;
        var mostVisiblePage;
        intersectionRatioByPage.forEach(function (ratio, page) {
            if (ratio > maxRatio) {
                maxRatio = ratio;
                mostVisiblePage = page;
            }
        });
        return mostVisiblePage;
    };
    NbListPageTrackerDirective.prototype.elementIndex = function (element) {
        return element.parentElement && element.parentElement.children
            ? Array.from(element.parentElement.children).indexOf(element)
            : -1;
    };
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbListPageTrackerDirective.prototype, "pageSize", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbListPageTrackerDirective.prototype, "startPage", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbListPageTrackerDirective.prototype, "pageChange", void 0);
    __decorate([
        ContentChildren(NbListItemComponent, { read: ElementRef }),
        __metadata("design:type", QueryList)
    ], NbListPageTrackerDirective.prototype, "listItems", void 0);
    NbListPageTrackerDirective = __decorate([ __metadata("design:paramtypes", [])
    ], NbListPageTrackerDirective);
NbListPageTrackerDirective.ɵfac = function NbListPageTrackerDirective_Factory(t) { return new (t || NbListPageTrackerDirective)(); };
NbListPageTrackerDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbListPageTrackerDirective, selectors: [["", "nbListPageTracker", ""]], contentQueries: function NbListPageTrackerDirective_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbListItemComponent, false, ElementRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.listItems = _t);
    } }, inputs: { startPage: "startPage", pageSize: "pageSize" }, outputs: { pageChange: "pageChange" } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbListPageTrackerDirective, [{
        type: Directive,
        args: [{
                selector: '[nbListPageTracker]'
            }]
    }], function () { return []; }, { startPage: [{
            type: Input
        }], pageChange: [{
            type: Output
        }], pageSize: [{
            type: Input
        }], listItems: [{
            type: ContentChildren,
            args: [NbListItemComponent, { read: ElementRef }]
        }] }); })();
    return NbListPageTrackerDirective;
}());

var NbScrollableContainerDimentions = /** @class */ (function () {
    function NbScrollableContainerDimentions() {
    }
    return NbScrollableContainerDimentions;
}());
/**
 * Infinite List Directive
 *
 * ```html
 *  <nb-list nbInfiniteList [threshold]="500" (bottomThreshold)="loadNext()">
 *    <nb-list-item *ngFor="let item of items"></nb-list-item>
 *  </nb-list>
 * ```
 *
 * @stacked-example(Simple infinite list, infinite-list/infinite-list-showcase.component)
 *
 * Directive will notify when list scrolled up or down to a given threshold.
 * By default it listen to scroll of list on which applied, but also can be set to listen to window scroll.
 *
 * @stacked-example(Scroll modes, infinite-list/infinite-list-scroll-modes.component)
 *
 * To improve UX of infinite lists, it's better to keep current page in url,
 * so user able to return to the last viewed page or to share a link to this page.
 * `nbListPageTracker` directive will help you to know, what page user currently viewing.
 * Just put it on a list, set page size and it will calculate page that currently in viewport.
 * You can [open the example](example/infinite-list/infinite-news-list.component)
 * in a new tab to check out this feature.
 *
 * @stacked-example(Infinite list with pager, infinite-list/infinite-news-list.component)
 *
 * @stacked-example(Infinite list with placeholders at the top, infinite-list/infinite-list-placeholders.component)
 *
 */
var NbInfiniteListDirective = /** @class */ (function () {
    function NbInfiniteListDirective(elementRef, scrollService, dimensionsService) {
        this.elementRef = elementRef;
        this.scrollService = scrollService;
        this.dimensionsService = dimensionsService;
        this.destroy$ = new Subject();
        this.windowScroll = false;
        /**
         * Emits when distance between list bottom and current scroll position is less than threshold.
         */
        this.bottomThreshold = new EventEmitter(true);
        /**
         * Emits when distance between list top and current scroll position is less than threshold.
         */
        this.topThreshold = new EventEmitter(true);
    }
    Object.defineProperty(NbInfiniteListDirective.prototype, "elementScroll", {
        get: function () {
            return !this.windowScroll;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbInfiniteListDirective.prototype, "listenWindowScroll", {
        /**
         * By default component observes list scroll position.
         * If set to `true`, component will observe position of page scroll instead.
         */
        set: function (value) {
            this.windowScroll = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbInfiniteListDirective.prototype.onElementScroll = function () {
        if (this.elementScroll) {
            this.checkPosition(this.elementRef.nativeElement);
        }
    };
    NbInfiniteListDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.scrollService.onScroll()
            .pipe(filter(function () { return _this.windowScroll; }), switchMap(function () { return _this.getContainerDimensions(); }), takeUntil(this.destroy$))
            .subscribe(function (dimentions) { return _this.checkPosition(dimentions); });
        this.listItems.changes
            .pipe(
        // For some reason, changes are emitted before list item removed from dom,
        // so dimensions will be incorrect.
        // Check every 50ms for a second if dom and query are in sync.
        // Once they synchronized, we can get proper dimensions.
        switchMap(function () { return interval(50).pipe(filter(function () { return _this.inSyncWithDom(); }), take(1), takeUntil(timer(1000))); }), switchMap(function () { return _this.getContainerDimensions(); }), takeUntil(this.destroy$))
            .subscribe(function (dimentions) { return _this.checkPosition(dimentions); });
        this.getContainerDimensions().subscribe(function (dimentions) { return _this.checkPosition(dimentions); });
    };
    NbInfiniteListDirective.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbInfiniteListDirective.prototype.checkPosition = function (_a) {
        var scrollHeight = _a.scrollHeight, scrollTop = _a.scrollTop, clientHeight = _a.clientHeight;
        var initialCheck = this.lastScrollPosition == null;
        var manualCheck = this.lastScrollPosition === scrollTop;
        var scrollUp = scrollTop < this.lastScrollPosition;
        var scrollDown = scrollTop > this.lastScrollPosition;
        var distanceToBottom = scrollHeight - scrollTop - clientHeight;
        if ((initialCheck || manualCheck || scrollDown) && distanceToBottom <= this.threshold) {
            this.bottomThreshold.emit();
        }
        if ((initialCheck || scrollUp) && scrollTop <= this.threshold) {
            this.topThreshold.emit();
        }
        this.lastScrollPosition = scrollTop;
    };
    NbInfiniteListDirective.prototype.getContainerDimensions = function () {
        if (this.elementScroll) {
            var _a = this.elementRef.nativeElement, scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight, clientHeight = _a.clientHeight;
            return of({ scrollTop: scrollTop, scrollHeight: scrollHeight, clientHeight: clientHeight });
        }
        return forkJoin(this.scrollService.getPosition(), this.dimensionsService.getDimensions())
            .pipe(map(function (_a) {
            var scrollPosition = _a[0], dimensions = _a[1];
            return ({
                scrollTop: scrollPosition.y,
                scrollHeight: dimensions.scrollHeight,
                clientHeight: dimensions.clientHeight,
            });
        }));
    };
    NbInfiniteListDirective.prototype.inSyncWithDom = function () {
        return this.elementRef.nativeElement.children.length === this.listItems.length;
    };
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbInfiniteListDirective.prototype, "threshold", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbInfiniteListDirective.prototype, "listenWindowScroll", null);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbInfiniteListDirective.prototype, "bottomThreshold", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbInfiniteListDirective.prototype, "topThreshold", void 0);
    __decorate([
        HostListener('scroll'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbInfiniteListDirective.prototype, "onElementScroll", null);
    __decorate([
        ContentChildren(NbListItemComponent),
        __metadata("design:type", QueryList)
    ], NbInfiniteListDirective.prototype, "listItems", void 0);
    NbInfiniteListDirective = __decorate([ __metadata("design:paramtypes", [ElementRef,
            NbLayoutScrollService,
            NbLayoutRulerService])
    ], NbInfiniteListDirective);
NbInfiniteListDirective.ɵfac = function NbInfiniteListDirective_Factory(t) { return new (t || NbInfiniteListDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbLayoutScrollService), ɵngcc0.ɵɵdirectiveInject(NbLayoutRulerService)); };
NbInfiniteListDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbInfiniteListDirective, selectors: [["", "nbInfiniteList", ""]], contentQueries: function NbInfiniteListDirective_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbListItemComponent, false);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.listItems = _t);
    } }, hostBindings: function NbInfiniteListDirective_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("scroll", function NbInfiniteListDirective_scroll_HostBindingHandler() { return ctx.onElementScroll(); });
    } }, inputs: { listenWindowScroll: "listenWindowScroll", threshold: "threshold" }, outputs: { bottomThreshold: "bottomThreshold", topThreshold: "topThreshold" } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbInfiniteListDirective, [{
        type: Directive,
        args: [{
                selector: '[nbInfiniteList]'
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NbLayoutScrollService }, { type: NbLayoutRulerService }]; }, { bottomThreshold: [{
            type: Output
        }], topThreshold: [{
            type: Output
        }], listenWindowScroll: [{
            type: Input
        }], onElementScroll: [{
            type: HostListener,
            args: ['scroll']
        }], threshold: [{
            type: Input
        }], listItems: [{
            type: ContentChildren,
            args: [NbListItemComponent]
        }] }); })();
    return NbInfiniteListDirective;
}());

var components = [
    NbListComponent,
    NbListItemComponent,
    NbListPageTrackerDirective,
    NbInfiniteListDirective,
];
var NbListModule = /** @class */ (function () {
    function NbListModule() {
    }
NbListModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbListModule });
NbListModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbListModule_Factory(t) { return new (t || NbListModule)(); } });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbListModule, { declarations: [NbListComponent,
        NbListItemComponent,
        NbListPageTrackerDirective,
        NbInfiniteListDirective], exports: [NbListComponent,
        NbListItemComponent,
        NbListPageTrackerDirective,
        NbInfiniteListDirective] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbListModule, [{
        type: NgModule,
        args: [{
                declarations: components,
                exports: components
            }]
    }], function () { return []; }, null); })();
    return NbListModule;
}());

var NbDirectionality = /** @class */ (function (_super) {
    __extends(NbDirectionality, _super);
    function NbDirectionality() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbDirectionality.ɵfac = function NbDirectionality_Factory(t) { return ɵNbDirectionality_BaseFactory(t || NbDirectionality); };
NbDirectionality.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbDirectionality, factory: function (t) { return NbDirectionality.ɵfac(t); } });
var ɵNbDirectionality_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDirectionality);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDirectionality, [{
        type: Injectable
    }], null, null); })();
    return NbDirectionality;
}(Directionality));

var NbBidiModule = /** @class */ (function (_super) {
    __extends(NbBidiModule, _super);
    function NbBidiModule() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbBidiModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbBidiModule });
NbBidiModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbBidiModule_Factory(t) { return ɵNbBidiModule_BaseFactory(t || NbBidiModule); }, providers: [
        { provide: NbDirectionality, useExisting: Directionality },
    ] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbBidiModule, [{
        type: NgModule,
        args: [{
                providers: [
                    { provide: NbDirectionality, useExisting: Directionality },
                ]
            }]
    }], null, null); })();
var ɵNbBidiModule_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbBidiModule);
    return NbBidiModule;
}(BidiModule));

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license infornbion.
 */
/**
 * Cell definition for the nb-table.
 * Captures the template of a column's data row cell as well as cell-specific properties.
 */
var NbCellDefDirective = /** @class */ (function (_super) {
    __extends(NbCellDefDirective, _super);
    function NbCellDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbCellDefDirective_1 = NbCellDefDirective;
    var NbCellDefDirective_1;
NbCellDefDirective.ɵfac = function NbCellDefDirective_Factory(t) { return ɵNbCellDefDirective_BaseFactory(t || NbCellDefDirective); };
NbCellDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbCellDefDirective, selectors: [["", "nbCellDef", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkCellDef, useExisting: NbCellDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbCellDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCellDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbCellDef]',
                providers: [{ provide: CdkCellDef, useExisting: NbCellDefDirective_1 }]
            }]
    }], null, null); })();
    return NbCellDefDirective;
}(CdkCellDef));
/**
 * Header cell definition for the nb-table.
 * Captures the template of a column's header cell and as well as cell-specific properties.
 */
var NbHeaderCellDefDirective = /** @class */ (function (_super) {
    __extends(NbHeaderCellDefDirective, _super);
    function NbHeaderCellDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbHeaderCellDefDirective_1 = NbHeaderCellDefDirective;
    var NbHeaderCellDefDirective_1;
NbHeaderCellDefDirective.ɵfac = function NbHeaderCellDefDirective_Factory(t) { return ɵNbHeaderCellDefDirective_BaseFactory(t || NbHeaderCellDefDirective); };
NbHeaderCellDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbHeaderCellDefDirective, selectors: [["", "nbHeaderCellDef", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkHeaderCellDef, useExisting: NbHeaderCellDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbHeaderCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderCellDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbHeaderCellDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbHeaderCellDef]',
                providers: [{ provide: CdkHeaderCellDef, useExisting: NbHeaderCellDefDirective_1 }]
            }]
    }], null, null); })();
    return NbHeaderCellDefDirective;
}(CdkHeaderCellDef));
/**
 * Footer cell definition for the nb-table.
 * Captures the template of a column's footer cell and as well as cell-specific properties.
 */
var NbFooterCellDefDirective = /** @class */ (function (_super) {
    __extends(NbFooterCellDefDirective, _super);
    function NbFooterCellDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbFooterCellDefDirective_1 = NbFooterCellDefDirective;
    var NbFooterCellDefDirective_1;
NbFooterCellDefDirective.ɵfac = function NbFooterCellDefDirective_Factory(t) { return ɵNbFooterCellDefDirective_BaseFactory(t || NbFooterCellDefDirective); };
NbFooterCellDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbFooterCellDefDirective, selectors: [["", "nbFooterCellDef", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkFooterCellDef, useExisting: NbFooterCellDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbFooterCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterCellDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFooterCellDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbFooterCellDef]',
                providers: [{ provide: CdkFooterCellDef, useExisting: NbFooterCellDefDirective_1 }]
            }]
    }], null, null); })();
    return NbFooterCellDefDirective;
}(CdkFooterCellDef));
var NB_SORT_HEADER_COLUMN_DEF = new InjectionToken('NB_SORT_HEADER_COLUMN_DEF');
/**
 * Column definition for the nb-table.
 * Defines a set of cells available for a table column.
 */
var NbColumnDefDirective = /** @class */ (function (_super) {
    __extends(NbColumnDefDirective, _super);
    function NbColumnDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbColumnDefDirective_1 = NbColumnDefDirective;
    var NbColumnDefDirective_1;
    __decorate([
        Input('nbColumnDef'),
        __metadata("design:type", String)
    ], NbColumnDefDirective.prototype, "name", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbColumnDefDirective.prototype, "sticky", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbColumnDefDirective.prototype, "stickyEnd", void 0);
NbColumnDefDirective.ɵfac = function NbColumnDefDirective_Factory(t) { return ɵNbColumnDefDirective_BaseFactory(t || NbColumnDefDirective); };
NbColumnDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbColumnDefDirective, selectors: [["", "nbColumnDef", ""]], inputs: { name: ["nbColumnDef", "name"], sticky: "sticky", stickyEnd: "stickyEnd" }, features: [ɵngcc0.ɵɵProvidersFeature([
            { provide: CdkColumnDef, useExisting: NbColumnDefDirective_1 },
            { provide: NB_SORT_HEADER_COLUMN_DEF, useExisting: NbColumnDefDirective_1 },
        ]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbColumnDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbColumnDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbColumnDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbColumnDef]',
                providers: [
                    { provide: CdkColumnDef, useExisting: NbColumnDefDirective_1 },
                    { provide: NB_SORT_HEADER_COLUMN_DEF, useExisting: NbColumnDefDirective_1 },
                ]
            }]
    }], null, { name: [{
            type: Input,
            args: ['nbColumnDef']
        }], sticky: [{
            type: Input
        }], stickyEnd: [{
            type: Input
        }] }); })();
    return NbColumnDefDirective;
}(CdkColumnDef));
/** Header cell template container that adds the right classes and role. */
var NbHeaderCellDirective = /** @class */ (function (_super) {
    __extends(NbHeaderCellDirective, _super);
    function NbHeaderCellDirective(columnDef, elementRef) {
        var _this = _super.call(this, columnDef, elementRef) || this;
        elementRef.nativeElement.classList.add("nb-column-" + columnDef.cssClassFriendlyName);
        return _this;
    }
    NbHeaderCellDirective = __decorate([ __metadata("design:paramtypes", [NbColumnDefDirective,
            ElementRef])
    ], NbHeaderCellDirective);
NbHeaderCellDirective.ɵfac = function NbHeaderCellDirective_Factory(t) { return new (t || NbHeaderCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
NbHeaderCellDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbHeaderCellDirective, selectors: [["nb-header-cell"], ["th", "nbHeaderCell", ""]], hostAttrs: ["role", "columnheader", 1, "nb-header-cell"], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbHeaderCellDirective, [{
        type: Directive,
        args: [{
                selector: 'nb-header-cell, th[nbHeaderCell]',
                host: {
                    'class': 'nb-header-cell',
                    'role': 'columnheader'
                }
            }]
    }], function () { return [{ type: NbColumnDefDirective }, { type: ɵngcc0.ElementRef }]; }, null); })();
    return NbHeaderCellDirective;
}(CdkHeaderCell));
/** Footer cell template container that adds the right classes and role. */
var NbFooterCellDirective = /** @class */ (function (_super) {
    __extends(NbFooterCellDirective, _super);
    function NbFooterCellDirective(columnDef, elementRef) {
        var _this = _super.call(this, columnDef, elementRef) || this;
        elementRef.nativeElement.classList.add("nb-column-" + columnDef.cssClassFriendlyName);
        return _this;
    }
    NbFooterCellDirective = __decorate([ __metadata("design:paramtypes", [NbColumnDefDirective,
            ElementRef])
    ], NbFooterCellDirective);
NbFooterCellDirective.ɵfac = function NbFooterCellDirective_Factory(t) { return new (t || NbFooterCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
NbFooterCellDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbFooterCellDirective, selectors: [["nb-footer-cell"], ["td", "nbFooterCell", ""]], hostAttrs: ["role", "gridcell", 1, "nb-footer-cell"], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFooterCellDirective, [{
        type: Directive,
        args: [{
                selector: 'nb-footer-cell, td[nbFooterCell]',
                host: {
                    'class': 'nb-footer-cell',
                    'role': 'gridcell'
                }
            }]
    }], function () { return [{ type: NbColumnDefDirective }, { type: ɵngcc0.ElementRef }]; }, null); })();
    return NbFooterCellDirective;
}(CdkFooterCell));
/** Cell template container that adds the right classes and role. */
var NbCellDirective = /** @class */ (function (_super) {
    __extends(NbCellDirective, _super);
    function NbCellDirective(columnDef, elementRef) {
        var _this = _super.call(this, columnDef, elementRef) || this;
        elementRef.nativeElement.classList.add("nb-column-" + columnDef.cssClassFriendlyName);
        return _this;
    }
    NbCellDirective = __decorate([ __metadata("design:paramtypes", [NbColumnDefDirective,
            ElementRef])
    ], NbCellDirective);
NbCellDirective.ɵfac = function NbCellDirective_Factory(t) { return new (t || NbCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
NbCellDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbCellDirective, selectors: [["nb-cell"], ["td", "nbCell", ""]], hostAttrs: ["role", "gridcell", 1, "nb-cell"], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCellDirective, [{
        type: Directive,
        args: [{
                selector: 'nb-cell, td[nbCell]',
                host: {
                    'class': 'nb-cell',
                    'role': 'gridcell'
                }
            }]
    }], function () { return [{ type: NbColumnDefDirective }, { type: ɵngcc0.ElementRef }]; }, null); })();
    return NbCellDirective;
}(CdkCell));

var NbDataSource = /** @class */ (function (_super) {
    __extends(NbDataSource, _super);
    function NbDataSource() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return NbDataSource;
}(DataSource));

var NbDataRowOutletDirective = /** @class */ (function (_super) {
    __extends(NbDataRowOutletDirective, _super);
    function NbDataRowOutletDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbDataRowOutletDirective_1 = NbDataRowOutletDirective;
    var NbDataRowOutletDirective_1;
NbDataRowOutletDirective.ɵfac = function NbDataRowOutletDirective_Factory(t) { return ɵNbDataRowOutletDirective_BaseFactory(t || NbDataRowOutletDirective); };
NbDataRowOutletDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbDataRowOutletDirective, selectors: [["", "nbRowOutlet", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: DataRowOutlet, useExisting: NbDataRowOutletDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbDataRowOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDataRowOutletDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDataRowOutletDirective, [{
        type: Directive,
        args: [{
                selector: '[nbRowOutlet]',
                providers: [{ provide: DataRowOutlet, useExisting: NbDataRowOutletDirective_1 }]
            }]
    }], null, null); })();
    return NbDataRowOutletDirective;
}(DataRowOutlet));
var NbHeaderRowOutletDirective = /** @class */ (function (_super) {
    __extends(NbHeaderRowOutletDirective, _super);
    function NbHeaderRowOutletDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbHeaderRowOutletDirective_1 = NbHeaderRowOutletDirective;
    var NbHeaderRowOutletDirective_1;
NbHeaderRowOutletDirective.ɵfac = function NbHeaderRowOutletDirective_Factory(t) { return ɵNbHeaderRowOutletDirective_BaseFactory(t || NbHeaderRowOutletDirective); };
NbHeaderRowOutletDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbHeaderRowOutletDirective, selectors: [["", "nbHeaderRowOutlet", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: HeaderRowOutlet, useExisting: NbHeaderRowOutletDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbHeaderRowOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderRowOutletDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbHeaderRowOutletDirective, [{
        type: Directive,
        args: [{
                selector: '[nbHeaderRowOutlet]',
                providers: [{ provide: HeaderRowOutlet, useExisting: NbHeaderRowOutletDirective_1 }]
            }]
    }], null, null); })();
    return NbHeaderRowOutletDirective;
}(HeaderRowOutlet));
var NbFooterRowOutletDirective = /** @class */ (function (_super) {
    __extends(NbFooterRowOutletDirective, _super);
    function NbFooterRowOutletDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbFooterRowOutletDirective_1 = NbFooterRowOutletDirective;
    var NbFooterRowOutletDirective_1;
NbFooterRowOutletDirective.ɵfac = function NbFooterRowOutletDirective_Factory(t) { return ɵNbFooterRowOutletDirective_BaseFactory(t || NbFooterRowOutletDirective); };
NbFooterRowOutletDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbFooterRowOutletDirective, selectors: [["", "nbFooterRowOutlet", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: FooterRowOutlet, useExisting: NbFooterRowOutletDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbFooterRowOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterRowOutletDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFooterRowOutletDirective, [{
        type: Directive,
        args: [{
                selector: '[nbFooterRowOutlet]',
                providers: [{ provide: FooterRowOutlet, useExisting: NbFooterRowOutletDirective_1 }]
            }]
    }], null, null); })();
    return NbFooterRowOutletDirective;
}(FooterRowOutlet));
var NbCellOutletDirective = /** @class */ (function (_super) {
    __extends(NbCellOutletDirective, _super);
    function NbCellOutletDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbCellOutletDirective_1 = NbCellOutletDirective;
    var NbCellOutletDirective_1;
NbCellOutletDirective.ɵfac = function NbCellOutletDirective_Factory(t) { return ɵNbCellOutletDirective_BaseFactory(t || NbCellOutletDirective); };
NbCellOutletDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbCellOutletDirective, selectors: [["", "nbCellOutlet", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkCellOutlet, useExisting: NbCellOutletDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbCellOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbCellOutletDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbCellOutletDirective, [{
        type: Directive,
        args: [{
                selector: '[nbCellOutlet]',
                providers: [{ provide: CdkCellOutlet, useExisting: NbCellOutletDirective_1 }]
            }]
    }], null, null); })();
    return NbCellOutletDirective;
}(CdkCellOutlet));
/**
 * Header row definition for the nb-table.
 * Captures the header row's template and other header properties such as the columns to display.
 */
var NbHeaderRowDefDirective = /** @class */ (function (_super) {
    __extends(NbHeaderRowDefDirective, _super);
    function NbHeaderRowDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbHeaderRowDefDirective_1 = NbHeaderRowDefDirective;
    var NbHeaderRowDefDirective_1;
    __decorate([
        Input('nbHeaderRowDef'),
        __metadata("design:type", Object)
    ], NbHeaderRowDefDirective.prototype, "columns", void 0);
    __decorate([
        Input('nbHeaderRowDefSticky'),
        __metadata("design:type", Boolean)
    ], NbHeaderRowDefDirective.prototype, "sticky", void 0);
NbHeaderRowDefDirective.ɵfac = function NbHeaderRowDefDirective_Factory(t) { return ɵNbHeaderRowDefDirective_BaseFactory(t || NbHeaderRowDefDirective); };
NbHeaderRowDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbHeaderRowDefDirective, selectors: [["", "nbHeaderRowDef", ""]], inputs: { columns: ["nbHeaderRowDef", "columns"], sticky: ["nbHeaderRowDefSticky", "sticky"] }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkHeaderRowDef, useExisting: NbHeaderRowDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbHeaderRowDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderRowDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbHeaderRowDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbHeaderRowDef]',
                providers: [{ provide: CdkHeaderRowDef, useExisting: NbHeaderRowDefDirective_1 }]
            }]
    }], null, { columns: [{
            type: Input,
            args: ['nbHeaderRowDef']
        }], sticky: [{
            type: Input,
            args: ['nbHeaderRowDefSticky']
        }] }); })();
    return NbHeaderRowDefDirective;
}(CdkHeaderRowDef));
/**
 * Footer row definition for the nb-table.
 * Captures the footer row's template and other footer properties such as the columns to display.
 */
var NbFooterRowDefDirective = /** @class */ (function (_super) {
    __extends(NbFooterRowDefDirective, _super);
    function NbFooterRowDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbFooterRowDefDirective_1 = NbFooterRowDefDirective;
    var NbFooterRowDefDirective_1;
    __decorate([
        Input('nbFooterRowDef'),
        __metadata("design:type", Object)
    ], NbFooterRowDefDirective.prototype, "columns", void 0);
    __decorate([
        Input('nbFooterRowDefSticky'),
        __metadata("design:type", Boolean)
    ], NbFooterRowDefDirective.prototype, "sticky", void 0);
NbFooterRowDefDirective.ɵfac = function NbFooterRowDefDirective_Factory(t) { return ɵNbFooterRowDefDirective_BaseFactory(t || NbFooterRowDefDirective); };
NbFooterRowDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbFooterRowDefDirective, selectors: [["", "nbFooterRowDef", ""]], inputs: { columns: ["nbFooterRowDef", "columns"], sticky: ["nbFooterRowDefSticky", "sticky"] }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkFooterRowDef, useExisting: NbFooterRowDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbFooterRowDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterRowDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFooterRowDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbFooterRowDef]',
                providers: [{ provide: CdkFooterRowDef, useExisting: NbFooterRowDefDirective_1 }]
            }]
    }], null, { columns: [{
            type: Input,
            args: ['nbFooterRowDef']
        }], sticky: [{
            type: Input,
            args: ['nbFooterRowDefSticky']
        }] }); })();
    return NbFooterRowDefDirective;
}(CdkFooterRowDef));
/**
 * Data row definition for the nb-table.
 * Captures the data row's template and other properties such as the columns to display and
 * a when predicate that describes when this row should be used.
 */
var NbRowDefDirective = /** @class */ (function (_super) {
    __extends(NbRowDefDirective, _super);
    function NbRowDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbRowDefDirective_1 = NbRowDefDirective;
    var NbRowDefDirective_1;
    __decorate([
        Input('nbRowDefColumns'),
        __metadata("design:type", Object)
    ], NbRowDefDirective.prototype, "columns", void 0);
    __decorate([
        Input('nbRowDefWhen'),
        __metadata("design:type", Function)
    ], NbRowDefDirective.prototype, "when", void 0);
NbRowDefDirective.ɵfac = function NbRowDefDirective_Factory(t) { return ɵNbRowDefDirective_BaseFactory(t || NbRowDefDirective); };
NbRowDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbRowDefDirective, selectors: [["", "nbRowDef", ""]], inputs: { columns: ["nbRowDefColumns", "columns"], when: ["nbRowDefWhen", "when"] }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkRowDef, useExisting: NbRowDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbRowDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbRowDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRowDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbRowDef]',
                providers: [{ provide: CdkRowDef, useExisting: NbRowDefDirective_1 }]
            }]
    }], null, { columns: [{
            type: Input,
            args: ['nbRowDefColumns']
        }], when: [{
            type: Input,
            args: ['nbRowDefWhen']
        }] }); })();
    return NbRowDefDirective;
}(CdkRowDef));
/** Footer template container that contains the cell outlet. Adds the right class and role. */
var NbHeaderRowComponent = /** @class */ (function (_super) {
    __extends(NbHeaderRowComponent, _super);
    function NbHeaderRowComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbHeaderRowComponent_1 = NbHeaderRowComponent;
    var NbHeaderRowComponent_1;
NbHeaderRowComponent.ɵfac = function NbHeaderRowComponent_Factory(t) { return ɵNbHeaderRowComponent_BaseFactory(t || NbHeaderRowComponent); };
NbHeaderRowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbHeaderRowComponent, selectors: [["nb-header-row"], ["tr", "nbHeaderRow", ""]], hostAttrs: ["role", "row", 1, "nb-header-row"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkHeaderRow, useExisting: NbHeaderRowComponent_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature], decls: 1, vars: 0, consts: [["nbCellOutlet", ""]], template: function NbHeaderRowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, 0);
    } }, directives: [NbCellOutletDirective], encapsulation: 2 });
var ɵNbHeaderRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderRowComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbHeaderRowComponent, [{
        type: Component,
        args: [{
                selector: 'nb-header-row, tr[nbHeaderRow]',
                template: "\n    <ng-container nbCellOutlet></ng-container>",
                host: {
                    'class': 'nb-header-row',
                    'role': 'row'
                },
                providers: [{ provide: CdkHeaderRow, useExisting: NbHeaderRowComponent_1 }]
            }]
    }], null, null); })();
    return NbHeaderRowComponent;
}(CdkHeaderRow));
/** Footer template container that contains the cell outlet. Adds the right class and role. */
var NbFooterRowComponent = /** @class */ (function (_super) {
    __extends(NbFooterRowComponent, _super);
    function NbFooterRowComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbFooterRowComponent_1 = NbFooterRowComponent;
    var NbFooterRowComponent_1;
NbFooterRowComponent.ɵfac = function NbFooterRowComponent_Factory(t) { return ɵNbFooterRowComponent_BaseFactory(t || NbFooterRowComponent); };
NbFooterRowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbFooterRowComponent, selectors: [["nb-footer-row"], ["tr", "nbFooterRow", ""]], hostAttrs: ["role", "row", 1, "nb-footer-row"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkFooterRow, useExisting: NbFooterRowComponent_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature], decls: 1, vars: 0, consts: [["nbCellOutlet", ""]], template: function NbFooterRowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, 0);
    } }, directives: [NbCellOutletDirective], encapsulation: 2 });
var ɵNbFooterRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterRowComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFooterRowComponent, [{
        type: Component,
        args: [{
                selector: 'nb-footer-row, tr[nbFooterRow]',
                template: "\n    <ng-container nbCellOutlet></ng-container>",
                host: {
                    'class': 'nb-footer-row',
                    'role': 'row'
                },
                providers: [{ provide: CdkFooterRow, useExisting: NbFooterRowComponent_1 }]
            }]
    }], null, null); })();
    return NbFooterRowComponent;
}(CdkFooterRow));
/** Data row template container that contains the cell outlet. Adds the right class and role. */
var NbRowComponent = /** @class */ (function (_super) {
    __extends(NbRowComponent, _super);
    function NbRowComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbRowComponent_1 = NbRowComponent;
    var NbRowComponent_1;
NbRowComponent.ɵfac = function NbRowComponent_Factory(t) { return ɵNbRowComponent_BaseFactory(t || NbRowComponent); };
NbRowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbRowComponent, selectors: [["nb-row"], ["tr", "nbRow", ""]], hostAttrs: ["role", "row", 1, "nb-row"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CdkRow, useExisting: NbRowComponent_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature], decls: 1, vars: 0, consts: [["nbCellOutlet", ""]], template: function NbRowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, 0);
    } }, directives: [NbCellOutletDirective], encapsulation: 2 });
var ɵNbRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbRowComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRowComponent, [{
        type: Component,
        args: [{
                selector: 'nb-row, tr[nbRow]',
                template: "\n    <ng-container nbCellOutlet></ng-container>",
                host: {
                    'class': 'nb-row',
                    'role': 'row'
                },
                providers: [{ provide: CdkRow, useExisting: NbRowComponent_1 }]
            }]
    }], null, null); })();
    return NbRowComponent;
}(CdkRow));

var NB_TABLE_TEMPLATE = "\n  <ng-container nbHeaderRowOutlet></ng-container>\n  <ng-container nbRowOutlet></ng-container>\n  <ng-container nbFooterRowOutlet></ng-container>";
var NbTable = /** @class */ (function (_super) {
    __extends(NbTable, _super);
    function NbTable(differs, changeDetectorRef, elementRef, role, dir, document, platform) {
        return _super.call(this, differs, changeDetectorRef, elementRef, role, dir, document, platform) || this;
    }
    NbTable = __decorate([ __param(3, Attribute('role')),
        __param(5, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [IterableDiffers,
            ChangeDetectorRef,
            ElementRef, String, NbDirectionality, Object, NbPlatform])
    ], NbTable);
NbTable.ɵfac = function NbTable_Factory(t) { return new (t || NbTable)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵinjectAttribute('role'), ɵngcc0.ɵɵdirectiveInject(NbDirectionality), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPlatform)); };
NbTable.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTable, selectors: [["nb-table-not-implemented"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function NbTable_Template(rf, ctx) { }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTable, [{
        type: Component,
        args: [{
                selector: 'nb-table-not-implemented',
                template: ""
            }]
    }], function () { return [{ type: ɵngcc0.IterableDiffers }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.ElementRef }, { type: String, decorators: [{
                type: Attribute,
                args: ['role']
            }] }, { type: NbDirectionality }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: NbPlatform }]; }, null); })();
    return NbTable;
}(CdkTable));
var COMPONENTS$1 = [
    NbTable,
    // Template defs
    NbHeaderCellDefDirective,
    NbHeaderRowDefDirective,
    NbColumnDefDirective,
    NbCellDefDirective,
    NbRowDefDirective,
    NbFooterCellDefDirective,
    NbFooterRowDefDirective,
    // Outlets
    NbDataRowOutletDirective,
    NbHeaderRowOutletDirective,
    NbFooterRowOutletDirective,
    NbCellOutletDirective,
    // Cell directives
    NbHeaderCellDirective,
    NbCellDirective,
    NbFooterCellDirective,
    // Row directives
    NbHeaderRowComponent,
    NbRowComponent,
    NbFooterRowComponent,
];
var NbTableModule = /** @class */ (function (_super) {
    __extends(NbTableModule, _super);
    function NbTableModule() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
NbTableModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbTableModule });
NbTableModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbTableModule_Factory(t) { return ɵNbTableModule_BaseFactory(t || NbTableModule); }, imports: [[NbBidiModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTableModule, { declarations: [NbTable,
        NbHeaderCellDefDirective,
        NbHeaderRowDefDirective,
        NbColumnDefDirective,
        NbCellDefDirective,
        NbRowDefDirective,
        NbFooterCellDefDirective,
        NbFooterRowDefDirective,
        NbDataRowOutletDirective,
        NbHeaderRowOutletDirective,
        NbFooterRowOutletDirective,
        NbCellOutletDirective,
        NbHeaderCellDirective,
        NbCellDirective,
        NbFooterCellDirective,
        NbHeaderRowComponent,
        NbRowComponent,
        NbFooterRowComponent], imports: [NbBidiModule], exports: [NbTable,
        NbHeaderCellDefDirective,
        NbHeaderRowDefDirective,
        NbColumnDefDirective,
        NbCellDefDirective,
        NbRowDefDirective,
        NbFooterCellDefDirective,
        NbFooterRowDefDirective,
        NbDataRowOutletDirective,
        NbHeaderRowOutletDirective,
        NbFooterRowOutletDirective,
        NbCellOutletDirective,
        NbHeaderCellDirective,
        NbCellDirective,
        NbFooterCellDirective,
        NbHeaderRowComponent,
        NbRowComponent,
        NbFooterRowComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTableModule, [{
        type: NgModule,
        args: [{
                imports: [NbBidiModule],
                declarations: __spreadArrays(COMPONENTS$1),
                exports: __spreadArrays(COMPONENTS$1)
            }]
    }], null, null); })();
var ɵNbTableModule_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTableModule);
    return NbTableModule;
}(CdkTableModule));

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_DIALOG_CONFIG = new InjectionToken('Default dialog options');
/**
 * Describes all available options that may be passed to the NbDialogService.
 * */
var NbDialogConfig = /** @class */ (function () {
    function NbDialogConfig(config) {
        /**
         * If true than overlay will render backdrop under a dialog.
         * */
        this.hasBackdrop = true;
        /**
         * Class that'll be assigned to the backdrop element.
         * */
        this.backdropClass = 'overlay-backdrop';
        /**
         * Class that'll be assigned to the dialog overlay.
         * */
        this.dialogClass = '';
        /**
         * If true then mouse clicks by backdrop will close a dialog.
         * */
        this.closeOnBackdropClick = true;
        /**
         * If true then escape press will close a dialog.
         * */
        this.closeOnEsc = true;
        /**
         * Disables scroll on content under dialog if true and does nothing otherwise.
         * */
        this.hasScroll = false;
        /**
         * Focuses dialog automatically after open if true.
         * */
        this.autoFocus = true;
        Object.assign(this, config);
    }
    return NbDialogConfig;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbDialogRef` helps to manipulate dialog after it was created.
 * The dialog can be dismissed by using `close` method of the dialogRef.
 * You can access rendered component as `content` property of the dialogRef.
 * `onBackdropClick` streams click events on the backdrop of the dialog.
 * */
var NbDialogRef = /** @class */ (function () {
    function NbDialogRef(overlayRef) {
        this.overlayRef = overlayRef;
        this.onClose$ = new Subject();
        this.onClose = this.onClose$.asObservable();
        this.onBackdropClick = this.overlayRef.backdropClick();
    }
    /**
     * Hides dialog.
     * */
    NbDialogRef.prototype.close = function (res) {
        this.overlayRef.detach();
        this.overlayRef.dispose();
        this.onClose$.next(res);
        this.onClose$.complete();
    };
    return NbDialogRef;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Container component for each dialog.
 * All the dialogs will be attached to it.
 * // TODO add animations
 * */
var NbDialogContainerComponent = /** @class */ (function () {
    function NbDialogContainerComponent(config, elementRef, focusTrapFactory) {
        this.config = config;
        this.elementRef = elementRef;
        this.focusTrapFactory = focusTrapFactory;
    }
    NbDialogContainerComponent.prototype.ngOnInit = function () {
        if (this.config.autoFocus) {
            this.focusTrap = this.focusTrapFactory.create(this.elementRef.nativeElement);
            this.focusTrap.blurPreviouslyFocusedElement();
            this.focusTrap.focusInitialElement();
        }
    };
    NbDialogContainerComponent.prototype.ngOnDestroy = function () {
        if (this.config.autoFocus && this.focusTrap) {
            this.focusTrap.restoreFocus();
        }
    };
    NbDialogContainerComponent.prototype.attachComponentPortal = function (portal) {
        return this.portalOutlet.attachComponentPortal(portal);
    };
    NbDialogContainerComponent.prototype.attachTemplatePortal = function (portal) {
        return this.portalOutlet.attachTemplatePortal(portal);
    };
    __decorate([
        ViewChild(NbPortalOutletDirective, { static: true }),
        __metadata("design:type", NbPortalOutletDirective)
    ], NbDialogContainerComponent.prototype, "portalOutlet", void 0);
    NbDialogContainerComponent = __decorate([ __metadata("design:paramtypes", [NbDialogConfig,
            ElementRef,
            NbFocusTrapFactoryService])
    ], NbDialogContainerComponent);
NbDialogContainerComponent.ɵfac = function NbDialogContainerComponent_Factory(t) { return new (t || NbDialogContainerComponent)(ɵngcc0.ɵɵdirectiveInject(NbDialogConfig), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbFocusTrapFactoryService)); };
NbDialogContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbDialogContainerComponent, selectors: [["nb-dialog-container"]], viewQuery: function NbDialogContainerComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(NbPortalOutletDirective, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portalOutlet = _t.first);
    } }, decls: 1, vars: 0, consts: [["nbPortalOutlet", ""]], template: function NbDialogContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbDialogContainerComponent_ng_template_0_Template, 0, 0, "ng-template", 0);
    } }, directives: [NbPortalOutletDirective], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDialogContainerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-dialog-container',
                template: '<ng-template nbPortalOutlet></ng-template>'
            }]
    }], function () { return [{ type: NbDialogConfig }, { type: ɵngcc0.ElementRef }, { type: NbFocusTrapFactoryService }]; }, { portalOutlet: [{
            type: ViewChild,
            args: [NbPortalOutletDirective, { static: true }]
        }] }); })();
    return NbDialogContainerComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbDialogService` helps to open dialogs.
 *
 * @stacked-example(Showcase, dialog/dialog-showcase.component)
 *
 * A new dialog is opened by calling the `open` method with a component to be loaded and an optional configuration.
 * `open` method will return `NbDialogRef` that can be used for the further manipulations.
 *
 * ### Installation
 *
 * Import `NbDialogModule.forRoot()` to your app module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbDialogModule.forRoot(config),
 *   ],
 * })
 * export class AppModule { }
 * ```
 *
 * If you are using it in a lazy loaded module than you have to install it with `NbDialogModule.forChild()`:
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbDialogModule.forChild(config),
 *   ],
 * })
 * export class LazyLoadedModule { }
 * ```
 *
 * ### Usage
 *
 * ```ts
 * const dialogRef = this.dialogService.open(MyDialogComponent, { ... });
 * ```
 *
 * `NbDialogRef` gives capability access reference to the rendered dialog component,
 * destroy dialog and some other options described below.
 *
 * Also, you can inject `NbDialogRef` in dialog component.
 *
 * ```ts
 * this.dialogService.open(MyDialogComponent, { ... });
 *
 * // my-dialog.component.ts
 * constructor(protected dialogRef: NbDialogRef) {
 * }
 *
 * close() {
 *   this.dialogRef.close();
 * }
 * ```
 *
 * Instead of component you can create dialog from TemplateRef:
 *
 * @stacked-example(Template ref, dialog/dialog-template.component)
 *
 * The dialog may return result through `NbDialogRef`. Calling component can receive this result with `onClose`
 * stream of `NbDialogRef`.
 *
 * @stacked-example(Result, dialog/dialog-result.component)
 *
 * ### Configuration
 *
 * As we mentioned above, `open` method of the `NbDialogService` may receive optional configuration options.
 * Also, you can provide global dialogs configuration through `NbDialogModule.forRoot({ ... })`.
 *
 * This config may contain the following:
 *
 * `context` - both, template and component may receive data through `config.context` property.
 * For components, this data will be assigned through inputs.
 * For templates, you can access it inside template as $implicit.
 *
 * ```ts
 * this.dialogService.open(template, { context: 'pass data in template' });
 * ```
 *
 * ```html
 * <ng-template let-some-additional-data>
 *   {{ some-additional-data }}
 * <ng-template/>
 * ```
 *
 * `hasBackdrop` - determines is service have to render backdrop under the dialog.
 * Default is true.
 * @stacked-example(Backdrop, dialog/dialog-has-backdrop.component)
 *
 * `closeOnBackdropClick` - close dialog on backdrop click if true.
 * Default is true.
 * @stacked-example(Backdrop click, dialog/dialog-backdrop-click.component)
 *
 * `closeOnEsc` - close dialog on escape button on the keyboard.
 * Default is true.
 * @stacked-example(Escape hit, dialog/dialog-esc.component)
 *
 * `hasScroll` - Disables scroll on content under dialog if true and does nothing otherwise.
 * Default is false.
 * Please, open dialogs in the separate window and try to scroll.
 * @stacked-example(Scroll, dialog/dialog-scroll.component)
 *
 * `autoFocus` - Focuses dialog automatically after open if true. It's useful to prevent misclicks on
 * trigger elements and opening multiple dialogs.
 * Default is true.
 *
 * As you can see, if you open dialog with auto focus dialog will focus first focusable element
 * or just blur previously focused automatically.
 * Otherwise, without auto focus, the focus will stay on the previously focused element.
 * Please, open dialogs in the separate window and try to click on the button without focus
 * and then hit space any times. Multiple same dialogs will be opened.
 * @stacked-example(Auto focus, dialog/dialog-auto-focus.component)
 * */
var NbDialogService = /** @class */ (function () {
    function NbDialogService(document, globalConfig, positionBuilder, overlay, injector, cfr) {
        this.document = document;
        this.globalConfig = globalConfig;
        this.positionBuilder = positionBuilder;
        this.overlay = overlay;
        this.injector = injector;
        this.cfr = cfr;
    }
    /**
     * Opens new instance of the dialog, may receive optional config.
     * */
    NbDialogService.prototype.open = function (content, userConfig) {
        if (userConfig === void 0) { userConfig = {}; }
        var config = new NbDialogConfig(__assign(__assign({}, this.globalConfig), userConfig));
        var overlayRef = this.createOverlay(config);
        var dialogRef = new NbDialogRef(overlayRef);
        var container = this.createContainer(config, overlayRef);
        this.createContent(config, content, container, dialogRef);
        this.registerCloseListeners(config, overlayRef, dialogRef);
        return dialogRef;
    };
    NbDialogService.prototype.createOverlay = function (config) {
        var positionStrategy = this.createPositionStrategy();
        var scrollStrategy = this.createScrollStrategy(config.hasScroll);
        return this.overlay.create({
            positionStrategy: positionStrategy,
            scrollStrategy: scrollStrategy,
            hasBackdrop: config.hasBackdrop,
            backdropClass: config.backdropClass,
            panelClass: config.dialogClass,
        });
    };
    NbDialogService.prototype.createPositionStrategy = function () {
        return this.positionBuilder
            .global()
            .centerVertically()
            .centerHorizontally();
    };
    NbDialogService.prototype.createScrollStrategy = function (hasScroll) {
        if (hasScroll) {
            return this.overlay.scrollStrategies.noop();
        }
        else {
            return this.overlay.scrollStrategies.block();
        }
    };
    NbDialogService.prototype.createContainer = function (config, overlayRef) {
        var injector = new NbPortalInjector(this.createInjector(config), new WeakMap([[NbDialogConfig, config]]));
        var containerPortal = new NbComponentPortal(NbDialogContainerComponent, null, injector, this.cfr);
        var containerRef = overlayRef.attach(containerPortal);
        return containerRef.instance;
    };
    NbDialogService.prototype.createContent = function (config, content, container, dialogRef) {
        if (content instanceof TemplateRef) {
            var portal = this.createTemplatePortal(config, content, dialogRef);
            container.attachTemplatePortal(portal);
        }
        else {
            var portal = this.createComponentPortal(config, content, dialogRef);
            dialogRef.componentRef = container.attachComponentPortal(portal);
            if (config.context) {
                Object.assign(dialogRef.componentRef.instance, __assign({}, config.context));
            }
        }
    };
    NbDialogService.prototype.createTemplatePortal = function (config, content, dialogRef) {
        return new NbTemplatePortal(content, null, { $implicit: config.context, dialogRef: dialogRef });
    };
    /**
     * We're creating portal with custom injector provided through config or using global injector.
     * This approach provides us capability inject `NbDialogRef` in dialog component.
     * */
    NbDialogService.prototype.createComponentPortal = function (config, content, dialogRef) {
        var injector = this.createInjector(config);
        var portalInjector = new NbPortalInjector(injector, new WeakMap([[NbDialogRef, dialogRef]]));
        return new NbComponentPortal(content, config.viewContainerRef, portalInjector);
    };
    NbDialogService.prototype.createInjector = function (config) {
        return config.viewContainerRef && config.viewContainerRef.injector || this.injector;
    };
    NbDialogService.prototype.registerCloseListeners = function (config, overlayRef, dialogRef) {
        if (config.closeOnBackdropClick) {
            overlayRef.backdropClick().subscribe(function () { return dialogRef.close(); });
        }
        if (config.closeOnEsc) {
            fromEvent(this.document, 'keyup')
                .pipe(filter(function (event) { return event.keyCode === 27; }), takeUntil(dialogRef.onClose))
                .subscribe(function () { return dialogRef.close(); });
        }
    };
    NbDialogService = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __param(1, Inject(NB_DIALOG_CONFIG)),
        __metadata("design:paramtypes", [Object, Object, NbPositionBuilderService,
            NbOverlayService,
            Injector,
            ComponentFactoryResolver])
    ], NbDialogService);
NbDialogService.ɵfac = function NbDialogService_Factory(t) { return new (t || NbDialogService)(ɵngcc0.ɵɵinject(NB_DOCUMENT), ɵngcc0.ɵɵinject(NB_DIALOG_CONFIG), ɵngcc0.ɵɵinject(NbPositionBuilderService), ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver)); };
NbDialogService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbDialogService, factory: function (t) { return NbDialogService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDialogService, [{
        type: Injectable
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DIALOG_CONFIG]
            }] }, { type: NbPositionBuilderService }, { type: NbOverlayService }, { type: ɵngcc0.Injector }, { type: ɵngcc0.ComponentFactoryResolver }]; }, null); })();
    return NbDialogService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbDialogModule = /** @class */ (function () {
    function NbDialogModule() {
    }
    NbDialogModule_1 = NbDialogModule;
    NbDialogModule.forRoot = function (dialogConfig) {
        if (dialogConfig === void 0) { dialogConfig = {}; }
        return {
            ngModule: NbDialogModule_1,
            providers: [
                NbDialogService,
                { provide: NB_DIALOG_CONFIG, useValue: dialogConfig },
            ],
        };
    };
    NbDialogModule.forChild = function (dialogConfig) {
        if (dialogConfig === void 0) { dialogConfig = {}; }
        return {
            ngModule: NbDialogModule_1,
            providers: [
                NbDialogService,
                { provide: NB_DIALOG_CONFIG, useValue: dialogConfig },
            ],
        };
    };
    var NbDialogModule_1;
NbDialogModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbDialogModule });
NbDialogModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbDialogModule_Factory(t) { return new (t || NbDialogModule)(); }, imports: [[NbSharedModule, NbOverlayModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbDialogModule, { declarations: [NbDialogContainerComponent], imports: [NbSharedModule,
        NbOverlayModule] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDialogModule, [{
        type: NgModule,
        args: [{
                imports: [NbSharedModule, NbOverlayModule],
                declarations: [NbDialogContainerComponent],
                entryComponents: [NbDialogContainerComponent]
            }]
    }], function () { return []; }, null); })();
    return NbDialogModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbToast = /** @class */ (function () {
    function NbToast() {
    }
    return NbToast;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbToastComponent` is responsible for rendering each toast with appropriate styles.
 *
 * @styles
 *
 * toastr-border-style:
 * toastr-border-width:
 * toastr-border-radius:
 * toastr-padding:
 * toastr-shadow:
 * toastr-text-font-family:
 * toastr-text-font-size:
 * toastr-text-font-weight:
 * toastr-text-line-height:
 * toastr-title-text-font-family:
 * toastr-title-text-font-size:
 * toastr-title-text-font-weight:
 * toastr-title-text-line-height:
 * toastr-basic-background-color:
 * toastr-basic-border-color:
 * toastr-basic-text-color:
 * toastr-icon-basic-background-color:
 * toastr-icon-basic-color:
 * toastr-destroyable-hover-basic-background-color:
 * toastr-destroyable-hover-basic-border-color:
 * toastr-primary-background-color:
 * toastr-primary-border-color:
 * toastr-primary-text-color:
 * toastr-icon-primary-background-color:
 * toastr-icon-primary-color:
 * toastr-destroyable-hover-primary-background-color:
 * toastr-destroyable-hover-primary-border-color:
 * toastr-success-background-color:
 * toastr-success-border-color:
 * toastr-success-text-color:
 * toastr-icon-success-background-color:
 * toastr-icon-success-color:
 * toastr-destroyable-hover-success-background-color:
 * toastr-destroyable-hover-success-border-color:
 * toastr-info-background-color:
 * toastr-info-border-color:
 * toastr-info-text-color:
 * toastr-icon-info-background-color:
 * toastr-icon-info-color:
 * toastr-destroyable-hover-info-background-color:
 * toastr-destroyable-hover-info-border-color:
 * toastr-warning-background-color:
 * toastr-warning-border-color:
 * toastr-warning-text-color:
 * toastr-icon-warning-background-color:
 * toastr-icon-warning-color:
 * toastr-destroyable-hover-warning-background-color:
 * toastr-destroyable-hover-warning-border-color:
 * toastr-danger-background-color:
 * toastr-danger-border-color:
 * toastr-danger-text-color:
 * toastr-icon-danger-background-color:
 * toastr-icon-danger-color:
 * toastr-destroyable-hover-danger-background-color:
 * toastr-destroyable-hover-danger-border-color:
 * toastr-control-background-color:
 * toastr-control-border-color:
 * toastr-control-text-color:
 * toastr-icon-control-background-color:
 * toastr-icon-control-color:
 * toastr-destroyable-hover-control-background-color:
 * toastr-destroyable-hover-control-border-color:
 * */
var NbToastComponent = /** @class */ (function () {
    function NbToastComponent(renderer, elementRef) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.destroy = new EventEmitter();
    }
    Object.defineProperty(NbToastComponent.prototype, "success", {
        get: function () {
            return this.toast.config.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "info", {
        get: function () {
            return this.toast.config.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "warning", {
        get: function () {
            return this.toast.config.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "primary", {
        get: function () {
            return this.toast.config.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "danger", {
        get: function () {
            return this.toast.config.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "basic", {
        get: function () {
            return this.toast.config.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "control", {
        get: function () {
            return this.toast.config.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "destroyByClick", {
        get: function () {
            return this.toast.config.destroyByClick;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "hasIcon", {
        get: function () {
            var icon = this.toast.config.icon;
            if (typeof icon === 'string') {
                return true;
            }
            return !!(icon && icon.icon);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "customIcon", {
        get: function () {
            return !!this.icon;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "icon", {
        get: function () {
            return this.toast.config.icon;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "iconPack", {
        /* @deprecated Use pack property of icon config */
        get: function () {
            return this.toast.config.iconPack;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToastComponent.prototype, "iconConfig", {
        /*
          @breaking-change 5 remove
          @deprecated
        */
        get: function () {
            var toastConfig = this.toast.config;
            var isIconName = typeof this.icon === 'string';
            if (!isIconName) {
                return toastConfig.icon;
            }
            var iconConfig = { icon: toastConfig.icon };
            if (toastConfig.iconPack) {
                iconConfig.pack = toastConfig.iconPack;
            }
            return iconConfig;
        },
        enumerable: true,
        configurable: true
    });
    NbToastComponent.prototype.onClick = function () {
        this.destroy.emit();
    };
    NbToastComponent.prototype.ngOnInit = function () {
        if (this.toast.config.toastClass) {
            this.renderer.addClass(this.elementRef.nativeElement, this.toast.config.toastClass);
        }
    };
    __decorate([
        Input(),
        __metadata("design:type", NbToast)
    ], NbToastComponent.prototype, "toast", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbToastComponent.prototype, "destroy", void 0);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "control", null);
    __decorate([
        HostBinding('class.destroy-by-click'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "destroyByClick", null);
    __decorate([
        HostBinding('class.has-icon'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "hasIcon", null);
    __decorate([
        HostBinding('class.custom-icon'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbToastComponent.prototype, "customIcon", null);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbToastComponent.prototype, "onClick", null);
    NbToastComponent = __decorate([ __metadata("design:paramtypes", [Renderer2, ElementRef])
    ], NbToastComponent);
NbToastComponent.ɵfac = function NbToastComponent_Factory(t) { return new (t || NbToastComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
NbToastComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbToastComponent, selectors: [["nb-toast"]], hostVars: 20, hostBindings: function NbToastComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbToastComponent_click_HostBindingHandler() { return ctx.onClick(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("status-success", ctx.success)("status-info", ctx.info)("status-warning", ctx.warning)("status-primary", ctx.primary)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control)("destroy-by-click", ctx.destroyByClick)("has-icon", ctx.hasIcon)("custom-icon", ctx.customIcon);
    } }, inputs: { toast: "toast" }, outputs: { destroy: "destroy" }, decls: 6, vars: 3, consts: [["class", "icon-container", 4, "ngIf"], [1, "content-container"], [1, "title", "subtitle"], [1, "message"], [1, "icon-container"], [3, "config"]], template: function NbToastComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbToastComponent_div_0_Template, 2, 1, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "span", 2);
        ɵngcc0.ɵɵtext(3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(4, "div", 3);
        ɵngcc0.ɵɵtext(5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.hasIcon && ctx.icon);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ctx.toast.title);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵtextInterpolate(ctx.toast.message);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], styles: ["[_nghost-%COMP%]{display:flex;align-items:center;width:25rem;margin:0.5rem}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:0.25rem}.default[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%], [_nghost-%COMP%]:not(.has-icon)   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.destroy-by-click[_nghost-%COMP%]{cursor:pointer}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbToastComponent, [{
        type: Component,
        args: [{
                selector: 'nb-toast',
                template: "<div class=\"icon-container\" *ngIf=\"hasIcon && icon\">\n  <nb-icon [config]=\"iconConfig\"></nb-icon>\n</div>\n<div class=\"content-container\">\n  <span class=\"title subtitle\">{{ toast.title }}</span>\n  <div class=\"message\">{{ toast.message }}</div>\n</div>\n",
                styles: [":host{display:flex;align-items:center;width:25rem;margin:0.5rem}:host .title{margin-right:0.25rem}:host.default .content-container,:host:not(.has-icon) .content-container{display:flex;flex-direction:row}:host.destroy-by-click{cursor:pointer}:host nb-icon{font-size:2.5rem}:host svg{width:2.5rem;height:2.5rem}\n"]
            }]
    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }]; }, { destroy: [{
            type: Output
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], destroyByClick: [{
            type: HostBinding,
            args: ['class.destroy-by-click']
        }], hasIcon: [{
            type: HostBinding,
            args: ['class.has-icon']
        }], customIcon: [{
            type: HostBinding,
            args: ['class.custom-icon']
        }], onClick: [{
            type: HostListener,
            args: ['click']
        }], toast: [{
            type: Input
        }] }); })();
    return NbToastComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var voidState = style({
    transform: 'translateX({{ direction }}110%)',
    height: 0,
    marginLeft: '0',
    marginRight: '0',
    marginTop: '0',
    marginBottom: '0',
});
var defaultOptions = { params: { direction: '' } };
var NbToastrContainerComponent = /** @class */ (function () {
    function NbToastrContainerComponent(layoutDirection, positionHelper) {
        this.layoutDirection = layoutDirection;
        this.positionHelper = positionHelper;
        this.destroy$ = new Subject();
        this.content = [];
    }
    NbToastrContainerComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.layoutDirection.onDirectionChange()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.onDirectionChange(); });
    };
    NbToastrContainerComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbToastrContainerComponent.prototype.onDirectionChange = function () {
        var direction = this.positionHelper.isRightPosition(this.position) ? '' : '-';
        this.fadeIn = { value: '', params: { direction: direction } };
    };
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], NbToastrContainerComponent.prototype, "content", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbToastrContainerComponent.prototype, "context", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbToastrContainerComponent.prototype, "position", void 0);
    __decorate([
        ViewChildren(NbToastComponent),
        __metadata("design:type", QueryList)
    ], NbToastrContainerComponent.prototype, "toasts", void 0);
    NbToastrContainerComponent = __decorate([ __metadata("design:paramtypes", [NbLayoutDirectionService,
            NbPositionHelper])
    ], NbToastrContainerComponent);
NbToastrContainerComponent.ɵfac = function NbToastrContainerComponent_Factory(t) { return new (t || NbToastrContainerComponent)(ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(NbPositionHelper)); };
NbToastrContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbToastrContainerComponent, selectors: [["nb-toastr-container"]], viewQuery: function NbToastrContainerComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(NbToastComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.toasts = _t);
    } }, inputs: { content: "content", context: "context", position: "position" }, decls: 1, vars: 1, consts: [[3, "toast", 4, "ngFor", "ngForOf"], [3, "toast"]], template: function NbToastrContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbToastrContainerComponent_nb_toast_0_Template, 1, 2, "nb-toast", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngForOf", ctx.content);
    } }, directives: [ɵngcc2.NgForOf, NbToastComponent], encapsulation: 2, data: { animation: [
            trigger('fadeIn', [
                transition(':enter', [voidState, animate(100)], defaultOptions),
                transition(':leave', [animate(100, voidState)], defaultOptions),
            ]),
        ] } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbToastrContainerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-toastr-container',
                template: "\n    <nb-toast [@fadeIn]=\"fadeIn\" *ngFor=\"let toast of content\" [toast]=\"toast\"></nb-toast>",
                animations: [
                    trigger('fadeIn', [
                        transition(':enter', [voidState, animate(100)], defaultOptions),
                        transition(':leave', [animate(100, voidState)], defaultOptions),
                    ]),
                ]
            }]
    }], function () { return [{ type: NbLayoutDirectionService }, { type: NbPositionHelper }]; }, { content: [{
            type: Input
        }], context: [{
            type: Input
        }], position: [{
            type: Input
        }], toasts: [{
            type: ViewChildren,
            args: [NbToastComponent]
        }] }); })();
    return NbToastrContainerComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_TOASTR_CONFIG = new InjectionToken('Default toastr options');
/**
 * The `NbToastrConfig` class describes configuration of the `NbToastrService.show` and global toastr configuration.
 * */
var NbToastrConfig = /** @class */ (function () {
    function NbToastrConfig(config) {
        /**
         * Determines where on the screen toast have to be rendered.
         * */
        this.position = NbGlobalLogicalPosition.TOP_END;
        /**
         * Status chooses color scheme for the toast.
         * */
        this.status = 'basic';
        /**
         * Duration is timeout between toast appears and disappears.
         * */
        this.duration = 3000;
        /**
         * Destroy by click means you can hide the toast by clicking it.
         * */
        this.destroyByClick = true;
        /**
         * If preventDuplicates is true then the toast with the same title, message and status will not be rendered.
         * Find duplicates behaviour determined by `preventDuplicates`.
         * The default `previous` duplicate behaviour is used.
         * */
        this.preventDuplicates = false;
        /**
         * Determines the how to threat duplicates.
         * */
        this.duplicatesBehaviour = 'previous';
        /*
        * The number of visible toasts. If the limit exceeded the oldest toast will be removed.
        * */
        this.limit = null;
        /**
         * Class to be applied to the toast.
         */
        this.toastClass = '';
        /**
         * Determines render icon or not.
         * */
        this.hasIcon = true;
        /**
         * Icon name or icon config object that can be provided to render custom icon.
         * */
        this.icon = 'email';
        /**
         * Toast status icon-class mapping.
         * */
        this.icons = {
            danger: 'flash-outline',
            success: 'checkmark-outline',
            info: 'question-mark-outline',
            warning: 'alert-triangle-outline',
            primary: 'email-outline',
            control: 'email-outline',
            basic: 'email-outline',
        };
        if (config.status === '') {
            emptyStatusWarning('NbToastr');
            config.status = 'basic';
        }
        this.patchIcon(config);
        Object.assign(this, config);
    }
    NbToastrConfig.prototype.patchIcon = function (config) {
        if (!('icon' in config)) {
            config.icon = {
                icon: this.icons[config.status || 'basic'],
                pack: 'nebular-essentials',
            };
        }
    };
    return NbToastrConfig;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbToastRef = /** @class */ (function () {
    function NbToastRef(toastContainer, toast) {
        this.toastContainer = toastContainer;
        this.toast = toast;
    }
    NbToastRef.prototype.close = function () {
        this.toastContainer.destroy(this.toast);
    };
    return NbToastRef;
}());
var NbToastContainer = /** @class */ (function () {
    function NbToastContainer(position, containerRef, positionHelper) {
        this.position = position;
        this.containerRef = containerRef;
        this.positionHelper = positionHelper;
        this.toasts = [];
        this.toastDuplicateCompareFunc = function (t1, t2) {
            return t1.message === t2.message
                && t1.title === t2.title
                && t1.config.status === t2.config.status;
        };
    }
    Object.defineProperty(NbToastContainer.prototype, "nativeElement", {
        get: function () {
            return this.containerRef.location.nativeElement;
        },
        enumerable: true,
        configurable: true
    });
    NbToastContainer.prototype.attach = function (toast) {
        if (toast.config.preventDuplicates && this.isDuplicate(toast)) {
            return;
        }
        this.removeToastIfLimitReached(toast);
        var toastComponent = this.attachToast(toast);
        if (toast.config.destroyByClick) {
            this.subscribeOnClick(toastComponent, toast);
        }
        if (toast.config.duration) {
            this.setDestroyTimeout(toast);
        }
        this.prevToast = toast;
        return new NbToastRef(this, toast);
    };
    NbToastContainer.prototype.destroy = function (toast) {
        if (this.prevToast === toast) {
            this.prevToast = null;
        }
        this.toasts = this.toasts.filter(function (t) { return t !== toast; });
        this.updateContainer();
    };
    NbToastContainer.prototype.isDuplicate = function (toast) {
        return toast.config.duplicatesBehaviour === 'previous'
            ? this.isDuplicatePrevious(toast)
            : this.isDuplicateAmongAll(toast);
    };
    NbToastContainer.prototype.isDuplicatePrevious = function (toast) {
        return this.prevToast && this.toastDuplicateCompareFunc(this.prevToast, toast);
    };
    NbToastContainer.prototype.isDuplicateAmongAll = function (toast) {
        var _this = this;
        return this.toasts.some(function (t) { return _this.toastDuplicateCompareFunc(t, toast); });
    };
    NbToastContainer.prototype.removeToastIfLimitReached = function (toast) {
        if (!toast.config.limit || this.toasts.length < toast.config.limit) {
            return;
        }
        if (this.positionHelper.isTopPosition(toast.config.position)) {
            this.toasts.pop();
        }
        else {
            this.toasts.shift();
        }
    };
    NbToastContainer.prototype.attachToast = function (toast) {
        if (this.positionHelper.isTopPosition(toast.config.position)) {
            return this.attachToTop(toast);
        }
        else {
            return this.attachToBottom(toast);
        }
    };
    NbToastContainer.prototype.attachToTop = function (toast) {
        this.toasts.unshift(toast);
        this.updateContainer();
        return this.containerRef.instance.toasts.first;
    };
    NbToastContainer.prototype.attachToBottom = function (toast) {
        this.toasts.push(toast);
        this.updateContainer();
        return this.containerRef.instance.toasts.last;
    };
    NbToastContainer.prototype.setDestroyTimeout = function (toast) {
        var _this = this;
        setTimeout(function () { return _this.destroy(toast); }, toast.config.duration);
    };
    NbToastContainer.prototype.subscribeOnClick = function (toastComponent, toast) {
        var _this = this;
        toastComponent.destroy.subscribe(function () { return _this.destroy(toast); });
    };
    NbToastContainer.prototype.updateContainer = function () {
        patch(this.containerRef, { content: this.toasts, position: this.position });
    };
    return NbToastContainer;
}());
var NbToastrContainerRegistry = /** @class */ (function () {
    function NbToastrContainerRegistry(overlay, positionBuilder, positionHelper, cfr, document) {
        this.overlay = overlay;
        this.positionBuilder = positionBuilder;
        this.positionHelper = positionHelper;
        this.cfr = cfr;
        this.document = document;
        this.overlays = new Map();
    }
    NbToastrContainerRegistry.prototype.get = function (position) {
        var logicalPosition = this.positionHelper.toLogicalPosition(position);
        var overlayWithContainer = this.overlays.get(logicalPosition);
        if (!overlayWithContainer || !this.existsInDom(overlayWithContainer.toastrContainer)) {
            if (overlayWithContainer) {
                overlayWithContainer.overlayRef.dispose();
            }
            this.instantiateContainer(logicalPosition);
        }
        return this.overlays.get(logicalPosition).toastrContainer;
    };
    NbToastrContainerRegistry.prototype.instantiateContainer = function (position) {
        var toastrOverlayWithContainer = this.createContainer(position);
        this.overlays.set(position, toastrOverlayWithContainer);
    };
    NbToastrContainerRegistry.prototype.createContainer = function (position) {
        var positionStrategy = this.positionBuilder.global().position(position);
        var ref = this.overlay.create({ positionStrategy: positionStrategy });
        this.addClassToOverlayHost(ref);
        var containerRef = ref.attach(new NbComponentPortal(NbToastrContainerComponent, null, null, this.cfr));
        return {
            overlayRef: ref,
            toastrContainer: new NbToastContainer(position, containerRef, this.positionHelper),
        };
    };
    NbToastrContainerRegistry.prototype.addClassToOverlayHost = function (overlayRef) {
        overlayRef.hostElement.classList.add('toastr-overlay-container');
    };
    NbToastrContainerRegistry.prototype.existsInDom = function (toastContainer) {
        return this.document.body.contains(toastContainer.nativeElement);
    };
    NbToastrContainerRegistry = __decorate([ __param(4, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [NbOverlayService,
            NbPositionBuilderService,
            NbPositionHelper,
            ComponentFactoryResolver, Object])
    ], NbToastrContainerRegistry);
NbToastrContainerRegistry.ɵfac = function NbToastrContainerRegistry_Factory(t) { return new (t || NbToastrContainerRegistry)(ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(NbPositionBuilderService), ɵngcc0.ɵɵinject(NbPositionHelper), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(NB_DOCUMENT)); };
NbToastrContainerRegistry.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbToastrContainerRegistry, factory: function (t) { return NbToastrContainerRegistry.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbToastrContainerRegistry, [{
        type: Injectable
    }], function () { return [{ type: NbOverlayService }, { type: NbPositionBuilderService }, { type: NbPositionHelper }, { type: ɵngcc0.ComponentFactoryResolver }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }]; }, null); })();
    return NbToastrContainerRegistry;
}());
/**
 * The `NbToastrService` provides a capability to build toast notifications.
 *
 * @stacked-example(Showcase, toastr/toastr-showcase.component)
 *
 * `NbToastrService.show(message, title, config)` accepts three params, title and config are optional.
 *
 * ### Installation
 *
 * Import `NbToastrModule.forRoot()` to your app module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbToastrModule.forRoot(config),
 *   ],
 * })
 * export class AppModule { }
 * ```
 *
 * ### Usage
 *
 * Calling `NbToastrService.show(...)` will render new toast and return `NbToastrRef` with
 * help of which you may close newly created toast by calling `close` method.
 *
 * ```ts
 * const toastRef: NbToastRef = this.toastrService.show(...);
 * toastRef.close();
 * ```
 *
 * Config accepts following options:
 *
 * `position` - determines where on the screen toast will be rendered.
 * Default is `top-end`.
 *
 * @stacked-example(Position, toastr/toastr-positions.component)
 *
 * `status` - coloring and icon of the toast.
 * Default is `basic`.
 *
 * @stacked-example(Status, toastr/toastr-statuses.component)
 *
 * `duration` - the time after which the toast will be destroyed.
 * `0` means endless toast, that may be destroyed by click only.
 * Default is 3000 ms.
 *
 * @stacked-example(Duration, toastr/toastr-duration.component)
 *
 * `destroyByClick` - provides a capability to destroy toast by click.
 * Default is true.
 *
 * @stacked-example(Destroy by click, toastr/toastr-destroy-by-click.component)
 *
 * `preventDuplicates` - don't create new toast if it has the same title, message and status.
 * Default is false.
 *
 * @stacked-example(Prevent duplicates, toastr/toastr-prevent-duplicates.component)
 *
 * `duplicatesBehaviour` - determines how to threat the toasts duplication.
 * Compare with the previous message `previous`
 * or with all visible messages `all`.
 *
 * @stacked-example(Prevent duplicates behaviour , toastr/toastr-prevent-duplicates-behaviour.component)
 *
 * `limit` - the number of visible toasts in the toast container. The number of toasts is unlimited by default.
 *
 * @stacked-example(Prevent duplicates behaviour , toastr/toastr-limit.component)
 *
 * `hasIcon` - if true then render toast icon.
 * `icon` - you can pass icon class that will be applied into the toast.
 *
 * @stacked-example(Has icon, toastr/toastr-icon.component)
 * */
var NbToastrService = /** @class */ (function () {
    function NbToastrService(globalConfig, containerRegistry) {
        this.globalConfig = globalConfig;
        this.containerRegistry = containerRegistry;
    }
    /**
     * Shows toast with message, title and user config.
     * */
    NbToastrService.prototype.show = function (message, title, userConfig) {
        var config = new NbToastrConfig(__assign(__assign({}, this.globalConfig), userConfig));
        var container = this.containerRegistry.get(config.position);
        var toast = { message: message, title: title, config: config };
        return container.attach(toast);
    };
    /**
     * Shows success toast with message, title and user config.
     * */
    NbToastrService.prototype.success = function (message, title, config) {
        return this.show(message, title, __assign(__assign({}, config), { status: 'success' }));
    };
    /**
     * Shows info toast with message, title and user config.
     * */
    NbToastrService.prototype.info = function (message, title, config) {
        return this.show(message, title, __assign(__assign({}, config), { status: 'info' }));
    };
    /**
     * Shows warning toast with message, title and user config.
     * */
    NbToastrService.prototype.warning = function (message, title, config) {
        return this.show(message, title, __assign(__assign({}, config), { status: 'warning' }));
    };
    /**
     * Shows primary toast with message, title and user config.
     * */
    NbToastrService.prototype.primary = function (message, title, config) {
        return this.show(message, title, __assign(__assign({}, config), { status: 'primary' }));
    };
    /**
     * Shows danger toast with message, title and user config.
     * */
    NbToastrService.prototype.danger = function (message, title, config) {
        return this.show(message, title, __assign(__assign({}, config), { status: 'danger' }));
    };
    /**
     * Shows default toast with message, title and user config.
     * */
    NbToastrService.prototype.default = function (message, title, config) {
        return this.show(message, title, __assign(__assign({}, config), { status: 'basic' }));
    };
    /**
     * Shows control toast with message, title and user config.
     * */
    NbToastrService.prototype.control = function (message, title, config) {
        return this.default(message, title, __assign(__assign({}, config), { status: 'control' }));
    };
    NbToastrService = __decorate([ __param(0, Inject(NB_TOASTR_CONFIG)),
        __metadata("design:paramtypes", [NbToastrConfig,
            NbToastrContainerRegistry])
    ], NbToastrService);
NbToastrService.ɵfac = function NbToastrService_Factory(t) { return new (t || NbToastrService)(ɵngcc0.ɵɵinject(NB_TOASTR_CONFIG), ɵngcc0.ɵɵinject(NbToastrContainerRegistry)); };
NbToastrService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbToastrService, factory: function (t) { return NbToastrService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbToastrService, [{
        type: Injectable
    }], function () { return [{ type: NbToastrConfig, decorators: [{
                type: Inject,
                args: [NB_TOASTR_CONFIG]
            }] }, { type: NbToastrContainerRegistry }]; }, null); })();
    return NbToastrService;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbToastrModule = /** @class */ (function () {
    function NbToastrModule() {
    }
    NbToastrModule_1 = NbToastrModule;
    NbToastrModule.forRoot = function (toastrConfig) {
        if (toastrConfig === void 0) { toastrConfig = {}; }
        return {
            ngModule: NbToastrModule_1,
            providers: [
                NbToastrService,
                NbToastrContainerRegistry,
                { provide: NB_TOASTR_CONFIG, useValue: toastrConfig },
            ],
        };
    };
    var NbToastrModule_1;
NbToastrModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbToastrModule });
NbToastrModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbToastrModule_Factory(t) { return new (t || NbToastrModule)(); }, imports: [[NbSharedModule, NbOverlayModule, NbIconModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbToastrModule, { declarations: [NbToastrContainerComponent,
        NbToastComponent], imports: [NbSharedModule,
        NbOverlayModule,
        NbIconModule] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbToastrModule, [{
        type: NgModule,
        args: [{
                imports: [NbSharedModule, NbOverlayModule, NbIconModule],
                declarations: [NbToastrContainerComponent, NbToastComponent],
                entryComponents: [NbToastrContainerComponent, NbToastComponent]
            }]
    }], function () { return []; }, null); })();
    return NbToastrModule;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Tooltip container.
 * Renders provided tooltip inside.
 *
 * @styles
 *
 * tooltip-background-color:
 * tooltip-border-color:
 * tooltip-border-style:
 * tooltip-border-width:
 * tooltip-border-radius:
 * tooltip-padding:
 * tooltip-text-color:
 * tooltip-text-font-family:
 * tooltip-text-font-size:
 * tooltip-text-font-weight:
 * tooltip-text-line-height:
 * tooltip-icon-height:
 * tooltip-icon-width:
 * tooltip-max-width:
 * tooltip-basic-background-color:
 * tooltip-basic-border-color:
 * tooltip-basic-text-color:
 * tooltip-primary-background-color:
 * tooltip-primary-border-color:
 * tooltip-primary-text-color:
 * tooltip-info-background-color:
 * tooltip-info-border-color:
 * tooltip-info-text-color:
 * tooltip-success-background-color:
 * tooltip-success-border-color:
 * tooltip-success-text-color:
 * tooltip-warning-background-color:
 * tooltip-warning-border-color:
 * tooltip-warning-text-color:
 * tooltip-danger-background-color:
 * tooltip-danger-border-color:
 * tooltip-danger-text-color:
 * tooltip-control-background-color:
 * tooltip-control-border-color:
 * tooltip-control-text-color:
 * tooltip-shadow:
 */
var NbTooltipComponent = /** @class */ (function () {
    function NbTooltipComponent() {
        /**
         * Popover position relatively host element.
         * */
        this.position = NbPosition.TOP;
        this.context = {};
    }
    Object.defineProperty(NbTooltipComponent.prototype, "binding", {
        get: function () {
            return this.position + " " + this.statusClass;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTooltipComponent.prototype, "show", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTooltipComponent.prototype, "statusClass", {
        get: function () {
            if (this.context.status) {
                return "status-" + this.context.status;
            }
            return '';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * The method is empty since we don't need to do anything additionally
     * render is handled by change detection
     */
    NbTooltipComponent.prototype.renderContent = function () { };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTooltipComponent.prototype, "content", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTooltipComponent.prototype, "position", void 0);
    __decorate([
        HostBinding('class'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbTooltipComponent.prototype, "binding", null);
    __decorate([
        HostBinding('@showTooltip'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbTooltipComponent.prototype, "show", null);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbTooltipComponent.prototype, "context", void 0);
NbTooltipComponent.ɵfac = function NbTooltipComponent_Factory(t) { return new (t || NbTooltipComponent)(); };
NbTooltipComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTooltipComponent, selectors: [["nb-tooltip"]], hostVars: 3, hostBindings: function NbTooltipComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵupdateSyntheticHostBinding("@showTooltip", ctx.show);
        ɵngcc0.ɵɵclassMap(ctx.binding);
    } }, inputs: { position: "position", context: "context", content: "content" }, decls: 4, vars: 2, consts: [[1, "arrow"], [1, "content"], [3, "config", 4, "ngIf"], [4, "ngIf"], [3, "config"]], template: function NbTooltipComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "span", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵtemplate(2, NbTooltipComponent_nb_icon_2_Template, 1, 1, "nb-icon", 2);
        ɵngcc0.ɵɵtemplate(3, NbTooltipComponent_span_3_Template, 2, 1, "span", 3);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.context == null ? null : ctx.context.icon);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.content);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], styles: ["[_nghost-%COMP%]{z-index:10000}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center}.right[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:row-reverse}[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;width:0;height:0}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:0.5rem}.right[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-right:0.5rem}[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{border-left:6px solid transparent;border-right:6px solid transparent}.bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:-6px;left:calc(50% - 6px)}.bottom-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:-6px}[dir=ltr]   .bottom-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}[dir=rtl]   .bottom-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}.bottom-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:-6px}[dir=ltr]   .bottom-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}[dir=rtl]   .bottom-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}.left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - 2.4px)}[dir=ltr]   .left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=ltr]   .start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;transform:rotate(90deg)}[dir=rtl]   .left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=rtl]   .start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:-8px;transform:rotate(270deg)}.start-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;bottom:6px;transform:rotate(90deg)}.start-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;top:6px;transform:rotate(90deg)}.top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{bottom:-6px;left:calc(50% - 6px);transform:rotate(180deg)}.top-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{bottom:calc(-1 * 6px + 1px);transform:rotate(180deg)}[dir=ltr]   .top-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}[dir=rtl]   .top-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}.top-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{bottom:calc(-6px + 1px);transform:rotate(180deg)}[dir=ltr]   .top-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}[dir=rtl]   .top-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}.right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - 2.4px)}[dir=ltr]   .right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=ltr]   .end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:-8px;transform:rotate(270deg)}[dir=rtl]   .right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=rtl]   .end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;transform:rotate(90deg)}.end-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:calc(-6px - 6px / 2.5);bottom:6px;transform:rotate(270deg)}.end-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:calc(-6px - 6px / 2.5);top:6px;transform:rotate(270deg)}"], data: { animation: [
            trigger('showTooltip', [
                state('in', style({ opacity: 1 })),
                transition('void => *', [
                    style({ opacity: 0 }),
                    animate(100),
                ]),
                transition('* => void', [
                    animate(100, style({ opacity: 0 })),
                ]),
            ]),
        ] } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTooltipComponent, [{
        type: Component,
        args: [{
                selector: 'nb-tooltip',
                template: "\n    <span class=\"arrow\"></span>\n    <div class=\"content\">\n      <nb-icon *ngIf=\"context?.icon\" [config]=\"context.icon\"></nb-icon>\n      <span *ngIf=\"content\">{{ content }}</span>\n    </div>\n  ",
                animations: [
                    trigger('showTooltip', [
                        state('in', style({ opacity: 1 })),
                        transition('void => *', [
                            style({ opacity: 0 }),
                            animate(100),
                        ]),
                        transition('* => void', [
                            animate(100, style({ opacity: 0 })),
                        ]),
                    ]),
                ],
                styles: [":host{z-index:10000}:host .content{display:flex;align-items:center}:host.right .content{flex-direction:row-reverse}:host .arrow{position:absolute;width:0;height:0}:host nb-icon+span{margin-left:0.5rem}:host.right nb-icon+span{margin-right:0.5rem}:host .arrow{border-left:6px solid transparent;border-right:6px solid transparent}:host(.bottom) .arrow{top:-6px;left:calc(50% - 6px)}:host(.bottom-start) .arrow{top:-6px}[dir=ltr] :host(.bottom-start) .arrow{right:6px}[dir=rtl] :host(.bottom-start) .arrow{left:6px}:host(.bottom-end) .arrow{top:-6px}[dir=ltr] :host(.bottom-end) .arrow{left:6px}[dir=rtl] :host(.bottom-end) .arrow{right:6px}:host(.left) .arrow,:host(.start) .arrow{top:calc(50% - 2.4px)}[dir=ltr] :host(.left) .arrow,[dir=ltr] :host(.start) .arrow{right:-8px;transform:rotate(90deg)}[dir=rtl] :host(.left) .arrow,[dir=rtl] :host(.start) .arrow{left:-8px;transform:rotate(270deg)}:host(.start-top) .arrow{right:-8px;bottom:6px;transform:rotate(90deg)}:host(.start-bottom) .arrow{right:-8px;top:6px;transform:rotate(90deg)}:host(.top) .arrow{bottom:-6px;left:calc(50% - 6px);transform:rotate(180deg)}:host(.top-start) .arrow{bottom:calc(-1 * 6px + 1px);transform:rotate(180deg)}[dir=ltr] :host(.top-start) .arrow{right:6px}[dir=rtl] :host(.top-start) .arrow{left:6px}:host(.top-end) .arrow{bottom:calc(-6px + 1px);transform:rotate(180deg)}[dir=ltr] :host(.top-end) .arrow{left:6px}[dir=rtl] :host(.top-end) .arrow{right:6px}:host(.right) .arrow,:host(.end) .arrow{top:calc(50% - 2.4px)}[dir=ltr] :host(.right) .arrow,[dir=ltr] :host(.end) .arrow{left:-8px;transform:rotate(270deg)}[dir=rtl] :host(.right) .arrow,[dir=rtl] :host(.end) .arrow{right:-8px;transform:rotate(90deg)}:host(.end-top) .arrow{left:calc(-6px - 6px / 2.5);bottom:6px;transform:rotate(270deg)}:host(.end-bottom) .arrow{left:calc(-6px - 6px / 2.5);top:6px;transform:rotate(270deg)}\n"]
            }]
    }], function () { return []; }, { position: [{
            type: Input
        }], context: [{
            type: Input
        }], binding: [{
            type: HostBinding,
            args: ['class']
        }], show: [{
            type: HostBinding,
            args: ['@showTooltip']
        }], content: [{
            type: Input
        }] }); })();
    return NbTooltipComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 *
 * Tooltip directive for small text/icon hints.
 *
 * ### Installation
 *
 * Import `NbTooltipModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbTooltipModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * @stacked-example(Showcase, tooltip/tooltip-showcase.component)
 *
 * Tooltip can accept a hint text and/or an icon:
 * @stacked-example(With Icon, tooltip/tooltip-with-icon.component)
 *
 * Same way as Popover, tooltip can accept placement position with `nbTooltipPlacement` property:
 * @stacked-example(Placements, tooltip/tooltip-placements.component)
 *
 * It is also possible to specify tooltip color using `nbTooltipStatus` property:
 * @stacked-example(Colored Tooltips, tooltip/tooltip-colors.component)
 *
 * Tooltip has a number of triggers which provides an ability to show and hide the component in different ways:
 *
 * - Click mode shows the component when a user clicks on the host element and hides when the user clicks
 * somewhere on the document outside the component.
 * - Hint provides capability to show the component when the user hovers over the host element
 * and hide when the user hovers out of the host.
 * - Hover works like hint mode with one exception - when the user moves mouse from host element to
 * the container element the component remains open, so that it is possible to interact with it content.
 * - Focus mode is applied when user focuses the element.
 * - Noop mode - the component won't react to the user interaction.
 */
var NbTooltipDirective = /** @class */ (function () {
    function NbTooltipDirective(hostRef, dynamicOverlayHandler) {
        this.hostRef = hostRef;
        this.dynamicOverlayHandler = dynamicOverlayHandler;
        this.destroy$ = new Subject();
        this.tooltipComponent = NbTooltipComponent;
        this.offset = 8;
        this.context = {};
        /**
         * Position will be calculated relatively host element based on the position.
         * Can be top, right, bottom, left, start or end.
         */
        this.position = NbPosition.TOP;
        this._adjustment = NbAdjustment.CLOCKWISE;
        this.tooltipClass = '';
        /**
         * Describes when the container will be shown.
         * Available options: `click`, `hover`, `hint`, `focus` and `noop`
         * */
        this.trigger = NbTrigger.HINT;
        this.nbTooltipShowStateChange = new EventEmitter();
    }
    Object.defineProperty(NbTooltipDirective.prototype, "adjustment", {
        /**
         * Container position will change automatically based on this strategy if container can't fit view port.
         * Set this property to `noop` value if you want to disable automatic adjustment.
         * Available values: `clockwise` (default), `counterclockwise`, `vertical`, `horizontal`, `noop`.
         */
        get: function () {
            return this._adjustment;
        },
        set: function (value) {
            if (!value) {
                // @breaking-change Remove @5.0.0
                console.warn("Falsy values for 'nbPopoverAdjustment' are deprecated and will be removed in Nebular 5.\n Use 'noop' instead.");
                value = NbAdjustment.NOOP;
            }
            this._adjustment = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTooltipDirective.prototype, "icon", {
        /**
         * Accepts icon name or icon config object
         * @param {string | NbIconConfig} icon name or config object
         */
        set: function (icon) {
            this.context = Object.assign(this.context, { icon: icon });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTooltipDirective.prototype, "status", {
        /**
         *
         * @param {string} status
         */
        set: function (status) {
            this.context = Object.assign(this.context, { status: status });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTooltipDirective.prototype, "isShown", {
        get: function () {
            return !!(this.dynamicOverlay && this.dynamicOverlay.isAttached);
        },
        enumerable: true,
        configurable: true
    });
    NbTooltipDirective.prototype.ngOnInit = function () {
        this.dynamicOverlayHandler
            .host(this.hostRef)
            .componentType(this.tooltipComponent)
            .offset(this.offset);
    };
    NbTooltipDirective.prototype.ngOnChanges = function () {
        this.rebuild();
    };
    NbTooltipDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.dynamicOverlay = this.configureDynamicOverlay()
            .build();
        this.dynamicOverlay.isShown
            .pipe(skip(1), takeUntil(this.destroy$))
            .subscribe(function (isShown) { return _this.nbTooltipShowStateChange.emit({ isShown: isShown }); });
    };
    NbTooltipDirective.prototype.rebuild = function () {
        this.dynamicOverlay = this.configureDynamicOverlay()
            .rebuild();
    };
    NbTooltipDirective.prototype.show = function () {
        this.dynamicOverlay.show();
    };
    NbTooltipDirective.prototype.hide = function () {
        this.dynamicOverlay.hide();
    };
    NbTooltipDirective.prototype.toggle = function () {
        this.dynamicOverlay.toggle();
    };
    NbTooltipDirective.prototype.ngOnDestroy = function () {
        this.dynamicOverlayHandler.destroy();
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbTooltipDirective.prototype.configureDynamicOverlay = function () {
        return this.dynamicOverlayHandler
            .position(this.position)
            .trigger(this.trigger)
            .adjustment(this.adjustment)
            .content(this.content)
            .context(this.context)
            .overlayConfig({ panelClass: this.tooltipClass });
    };
    __decorate([
        Input('nbTooltip'),
        __metadata("design:type", String)
    ], NbTooltipDirective.prototype, "content", void 0);
    __decorate([
        Input('nbTooltipPlacement'),
        __metadata("design:type", String)
    ], NbTooltipDirective.prototype, "position", void 0);
    __decorate([
        Input('nbTooltipAdjustment'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbTooltipDirective.prototype, "adjustment", null);
    __decorate([
        Input('nbTooltipClass'),
        __metadata("design:type", String)
    ], NbTooltipDirective.prototype, "tooltipClass", void 0);
    __decorate([
        Input('nbTooltipIcon'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbTooltipDirective.prototype, "icon", null);
    __decorate([
        Input('nbTooltipStatus'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbTooltipDirective.prototype, "status", null);
    __decorate([
        Input('nbTooltipTrigger'),
        __metadata("design:type", String)
    ], NbTooltipDirective.prototype, "trigger", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbTooltipDirective.prototype, "nbTooltipShowStateChange", void 0);
    NbTooltipDirective = __decorate([ __metadata("design:paramtypes", [ElementRef,
            NbDynamicOverlayHandler])
    ], NbTooltipDirective);
NbTooltipDirective.ɵfac = function NbTooltipDirective_Factory(t) { return new (t || NbTooltipDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbDynamicOverlayHandler)); };
NbTooltipDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTooltipDirective, selectors: [["", "nbTooltip", ""]], inputs: { position: ["nbTooltipPlacement", "position"], tooltipClass: ["nbTooltipClass", "tooltipClass"], trigger: ["nbTooltipTrigger", "trigger"], adjustment: ["nbTooltipAdjustment", "adjustment"], icon: ["nbTooltipIcon", "icon"], status: ["nbTooltipStatus", "status"], content: ["nbTooltip", "content"] }, outputs: { nbTooltipShowStateChange: "nbTooltipShowStateChange" }, exportAs: ["nbTooltip"], features: [ɵngcc0.ɵɵProvidersFeature([NbDynamicOverlayHandler, NbDynamicOverlay]), ɵngcc0.ɵɵNgOnChangesFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTooltipDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTooltip]',
                exportAs: 'nbTooltip',
                providers: [NbDynamicOverlayHandler, NbDynamicOverlay]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NbDynamicOverlayHandler }]; }, { position: [{
            type: Input,
            args: ['nbTooltipPlacement']
        }], tooltipClass: [{
            type: Input,
            args: ['nbTooltipClass']
        }], trigger: [{
            type: Input,
            args: ['nbTooltipTrigger']
        }], nbTooltipShowStateChange: [{
            type: Output
        }], adjustment: [{
            type: Input,
            args: ['nbTooltipAdjustment']
        }], icon: [{
            type: Input,
            args: ['nbTooltipIcon']
        }], status: [{
            type: Input,
            args: ['nbTooltipStatus']
        }], content: [{
            type: Input,
            args: ['nbTooltip']
        }] }); })();
    return NbTooltipDirective;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbTooltipModule = /** @class */ (function () {
    function NbTooltipModule() {
    }
NbTooltipModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbTooltipModule });
NbTooltipModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbTooltipModule_Factory(t) { return new (t || NbTooltipModule)(); }, imports: [[NbSharedModule, NbOverlayModule, NbIconModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTooltipModule, { declarations: [NbTooltipComponent,
        NbTooltipDirective], imports: [NbSharedModule,
        NbOverlayModule,
        NbIconModule], exports: [NbTooltipDirective] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTooltipModule, [{
        type: NgModule,
        args: [{
                imports: [NbSharedModule, NbOverlayModule, NbIconModule],
                declarations: [NbTooltipComponent, NbTooltipDirective],
                exports: [NbTooltipDirective],
                entryComponents: [NbTooltipComponent]
            }]
    }], function () { return []; }, null); })();
    return NbTooltipModule;
}());

var NB_SELECT_INJECTION_TOKEN = new InjectionToken('NB_SELECT_INJECTION_TOKEN');

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
// Component class scoped counter for aria attributes.
var lastOptionId = 0;
/**
 * NbOptionComponent
 *
 * @styles
 *
 * option-background-color:
 * option-text-color:
 * option-text-font-family:
 * option-hover-background-color:
 * option-hover-text-color:
 * option-active-background-color:
 * option-active-text-color:
 * option-focus-background-color:
 * option-focus-text-color:
 * option-selected-background-color:
 * option-selected-text-color:
 * option-selected-hover-background-color:
 * option-selected-hover-text-color:
 * option-selected-active-background-color:
 * option-selected-active-text-color:
 * option-selected-focus-background-color:
 * option-selected-focus-text-color:
 * option-disabled-background-color:
 * option-disabled-text-color:
 * option-tiny-text-font-size:
 * option-tiny-text-font-weight:
 * option-tiny-text-line-height:
 * option-tiny-padding:
 * option-small-text-font-size:
 * option-small-text-font-weight:
 * option-small-text-line-height:
 * option-small-padding:
 * option-medium-text-font-size:
 * option-medium-text-font-weight:
 * option-medium-text-line-height:
 * option-medium-padding:
 * option-large-text-font-size:
 * option-large-text-font-weight:
 * option-large-text-line-height:
 * option-large-padding:
 * option-giant-text-font-size:
 * option-giant-text-font-weight:
 * option-giant-text-line-height:
 * option-giant-padding:
 **/
var NbOptionComponent = /** @class */ (function () {
    function NbOptionComponent(parent, elementRef, cd, zone, renderer) {
        this.elementRef = elementRef;
        this.cd = cd;
        this.zone = zone;
        this.renderer = renderer;
        this.disabledByGroup = false;
        this._disabled = false;
        /**
         * Fires value when option selection change.
         * */
        this.selectionChange = new EventEmitter();
        /**
         * Fires when option clicked
         */
        this.click$ = new Subject();
        this.selected = false;
        this.alive = true;
        /**
         * Component scoped id for aria attributes.
         * */
        this.id = "nb-option-" + lastOptionId++;
        this._active = false;
        this.parent = parent;
    }
    Object.defineProperty(NbOptionComponent.prototype, "disabled", {
        get: function () {
            return this._disabled || this.disabledByGroup;
        },
        set: function (value) {
            this._disabled = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionComponent.prototype, "click", {
        get: function () {
            return this.click$.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    NbOptionComponent.prototype.ngOnDestroy = function () {
        this.alive = false;
    };
    NbOptionComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // TODO: #2254
        this.zone.runOutsideAngular(function () { return setTimeout(function () {
            _this.renderer.addClass(_this.elementRef.nativeElement, 'nb-transition');
        }); });
    };
    Object.defineProperty(NbOptionComponent.prototype, "withCheckbox", {
        /**
         * Determines should we render checkbox.
         * */
        get: function () {
            return this.multiple && this.value != null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionComponent.prototype, "content", {
        get: function () {
            return this.elementRef.nativeElement.textContent;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionComponent.prototype, "multiple", {
        // TODO: replace with isShowCheckbox property to control this behaviour outside, issues/1965
        get: function () {
            // We check parent existing because parent can be NbSelectComponent or
            // NbAutocomplete and `miltiple` property exists only in NbSelectComponent
            return this.parent ? this.parent.multiple : false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionComponent.prototype, "selectedClass", {
        get: function () {
            return this.selected;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionComponent.prototype, "disabledAttribute", {
        get: function () {
            return this.disabled ? '' : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionComponent.prototype, "tabindex", {
        get: function () {
            return '-1';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionComponent.prototype, "activeClass", {
        get: function () {
            return this._active;
        },
        enumerable: true,
        configurable: true
    });
    
    NbOptionComponent.prototype.onClick = function (event) {
        this.click$.next(this);
        // Prevent scroll on space click, etc.
        event.preventDefault();
    };
    NbOptionComponent.prototype.select = function () {
        this.setSelection(true);
    };
    NbOptionComponent.prototype.deselect = function () {
        this.setSelection(false);
    };
    /**
     * Sets disabled by group state and marks component for check.
     */
    NbOptionComponent.prototype.setDisabledByGroupState = function (disabled) {
        if (this.disabledByGroup !== disabled) {
            this.disabledByGroup = disabled;
            this.cd.markForCheck();
        }
    };
    NbOptionComponent.prototype.setSelection = function (selected) {
        /**
         * In case of changing options in runtime the reference to the selected option will be kept in select component.
         * This may lead to exceptions with detecting changes in destroyed component.
         *
         * Also Angular can call writeValue on destroyed view (select implements ControlValueAccessor).
         * angular/angular#27803
         * */
        if (this.alive && this.selected !== selected) {
            this.selected = selected;
            this.selectionChange.emit(this);
            this.cd.markForCheck();
        }
    };
    NbOptionComponent.prototype.focus = function () {
        this.elementRef.nativeElement.focus();
    };
    NbOptionComponent.prototype.getLabel = function () {
        return this.content;
    };
    NbOptionComponent.prototype.setActiveStyles = function () {
        this._active = true;
        this.cd.markForCheck();
    };
    NbOptionComponent.prototype.setInactiveStyles = function () {
        this._active = false;
        this.cd.markForCheck();
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbOptionComponent.prototype, "value", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbOptionComponent.prototype, "disabled", null);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbOptionComponent.prototype, "selectionChange", void 0);
    __decorate([
        HostBinding('attr.id'),
        __metadata("design:type", String)
    ], NbOptionComponent.prototype, "id", void 0);
    __decorate([
        HostBinding('class.multiple'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbOptionComponent.prototype, "multiple", null);
    __decorate([
        HostBinding('class.selected'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionComponent.prototype, "selectedClass", null);
    __decorate([
        HostBinding('attr.disabled'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbOptionComponent.prototype, "disabledAttribute", null);
    __decorate([
        HostBinding('tabIndex'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbOptionComponent.prototype, "tabindex", null);
    __decorate([
        HostBinding('class.active'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbOptionComponent.prototype, "activeClass", null);
    __decorate([
        HostListener('click', ['$event']),
        HostListener('keydown.space', ['$event']),
        HostListener('keydown.enter', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbOptionComponent.prototype, "onClick", null);
    NbOptionComponent = __decorate([ __param(0, Optional()), __param(0, Inject(NB_SELECT_INJECTION_TOKEN)),
        __metadata("design:paramtypes", [Object, ElementRef,
            ChangeDetectorRef,
            NgZone,
            Renderer2])
    ], NbOptionComponent);
NbOptionComponent.ɵfac = function NbOptionComponent_Factory(t) { return new (t || NbOptionComponent)(ɵngcc0.ɵɵdirectiveInject(NB_SELECT_INJECTION_TOKEN, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
NbOptionComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbOptionComponent, selectors: [["nb-option"]], hostVars: 9, hostBindings: function NbOptionComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbOptionComponent_click_HostBindingHandler($event) { return ctx.onClick($event); })("keydown.space", function NbOptionComponent_keydown_space_HostBindingHandler($event) { return ctx.onClick($event); })("keydown.enter", function NbOptionComponent_keydown_enter_HostBindingHandler($event) { return ctx.onClick($event); });
    } if (rf & 2) {
        ɵngcc0.ɵɵhostProperty("tabIndex", ctx.tabindex);
        ɵngcc0.ɵɵattribute("id", ctx.id)("disabled", ctx.disabledAttribute);
        ɵngcc0.ɵɵclassProp("multiple", ctx.multiple)("selected", ctx.selectedClass)("active", ctx.activeClass);
    } }, inputs: { disabled: "disabled", value: "value" }, outputs: { selectionChange: "selectionChange" }, ngContentSelectors: _c0, decls: 2, vars: 1, consts: [["aria-hidden", "true", 3, "checked", "disabled", 4, "ngIf"], ["aria-hidden", "true", 3, "checked", "disabled"]], template: function NbOptionComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, NbOptionComponent_nb_checkbox_0_Template, 1, 2, "nb-checkbox", 0);
        ɵngcc0.ɵɵprojection(1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.withCheckbox);
    } }, directives: [ɵngcc2.NgIf, NbCheckboxComponent], styles: ["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]{display:flex;pointer-events:none}[dir=ltr]   [_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   [_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]     .label{padding:0}[disabled][_nghost-%COMP%]{pointer-events:none}.nb-transition[_nghost-%COMP%]{transition-duration:0.15s;transition-property:background-color,color;transition-timing-function:ease-in}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOptionComponent, [{
        type: Component,
        args: [{
                selector: 'nb-option',
                changeDetection: ChangeDetectionStrategy.OnPush,
                template: "\n    <nb-checkbox *ngIf=\"withCheckbox\"\n                 [checked]=\"selected\"\n                 [disabled]=\"disabled\"\n                 aria-hidden=\"true\">\n    </nb-checkbox>\n    <ng-content></ng-content>\n  ",
                styles: ["/*!\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */:host{display:flex}:host:hover{cursor:pointer}:host nb-checkbox{display:flex;pointer-events:none}[dir=ltr] :host nb-checkbox{margin-right:.5rem}[dir=rtl] :host nb-checkbox{margin-left:.5rem}:host nb-checkbox ::ng-deep .label{padding:0}:host([disabled]){pointer-events:none}:host(.nb-transition){transition-duration:0.15s;transition-property:background-color,color;transition-timing-function:ease-in}\n"]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [NB_SELECT_INJECTION_TOKEN]
            }] }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.NgZone }, { type: ɵngcc0.Renderer2 }]; }, { selectionChange: [{
            type: Output
        }], id: [{
            type: HostBinding,
            args: ['attr.id']
        }], disabled: [{
            type: Input
        }], multiple: [{
            type: HostBinding,
            args: ['class.multiple']
        }], selectedClass: [{
            type: HostBinding,
            args: ['class.selected']
        }], disabledAttribute: [{
            type: HostBinding,
            args: ['attr.disabled']
        }], tabindex: [{
            type: HostBinding,
            args: ['tabIndex']
        }], activeClass: [{
            type: HostBinding,
            args: ['class.active']
        }], onClick: [{
            type: HostListener,
            args: ['click', ['$event']]
        }, {
            type: HostListener,
            args: ['keydown.space', ['$event']]
        }, {
            type: HostListener,
            args: ['keydown.enter', ['$event']]
        }], value: [{
            type: Input
        }] }); })();
    return NbOptionComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbSelectLabelComponent = /** @class */ (function () {
    function NbSelectLabelComponent() {
    }
NbSelectLabelComponent.ɵfac = function NbSelectLabelComponent_Factory(t) { return new (t || NbSelectLabelComponent)(); };
NbSelectLabelComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSelectLabelComponent, selectors: [["nb-select-label"]], ngContentSelectors: _c0, decls: 1, vars: 0, template: function NbSelectLabelComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSelectLabelComponent, [{
        type: Component,
        args: [{
                selector: 'nb-select-label',
                template: '<ng-content></ng-content>'
            }]
    }], function () { return []; }, null); })();
    return NbSelectLabelComponent;
}());
function nbSelectFormFieldControlConfigFactory() {
    var config = new NbFormFieldControlConfig();
    config.supportsSuffix = false;
    return config;
}
/**
 * The `NbSelectComponent` provides a capability to select one of the passed items.
 *
 * @stacked-example(Showcase, select/select-showcase.component)
 *
 * ### Installation
 *
 * Import `NbSelectModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbSelectModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * If you want to use it as the multi-select control you have to mark it as `multiple`.
 * In this case, `nb-select` will work only with arrays - accept arrays and propagate arrays.
 *
 * @stacked-example(Multiple, select/select-multiple.component)
 *
 * Items without values will clean the selection. Both `null` and `undefined` values will also clean the selection.
 *
 * @stacked-example(Clean selection, select/select-clean.component)
 *
 * Select may be bounded using `selected` input:
 *
 * ```html
 * <nb-select [(selected)]="selected"></nb-selected>
 * ```
 *
 * Or you can bind control with form controls or ngModel:
 *
 * @stacked-example(Select form binding, select/select-form.component)
 *
 * Options in the select may be grouped using `nb-option-group` component.
 *
 * @stacked-example(Grouping, select/select-groups.component)
 *
 * Select may have a placeholder that will be shown when nothing selected:
 *
 * @stacked-example(Placeholder, select/select-placeholder.component)
 *
 * You can disable select, options and whole groups.
 *
 * @stacked-example(Disabled select, select/select-disabled.component)
 *
 * Also, the custom label may be provided in select.
 * This custom label will be used for instead placeholder when something selected.
 *
 * @stacked-example(Custom label, select/select-label.component)
 *
 * Default `nb-select` size is `medium` and status is `basic`.
 * Select is available in multiple colors using `status` property:
 *
 * @stacked-example(Select statuses, select/select-status.component)
 *
 * There are five select sizes:
 *
 * @stacked-example(Select sizes, select/select-sizes.component)
 *
 * And two additional style types - `filled`:
 *
 * @stacked-example(Filled select, select/select-filled.component)
 *
 * and `hero`:
 *
 * @stacked-example(Select colors, select/select-hero.component)
 *
 * Select is available in different shapes, that could be combined with the other properties:
 *
 * @stacked-example(Select shapes, select/select-shapes.component)
 *
 * @additional-example(Interactive, select/select-interactive.component)
 *
 * @styles
 *
 * select-cursor:
 * select-disabled-cursor:
 * select-min-width:
 * select-outline-width:
 * select-outline-color:
 * select-icon-offset:
 * select-text-font-family:
 * select-placeholder-text-font-family:
 * select-tiny-text-font-size:
 * select-tiny-text-font-weight:
 * select-tiny-text-line-height:
 * select-tiny-placeholder-text-font-size:
 * select-tiny-placeholder-text-font-weight:
 * select-tiny-max-width:
 * select-small-text-font-size:
 * select-small-text-font-weight:
 * select-small-text-line-height:
 * select-small-placeholder-text-font-size:
 * select-small-placeholder-text-font-weight:
 * select-small-max-width:
 * select-medium-text-font-size:
 * select-medium-text-font-weight:
 * select-medium-text-line-height:
 * select-medium-placeholder-text-font-size:
 * select-medium-placeholder-text-font-weight:
 * select-medium-max-width:
 * select-large-text-font-size:
 * select-large-text-font-weight:
 * select-large-text-line-height:
 * select-large-placeholder-text-font-size:
 * select-large-placeholder-text-font-weight:
 * select-large-max-width:
 * select-giant-text-font-size:
 * select-giant-text-font-weight:
 * select-giant-text-line-height:
 * select-giant-placeholder-text-font-size:
 * select-giant-placeholder-text-font-weight:
 * select-giant-max-width:
 * select-rectangle-border-radius:
 * select-semi-round-border-radius:
 * select-round-border-radius:
 * select-outline-border-style:
 * select-outline-border-width:
 * select-outline-tiny-padding:
 * select-outline-small-padding:
 * select-outline-medium-padding:
 * select-outline-large-padding:
 * select-outline-giant-padding:
 * select-outline-basic-icon-color:
 * select-outline-basic-text-color:
 * select-outline-basic-placeholder-text-color:
 * select-outline-basic-background-color:
 * select-outline-basic-border-color:
 * select-outline-basic-focus-background-color:
 * select-outline-basic-focus-border-color:
 * select-outline-basic-hover-background-color:
 * select-outline-basic-hover-border-color:
 * select-outline-basic-disabled-background-color:
 * select-outline-basic-disabled-border-color:
 * select-outline-basic-disabled-icon-color:
 * select-outline-basic-disabled-text-color:
 * select-outline-primary-icon-color:
 * select-outline-primary-text-color:
 * select-outline-primary-placeholder-text-color:
 * select-outline-primary-background-color:
 * select-outline-primary-border-color:
 * select-outline-primary-focus-background-color:
 * select-outline-primary-focus-border-color:
 * select-outline-primary-hover-background-color:
 * select-outline-primary-hover-border-color:
 * select-outline-primary-disabled-background-color:
 * select-outline-primary-disabled-border-color:
 * select-outline-primary-disabled-icon-color:
 * select-outline-primary-disabled-text-color:
 * select-outline-success-icon-color:
 * select-outline-success-text-color:
 * select-outline-success-placeholder-text-color:
 * select-outline-success-background-color:
 * select-outline-success-border-color:
 * select-outline-success-focus-background-color:
 * select-outline-success-focus-border-color:
 * select-outline-success-hover-background-color:
 * select-outline-success-hover-border-color:
 * select-outline-success-disabled-background-color:
 * select-outline-success-disabled-border-color:
 * select-outline-success-disabled-icon-color:
 * select-outline-success-disabled-text-color:
 * select-outline-info-icon-color:
 * select-outline-info-text-color:
 * select-outline-info-placeholder-text-color:
 * select-outline-info-background-color:
 * select-outline-info-border-color:
 * select-outline-info-focus-background-color:
 * select-outline-info-focus-border-color:
 * select-outline-info-hover-background-color:
 * select-outline-info-hover-border-color:
 * select-outline-info-disabled-background-color:
 * select-outline-info-disabled-border-color:
 * select-outline-info-disabled-icon-color:
 * select-outline-info-disabled-text-color:
 * select-outline-warning-icon-color:
 * select-outline-warning-text-color:
 * select-outline-warning-placeholder-text-color:
 * select-outline-warning-background-color:
 * select-outline-warning-border-color:
 * select-outline-warning-focus-background-color:
 * select-outline-warning-focus-border-color:
 * select-outline-warning-hover-background-color:
 * select-outline-warning-hover-border-color:
 * select-outline-warning-disabled-background-color:
 * select-outline-warning-disabled-border-color:
 * select-outline-warning-disabled-icon-color:
 * select-outline-warning-disabled-text-color:
 * select-outline-danger-icon-color:
 * select-outline-danger-text-color:
 * select-outline-danger-placeholder-text-color:
 * select-outline-danger-background-color:
 * select-outline-danger-border-color:
 * select-outline-danger-focus-background-color:
 * select-outline-danger-focus-border-color:
 * select-outline-danger-hover-background-color:
 * select-outline-danger-hover-border-color:
 * select-outline-danger-disabled-background-color:
 * select-outline-danger-disabled-border-color:
 * select-outline-danger-disabled-icon-color:
 * select-outline-danger-disabled-text-color:
 * select-outline-control-icon-color:
 * select-outline-control-text-color:
 * select-outline-control-placeholder-text-color:
 * select-outline-control-background-color:
 * select-outline-control-border-color:
 * select-outline-control-focus-background-color:
 * select-outline-control-focus-border-color:
 * select-outline-control-hover-background-color:
 * select-outline-control-hover-border-color:
 * select-outline-control-disabled-background-color:
 * select-outline-control-disabled-border-color:
 * select-outline-control-disabled-icon-color:
 * select-outline-control-disabled-text-color:
 * select-outline-adjacent-border-style:
 * select-outline-adjacent-border-width:
 * select-outline-basic-open-border-color:
 * select-outline-basic-adjacent-border-color:
 * select-outline-primary-open-border-color:
 * select-outline-primary-adjacent-border-color:
 * select-outline-success-open-border-color:
 * select-outline-success-adjacent-border-color:
 * select-outline-info-open-border-color:
 * select-outline-info-adjacent-border-color:
 * select-outline-warning-open-border-color:
 * select-outline-warning-adjacent-border-color:
 * select-outline-danger-open-border-color:
 * select-outline-danger-adjacent-border-color:
 * select-outline-control-open-border-color:
 * select-outline-control-adjacent-border-color:
 * select-filled-border-style:
 * select-filled-border-width:
 * select-filled-tiny-padding:
 * select-filled-small-padding:
 * select-filled-medium-padding:
 * select-filled-large-padding:
 * select-filled-giant-padding:
 * select-filled-basic-background-color:
 * select-filled-basic-border-color:
 * select-filled-basic-icon-color:
 * select-filled-basic-text-color:
 * select-filled-basic-placeholder-text-color:
 * select-filled-basic-focus-background-color:
 * select-filled-basic-focus-border-color:
 * select-filled-basic-hover-background-color:
 * select-filled-basic-hover-border-color:
 * select-filled-basic-disabled-background-color:
 * select-filled-basic-disabled-border-color:
 * select-filled-basic-disabled-icon-color:
 * select-filled-basic-disabled-text-color:
 * select-filled-primary-background-color:
 * select-filled-primary-border-color:
 * select-filled-primary-icon-color:
 * select-filled-primary-text-color:
 * select-filled-primary-placeholder-text-color:
 * select-filled-primary-focus-background-color:
 * select-filled-primary-focus-border-color:
 * select-filled-primary-hover-background-color:
 * select-filled-primary-hover-border-color:
 * select-filled-primary-disabled-background-color:
 * select-filled-primary-disabled-border-color:
 * select-filled-primary-disabled-icon-color:
 * select-filled-primary-disabled-text-color:
 * select-filled-success-background-color:
 * select-filled-success-border-color:
 * select-filled-success-icon-color:
 * select-filled-success-text-color:
 * select-filled-success-placeholder-text-color:
 * select-filled-success-focus-background-color:
 * select-filled-success-focus-border-color:
 * select-filled-success-hover-background-color:
 * select-filled-success-hover-border-color:
 * select-filled-success-disabled-background-color:
 * select-filled-success-disabled-border-color:
 * select-filled-success-disabled-icon-color:
 * select-filled-success-disabled-text-color:
 * select-filled-info-background-color:
 * select-filled-info-border-color:
 * select-filled-info-icon-color:
 * select-filled-info-text-color:
 * select-filled-info-placeholder-text-color:
 * select-filled-info-focus-background-color:
 * select-filled-info-focus-border-color:
 * select-filled-info-hover-background-color:
 * select-filled-info-hover-border-color:
 * select-filled-info-disabled-background-color:
 * select-filled-info-disabled-border-color:
 * select-filled-info-disabled-icon-color:
 * select-filled-info-disabled-text-color:
 * select-filled-warning-background-color:
 * select-filled-warning-border-color:
 * select-filled-warning-icon-color:
 * select-filled-warning-text-color:
 * select-filled-warning-placeholder-text-color:
 * select-filled-warning-focus-background-color:
 * select-filled-warning-focus-border-color:
 * select-filled-warning-hover-background-color:
 * select-filled-warning-hover-border-color:
 * select-filled-warning-disabled-background-color:
 * select-filled-warning-disabled-border-color:
 * select-filled-warning-disabled-icon-color:
 * select-filled-warning-disabled-text-color:
 * select-filled-danger-background-color:
 * select-filled-danger-border-color:
 * select-filled-danger-icon-color:
 * select-filled-danger-text-color:
 * select-filled-danger-placeholder-text-color:
 * select-filled-danger-focus-background-color:
 * select-filled-danger-focus-border-color:
 * select-filled-danger-hover-background-color:
 * select-filled-danger-hover-border-color:
 * select-filled-danger-disabled-background-color:
 * select-filled-danger-disabled-border-color:
 * select-filled-danger-disabled-icon-color:
 * select-filled-danger-disabled-text-color:
 * select-filled-control-background-color:
 * select-filled-control-border-color:
 * select-filled-control-icon-color:
 * select-filled-control-text-color:
 * select-filled-control-placeholder-text-color:
 * select-filled-control-focus-background-color:
 * select-filled-control-focus-border-color:
 * select-filled-control-hover-background-color:
 * select-filled-control-hover-border-color:
 * select-filled-control-disabled-background-color:
 * select-filled-control-disabled-border-color:
 * select-filled-control-disabled-icon-color:
 * select-filled-control-disabled-text-color:
 * select-hero-tiny-padding:
 * select-hero-small-padding:
 * select-hero-medium-padding:
 * select-hero-large-padding:
 * select-hero-giant-padding:
 * select-hero-basic-left-background-color:
 * select-hero-basic-right-background-color:
 * select-hero-basic-icon-color:
 * select-hero-basic-text-color:
 * select-hero-basic-placeholder-text-color:
 * select-hero-basic-focus-left-background-color:
 * select-hero-basic-focus-right-background-color:
 * select-hero-basic-hover-left-background-color:
 * select-hero-basic-hover-right-background-color:
 * select-hero-basic-disabled-background-color:
 * select-hero-basic-disabled-icon-color:
 * select-hero-basic-disabled-text-color:
 * select-hero-primary-left-background-color:
 * select-hero-primary-right-background-color:
 * select-hero-primary-icon-color:
 * select-hero-primary-text-color:
 * select-hero-primary-placeholder-text-color:
 * select-hero-primary-focus-left-background-color:
 * select-hero-primary-focus-right-background-color:
 * select-hero-primary-hover-left-background-color:
 * select-hero-primary-hover-right-background-color:
 * select-hero-primary-disabled-background-color:
 * select-hero-primary-disabled-icon-color:
 * select-hero-primary-disabled-text-color:
 * select-hero-success-left-background-color:
 * select-hero-success-right-background-color:
 * select-hero-success-icon-color:
 * select-hero-success-text-color:
 * select-hero-success-placeholder-text-color:
 * select-hero-success-focus-left-background-color:
 * select-hero-success-focus-right-background-color:
 * select-hero-success-hover-left-background-color:
 * select-hero-success-hover-right-background-color:
 * select-hero-success-disabled-background-color:
 * select-hero-success-disabled-icon-color:
 * select-hero-success-disabled-text-color:
 * select-hero-info-left-background-color:
 * select-hero-info-right-background-color:
 * select-hero-info-icon-color:
 * select-hero-info-text-color:
 * select-hero-info-placeholder-text-color:
 * select-hero-info-focus-left-background-color:
 * select-hero-info-focus-right-background-color:
 * select-hero-info-hover-left-background-color:
 * select-hero-info-hover-right-background-color:
 * select-hero-info-disabled-background-color:
 * select-hero-info-disabled-icon-color:
 * select-hero-info-disabled-text-color:
 * select-hero-warning-left-background-color:
 * select-hero-warning-right-background-color:
 * select-hero-warning-icon-color:
 * select-hero-warning-text-color:
 * select-hero-warning-placeholder-text-color:
 * select-hero-warning-focus-left-background-color:
 * select-hero-warning-focus-right-background-color:
 * select-hero-warning-hover-left-background-color:
 * select-hero-warning-hover-right-background-color:
 * select-hero-warning-disabled-background-color:
 * select-hero-warning-disabled-icon-color:
 * select-hero-warning-disabled-text-color:
 * select-hero-danger-left-background-color:
 * select-hero-danger-right-background-color:
 * select-hero-danger-icon-color:
 * select-hero-danger-text-color:
 * select-hero-danger-placeholder-text-color:
 * select-hero-danger-focus-left-background-color:
 * select-hero-danger-focus-right-background-color:
 * select-hero-danger-hover-left-background-color:
 * select-hero-danger-hover-right-background-color:
 * select-hero-danger-disabled-background-color:
 * select-hero-danger-disabled-icon-color:
 * select-hero-danger-disabled-text-color:
 * select-hero-control-left-background-color:
 * select-hero-control-right-background-color:
 * select-hero-control-icon-color:
 * select-hero-control-text-color:
 * select-hero-control-placeholder-text-color:
 * select-hero-control-focus-left-background-color:
 * select-hero-control-focus-right-background-color:
 * select-hero-control-hover-left-background-color:
 * select-hero-control-hover-right-background-color:
 * select-hero-control-disabled-background-color:
 * select-hero-control-disabled-icon-color:
 * select-hero-control-disabled-text-color:
 * */
var NbSelectComponent = /** @class */ (function () {
    function NbSelectComponent(document, overlay, hostRef, positionBuilder, triggerStrategyBuilder, cd, focusKeyManagerFactoryService, focusMonitor, renderer, zone) {
        this.document = document;
        this.overlay = overlay;
        this.hostRef = hostRef;
        this.positionBuilder = positionBuilder;
        this.triggerStrategyBuilder = triggerStrategyBuilder;
        this.cd = cd;
        this.focusKeyManagerFactoryService = focusKeyManagerFactoryService;
        this.focusMonitor = focusMonitor;
        this.renderer = renderer;
        this.zone = zone;
        /**
         * Select size, available sizes:
         * `tiny`, `small`, `medium` (default), `large`, `giant`
         */
        this.size = 'medium';
        /**
         * Select status (adds specific styles):
         * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`
         */
        this.status = 'basic';
        /**
         * Select shapes: `rectangle` (default), `round`, `semi-round`
         */
        this.shape = 'rectangle';
        /**
         * Select appearances: `outline` (default), `filled`, `hero`
         */
        this.appearance = 'outline';
        this._fullWidth = false;
        /**
         * Renders select placeholder if nothing selected.
         * */
        this.placeholder = '';
        this._multiple = false;
        /**
         * Will be emitted when selected value changes.
         * */
        this.selectedChange = new EventEmitter();
        /**
         * List of selected options.
         * */
        this.selectionModel = [];
        /**
         * Current overlay position because of we have to toggle overlayPosition
         * in [ngClass] direction and this directive can use only string.
         */
        this.overlayPosition = '';
        this.optionsOverlayOffset = 8;
        this.alive = true;
        this.destroy$ = new Subject();
        /**
         * Function passed through control value accessor to propagate changes.
         * */
        this.onChange = function () { };
        this.onTouched = function () { };
        /*
         * @docs-private
         **/
        this.status$ = new BehaviorSubject(this.status);
        /*
         * @docs-private
         **/
        this.size$ = new BehaviorSubject(this.size);
        /*
         * @docs-private
         **/
        this.focused$ = new BehaviorSubject(false);
        /*
         * @docs-private
         **/
        this.disabled$ = new BehaviorSubject(this.disabled);
    }
    NbSelectComponent_1 = NbSelectComponent;
    Object.defineProperty(NbSelectComponent.prototype, "outline", {
        /**
         * Adds `outline` styles
         */
        get: function () {
            return this.appearance === 'outline';
        },
        set: function (value) {
            if (convertToBoolProperty(value)) {
                this.appearance = 'outline';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "filled", {
        /**
         * Adds `filled` styles
         */
        get: function () {
            return this.appearance === 'filled';
        },
        set: function (value) {
            if (convertToBoolProperty(value)) {
                this.appearance = 'filled';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "hero", {
        /**
         * Adds `hero` styles
         */
        get: function () {
            return this.appearance === 'hero';
        },
        set: function (value) {
            if (convertToBoolProperty(value)) {
                this.appearance = 'hero';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "disabled", {
        /**
         * Disables the select
         */
        get: function () {
            return !!this._disabled;
        },
        set: function (value) {
            this._disabled = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "fullWidth", {
        /**
         * If set element will fill its container
         */
        get: function () {
            return this._fullWidth;
        },
        set: function (value) {
            this._fullWidth = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "selected", {
        get: function () {
            return this.multiple
                ? this.selectionModel.map(function (o) { return o.value; })
                : this.selectionModel[0].value;
        },
        /**
         * Accepts selected item or array of selected items.
         * */
        set: function (value) {
            this.writeValue(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "multiple", {
        /**
         * Gives capability just write `multiple` over the element.
         * */
        get: function () {
            return this._multiple;
        },
        set: function (value) {
            this._multiple = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "isOpen", {
        /**
         * Determines is select opened.
         * */
        get: function () {
            return this.ref && this.ref.hasAttached();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "isHidden", {
        /**
         * Determines is select hidden.
         * */
        get: function () {
            return !this.isOpen;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "hostWidth", {
        /**
         * Returns width of the select button.
         * */
        get: function () {
            return this.button.nativeElement.getBoundingClientRect().width;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "selectButtonClasses", {
        get: function () {
            var classes = [];
            if (!this.selectionModel.length) {
                classes.push('placeholder');
            }
            if (!this.selectionModel.length && !this.placeholder) {
                classes.push('empty');
            }
            if (this.isOpen) {
                classes.push(this.overlayPosition);
            }
            return classes;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "selectionView", {
        /**
         * Content rendered in the label.
         * */
        get: function () {
            if (this.selectionModel.length > 1) {
                return this.selectionModel.map(function (option) { return option.content; }).join(', ');
            }
            return this.selectionModel[0].content;
        },
        enumerable: true,
        configurable: true
    });
    NbSelectComponent.prototype.ngOnChanges = function (_a) {
        var disabled = _a.disabled, status = _a.status, size = _a.size;
        if (disabled) {
            this.disabled$.next(disabled.currentValue);
        }
        if (status) {
            this.status$.next(status.currentValue);
        }
        if (size) {
            this.size$.next(size.currentValue);
        }
    };
    NbSelectComponent.prototype.ngAfterContentInit = function () {
        var _this = this;
        this.options.changes
            .pipe(startWith(this.options), filter(function () { return _this.queue != null && _this.canSelectValue(); }), takeUntil(this.destroy$))
            .subscribe(function () {
            // Call 'writeValue' when current change detection run is finished.
            // When writing is finished, change detection starts again, since
            // microtasks queue is empty.
            // Prevents ExpressionChangedAfterItHasBeenCheckedError.
            Promise.resolve().then(function () {
                _this.writeValue(_this.queue);
            });
        });
    };
    NbSelectComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.triggerStrategy = this.createTriggerStrategy();
        this.subscribeOnButtonFocus();
        this.subscribeOnTriggers();
        this.subscribeOnOptionClick();
        // TODO: #2254
        this.zone.runOutsideAngular(function () { return setTimeout(function () {
            _this.renderer.addClass(_this.hostRef.nativeElement, 'nb-transition');
        }); });
    };
    NbSelectComponent.prototype.ngOnDestroy = function () {
        this.alive = false;
        this.destroy$.next();
        this.destroy$.complete();
        if (this.ref) {
            this.ref.dispose();
        }
        if (this.triggerStrategy) {
            this.triggerStrategy.destroy();
        }
    };
    NbSelectComponent.prototype.show = function () {
        if (this.isHidden) {
            this.attachToOverlay();
            this.setActiveOption();
            this.cd.markForCheck();
        }
    };
    NbSelectComponent.prototype.hide = function () {
        if (this.isOpen) {
            this.ref.detach();
            this.cd.markForCheck();
        }
    };
    NbSelectComponent.prototype.registerOnChange = function (fn) {
        this.onChange = fn;
    };
    NbSelectComponent.prototype.registerOnTouched = function (fn) {
        this.onTouched = fn;
    };
    NbSelectComponent.prototype.setDisabledState = function (isDisabled) {
        this.disabled = isDisabled;
        this.cd.markForCheck();
    };
    NbSelectComponent.prototype.writeValue = function (value) {
        if (!this.alive) {
            return;
        }
        if (this.canSelectValue()) {
            this.setSelection(value);
            if (this.selectionModel.length) {
                this.queue = null;
            }
        }
        else {
            this.queue = value;
        }
    };
    /**
     * Selects option or clear all selected options if value is null.
     * */
    NbSelectComponent.prototype.handleOptionClick = function (option) {
        this.queue = null;
        if (option.value == null) {
            this.reset();
        }
        else {
            this.selectOption(option);
        }
        this.cd.markForCheck();
    };
    /**
     * Deselect all selected options.
     * */
    NbSelectComponent.prototype.reset = function () {
        this.selectionModel.forEach(function (option) { return option.deselect(); });
        this.selectionModel = [];
        this.hide();
        this.button.nativeElement.focus();
        this.emitSelected(this.multiple ? [] : null);
    };
    /**
     * Determines how to select option as multiple or single.
     * */
    NbSelectComponent.prototype.selectOption = function (option) {
        if (this.multiple) {
            this.handleMultipleSelect(option);
        }
        else {
            this.handleSingleSelect(option);
        }
    };
    /**
     * Select single option.
     * */
    NbSelectComponent.prototype.handleSingleSelect = function (option) {
        var selected = this.selectionModel.pop();
        if (selected && selected !== option) {
            selected.deselect();
        }
        this.selectionModel = [option];
        option.select();
        this.hide();
        this.button.nativeElement.focus();
        this.emitSelected(option.value);
    };
    /**
     * Select for multiple options.
     * */
    NbSelectComponent.prototype.handleMultipleSelect = function (option) {
        if (option.selected) {
            this.selectionModel = this.selectionModel.filter(function (s) { return s.value !== option.value; });
            option.deselect();
        }
        else {
            this.selectionModel.push(option);
            option.select();
        }
        this.emitSelected(this.selectionModel.map(function (opt) { return opt.value; }));
    };
    NbSelectComponent.prototype.attachToOverlay = function () {
        if (!this.ref) {
            this.createOverlay();
            this.subscribeOnPositionChange();
            this.createKeyManager();
            this.subscribeOnOverlayKeys();
        }
        this.ref.attach(this.portal);
    };
    NbSelectComponent.prototype.setActiveOption = function () {
        if (this.selectionModel.length) {
            this.keyManager.setActiveItem(this.selectionModel[0]);
        }
        else {
            this.keyManager.setFirstItemActive();
        }
    };
    NbSelectComponent.prototype.createOverlay = function () {
        var scrollStrategy = this.createScrollStrategy();
        this.positionStrategy = this.createPositionStrategy();
        this.ref = this.overlay.create({ positionStrategy: this.positionStrategy, scrollStrategy: scrollStrategy });
    };
    NbSelectComponent.prototype.createKeyManager = function () {
        this.keyManager = this.focusKeyManagerFactoryService.create(this.options).withTypeAhead(200);
    };
    NbSelectComponent.prototype.createPositionStrategy = function () {
        return this.positionBuilder
            .connectedTo(this.button)
            .position(NbPosition.BOTTOM)
            .offset(this.optionsOverlayOffset)
            .adjustment(NbAdjustment.VERTICAL);
    };
    NbSelectComponent.prototype.createScrollStrategy = function () {
        return this.overlay.scrollStrategies.block();
    };
    NbSelectComponent.prototype.createTriggerStrategy = function () {
        var _this = this;
        return this.triggerStrategyBuilder
            .trigger(NbTrigger.CLICK)
            .host(this.hostRef.nativeElement)
            .container(function () { return _this.getContainer(); })
            .build();
    };
    NbSelectComponent.prototype.subscribeOnTriggers = function () {
        var _this = this;
        this.triggerStrategy.show$.subscribe(function () { return _this.show(); });
        this.triggerStrategy.hide$
            .pipe(filter(function () { return _this.isOpen; }))
            .subscribe(function ($event) {
            _this.hide();
            if (!_this.isClickedWithinComponent($event)) {
                _this.onTouched();
            }
        });
    };
    NbSelectComponent.prototype.subscribeOnPositionChange = function () {
        var _this = this;
        this.positionStrategy.positionChange
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (position) {
            _this.overlayPosition = position;
            _this.cd.detectChanges();
        });
    };
    NbSelectComponent.prototype.subscribeOnOptionClick = function () {
        var _this = this;
        /**
         * If the user changes provided options list in the runtime we have to handle this
         * and resubscribe on options selection changes event.
         * Otherwise, the user will not be able to select new options.
         * */
        this.options.changes
            .pipe(startWith(this.options), switchMap(function (options) {
            return merge.apply(void 0, options.map(function (option) { return option.click; }));
        }), takeUntil(this.destroy$))
            .subscribe(function (clickedOption) { return _this.handleOptionClick(clickedOption); });
    };
    NbSelectComponent.prototype.subscribeOnOverlayKeys = function () {
        var _this = this;
        this.ref.keydownEvents()
            .pipe(filter(function () { return _this.isOpen; }), takeUntil(this.destroy$))
            .subscribe(function (event) {
            if (event.keyCode === ESCAPE) {
                _this.button.nativeElement.focus();
                _this.hide();
            }
            else {
                _this.keyManager.onKeydown(event);
            }
        });
        this.keyManager.tabOut
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () {
            _this.hide();
            _this.onTouched();
        });
    };
    NbSelectComponent.prototype.subscribeOnButtonFocus = function () {
        var _this = this;
        this.focusMonitor.monitor(this.button)
            .pipe(map(function (origin) { return !!origin; }), finalize(function () { return _this.focusMonitor.stopMonitoring(_this.button); }), takeUntil(this.destroy$))
            .subscribe(this.focused$);
    };
    NbSelectComponent.prototype.getContainer = function () {
        return this.ref && this.ref.hasAttached() && {
            location: {
                nativeElement: this.ref.overlayElement,
            },
        };
    };
    /**
     * Propagate selected value.
     * */
    NbSelectComponent.prototype.emitSelected = function (selected) {
        this.onChange(selected);
        this.selectedChange.emit(selected);
    };
    /**
     * Set selected value in model.
     * */
    NbSelectComponent.prototype.setSelection = function (value) {
        var _this = this;
        var isArray = Array.isArray(value);
        if (this.multiple && !isArray) {
            throw new Error('Can\'t assign single value if select is marked as multiple');
        }
        if (!this.multiple && isArray) {
            throw new Error('Can\'t assign array if select is not marked as multiple');
        }
        var previouslySelectedOptions = this.selectionModel;
        this.selectionModel = [];
        if (isArray) {
            value.forEach(function (option) { return _this.selectValue(option); });
        }
        else {
            this.selectValue(value);
        }
        // find options which were selected before and trigger deselect
        previouslySelectedOptions
            .filter(function (option) { return !_this.selectionModel.includes(option); })
            .forEach(function (option) { return option.deselect(); });
        this.cd.markForCheck();
    };
    /**
     * Selects value.
     * */
    NbSelectComponent.prototype.selectValue = function (value) {
        var corresponding = this.options.find(function (option) { return option.value === value; });
        if (corresponding) {
            corresponding.select();
            this.selectionModel.push(corresponding);
        }
    };
    /**
     * Sets touched if focus moved outside of button and overlay,
     * ignoring the case when focus moved to options overlay.
     */
    NbSelectComponent.prototype.trySetTouched = function () {
        if (this.isHidden) {
            this.onTouched();
        }
    };
    NbSelectComponent.prototype.isClickedWithinComponent = function ($event) {
        return this.hostRef.nativeElement === $event.target || this.hostRef.nativeElement.contains($event.target);
    };
    NbSelectComponent.prototype.canSelectValue = function () {
        return !!(this.options && this.options.length);
    };
    Object.defineProperty(NbSelectComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "rectangle", {
        get: function () {
            return this.shape === 'rectangle';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "round", {
        get: function () {
            return this.shape === 'round';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbSelectComponent.prototype, "semiRound", {
        get: function () {
            return this.shape === 'semi-round';
        },
        enumerable: true,
        configurable: true
    });
    var NbSelectComponent_1;
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSelectComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSelectComponent.prototype, "status", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSelectComponent.prototype, "shape", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSelectComponent.prototype, "appearance", void 0);
    __decorate([
        Input(),
        HostBinding('class.appearance-outline'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSelectComponent.prototype, "outline", null);
    __decorate([
        Input(),
        HostBinding('class.appearance-filled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSelectComponent.prototype, "filled", null);
    __decorate([
        Input(),
        HostBinding('class.appearance-hero'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSelectComponent.prototype, "hero", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSelectComponent.prototype, "disabled", null);
    __decorate([
        Input(),
        HostBinding('class.full-width'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSelectComponent.prototype, "fullWidth", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSelectComponent.prototype, "placeholder", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbSelectComponent.prototype, "selected", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbSelectComponent.prototype, "multiple", null);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbSelectComponent.prototype, "selectedChange", void 0);
    __decorate([
        ContentChildren(NbOptionComponent, { descendants: true }),
        __metadata("design:type", QueryList)
    ], NbSelectComponent.prototype, "options", void 0);
    __decorate([
        ContentChild(NbSelectLabelComponent),
        __metadata("design:type", Object)
    ], NbSelectComponent.prototype, "customLabel", void 0);
    __decorate([
        ViewChild(NbPortalDirective),
        __metadata("design:type", NbPortalDirective)
    ], NbSelectComponent.prototype, "portal", void 0);
    __decorate([
        ViewChild('selectButton', { read: ElementRef }),
        __metadata("design:type", ElementRef)
    ], NbSelectComponent.prototype, "button", void 0);
    __decorate([
        HostBinding('class.open'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "isOpen", null);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "giant", null);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "control", null);
    __decorate([
        HostBinding('class.shape-rectangle'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "rectangle", null);
    __decorate([
        HostBinding('class.shape-round'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "round", null);
    __decorate([
        HostBinding('class.shape-semi-round'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbSelectComponent.prototype, "semiRound", null);
    NbSelectComponent = NbSelectComponent_1 = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [Object, NbOverlayService,
            ElementRef,
            NbPositionBuilderService,
            NbTriggerStrategyBuilderService,
            ChangeDetectorRef,
            NbFocusKeyManagerFactoryService,
            NbFocusMonitor,
            Renderer2,
            NgZone])
    ], NbSelectComponent);
NbSelectComponent.ɵfac = function NbSelectComponent_Factory(t) { return new (t || NbSelectComponent)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbFocusKeyManagerFactoryService), ɵngcc0.ɵɵdirectiveInject(NbFocusMonitor), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
NbSelectComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSelectComponent, selectors: [["nb-select"]], contentQueries: function NbSelectComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbSelectLabelComponent, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbOptionComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.customLabel = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.options = _t);
    } }, viewQuery: function NbSelectComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(NbPortalDirective, true);
        ɵngcc0.ɵɵviewQuery(_c37, true, ElementRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portal = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.button = _t.first);
    } }, hostVars: 40, hostBindings: function NbSelectComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("appearance-outline", ctx.outline)("appearance-filled", ctx.filled)("appearance-hero", ctx.hero)("full-width", ctx.fullWidth)("open", ctx.isOpen)("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant)("status-primary", ctx.primary)("status-info", ctx.info)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-basic", ctx.basic)("status-control", ctx.control)("shape-rectangle", ctx.rectangle)("shape-round", ctx.round)("shape-semi-round", ctx.semiRound);
    } }, inputs: { size: "size", status: "status", shape: "shape", appearance: "appearance", placeholder: "placeholder", outline: "outline", filled: "filled", hero: "hero", disabled: "disabled", fullWidth: "fullWidth", selected: "selected", multiple: "multiple" }, outputs: { selectedChange: "selectedChange" }, features: [ɵngcc0.ɵɵProvidersFeature([
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(function () { return NbSelectComponent_1; }),
                multi: true
            },
            { provide: NB_SELECT_INJECTION_TOKEN, useExisting: NbSelectComponent_1 },
            { provide: NbFormFieldControl, useExisting: NbSelectComponent_1 },
            { provide: NbFormFieldControlConfig, useFactory: nbSelectFormFieldControlConfigFactory },
        ]), ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c39, decls: 7, vars: 4, consts: [["type", "button", 1, "select-button", 3, "disabled", "ngClass", "blur", "keydown.arrowDown", "keydown.arrowUp"], ["selectButton", ""], [4, "ngIf", "ngIfElse"], ["placeholderTemplate", ""], ["icon", "chevron-down-outline", "pack", "nebular-essentials", "aria-hidden", "true", 3, "click"], [3, "size", "position", "width", 4, "nbPortal"], ["defaultSelectionTemplate", ""], [3, "size", "position"]], template: function NbSelectComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c38);
        ɵngcc0.ɵɵelementStart(0, "button", 0, 1);
        ɵngcc0.ɵɵlistener("blur", function NbSelectComponent_Template_button_blur_0_listener() { return ctx.trySetTouched(); })("keydown.arrowDown", function NbSelectComponent_Template_button_keydown_arrowDown_0_listener() { return ctx.show(); })("keydown.arrowUp", function NbSelectComponent_Template_button_keydown_arrowUp_0_listener() { return ctx.show(); });
        ɵngcc0.ɵɵtemplate(2, NbSelectComponent_ng_container_2_Template, 4, 2, "ng-container", 2);
        ɵngcc0.ɵɵtemplate(3, NbSelectComponent_ng_template_3_Template, 1, 1, "ng-template", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵelementStart(5, "nb-icon", 4);
        ɵngcc0.ɵɵlistener("click", function NbSelectComponent_Template_nb_icon_click_5_listener($event) { return ctx.disabled && $event.stopPropagation(); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, NbSelectComponent_nb_option_list_6_Template, 2, 4, "nb-option-list", 5);
    } if (rf & 2) {
        var _r2 = ɵngcc0.ɵɵreference(4);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled)("ngClass", ctx.selectButtonClasses);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.selectionModel.length)("ngIfElse", _r2);
    } }, directives: function () { return [ɵngcc2.NgClass, ɵngcc2.NgIf, NbIconComponent,
        NbPortalDirective,
        NbOptionListComponent]; }, styles: ["[_nghost-%COMP%]{display:inline-block;max-width:100%}[dir=ltr]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]{text-align:left}[dir=ltr]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{right:0.2em}[dir=rtl]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]{text-align:right}[dir=rtl]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{left:0.2em}.full-width[_nghost-%COMP%]{width:100%}.nb-transition[_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:background-color,border-color,border-radius,box-shadow,color;transition-timing-function:ease-in}.select-button[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;text-overflow:ellipsis;text-transform:none;white-space:nowrap}nb-icon[_ngcontent-%COMP%]{font-size:1.5em;position:absolute;top:50%;transform:translateY(-50%);transition-duration:0.15s;transition-property:transform;transition-timing-function:ease-in}[dir=ltr][_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{right:.5rem}[dir=rtl][_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{left:.5rem}.open[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSelectComponent, [{
        type: Component,
        args: [{
                selector: 'nb-select',
                template: "<button [disabled]=\"disabled\"\n        [ngClass]=\"selectButtonClasses\"\n        (blur)=\"trySetTouched()\"\n        (keydown.arrowDown)=\"show()\"\n        (keydown.arrowUp)=\"show()\"\n        class=\"select-button\"\n        type=\"button\"\n        #selectButton>\n\n    <ng-container *ngIf=\"selectionModel.length; else placeholderTemplate\">\n      <ng-container *ngIf=\"customLabel; else defaultSelectionTemplate\">\n        <ng-content select=\"nb-select-label\"></ng-content>\n      </ng-container>\n\n      <ng-template #defaultSelectionTemplate>{{ selectionView }}</ng-template>\n    </ng-container>\n\n    <ng-template #placeholderTemplate>{{ placeholder }}</ng-template>\n\n    <nb-icon icon=\"chevron-down-outline\" pack=\"nebular-essentials\" (click)=\"disabled && $event.stopPropagation()\" aria-hidden=\"true\">\n    </nb-icon>\n</button>\n\n<nb-option-list *nbPortal [size]=\"size\" [position]=\"overlayPosition\" [style.width.px]=\"hostWidth\">\n  <ng-content select=\"nb-option, nb-option-group\"></ng-content>\n</nb-option-list>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(function () { return NbSelectComponent_1; }),
                        multi: true
                    },
                    { provide: NB_SELECT_INJECTION_TOKEN, useExisting: NbSelectComponent_1 },
                    { provide: NbFormFieldControl, useExisting: NbSelectComponent_1 },
                    { provide: NbFormFieldControlConfig, useFactory: nbSelectFormFieldControlConfigFactory },
                ],
                styles: ["/*!\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */:host{display:inline-block;max-width:100%}[dir=ltr] :host .select-button{text-align:left}[dir=ltr] :host .select-button nb-icon{right:0.2em}[dir=rtl] :host .select-button{text-align:right}[dir=rtl] :host .select-button nb-icon{left:0.2em}:host(.full-width){width:100%}:host(.nb-transition) .select-button{transition-duration:0.15s;transition-property:background-color,border-color,border-radius,box-shadow,color;transition-timing-function:ease-in}.select-button{position:relative;width:100%;overflow:hidden;text-overflow:ellipsis;text-transform:none;white-space:nowrap}nb-icon{font-size:1.5em;position:absolute;top:50%;transform:translateY(-50%);transition-duration:0.15s;transition-property:transform;transition-timing-function:ease-in}[dir=ltr] nb-icon{right:.5rem}[dir=rtl] nb-icon{left:.5rem}:host(.open) nb-icon{transform:translateY(-50%) rotate(180deg)}\n"]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: NbOverlayService }, { type: ɵngcc0.ElementRef }, { type: NbPositionBuilderService }, { type: NbTriggerStrategyBuilderService }, { type: ɵngcc0.ChangeDetectorRef }, { type: NbFocusKeyManagerFactoryService }, { type: NbFocusMonitor }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.NgZone }]; }, { size: [{
            type: Input
        }], status: [{
            type: Input
        }], shape: [{
            type: Input
        }], appearance: [{
            type: Input
        }], placeholder: [{
            type: Input
        }], selectedChange: [{
            type: Output
        }], outline: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.appearance-outline']
        }], filled: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.appearance-filled']
        }], hero: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.appearance-hero']
        }], disabled: [{
            type: Input
        }], fullWidth: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.full-width']
        }], selected: [{
            type: Input
        }], multiple: [{
            type: Input
        }], isOpen: [{
            type: HostBinding,
            args: ['class.open']
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], rectangle: [{
            type: HostBinding,
            args: ['class.shape-rectangle']
        }], round: [{
            type: HostBinding,
            args: ['class.shape-round']
        }], semiRound: [{
            type: HostBinding,
            args: ['class.shape-semi-round']
        }], options: [{
            type: ContentChildren,
            args: [NbOptionComponent, { descendants: true }]
        }], customLabel: [{
            type: ContentChild,
            args: [NbSelectLabelComponent]
        }], portal: [{
            type: ViewChild,
            args: [NbPortalDirective]
        }], button: [{
            type: ViewChild,
            args: ['selectButton', { read: ElementRef }]
        }] }); })();
    return NbSelectComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * NbOptionGroupComponent
 *
 * @styles
 *
 * option-group-text-color:
 * option-group-tiny-start-padding:
 * option-group-small-start-padding:
 * option-group-medium-start-padding:
 * option-group-large-start-padding:
 * option-group-giant-start-padding:
 **/
var NbOptionGroupComponent = /** @class */ (function () {
    function NbOptionGroupComponent() {
        this.destroy$ = new Subject();
        this._disabled = false;
    }
    Object.defineProperty(NbOptionGroupComponent.prototype, "disabled", {
        get: function () {
            return this._disabled;
        },
        set: function (value) {
            this._disabled = convertToBoolProperty(value);
            if (this.options) {
                this.updateOptionsDisabledState();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionGroupComponent.prototype, "disabledAttribute", {
        get: function () {
            return this.disabled ? '' : null;
        },
        enumerable: true,
        configurable: true
    });
    NbOptionGroupComponent.prototype.ngAfterContentInit = function () {
        var _this = this;
        if (this.options.length) {
            this.asyncUpdateOptionsDisabledState();
        }
        this.options.changes
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.asyncUpdateOptionsDisabledState(); });
    };
    NbOptionGroupComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * Sets disabled state for each option to current group disabled state.
     */
    NbOptionGroupComponent.prototype.updateOptionsDisabledState = function () {
        var _this = this;
        this.options.forEach(function (option) { return option.setDisabledByGroupState(_this.disabled); });
    };
    /**
     * Updates options disabled state after promise resolution.
     * This way change detection will be triggered after options state updated.
     * Use this method when updating options during change detection run (e.g. QueryList.changes, lifecycle hooks).
     */
    NbOptionGroupComponent.prototype.asyncUpdateOptionsDisabledState = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.updateOptionsDisabledState(); });
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbOptionGroupComponent.prototype, "title", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbOptionGroupComponent.prototype, "disabled", null);
    __decorate([
        HostBinding('attr.disabled'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbOptionGroupComponent.prototype, "disabledAttribute", null);
    __decorate([
        ContentChildren(NbOptionComponent, { descendants: true }),
        __metadata("design:type", QueryList)
    ], NbOptionGroupComponent.prototype, "options", void 0);
NbOptionGroupComponent.ɵfac = function NbOptionGroupComponent_Factory(t) { return new (t || NbOptionGroupComponent)(); };
NbOptionGroupComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbOptionGroupComponent, selectors: [["nb-option-group"]], contentQueries: function NbOptionGroupComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbOptionComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.options = _t);
    } }, hostVars: 1, hostBindings: function NbOptionGroupComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵattribute("disabled", ctx.disabledAttribute);
    } }, inputs: { disabled: "disabled", title: "title" }, ngContentSelectors: _c41, decls: 3, vars: 1, consts: [[1, "option-group-title"]], template: function NbOptionGroupComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c40);
        ɵngcc0.ɵɵelementStart(0, "span", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵprojection(2);
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.title);
    } }, styles: ["[_nghost-%COMP%]{display:block}.option-group-title[_ngcontent-%COMP%]{display:block}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOptionGroupComponent, [{
        type: Component,
        args: [{
                selector: 'nb-option-group',
                changeDetection: ChangeDetectionStrategy.OnPush,
                template: "\n    <span class=\"option-group-title\">{{ title }}</span>\n    <ng-content select=\"nb-option, ng-container\"></ng-content>\n  ",
                styles: [":host{display:block}.option-group-title{display:block}\n"]
            }]
    }], function () { return []; }, { disabled: [{
            type: Input
        }], disabledAttribute: [{
            type: HostBinding,
            args: ['attr.disabled']
        }], title: [{
            type: Input
        }], options: [{
            type: ContentChildren,
            args: [NbOptionComponent, { descendants: true }]
        }] }); })();
    return NbOptionGroupComponent;
}());

/**
 * The `NbOptionListComponent` is container component for `NbOptionGroupComponent` and`NbOptionComponent` list.
 *
 * @styles
 *
 * option-list-max-height:
 * option-list-shadow:
 * option-list-background-color:
 * option-list-border-style:
 * option-list-border-width:
 * option-list-border-color:
 * option-list-border-radius:
 * option-list-adjacent-border-color:
 * option-list-adjacent-border-style:
 * option-list-adjacent-border-width:
 * */
var NbOptionListComponent = /** @class */ (function () {
    function NbOptionListComponent() {
        this.size = 'medium';
    }
    Object.defineProperty(NbOptionListComponent.prototype, "positionTop", {
        get: function () {
            return this.position === NbPosition.TOP;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionListComponent.prototype, "positionBottom", {
        get: function () {
            return this.position === NbPosition.BOTTOM;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionListComponent.prototype, "sizeTiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionListComponent.prototype, "sizeSmall", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionListComponent.prototype, "sizeMedium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionListComponent.prototype, "sizeLarge", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbOptionListComponent.prototype, "sizeGiant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbOptionListComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbOptionListComponent.prototype, "position", void 0);
    __decorate([
        HostBinding('class.position-top'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionListComponent.prototype, "positionTop", null);
    __decorate([
        HostBinding('class.position-bottom'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionListComponent.prototype, "positionBottom", null);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionListComponent.prototype, "sizeTiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionListComponent.prototype, "sizeSmall", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionListComponent.prototype, "sizeMedium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionListComponent.prototype, "sizeLarge", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbOptionListComponent.prototype, "sizeGiant", null);
NbOptionListComponent.ɵfac = function NbOptionListComponent_Factory(t) { return new (t || NbOptionListComponent)(); };
NbOptionListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbOptionListComponent, selectors: [["nb-option-list"]], hostVars: 14, hostBindings: function NbOptionListComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("position-top", ctx.positionTop)("position-bottom", ctx.positionBottom)("size-tiny", ctx.sizeTiny)("size-small", ctx.sizeSmall)("size-medium", ctx.sizeMedium)("size-large", ctx.sizeLarge)("size-giant", ctx.sizeGiant);
    } }, inputs: { size: "size", position: "position" }, ngContentSelectors: _c0, decls: 2, vars: 0, consts: [[1, "option-list"]], template: function NbOptionListComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "ul", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementEnd();
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOptionListComponent, [{
        type: Component,
        args: [{
                selector: 'nb-option-list',
                template: "\n    <ul class=\"option-list\">\n      <ng-content></ng-content>\n    </ul>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return []; }, { size: [{
            type: Input
        }], positionTop: [{
            type: HostBinding,
            args: ['class.position-top']
        }], positionBottom: [{
            type: HostBinding,
            args: ['class.position-bottom']
        }], sizeTiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], sizeSmall: [{
            type: HostBinding,
            args: ['class.size-small']
        }], sizeMedium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], sizeLarge: [{
            type: HostBinding,
            args: ['class.size-large']
        }], sizeGiant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], position: [{
            type: Input
        }] }); })();
    return NbOptionListComponent;
}());

var NB_OPTION_LIST_COMPONENTS = [
    NbOptionListComponent,
    NbOptionComponent,
    NbOptionGroupComponent,
];
var NbOptionModule = /** @class */ (function () {
    function NbOptionModule() {
    }
NbOptionModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbOptionModule });
NbOptionModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbOptionModule_Factory(t) { return new (t || NbOptionModule)(); }, imports: [[
            CommonModule,
            NbCheckboxModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbOptionModule, { declarations: function () { return [NbOptionListComponent,
        NbOptionComponent,
        NbOptionGroupComponent]; }, imports: function () { return [CommonModule,
        NbCheckboxModule]; }, exports: function () { return [NbOptionListComponent,
        NbOptionComponent,
        NbOptionGroupComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbOptionModule, [{
        type: NgModule,
        args: [{
                declarations: __spreadArrays(NB_OPTION_LIST_COMPONENTS),
                imports: [
                    CommonModule,
                    NbCheckboxModule,
                ],
                exports: __spreadArrays(NB_OPTION_LIST_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbOptionModule;
}());

var NB_SELECT_COMPONENTS = [
    NbSelectComponent,
    NbSelectLabelComponent,
];
var NbSelectModule = /** @class */ (function () {
    function NbSelectModule() {
    }
NbSelectModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbSelectModule });
NbSelectModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbSelectModule_Factory(t) { return new (t || NbSelectModule)(); }, imports: [[
            NbSharedModule,
            NbOverlayModule,
            NbButtonModule,
            NbInputModule,
            NbCardModule,
            NbIconModule,
            NbOptionModule,
        ],
        NbOptionModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSelectModule, { declarations: [NbSelectComponent,
        NbSelectLabelComponent], imports: [NbSharedModule,
        NbOverlayModule,
        NbButtonModule,
        NbInputModule,
        NbCardModule,
        NbIconModule,
        NbOptionModule], exports: [NbSelectComponent,
        NbSelectLabelComponent,
        NbOptionModule] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSelectModule, [{
        type: NgModule,
        args: [{
                imports: [
                    NbSharedModule,
                    NbOverlayModule,
                    NbButtonModule,
                    NbInputModule,
                    NbCardModule,
                    NbIconModule,
                    NbOptionModule,
                ],
                exports: __spreadArrays(NB_SELECT_COMPONENTS, [
                    NbOptionModule,
                ]),
                declarations: __spreadArrays(NB_SELECT_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbSelectModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
// Component class scoped counter for aria attributes.
var lastAutocompleteId = 0;
/**
 * The `NbAutocompleteComponent` overlay component.
 * Provides an `NbOptionList` overlay component.
 * */
var NbAutocompleteComponent = /** @class */ (function () {
    function NbAutocompleteComponent(cd) {
        this.cd = cd;
        this.destroy$ = new Subject();
        /**
         * Component scoped id for aria attributes.
         * */
        this.id = "nb-autocomplete-" + lastAutocompleteId++;
        /**
         * @docs-private
         * Current overlay position because of we have to toggle overlayPosition
         * in [ngClass] direction.
         */
        this._overlayPosition = '';
        /**
         * Autocomplete size, available sizes:
         * `tiny`, `small`, `medium` (default), `large`, `giant`
         */
        this.size = 'medium';
        /**
         * Flag passed as input to always make first option active.
         * */
        this.activeFirst = false;
        /**
         * Will be emitted when selected value changes.
         * */
        this.selectedChange = new EventEmitter();
    }
    Object.defineProperty(NbAutocompleteComponent.prototype, "overlayPosition", {
        get: function () {
            return this._overlayPosition;
        },
        set: function (value) {
            this._overlayPosition = value;
            // Need run change detection after first set from NbAutocompleteDirective
            this.cd.detectChanges();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteComponent.prototype, "hostWidth", {
        /**
         * Returns width of the input.
         * */
        get: function () {
            return this.hostRef.nativeElement.getBoundingClientRect().width;
        },
        enumerable: true,
        configurable: true
    });
    NbAutocompleteComponent.prototype.ngAfterContentInit = function () {
        var _this = this;
        this.options.changes
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.cd.detectChanges(); });
    };
    NbAutocompleteComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * Autocomplete knows nothing about host html input element.
     * So, attach method set input hostRef for styling.
     * */
    NbAutocompleteComponent.prototype.setHost = function (hostRef) {
        this.hostRef = hostRef;
    };
    /**
     * Propagate selected value.
     * */
    NbAutocompleteComponent.prototype.emitSelected = function (selected) {
        this.selectedChange.emit(selected);
    };
    Object.defineProperty(NbAutocompleteComponent.prototype, "tiny", {
        get: function () {
            return this.size === 'tiny';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteComponent.prototype, "small", {
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteComponent.prototype, "medium", {
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteComponent.prototype, "large", {
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteComponent.prototype, "giant", {
        get: function () {
            return this.size === 'giant';
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbAutocompleteComponent.prototype, "handleDisplayFn", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbAutocompleteComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbAutocompleteComponent.prototype, "activeFirst", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbAutocompleteComponent.prototype, "selectedChange", void 0);
    __decorate([
        ContentChildren(NbOptionComponent, { descendants: true }),
        __metadata("design:type", QueryList)
    ], NbAutocompleteComponent.prototype, "options", void 0);
    __decorate([
        ViewChild(NbPortalDirective),
        __metadata("design:type", NbPortalDirective)
    ], NbAutocompleteComponent.prototype, "portal", void 0);
    __decorate([
        HostBinding('class.size-tiny'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteComponent.prototype, "tiny", null);
    __decorate([
        HostBinding('class.size-small'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteComponent.prototype, "small", null);
    __decorate([
        HostBinding('class.size-medium'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteComponent.prototype, "medium", null);
    __decorate([
        HostBinding('class.size-large'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteComponent.prototype, "large", null);
    __decorate([
        HostBinding('class.size-giant'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteComponent.prototype, "giant", null);
    NbAutocompleteComponent = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef])
    ], NbAutocompleteComponent);
NbAutocompleteComponent.ɵfac = function NbAutocompleteComponent_Factory(t) { return new (t || NbAutocompleteComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbAutocompleteComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbAutocompleteComponent, selectors: [["nb-autocomplete"]], contentQueries: function NbAutocompleteComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbOptionComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.options = _t);
    } }, viewQuery: function NbAutocompleteComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(NbPortalDirective, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portal = _t.first);
    } }, hostVars: 10, hostBindings: function NbAutocompleteComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("size-tiny", ctx.tiny)("size-small", ctx.small)("size-medium", ctx.medium)("size-large", ctx.large)("size-giant", ctx.giant);
    } }, inputs: { size: "size", activeFirst: "activeFirst", handleDisplayFn: "handleDisplayFn" }, outputs: { selectedChange: "selectedChange" }, ngContentSelectors: _c43, decls: 1, vars: 0, consts: [["role", "listbox", 3, "size", "position", "width", "id", "empty", 4, "nbPortal"], ["role", "listbox", 3, "size", "position", "id"]], template: function NbAutocompleteComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c42);
        ɵngcc0.ɵɵtemplate(0, NbAutocompleteComponent_nb_option_list_0_Template, 2, 7, "nb-option-list", 0);
    } }, directives: [NbPortalDirective,
        NbOptionListComponent], styles: ["[_nghost-%COMP%]:hover{cursor:pointer}nb-option-list.empty[_ngcontent-%COMP%]{border:none}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAutocompleteComponent, [{
        type: Component,
        args: [{
                selector: 'nb-autocomplete',
                template: "<nb-option-list *nbPortal\n                [size]=\"size\"\n                [position]=\"overlayPosition\"\n                [style.width.px]=\"hostWidth\"\n                role=\"listbox\"\n                [id]=\"id\"\n                [class.empty]=\"!options?.length\">\n  <ng-content select=\"nb-option, nb-option-group\"></ng-content>\n</nb-option-list>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host(:hover){cursor:pointer}nb-option-list.empty{border:none}\n"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { size: [{
            type: Input
        }], activeFirst: [{
            type: Input
        }], selectedChange: [{
            type: Output
        }], tiny: [{
            type: HostBinding,
            args: ['class.size-tiny']
        }], small: [{
            type: HostBinding,
            args: ['class.size-small']
        }], medium: [{
            type: HostBinding,
            args: ['class.size-medium']
        }], large: [{
            type: HostBinding,
            args: ['class.size-large']
        }], giant: [{
            type: HostBinding,
            args: ['class.size-giant']
        }], handleDisplayFn: [{
            type: Input
        }], options: [{
            type: ContentChildren,
            args: [NbOptionComponent, { descendants: true }]
        }], portal: [{
            type: ViewChild,
            args: [NbPortalDirective]
        }] }); })();
    return NbAutocompleteComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbAutocompleteDirective` provides a capability to expand input with
 * `NbAutocompleteComponent` overlay containing options to select and fill input with.
 *
 * @stacked-example(Showcase, autocomplete/autocomplete-showcase.component)
 *
 * ### Installation
 *
 * Import `NbAutocompleteModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbAutocompleteModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * You can bind control with form controls or ngModel.
 *
 * @stacked-example(Autocomplete form binding, autocomplete/autocomplete-form.component)
 *
 * Options in the autocomplete may be grouped using `nb-option-group` component.
 *
 * @stacked-example(Grouping, autocomplete/autocomplete-group.component)
 *
 * Autocomplete may change selected option value via provided function.
 *
 * @stacked-example(Custom display, autocomplete/autocomplete-custom-display.component)
 *
 * Also, autocomplete may make first option in option list active automatically.
 *
 * @stacked-example(Active first, autocomplete/autocomplete-active-first.component)
 *
 * */
var NbAutocompleteDirective = /** @class */ (function () {
    function NbAutocompleteDirective(hostRef, overlay, cd, triggerStrategyBuilder, positionBuilder, activeDescendantKeyManagerFactory) {
        this.hostRef = hostRef;
        this.overlay = overlay;
        this.cd = cd;
        this.triggerStrategyBuilder = triggerStrategyBuilder;
        this.positionBuilder = positionBuilder;
        this.activeDescendantKeyManagerFactory = activeDescendantKeyManagerFactory;
        this.overlayOffset = 8;
        this.destroy$ = new Subject();
        this._onChange = function () { };
        this._onTouched = function () { };
        this._focusInputOnValueChange = true;
        this.role = 'combobox';
        this.ariaAutocomplete = 'list';
        this.hasPopup = 'true';
    }
    NbAutocompleteDirective_1 = NbAutocompleteDirective;
    Object.defineProperty(NbAutocompleteDirective.prototype, "isOpen", {
        /**
         * Determines is autocomplete overlay opened.
         * */
        get: function () {
            return this.overlayRef && this.overlayRef.hasAttached();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "isClosed", {
        /**
         * Determines is autocomplete overlay closed.
         * */
        get: function () {
            return !this.isOpen;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "autocomplete", {
        /**
         * Provides autocomplete component.
         * */
        get: function () {
            return this._autocomplete;
        },
        set: function (autocomplete) {
            this._autocomplete = autocomplete;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "focusInputOnValueChange", {
        /**
         * Determines if the input will be focused when the control value is changed
         * */
        get: function () {
            return this._focusInputOnValueChange;
        },
        set: function (value) {
            this._focusInputOnValueChange = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "top", {
        get: function () {
            return this.isOpen && this.autocomplete.options.length && this.autocomplete.overlayPosition === NbPosition.TOP;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "bottom", {
        get: function () {
            return this.isOpen && this.autocomplete.options.length && this.autocomplete.overlayPosition === NbPosition.BOTTOM;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "ariaExpanded", {
        get: function () {
            return this.isOpen && this.isOpen.toString();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "ariaOwns", {
        get: function () {
            return this.isOpen ? this.autocomplete.id : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbAutocompleteDirective.prototype, "ariaActiveDescendant", {
        get: function () {
            return (this.isOpen && this.keyManager.activeItem) ? this.keyManager.activeItem.id : null;
        },
        enumerable: true,
        configurable: true
    });
    NbAutocompleteDirective.prototype.ngAfterViewInit = function () {
        this.triggerStrategy = this.createTriggerStrategy();
        this.subscribeOnTriggers();
    };
    NbAutocompleteDirective.prototype.ngOnDestroy = function () {
        if (this.triggerStrategy) {
            this.triggerStrategy.destroy();
        }
        if (this.positionStrategy) {
            this.positionStrategy.dispose();
        }
        if (this.overlayRef) {
            this.overlayRef.dispose();
        }
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbAutocompleteDirective.prototype.handleInput = function () {
        var currentValue = this.hostRef.nativeElement.value;
        this._onChange(currentValue);
        this.setHostInputValue(this.getDisplayValue(currentValue));
        this.show();
    };
    NbAutocompleteDirective.prototype.handleKeydown = function () {
        this.show();
    };
    NbAutocompleteDirective.prototype.handleBlur = function () {
        this._onTouched();
    };
    NbAutocompleteDirective.prototype.show = function () {
        if (this.isClosed) {
            this.attachToOverlay();
            this.setActiveItem();
        }
    };
    NbAutocompleteDirective.prototype.hide = function () {
        if (this.isOpen) {
            this.overlayRef.detach();
            // Need to update class via @HostBinding
            this.cd.markForCheck();
        }
    };
    NbAutocompleteDirective.prototype.writeValue = function (value) {
        this.handleInputValueUpdate(value);
    };
    NbAutocompleteDirective.prototype.registerOnChange = function (fn) {
        this._onChange = fn;
    };
    NbAutocompleteDirective.prototype.registerOnTouched = function (fn) {
        this._onTouched = fn;
    };
    NbAutocompleteDirective.prototype.subscribeOnOptionClick = function () {
        var _this = this;
        /**
         * If the user changes provided options list in the runtime we have to handle this
         * and resubscribe on options selection changes event.
         * Otherwise, the user will not be able to select new options.
         * */
        this.autocomplete.options.changes
            .pipe(tap(function () { return _this.setActiveItem(); }), startWith(this.autocomplete.options), switchMap(function (options) {
            return merge.apply(void 0, options.map(function (option) { return option.click; }));
        }), takeUntil(this.destroy$))
            .subscribe(function (clickedOption) { return _this.handleInputValueUpdate(clickedOption.value); });
    };
    NbAutocompleteDirective.prototype.subscribeOnPositionChange = function () {
        var _this = this;
        this.positionStrategy.positionChange
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (position) {
            _this.autocomplete.overlayPosition = position;
            _this.cd.detectChanges();
        });
    };
    NbAutocompleteDirective.prototype.getActiveItem = function () {
        return this.keyManager.activeItem;
    };
    NbAutocompleteDirective.prototype.setupAutocomplete = function () {
        this.autocomplete.setHost(this.hostRef);
    };
    NbAutocompleteDirective.prototype.getDisplayValue = function (value) {
        var displayFn = this.autocomplete.handleDisplayFn;
        return displayFn ? displayFn(value) : value;
    };
    NbAutocompleteDirective.prototype.getContainer = function () {
        return this.overlayRef && this.isOpen && {
            location: {
                nativeElement: this.overlayRef.overlayElement,
            },
        };
    };
    NbAutocompleteDirective.prototype.handleInputValueUpdate = function (value) {
        if (value === undefined || value === null) {
            return;
        }
        this.setHostInputValue(value);
        this._onChange(value);
        if (this.focusInputOnValueChange) {
            this.hostRef.nativeElement.focus();
        }
        this.autocomplete.emitSelected(value);
        this.hide();
    };
    NbAutocompleteDirective.prototype.subscribeOnTriggers = function () {
        var _this = this;
        this.triggerStrategy.show$
            .pipe(filter(function () { return _this.isClosed; }))
            .subscribe(function () { return _this.show(); });
        this.triggerStrategy.hide$
            .pipe(filter(function () { return _this.isOpen; }))
            .subscribe(function () { return _this.hide(); });
    };
    NbAutocompleteDirective.prototype.createTriggerStrategy = function () {
        var _this = this;
        return this.triggerStrategyBuilder
            .trigger(NbTrigger.FOCUS)
            .host(this.hostRef.nativeElement)
            .container(function () { return _this.getContainer(); })
            .build();
    };
    NbAutocompleteDirective.prototype.createKeyManager = function () {
        this.keyManager = this.activeDescendantKeyManagerFactory
            .create(this.autocomplete.options);
    };
    NbAutocompleteDirective.prototype.setHostInputValue = function (value) {
        this.hostRef.nativeElement.value = this.getDisplayValue(value);
    };
    NbAutocompleteDirective.prototype.createPositionStrategy = function () {
        return this.positionBuilder
            .connectedTo(this.hostRef)
            .position(NbPosition.BOTTOM)
            .offset(this.overlayOffset)
            .adjustment(NbAdjustment.VERTICAL);
    };
    NbAutocompleteDirective.prototype.subscribeOnOverlayKeys = function () {
        var _this = this;
        this.overlayRef.keydownEvents()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (event) {
            if (event.keyCode === ESCAPE && _this.isOpen) {
                event.preventDefault();
                _this.hostRef.nativeElement.focus();
                _this.hide();
            }
            else if (event.keyCode === ENTER) {
                event.preventDefault();
                var activeItem = _this.getActiveItem();
                if (!activeItem) {
                    return;
                }
                _this.handleInputValueUpdate(activeItem.value);
            }
            else {
                _this.keyManager.onKeydown(event);
            }
        });
    };
    NbAutocompleteDirective.prototype.setActiveItem = function () {
        // If autocomplete has activeFirst input set to true,
        // keyManager set first option active, otherwise - reset active option.
        var mode = this.autocomplete.activeFirst
            ? NbKeyManagerActiveItemMode.FIRST_ACTIVE
            : NbKeyManagerActiveItemMode.RESET_ACTIVE;
        this.keyManager.setActiveItem(mode);
        this.cd.detectChanges();
    };
    NbAutocompleteDirective.prototype.attachToOverlay = function () {
        if (!this.overlayRef) {
            this.setupAutocomplete();
            this.initOverlay();
        }
        this.overlayRef.attach(this.autocomplete.portal);
    };
    NbAutocompleteDirective.prototype.createOverlay = function () {
        var scrollStrategy = this.createScrollStrategy();
        this.overlayRef = this.overlay.create({ positionStrategy: this.positionStrategy, scrollStrategy: scrollStrategy });
    };
    NbAutocompleteDirective.prototype.initOverlay = function () {
        this.positionStrategy = this.createPositionStrategy();
        this.createKeyManager();
        this.subscribeOnPositionChange();
        this.subscribeOnOptionClick();
        this.checkOverlayVisibility();
        this.createOverlay();
        this.subscribeOnOverlayKeys();
    };
    NbAutocompleteDirective.prototype.checkOverlayVisibility = function () {
        var _this = this;
        this.autocomplete.options.changes
            .pipe(takeUntil(this.destroy$)).subscribe(function () {
            if (!_this.autocomplete.options.length) {
                _this.hide();
            }
        });
    };
    NbAutocompleteDirective.prototype.createScrollStrategy = function () {
        return this.overlay.scrollStrategies.block();
    };
    var NbAutocompleteDirective_1;
    __decorate([
        Input('nbAutocomplete'),
        __metadata("design:type", NbAutocompleteComponent),
        __metadata("design:paramtypes", [NbAutocompleteComponent])
    ], NbAutocompleteDirective.prototype, "autocomplete", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbAutocompleteDirective.prototype, "focusInputOnValueChange", null);
    __decorate([
        HostBinding('class.nb-autocomplete-position-top'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteDirective.prototype, "top", null);
    __decorate([
        HostBinding('class.nb-autocomplete-position-bottom'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteDirective.prototype, "bottom", null);
    __decorate([
        HostBinding('attr.role'),
        __metadata("design:type", String)
    ], NbAutocompleteDirective.prototype, "role", void 0);
    __decorate([
        HostBinding('attr.aria-autocomplete'),
        __metadata("design:type", String)
    ], NbAutocompleteDirective.prototype, "ariaAutocomplete", void 0);
    __decorate([
        HostBinding('attr.haspopup'),
        __metadata("design:type", String)
    ], NbAutocompleteDirective.prototype, "hasPopup", void 0);
    __decorate([
        HostBinding('attr.aria-expanded'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteDirective.prototype, "ariaExpanded", null);
    __decorate([
        HostBinding('attr.aria-owns'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteDirective.prototype, "ariaOwns", null);
    __decorate([
        HostBinding('attr.aria-activedescendant'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbAutocompleteDirective.prototype, "ariaActiveDescendant", null);
    __decorate([
        HostListener('input'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbAutocompleteDirective.prototype, "handleInput", null);
    __decorate([
        HostListener('keydown.arrowDown'),
        HostListener('keydown.arrowUp'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbAutocompleteDirective.prototype, "handleKeydown", null);
    __decorate([
        HostListener('blur'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbAutocompleteDirective.prototype, "handleBlur", null);
    NbAutocompleteDirective = NbAutocompleteDirective_1 = __decorate([ __metadata("design:paramtypes", [ElementRef,
            NbOverlayService,
            ChangeDetectorRef,
            NbTriggerStrategyBuilderService,
            NbPositionBuilderService,
            NbActiveDescendantKeyManagerFactoryService])
    ], NbAutocompleteDirective);
NbAutocompleteDirective.ɵfac = function NbAutocompleteDirective_Factory(t) { return new (t || NbAutocompleteDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(NbActiveDescendantKeyManagerFactoryService)); };
NbAutocompleteDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbAutocompleteDirective, selectors: [["input", "nbAutocomplete", ""]], hostVars: 10, hostBindings: function NbAutocompleteDirective_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("input", function NbAutocompleteDirective_input_HostBindingHandler() { return ctx.handleInput(); })("keydown.arrowDown", function NbAutocompleteDirective_keydown_arrowDown_HostBindingHandler() { return ctx.handleKeydown(); })("keydown.arrowUp", function NbAutocompleteDirective_keydown_arrowUp_HostBindingHandler() { return ctx.handleKeydown(); })("blur", function NbAutocompleteDirective_blur_HostBindingHandler() { return ctx.handleBlur(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵattribute("role", ctx.role)("aria-autocomplete", ctx.ariaAutocomplete)("haspopup", ctx.hasPopup)("aria-expanded", ctx.ariaExpanded)("aria-owns", ctx.ariaOwns)("aria-activedescendant", ctx.ariaActiveDescendant);
        ɵngcc0.ɵɵclassProp("nb-autocomplete-position-top", ctx.top)("nb-autocomplete-position-bottom", ctx.bottom);
    } }, inputs: { autocomplete: ["nbAutocomplete", "autocomplete"], focusInputOnValueChange: "focusInputOnValueChange" }, features: [ɵngcc0.ɵɵProvidersFeature([{
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(function () { return NbAutocompleteDirective_1; }),
                multi: true
            }])] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAutocompleteDirective, [{
        type: Directive,
        args: [{
                selector: 'input[nbAutocomplete]',
                providers: [{
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(function () { return NbAutocompleteDirective_1; }),
                        multi: true
                    }]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NbOverlayService }, { type: ɵngcc0.ChangeDetectorRef }, { type: NbTriggerStrategyBuilderService }, { type: NbPositionBuilderService }, { type: NbActiveDescendantKeyManagerFactoryService }]; }, { role: [{
            type: HostBinding,
            args: ['attr.role']
        }], ariaAutocomplete: [{
            type: HostBinding,
            args: ['attr.aria-autocomplete']
        }], hasPopup: [{
            type: HostBinding,
            args: ['attr.haspopup']
        }], autocomplete: [{
            type: Input,
            args: ['nbAutocomplete']
        }], focusInputOnValueChange: [{
            type: Input
        }], top: [{
            type: HostBinding,
            args: ['class.nb-autocomplete-position-top']
        }], bottom: [{
            type: HostBinding,
            args: ['class.nb-autocomplete-position-bottom']
        }], ariaExpanded: [{
            type: HostBinding,
            args: ['attr.aria-expanded']
        }], ariaOwns: [{
            type: HostBinding,
            args: ['attr.aria-owns']
        }], ariaActiveDescendant: [{
            type: HostBinding,
            args: ['attr.aria-activedescendant']
        }], handleInput: [{
            type: HostListener,
            args: ['input']
        }], handleKeydown: [{
            type: HostListener,
            args: ['keydown.arrowDown']
        }, {
            type: HostListener,
            args: ['keydown.arrowUp']
        }], handleBlur: [{
            type: HostListener,
            args: ['blur']
        }] }); })();
    return NbAutocompleteDirective;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_AUTOCOMPLETE_COMPONENTS = [
    NbAutocompleteComponent,
    NbAutocompleteDirective,
];
var NbAutocompleteModule = /** @class */ (function () {
    function NbAutocompleteModule() {
    }
NbAutocompleteModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbAutocompleteModule });
NbAutocompleteModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbAutocompleteModule_Factory(t) { return new (t || NbAutocompleteModule)(); }, imports: [[
            CommonModule,
            FormsModule,
            NbOverlayModule,
            NbCardModule,
            NbOptionModule,
        ],
        NbOptionModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbAutocompleteModule, { declarations: function () { return [NbAutocompleteComponent,
        NbAutocompleteDirective]; }, imports: function () { return [CommonModule,
        FormsModule,
        NbOverlayModule,
        NbCardModule,
        NbOptionModule]; }, exports: function () { return [NbAutocompleteComponent,
        NbAutocompleteDirective,
        NbOptionModule]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbAutocompleteModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                    NbOverlayModule,
                    NbCardModule,
                    NbOptionModule,
                ],
                exports: __spreadArrays(NB_AUTOCOMPLETE_COMPONENTS, [
                    NbOptionModule,
                ]),
                declarations: __spreadArrays(NB_AUTOCOMPLETE_COMPONENTS)
            }]
    }], function () { return []; }, null); })();
    return NbAutocompleteModule;
}());

var NbWindowState;
(function (NbWindowState) {
    NbWindowState["MINIMIZED"] = "minimized";
    NbWindowState["MAXIMIZED"] = "maximized";
    NbWindowState["FULL_SCREEN"] = "full-screen";
})(NbWindowState || (NbWindowState = {}));
/**
 * Window configuration options.
 */
var NbWindowConfig = /** @class */ (function () {
    function NbWindowConfig() {
        var configs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            configs[_i] = arguments[_i];
        }
        /**
         * Window title.
         */
        this.title = '';
        /**
         * Initial window state. Full screen by default.
         */
        this.initialState = NbWindowState.FULL_SCREEN;
        /**
         * If true than backdrop will be rendered behind window.
         * By default set to true.
         */
        this.hasBackdrop = true;
        /**
         * If set to true mouse clicks on backdrop will close a window.
         * Default is true.
         */
        this.closeOnBackdropClick = true;
        /**
         * If true then escape press will close a window.
         * Default is true.
         */
        this.closeOnEsc = true;
        /**
         * Class to be applied to the window.
         */
        this.windowClass = '';
        /**
         * Both, template and component may receive data through `config.context` property.
         * For components, this data will be set as component properties.
         * For templates, you can access it inside template as $implicit.
         */
        this.context = {};
        /**
         * Where the attached component should live in Angular's *logical* component tree.
         * This affects what is available for injection and the change detection order for the
         * component instantiated inside of the window. This does not affect where the window
         * content will be rendered.
         */
        this.viewContainerRef = null;
        Object.assign.apply(Object, __spreadArrays([this], configs));
    }
    return NbWindowConfig;
}());
var NB_WINDOW_CONTENT = new InjectionToken('Nebular Window Content');
var NB_WINDOW_CONFIG = new InjectionToken('Nebular Window Config');
var NB_WINDOW_CONTEXT = new InjectionToken('Nebular Window Context');

/**
 * The `NbWindowRef` helps to manipulate window after it was created.
 * The window can be dismissed by using `close` method of the windowRef.
 * You can access rendered component as `componentRef` property of the windowRef.
 */
var NbWindowRef = /** @class */ (function () {
    function NbWindowRef(config) {
        this.config = config;
        this.stateChange$ = new ReplaySubject(1);
        this._closed = false;
        this.closed$ = new Subject();
        this.state = config.initialState;
    }
    Object.defineProperty(NbWindowRef.prototype, "state", {
        /**
         * Current window state.
         */
        get: function () {
            return this.stateValue;
        },
        set: function (newState) {
            if (newState && this.stateValue !== newState) {
                this.prevStateValue = this.state;
                this.stateValue = newState;
                this.stateChange$.next({ oldState: this.prevStateValue, newState: newState });
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbWindowRef.prototype, "stateChange", {
        /**
         * Emits when window state change.
         */
        get: function () {
            return this.stateChange$.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbWindowRef.prototype, "onClose", {
        /**
         * Emits when window was closed.
         */
        get: function () {
            return this.closed$.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Minimize window.
     */
    NbWindowRef.prototype.minimize = function () {
        this.state = NbWindowState.MINIMIZED;
    };
    /**
     * Maximize window.
     */
    NbWindowRef.prototype.maximize = function () {
        this.state = NbWindowState.MAXIMIZED;
    };
    /**
     * Set window on top.
     */
    NbWindowRef.prototype.fullScreen = function () {
        this.state = NbWindowState.FULL_SCREEN;
    };
    NbWindowRef.prototype.toPreviousState = function () {
        this.state = this.prevStateValue;
    };
    /**
     * Closes window.
     * */
    NbWindowRef.prototype.close = function () {
        if (this._closed) {
            return;
        }
        this._closed = true;
        this.componentRef.destroy();
        this.stateChange$.complete();
        this.closed$.next();
        this.closed$.complete();
    };
    return NbWindowRef;
}());

var NbWindowsContainerComponent = /** @class */ (function () {
    function NbWindowsContainerComponent() {
    }
    __decorate([
        ViewChild('viewContainerRef', { read: ViewContainerRef, static: true }),
        __metadata("design:type", ViewContainerRef)
    ], NbWindowsContainerComponent.prototype, "viewContainerRef", void 0);
NbWindowsContainerComponent.ɵfac = function NbWindowsContainerComponent_Factory(t) { return new (t || NbWindowsContainerComponent)(); };
NbWindowsContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbWindowsContainerComponent, selectors: [["nb-windows-container"]], viewQuery: function NbWindowsContainerComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(_c44, true, ViewContainerRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.viewContainerRef = _t.first);
    } }, decls: 2, vars: 0, consts: [["viewContainerRef", ""]], template: function NbWindowsContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, null, 0);
    } }, styles: ["[_nghost-%COMP%]{display:flex;align-items:flex-end;overflow-x:auto}[_nghost-%COMP%]     nb-window:not(.full-screen){margin:0 2rem}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbWindowsContainerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-windows-container',
                template: "<ng-container #viewContainerRef></ng-container>",
                styles: [":host{display:flex;align-items:flex-end;overflow-x:auto}:host ::ng-deep nb-window:not(.full-screen){margin:0 2rem}\n"]
            }]
    }], function () { return []; }, { viewContainerRef: [{
            type: ViewChild,
            args: ['viewContainerRef', { read: ViewContainerRef, static: true }]
        }] }); })();
    return NbWindowsContainerComponent;
}());

var NbWindowComponent = /** @class */ (function () {
    function NbWindowComponent(content, context, windowRef, config, focusTrapFactory, elementRef, renderer) {
        this.content = content;
        this.context = context;
        this.windowRef = windowRef;
        this.config = config;
        this.focusTrapFactory = focusTrapFactory;
        this.elementRef = elementRef;
        this.renderer = renderer;
    }
    Object.defineProperty(NbWindowComponent.prototype, "isFullScreen", {
        get: function () {
            return this.windowRef.state === NbWindowState.FULL_SCREEN;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbWindowComponent.prototype, "maximized", {
        get: function () {
            return this.windowRef.state === NbWindowState.MAXIMIZED;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbWindowComponent.prototype, "minimized", {
        get: function () {
            return this.windowRef.state === NbWindowState.MINIMIZED;
        },
        enumerable: true,
        configurable: true
    });
    NbWindowComponent.prototype.ngOnInit = function () {
        this.focusTrap = this.focusTrapFactory.create(this.elementRef.nativeElement);
        this.focusTrap.blurPreviouslyFocusedElement();
        this.focusTrap.focusInitialElement();
        if (this.config.windowClass) {
            this.renderer.addClass(this.elementRef.nativeElement, this.config.windowClass);
        }
    };
    NbWindowComponent.prototype.ngAfterViewChecked = function () {
        if (!this.overlayContainer || this.overlayContainer.isAttached) {
            return;
        }
        if (this.content instanceof TemplateRef) {
            this.attachTemplate();
        }
        else {
            this.attachComponent();
        }
    };
    NbWindowComponent.prototype.ngOnDestroy = function () {
        if (this.focusTrap) {
            this.focusTrap.restoreFocus();
        }
        this.close();
    };
    NbWindowComponent.prototype.minimize = function () {
        if (this.windowRef.state === NbWindowState.MINIMIZED) {
            this.windowRef.toPreviousState();
        }
        else {
            this.windowRef.minimize();
        }
    };
    NbWindowComponent.prototype.maximize = function () {
        this.windowRef.maximize();
    };
    NbWindowComponent.prototype.fullScreen = function () {
        this.windowRef.fullScreen();
    };
    NbWindowComponent.prototype.maximizeOrFullScreen = function () {
        if (this.windowRef.state === NbWindowState.MINIMIZED) {
            this.maximize();
        }
        else {
            this.fullScreen();
        }
    };
    NbWindowComponent.prototype.close = function () {
        this.windowRef.close();
    };
    NbWindowComponent.prototype.attachTemplate = function () {
        this.overlayContainer
            .attachTemplatePortal(new NbTemplatePortal(this.content, null, this.context));
    };
    NbWindowComponent.prototype.attachComponent = function () {
        var portal = new NbComponentPortal(this.content, null, null, this.cfr);
        var ref = this.overlayContainer.attachComponentPortal(portal, this.context);
        ref.changeDetectorRef.detectChanges();
    };
    __decorate([
        Input(),
        __metadata("design:type", ComponentFactoryResolver)
    ], NbWindowComponent.prototype, "cfr", void 0);
    __decorate([
        HostBinding('class.full-screen'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbWindowComponent.prototype, "isFullScreen", null);
    __decorate([
        HostBinding('class.maximized'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbWindowComponent.prototype, "maximized", null);
    __decorate([
        HostBinding('class.minimized'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbWindowComponent.prototype, "minimized", null);
    __decorate([
        ViewChild(NbOverlayContainerComponent),
        __metadata("design:type", NbOverlayContainerComponent)
    ], NbWindowComponent.prototype, "overlayContainer", void 0);
    NbWindowComponent = __decorate([ __param(0, Inject(NB_WINDOW_CONTENT)),
        __param(1, Inject(NB_WINDOW_CONTEXT)),
        __metadata("design:paramtypes", [Object, Object,
            NbWindowRef,
            NbWindowConfig,
            NbFocusTrapFactoryService,
            ElementRef,
            Renderer2])
    ], NbWindowComponent);
NbWindowComponent.ɵfac = function NbWindowComponent_Factory(t) { return new (t || NbWindowComponent)(ɵngcc0.ɵɵdirectiveInject(NB_WINDOW_CONTENT), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW_CONTEXT), ɵngcc0.ɵɵdirectiveInject(NbWindowRef), ɵngcc0.ɵɵdirectiveInject(NbWindowConfig), ɵngcc0.ɵɵdirectiveInject(NbFocusTrapFactoryService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
NbWindowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbWindowComponent, selectors: [["nb-window"]], viewQuery: function NbWindowComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(NbOverlayContainerComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.overlayContainer = _t.first);
    } }, hostVars: 6, hostBindings: function NbWindowComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("full-screen", ctx.isFullScreen)("maximized", ctx.maximized)("minimized", ctx.minimized);
    } }, inputs: { cfr: "cfr" }, decls: 12, vars: 4, consts: [["cdkFocusInitial", "", "tabindex", "-1", 1, "title"], [1, "buttons"], ["nbButton", "", "ghost", "", 3, "click"], ["icon", "minus-outline", "pack", "nebular-essentials"], ["nbButton", "", "ghost", "", 3, "click", 4, "ngIf"], ["icon", "close-outline", "pack", "nebular-essentials"], [4, "ngIf"], ["icon", "collapse-outline", "pack", "nebular-essentials"], ["icon", "expand-outline", "pack", "nebular-essentials"]], template: function NbWindowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nb-card");
        ɵngcc0.ɵɵelementStart(1, "nb-card-header");
        ɵngcc0.ɵɵelementStart(2, "div", 0);
        ɵngcc0.ɵɵtext(3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(4, "div", 1);
        ɵngcc0.ɵɵelementStart(5, "button", 2);
        ɵngcc0.ɵɵlistener("click", function NbWindowComponent_Template_button_click_5_listener() { return ctx.minimize(); });
        ɵngcc0.ɵɵelement(6, "nb-icon", 3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(7, NbWindowComponent_button_7_Template, 2, 0, "button", 4);
        ɵngcc0.ɵɵtemplate(8, NbWindowComponent_button_8_Template, 2, 0, "button", 4);
        ɵngcc0.ɵɵelementStart(9, "button", 2);
        ɵngcc0.ɵɵlistener("click", function NbWindowComponent_Template_button_click_9_listener() { return ctx.close(); });
        ɵngcc0.ɵɵelement(10, "nb-icon", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(11, NbWindowComponent_nb_card_body_11_Template, 2, 0, "nb-card-body", 6);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵtextInterpolate(ctx.config.title);
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵproperty("ngIf", ctx.isFullScreen);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.minimized || ctx.maximized);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.maximized || ctx.isFullScreen);
    } }, directives: [NbCardComponent,
        NbCardHeaderComponent,
        NbButtonComponent,
        NbIconComponent, ɵngcc2.NgIf, NbCardBodyComponent,
        NbOverlayContainerComponent], styles: ["[_nghost-%COMP%]{flex:1 0 auto;min-width:20rem}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   nb-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;overflow:hidden}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 0 auto;margin-right:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{width:9.5rem;display:flex;justify-content:space-evenly}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   [nbButton][_ngcontent-%COMP%]{flex:0 0 3rem}.full-screen[_nghost-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%)}.maximized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;height:auto}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-bottom:none}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbWindowComponent, [{
        type: Component,
        args: [{
                selector: 'nb-window',
                template: "\n    <nb-card>\n      <nb-card-header>\n        <div cdkFocusInitial class=\"title\" tabindex=\"-1\">{{ config.title }}</div>\n\n        <div class=\"buttons\">\n          <button nbButton ghost (click)=\"minimize()\">\n            <nb-icon icon=\"minus-outline\" pack=\"nebular-essentials\"></nb-icon>\n          </button>\n          <button nbButton ghost *ngIf=\"isFullScreen\" (click)=\"maximize()\">\n            <nb-icon icon=\"collapse-outline\" pack=\"nebular-essentials\"></nb-icon>\n          </button>\n          <button nbButton ghost *ngIf=\"minimized || maximized\" (click)=\"maximizeOrFullScreen()\">\n            <nb-icon icon=\"expand-outline\" pack=\"nebular-essentials\"></nb-icon>\n          </button>\n          <button nbButton ghost (click)=\"close()\">\n            <nb-icon icon=\"close-outline\" pack=\"nebular-essentials\"></nb-icon>\n          </button>\n        </div>\n      </nb-card-header>\n      <nb-card-body *ngIf=\"maximized || isFullScreen\">\n        <nb-overlay-container></nb-overlay-container>\n      </nb-card-body>\n    </nb-card>\n  ",
                styles: [":host{flex:1 0 auto;min-width:20rem}:host nb-card{margin:0}:host nb-card-header{display:flex;justify-content:space-between;align-items:center;overflow:hidden}:host .title{flex:1 0 auto;margin-right:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .buttons{width:9.5rem;display:flex;justify-content:space-evenly}:host .buttons [nbButton]{flex:0 0 3rem}:host(.full-screen){position:fixed;top:50%;left:50%;transform:translate(-50%, -50%)}:host(.maximized) nb-card{border-bottom-left-radius:0;border-bottom-right-radius:0}:host(.minimized) nb-card{border-bottom-left-radius:0;border-bottom-right-radius:0;height:auto}:host(.minimized) nb-card nb-card-header{border-bottom:none}\n"]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_WINDOW_CONTENT]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_WINDOW_CONTEXT]
            }] }, { type: NbWindowRef }, { type: NbWindowConfig }, { type: NbFocusTrapFactoryService }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, { isFullScreen: [{
            type: HostBinding,
            args: ['class.full-screen']
        }], maximized: [{
            type: HostBinding,
            args: ['class.maximized']
        }], minimized: [{
            type: HostBinding,
            args: ['class.minimized']
        }], cfr: [{
            type: Input
        }], overlayContainer: [{
            type: ViewChild,
            args: [NbOverlayContainerComponent]
        }] }); })();
    return NbWindowComponent;
}());

/**
 * The `NbWindowService` can be used to open windows.
 *
 * @stacked-example(Showcase, window/window-showcase.component)
 *
 * ### Installation
 *
 * Import `NbWindowModule` to your app module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbWindowModule.forRoot(config),
 *   ],
 * })
 * export class AppModule { }
 * ```
 *
 * If you are using it in a lazy loaded module than you have to install `NbWindowModule.forChild`:
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbWindowModule.forChild(config),
 *   ],
 * })
 * export class LazyLoadedModule { }
 * ```
 *
 * ### Usage
 *
 * A new window can be opened by calling the `open` method with a component or template to be loaded
 * and an optional configuration.
 * `open` method will return `NbWindowRef` that can be used for the further manipulations.
 *
 * ```ts
 * const windowRef = this.windowService.open(MyComponent, { ... });
 * ```
 *
 * `NbWindowRef` gives you ability manipulate opened window.
 * Also, you can inject `NbWindowRef` inside provided component which rendered in window.
 *
 * ```ts
 * this.windowService.open(MyWindowComponent, { ... });
 *
 * // my.component.ts
 * constructor(protected windowRef: NbWindowRef) {
 * }
 *
 * minimize() {
 *   this.windowRef.minimize();
 * }
 *
 * close() {
 *   this.windowRef.close();
 * }
 * ```
 *
 * Instead of component you can create window from TemplateRef. As usual you can access context provided via config
 * via `let-` variables. Also you can get reference to the `NbWindowRef` in context's `windowRef` property.
 *
 * @stacked-example(Window content from TemplateRef, window/template-window.component)
 *
 * ### Configuration
 *
 * As mentioned above, `open` method of the `NbWindowService` may receive optional configuration options.
 * Also, you can modify default windows configuration through `NbWindowModule.forRoot({ ... })`.
 * You can read about all available options on [API tab](docs/components/window/api#nbwindowconfig).
 *
 * @stacked-example(Configuration, window/windows-backdrop.component)
 */
var NbWindowService = /** @class */ (function () {
    function NbWindowService(componentFactoryResolver, overlayService, overlayPositionBuilder, blockScrollStrategy, defaultWindowsConfig, cfr, document) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.overlayService = overlayService;
        this.overlayPositionBuilder = overlayPositionBuilder;
        this.blockScrollStrategy = blockScrollStrategy;
        this.defaultWindowsConfig = defaultWindowsConfig;
        this.cfr = cfr;
        this.openWindows = [];
        this.document = document;
    }
    /**
     * Opens new window.
     * @param windowContent
     * @param windowConfig
     * */
    NbWindowService.prototype.open = function (windowContent, windowConfig) {
        if (windowConfig === void 0) { windowConfig = {}; }
        if (this.shouldCreateWindowsContainer()) {
            this.createWindowsContainer();
        }
        var config = new NbWindowConfig(this.defaultWindowsConfig, windowConfig);
        var windowRef = new NbWindowRef(config);
        windowRef.componentRef = this.appendWindow(windowContent, config, windowRef);
        this.openWindows.push(windowRef);
        this.subscribeToEvents(windowRef);
        return windowRef;
    };
    NbWindowService.prototype.shouldCreateWindowsContainer = function () {
        if (this.windowsContainerViewRef) {
            var containerEl = this.windowsContainerViewRef.element.nativeElement;
            return !this.document.body.contains(containerEl);
        }
        return true;
    };
    NbWindowService.prototype.createWindowsContainer = function () {
        if (this.overlayRef) {
            this.overlayRef.dispose();
        }
        this.overlayRef = this.overlayService.create({
            scrollStrategy: this.overlayService.scrollStrategies.noop(),
            positionStrategy: this.overlayPositionBuilder.global().bottom().right(),
            hasBackdrop: true,
        });
        var windowsContainerPortal = new NbComponentPortal(NbWindowsContainerComponent, null, null, this.cfr);
        var overlayRef = this.overlayRef.attach(windowsContainerPortal);
        this.windowsContainerViewRef = overlayRef.instance.viewContainerRef;
    };
    NbWindowService.prototype.appendWindow = function (content, config, windowRef) {
        var context = content instanceof TemplateRef
            ? { $implicit: config.context, windowRef: windowRef }
            : config.context;
        var providers = [
            { provide: NB_WINDOW_CONTENT, useValue: content },
            { provide: NB_WINDOW_CONTEXT, useValue: context },
            { provide: NbWindowConfig, useValue: config },
            { provide: NbWindowRef, useValue: windowRef },
        ];
        var parentInjector = config.viewContainerRef
            ? config.viewContainerRef.injector
            : this.windowsContainerViewRef.injector;
        var injector = Injector.create({ parent: parentInjector, providers: providers });
        var windowFactory = this.componentFactoryResolver.resolveComponentFactory(NbWindowComponent);
        var ref = this.windowsContainerViewRef.createComponent(windowFactory, null, injector);
        ref.instance.cfr = this.cfr;
        ref.changeDetectorRef.detectChanges();
        return ref;
    };
    NbWindowService.prototype.subscribeToEvents = function (windowRef) {
        var _this = this;
        if (windowRef.config.closeOnBackdropClick) {
            this.overlayRef.backdropClick().subscribe(function () { return windowRef.close(); });
        }
        if (windowRef.config.closeOnEsc) {
            this.overlayRef.keydownEvents()
                .pipe(filter(function (event) { return event.keyCode === 27; }))
                .subscribe(function () { return windowRef.close(); });
        }
        windowRef.stateChange.subscribe(function () { return _this.checkAndUpdateOverlay(); });
        windowRef.onClose.subscribe(function () {
            _this.openWindows.splice(_this.openWindows.indexOf(windowRef), 1);
            _this.checkAndUpdateOverlay();
        });
    };
    NbWindowService.prototype.checkAndUpdateOverlay = function () {
        var fullScreenWindows = this.openWindows.filter(function (w) { return w.state === NbWindowState.FULL_SCREEN; });
        if (fullScreenWindows.length > 0) {
            this.blockScrollStrategy.enable();
        }
        else {
            this.blockScrollStrategy.disable();
        }
        if (fullScreenWindows.some(function (w) { return w.config.hasBackdrop; })) {
            this.overlayRef.backdropElement.removeAttribute('hidden');
        }
        else {
            this.overlayRef.backdropElement.setAttribute('hidden', '');
        }
    };
    NbWindowService = __decorate([ __param(4, Inject(NB_WINDOW_CONFIG)),
        __param(6, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [ComponentFactoryResolver,
            NbOverlayService,
            NbOverlayPositionBuilder,
            NbBlockScrollStrategyAdapter,
            NbWindowConfig,
            ComponentFactoryResolver, Object])
    ], NbWindowService);
NbWindowService.ɵfac = function NbWindowService_Factory(t) { return new (t || NbWindowService)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(NbOverlayPositionBuilder), ɵngcc0.ɵɵinject(NbBlockScrollStrategyAdapter), ɵngcc0.ɵɵinject(NB_WINDOW_CONFIG), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(NB_DOCUMENT)); };
NbWindowService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbWindowService, factory: function (t) { return NbWindowService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbWindowService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc0.ComponentFactoryResolver }, { type: NbOverlayService }, { type: NbOverlayPositionBuilder }, { type: NbBlockScrollStrategyAdapter }, { type: NbWindowConfig, decorators: [{
                type: Inject,
                args: [NB_WINDOW_CONFIG]
            }] }, { type: ɵngcc0.ComponentFactoryResolver }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }]; }, null); })();
    return NbWindowService;
}());

var NbWindowModule = /** @class */ (function () {
    function NbWindowModule() {
    }
    NbWindowModule_1 = NbWindowModule;
    NbWindowModule.forRoot = function (defaultConfig) {
        return {
            ngModule: NbWindowModule_1,
            providers: [
                NbWindowService,
                { provide: NB_WINDOW_CONFIG, useValue: defaultConfig },
            ],
        };
    };
    NbWindowModule.forChild = function (defaultConfig) {
        return {
            ngModule: NbWindowModule_1,
            providers: [
                NbWindowService,
                { provide: NB_WINDOW_CONFIG, useValue: defaultConfig },
            ],
        };
    };
    var NbWindowModule_1;
NbWindowModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbWindowModule });
NbWindowModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbWindowModule_Factory(t) { return new (t || NbWindowModule)(); }, imports: [[CommonModule, NbOverlayModule, NbCardModule, NbIconModule, NbButtonModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbWindowModule, { declarations: function () { return [NbWindowsContainerComponent,
        NbWindowComponent]; }, imports: function () { return [CommonModule,
        NbOverlayModule,
        NbCardModule,
        NbIconModule,
        NbButtonModule]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbWindowModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule, NbOverlayModule, NbCardModule, NbIconModule, NbButtonModule],
                declarations: [
                    NbWindowsContainerComponent,
                    NbWindowComponent,
                ],
                entryComponents: [NbWindowsContainerComponent, NbWindowComponent]
            }]
    }], function () { return []; }, null); })();
    return NbWindowModule;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbDatepickerAdapter` instances provide way how to parse, format and validate
 * different date types.
 * */
var NbDatepickerAdapter = /** @class */ (function () {
    function NbDatepickerAdapter() {
    }
    return NbDatepickerAdapter;
}());
/**
 * Datepicker is an control that can pick any values anyway.
 * It has to be bound to the datepicker directive through nbDatepicker input.
 * */
var NbDatepicker = /** @class */ (function () {
    function NbDatepicker() {
    }
    return NbDatepicker;
}());
var NB_DATE_ADAPTER = new InjectionToken('Datepicker Adapter');
var NB_DATE_SERVICE_OPTIONS = new InjectionToken('Date service options');
/**
 * The `NbDatepickerDirective` is form control that gives you ability to select dates and ranges. The datepicker
 * is shown when input receives a `focus` event.
 *
 * ```html
 * <input [nbDatepicker]="datepicker">
 * <nb-datepicker #datepicker></nb-datepicker>
 * ```
 *
 * @stacked-example(Showcase, datepicker/datepicker-showcase.component)
 *
 * ### Installation
 *
 * Import `NbDatepickerModule.forRoot()` to your root module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbDatepickerModule.forRoot(),
 *   ],
 * })
 * export class AppModule { }
 * ```
 * And `NbDatepickerModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbDatepickerModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * If you want to use range selection, you have to use `NbRangepickerComponent` instead:
 *
 * ```html
 * <input [nbDatepicker]="rangepicker">
 * <nb-rangepicker #rangepicker></nb-rangepicker>
 * ```
 *
 * Both range and date pickers support all parameters as calendar, so, check `NbCalendarComponent` for additional
 * info.
 *
 * @stacked-example(Range showcase, datepicker/rangepicker-showcase.component)
 *
 * Datepicker is the form control so it can be bound with angular forms through ngModel and form controls.
 *
 * @stacked-example(Forms, datepicker/datepicker-forms.component)
 *
 * `NbDatepickerDirective` may be validated using `min` and `max` dates passed to the datepicker.
 * And `filter` predicate that receives date object and has to return a boolean value.
 *
 * @stacked-example(Validation, datepicker/datepicker-validation.component)
 *
 * The `NbDatepickerComponent` supports date formatting:
 *
 * ```html
 * <input [nbDatepicker]="datepicker">
 * <nb-datepicker #datepicker format="MM\dd\yyyy"></nb-datepicker>
 * ```
 *
 * ## Formatting Issue
 *
 * By default, datepicker uses angulars `LOCALE_ID` token for localization and `DatePipe` for dates formatting.
 * And native `Date.parse(...)` for dates parsing. But native `Date.parse` function doesn't support formats.
 * To provide custom formatting you have to use one of the following packages:
 *
 * - `@nebular/moment` - provides moment date adapter that uses moment for date objects. This means datepicker than
 * will operate only moment date objects. If you want to use it you have to install it: `npm i @nebular/moment`, and
 * import `NbMomentDateModule` from this package.
 *
 * - `@nebular/date-fns` - adapter for popular date-fns library. This way is preferred if you need only date formatting.
 * Because date-fns is treeshakable, tiny and operates native date objects. If you want to use it you have to
 * install it: `npm i @nebular/date-fns`, and import `NbDateFnsDateModule` from this package.
 *
 * ### NbDateFnsDateModule
 *
 * Format is required when using `NbDateFnsDateModule`. You can set it via `format` input on datepicker component:
 * ```html
 * <nb-datepicker format="dd.MM.yyyy"></nb-datepicker>
 * ```
 * Also format can be set globally with `NbDateFnsDateModule.forRoot({ format: 'dd.MM.yyyy' })` and
 * `NbDateFnsDateModule.forChild({ format: 'dd.MM.yyyy' })` methods.
 *
 * Please note to use some of the formatting tokens you also need to pass
 * `{ useAdditionalWeekYearTokens: true, useAdditionalDayOfYearTokens: true }` to date-fns parse and format functions.
 * You can configure options passed this functions by setting `formatOptions` and
 * `parseOptions` of options object passed to `NbDateFnsDateModule.forRoot` and `NbDateFnsDateModule.forChild` methods.
 * ```ts
 * NbDateFnsDateModule.forRoot({
 *   parseOptions: { useAdditionalWeekYearTokens: true, useAdditionalDayOfYearTokens: true },
 *   formatOptions: { useAdditionalWeekYearTokens: true, useAdditionalDayOfYearTokens: true },
 * })
 * ```
 * Further info on `date-fns` formatting tokens could be found at
 * [date-fns docs](https://date-fns.org/v2.0.0-alpha.27/docs/Unicode-Tokens).
 *
 * You can also use `parseOptions` and `formatOptions` to provide locale.
 * ```ts
 * import { eo } from 'date-fns/locale';
 *
 * @NgModule({
 *   imports: [
 *     NbDateFnsDateModule.forRoot({
 *       parseOptions: { locale: eo },
 *       formatOptions: { locale: eo },
 *     }),
 *   ],
 * })
 * ```
 *
 * @styles
 *
 * datepicker-background-color:
 * datepicker-border-color:
 * datepicker-border-style:
 * datepicker-border-width:
 * datepicker-border-radius:
 * datepicker-shadow:
 * */
var NbDatepickerDirective = /** @class */ (function () {
    function NbDatepickerDirective(document, datepickerAdapters, hostRef, dateService, changeDetector) {
        var _this = this;
        this.document = document;
        this.datepickerAdapters = datepickerAdapters;
        this.hostRef = hostRef;
        this.dateService = dateService;
        this.changeDetector = changeDetector;
        this.destroy$ = new Subject();
        this.isDatepickerReady = false;
        this.onChange = function () { };
        this.onTouched = function () { };
        /**
         * Form control validators will be called in validators context, so, we need to bind them.
         * */
        this.validator = Validators.compose([
            this.parseValidator,
            this.minValidator,
            this.maxValidator,
            this.filterValidator,
        ].map(function (fn) { return fn.bind(_this); }));
        this.subscribeOnInputChange();
    }
    NbDatepickerDirective_1 = NbDatepickerDirective;
    Object.defineProperty(NbDatepickerDirective.prototype, "setPicker", {
        /**
         * Provides datepicker component.
         * */
        set: function (picker) {
            this.picker = picker;
            this.setupPicker();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbDatepickerDirective.prototype, "input", {
        /**
         * Returns html input element.
         * */
        get: function () {
            return this.hostRef.nativeElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbDatepickerDirective.prototype, "inputValue", {
        /**
         * Returns host input value.
         * */
        get: function () {
            return this.input.value;
        },
        enumerable: true,
        configurable: true
    });
    NbDatepickerDirective.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * Writes value in picker and html input element.
     * */
    NbDatepickerDirective.prototype.writeValue = function (value) {
        if (this.isDatepickerReady) {
            this.writePicker(value);
            this.writeInput(value);
        }
        else {
            this.queue = value;
        }
    };
    NbDatepickerDirective.prototype.registerOnChange = function (fn) {
        this.onChange = fn;
    };
    NbDatepickerDirective.prototype.registerOnTouched = function (fn) {
        this.onTouched = fn;
    };
    NbDatepickerDirective.prototype.setDisabledState = function (isDisabled) {
        this.input.disabled = isDisabled;
    };
    /**
     * Form control validation based on picker validator config.
     * */
    NbDatepickerDirective.prototype.validate = function () {
        return this.validator(null);
    };
    /**
     * Hides picker, focuses the input
     */
    NbDatepickerDirective.prototype.hidePicker = function () {
        this.input.focus();
        this.picker.hide();
    };
    /**
     * Validates that we can parse value correctly.
     * */
    NbDatepickerDirective.prototype.parseValidator = function () {
        /**
         * Date services treat empty string as invalid date.
         * That's why we're getting invalid formControl in case of empty input which is not required.
         * */
        if (this.inputValue === '') {
            return null;
        }
        var isValid = this.datepickerAdapter.isValid(this.inputValue, this.picker.format);
        return isValid ? null : { nbDatepickerParse: { value: this.inputValue } };
    };
    /**
     * Validates passed value is greater than min.
     * */
    NbDatepickerDirective.prototype.minValidator = function () {
        var config = this.picker.getValidatorConfig();
        var date = this.datepickerAdapter.parse(this.inputValue, this.picker.format);
        return (!config.min || !date || this.dateService.compareDates(config.min, date) <= 0) ?
            null : { nbDatepickerMin: { min: config.min, actual: date } };
    };
    /**
     * Validates passed value is smaller than max.
     * */
    NbDatepickerDirective.prototype.maxValidator = function () {
        var config = this.picker.getValidatorConfig();
        var date = this.datepickerAdapter.parse(this.inputValue, this.picker.format);
        return (!config.max || !date || this.dateService.compareDates(config.max, date) >= 0) ?
            null : { nbDatepickerMax: { max: config.max, actual: date } };
    };
    /**
     * Validates passed value satisfy the filter.
     * */
    NbDatepickerDirective.prototype.filterValidator = function () {
        var config = this.picker.getValidatorConfig();
        var date = this.datepickerAdapter.parse(this.inputValue, this.picker.format);
        return (!config.filter || !date || config.filter(date)) ?
            null : { nbDatepickerFilter: true };
    };
    /**
     * Chooses datepicker adapter based on passed picker component.
     * */
    NbDatepickerDirective.prototype.chooseDatepickerAdapter = function () {
        var _this = this;
        this.datepickerAdapter = this.datepickerAdapters.find(function (_a) {
            var picker = _a.picker;
            return _this.picker instanceof picker;
        });
        if (this.noDatepickerAdapterProvided()) {
            throw new Error('No datepickerAdapter provided for picker');
        }
    };
    /**
     * Attaches picker to the host input element and subscribes on value changes.
     * */
    NbDatepickerDirective.prototype.setupPicker = function () {
        var _this = this;
        this.chooseDatepickerAdapter();
        this.picker.attach(this.hostRef);
        if (this.inputValue) {
            this.picker.value = this.datepickerAdapter.parse(this.inputValue, this.picker.format);
        }
        // In case datepicker component placed after the input with datepicker directive,
        // we can't read `this.picker.format` on first change detection run,
        // since it's not bound yet, so we have to wait for datepicker component initialization.
        if (!this.isDatepickerReady) {
            this.picker.init
                .pipe(take(1), tap(function () { return _this.isDatepickerReady = true; }), filter(function () { return !!_this.queue; }), takeUntil(this.destroy$))
                .subscribe(function () {
                _this.writeValue(_this.queue);
                _this.onChange(_this.queue);
                _this.changeDetector.detectChanges();
                _this.queue = undefined;
            });
        }
        this.picker.valueChange
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (value) {
            _this.writePicker(value);
            _this.writeInput(value);
            _this.onChange(value);
            if (_this.picker.shouldHide()) {
                _this.hidePicker();
            }
        });
        merge(this.picker.blur, fromEvent(this.input, 'blur').pipe(filter(function () { return !_this.picker.isShown && _this.document.activeElement !== _this.input; }))).pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.onTouched(); });
    };
    NbDatepickerDirective.prototype.writePicker = function (value) {
        this.picker.value = value;
    };
    NbDatepickerDirective.prototype.writeInput = function (value) {
        var stringRepresentation = this.datepickerAdapter.format(value, this.picker.format);
        this.hostRef.nativeElement.value = stringRepresentation;
    };
    /**
     * Validates if no datepicker adapter provided.
     * */
    NbDatepickerDirective.prototype.noDatepickerAdapterProvided = function () {
        return !this.datepickerAdapter || !(this.datepickerAdapter instanceof NbDatepickerAdapter);
    };
    NbDatepickerDirective.prototype.subscribeOnInputChange = function () {
        var _this = this;
        fromEvent(this.input, 'input')
            .pipe(map(function () { return _this.inputValue; }), takeUntil(this.destroy$))
            .subscribe(function (value) { return _this.handleInputChange(value); });
    };
    /**
     * Parses input value and write if it isn't null.
     * */
    NbDatepickerDirective.prototype.handleInputChange = function (value) {
        var date = this.parseInputValue(value);
        this.onChange(date);
        this.writePicker(date);
    };
    NbDatepickerDirective.prototype.parseInputValue = function (value) {
        if (this.datepickerAdapter.isValid(value, this.picker.format)) {
            return this.datepickerAdapter.parse(value, this.picker.format);
        }
        return null;
    };
    var NbDatepickerDirective_1;
    __decorate([
        Input('nbDatepicker'),
        __metadata("design:type", NbDatepicker),
        __metadata("design:paramtypes", [NbDatepicker])
    ], NbDatepickerDirective.prototype, "setPicker", null);
    NbDatepickerDirective = NbDatepickerDirective_1 = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __param(1, Inject(NB_DATE_ADAPTER)),
        __metadata("design:paramtypes", [Object, Array, ElementRef,
            NbDateService,
            ChangeDetectorRef])
    ], NbDatepickerDirective);
NbDatepickerDirective.ɵfac = function NbDatepickerDirective_Factory(t) { return new (t || NbDatepickerDirective)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NB_DATE_ADAPTER), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbDatepickerDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbDatepickerDirective, selectors: [["input", "nbDatepicker", ""]], inputs: { setPicker: ["nbDatepicker", "setPicker"] }, features: [ɵngcc0.ɵɵProvidersFeature([
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(function () { return NbDatepickerDirective_1; }),
                multi: true
            },
            {
                provide: NG_VALIDATORS,
                useExisting: forwardRef(function () { return NbDatepickerDirective_1; }),
                multi: true
            },
        ])] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDatepickerDirective, [{
        type: Directive,
        args: [{
                selector: 'input[nbDatepicker]',
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(function () { return NbDatepickerDirective_1; }),
                        multi: true
                    },
                    {
                        provide: NG_VALIDATORS,
                        useExisting: forwardRef(function () { return NbDatepickerDirective_1; }),
                        multi: true
                    },
                ]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: Array, decorators: [{
                type: Inject,
                args: [NB_DATE_ADAPTER]
            }] }, { type: ɵngcc0.ElementRef }, { type: NbDateService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { setPicker: [{
            type: Input,
            args: ['nbDatepicker']
        }] }); })();
    return NbDatepickerDirective;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbDatepickerContainerComponent = /** @class */ (function (_super) {
    __extends(NbDatepickerContainerComponent, _super);
    function NbDatepickerContainerComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbDatepickerContainerComponent.prototype.attach = function (portal) {
        return this.overlayContainer.attachComponentPortal(portal);
    };
    __decorate([
        ViewChild(NbOverlayContainerComponent, { static: true }),
        __metadata("design:type", NbOverlayContainerComponent)
    ], NbDatepickerContainerComponent.prototype, "overlayContainer", void 0);
NbDatepickerContainerComponent.ɵfac = function NbDatepickerContainerComponent_Factory(t) { return ɵNbDatepickerContainerComponent_BaseFactory(t || NbDatepickerContainerComponent); };
NbDatepickerContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbDatepickerContainerComponent, selectors: [["nb-datepicker-container"]], viewQuery: function NbDatepickerContainerComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(NbOverlayContainerComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.overlayContainer = _t.first);
    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 1, vars: 0, template: function NbDatepickerContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "nb-overlay-container");
    } }, directives: [NbOverlayContainerComponent], encapsulation: 2 });
var ɵNbDatepickerContainerComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDatepickerContainerComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDatepickerContainerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-datepicker-container',
                template: "\n    <nb-overlay-container></nb-overlay-container>\n  "
            }]
    }], null, { overlayContainer: [{
            type: ViewChild,
            args: [NbOverlayContainerComponent, { static: true }]
        }] }); })();
    return NbDatepickerContainerComponent;
}(NbPositionedContainer));

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbBasePicker` component concentrates overlay manipulation logic.
 * */
var NbBasePicker = /** @class */ (function (_super) {
    __extends(NbBasePicker, _super);
    function NbBasePicker(overlay, positionBuilder, triggerStrategyBuilder, cfr, dateService, dateServiceOptions) {
        var _this = _super.call(this) || this;
        _this.overlay = overlay;
        _this.positionBuilder = positionBuilder;
        _this.triggerStrategyBuilder = triggerStrategyBuilder;
        _this.cfr = cfr;
        _this.dateService = dateService;
        _this.dateServiceOptions = dateServiceOptions;
        /**
         * Size of the calendar and entire components.
         * Can be 'medium' which is default or 'large'.
         * */
        _this.size = NbCalendarSize.MEDIUM;
        _this.init$ = new ReplaySubject();
        /**
         * Stream of picker changes. Required to be the subject because picker hides and shows and picker
         * change stream becomes recreated.
         * */
        _this.onChange$ = new Subject();
        _this.overlayOffset = 8;
        _this.destroy$ = new Subject();
        _this.blur$ = new Subject();
        return _this;
    }
    Object.defineProperty(NbBasePicker.prototype, "picker", {
        /**
         * Returns picker instance.
         * */
        get: function () {
            return this.pickerRef && this.pickerRef.instance;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBasePicker.prototype, "valueChange", {
        /**
         * Stream of picker value changes.
         * */
        get: function () {
            return this.onChange$.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBasePicker.prototype, "isShown", {
        get: function () {
            return this.ref && this.ref.hasAttached();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBasePicker.prototype, "init", {
        get: function () {
            return this.init$.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBasePicker.prototype, "blur", {
        /**
         * Emits when datepicker looses focus.
         */
        get: function () {
            return this.blur$.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    NbBasePicker.prototype.ngOnInit = function () {
        this.checkFormat();
    };
    NbBasePicker.prototype.ngOnChanges = function (changes) {
        if (changes.format && !changes.format.isFirstChange()) {
            this.checkFormat();
        }
    };
    NbBasePicker.prototype.ngAfterViewInit = function () {
        this.init$.next();
    };
    NbBasePicker.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
        this.hide();
        this.init$.complete();
        if (this.ref) {
            this.ref.dispose();
        }
        if (this.triggerStrategy) {
            this.triggerStrategy.destroy();
        }
    };
    /**
     * Datepicker knows nothing about host html input element.
     * So, attach method attaches datepicker to the host input element.
     * */
    NbBasePicker.prototype.attach = function (hostRef) {
        this.hostRef = hostRef;
        this.subscribeOnTriggers();
    };
    NbBasePicker.prototype.getValidatorConfig = function () {
        return { min: this.min, max: this.max, filter: this.filter };
    };
    NbBasePicker.prototype.show = function () {
        if (!this.ref) {
            this.createOverlay();
        }
        this.openDatepicker();
    };
    NbBasePicker.prototype.shouldHide = function () {
        return this.hideOnSelect && !!this.value;
    };
    NbBasePicker.prototype.hide = function () {
        if (this.ref) {
            this.ref.detach();
        }
        // save current value if picker was rendered
        if (this.picker) {
            this.queue = this.value;
            this.pickerRef.destroy();
            this.pickerRef = null;
            this.container = null;
        }
    };
    NbBasePicker.prototype.createOverlay = function () {
        this.positionStrategy = this.createPositionStrategy();
        this.ref = this.overlay.create({
            positionStrategy: this.positionStrategy,
            scrollStrategy: this.overlay.scrollStrategies.reposition(),
        });
        this.subscribeOnPositionChange();
    };
    NbBasePicker.prototype.openDatepicker = function () {
        this.container = this.ref.attach(new NbComponentPortal(NbDatepickerContainerComponent, null, null, this.cfr));
        this.instantiatePicker();
        this.subscribeOnValueChange();
        this.writeQueue();
        this.patchWithInputs();
    };
    NbBasePicker.prototype.createPositionStrategy = function () {
        return this.positionBuilder
            .connectedTo(this.hostRef)
            .position(NbPosition.BOTTOM)
            .offset(this.overlayOffset)
            .adjustment(NbAdjustment.COUNTERCLOCKWISE);
    };
    NbBasePicker.prototype.subscribeOnPositionChange = function () {
        var _this = this;
        this.positionStrategy.positionChange
            .pipe(takeUntil(this.destroy$))
            .subscribe(function (position) { return patch(_this.container, { position: position }); });
    };
    NbBasePicker.prototype.createTriggerStrategy = function () {
        var _this = this;
        return this.triggerStrategyBuilder
            .trigger(NbTrigger.FOCUS)
            .host(this.hostRef.nativeElement)
            .container(function () { return _this.container; })
            .build();
    };
    NbBasePicker.prototype.subscribeOnTriggers = function () {
        var _this = this;
        this.triggerStrategy = this.createTriggerStrategy();
        this.triggerStrategy.show$.subscribe(function () { return _this.show(); });
        this.triggerStrategy.hide$.subscribe(function () {
            _this.blur$.next();
            _this.hide();
        });
    };
    NbBasePicker.prototype.instantiatePicker = function () {
        this.pickerRef = this.container.instance.attach(new NbComponentPortal(this.pickerClass, null, null, this.cfr));
    };
    /**
     * Subscribes on picker value changes and emit data through this.onChange$ subject.
     * */
    NbBasePicker.prototype.subscribeOnValueChange = function () {
        var _this = this;
        this.pickerValueChange.subscribe(function (date) {
            _this.onChange$.next(date);
        });
    };
    NbBasePicker.prototype.patchWithInputs = function () {
        this.picker.boundingMonth = this.boundingMonth;
        this.picker.startView = this.startView;
        this.picker.min = this.min;
        this.picker.max = this.max;
        this.picker.filter = this.filter;
        this.picker._cellComponent = this.dayCellComponent;
        this.picker.monthCellComponent = this.monthCellComponent;
        this.picker._yearCellComponent = this.yearCellComponent;
        this.picker.size = this.size;
        this.picker.showNavigation = this.showNavigation;
        this.picker.visibleDate = this.visibleDate;
        this.picker.showWeekNumber = this.showWeekNumber;
        this.picker.weekNumberSymbol = this.weekNumberSymbol;
    };
    NbBasePicker.prototype.checkFormat = function () {
        if (this.dateService.getId() === 'native' && this.format) {
            throw new Error('Can\'t format native date. To use custom formatting you have to install @nebular/moment or ' +
                '@nebular/date-fns package and import NbMomentDateModule or NbDateFnsDateModule accordingly.' +
                'More information at "Formatting issue" ' +
                'https://akveo.github.io/nebular/docs/components/datepicker/overview#nbdatepickercomponent');
        }
        var isFormatSet = this.format || (this.dateServiceOptions && this.dateServiceOptions.format);
        if (this.dateService.getId() === 'date-fns' && !isFormatSet) {
            throw new Error('format is required when using NbDateFnsDateModule');
        }
    };
NbBasePicker.ɵfac = function NbBasePicker_Factory(t) { ɵngcc0.ɵɵinvalidFactory(); };
NbBasePicker.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbBasePicker, features: [ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature] });

    return NbBasePicker;
}(NbDatepicker));
var NbBasePickerComponent = /** @class */ (function (_super) {
    __extends(NbBasePickerComponent, _super);
    function NbBasePickerComponent(document, positionBuilder, triggerStrategyBuilder, overlay, cfr, dateService, dateServiceOptions) {
        var _this = _super.call(this, overlay, positionBuilder, triggerStrategyBuilder, cfr, dateService, dateServiceOptions) || this;
        /**
         * Defines if we should render previous and next months
         * in the current month view.
         * */
        _this.boundingMonth = true;
        /**
         * Defines starting view for calendar.
         * */
        _this.startView = NbCalendarViewMode.DATE;
        /**
         * Size of the calendar and entire components.
         * Can be 'medium' which is default or 'large'.
         * */
        _this.size = NbCalendarSize.MEDIUM;
        /**
         * Hide picker when a date or a range is selected, `true` by default
         * @type {boolean}
         */
        _this.hideOnSelect = true;
        /**
         * Determines should we show calendars navigation or not.
         * @type {boolean}
         */
        _this.showNavigation = true;
        /**
         * Sets symbol used as a header for week numbers column
         * */
        _this.weekNumberSymbol = '#';
        _this._showWeekNumber = false;
        return _this;
    }
    Object.defineProperty(NbBasePickerComponent.prototype, "showWeekNumber", {
        /**
         * Determines should we show week numbers column.
         * False by default.
         * */
        get: function () {
            return this._showWeekNumber;
        },
        set: function (value) {
            this._showWeekNumber = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBasePickerComponent.prototype, "pickerValueChange", {
        get: function () {
            return;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbBasePickerComponent.prototype, "value", {
        get: function () {
            return undefined;
        },
        set: function (value) { },
        enumerable: true,
        configurable: true
    });
    NbBasePickerComponent.prototype.writeQueue = function () {
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbBasePickerComponent.prototype, "format", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbBasePickerComponent.prototype, "boundingMonth", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbBasePickerComponent.prototype, "startView", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbBasePickerComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbBasePickerComponent.prototype, "max", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Function)
    ], NbBasePickerComponent.prototype, "filter", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbBasePickerComponent.prototype, "dayCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbBasePickerComponent.prototype, "monthCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Type)
    ], NbBasePickerComponent.prototype, "yearCellComponent", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbBasePickerComponent.prototype, "size", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], NbBasePickerComponent.prototype, "visibleDate", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbBasePickerComponent.prototype, "hideOnSelect", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbBasePickerComponent.prototype, "showNavigation", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbBasePickerComponent.prototype, "weekNumberSymbol", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbBasePickerComponent.prototype, "showWeekNumber", null);
    NbBasePickerComponent = __decorate([ __param(0, Inject(NB_DOCUMENT)),
        __param(6, Optional()), __param(6, Inject(NB_DATE_SERVICE_OPTIONS)),
        __metadata("design:paramtypes", [Object, NbPositionBuilderService,
            NbTriggerStrategyBuilderService,
            NbOverlayService,
            ComponentFactoryResolver,
            NbDateService, Object])
    ], NbBasePickerComponent);
NbBasePickerComponent.ɵfac = function NbBasePickerComponent_Factory(t) { return new (t || NbBasePickerComponent)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NB_DATE_SERVICE_OPTIONS, 8)); };
NbBasePickerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbBasePickerComponent, selectors: [["ng-component"]], inputs: { showWeekNumber: "showWeekNumber", format: "format", boundingMonth: "boundingMonth", startView: "startView", min: "min", max: "max", filter: "filter", dayCellComponent: "dayCellComponent", monthCellComponent: "monthCellComponent", yearCellComponent: "yearCellComponent", size: "size", visibleDate: "visibleDate", hideOnSelect: "hideOnSelect", showNavigation: "showNavigation", weekNumberSymbol: "weekNumberSymbol" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function NbBasePickerComponent_Template(rf, ctx) { }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbBasePickerComponent, [{
        type: Component,
        args: [{
                template: ''
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: NbPositionBuilderService }, { type: NbTriggerStrategyBuilderService }, { type: NbOverlayService }, { type: ɵngcc0.ComponentFactoryResolver }, { type: NbDateService }, { type: Object, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [NB_DATE_SERVICE_OPTIONS]
            }] }]; }, { showWeekNumber: [{
            type: Input
        }], format: [{
            type: Input
        }], boundingMonth: [{
            type: Input
        }], startView: [{
            type: Input
        }], min: [{
            type: Input
        }], max: [{
            type: Input
        }], filter: [{
            type: Input
        }], dayCellComponent: [{
            type: Input
        }], monthCellComponent: [{
            type: Input
        }], yearCellComponent: [{
            type: Input
        }], size: [{
            type: Input
        }], visibleDate: [{
            type: Input
        }], hideOnSelect: [{
            type: Input
        }], showNavigation: [{
            type: Input
        }], weekNumberSymbol: [{
            type: Input
        }] }); })();
    return NbBasePickerComponent;
}(NbBasePicker));
/**
 * The DatePicker components itself.
 * Provides a proxy to `NbCalendar` options as well as custom picker options.
 */
var NbDatepickerComponent = /** @class */ (function (_super) {
    __extends(NbDatepickerComponent, _super);
    function NbDatepickerComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.pickerClass = NbCalendarComponent;
        return _this;
    }
    Object.defineProperty(NbDatepickerComponent.prototype, "date", {
        /**
         * Date which will be rendered as selected.
         * */
        set: function (date) {
            this.value = date;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbDatepickerComponent.prototype, "dateChange", {
        /**
         * Emits date when selected.
         * */
        get: function () {
            return this.valueChange;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbDatepickerComponent.prototype, "value", {
        get: function () {
            return this.picker ? this.picker.date : undefined;
        },
        set: function (date) {
            if (!this.picker) {
                this.queue = date;
                return;
            }
            if (date) {
                this.visibleDate = date;
                this.picker.visibleDate = date;
                this.picker.date = date;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbDatepickerComponent.prototype, "pickerValueChange", {
        get: function () {
            return this.picker.dateChange;
        },
        enumerable: true,
        configurable: true
    });
    NbDatepickerComponent.prototype.writeQueue = function () {
        if (this.queue) {
            var date = this.queue;
            this.queue = null;
            this.value = date;
        }
    };
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbDatepickerComponent.prototype, "date", null);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter),
        __metadata("design:paramtypes", [])
    ], NbDatepickerComponent.prototype, "dateChange", null);
NbDatepickerComponent.ɵfac = function NbDatepickerComponent_Factory(t) { return ɵNbDatepickerComponent_BaseFactory(t || NbDatepickerComponent); };
NbDatepickerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbDatepickerComponent, selectors: [["nb-datepicker"]], inputs: { date: "date" }, outputs: { dateChange: "dateChange" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function NbDatepickerComponent_Template(rf, ctx) { }, encapsulation: 2 });
var ɵNbDatepickerComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDatepickerComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDatepickerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-datepicker',
                template: ''
            }]
    }], null, { date: [{
            type: Input
        }], dateChange: [{
            type: Output
        }] }); })();
    return NbDatepickerComponent;
}(NbBasePickerComponent));
/**
 * The RangeDatePicker components itself.
 * Provides a proxy to `NbCalendarRange` options as well as custom picker options.
 */
var NbRangepickerComponent = /** @class */ (function (_super) {
    __extends(NbRangepickerComponent, _super);
    function NbRangepickerComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.pickerClass = NbCalendarRangeComponent;
        return _this;
    }
    Object.defineProperty(NbRangepickerComponent.prototype, "range", {
        /**
         * Range which will be rendered as selected.
         * */
        set: function (range) {
            this.value = range;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRangepickerComponent.prototype, "rangeChange", {
        /**
         * Emits range when start selected and emits again when end selected.
         * */
        get: function () {
            return this.valueChange;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRangepickerComponent.prototype, "value", {
        get: function () {
            return this.picker ? this.picker.range : undefined;
        },
        set: function (range) {
            if (!this.picker) {
                this.queue = range;
                return;
            }
            if (range) {
                var visibleDate = range && range.start;
                this.visibleDate = visibleDate;
                this.picker.visibleDate = visibleDate;
                this.picker.range = range;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRangepickerComponent.prototype, "pickerValueChange", {
        get: function () {
            return this.picker.rangeChange;
        },
        enumerable: true,
        configurable: true
    });
    NbRangepickerComponent.prototype.shouldHide = function () {
        return _super.prototype.shouldHide.call(this) && !!(this.value && this.value.start && this.value.end);
    };
    NbRangepickerComponent.prototype.writeQueue = function () {
        if (this.queue) {
            var range = this.queue;
            this.queue = null;
            this.value = range;
        }
    };
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbRangepickerComponent.prototype, "range", null);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter),
        __metadata("design:paramtypes", [])
    ], NbRangepickerComponent.prototype, "rangeChange", null);
NbRangepickerComponent.ɵfac = function NbRangepickerComponent_Factory(t) { return ɵNbRangepickerComponent_BaseFactory(t || NbRangepickerComponent); };
NbRangepickerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbRangepickerComponent, selectors: [["nb-rangepicker"]], inputs: { range: "range" }, outputs: { rangeChange: "rangeChange" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function NbRangepickerComponent_Template(rf, ctx) { }, encapsulation: 2 });
var ɵNbRangepickerComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbRangepickerComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRangepickerComponent, [{
        type: Component,
        args: [{
                selector: 'nb-rangepicker',
                template: ''
            }]
    }], null, { range: [{
            type: Input
        }], rangeChange: [{
            type: Output
        }] }); })();
    return NbRangepickerComponent;
}(NbBasePickerComponent));

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbDateAdapterService = /** @class */ (function (_super) {
    __extends(NbDateAdapterService, _super);
    function NbDateAdapterService(dateService) {
        var _this = _super.call(this) || this;
        _this.dateService = dateService;
        _this.picker = NbDatepickerComponent;
        return _this;
    }
    NbDateAdapterService.prototype.parse = function (date, format) {
        return this.dateService.parse(date, format);
    };
    NbDateAdapterService.prototype.format = function (date, format) {
        return this.dateService.format(date, format);
    };
    NbDateAdapterService.prototype.isValid = function (date, format) {
        return this.dateService.isValidDateString(date, format);
    };
    NbDateAdapterService = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbDateAdapterService);
NbDateAdapterService.ɵfac = function NbDateAdapterService_Factory(t) { return new (t || NbDateAdapterService)(ɵngcc0.ɵɵinject(NbDateService)); };
NbDateAdapterService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbDateAdapterService, factory: function (t) { return NbDateAdapterService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDateAdapterService, [{
        type: Injectable
    }], function () { return [{ type: NbDateService }]; }, null); })();
    return NbDateAdapterService;
}(NbDatepickerAdapter));
var NbRangeAdapterService = /** @class */ (function (_super) {
    __extends(NbRangeAdapterService, _super);
    function NbRangeAdapterService(dateService) {
        var _this = _super.call(this) || this;
        _this.dateService = dateService;
        _this.picker = NbRangepickerComponent;
        return _this;
    }
    NbRangeAdapterService.prototype.parse = function (range, format) {
        var _a = range.split('-').map(function (subDate) { return subDate.trim(); }), start = _a[0], end = _a[1];
        return {
            start: this.dateService.parse(start, format),
            end: this.dateService.parse(end, format),
        };
    };
    NbRangeAdapterService.prototype.format = function (range, format) {
        if (!range) {
            return '';
        }
        var start = this.dateService.format(range.start, format);
        var isStartValid = this.dateService.isValidDateString(start, format);
        if (!isStartValid) {
            return '';
        }
        var end = this.dateService.format(range.end, format);
        var isEndValid = this.dateService.isValidDateString(end, format);
        if (isEndValid) {
            return start + " - " + end;
        }
        else {
            return start;
        }
    };
    NbRangeAdapterService.prototype.isValid = function (range, format) {
        var _a = range.split('-').map(function (subDate) { return subDate.trim(); }), start = _a[0], end = _a[1];
        return this.dateService.isValidDateString(start, format) && this.dateService.isValidDateString(end, format);
    };
    NbRangeAdapterService = __decorate([ __metadata("design:paramtypes", [NbDateService])
    ], NbRangeAdapterService);
NbRangeAdapterService.ɵfac = function NbRangeAdapterService_Factory(t) { return new (t || NbRangeAdapterService)(ɵngcc0.ɵɵinject(NbDateService)); };
NbRangeAdapterService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbRangeAdapterService, factory: function (t) { return NbRangeAdapterService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRangeAdapterService, [{
        type: Injectable
    }], function () { return [{ type: NbDateService }]; }, null); })();
    return NbRangeAdapterService;
}(NbDatepickerAdapter));

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbDatepickerModule = /** @class */ (function () {
    function NbDatepickerModule() {
    }
    NbDatepickerModule_1 = NbDatepickerModule;
    NbDatepickerModule.forRoot = function () {
        return {
            ngModule: NbDatepickerModule_1,
            providers: [
                DatePipe,
                {
                    provide: NB_DATE_ADAPTER,
                    multi: true,
                    useClass: NbDateAdapterService,
                },
                {
                    provide: NB_DATE_ADAPTER,
                    multi: true,
                    useClass: NbRangeAdapterService,
                },
            ],
        };
    };
    var NbDatepickerModule_1;
NbDatepickerModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbDatepickerModule });
NbDatepickerModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbDatepickerModule_Factory(t) { return new (t || NbDatepickerModule)(); }, imports: [[NbOverlayModule, NbCalendarModule, NbCalendarRangeModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbDatepickerModule, { declarations: [NbDatepickerDirective,
        NbDatepickerContainerComponent,
        NbDatepickerComponent,
        NbRangepickerComponent,
        NbBasePickerComponent], imports: [NbOverlayModule,
        NbCalendarModule,
        NbCalendarRangeModule], exports: [NbDatepickerDirective,
        NbDatepickerComponent,
        NbRangepickerComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbDatepickerModule, [{
        type: NgModule,
        args: [{
                imports: [NbOverlayModule, NbCalendarModule, NbCalendarRangeModule],
                exports: [NbDatepickerDirective, NbDatepickerComponent, NbRangepickerComponent],
                declarations: [
                    NbDatepickerDirective,
                    NbDatepickerContainerComponent,
                    NbDatepickerComponent,
                    NbRangepickerComponent,
                    NbBasePickerComponent,
                ],
                entryComponents: [NbCalendarComponent, NbCalendarRangeComponent, NbDatepickerContainerComponent]
            }]
    }], function () { return []; }, null); })();
    return NbDatepickerModule;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbRadioComponent` provides the same functionality as native `<input type="radio">`
 * with Nebular styles and animations.
 *
 * @stacked-example(Showcase, radio/radio-showcase.component)
 *
 * ### Installation
 *
 * Import `NbRadioModule` to your feature module.
 *
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbRadioModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 *
 * ### Usage
 *
 * Radio buttons should be wrapped in `nb-radio-group` to provide form bindings.
 *
 * ```html
 * <nb-radio-group [(ngModel)]="selectedOption">
 *   <nb-radio value="1">Option 1</nb-radio>
 *   <nb-radio value="2">Option 2</nb-radio>
 *   <nb-radio value="3">Option 3</nb-radio>
 * </nb-radio-group>
 * ```
 *
 * You can disable some radios in the group using a `disabled` attribute.
 *
 * @stacked-example(Disabled, radio/radio-disabled.component)
 *
 *
 * @styles
 *
 * radio-width:
 * radio-height:
 * radio-border-style:
 * radio-border-width:
 * radio-text-font-family:
 * radio-text-font-size:
 * radio-text-font-weight:
 * radio-text-line-height:
 * radio-outline-color:
 * radio-outline-width:
 * radio-basic-text-color:
 * radio-basic-border-color:
 * radio-basic-background-color:
 * radio-basic-checked-background-color:
 * radio-basic-checked-border-color:
 * radio-basic-inner-circle-color:
 * radio-basic-focus-border-color:
 * radio-basic-focus-inner-circle-color:
 * radio-basic-hover-background-color:
 * radio-basic-hover-border-color:
 * radio-basic-hover-inner-circle-color:
 * radio-basic-hover-checked-background-color:
 * radio-basic-active-border-color:
 * radio-basic-active-inner-circle-color:
 * radio-basic-disabled-background-color:
 * radio-basic-disabled-border-color:
 * radio-basic-disabled-text-color:
 * radio-basic-disabled-checked-background-color:
 * radio-basic-disabled-checked-border-color:
 * radio-basic-disabled-checked-inner-circle-color:
 * radio-primary-text-color:
 * radio-primary-border-color:
 * radio-primary-background-color:
 * radio-primary-checked-background-color:
 * radio-primary-checked-border-color:
 * radio-primary-inner-circle-color:
 * radio-primary-focus-border-color:
 * radio-primary-focus-inner-circle-color:
 * radio-primary-hover-background-color:
 * radio-primary-hover-border-color:
 * radio-primary-hover-inner-circle-color:
 * radio-primary-hover-checked-background-color:
 * radio-primary-active-border-color:
 * radio-primary-active-inner-circle-color:
 * radio-primary-disabled-background-color:
 * radio-primary-disabled-border-color:
 * radio-primary-disabled-text-color:
 * radio-primary-disabled-checked-background-color:
 * radio-primary-disabled-checked-border-color:
 * radio-primary-disabled-checked-inner-circle-color:
 * radio-success-text-color:
 * radio-success-border-color:
 * radio-success-background-color:
 * radio-success-checked-background-color:
 * radio-success-checked-border-color:
 * radio-success-inner-circle-color:
 * radio-success-focus-border-color:
 * radio-success-focus-inner-circle-color:
 * radio-success-hover-background-color:
 * radio-success-hover-border-color:
 * radio-success-hover-inner-circle-color:
 * radio-success-hover-checked-background-color:
 * radio-success-active-border-color:
 * radio-success-active-inner-circle-color:
 * radio-success-disabled-background-color:
 * radio-success-disabled-border-color:
 * radio-success-disabled-text-color:
 * radio-success-disabled-checked-background-color:
 * radio-success-disabled-checked-border-color:
 * radio-success-disabled-checked-inner-circle-color:
 * radio-info-text-color:
 * radio-info-border-color:
 * radio-info-background-color:
 * radio-info-checked-background-color:
 * radio-info-checked-border-color:
 * radio-info-inner-circle-color:
 * radio-info-focus-border-color:
 * radio-info-focus-inner-circle-color:
 * radio-info-hover-background-color:
 * radio-info-hover-border-color:
 * radio-info-hover-inner-circle-color:
 * radio-info-hover-checked-background-color:
 * radio-info-active-border-color:
 * radio-info-active-inner-circle-color:
 * radio-info-disabled-background-color:
 * radio-info-disabled-border-color:
 * radio-info-disabled-text-color:
 * radio-info-disabled-checked-background-color:
 * radio-info-disabled-checked-border-color:
 * radio-info-disabled-checked-inner-circle-color:
 * radio-warning-text-color:
 * radio-warning-border-color:
 * radio-warning-background-color:
 * radio-warning-checked-background-color:
 * radio-warning-checked-border-color:
 * radio-warning-inner-circle-color:
 * radio-warning-focus-border-color:
 * radio-warning-focus-inner-circle-color:
 * radio-warning-hover-background-color:
 * radio-warning-hover-border-color:
 * radio-warning-hover-inner-circle-color:
 * radio-warning-hover-checked-background-color:
 * radio-warning-active-border-color:
 * radio-warning-active-inner-circle-color:
 * radio-warning-disabled-background-color:
 * radio-warning-disabled-border-color:
 * radio-warning-disabled-text-color:
 * radio-warning-disabled-checked-background-color:
 * radio-warning-disabled-checked-border-color:
 * radio-warning-disabled-checked-inner-circle-color:
 * radio-danger-text-color:
 * radio-danger-border-color:
 * radio-danger-background-color:
 * radio-danger-checked-background-color:
 * radio-danger-checked-border-color:
 * radio-danger-inner-circle-color:
 * radio-danger-focus-border-color:
 * radio-danger-focus-inner-circle-color:
 * radio-danger-hover-background-color:
 * radio-danger-hover-border-color:
 * radio-danger-hover-inner-circle-color:
 * radio-danger-hover-checked-background-color:
 * radio-danger-active-border-color:
 * radio-danger-active-inner-circle-color:
 * radio-danger-disabled-background-color:
 * radio-danger-disabled-border-color:
 * radio-danger-disabled-text-color:
 * radio-danger-disabled-checked-background-color:
 * radio-danger-disabled-checked-border-color:
 * radio-danger-disabled-checked-inner-circle-color:
 * radio-control-text-color:
 * radio-control-background-color:
 * radio-control-border-color:
 * radio-control-checked-background-color:
 * radio-control-checked-border-color:
 * radio-control-inner-circle-color:
 * radio-control-focus-border-color:
 * radio-control-focus-inner-circle-color:
 * radio-control-hover-background-color:
 * radio-control-hover-border-color:
 * radio-control-hover-inner-circle-color:
 * radio-control-hover-checked-background-color:
 * radio-control-active-border-color:
 * radio-control-active-inner-circle-color:
 * radio-control-disabled-background-color:
 * radio-control-disabled-border-color:
 * radio-control-disabled-text-color:
 * radio-control-disabled-checked-background-color:
 * radio-control-disabled-checked-border-color:
 * radio-control-disabled-checked-inner-circle-color:
 * */
var NbRadioComponent = /** @class */ (function () {
    function NbRadioComponent(cd, renderer) {
        this.cd = cd;
        this.renderer = renderer;
        this._checked = false;
        this._disabled = false;
        this._status = 'basic';
        this.valueChange = new EventEmitter();
        this.blur = new EventEmitter();
    }
    Object.defineProperty(NbRadioComponent.prototype, "name", {
        get: function () {
            return this._name;
        },
        set: function (value) {
            if (this._name !== value) {
                this._name = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "checked", {
        get: function () {
            return this._checked;
        },
        set: function (value) {
            var boolValue = convertToBoolProperty(value);
            if (this._checked !== boolValue) {
                this._checked = boolValue;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (value) {
            if (this._value !== value) {
                this._value = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "disabled", {
        get: function () {
            return this._disabled;
        },
        set: function (disabled) {
            var boolValue = convertToBoolProperty(disabled);
            if (this._disabled !== boolValue) {
                this._disabled = boolValue;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "status", {
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbRadio');
                value = 'basic';
            }
            if (this._status !== value) {
                this._status = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "isPrimary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "isSuccess", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "isWarning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "isDanger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "isInfo", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "isBasic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioComponent.prototype, "isControl", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    NbRadioComponent.prototype.onChange = function (event) {
        event.stopPropagation();
        this.checked = true;
        this.valueChange.emit(this.value);
    };
    NbRadioComponent.prototype.onClick = function (event) {
        event.stopPropagation();
    };
    /*
     * @docs-private
     * We use this method when setting radio inputs from radio group component.
     * Otherwise Angular won't detect changes in radio template as cached last rendered
     * value didn't updated.
     **/
    NbRadioComponent.prototype._markForCheck = function () {
        this.cd.markForCheck();
    };
    /*
     * @docs-private
     * Use this method when setting radio name from radio group component.
     * In case option 'name' isn't set on nb-radio component we need to set name
     * right away, so it won't overlap with options without names from other radio
     * groups. Otherwise they all would have same name and will be considered as
     * options from one group so only the last option will stay selected.
     **/
    NbRadioComponent.prototype._setName = function (name) {
        this.name = name;
        if (this.input) {
            this.renderer.setProperty(this.input.nativeElement, 'name', name);
        }
    };
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbRadioComponent.prototype, "name", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbRadioComponent.prototype, "checked", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbRadioComponent.prototype, "value", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbRadioComponent.prototype, "disabled", null);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbRadioComponent.prototype, "status", null);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbRadioComponent.prototype, "valueChange", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbRadioComponent.prototype, "blur", void 0);
    __decorate([
        ViewChild('input', { read: ElementRef }),
        __metadata("design:type", ElementRef)
    ], NbRadioComponent.prototype, "input", void 0);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbRadioComponent.prototype, "isPrimary", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbRadioComponent.prototype, "isSuccess", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbRadioComponent.prototype, "isWarning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbRadioComponent.prototype, "isDanger", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbRadioComponent.prototype, "isInfo", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbRadioComponent.prototype, "isBasic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], NbRadioComponent.prototype, "isControl", null);
    NbRadioComponent = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef,
            Renderer2])
    ], NbRadioComponent);
NbRadioComponent.ɵfac = function NbRadioComponent_Factory(t) { return new (t || NbRadioComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
NbRadioComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbRadioComponent, selectors: [["nb-radio"]], viewQuery: function NbRadioComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c45, true, ElementRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);
    } }, hostVars: 14, hostBindings: function NbRadioComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("status-primary", ctx.isPrimary)("status-success", ctx.isSuccess)("status-warning", ctx.isWarning)("status-danger", ctx.isDanger)("status-info", ctx.isInfo)("status-basic", ctx.isBasic)("status-control", ctx.isControl);
    } }, inputs: { name: "name", checked: "checked", value: "value", disabled: "disabled", status: "status" }, outputs: { valueChange: "valueChange", blur: "blur" }, ngContentSelectors: _c0, decls: 7, vars: 4, consts: [["type", "radio", 1, "native-input", "visually-hidden", 3, "name", "value", "checked", "disabled", "change", "click"], ["input", ""], [1, "outer-circle"], [1, "inner-circle"], [1, "text"]], template: function NbRadioComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label");
        ɵngcc0.ɵɵelementStart(1, "input", 0, 1);
        ɵngcc0.ɵɵlistener("change", function NbRadioComponent_Template_input_change_1_listener($event) { return ctx.onChange($event); })("click", function NbRadioComponent_Template_input_click_1_listener($event) { return ctx.onClick($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(3, "span", 2);
        ɵngcc0.ɵɵelement(4, "span", 3);
        ɵngcc0.ɵɵelementStart(5, "span", 4);
        ɵngcc0.ɵɵprojection(6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("name", ctx.name)("value", ctx.value)("checked", ctx.checked)("disabled", ctx.disabled);
    } }, styles: ["[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{display:inline-flex;margin:0;min-height:inherit;padding:0.375rem 0;align-items:center}[dir=ltr]   [_nghost-%COMP%]   label[_ngcontent-%COMP%]{padding-right:1.5rem}[dir=rtl]   [_nghost-%COMP%]   label[_ngcontent-%COMP%]{padding-left:1.5rem}[_nghost-%COMP%]   .outer-circle[_ngcontent-%COMP%], [_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{border-radius:50%;position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr]   [_nghost-%COMP%]   .outer-circle[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{left:0}[dir=rtl]   [_nghost-%COMP%]   .outer-circle[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{right:0}[_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{transform:translateY(-50%) scale(0.6)}[dir=ltr]   [_nghost-%COMP%]   .text[_ngcontent-%COMP%]{padding-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .text[_ngcontent-%COMP%]{padding-right:.5rem}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRadioComponent, [{
        type: Component,
        args: [{
                selector: 'nb-radio',
                template: "\n    <label>\n      <input\n        #input\n        type=\"radio\"\n        class=\"native-input visually-hidden\"\n        [name]=\"name\"\n        [value]=\"value\"\n        [checked]=\"checked\"\n        [disabled]=\"disabled\"\n        (change)=\"onChange($event)\"\n        (click)=\"onClick($event)\">\n      <span class=\"outer-circle\"></span>\n      <span class=\"inner-circle\"></span>\n      <span class=\"text\">\n        <ng-content></ng-content>\n      </span>\n    </label>\n  ",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:block;position:relative}:host label{display:inline-flex;margin:0;min-height:inherit;padding:0.375rem 0;align-items:center}[dir=ltr] :host label{padding-right:1.5rem}[dir=rtl] :host label{padding-left:1.5rem}:host .outer-circle,:host .inner-circle{border-radius:50%;position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr] :host .outer-circle,[dir=ltr] :host .inner-circle{left:0}[dir=rtl] :host .outer-circle,[dir=rtl] :host .inner-circle{right:0}:host .inner-circle{transform:translateY(-50%) scale(0.6)}[dir=ltr] :host .text{padding-left:.5rem}[dir=rtl] :host .text{padding-right:.5rem}\n"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.Renderer2 }]; }, { valueChange: [{
            type: Output
        }], blur: [{
            type: Output
        }], name: [{
            type: Input
        }], checked: [{
            type: Input
        }], value: [{
            type: Input
        }], disabled: [{
            type: Input
        }], status: [{
            type: Input
        }], isPrimary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], isSuccess: [{
            type: HostBinding,
            args: ['class.status-success']
        }], isWarning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], isDanger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], isInfo: [{
            type: HostBinding,
            args: ['class.status-info']
        }], isBasic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], isControl: [{
            type: HostBinding,
            args: ['class.status-control']
        }], input: [{
            type: ViewChild,
            args: ['input', { read: ElementRef }]
        }] }); })();
    return NbRadioComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * The `NbRadioGroupComponent` is the wrapper for `nb-radio` button.
 * It provides form bindings:
 *
 * ```html
 * <nb-radio-group [(ngModel)]="selectedOption">
 *   <nb-radio value="1">Option 1</nb-radio>
 *   <nb-radio value="2">Option 2</nb-radio>
 *   <nb-radio value="3">Option 3</nb-radio>
 * </nb-radio-group>
 * ```
 *
 * Also, you can use `value` and `valueChange` for binding without forms.
 *
 * ```html
 * <nb-radio-group [(value)]="selectedOption">
 *   <nb-radio value="1">Option 1</nb-radio>
 *   <nb-radio value="2">Option 2</nb-radio>
 *   <nb-radio value="3">Option 3</nb-radio>
 * </nb-radio-group>
 * ```
 *
 * Radio items name has to be provided through `name` input property of the radio group.
 *
 * ```html
 * <nb-radio-group name="my-radio-group">
 *   ...
 * </nb-radio-group>
 * ```
 *
 * You can change radio group status by setting `status` input.
 * @stacked-example(Statuses, radio/radio-statuses.component)
 *
 * Also, you can disable the whole group using `disabled` attribute.
 * @stacked-example(Disabled group, radio/radio-disabled-group.component)
 *
 * */
var NbRadioGroupComponent = /** @class */ (function () {
    function NbRadioGroupComponent(hostElement, platformId, document) {
        this.hostElement = hostElement;
        this.platformId = platformId;
        this.document = document;
        this.destroy$ = new Subject();
        this.onChange = function (value) { };
        this.onTouched = function () { };
        this._status = 'basic';
        this.valueChange = new EventEmitter();
    }
    NbRadioGroupComponent_1 = NbRadioGroupComponent;
    Object.defineProperty(NbRadioGroupComponent.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (value) {
            this._value = value;
            this.updateValues();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioGroupComponent.prototype, "name", {
        get: function () {
            return this._name;
        },
        set: function (name) {
            this._name = name;
            this.updateNames();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioGroupComponent.prototype, "disabled", {
        get: function () {
            return this._disabled;
        },
        set: function (disabled) {
            this._disabled = convertToBoolProperty(disabled);
            this.updateDisabled();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbRadioGroupComponent.prototype, "status", {
        /**
         * Radio buttons status.
         * Possible values are `primary` (default), `success`, `warning`, `danger`, `info`.
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbRadio');
                value = 'basic';
            }
            if (this._status !== value) {
                this._status = value;
                this.updateStatus();
            }
        },
        enumerable: true,
        configurable: true
    });
    NbRadioGroupComponent.prototype.ngAfterContentInit = function () {
        var _this = this;
        // In case option 'name' isn't set on nb-radio component,
        // we need to set it's name right away, so it won't overlap with options
        // without names from other radio groups. Otherwise they all would have
        // same name and will be considered as options from one group so only the
        // last option will stay selected.
        this.updateNames();
        Promise.resolve().then(function () { return _this.updateAndSubscribeToRadios(); });
        this.radios.changes
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () {
            // 'changes' emit during change detection run and we can't update
            // option properties right of since they already was initialized.
            // Instead we schedule microtask to update radios after change detection
            // run is finished.
            Promise.resolve().then(function () { return _this.updateAndSubscribeToRadios(); });
        });
    };
    NbRadioGroupComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbRadioGroupComponent.prototype.registerOnChange = function (fn) {
        this.onChange = fn;
    };
    NbRadioGroupComponent.prototype.registerOnTouched = function (fn) {
        this.onTouched = fn;
    };
    NbRadioGroupComponent.prototype.writeValue = function (value) {
        this.value = value;
        if (typeof value !== 'undefined') {
            this.updateValues();
        }
    };
    NbRadioGroupComponent.prototype.updateAndSubscribeToRadios = function () {
        this.updateNames();
        this.updateValues();
        this.updateDisabled();
        this.updateStatus();
        this.subscribeOnRadiosValueChange();
        this.subscribeOnRadiosBlur();
    };
    NbRadioGroupComponent.prototype.updateNames = function () {
        var _this = this;
        if (this.radios) {
            this.radios.forEach(function (radio) { return radio._setName(_this.name); });
        }
    };
    NbRadioGroupComponent.prototype.updateValues = function () {
        var _this = this;
        if (typeof this.value !== 'undefined') {
            this.updateAndMarkForCheckRadios(function (radio) { return radio.checked = radio.value === _this.value; });
        }
    };
    NbRadioGroupComponent.prototype.updateDisabled = function () {
        var _this = this;
        if (typeof this.disabled !== 'undefined') {
            this.updateAndMarkForCheckRadios(function (radio) { return radio.disabled = _this.disabled; });
        }
    };
    NbRadioGroupComponent.prototype.subscribeOnRadiosValueChange = function () {
        var _this = this;
        if (!this.radios || !this.radios.length) {
            return;
        }
        merge.apply(void 0, this.radios.map(function (radio) { return radio.valueChange; })).pipe(takeUntil(merge(this.radios.changes, this.destroy$)))
            .subscribe(function (value) {
            _this.writeValue(value);
            _this.propagateValue(value);
        });
    };
    NbRadioGroupComponent.prototype.propagateValue = function (value) {
        this.valueChange.emit(value);
        this.onChange(value);
    };
    NbRadioGroupComponent.prototype.subscribeOnRadiosBlur = function () {
        var _this = this;
        var hasNoRadios = !this.radios || !this.radios.length;
        if (!isPlatformBrowser(this.platformId) || hasNoRadios) {
            return;
        }
        var hostElement = this.hostElement.nativeElement;
        fromEvent(hostElement, 'focusin')
            .pipe(filter(function (event) { return hostElement.contains(event.target); }), switchMap(function () { return merge(fromEvent(_this.document, 'focusin'), fromEvent(_this.document, 'click')); }), filter(function (event) { return !hostElement.contains(event.target); }), takeUntil(merge(this.radios.changes, this.destroy$)))
            .subscribe(function () { return _this.onTouched(); });
    };
    NbRadioGroupComponent.prototype.updateStatus = function () {
        var _this = this;
        this.updateAndMarkForCheckRadios(function (radio) { return radio.status = _this.status; });
    };
    NbRadioGroupComponent.prototype.updateAndMarkForCheckRadios = function (updateFn) {
        if (this.radios) {
            this.radios.forEach(function (radio) {
                updateFn(radio);
                radio._markForCheck();
            });
        }
    };
    var NbRadioGroupComponent_1;
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbRadioGroupComponent.prototype, "value", null);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbRadioGroupComponent.prototype, "name", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbRadioGroupComponent.prototype, "disabled", null);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbRadioGroupComponent.prototype, "status", null);
    __decorate([
        ContentChildren(NbRadioComponent, { descendants: true }),
        __metadata("design:type", QueryList)
    ], NbRadioGroupComponent.prototype, "radios", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbRadioGroupComponent.prototype, "valueChange", void 0);
    NbRadioGroupComponent = NbRadioGroupComponent_1 = __decorate([ __param(1, Inject(PLATFORM_ID)),
        __param(2, Inject(NB_DOCUMENT)),
        __metadata("design:paramtypes", [ElementRef, Object, Object])
    ], NbRadioGroupComponent);
NbRadioGroupComponent.ɵfac = function NbRadioGroupComponent_Factory(t) { return new (t || NbRadioGroupComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT)); };
NbRadioGroupComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbRadioGroupComponent, selectors: [["nb-radio-group"]], contentQueries: function NbRadioGroupComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbRadioComponent, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.radios = _t);
    } }, inputs: { value: "value", name: "name", disabled: "disabled", status: "status" }, outputs: { valueChange: "valueChange" }, features: [ɵngcc0.ɵɵProvidersFeature([
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(function () { return NbRadioGroupComponent_1; }),
                multi: true
            },
        ])], ngContentSelectors: _c47, decls: 1, vars: 0, template: function NbRadioGroupComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c46);
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRadioGroupComponent, [{
        type: Component,
        args: [{
                selector: 'nb-radio-group',
                template: "\n    <ng-content select=\"nb-radio\"></ng-content>",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(function () { return NbRadioGroupComponent_1; }),
                        multi: true
                    },
                ],
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: Object, decorators: [{
                type: Inject,
                args: [PLATFORM_ID]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }]; }, { valueChange: [{
            type: Output
        }], value: [{
            type: Input
        }], name: [{
            type: Input
        }], disabled: [{
            type: Input
        }], status: [{
            type: Input
        }], radios: [{
            type: ContentChildren,
            args: [NbRadioComponent, { descendants: true }]
        }] }); })();
    return NbRadioGroupComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbRadioModule = /** @class */ (function () {
    function NbRadioModule() {
    }
NbRadioModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbRadioModule });
NbRadioModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbRadioModule_Factory(t) { return new (t || NbRadioModule)(); }, imports: [[]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbRadioModule, { declarations: [NbRadioComponent,
        NbRadioGroupComponent], exports: [NbRadioComponent,
        NbRadioGroupComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbRadioModule, [{
        type: NgModule,
        args: [{
                imports: [],
                exports: [NbRadioComponent, NbRadioGroupComponent],
                declarations: [NbRadioComponent, NbRadioGroupComponent]
            }]
    }], function () { return []; }, null); })();
    return NbRadioModule;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_DEFAULT_ROW_LEVEL = 0;
/**
 * Implicit context of cells and rows
 */
var NbTreeGridPresentationNode = /** @class */ (function () {
    function NbTreeGridPresentationNode(
    /**
     * Data object associated with row
     */
    data, children, 
    /**
     * Row expand state
     */
    expanded, level) {
        this.data = data;
        this.children = children;
        this.expanded = expanded;
        this.level = level;
    }
    /**
     * True if row has child rows
     */
    NbTreeGridPresentationNode.prototype.hasChildren = function () {
        return !!this.children && !!this.children.length;
    };
    return NbTreeGridPresentationNode;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbTreeGridDataService = /** @class */ (function () {
    function NbTreeGridDataService() {
        this.defaultGetters = {
            dataGetter: function (node) { return node.data; },
            childrenGetter: function (d) { return d.children || undefined; },
            expandedGetter: function (d) { return !!d.expanded; },
        };
    }
    NbTreeGridDataService.prototype.toPresentationNodes = function (nodes, customGetters, level) {
        if (level === void 0) { level = NB_DEFAULT_ROW_LEVEL; }
        var getters = __assign(__assign({}, this.defaultGetters), customGetters);
        return this.mapNodes(nodes, getters, level);
    };
    NbTreeGridDataService.prototype.mapNodes = function (nodes, getters, level) {
        var _this = this;
        var dataGetter = getters.dataGetter, childrenGetter = getters.childrenGetter, expandedGetter = getters.expandedGetter;
        return nodes.map(function (node) {
            var childrenNodes = childrenGetter(node);
            var children;
            if (childrenNodes) {
                children = _this.toPresentationNodes(childrenNodes, getters, level + 1);
            }
            return new NbTreeGridPresentationNode(dataGetter(node), children, expandedGetter(node), level);
        });
    };
    NbTreeGridDataService.prototype.flattenExpanded = function (nodes) {
        var _this = this;
        return nodes.reduce(function (res, node) {
            res.push(node);
            if (node.expanded && node.hasChildren()) {
                res.push.apply(res, _this.flattenExpanded(node.children));
            }
            return res;
        }, []);
    };
    NbTreeGridDataService.prototype.copy = function (nodes) {
        var _this = this;
        return nodes.map(function (node) {
            var children;
            if (node.hasChildren()) {
                children = _this.copy(node.children);
            }
            return new NbTreeGridPresentationNode(node.data, children, node.expanded, node.level);
        });
    };
NbTreeGridDataService.ɵfac = function NbTreeGridDataService_Factory(t) { return new (t || NbTreeGridDataService)(); };
NbTreeGridDataService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbTreeGridDataService, factory: function (t) { return NbTreeGridDataService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridDataService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbTreeGridDataService;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Service used to filter tree grid data. Searched searchString in all object values.
 * If you need custom filter, you can extend this service and override filterPredicate or whole filter method.
 */
var NbTreeGridFilterService = /** @class */ (function () {
    function NbTreeGridFilterService() {
    }
    NbTreeGridFilterService.prototype.filter = function (query, data) {
        var _this = this;
        if (!query) {
            return data;
        }
        return data.reduce(function (filtered, node) {
            var filteredChildren;
            if (node.children) {
                filteredChildren = _this.filter(query, node.children);
                node.children = filteredChildren;
            }
            node.expanded = false;
            if (filteredChildren && filteredChildren.length) {
                node.expanded = true;
                filtered.push(node);
            }
            else if (_this.filterPredicate(node.data, query)) {
                filtered.push(node);
            }
            return filtered;
        }, []);
    };
    NbTreeGridFilterService.prototype.filterPredicate = function (data, searchQuery) {
        var preparedQuery = searchQuery.trim().toLocaleLowerCase();
        for (var _i = 0, _a = Object.values(data); _i < _a.length; _i++) {
            var val = _a[_i];
            var preparedVal = ("" + val).trim().toLocaleLowerCase();
            if (preparedVal.includes(preparedQuery)) {
                return true;
            }
        }
        return false;
    };
NbTreeGridFilterService.ɵfac = function NbTreeGridFilterService_Factory(t) { return new (t || NbTreeGridFilterService)(); };
NbTreeGridFilterService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbTreeGridFilterService, factory: function (t) { return NbTreeGridFilterService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridFilterService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbTreeGridFilterService;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbSortDirection;
(function (NbSortDirection) {
    NbSortDirection["ASCENDING"] = "asc";
    NbSortDirection["DESCENDING"] = "desc";
    NbSortDirection["NONE"] = "";
})(NbSortDirection || (NbSortDirection = {}));
var sortDirections = [
    NbSortDirection.ASCENDING,
    NbSortDirection.DESCENDING,
    NbSortDirection.NONE,
];
/**
 * Directive triggers sort method of passed object when sort header changes direction
 */
var NbSortDirective = /** @class */ (function () {
    function NbSortDirective() {
        this.sort = new EventEmitter();
    }
    NbSortDirective.prototype.emitSort = function (sortRequest) {
        if (this.sortable && this.sortable.sort) {
            this.sortable.sort(sortRequest);
        }
        this.sort.emit(sortRequest);
    };
    __decorate([
        Input('nbSort'),
        __metadata("design:type", Object)
    ], NbSortDirective.prototype, "sortable", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], NbSortDirective.prototype, "sort", void 0);
NbSortDirective.ɵfac = function NbSortDirective_Factory(t) { return new (t || NbSortDirective)(); };
NbSortDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbSortDirective, selectors: [["", "nbSort", ""]], inputs: { sortable: ["nbSort", "sortable"] }, outputs: { sort: "sort" } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSortDirective, [{
        type: Directive,
        args: [{ selector: '[nbSort]' }]
    }], function () { return []; }, { sort: [{
            type: Output
        }], sortable: [{
            type: Input,
            args: ['nbSort']
        }] }); })();
    return NbSortDirective;
}());
/**
 * Directive for headers sort icons. Mark you icon implementation with this structural directive and
 * it'll set template's implicit context with current direction. Context also has `isAscending`,
 * `isDescending` and `isNone` properties.
 */
var NbSortHeaderIconDirective = /** @class */ (function () {
    function NbSortHeaderIconDirective() {
    }
NbSortHeaderIconDirective.ɵfac = function NbSortHeaderIconDirective_Factory(t) { return new (t || NbSortHeaderIconDirective)(); };
NbSortHeaderIconDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbSortHeaderIconDirective, selectors: [["", "nbSortHeaderIcon", ""]] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSortHeaderIconDirective, [{
        type: Directive,
        args: [{ selector: '[nbSortHeaderIcon]' }]
    }], function () { return []; }, null); })();
    return NbSortHeaderIconDirective;
}());
var NbSortIconComponent = /** @class */ (function () {
    function NbSortIconComponent() {
        this.direction = NbSortDirection.NONE;
    }
    NbSortIconComponent.prototype.isAscending = function () {
        return this.direction === NbSortDirection.ASCENDING;
    };
    NbSortIconComponent.prototype.isDescending = function () {
        return this.direction === NbSortDirection.DESCENDING;
    };
    NbSortIconComponent.prototype.isDirectionSet = function () {
        return this.isAscending() || this.isDescending();
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbSortIconComponent.prototype, "direction", void 0);
NbSortIconComponent.ɵfac = function NbSortIconComponent_Factory(t) { return new (t || NbSortIconComponent)(); };
NbSortIconComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSortIconComponent, selectors: [["nb-sort-icon"]], inputs: { direction: "direction" }, decls: 1, vars: 1, consts: [[4, "ngIf"], ["icon", "chevron-down-outline", "pack", "nebular-essentials", "aria-hidden", "true", 4, "ngIf"], ["icon", "chevron-up-outline", "pack", "nebular-essentials", "aria-hidden", "true", 4, "ngIf"], ["icon", "chevron-down-outline", "pack", "nebular-essentials", "aria-hidden", "true"], ["icon", "chevron-up-outline", "pack", "nebular-essentials", "aria-hidden", "true"]], template: function NbSortIconComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NbSortIconComponent_ng_container_0_Template, 3, 2, "ng-container", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.isDirectionSet());
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSortIconComponent, [{
        type: Component,
        args: [{
                selector: 'nb-sort-icon',
                template: "\n    <ng-container *ngIf=\"isDirectionSet()\">\n      <nb-icon *ngIf=\"isAscending()\" icon=\"chevron-down-outline\" pack=\"nebular-essentials\" aria-hidden=\"true\"></nb-icon>\n      <nb-icon *ngIf=\"isDescending()\" icon=\"chevron-up-outline\" pack=\"nebular-essentials\" aria-hidden=\"true\"></nb-icon>\n    </ng-container>\n  "
            }]
    }], function () { return []; }, { direction: [{
            type: Input
        }] }); })();
    return NbSortIconComponent;
}());
/**
 * Marks header as sort header so it emitting sort event when clicked.
 */
var NbSortHeaderComponent = /** @class */ (function () {
    function NbSortHeaderComponent(sort, columnDef) {
        this.sort = sort;
        this.columnDef = columnDef;
        this.disabledValue = false;
    }
    Object.defineProperty(NbSortHeaderComponent.prototype, "disabled", {
        get: function () {
            return this.disabledValue;
        },
        /**
         * Disable sort header
         */
        set: function (value) {
            this.disabledValue = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbSortHeaderComponent.prototype.sortIfEnabled = function () {
        if (!this.disabled) {
            this.sortData();
        }
    };
    NbSortHeaderComponent.prototype.isAscending = function () {
        return this.direction === NbSortDirection.ASCENDING;
    };
    NbSortHeaderComponent.prototype.isDescending = function () {
        return this.direction === NbSortDirection.DESCENDING;
    };
    NbSortHeaderComponent.prototype.sortData = function () {
        var sortRequest = this.createSortRequest();
        this.sort.emitSort(sortRequest);
    };
    NbSortHeaderComponent.prototype.getIconContext = function () {
        return {
            $implicit: this.direction,
            isAscending: this.isAscending(),
            isDescending: this.isDescending(),
            isNone: !this.isAscending() && !this.isDescending(),
        };
    };
    NbSortHeaderComponent.prototype.getDisabledAttributeValue = function () {
        return this.disabled ? '' : null;
    };
    NbSortHeaderComponent.prototype.createSortRequest = function () {
        this.direction = this.getNextDirection();
        return { direction: this.direction, column: this.columnDef.name };
    };
    NbSortHeaderComponent.prototype.getNextDirection = function () {
        var sortDirectionCycle = sortDirections;
        var nextDirectionIndex = sortDirectionCycle.indexOf(this.direction) + 1;
        if (nextDirectionIndex >= sortDirectionCycle.length) {
            nextDirectionIndex = 0;
        }
        return sortDirectionCycle[nextDirectionIndex];
    };
    __decorate([
        ContentChild(NbSortHeaderIconDirective, { read: TemplateRef }),
        __metadata("design:type", TemplateRef)
    ], NbSortHeaderComponent.prototype, "sortIcon", void 0);
    __decorate([
        Input('nbSortHeader'),
        __metadata("design:type", String)
    ], NbSortHeaderComponent.prototype, "direction", void 0);
    __decorate([
        Input(),
        HostBinding('class.disabled'),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Object])
    ], NbSortHeaderComponent.prototype, "disabled", null);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbSortHeaderComponent.prototype, "sortIfEnabled", null);
    NbSortHeaderComponent = __decorate([ __param(1, Inject(NB_SORT_HEADER_COLUMN_DEF)),
        __metadata("design:paramtypes", [NbSortDirective, Object])
    ], NbSortHeaderComponent);
NbSortHeaderComponent.ɵfac = function NbSortHeaderComponent_Factory(t) { return new (t || NbSortHeaderComponent)(ɵngcc0.ɵɵdirectiveInject(NbSortDirective), ɵngcc0.ɵɵdirectiveInject(NB_SORT_HEADER_COLUMN_DEF)); };
NbSortHeaderComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbSortHeaderComponent, selectors: [["", "nbSortHeader", ""]], contentQueries: function NbSortHeaderComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbSortHeaderIconDirective, true, TemplateRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.sortIcon = _t.first);
    } }, hostVars: 2, hostBindings: function NbSortHeaderComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbSortHeaderComponent_click_HostBindingHandler() { return ctx.sortIfEnabled(); });
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("disabled", ctx.disabled);
    } }, inputs: { disabled: "disabled", direction: ["nbSortHeader", "direction"] }, attrs: _c48, ngContentSelectors: _c0, decls: 5, vars: 5, consts: [["type", "button", 1, "nb-tree-grid-header-change-sort-button", 3, "click"], [3, "direction", 4, "ngIf", "ngIfElse"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["customIcon", ""], [3, "direction"]], template: function NbSortHeaderComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "button", 0);
        ɵngcc0.ɵɵlistener("click", function NbSortHeaderComponent_Template_button_click_0_listener() { return ctx.sortData(); });
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(2, NbSortHeaderComponent_nb_sort_icon_2_Template, 1, 1, "nb-sort-icon", 1);
        ɵngcc0.ɵɵtemplate(3, NbSortHeaderComponent_ng_template_3_Template, 0, 0, "ng-template", 2, 3, ɵngcc0.ɵɵtemplateRefExtractor);
    } if (rf & 2) {
        var _r1 = ɵngcc0.ɵɵreference(4);
        ɵngcc0.ɵɵattribute("disabled", ctx.getDisabledAttributeValue());
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.sortIcon)("ngIfElse", _r1);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx.sortIcon)("ngTemplateOutletContext", ctx.getIconContext());
    } }, directives: [ɵngcc2.NgIf, ɵngcc2.NgTemplateOutlet, NbSortIconComponent], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSortHeaderComponent, [{
        type: Component,
        args: [{
                selector: '[nbSortHeader]',
                template: "\n    <button\n      class=\"nb-tree-grid-header-change-sort-button\"\n      type=\"button\"\n      [attr.disabled]=\"getDisabledAttributeValue()\"\n      (click)=\"sortData()\">\n      <ng-content></ng-content>\n    </button>\n    <nb-sort-icon *ngIf=\"!sortIcon; else customIcon\" [direction]=\"direction\"></nb-sort-icon>\n    <ng-template #customIcon [ngTemplateOutlet]=\"sortIcon\" [ngTemplateOutletContext]=\"getIconContext()\"></ng-template>\n  "
            }]
    }], function () { return [{ type: NbSortDirective }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_SORT_HEADER_COLUMN_DEF]
            }] }]; }, { disabled: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.disabled']
        }], sortIfEnabled: [{
            type: HostListener,
            args: ['click']
        }], direction: [{
            type: Input,
            args: ['nbSortHeader']
        }], sortIcon: [{
            type: ContentChild,
            args: [NbSortHeaderIconDirective, { read: TemplateRef }]
        }] }); })();
    return NbSortHeaderComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Service used to sort tree grid data. Uses Array.prototype.sort method.
 * If you need custom sorting, you can extend this service and override comparator or whole sort method.
 */
var NbTreeGridSortService = /** @class */ (function () {
    function NbTreeGridSortService() {
    }
    NbTreeGridSortService.prototype.sort = function (request, data) {
        var _this = this;
        if (!request) {
            return data;
        }
        var sorted = data.sort(function (na, nb) { return _this.comparator(request, na, nb); });
        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
            var node = data_1[_i];
            if (node.children) {
                node.children = this.sort(request, node.children);
            }
        }
        return sorted;
    };
    NbTreeGridSortService.prototype.comparator = function (request, na, nb) {
        var key = request.column;
        var dir = request.direction;
        var a = na.data[key];
        var b = nb.data[key];
        var res = 0;
        if (a > b) {
            res = 1;
        }
        if (a < b) {
            res = -1;
        }
        return dir === NbSortDirection.ASCENDING ? res : res * -1;
    };
NbTreeGridSortService.ɵfac = function NbTreeGridSortService_Factory(t) { return new (t || NbTreeGridSortService)(); };
NbTreeGridSortService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbTreeGridSortService, factory: function (t) { return NbTreeGridSortService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridSortService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbTreeGridSortService;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbTreeGridService = /** @class */ (function () {
    function NbTreeGridService() {
    }
    NbTreeGridService.prototype.expand = function (data, row, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        var node = this.find(data, row);
        node.expanded = true;
        if (options.deep && node.hasChildren()) {
            node.children.forEach(function (n) { return _this.expand(data, n.data, options); });
        }
    };
    NbTreeGridService.prototype.collapse = function (data, row, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        var node = this.find(data, row);
        node.expanded = false;
        if (options.deep && node.hasChildren()) {
            node.children.forEach(function (n) { return _this.collapse(data, n.data, options); });
        }
    };
    NbTreeGridService.prototype.toggle = function (data, row, options) {
        if (options === void 0) { options = {}; }
        var node = this.find(data, row);
        if (node.expanded) {
            this.collapse(data, row, options);
        }
        else {
            this.expand(data, row, options);
        }
    };
    NbTreeGridService.prototype.find = function (data, row) {
        var toCheck = __spreadArrays(data);
        for (var _i = 0, toCheck_1 = toCheck; _i < toCheck_1.length; _i++) {
            var node = toCheck_1[_i];
            if (node.data === row) {
                return node;
            }
            if (node.hasChildren()) {
                toCheck.push.apply(toCheck, node.children);
            }
        }
    };
NbTreeGridService.ɵfac = function NbTreeGridService_Factory(t) { return new (t || NbTreeGridService)(); };
NbTreeGridService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbTreeGridService, factory: function (t) { return NbTreeGridService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridService, [{
        type: Injectable
    }], function () { return []; }, null); })();
    return NbTreeGridService;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbTreeGridDataSource = /** @class */ (function (_super) {
    __extends(NbTreeGridDataSource, _super);
    function NbTreeGridDataSource(sortService, filterService, treeGridService, treeGridDataService) {
        var _this = _super.call(this) || this;
        _this.sortService = sortService;
        _this.filterService = filterService;
        _this.treeGridService = treeGridService;
        _this.treeGridDataService = treeGridDataService;
        /** Stream emitting render data to the table (depends on ordered data changes). */
        _this.renderData = new BehaviorSubject([]);
        _this.filterRequest = new BehaviorSubject('');
        _this.sortRequest = new BehaviorSubject(null);
        return _this;
    }
    NbTreeGridDataSource.prototype.setData = function (data, customGetters) {
        var presentationData = [];
        if (data) {
            presentationData = this.treeGridDataService.toPresentationNodes(data, customGetters);
        }
        this.data = new BehaviorSubject(presentationData);
        this.updateChangeSubscription();
    };
    NbTreeGridDataSource.prototype.connect = function (collectionViewer) {
        return this.renderData;
    };
    NbTreeGridDataSource.prototype.disconnect = function (collectionViewer) {
    };
    NbTreeGridDataSource.prototype.expand = function (row) {
        this.treeGridService.expand(this.data.value, row);
        this.data.next(this.data.value);
    };
    NbTreeGridDataSource.prototype.collapse = function (row) {
        this.treeGridService.collapse(this.data.value, row);
        this.data.next(this.data.value);
    };
    NbTreeGridDataSource.prototype.toggle = function (row, options) {
        this.treeGridService.toggle(this.data.value, row, options);
        this.data.next(this.data.value);
    };
    NbTreeGridDataSource.prototype.toggleByIndex = function (dataIndex, options) {
        var node = this.renderData.value && this.renderData.value[dataIndex];
        if (node) {
            this.toggle(node.data, options);
        }
    };
    NbTreeGridDataSource.prototype.getLevel = function (rowIndex) {
        var row = this.renderData.value[rowIndex];
        return row ? row.level : NB_DEFAULT_ROW_LEVEL;
    };
    NbTreeGridDataSource.prototype.sort = function (sortRequest) {
        this.sortRequest.next(sortRequest);
    };
    NbTreeGridDataSource.prototype.filter = function (searchQuery) {
        this.filterRequest.next(searchQuery);
    };
    NbTreeGridDataSource.prototype.updateChangeSubscription = function () {
        var _this = this;
        var dataStream = this.data;
        var filteredData = combineLatest(dataStream, this.filterRequest)
            .pipe(map(function (_a) {
            var data = _a[0];
            return _this.treeGridDataService.copy(data);
        }), map(function (data) { return _this.filterData(data); }));
        var sortedData = combineLatest(filteredData, this.sortRequest)
            .pipe(map(function (_a) {
            var data = _a[0];
            return _this.sortData(data);
        }));
        sortedData
            .pipe(map(function (data) { return _this.treeGridDataService.flattenExpanded(data); }))
            .subscribe(function (data) { return _this.renderData.next(data); });
    };
    NbTreeGridDataSource.prototype.filterData = function (data) {
        return this.filterService.filter(this.filterRequest.value, data);
    };
    NbTreeGridDataSource.prototype.sortData = function (data) {
        return this.sortService.sort(this.sortRequest.value, data);
    };
    return NbTreeGridDataSource;
}(NbDataSource));
var NbTreeGridDataSourceBuilder = /** @class */ (function () {
    function NbTreeGridDataSourceBuilder(filterService, sortService, treeGridService, treeGridDataService) {
        this.filterService = filterService;
        this.sortService = sortService;
        this.treeGridService = treeGridService;
        this.treeGridDataService = treeGridDataService;
    }
    NbTreeGridDataSourceBuilder.prototype.create = function (data, customGetters) {
        var dataSource = new NbTreeGridDataSource(this.sortService, this.filterService, this.treeGridService, this.treeGridDataService);
        dataSource.setData(data, customGetters);
        return dataSource;
    };
    NbTreeGridDataSourceBuilder = __decorate([ __metadata("design:paramtypes", [NbTreeGridFilterService,
            NbTreeGridSortService,
            NbTreeGridService,
            NbTreeGridDataService])
    ], NbTreeGridDataSourceBuilder);
NbTreeGridDataSourceBuilder.ɵfac = function NbTreeGridDataSourceBuilder_Factory(t) { return new (t || NbTreeGridDataSourceBuilder)(ɵngcc0.ɵɵinject(NbTreeGridFilterService), ɵngcc0.ɵɵinject(NbTreeGridSortService), ɵngcc0.ɵɵinject(NbTreeGridService), ɵngcc0.ɵɵinject(NbTreeGridDataService)); };
NbTreeGridDataSourceBuilder.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbTreeGridDataSourceBuilder, factory: function (t) { return NbTreeGridDataSourceBuilder.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridDataSourceBuilder, [{
        type: Injectable
    }], function () { return [{ type: NbTreeGridFilterService }, { type: NbTreeGridSortService }, { type: NbTreeGridService }, { type: NbTreeGridDataService }]; }, null); })();
    return NbTreeGridDataSourceBuilder;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NB_TREE_GRID = new InjectionToken('NB_TREE_GRID');

var NbColumnsService = /** @class */ (function () {
    function NbColumnsService(differs) {
        this.differs = differs;
        this.columnHide$ = new Subject();
        this.columnShow$ = new Subject();
    }
    NbColumnsService.prototype.setColumns = function (columns) {
        if (!this.changesDiffer) {
            this.changesDiffer = this.differs.find(columns || []).create();
        }
        if (this.changesDiffer.diff(columns)) {
            this.allColumns = Array.from(columns);
            this.visibleColumns = Array.from(columns);
        }
    };
    NbColumnsService.prototype.getVisibleColumns = function () {
        return this.visibleColumns;
    };
    NbColumnsService.prototype.hideColumn = function (column) {
        var toRemove = this.visibleColumns.indexOf(column);
        if (toRemove > -1) {
            this.visibleColumns.splice(toRemove, 1);
            this.columnHide$.next();
        }
    };
    NbColumnsService.prototype.showColumn = function (column) {
        if (this.visibleColumns.includes(column)) {
            return;
        }
        this.visibleColumns.splice(this.findInsertIndex(column), 0, column);
        this.columnShow$.next();
    };
    NbColumnsService.prototype.onColumnsChange = function () {
        return merge(this.columnShow$, this.columnHide$);
    };
    NbColumnsService.prototype.findInsertIndex = function (column) {
        var initialIndex = this.allColumns.indexOf(column);
        if (initialIndex === 0 || !this.visibleColumns.length) {
            return 0;
        }
        if (initialIndex === this.allColumns.length - 1) {
            return this.visibleColumns.length;
        }
        var leftSiblingIndex = initialIndex - 1;
        for (var i = leftSiblingIndex; i >= 0; i--) {
            var leftSibling = this.allColumns[i];
            var index = this.visibleColumns.indexOf(leftSibling);
            if (index !== -1) {
                return index + 1;
            }
        }
        var rightSiblingIndex = initialIndex + 1;
        for (var i = rightSiblingIndex; i < this.allColumns.length; i++) {
            var rightSibling = this.allColumns[i];
            var index = this.visibleColumns.indexOf(rightSibling);
            if (index !== -1) {
                return index;
            }
        }
        throw new Error("Can't restore column position.");
    };
    NbColumnsService = __decorate([ __metadata("design:paramtypes", [IterableDiffers])
    ], NbColumnsService);
NbColumnsService.ɵfac = function NbColumnsService_Factory(t) { return new (t || NbColumnsService)(ɵngcc0.ɵɵinject(ɵngcc0.IterableDiffers)); };
NbColumnsService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NbColumnsService, factory: function (t) { return NbColumnsService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbColumnsService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc0.IterableDiffers }]; }, null); })();
    return NbColumnsService;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Tree grid component that can be used to display nested rows of data.
 * Supports filtering and sorting.
 * @stacked-example(Showcase, tree-grid/tree-grid-showcase.component)
 *
 * ### Installation
 *
 * Import `NbTreeGridModule` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbTreeGridModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 *
 * ### Usage
 *
 * As the most basic usage you need to define [nbTreeGridRowDef](docs/components/treegrid/api#nbtreegridrowdefdirective)
 * where you should pass columns to display in rows and
 * [nbTreeGridColumnDef](docs/components/treegrid/api#nbtreegridcolumndefdirective) - component containing cell
 * definitions for each column passed to row definition.
 * @stacked-example(Basic, tree-grid/tree-grid-basic.component)
 *
 * `NbTreeGridComponent`'s source input and `NbTreeGridDataSourceBuilder.create` expecting data to be an array of
 * objects with `data`, `children` and `expanded` properties. If your data doesn't match this interface, you can pass
 * getter functions for each property as arguments to `NbTreeGridDataSourceBuilder.create` method.
 * @stacked-example(Custom node structure, tree-grid/tree-grid-custom-node-structure.component)
 *
 * To use sorting you can add `nbSort` directive to table and subscribe to `sort` method. When user click on header,
 * sort event will be emitted. Event object contain clicked column name and desired sort direction.
 * @stacked-example(Sortable, tree-grid/tree-grid-sortable.component)
 *
 * You can use `Data Source Builder` to create `NbTreeGridDataSource` which would have toggle, sort and
 * filter methods. Then you can call this methods to change sort or toggle rows programmatically. Also `nbSort` and
 * `nbFilterInput` directives both support `NbTreeGridDataSource`, so you can pass it directly as an input and
 * directives will trigger sort, toggle themselves.
 * @stacked-example(Data Source Builder, tree-grid/tree-grid-showcase.component)
 *
 * You can create responsive grid by setting `hideOn` and `showOn` inputs of
 * [nbTreeGridColumnDef](docs/components/tree-grid/api#nbtreegridcolumndefdirective) directive.
 * When viewport reaches specified width grid hides or shows columns.
 * @stacked-example(Responsive columns, tree-grid/tree-grid-responsive.component)
 *
 * To customize sort or row toggle icons you can use `nbSortHeaderIcon` and `nbTreeGridRowToggle` directives
 * respectively. `nbSortHeaderIcon` is a structural directive and it's implicit context set to current direction.
 * Also context has three properties: `isAscending`, `isDescending` and `isNone`.
 * @stacked-example(Custom icons, tree-grid/tree-grid-custom-icons.component)
 *
 * By default, row to toggle happens when user clicks anywhere in the row. Also double click expands row deeply.
 * To disable this you can set `[clickToToggle]="false"` input of `nbTreeGridRow`.
 * @stacked-example(Disable click toggle, tree-grid/tree-grid-disable-click-toggle.component)
 *
 * @styles
 *
 * tree-grid-cell-border-width:
 * tree-grid-cell-border-style:
 * tree-grid-cell-border-color:
 * tree-grid-row-min-height:
 * tree-grid-cell-padding:
 * tree-grid-header-background-color:
 * tree-grid-header-text-color:
 * tree-grid-header-text-font-family:
 * tree-grid-header-text-font-size:
 * tree-grid-header-text-font-weight:
 * tree-grid-header-text-line-height:
 * tree-grid-footer-background-color:
 * tree-grid-footer-text-color:
 * tree-grid-footer-text-font-family:
 * tree-grid-footer-text-font-size:
 * tree-grid-footer-text-font-weight:
 * tree-grid-footer-text-line-height:
 * tree-grid-row-background-color:
 * tree-grid-row-even-background-color:
 * tree-grid-row-hover-background-color:
 * tree-grid-row-text-color:
 * tree-grid-row-text-font-family:
 * tree-grid-row-text-font-size:
 * tree-grid-row-text-font-weight:
 * tree-grid-row-text-line-height:
 * tree-grid-sort-header-button-background-color:
 * tree-grid-sort-header-button-border:
 * tree-grid-sort-header-button-padding:
 */
var NbTreeGridComponent = /** @class */ (function (_super) {
    __extends(NbTreeGridComponent, _super);
    function NbTreeGridComponent(dataSourceBuilder, differs, changeDetectorRef, elementRef, role, dir, document, platform, window) {
        var _this = _super.call(this, differs, changeDetectorRef, elementRef, role, dir, document, platform) || this;
        _this.dataSourceBuilder = dataSourceBuilder;
        _this.window = window;
        _this.destroy$ = new Subject();
        _this.levelPadding = '';
        _this.equalColumnsWidthValue = false;
        _this.treeClass = true;
        _this.platform = platform;
        return _this;
    }
    NbTreeGridComponent_1 = NbTreeGridComponent;
    Object.defineProperty(NbTreeGridComponent.prototype, "source", {
        /**
         * The table's data
         * @param data
         * @type {<T>[] | NbTreeGridDataSource}
         */
        set: function (data) {
            if (!data) {
                return;
            }
            if (data instanceof NbTreeGridDataSource) {
                this._source = data;
            }
            else {
                this._source = this.dataSourceBuilder.create(data);
            }
            this.dataSource = this._source;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTreeGridComponent.prototype, "equalColumnsWidth", {
        get: function () {
            return this.equalColumnsWidthValue;
        },
        /**
         * Make all columns equal width. False by default.
         */
        set: function (value) {
            this.equalColumnsWidthValue = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    NbTreeGridComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.checkDefsCount();
        var rowsChange$ = merge(this._contentRowDefs.changes, this._contentHeaderRowDefs.changes, this._contentFooterRowDefs.changes);
        rowsChange$.pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.checkDefsCount(); });
        if (this.platform.isBrowser) {
            this.updateVisibleColumns();
            var windowResize$ = fromEvent(this.window, 'resize').pipe(debounceTime(50));
            merge(rowsChange$, this._contentColumnDefs.changes, windowResize$)
                .pipe(takeUntil(this.destroy$))
                .subscribe(function () { return _this.updateVisibleColumns(); });
        }
    };
    NbTreeGridComponent.prototype.ngOnDestroy = function () {
        _super.prototype.ngOnDestroy.call(this);
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbTreeGridComponent.prototype.toggleRow = function (row, options) {
        var context = this.getRowContext(row);
        this._source.toggle(context.$implicit.data, options);
    };
    NbTreeGridComponent.prototype.toggleCellRow = function (cell) {
        var context = this.getCellContext(cell);
        this._source.toggle(context.$implicit.data);
    };
    NbTreeGridComponent.prototype.getColumnWidth = function () {
        if (this.equalColumnsWidth) {
            return 100 / this.getColumnsCount() + "%";
        }
        return '';
    };
    NbTreeGridComponent.prototype.getCellLevel = function (cell, columnName) {
        if (this.isFirstColumn(columnName)) {
            return this.getCellContext(cell).$implicit.level;
        }
        return NB_DEFAULT_ROW_LEVEL;
    };
    NbTreeGridComponent.prototype.getRowContext = function (row) {
        return this.getContextByRowEl(row.elementRef.nativeElement);
    };
    NbTreeGridComponent.prototype.getCellContext = function (cell) {
        return this.getContextByCellEl(cell.elementRef.nativeElement);
    };
    NbTreeGridComponent.prototype.getContextByCellEl = function (cellEl) {
        return this.getContextByRowEl(cellEl.parentElement);
    };
    NbTreeGridComponent.prototype.getContextByRowEl = function (rowEl) {
        var rowsContainer = this._rowOutlet.viewContainer;
        for (var i = 0; i < rowsContainer.length; i++) {
            var rowViewRef = rowsContainer.get(i);
            if (rowViewRef.rootNodes.includes(rowEl)) {
                return rowViewRef.context;
            }
        }
    };
    NbTreeGridComponent.prototype.getColumns = function () {
        var columns = (this._contentHeaderRowDefs.length
            ? this._contentHeaderRowDefs.first
            : this._contentRowDefs.first).columns;
        return Array.from(columns || []);
    };
    NbTreeGridComponent.prototype.getColumnsCount = function () {
        return this.getColumns().length;
    };
    NbTreeGridComponent.prototype.isFirstColumn = function (columnName) {
        return this.getColumns()[0] === columnName;
    };
    NbTreeGridComponent.prototype.checkDefsCount = function () {
        if (this._contentRowDefs.length > 1) {
            throw new Error("Found multiple row definitions");
        }
        if (this._contentHeaderRowDefs.length > 1) {
            throw new Error("Found multiple header row definitions");
        }
        if (this._contentFooterRowDefs.length > 1) {
            throw new Error("Found multiple footer row definitions");
        }
    };
    NbTreeGridComponent.prototype.updateVisibleColumns = function () {
        var width = this.window.innerWidth;
        var columnDefs = this._contentColumnDefs;
        var columnsToHide = columnDefs
            .filter(function (col) { return col.shouldHide(width); })
            .map(function (col) { return col.name; });
        var columnsToShow = columnDefs
            .filter(function (col) { return col.shouldShow(width); })
            .map(function (col) { return col.name; });
        if (!columnsToHide.length && !columnsToShow.length) {
            return;
        }
        var rowDefs = [
            this._contentHeaderRowDefs.first,
            this._contentRowDefs.first,
            this._contentFooterRowDefs.first,
        ].filter(function (d) { return !!d; });
        for (var _i = 0, rowDefs_1 = rowDefs; _i < rowDefs_1.length; _i++) {
            var rowDef = rowDefs_1[_i];
            for (var _a = 0, columnsToHide_1 = columnsToHide; _a < columnsToHide_1.length; _a++) {
                var column = columnsToHide_1[_a];
                rowDef.hideColumn(column);
            }
            for (var _b = 0, columnsToShow_1 = columnsToShow; _b < columnsToShow_1.length; _b++) {
                var column = columnsToShow_1[_b];
                rowDef.showColumn(column);
            }
        }
    };
    var NbTreeGridComponent_1;
    __decorate([
        Input('nbTreeGrid'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbTreeGridComponent.prototype, "source", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbTreeGridComponent.prototype, "levelPadding", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbTreeGridComponent.prototype, "equalColumnsWidth", null);
    __decorate([
        HostBinding('class.nb-tree-grid'),
        __metadata("design:type", Object)
    ], NbTreeGridComponent.prototype, "treeClass", void 0);
    NbTreeGridComponent = NbTreeGridComponent_1 = __decorate([ __param(4, Attribute('role')),
        __param(6, Inject(NB_DOCUMENT)),
        __param(8, Inject(NB_WINDOW)),
        __metadata("design:paramtypes", [NbTreeGridDataSourceBuilder,
            IterableDiffers,
            ChangeDetectorRef,
            ElementRef, String, NbDirectionality, Object, NbPlatform, Object])
    ], NbTreeGridComponent);
NbTreeGridComponent.ɵfac = function NbTreeGridComponent_Factory(t) { return new (t || NbTreeGridComponent)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridDataSourceBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵinjectAttribute('role'), ɵngcc0.ɵɵdirectiveInject(NbDirectionality), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPlatform), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW)); };
NbTreeGridComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTreeGridComponent, selectors: [["table", "nbTreeGrid", ""]], hostVars: 2, hostBindings: function NbTreeGridComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("nb-tree-grid", ctx.treeClass);
    } }, inputs: { source: ["nbTreeGrid", "source"], equalColumnsWidth: "equalColumnsWidth", levelPadding: "levelPadding" }, features: [ɵngcc0.ɵɵProvidersFeature([
            { provide: NB_TREE_GRID, useExisting: NbTreeGridComponent_1 },
            NbColumnsService,
        ]), ɵngcc0.ɵɵInheritDefinitionFeature], attrs: _c49, decls: 3, vars: 0, consts: [["nbHeaderRowOutlet", ""], ["nbRowOutlet", ""], ["nbFooterRowOutlet", ""]], template: function NbTreeGridComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, 0);
        ɵngcc0.ɵɵelementContainer(1, 1);
        ɵngcc0.ɵɵelementContainer(2, 2);
    } }, directives: [NbHeaderRowOutletDirective,
        NbDataRowOutletDirective,
        NbFooterRowOutletDirective], styles: ["[_nghost-%COMP%]{table-layout:fixed;border-spacing:0;border-collapse:collapse;width:100%;max-width:100%;overflow:auto}  .nb-tree-grid-cell,   .nb-tree-grid-header-cell,   .nb-tree-grid-footer-cell{overflow:hidden}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridComponent, [{
        type: Component,
        args: [{
                selector: 'table[nbTreeGrid]',
                template: NB_TABLE_TEMPLATE,
                providers: [
                    { provide: NB_TREE_GRID, useExisting: NbTreeGridComponent_1 },
                    NbColumnsService,
                ],
                styles: [":host{table-layout:fixed;border-spacing:0;border-collapse:collapse;width:100%;max-width:100%;overflow:auto}::ng-deep .nb-tree-grid-cell,::ng-deep .nb-tree-grid-header-cell,::ng-deep .nb-tree-grid-footer-cell{overflow:hidden}\n"]
            }]
    }], function () { return [{ type: NbTreeGridDataSourceBuilder }, { type: ɵngcc0.IterableDiffers }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.ElementRef }, { type: String, decorators: [{
                type: Attribute,
                args: ['role']
            }] }, { type: NbDirectionality }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_DOCUMENT]
            }] }, { type: NbPlatform }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_WINDOW]
            }] }]; }, { source: [{
            type: Input,
            args: ['nbTreeGrid']
        }], equalColumnsWidth: [{
            type: Input
        }], levelPadding: [{
            type: Input
        }], treeClass: [{
            type: HostBinding,
            args: ['class.nb-tree-grid']
        }] }); })();
    return NbTreeGridComponent;
}(NbTable));

var NbCdkRowDef = CdkRowDef;
var NbCdkRow = CdkRow;
var NbCdkCellDef = CdkCellDef;
var NbCdkHeaderRowDef = CdkHeaderRowDef;
var NbCdkHeaderRow = CdkHeaderRow;
var NbCdkHeaderCellDef = CdkHeaderCellDef;
var NbCdkFooterRowDef = CdkFooterRowDef;
var NbCdkFooterRow = CdkFooterRow;
var NbCdkFooterCellDef = CdkFooterCellDef;
var NbCdkColumnDef = CdkColumnDef;
var NbCdkCell = CdkCell;
var NbCdkHeaderCell = CdkHeaderCell;
var NbCdkFooterCell = CdkFooterCell;

/**
 * Data row definition for the tree-grid.
 * Captures the header row's template and columns to display.
 */
var NbTreeGridRowDefDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridRowDefDirective, _super);
    function NbTreeGridRowDefDirective(template, differs, columnsService) {
        var _this = _super.call(this, template, differs) || this;
        _this.columnsService = columnsService;
        return _this;
    }
    NbTreeGridRowDefDirective_1 = NbTreeGridRowDefDirective;
    Object.defineProperty(NbTreeGridRowDefDirective.prototype, "columns", {
        get: function () {
            return this.columnsService.getVisibleColumns();
        },
        /**
         * Columns to be displayed on this row
         */
        set: function (value) {
            this.columnsService.setColumns(value);
        },
        enumerable: true,
        configurable: true
    });
    /** @docs-private */
    NbTreeGridRowDefDirective.prototype.hideColumn = function (column) {
        this.columnsService.hideColumn(column);
    };
    /** @docs-private */
    NbTreeGridRowDefDirective.prototype.showColumn = function (column) {
        this.columnsService.showColumn(column);
    };
    var NbTreeGridRowDefDirective_1;
    __decorate([
        Input('nbTreeGridRowDefColumns'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbTreeGridRowDefDirective.prototype, "columns", null);
    NbTreeGridRowDefDirective = NbTreeGridRowDefDirective_1 = __decorate([ __metadata("design:paramtypes", [TemplateRef,
            IterableDiffers,
            NbColumnsService])
    ], NbTreeGridRowDefDirective);
NbTreeGridRowDefDirective.ɵfac = function NbTreeGridRowDefDirective_Factory(t) { return new (t || NbTreeGridRowDefDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(NbColumnsService)); };
NbTreeGridRowDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridRowDefDirective, selectors: [["", "nbTreeGridRowDef", ""]], inputs: { columns: ["nbTreeGridRowDefColumns", "columns"] }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkRowDef, useExisting: NbTreeGridRowDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridRowDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridRowDef]',
                providers: [{ provide: NbCdkRowDef, useExisting: NbTreeGridRowDefDirective_1 }]
            }]
    }], function () { return [{ type: ɵngcc0.TemplateRef }, { type: ɵngcc0.IterableDiffers }, { type: NbColumnsService }]; }, { columns: [{
            type: Input,
            args: ['nbTreeGridRowDefColumns']
        }] }); })();
    return NbTreeGridRowDefDirective;
}(NbRowDefDirective));
var NbTreeGridHeaderRowDefDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridHeaderRowDefDirective, _super);
    function NbTreeGridHeaderRowDefDirective(template, differs, columnsService) {
        var _this = _super.call(this, template, differs) || this;
        _this.columnsService = columnsService;
        return _this;
    }
    NbTreeGridHeaderRowDefDirective_1 = NbTreeGridHeaderRowDefDirective;
    Object.defineProperty(NbTreeGridHeaderRowDefDirective.prototype, "columns", {
        get: function () {
            return this.columnsService.getVisibleColumns();
        },
        /**
         * Columns to be displayed on this row
         */
        set: function (value) {
            this.columnsService.setColumns(value);
        },
        enumerable: true,
        configurable: true
    });
    /** @docs-private */
    NbTreeGridHeaderRowDefDirective.prototype.hideColumn = function (column) {
        this.columnsService.hideColumn(column);
    };
    /** @docs-private */
    NbTreeGridHeaderRowDefDirective.prototype.showColumn = function (column) {
        this.columnsService.showColumn(column);
    };
    var NbTreeGridHeaderRowDefDirective_1;
    __decorate([
        Input('nbTreeGridHeaderRowDef'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbTreeGridHeaderRowDefDirective.prototype, "columns", null);
    NbTreeGridHeaderRowDefDirective = NbTreeGridHeaderRowDefDirective_1 = __decorate([ __metadata("design:paramtypes", [TemplateRef,
            IterableDiffers,
            NbColumnsService])
    ], NbTreeGridHeaderRowDefDirective);
NbTreeGridHeaderRowDefDirective.ɵfac = function NbTreeGridHeaderRowDefDirective_Factory(t) { return new (t || NbTreeGridHeaderRowDefDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(NbColumnsService)); };
NbTreeGridHeaderRowDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridHeaderRowDefDirective, selectors: [["", "nbTreeGridHeaderRowDef", ""]], inputs: { columns: ["nbTreeGridHeaderRowDef", "columns"] }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkHeaderRowDef, useExisting: NbTreeGridHeaderRowDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridHeaderRowDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridHeaderRowDef]',
                providers: [{ provide: NbCdkHeaderRowDef, useExisting: NbTreeGridHeaderRowDefDirective_1 }]
            }]
    }], function () { return [{ type: ɵngcc0.TemplateRef }, { type: ɵngcc0.IterableDiffers }, { type: NbColumnsService }]; }, { columns: [{
            type: Input,
            args: ['nbTreeGridHeaderRowDef']
        }] }); })();
    return NbTreeGridHeaderRowDefDirective;
}(NbHeaderRowDefDirective));
var NbTreeGridFooterRowDefDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridFooterRowDefDirective, _super);
    function NbTreeGridFooterRowDefDirective(template, differs, columnsService) {
        var _this = _super.call(this, template, differs) || this;
        _this.columnsService = columnsService;
        return _this;
    }
    NbTreeGridFooterRowDefDirective_1 = NbTreeGridFooterRowDefDirective;
    Object.defineProperty(NbTreeGridFooterRowDefDirective.prototype, "columns", {
        get: function () {
            return this.columnsService.getVisibleColumns();
        },
        /**
         * Columns to be displayed on this row
         */
        set: function (value) {
            this.columnsService.setColumns(value);
        },
        enumerable: true,
        configurable: true
    });
    /** @docs-private */
    NbTreeGridFooterRowDefDirective.prototype.hideColumn = function (column) {
        this.columnsService.hideColumn(column);
    };
    /** @docs-private */
    NbTreeGridFooterRowDefDirective.prototype.showColumn = function (column) {
        this.columnsService.showColumn(column);
    };
    var NbTreeGridFooterRowDefDirective_1;
    __decorate([
        Input('nbTreeGridFooterRowDef'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], NbTreeGridFooterRowDefDirective.prototype, "columns", null);
    NbTreeGridFooterRowDefDirective = NbTreeGridFooterRowDefDirective_1 = __decorate([ __metadata("design:paramtypes", [TemplateRef,
            IterableDiffers,
            NbColumnsService])
    ], NbTreeGridFooterRowDefDirective);
NbTreeGridFooterRowDefDirective.ɵfac = function NbTreeGridFooterRowDefDirective_Factory(t) { return new (t || NbTreeGridFooterRowDefDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(NbColumnsService)); };
NbTreeGridFooterRowDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridFooterRowDefDirective, selectors: [["", "nbTreeGridFooterRowDef", ""]], inputs: { columns: ["nbTreeGridFooterRowDef", "columns"] }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkFooterRowDef, useExisting: NbTreeGridFooterRowDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridFooterRowDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridFooterRowDef]',
                providers: [{ provide: NbCdkFooterRowDef, useExisting: NbTreeGridFooterRowDefDirective_1 }]
            }]
    }], function () { return [{ type: ɵngcc0.TemplateRef }, { type: ɵngcc0.IterableDiffers }, { type: NbColumnsService }]; }, { columns: [{
            type: Input,
            args: ['nbTreeGridFooterRowDef']
        }] }); })();
    return NbTreeGridFooterRowDefDirective;
}(NbFooterRowDefDirective));
/**
 * Cell definition for a nb-table.
 * Captures the template of a column's data row cell as well as cell-specific properties.
 */
var NbTreeGridCellDefDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridCellDefDirective, _super);
    function NbTreeGridCellDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbTreeGridCellDefDirective_1 = NbTreeGridCellDefDirective;
    var NbTreeGridCellDefDirective_1;
NbTreeGridCellDefDirective.ɵfac = function NbTreeGridCellDefDirective_Factory(t) { return ɵNbTreeGridCellDefDirective_BaseFactory(t || NbTreeGridCellDefDirective); };
NbTreeGridCellDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridCellDefDirective, selectors: [["", "nbTreeGridCellDef", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkCellDef, useExisting: NbTreeGridCellDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbTreeGridCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridCellDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridCellDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridCellDef]',
                providers: [{ provide: NbCdkCellDef, useExisting: NbTreeGridCellDefDirective_1 }]
            }]
    }], null, null); })();
    return NbTreeGridCellDefDirective;
}(NbCellDefDirective));
/**
 * Header cell definition for the nb-table.
 * Captures the template of a column's header cell and as well as cell-specific properties.
 */
var NbTreeGridHeaderCellDefDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridHeaderCellDefDirective, _super);
    function NbTreeGridHeaderCellDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbTreeGridHeaderCellDefDirective_1 = NbTreeGridHeaderCellDefDirective;
    var NbTreeGridHeaderCellDefDirective_1;
NbTreeGridHeaderCellDefDirective.ɵfac = function NbTreeGridHeaderCellDefDirective_Factory(t) { return ɵNbTreeGridHeaderCellDefDirective_BaseFactory(t || NbTreeGridHeaderCellDefDirective); };
NbTreeGridHeaderCellDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridHeaderCellDefDirective, selectors: [["", "nbTreeGridHeaderCellDef", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkHeaderCellDef, useExisting: NbTreeGridHeaderCellDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbTreeGridHeaderCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridHeaderCellDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridHeaderCellDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridHeaderCellDef]',
                providers: [{ provide: NbCdkHeaderCellDef, useExisting: NbTreeGridHeaderCellDefDirective_1 }]
            }]
    }], null, null); })();
    return NbTreeGridHeaderCellDefDirective;
}(NbHeaderCellDefDirective));
/**
 * Footer cell definition for the nb-table.
 * Captures the template of a column's footer cell and as well as cell-specific properties.
 */
var NbTreeGridFooterCellDefDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridFooterCellDefDirective, _super);
    function NbTreeGridFooterCellDefDirective() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbTreeGridFooterCellDefDirective_1 = NbTreeGridFooterCellDefDirective;
    var NbTreeGridFooterCellDefDirective_1;
NbTreeGridFooterCellDefDirective.ɵfac = function NbTreeGridFooterCellDefDirective_Factory(t) { return ɵNbTreeGridFooterCellDefDirective_BaseFactory(t || NbTreeGridFooterCellDefDirective); };
NbTreeGridFooterCellDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridFooterCellDefDirective, selectors: [["", "nbTreeGridFooterCellDef", ""]], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkFooterCellDef, useExisting: NbTreeGridFooterCellDefDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbTreeGridFooterCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridFooterCellDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridFooterCellDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridFooterCellDef]',
                providers: [{ provide: NbCdkFooterCellDef, useExisting: NbTreeGridFooterCellDefDirective_1 }]
            }]
    }], null, null); })();
    return NbTreeGridFooterCellDefDirective;
}(NbFooterCellDefDirective));

var NB_ROW_DOUBLE_CLICK_DELAY = 200;
/**
 * Cells container. Adds the right class and role.
 */
var NbTreeGridRowComponent = /** @class */ (function (_super) {
    __extends(NbTreeGridRowComponent, _super);
    function NbTreeGridRowComponent(tree, elementRef) {
        var _this = _super.call(this) || this;
        _this.elementRef = elementRef;
        _this.doubleClick$ = new Subject();
        /**
         * Time to wait for second click to expand row deeply.
         * 200ms by default.
         */
        _this.doubleClickDelay = NB_ROW_DOUBLE_CLICK_DELAY;
        /**
         * Toggle row on click. Enabled by default.
         */
        _this.clickToToggle = true;
        _this.tree = tree;
        return _this;
    }
    NbTreeGridRowComponent_1 = NbTreeGridRowComponent;
    NbTreeGridRowComponent.prototype.toggleIfEnabledNode = function () {
        var _this = this;
        if (!this.clickToToggle) {
            return;
        }
        timer(NB_ROW_DOUBLE_CLICK_DELAY)
            .pipe(take(1), takeUntil(this.doubleClick$))
            .subscribe(function () { return _this.tree.toggleRow(_this); });
    };
    NbTreeGridRowComponent.prototype.toggleIfEnabledNodeDeep = function () {
        if (!this.clickToToggle) {
            return;
        }
        this.doubleClick$.next();
        this.tree.toggleRow(this, { deep: true });
    };
    NbTreeGridRowComponent.prototype.ngOnDestroy = function () {
        this.doubleClick$.complete();
    };
    var NbTreeGridRowComponent_1;
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbTreeGridRowComponent.prototype, "doubleClickDelay", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], NbTreeGridRowComponent.prototype, "clickToToggle", void 0);
    __decorate([
        HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbTreeGridRowComponent.prototype, "toggleIfEnabledNode", null);
    __decorate([
        HostListener('dblclick'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], NbTreeGridRowComponent.prototype, "toggleIfEnabledNodeDeep", null);
    NbTreeGridRowComponent = NbTreeGridRowComponent_1 = __decorate([ __param(0, Inject(NB_TREE_GRID)),
        __metadata("design:paramtypes", [Object, ElementRef])
    ], NbTreeGridRowComponent);
NbTreeGridRowComponent.ɵfac = function NbTreeGridRowComponent_Factory(t) { return new (t || NbTreeGridRowComponent)(ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
NbTreeGridRowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTreeGridRowComponent, selectors: [["tr", "nbTreeGridRow", ""]], hostAttrs: ["role", "row", 1, "nb-tree-grid-row"], hostBindings: function NbTreeGridRowComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbTreeGridRowComponent_click_HostBindingHandler() { return ctx.toggleIfEnabledNode(); })("dblclick", function NbTreeGridRowComponent_dblclick_HostBindingHandler() { return ctx.toggleIfEnabledNodeDeep(); });
    } }, inputs: { doubleClickDelay: "doubleClickDelay", clickToToggle: "clickToToggle" }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkRow, useExisting: NbTreeGridRowComponent_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature], attrs: _c50, decls: 1, vars: 0, consts: [["nbCellOutlet", ""]], template: function NbTreeGridRowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, 0);
    } }, directives: [NbCellOutletDirective], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridRowComponent, [{
        type: Component,
        args: [{
                selector: 'tr[nbTreeGridRow]',
                template: "<ng-container nbCellOutlet></ng-container>",
                host: {
                    'class': 'nb-tree-grid-row',
                    'role': 'row'
                },
                providers: [{ provide: NbCdkRow, useExisting: NbTreeGridRowComponent_1 }]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [NB_TREE_GRID]
            }] }, { type: ɵngcc0.ElementRef }]; }, { toggleIfEnabledNode: [{
            type: HostListener,
            args: ['click']
        }], toggleIfEnabledNodeDeep: [{
            type: HostListener,
            args: ['dblclick']
        }], doubleClickDelay: [{
            type: Input
        }], clickToToggle: [{
            type: Input
        }] }); })();
    return NbTreeGridRowComponent;
}(NbRowComponent));
var NbTreeGridHeaderRowComponent = /** @class */ (function (_super) {
    __extends(NbTreeGridHeaderRowComponent, _super);
    function NbTreeGridHeaderRowComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbTreeGridHeaderRowComponent_1 = NbTreeGridHeaderRowComponent;
    var NbTreeGridHeaderRowComponent_1;
NbTreeGridHeaderRowComponent.ɵfac = function NbTreeGridHeaderRowComponent_Factory(t) { return ɵNbTreeGridHeaderRowComponent_BaseFactory(t || NbTreeGridHeaderRowComponent); };
NbTreeGridHeaderRowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTreeGridHeaderRowComponent, selectors: [["tr", "nbTreeGridHeaderRow", ""]], hostAttrs: ["role", "row", 1, "nb-tree-grid-header-row"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkHeaderRow, useExisting: NbTreeGridHeaderRowComponent_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature], attrs: _c51, decls: 1, vars: 0, consts: [["nbCellOutlet", ""]], template: function NbTreeGridHeaderRowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, 0);
    } }, directives: [NbCellOutletDirective], encapsulation: 2 });
var ɵNbTreeGridHeaderRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridHeaderRowComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridHeaderRowComponent, [{
        type: Component,
        args: [{
                selector: 'tr[nbTreeGridHeaderRow]',
                template: "\n    <ng-container nbCellOutlet></ng-container>",
                host: {
                    'class': 'nb-tree-grid-header-row',
                    'role': 'row'
                },
                providers: [{ provide: NbCdkHeaderRow, useExisting: NbTreeGridHeaderRowComponent_1 }]
            }]
    }], null, null); })();
    return NbTreeGridHeaderRowComponent;
}(NbHeaderRowComponent));
var NbTreeGridFooterRowComponent = /** @class */ (function (_super) {
    __extends(NbTreeGridFooterRowComponent, _super);
    function NbTreeGridFooterRowComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NbTreeGridFooterRowComponent_1 = NbTreeGridFooterRowComponent;
    var NbTreeGridFooterRowComponent_1;
NbTreeGridFooterRowComponent.ɵfac = function NbTreeGridFooterRowComponent_Factory(t) { return ɵNbTreeGridFooterRowComponent_BaseFactory(t || NbTreeGridFooterRowComponent); };
NbTreeGridFooterRowComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTreeGridFooterRowComponent, selectors: [["tr", "nbTreeGridFooterRow", ""]], hostAttrs: ["role", "row", 1, "nb-tree-grid-footer-row"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkFooterRow, useExisting: NbTreeGridFooterRowComponent_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature], attrs: _c52, decls: 1, vars: 0, consts: [["nbCellOutlet", ""]], template: function NbTreeGridFooterRowComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementContainer(0, 0);
    } }, directives: [NbCellOutletDirective], encapsulation: 2 });
var ɵNbTreeGridFooterRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridFooterRowComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridFooterRowComponent, [{
        type: Component,
        args: [{
                selector: 'tr[nbTreeGridFooterRow]',
                template: "\n    <ng-container nbCellOutlet></ng-container>",
                host: {
                    'class': 'nb-tree-grid-footer-row',
                    'role': 'row'
                },
                providers: [{ provide: NbCdkFooterRow, useExisting: NbTreeGridFooterRowComponent_1 }]
            }]
    }], null, null); })();
    return NbTreeGridFooterRowComponent;
}(NbFooterRowComponent));

/**
 * Column definition for the tree-grid.
 * Defines a set of cells available for a table column.
 */
var NbTreeGridColumnDefDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridColumnDefDirective, _super);
    function NbTreeGridColumnDefDirective() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.hideOnValue = null;
        _this.showOnValue = null;
        return _this;
    }
    NbTreeGridColumnDefDirective_1 = NbTreeGridColumnDefDirective;
    Object.defineProperty(NbTreeGridColumnDefDirective.prototype, "hideOn", {
        /**
         * Amount of pixels of viewport at which column should be hidden.
         * type number
         */
        get: function () {
            return this.hideOnValue;
        },
        set: function (value) {
            this.hideOnValue = !value && value !== 0
                ? null
                : parseInt(value, 10);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTreeGridColumnDefDirective.prototype, "showOn", {
        /**
         * Amount of pixels of viewport at which column should be shown.
         * type number
         */
        get: function () {
            return this.showOnValue;
        },
        set: function (value) {
            this.showOnValue = !value && value !== 0
                ? null
                : parseInt(value, 10);
        },
        enumerable: true,
        configurable: true
    });
    NbTreeGridColumnDefDirective.prototype.ngOnChanges = function () {
        if (this.hideOn != null && this.showOn != null) {
            throw new Error("hideOn and showOn are mutually exclusive and can't be used simultaneously.");
        }
    };
    NbTreeGridColumnDefDirective.prototype.shouldHide = function (width) {
        return !this.shouldShow(width);
    };
    NbTreeGridColumnDefDirective.prototype.shouldShow = function (width) {
        if (this.hideOn == null && this.showOn == null) {
            return true;
        }
        if (this.hideOn != null) {
            return width > this.hideOn;
        }
        return width >= this.showOn;
    };
    var NbTreeGridColumnDefDirective_1;
    __decorate([
        Input('nbTreeGridColumnDef'),
        __metadata("design:type", String)
    ], NbTreeGridColumnDefDirective.prototype, "name", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], NbTreeGridColumnDefDirective.prototype, "hideOn", null);
    __decorate([
        Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], NbTreeGridColumnDefDirective.prototype, "showOn", null);
NbTreeGridColumnDefDirective.ɵfac = function NbTreeGridColumnDefDirective_Factory(t) { return ɵNbTreeGridColumnDefDirective_BaseFactory(t || NbTreeGridColumnDefDirective); };
NbTreeGridColumnDefDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridColumnDefDirective, selectors: [["", "nbTreeGridColumnDef", ""]], inputs: { hideOn: "hideOn", showOn: "showOn", name: ["nbTreeGridColumnDef", "name"] }, features: [ɵngcc0.ɵɵProvidersFeature([
            { provide: NbCdkColumnDef, useExisting: NbTreeGridColumnDefDirective_1 },
            { provide: NB_SORT_HEADER_COLUMN_DEF, useExisting: NbTreeGridColumnDefDirective_1 },
        ]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature] });
var ɵNbTreeGridColumnDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridColumnDefDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridColumnDefDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridColumnDef]',
                providers: [
                    { provide: NbCdkColumnDef, useExisting: NbTreeGridColumnDefDirective_1 },
                    { provide: NB_SORT_HEADER_COLUMN_DEF, useExisting: NbTreeGridColumnDefDirective_1 },
                ]
            }]
    }], null, { hideOn: [{
            type: Input
        }], showOn: [{
            type: Input
        }], name: [{
            type: Input,
            args: ['nbTreeGridColumnDef']
        }] }); })();
    return NbTreeGridColumnDefDirective;
}(NbColumnDefDirective));

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbTreeGridCellDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridCellDirective, _super);
    function NbTreeGridCellDirective(columnDef, elementRef, tree, platformId, window, sanitizer, directionService, columnService, cd) {
        var _this = _super.call(this, columnDef, elementRef) || this;
        _this.platformId = platformId;
        _this.window = window;
        _this.sanitizer = sanitizer;
        _this.directionService = directionService;
        _this.columnService = columnService;
        _this.cd = cd;
        _this.destroy$ = new Subject();
        _this.initialLeftPadding = '';
        _this.initialRightPadding = '';
        _this.tree = tree;
        _this.columnDef = columnDef;
        _this.elementRef = elementRef;
        return _this;
    }
    NbTreeGridCellDirective_1 = NbTreeGridCellDirective;
    Object.defineProperty(NbTreeGridCellDirective.prototype, "columnWidth", {
        get: function () {
            this.latestWidth = this.tree.getColumnWidth();
            if (this.latestWidth) {
                return this.latestWidth;
            }
            return null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTreeGridCellDirective.prototype, "leftPadding", {
        get: function () {
            if (this.directionService.isLtr()) {
                return this.getStartPadding();
            }
            return null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbTreeGridCellDirective.prototype, "rightPadding", {
        get: function () {
            if (this.directionService.isRtl()) {
                return this.getStartPadding();
            }
            return null;
        },
        enumerable: true,
        configurable: true
    });
    NbTreeGridCellDirective.prototype.ngOnInit = function () {
        var _this = this;
        if (isPlatformBrowser(this.platformId)) {
            var style$$1 = this.window.getComputedStyle(this.elementRef.nativeElement);
            this.initialLeftPadding = style$$1.paddingLeft;
            this.initialRightPadding = style$$1.paddingRight;
        }
        this.columnService.onColumnsChange()
            .pipe(filter(function () { return _this.latestWidth !== _this.tree.getColumnWidth(); }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.cd.detectChanges(); });
    };
    NbTreeGridCellDirective.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbTreeGridCellDirective.prototype.toggleRow = function () {
        this.tree.toggleCellRow(this);
    };
    Object.defineProperty(NbTreeGridCellDirective.prototype, "initialStartPadding", {
        get: function () {
            return this.directionService.isLtr()
                ? this.initialLeftPadding
                : this.initialRightPadding;
        },
        enumerable: true,
        configurable: true
    });
    NbTreeGridCellDirective.prototype.getStartPadding = function () {
        var rowLevel = this.tree.getCellLevel(this, this.columnDef.name);
        if (rowLevel === NB_DEFAULT_ROW_LEVEL) {
            return null;
        }
        var nestingLevel = rowLevel + 1;
        var padding = '';
        if (this.tree.levelPadding) {
            padding = "calc(" + this.tree.levelPadding + " * " + nestingLevel + ")";
        }
        else if (this.initialStartPadding) {
            padding = "calc(" + this.initialStartPadding + " * " + nestingLevel + ")";
        }
        if (!padding) {
            return null;
        }
        return this.sanitizer.bypassSecurityTrustStyle(padding);
    };
    var NbTreeGridCellDirective_1;
    __decorate([
        HostBinding('style.width'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbTreeGridCellDirective.prototype, "columnWidth", null);
    __decorate([
        HostBinding('style.padding-left'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbTreeGridCellDirective.prototype, "leftPadding", null);
    __decorate([
        HostBinding('style.padding-right'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbTreeGridCellDirective.prototype, "rightPadding", null);
    NbTreeGridCellDirective = NbTreeGridCellDirective_1 = __decorate([ __param(2, Inject(NB_TREE_GRID)),
        __param(3, Inject(PLATFORM_ID)),
        __param(4, Inject(NB_WINDOW)),
        __metadata("design:paramtypes", [NbTreeGridColumnDefDirective,
            ElementRef, Object, Object, Object, DomSanitizer,
            NbLayoutDirectionService,
            NbColumnsService,
            ChangeDetectorRef])
    ], NbTreeGridCellDirective);
NbTreeGridCellDirective.ɵfac = function NbTreeGridCellDirective_Factory(t) { return new (t || NbTreeGridCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(NbColumnsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbTreeGridCellDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridCellDirective, selectors: [["td", "nbTreeGridCell", ""]], hostAttrs: ["role", "gridcell", 1, "nb-tree-grid-cell"], hostVars: 6, hostBindings: function NbTreeGridCellDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("width", ctx.columnWidth)("padding-left", ctx.leftPadding)("padding-right", ctx.rightPadding);
    } }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkCell, useExisting: NbTreeGridCellDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridCellDirective, [{
        type: Directive,
        args: [{
                selector: 'td[nbTreeGridCell]',
                host: {
                    'class': 'nb-tree-grid-cell',
                    'role': 'gridcell'
                },
                providers: [{ provide: NbCdkCell, useExisting: NbTreeGridCellDirective_1 }]
            }]
    }], function () { return [{ type: NbTreeGridColumnDefDirective }, { type: ɵngcc0.ElementRef }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_TREE_GRID]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [PLATFORM_ID]
            }] }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_WINDOW]
            }] }, { type: ɵngcc4.DomSanitizer }, { type: NbLayoutDirectionService }, { type: NbColumnsService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { columnWidth: [{
            type: HostBinding,
            args: ['style.width']
        }], leftPadding: [{
            type: HostBinding,
            args: ['style.padding-left']
        }], rightPadding: [{
            type: HostBinding,
            args: ['style.padding-right']
        }] }); })();
    return NbTreeGridCellDirective;
}(NbCellDirective));
var NbTreeGridHeaderCellDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridHeaderCellDirective, _super);
    function NbTreeGridHeaderCellDirective(columnDef, elementRef, tree, columnService, cd) {
        var _this = _super.call(this, columnDef, elementRef) || this;
        _this.columnService = columnService;
        _this.cd = cd;
        _this.destroy$ = new Subject();
        _this.tree = tree;
        return _this;
    }
    NbTreeGridHeaderCellDirective_1 = NbTreeGridHeaderCellDirective;
    Object.defineProperty(NbTreeGridHeaderCellDirective.prototype, "columnWidth", {
        get: function () {
            this.latestWidth = this.tree.getColumnWidth();
            return this.latestWidth || null;
        },
        enumerable: true,
        configurable: true
    });
    NbTreeGridHeaderCellDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.columnService.onColumnsChange()
            .pipe(filter(function () { return _this.latestWidth !== _this.tree.getColumnWidth(); }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.cd.detectChanges(); });
    };
    NbTreeGridHeaderCellDirective.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    var NbTreeGridHeaderCellDirective_1;
    __decorate([
        HostBinding('style.width'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbTreeGridHeaderCellDirective.prototype, "columnWidth", null);
    NbTreeGridHeaderCellDirective = NbTreeGridHeaderCellDirective_1 = __decorate([ __param(2, Inject(NB_TREE_GRID)),
        __metadata("design:paramtypes", [NbTreeGridColumnDefDirective,
            ElementRef, Object, NbColumnsService,
            ChangeDetectorRef])
    ], NbTreeGridHeaderCellDirective);
NbTreeGridHeaderCellDirective.ɵfac = function NbTreeGridHeaderCellDirective_Factory(t) { return new (t || NbTreeGridHeaderCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(NbColumnsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbTreeGridHeaderCellDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridHeaderCellDirective, selectors: [["th", "nbTreeGridHeaderCell", ""]], hostAttrs: ["role", "columnheader", 1, "nb-tree-grid-header-cell"], hostVars: 2, hostBindings: function NbTreeGridHeaderCellDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("width", ctx.columnWidth);
    } }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkHeaderCell, useExisting: NbTreeGridHeaderCellDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridHeaderCellDirective, [{
        type: Directive,
        args: [{
                selector: 'th[nbTreeGridHeaderCell]',
                host: {
                    'class': 'nb-tree-grid-header-cell',
                    'role': 'columnheader'
                },
                providers: [{ provide: NbCdkHeaderCell, useExisting: NbTreeGridHeaderCellDirective_1 }]
            }]
    }], function () { return [{ type: NbTreeGridColumnDefDirective }, { type: ɵngcc0.ElementRef }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_TREE_GRID]
            }] }, { type: NbColumnsService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { columnWidth: [{
            type: HostBinding,
            args: ['style.width']
        }] }); })();
    return NbTreeGridHeaderCellDirective;
}(NbHeaderCellDirective));
var NbTreeGridFooterCellDirective = /** @class */ (function (_super) {
    __extends(NbTreeGridFooterCellDirective, _super);
    function NbTreeGridFooterCellDirective(columnDef, elementRef, tree, columnService, cd) {
        var _this = _super.call(this, columnDef, elementRef) || this;
        _this.columnService = columnService;
        _this.cd = cd;
        _this.destroy$ = new Subject();
        _this.tree = tree;
        return _this;
    }
    NbTreeGridFooterCellDirective_1 = NbTreeGridFooterCellDirective;
    Object.defineProperty(NbTreeGridFooterCellDirective.prototype, "columnWidth", {
        get: function () {
            this.latestWidth = this.tree.getColumnWidth();
            return this.latestWidth || null;
        },
        enumerable: true,
        configurable: true
    });
    NbTreeGridFooterCellDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.columnService.onColumnsChange()
            .pipe(filter(function () { return _this.latestWidth !== _this.tree.getColumnWidth(); }), takeUntil(this.destroy$))
            .subscribe(function () { return _this.cd.detectChanges(); });
    };
    NbTreeGridFooterCellDirective.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    var NbTreeGridFooterCellDirective_1;
    __decorate([
        HostBinding('style.width'),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [])
    ], NbTreeGridFooterCellDirective.prototype, "columnWidth", null);
    NbTreeGridFooterCellDirective = NbTreeGridFooterCellDirective_1 = __decorate([ __param(2, Inject(NB_TREE_GRID)),
        __metadata("design:paramtypes", [NbTreeGridColumnDefDirective,
            ElementRef, Object, NbColumnsService,
            ChangeDetectorRef])
    ], NbTreeGridFooterCellDirective);
NbTreeGridFooterCellDirective.ɵfac = function NbTreeGridFooterCellDirective_Factory(t) { return new (t || NbTreeGridFooterCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(NbColumnsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
NbTreeGridFooterCellDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridFooterCellDirective, selectors: [["td", "nbTreeGridFooterCell", ""]], hostAttrs: ["role", "gridcell", 1, "nb-tree-grid-footer-cell"], hostVars: 2, hostBindings: function NbTreeGridFooterCellDirective_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("width", ctx.columnWidth);
    } }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbCdkFooterCell, useExisting: NbTreeGridFooterCellDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridFooterCellDirective, [{
        type: Directive,
        args: [{
                selector: 'td[nbTreeGridFooterCell]',
                host: {
                    'class': 'nb-tree-grid-footer-cell',
                    'role': 'gridcell'
                },
                providers: [{ provide: NbCdkFooterCell, useExisting: NbTreeGridFooterCellDirective_1 }]
            }]
    }], function () { return [{ type: NbTreeGridColumnDefDirective }, { type: ɵngcc0.ElementRef }, { type: Object, decorators: [{
                type: Inject,
                args: [NB_TREE_GRID]
            }] }, { type: NbColumnsService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { columnWidth: [{
            type: HostBinding,
            args: ['style.width']
        }] }); })();
    return NbTreeGridFooterCellDirective;
}(NbFooterCellDirective));

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbFilterDirective = /** @class */ (function () {
    function NbFilterDirective() {
    }
    NbFilterDirective.prototype.filter = function (filterRequest) {
        this.filterable.filter(filterRequest);
    };
    __decorate([
        Input('nbFilter'),
        __metadata("design:type", Object)
    ], NbFilterDirective.prototype, "filterable", void 0);
NbFilterDirective.ɵfac = function NbFilterDirective_Factory(t) { return new (t || NbFilterDirective)(); };
NbFilterDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbFilterDirective, selectors: [["", "nbFilter", ""]], inputs: { filterable: ["nbFilter", "filterable"] } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFilterDirective, [{
        type: Directive,
        args: [{ selector: '[nbFilter]' }]
    }], function () { return []; }, { filterable: [{
            type: Input,
            args: ['nbFilter']
        }] }); })();
    return NbFilterDirective;
}());
/**
 * Helper directive to trigger data source's filter method when user types in input
 */
var NbFilterInputDirective = /** @class */ (function (_super) {
    __extends(NbFilterInputDirective, _super);
    function NbFilterInputDirective() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.search$ = new Subject();
        _this.destroy$ = new Subject();
        /**
         * Debounce time before triggering filter method. Set in milliseconds.
         * Default 200.
         */
        _this.debounceTime = 200;
        return _this;
    }
    NbFilterInputDirective_1 = NbFilterInputDirective;
    NbFilterInputDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.search$
            .pipe(debounceTime(this.debounceTime), takeUntil(this.destroy$))
            .subscribe(function (query) {
            _super.prototype.filter.call(_this, query);
        });
    };
    NbFilterInputDirective.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
        this.search$.complete();
    };
    NbFilterInputDirective.prototype.filter = function (event) {
        this.search$.next(event.target.value);
    };
    var NbFilterInputDirective_1;
    __decorate([
        Input('nbFilterInput'),
        __metadata("design:type", Object)
    ], NbFilterInputDirective.prototype, "filterable", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number)
    ], NbFilterInputDirective.prototype, "debounceTime", void 0);
    __decorate([
        HostListener('input', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbFilterInputDirective.prototype, "filter", null);
NbFilterInputDirective.ɵfac = function NbFilterInputDirective_Factory(t) { return ɵNbFilterInputDirective_BaseFactory(t || NbFilterInputDirective); };
NbFilterInputDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbFilterInputDirective, selectors: [["", "nbFilterInput", ""]], hostBindings: function NbFilterInputDirective_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("input", function NbFilterInputDirective_input_HostBindingHandler($event) { return ctx.filter($event); });
    } }, inputs: { filterable: ["nbFilterInput", "filterable"], debounceTime: "debounceTime" }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: NbFilterDirective, useExisting: NbFilterInputDirective_1 }]), ɵngcc0.ɵɵInheritDefinitionFeature] });
var ɵNbFilterInputDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFilterInputDirective);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFilterInputDirective, [{
        type: Directive,
        args: [{
                selector: '[nbFilterInput]',
                providers: [{ provide: NbFilterDirective, useExisting: NbFilterInputDirective_1 }]
            }]
    }], null, { filter: [{
            type: HostListener,
            args: ['input', ['$event']]
        }], filterable: [{
            type: Input,
            args: ['nbFilterInput']
        }], debounceTime: [{
            type: Input
        }] }); })();
    return NbFilterInputDirective;
}(NbFilterDirective));

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * When using custom row toggle, apply this directive on your toggle to toggle row on element click.
 */
var NbTreeGridRowToggleDirective = /** @class */ (function () {
    function NbTreeGridRowToggleDirective(cell) {
        this.cell = cell;
    }
    NbTreeGridRowToggleDirective.prototype.toggleRow = function ($event) {
        this.cell.toggleRow();
        $event.stopPropagation();
    };
    __decorate([
        HostListener('click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbTreeGridRowToggleDirective.prototype, "toggleRow", null);
    NbTreeGridRowToggleDirective = __decorate([ __metadata("design:paramtypes", [NbTreeGridCellDirective])
    ], NbTreeGridRowToggleDirective);
NbTreeGridRowToggleDirective.ɵfac = function NbTreeGridRowToggleDirective_Factory(t) { return new (t || NbTreeGridRowToggleDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridCellDirective)); };
NbTreeGridRowToggleDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbTreeGridRowToggleDirective, selectors: [["", "nbTreeGridRowToggle", ""]], hostBindings: function NbTreeGridRowToggleDirective_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbTreeGridRowToggleDirective_click_HostBindingHandler($event) { return ctx.toggleRow($event); });
    } } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridRowToggleDirective, [{
        type: Directive,
        args: [{
                selector: '[nbTreeGridRowToggle]'
            }]
    }], function () { return [{ type: NbTreeGridCellDirective }]; }, { toggleRow: [{
            type: HostListener,
            args: ['click', ['$event']]
        }] }); })();
    return NbTreeGridRowToggleDirective;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * NbTreeGridRowToggleComponent
 */
var NbTreeGridRowToggleComponent = /** @class */ (function () {
    function NbTreeGridRowToggleComponent(cell) {
        this.cell = cell;
    }
    Object.defineProperty(NbTreeGridRowToggleComponent.prototype, "expanded", {
        get: function () {
            return this.expandedValue;
        },
        set: function (value) {
            this.expandedValue = value;
        },
        enumerable: true,
        configurable: true
    });
    NbTreeGridRowToggleComponent.prototype.toggleRow = function ($event) {
        this.cell.toggleRow();
        $event.stopPropagation();
    };
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbTreeGridRowToggleComponent.prototype, "expanded", null);
    __decorate([
        HostListener('click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], NbTreeGridRowToggleComponent.prototype, "toggleRow", null);
    NbTreeGridRowToggleComponent = __decorate([ __metadata("design:paramtypes", [NbTreeGridCellDirective])
    ], NbTreeGridRowToggleComponent);
NbTreeGridRowToggleComponent.ɵfac = function NbTreeGridRowToggleComponent_Factory(t) { return new (t || NbTreeGridRowToggleComponent)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridCellDirective)); };
NbTreeGridRowToggleComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbTreeGridRowToggleComponent, selectors: [["nb-tree-grid-row-toggle"]], hostBindings: function NbTreeGridRowToggleComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function NbTreeGridRowToggleComponent_click_HostBindingHandler($event) { return ctx.toggleRow($event); });
    } }, inputs: { expanded: "expanded" }, decls: 2, vars: 2, consts: [[1, "row-toggle-button"], ["pack", "nebular-essentials", "aria-hidden", "true", 3, "icon"]], template: function NbTreeGridRowToggleComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "button", 0);
        ɵngcc0.ɵɵelement(1, "nb-icon", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵattribute("aria-label", ctx.expanded ? "collapse" : "expand");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("icon", ctx.expanded ? "chevron-down-outline" : "chevron-right-outline");
    } }, directives: [NbIconComponent], styles: ["button[_ngcontent-%COMP%] {\n      background: transparent;\n      border: none;\n      padding: 0;\n    }"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridRowToggleComponent, [{
        type: Component,
        args: [{
                selector: 'nb-tree-grid-row-toggle',
                template: "\n    <button class=\"row-toggle-button\" [attr.aria-label]=\"expanded ? 'collapse' : 'expand'\">\n      <nb-icon [icon]=\"expanded ? 'chevron-down-outline' : 'chevron-right-outline'\"\n               pack=\"nebular-essentials\"\n               aria-hidden=\"true\">\n      </nb-icon>\n    </button>\n  ",
                styles: ["\n    button {\n      background: transparent;\n      border: none;\n      padding: 0;\n    }\n  "]
            }]
    }], function () { return [{ type: NbTreeGridCellDirective }]; }, { expanded: [{
            type: Input
        }], toggleRow: [{
            type: HostListener,
            args: ['click', ['$event']]
        }] }); })();
    return NbTreeGridRowToggleComponent;
}());

/*
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var COMPONENTS$2 = [
    // Tree Grid
    NbTreeGridComponent,
    NbTreeGridRowDefDirective,
    NbTreeGridRowComponent,
    NbTreeGridCellDefDirective,
    NbTreeGridCellDirective,
    NbTreeGridHeaderRowDefDirective,
    NbTreeGridHeaderRowComponent,
    NbTreeGridHeaderCellDefDirective,
    NbTreeGridHeaderCellDirective,
    NbTreeGridFooterRowDefDirective,
    NbTreeGridFooterRowComponent,
    NbTreeGridFooterCellDefDirective,
    NbTreeGridFooterCellDirective,
    NbTreeGridColumnDefDirective,
    // Sort directives
    NbSortDirective,
    NbSortHeaderComponent,
    NbSortIconComponent,
    // Filter directives
    NbFilterDirective,
    NbFilterInputDirective,
    NbTreeGridRowToggleDirective,
    NbTreeGridRowToggleComponent,
    NbSortHeaderIconDirective,
];
var NbTreeGridModule = /** @class */ (function () {
    function NbTreeGridModule() {
    }
NbTreeGridModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbTreeGridModule });
NbTreeGridModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbTreeGridModule_Factory(t) { return new (t || NbTreeGridModule)(); }, providers: [
        NbTreeGridSortService,
        NbTreeGridFilterService,
        NbTreeGridService,
        NbTreeGridDataService,
        NbTreeGridDataSourceBuilder,
    ], imports: [[CommonModule, NbTableModule, NbIconModule],
        NbTableModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTreeGridModule, { declarations: function () { return [NbTreeGridComponent,
        NbTreeGridRowDefDirective,
        NbTreeGridRowComponent,
        NbTreeGridCellDefDirective,
        NbTreeGridCellDirective,
        NbTreeGridHeaderRowDefDirective,
        NbTreeGridHeaderRowComponent,
        NbTreeGridHeaderCellDefDirective,
        NbTreeGridHeaderCellDirective,
        NbTreeGridFooterRowDefDirective,
        NbTreeGridFooterRowComponent,
        NbTreeGridFooterCellDefDirective,
        NbTreeGridFooterCellDirective,
        NbTreeGridColumnDefDirective,
        NbSortDirective,
        NbSortHeaderComponent,
        NbSortIconComponent,
        NbFilterDirective,
        NbFilterInputDirective,
        NbTreeGridRowToggleDirective,
        NbTreeGridRowToggleComponent,
        NbSortHeaderIconDirective]; }, imports: function () { return [CommonModule,
        NbTableModule,
        NbIconModule]; }, exports: function () { return [NbTableModule,
        NbTreeGridComponent,
        NbTreeGridRowDefDirective,
        NbTreeGridRowComponent,
        NbTreeGridCellDefDirective,
        NbTreeGridCellDirective,
        NbTreeGridHeaderRowDefDirective,
        NbTreeGridHeaderRowComponent,
        NbTreeGridHeaderCellDefDirective,
        NbTreeGridHeaderCellDirective,
        NbTreeGridFooterRowDefDirective,
        NbTreeGridFooterRowComponent,
        NbTreeGridFooterCellDefDirective,
        NbTreeGridFooterCellDirective,
        NbTreeGridColumnDefDirective,
        NbSortDirective,
        NbSortHeaderComponent,
        NbSortIconComponent,
        NbFilterDirective,
        NbFilterInputDirective,
        NbTreeGridRowToggleDirective,
        NbTreeGridRowToggleComponent,
        NbSortHeaderIconDirective]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbTreeGridModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule, NbTableModule, NbIconModule],
                declarations: __spreadArrays(COMPONENTS$2),
                exports: __spreadArrays([NbTableModule], COMPONENTS$2),
                providers: [
                    NbTreeGridSortService,
                    NbTreeGridFilterService,
                    NbTreeGridService,
                    NbTreeGridDataService,
                    NbTreeGridDataSourceBuilder,
                ]
            }]
    }], function () { return []; }, null); })();
    return NbTreeGridModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
/**
 * Toggle is a control representing `on` and `off` states.
 *
 * @stacked-example(Showcase, toggle/toggle-showcase.component)
 *
 * ### Installation
 *
 * Import `NbToggleComponent` to your feature module.
 * ```ts
 * @NgModule({
 *   imports: [
 *     // ...
 *     NbToggleModule,
 *   ],
 * })
 * export class PageModule { }
 * ```
 * ### Usage
 *
 * Toggle may have one of the following statuses: `basic`, `primary`, `success`, `warning`, `danger`, `info`, `control`
 *
 * @stacked-example(Toggle status, toggle/toggle-status.component)
 *
 * Toggle can be disabled via `disabled` input.
 *
 * @stacked-example(Disabled Toggles, toggle/toggle-disabled.component)
 *
 * Toggle may have a label with following positions: `left`, `right`, `start`, `end` (default)
 *
 * @stacked-example(Toggles With Labels, toggle/toggle-label-position.component.ts)
 *
 * You can set control state via `checked` binding:
 *
 * ```html
 * <nb-toggle [(checked)]="checked"></nb-toggle>
 * ```
 *
 * Or it could be set via reactive forms or ngModel bindings:
 *
 * @stacked-example(Toggle form binding, toggle/toggle-form.component)
 *
 * @styles
 *
 * toggle-height:
 * toggle-width:
 * toggle-border-width:
 * toggle-border-radius:
 * toggle-outline-width:
 * toggle-outline-color:
 * toggle-switcher-size:
 * toggle-switcher-icon-size:
 * toggle-text-font-family:
 * toggle-text-font-size:
 * toggle-text-font-weight:
 * toggle-text-line-height:
 * toggle-cursor:
 * toggle-disabled-cursor:
 * toggle-basic-text-color:
 * toggle-basic-background-color:
 * toggle-basic-border-color:
 * toggle-basic-checked-background-color:
 * toggle-basic-checked-border-color:
 * toggle-basic-checked-switcher-background-color:
 * toggle-basic-checked-switcher-checkmark-color:
 * toggle-basic-focus-background-color:
 * toggle-basic-focus-border-color:
 * toggle-basic-focus-checked-background-color:
 * toggle-basic-focus-checked-border-color:
 * toggle-basic-hover-background-color:
 * toggle-basic-hover-border-color:
 * toggle-basic-hover-checked-background-color:
 * toggle-basic-hover-checked-border-color:
 * toggle-basic-active-background-color:
 * toggle-basic-active-border-color:
 * toggle-basic-active-checked-background-color:
 * toggle-basic-active-checked-border-color:
 * toggle-basic-disabled-background-color:
 * toggle-basic-disabled-border-color:
 * toggle-basic-disabled-switcher-background-color:
 * toggle-basic-disabled-checked-switcher-checkmark-color:
 * toggle-basic-disabled-text-color:
 * toggle-primary-text-color:
 * toggle-primary-background-color:
 * toggle-primary-border-color:
 * toggle-primary-checked-background-color:
 * toggle-primary-checked-border-color:
 * toggle-primary-checked-switcher-background-color:
 * toggle-primary-checked-switcher-checkmark-color:
 * toggle-primary-focus-background-color:
 * toggle-primary-focus-border-color:
 * toggle-primary-focus-checked-background-color:
 * toggle-primary-focus-checked-border-color:
 * toggle-primary-hover-background-color:
 * toggle-primary-hover-border-color:
 * toggle-primary-hover-checked-background-color:
 * toggle-primary-hover-checked-border-color:
 * toggle-primary-active-background-color:
 * toggle-primary-active-border-color:
 * toggle-primary-active-checked-background-color:
 * toggle-primary-active-checked-border-color:
 * toggle-primary-disabled-background-color:
 * toggle-primary-disabled-border-color:
 * toggle-primary-disabled-switcher-background-color:
 * toggle-primary-disabled-checked-switcher-checkmark-color:
 * toggle-primary-disabled-text-color:
 * toggle-success-text-color:
 * toggle-success-background-color:
 * toggle-success-border-color:
 * toggle-success-checked-background-color:
 * toggle-success-checked-border-color:
 * toggle-success-checked-switcher-background-color:
 * toggle-success-checked-switcher-checkmark-color:
 * toggle-success-focus-background-color:
 * toggle-success-focus-border-color:
 * toggle-success-focus-checked-background-color:
 * toggle-success-focus-checked-border-color:
 * toggle-success-hover-background-color:
 * toggle-success-hover-border-color:
 * toggle-success-hover-checked-background-color:
 * toggle-success-hover-checked-border-color:
 * toggle-success-active-background-color:
 * toggle-success-active-border-color:
 * toggle-success-active-checked-background-color:
 * toggle-success-active-checked-border-color:
 * toggle-success-disabled-background-color:
 * toggle-success-disabled-border-color:
 * toggle-success-disabled-switcher-background-color:
 * toggle-success-disabled-checked-switcher-checkmark-color:
 * toggle-success-disabled-text-color:
 * toggle-info-text-color:
 * toggle-info-background-color:
 * toggle-info-border-color:
 * toggle-info-checked-background-color:
 * toggle-info-checked-border-color:
 * toggle-info-checked-switcher-background-color:
 * toggle-info-checked-switcher-checkmark-color:
 * toggle-info-focus-background-color:
 * toggle-info-focus-border-color:
 * toggle-info-focus-checked-background-color:
 * toggle-info-focus-checked-border-color:
 * toggle-info-hover-background-color:
 * toggle-info-hover-border-color:
 * toggle-info-hover-checked-background-color:
 * toggle-info-hover-checked-border-color:
 * toggle-info-active-background-color:
 * toggle-info-active-border-color:
 * toggle-info-active-checked-background-color:
 * toggle-info-active-checked-border-color:
 * toggle-info-disabled-background-color:
 * toggle-info-disabled-border-color:
 * toggle-info-disabled-switcher-background-color:
 * toggle-info-disabled-checked-switcher-checkmark-color:
 * toggle-info-disabled-text-color:
 * toggle-warning-text-color:
 * toggle-warning-background-color:
 * toggle-warning-border-color:
 * toggle-warning-checked-background-color:
 * toggle-warning-checked-border-color:
 * toggle-warning-checked-switcher-background-color:
 * toggle-warning-checked-switcher-checkmark-color:
 * toggle-warning-focus-background-color:
 * toggle-warning-focus-border-color:
 * toggle-warning-focus-checked-background-color:
 * toggle-warning-focus-checked-border-color:
 * toggle-warning-hover-background-color:
 * toggle-warning-hover-border-color:
 * toggle-warning-hover-checked-background-color:
 * toggle-warning-hover-checked-border-color:
 * toggle-warning-active-background-color:
 * toggle-warning-active-border-color:
 * toggle-warning-active-checked-background-color:
 * toggle-warning-active-checked-border-color:
 * toggle-warning-disabled-background-color:
 * toggle-warning-disabled-border-color:
 * toggle-warning-disabled-switcher-background-color:
 * toggle-warning-disabled-checked-switcher-checkmark-color:
 * toggle-warning-disabled-text-color:
 * toggle-danger-text-color:
 * toggle-danger-background-color:
 * toggle-danger-border-color:
 * toggle-danger-checked-background-color:
 * toggle-danger-checked-border-color:
 * toggle-danger-checked-switcher-background-color:
 * toggle-danger-checked-switcher-checkmark-color:
 * toggle-danger-focus-background-color:
 * toggle-danger-focus-border-color:
 * toggle-danger-focus-checked-background-color:
 * toggle-danger-focus-checked-border-color:
 * toggle-danger-hover-background-color:
 * toggle-danger-hover-border-color:
 * toggle-danger-hover-checked-background-color:
 * toggle-danger-hover-checked-border-color:
 * toggle-danger-active-background-color:
 * toggle-danger-active-border-color:
 * toggle-danger-active-checked-background-color:
 * toggle-danger-active-checked-border-color:
 * toggle-danger-disabled-background-color:
 * toggle-danger-disabled-border-color:
 * toggle-danger-disabled-switcher-background-color:
 * toggle-danger-disabled-checked-switcher-checkmark-color:
 * toggle-danger-disabled-text-color:
 * toggle-control-text-color:
 * toggle-control-background-color:
 * toggle-control-border-color:
 * toggle-control-checked-background-color:
 * toggle-control-checked-border-color:
 * toggle-control-checked-switcher-background-color:
 * toggle-control-checked-switcher-checkmark-color:
 * toggle-control-focus-background-color:
 * toggle-control-focus-border-color:
 * toggle-control-focus-checked-background-color:
 * toggle-control-focus-checked-border-color:
 * toggle-control-hover-background-color:
 * toggle-control-hover-border-color:
 * toggle-control-hover-checked-background-color:
 * toggle-control-hover-checked-border-color:
 * toggle-control-active-background-color:
 * toggle-control-active-border-color:
 * toggle-control-active-checked-background-color:
 * toggle-control-active-checked-border-color:
 * toggle-control-disabled-background-color:
 * toggle-control-disabled-border-color:
 * toggle-control-disabled-switcher-background-color:
 * toggle-control-disabled-checked-switcher-checkmark-color:
 * toggle-control-disabled-text-color:
 */
var NbToggleComponent = /** @class */ (function () {
    function NbToggleComponent(changeDetector, layoutDirection, renderer, hostElement, zone) {
        this.changeDetector = changeDetector;
        this.layoutDirection = layoutDirection;
        this.renderer = renderer;
        this.hostElement = hostElement;
        this.zone = zone;
        this.onChange = function () { };
        this.onTouched = function () { };
        this.destroy$ = new Subject();
        this._checked = false;
        this._disabled = false;
        this._status = 'basic';
        /**
         * Toggle label position.
         * Possible values are: `left`, `right`, `start`, `end` (default)
         */
        this.labelPosition = 'end';
        /**
         * Output when checked state is changed by a user
         * @type EventEmitter<boolean>
         */
        this.checkedChange = new EventEmitter();
    }
    NbToggleComponent_1 = NbToggleComponent;
    Object.defineProperty(NbToggleComponent.prototype, "checked", {
        /**
         * Toggle checked
         * @type {boolean}
         */
        get: function () {
            return this._checked;
        },
        set: function (value) {
            this._checked = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "disabled", {
        /**
         * Controls input disabled state
         */
        get: function () {
            return this._disabled;
        },
        set: function (value) {
            this._disabled = convertToBoolProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "status", {
        /**
         * Toggle status.
         * Possible values are: `basic`, `primary`, `success`, `warning`, `danger`, `info`, `control`.
         */
        get: function () {
            return this._status;
        },
        set: function (value) {
            if (value === '') {
                emptyStatusWarning('NbToggle');
                value = 'basic';
            }
            this._status = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "primary", {
        get: function () {
            return this.status === 'primary';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "success", {
        get: function () {
            return this.status === 'success';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "warning", {
        get: function () {
            return this.status === 'warning';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "danger", {
        get: function () {
            return this.status === 'danger';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "info", {
        get: function () {
            return this.status === 'info';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "basic", {
        get: function () {
            return this.status === 'basic';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "control", {
        get: function () {
            return this.status === 'control';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "labelLeft", {
        get: function () {
            return this.labelPosition === 'left';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "labelRight", {
        get: function () {
            return this.labelPosition === 'right';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "labelStart", {
        get: function () {
            return this.labelPosition === 'start';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NbToggleComponent.prototype, "labelEnd", {
        get: function () {
            return this.labelPosition === 'end';
        },
        enumerable: true,
        configurable: true
    });
    NbToggleComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.layoutDirection.onDirectionChange()
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.changeDetector.detectChanges(); });
    };
    NbToggleComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // TODO: #2254
        this.zone.runOutsideAngular(function () { return setTimeout(function () {
            _this.renderer.addClass(_this.hostElement.nativeElement, 'nb-transition');
        }); });
    };
    NbToggleComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    NbToggleComponent.prototype.checkState = function () {
        if (this.checked) {
            return this.layoutDirection.isLtr() ? 'right' : 'left';
        }
        return this.layoutDirection.isLtr() ? 'left' : 'right';
    };
    NbToggleComponent.prototype.registerOnChange = function (fn) {
        this.onChange = fn;
    };
    NbToggleComponent.prototype.registerOnTouched = function (fn) {
        this.onTouched = fn;
    };
    NbToggleComponent.prototype.writeValue = function (val) {
        this.checked = val;
        this.changeDetector.markForCheck();
    };
    NbToggleComponent.prototype.setDisabledState = function (val) {
        this.disabled = convertToBoolProperty(val);
        this.changeDetector.markForCheck();
    };
    NbToggleComponent.prototype.updateValue = function (event) {
        var input = event.target;
        this.checked = input.checked;
        this.checkedChange.emit(this.checked);
        this.onChange(this.checked);
    };
    NbToggleComponent.prototype.onInputClick = function (event) {
        event.stopPropagation();
    };
    var NbToggleComponent_1;
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbToggleComponent.prototype, "checked", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], NbToggleComponent.prototype, "disabled", null);
    __decorate([
        Input(),
        __metadata("design:type", String),
        __metadata("design:paramtypes", [String])
    ], NbToggleComponent.prototype, "status", null);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], NbToggleComponent.prototype, "labelPosition", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], NbToggleComponent.prototype, "checkedChange", void 0);
    __decorate([
        HostBinding('class.status-primary'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "primary", null);
    __decorate([
        HostBinding('class.status-success'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "success", null);
    __decorate([
        HostBinding('class.status-warning'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "warning", null);
    __decorate([
        HostBinding('class.status-danger'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "danger", null);
    __decorate([
        HostBinding('class.status-info'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "info", null);
    __decorate([
        HostBinding('class.status-basic'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "basic", null);
    __decorate([
        HostBinding('class.status-control'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "control", null);
    __decorate([
        HostBinding('class.toggle-label-left'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "labelLeft", null);
    __decorate([
        HostBinding('class.toggle-label-right'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "labelRight", null);
    __decorate([
        HostBinding('class.toggle-label-start'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "labelStart", null);
    __decorate([
        HostBinding('class.toggle-label-end'),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [])
    ], NbToggleComponent.prototype, "labelEnd", null);
    NbToggleComponent = NbToggleComponent_1 = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef,
            NbLayoutDirectionService,
            Renderer2,
            ElementRef,
            NgZone])
    ], NbToggleComponent);
NbToggleComponent.ɵfac = function NbToggleComponent_Factory(t) { return new (t || NbToggleComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
NbToggleComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbToggleComponent, selectors: [["nb-toggle"]], hostVars: 22, hostBindings: function NbToggleComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("status-primary", ctx.primary)("status-success", ctx.success)("status-warning", ctx.warning)("status-danger", ctx.danger)("status-info", ctx.info)("status-basic", ctx.basic)("status-control", ctx.control)("toggle-label-left", ctx.labelLeft)("toggle-label-right", ctx.labelRight)("toggle-label-start", ctx.labelStart)("toggle-label-end", ctx.labelEnd);
    } }, inputs: { labelPosition: "labelPosition", checked: "checked", disabled: "disabled", status: "status" }, outputs: { checkedChange: "checkedChange" }, features: [ɵngcc0.ɵɵProvidersFeature([{
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(function () { return NbToggleComponent_1; }),
                multi: true
            }])], ngContentSelectors: _c0, decls: 7, vars: 7, consts: [[1, "toggle-label"], ["type", "checkbox", "role", "switch", 1, "native-input", "visually-hidden", 3, "disabled", "checked", "change", "blur", "click"], [1, "toggle"], [1, "toggle-switcher"], ["icon", "checkmark-bold-outline", "pack", "nebular-essentials", 4, "ngIf"], [1, "text"], ["icon", "checkmark-bold-outline", "pack", "nebular-essentials"]], template: function NbToggleComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵelementStart(1, "input", 1);
        ɵngcc0.ɵɵlistener("change", function NbToggleComponent_Template_input_change_1_listener($event) { return ctx.updateValue($event); })("blur", function NbToggleComponent_Template_input_blur_1_listener() { return ctx.onTouched(); })("click", function NbToggleComponent_Template_input_click_1_listener($event) { return ctx.onInputClick($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(2, "div", 2);
        ɵngcc0.ɵɵelementStart(3, "span", 3);
        ɵngcc0.ɵɵtemplate(4, NbToggleComponent_nb_icon_4_Template, 1, 0, "nb-icon", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(5, "span", 5);
        ɵngcc0.ɵɵprojection(6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled)("checked", ctx.checked);
        ɵngcc0.ɵɵattribute("aria-checked", ctx.checked);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵclassProp("checked", ctx.checked);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("@position", ctx.checkState());
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.checked);
    } }, directives: [ɵngcc2.NgIf, NbIconComponent], styles: ["[_nghost-%COMP%]{display:inline-flex;outline:none}.toggle-label-left[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-right:0.6875rem}[dir=ltr]   .toggle-label-left[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:-1}[dir=rtl]   .toggle-label-left[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:1}.toggle-label-right[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-left:0.6875rem}[dir=ltr]   .toggle-label-right[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:1}[dir=rtl]   .toggle-label-right[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:-1}.toggle-label-start[_nghost-%COMP%]   .toggle-label[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=ltr]   .toggle-label-start[_nghost-%COMP%]   .toggle-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-right:.6875rem}[dir=rtl]   .toggle-label-start[_nghost-%COMP%]   .toggle-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-left:.6875rem}[dir=ltr]   .toggle-label-end[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-left:.6875rem}[dir=rtl]   .toggle-label-end[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-right:.6875rem}.nb-transition[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:background-color,border,box-shadow;transition-timing-function:ease-in}.toggle-label[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center}.toggle[_ngcontent-%COMP%]{position:relative;display:inline-flex;box-sizing:content-box}.toggle-switcher[_ngcontent-%COMP%]{position:absolute;border-radius:50%;margin:1px}.toggle-switcher[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}"], data: { animation: [
            trigger('position', [
                state('right', style({ right: 0, left: '*' })),
                state('left', style({ left: 0, right: '*' })),
                transition(':enter', [animate(0)]),
                transition('right <=> left', [animate('0.15s')]),
            ]),
        ] }, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbToggleComponent, [{
        type: Component,
        args: [{
                selector: 'nb-toggle',
                animations: [
                    trigger('position', [
                        state('right', style({ right: 0, left: '*' })),
                        state('left', style({ left: 0, right: '*' })),
                        transition(':enter', [animate(0)]),
                        transition('right <=> left', [animate('0.15s')]),
                    ]),
                ],
                template: "\n    <label class=\"toggle-label\">\n      <input type=\"checkbox\"\n             class=\"native-input visually-hidden\"\n             role=\"switch\"\n             [attr.aria-checked]=\"checked\"\n             [disabled]=\"disabled\"\n             [checked]=\"checked\"\n             (change)=\"updateValue($event)\"\n             (blur)=\"onTouched()\"\n             (click)=\"onInputClick($event)\">\n      <div class=\"toggle\" [class.checked]=\"checked\">\n        <span [@position]=\"checkState()\" class=\"toggle-switcher\">\n          <nb-icon *ngIf=\"checked\" icon=\"checkmark-bold-outline\" pack=\"nebular-essentials\"></nb-icon>\n        </span>\n      </div>\n      <span class=\"text\">\n        <ng-content></ng-content>\n      </span>\n    </label>\n  ",
                providers: [{
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(function () { return NbToggleComponent_1; }),
                        multi: true
                    }],
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:inline-flex;outline:none}:host(.toggle-label-left) .text:not(:empty){padding-right:0.6875rem}[dir=ltr] :host(.toggle-label-left) .text:not(:empty){order:-1}[dir=rtl] :host(.toggle-label-left) .text:not(:empty){order:1}:host(.toggle-label-right) .text:not(:empty){padding-left:0.6875rem}[dir=ltr] :host(.toggle-label-right) .text:not(:empty){order:1}[dir=rtl] :host(.toggle-label-right) .text:not(:empty){order:-1}:host(.toggle-label-start) .toggle-label{flex-direction:row-reverse}[dir=ltr] :host(.toggle-label-start) .toggle-label .text:not(:empty){padding-right:.6875rem}[dir=rtl] :host(.toggle-label-start) .toggle-label .text:not(:empty){padding-left:.6875rem}[dir=ltr] :host(.toggle-label-end) .text:not(:empty){padding-left:.6875rem}[dir=rtl] :host(.toggle-label-end) .text:not(:empty){padding-right:.6875rem}:host(.nb-transition) .toggle{transition-duration:0.15s;transition-property:background-color,border,box-shadow;transition-timing-function:ease-in}.toggle-label{position:relative;display:inline-flex;align-items:center}.toggle{position:relative;display:inline-flex;box-sizing:content-box}.toggle-switcher{position:absolute;border-radius:50%;margin:1px}.toggle-switcher nb-icon{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}\n"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: NbLayoutDirectionService }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }]; }, { labelPosition: [{
            type: Input
        }], checkedChange: [{
            type: Output
        }], checked: [{
            type: Input
        }], disabled: [{
            type: Input
        }], status: [{
            type: Input
        }], primary: [{
            type: HostBinding,
            args: ['class.status-primary']
        }], success: [{
            type: HostBinding,
            args: ['class.status-success']
        }], warning: [{
            type: HostBinding,
            args: ['class.status-warning']
        }], danger: [{
            type: HostBinding,
            args: ['class.status-danger']
        }], info: [{
            type: HostBinding,
            args: ['class.status-info']
        }], basic: [{
            type: HostBinding,
            args: ['class.status-basic']
        }], control: [{
            type: HostBinding,
            args: ['class.status-control']
        }], labelLeft: [{
            type: HostBinding,
            args: ['class.toggle-label-left']
        }], labelRight: [{
            type: HostBinding,
            args: ['class.toggle-label-right']
        }], labelStart: [{
            type: HostBinding,
            args: ['class.toggle-label-start']
        }], labelEnd: [{
            type: HostBinding,
            args: ['class.toggle-label-end']
        }] }); })();
    return NbToggleComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var NbToggleModule = /** @class */ (function () {
    function NbToggleModule() {
    }
NbToggleModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbToggleModule });
NbToggleModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbToggleModule_Factory(t) { return new (t || NbToggleModule)(); }, imports: [[
            CommonModule,
            NbIconModule,
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbToggleModule, { declarations: function () { return [NbToggleComponent]; }, imports: function () { return [CommonModule,
        NbIconModule]; }, exports: function () { return [NbToggleComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbToggleModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule,
                    NbIconModule,
                ],
                declarations: [NbToggleComponent],
                exports: [NbToggleComponent]
            }]
    }], function () { return []; }, null); })();
    return NbToggleModule;
}());

var NbPrefixDirective = /** @class */ (function () {
    function NbPrefixDirective() {
    }
NbPrefixDirective.ɵfac = function NbPrefixDirective_Factory(t) { return new (t || NbPrefixDirective)(); };
NbPrefixDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbPrefixDirective, selectors: [["", "nbPrefix", ""]] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbPrefixDirective, [{
        type: Directive,
        args: [{
                selector: '[nbPrefix]'
            }]
    }], function () { return []; }, null); })();
    return NbPrefixDirective;
}());

var NbSuffixDirective = /** @class */ (function () {
    function NbSuffixDirective() {
    }
NbSuffixDirective.ɵfac = function NbSuffixDirective_Factory(t) { return new (t || NbSuffixDirective)(); };
NbSuffixDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NbSuffixDirective, selectors: [["", "nbSuffix", ""]] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbSuffixDirective, [{
        type: Directive,
        args: [{
                selector: '[nbSuffix]'
            }]
    }], function () { return []; }, null); })();
    return NbSuffixDirective;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
function throwFormControlElementNotFound() {
    throw new Error("NbFormFieldComponent must contain [nbInput]");
}
/*
 * NbFormFieldComponent
 *
 * @styles
 *
 * form-field-addon-basic-text-color:
 * form-field-addon-basic-highlight-text-color:
 * form-field-addon-primary-text-color:
 * form-field-addon-primary-highlight-text-color:
 * form-field-addon-success-text-color:
 * form-field-addon-success-highlight-text-color:
 * form-field-addon-info-text-color:
 * form-field-addon-info-highlight-text-color:
 * form-field-addon-warning-text-color:
 * form-field-addon-warning-highlight-text-color:
 * form-field-addon-danger-text-color:
 * form-field-addon-danger-highlight-text-color:
 * form-field-addon-control-text-color:
 * form-field-addon-control-highlight-text-color:
 * form-field-addon-disabled-text-color:
 * form-field-addon-tiny-height:
 * form-field-addon-tiny-width:
 * form-field-addon-tiny-icon-size:
 * form-field-addon-tiny-font-size:
 * form-field-addon-tiny-line-height:
 * form-field-addon-tiny-font-weight:
 * form-field-addon-small-height:
 * form-field-addon-small-width:
 * form-field-addon-small-icon-size:
 * form-field-addon-small-font-size:
 * form-field-addon-small-line-height:
 * form-field-addon-small-font-weight:
 * form-field-addon-medium-height:
 * form-field-addon-medium-width:
 * form-field-addon-medium-icon-size:
 * form-field-addon-medium-font-size:
 * form-field-addon-medium-line-height:
 * form-field-addon-medium-font-weight:
 * form-field-addon-large-height:
 * form-field-addon-large-width:
 * form-field-addon-large-icon-size:
 * form-field-addon-large-font-size:
 * form-field-addon-large-line-height:
 * form-field-addon-large-font-weight:
 * form-field-addon-giant-height:
 * form-field-addon-giant-width:
 * form-field-addon-giant-icon-size:
 * form-field-addon-giant-font-size:
 * form-field-addon-giant-line-height:
 * form-field-addon-giant-font-weight:
 **/
var NbFormFieldComponent = /** @class */ (function () {
    function NbFormFieldComponent(cd, zone, elementRef, renderer) {
        var _this = this;
        this.cd = cd;
        this.zone = zone;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.destroy$ = new Subject();
        this.formControlState$ = new ReplaySubject(1);
        this.prefixClasses$ = this.formControlState$.pipe(map(function (s) { return _this.getAddonClasses('prefix', s); }));
        this.suffixClasses$ = this.formControlState$.pipe(map(function (s) { return _this.getAddonClasses('suffix', s); }));
    }
    NbFormFieldComponent.prototype.ngAfterContentChecked = function () {
        if (!this.formControl) {
            throwFormControlElementNotFound();
        }
    };
    NbFormFieldComponent.prototype.ngAfterContentInit = function () {
        this.subscribeToFormControlStateChange();
        this.subscribeToAddonChange();
    };
    NbFormFieldComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // TODO: #2254
        this.zone.runOutsideAngular(function () { return setTimeout(function () {
            _this.renderer.addClass(_this.elementRef.nativeElement, 'nb-transition');
        }); });
    };
    NbFormFieldComponent.prototype.ngOnDestroy = function () {
        this.destroy$.next();
    };
    NbFormFieldComponent.prototype.shouldShowPrefix = function () {
        return this.getFormControlConfig().supportsPrefix && !!this.prefix.length;
    };
    NbFormFieldComponent.prototype.shouldShowSuffix = function () {
        return this.getFormControlConfig().supportsSuffix && !!this.suffix.length;
    };
    NbFormFieldComponent.prototype.subscribeToFormControlStateChange = function () {
        var _this = this;
        var _a = this.formControl, disabled$ = _a.disabled$, focused$ = _a.focused$, size$ = _a.size$, status$ = _a.status$;
        combineLatest([disabled$, focused$, size$, status$])
            .pipe(map(function (_a) {
            var disabled = _a[0], focused = _a[1], size = _a[2], status = _a[3];
            return ({ disabled: disabled, focused: focused, size: size, status: status });
        }), distinctUntilChanged(function (oldState, state$$1) { return _this.isStatesEqual(oldState, state$$1); }), takeUntil(this.destroy$))
            .subscribe(this.formControlState$);
    };
    NbFormFieldComponent.prototype.subscribeToAddonChange = function () {
        var _this = this;
        merge(this.prefix.changes, this.suffix.changes)
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.cd.markForCheck(); });
    };
    NbFormFieldComponent.prototype.getAddonClasses = function (addon, state$$1) {
        var classes = [
            'nb-form-field-addon',
            "nb-form-field-" + addon + "-" + state$$1.size,
        ];
        if (state$$1.disabled) {
            classes.push("nb-form-field-addon-disabled");
        }
        else if (state$$1.focused) {
            classes.push("nb-form-field-addon-" + state$$1.status + "-highlight");
        }
        else {
            classes.push("nb-form-field-addon-" + state$$1.status);
        }
        return classes;
    };
    NbFormFieldComponent.prototype.getFormControlConfig = function () {
        return this.formControlConfig || new NbFormFieldControlConfig();
    };
    NbFormFieldComponent.prototype.isStatesEqual = function (oldState, state$$1) {
        return oldState.status === state$$1.status &&
            oldState.disabled === state$$1.disabled &&
            oldState.focused === state$$1.focused &&
            oldState.size === state$$1.size;
    };
    __decorate([
        ContentChildren(NbPrefixDirective, { descendants: true }),
        __metadata("design:type", QueryList)
    ], NbFormFieldComponent.prototype, "prefix", void 0);
    __decorate([
        ContentChildren(NbSuffixDirective, { descendants: true }),
        __metadata("design:type", QueryList)
    ], NbFormFieldComponent.prototype, "suffix", void 0);
    __decorate([
        ContentChild(NbFormFieldControl, { static: false }),
        __metadata("design:type", NbFormFieldControl)
    ], NbFormFieldComponent.prototype, "formControl", void 0);
    __decorate([
        ContentChild(NbFormFieldControlConfig, { static: false }),
        __metadata("design:type", NbFormFieldControlConfig)
    ], NbFormFieldComponent.prototype, "formControlConfig", void 0);
    NbFormFieldComponent = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef,
            NgZone,
            ElementRef,
            Renderer2])
    ], NbFormFieldComponent);
NbFormFieldComponent.ɵfac = function NbFormFieldComponent_Factory(t) { return new (t || NbFormFieldComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
NbFormFieldComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NbFormFieldComponent, selectors: [["nb-form-field"]], contentQueries: function NbFormFieldComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbFormFieldControl, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbFormFieldControlConfig, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbPrefixDirective, true);
        ɵngcc0.ɵɵcontentQuery(dirIndex, NbSuffixDirective, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formControl = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formControlConfig = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.prefix = _t);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.suffix = _t);
    } }, ngContentSelectors: _c54, decls: 4, vars: 6, consts: [[3, "ngClass", 4, "ngIf"], [1, "nb-form-control-container"], [3, "ngClass"]], template: function NbFormFieldComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c53);
        ɵngcc0.ɵɵtemplate(0, NbFormFieldComponent_div_0_Template, 3, 3, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(3, NbFormFieldComponent_div_3_Template, 3, 3, "div", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.shouldShowPrefix());
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵclassProp("nb-form-field-control-with-prefix", ctx.shouldShowPrefix())("nb-form-field-control-with-suffix", ctx.shouldShowSuffix());
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.shouldShowSuffix());
    } }, directives: [ɵngcc2.NgIf, ɵngcc2.NgClass], pipes: [ɵngcc2.AsyncPipe], styles: ["[_nghost-%COMP%]{display:flex;align-items:center}.nb-form-control-container[_ngcontent-%COMP%]{width:100%}"], changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFormFieldComponent, [{
        type: Component,
        args: [{
                selector: 'nb-form-field',
                template: "<div *ngIf=\"shouldShowPrefix()\" [ngClass]=\"prefixClasses$ | async\">\n  <ng-content select=\"[nbPrefix]\"></ng-content>\n</div>\n\n<div class=\"nb-form-control-container\"\n     [class.nb-form-field-control-with-prefix]=\"shouldShowPrefix()\"\n     [class.nb-form-field-control-with-suffix]=\"shouldShowSuffix()\">\n  <ng-content></ng-content>\n</div>\n\n<div *ngIf=\"shouldShowSuffix()\" [ngClass]=\"suffixClasses$ | async\">\n  <ng-content select=\"[nbSuffix]\"></ng-content>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [":host{display:flex;align-items:center}.nb-form-control-container{width:100%}\n"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.NgZone }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, { prefix: [{
            type: ContentChildren,
            args: [NbPrefixDirective, { descendants: true }]
        }], suffix: [{
            type: ContentChildren,
            args: [NbSuffixDirective, { descendants: true }]
        }], formControl: [{
            type: ContentChild,
            args: [NbFormFieldControl, { static: false }]
        }], formControlConfig: [{
            type: ContentChild,
            args: [NbFormFieldControlConfig, { static: false }]
        }] }); })();
    return NbFormFieldComponent;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
var COMPONENTS$3 = [
    NbFormFieldComponent,
    NbPrefixDirective,
    NbSuffixDirective,
];
var NbFormFieldModule = /** @class */ (function () {
    function NbFormFieldModule() {
    }
NbFormFieldModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NbFormFieldModule });
NbFormFieldModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NbFormFieldModule_Factory(t) { return new (t || NbFormFieldModule)(); }, imports: [[CommonModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbFormFieldModule, { declarations: function () { return [NbFormFieldComponent,
        NbPrefixDirective,
        NbSuffixDirective]; }, imports: function () { return [CommonModule]; }, exports: function () { return [NbFormFieldComponent,
        NbPrefixDirective,
        NbSuffixDirective]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NbFormFieldModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule],
                declarations: __spreadArrays(COMPONENTS$3),
                exports: __spreadArrays(COMPONENTS$3)
            }]
    }], function () { return []; }, null); })();
    return NbFormFieldModule;
}());

/**
 * @license
 * Copyright Akveo. All Rights Reserved.
 * Licensed under the MIT License. See License.txt in the project root for license information.
 */
// TODO: export all components

/**
 * Generated bundle index. Do not edit.
 */

export { NbActiveDescendantKeyManagerFactoryService as ɵd, NbFocusKeyManagerFactoryService as ɵc, NbMenuInternalService as ɵa, NbSharedModule as ɵb, NbCalendarDayCellComponent, NbCalendarYearPickerComponent, NbCalendarMonthPickerComponent, MONTHS_IN_VIEW, MONTHS_IN_COLUMN, NbCalendarDayPickerComponent, NbCalendarViewModeComponent, NbCalendarPageableNavigationComponent, NbCalendarDaysNamesComponent, NbCalendarWeekNumberComponent, NbCalendarMonthCellComponent, NbCalendarYearCellComponent, NbCalendarPickerRowComponent, NbCalendarPickerComponent, NbCalendarMonthModelService, NbNativeDateService, NbDateService, NbMenuService, NbMenuItem, NB_THEME_OPTIONS, NB_MEDIA_BREAKPOINTS, NB_BUILT_IN_JS_THEMES, NB_JS_THEMES, NB_WINDOW, NB_DOCUMENT, windowFactory, NbThemeModule, NbThemeService, NbSpinnerService, DEFAULT_MEDIA_BREAKPOINTS, NbMediaBreakpointsService, NbColorHelper, NbLayoutDirection, NB_LAYOUT_DIRECTION, NbLayoutDirectionService, NbLayoutScrollService, NbLayoutRulerService, BUILT_IN_THEMES, NbJSThemesRegistry, CORPORATE_THEME, COSMIC_THEME, DEFAULT_THEME, DARK_THEME, NbCardModule, NbCardHeaderComponent, NbCardBodyComponent, NbCardFooterComponent, NbCardComponent, NbFlipCardComponent, NbRevealCardComponent, NbCardFrontComponent, NbCardBackComponent, NbCalendarModule, NbCalendarComponent, NbCalendarRangeModule, NbCalendarRangeComponent, NbBaseCalendarComponent, NbBaseCalendarModule, NbBaseCalendarRangeCell, NbCalendarRangeDayCellComponent, NbCalendarRangeMonthCellComponent, NbCalendarRangeYearCellComponent, NbCalendarYearModelService, NbCalendarViewMode, NbCalendarSize, NbCalendarKitModule, NbLayoutModule, NbLayoutComponent, NbLayoutColumnComponent, NbLayoutHeaderComponent, NbLayoutFooterComponent, NbRestoreScrollTopHelper, NbMenuModule, NbToggleStates, NbMenuItemComponent, NbMenuComponent, NbRouteTabsetModule, NbRouteTabsetComponent, NbSidebarModule, NbSidebarService, NbSidebarHeaderComponent, NbSidebarFooterComponent, NbSidebarComponent, NbTabsetModule, NbTabComponent, NbTabsetComponent, NbUserModule, NbUserComponent, NbActionsModule, NbActionComponent, NbActionsComponent, NbSearchModule, NbSearchService, NbSearchFieldComponent, NbSearchComponent, NbCheckboxComponent, NbCheckboxModule, NbBadgeComponent, NbBadgeModule, NbPopoverDirective, NbPopoverModule, NbPopoverComponent, NbContextMenuDirective, NbContextMenuComponent, NbContextMenuModule, NbProgressBarComponent, NbProgressBarModule, NbAlertComponent, NbAlertModule, NbChatComponent, NbChatMessageComponent, NbChatMessageMapComponent, NbChatMessageFileComponent, NbChatMessageQuoteComponent, NbChatMessageTextComponent, NbChatFormComponent, NbChatModule, NbChatOptions, NbSpinnerComponent, NbSpinnerDirective, NbSpinnerModule, NB_STEPPER, NbStepperComponent, NbStepComponent, NbStepperNextDirective, NbStepperPreviousDirective, NbStepperModule, NbAccordionComponent, NbAccordionItemComponent, NbAccordionItemBodyComponent, NbAccordionItemHeaderComponent, NbAccordionModule, NbButtonComponent, NbButtonModule, NbListComponent, NbListItemComponent, NbListModule, NbListPageTrackerDirective, NbScrollableContainerDimentions, NbInfiniteListDirective, NbInputDirective, NbInputModule, NbOverlayModule, patch, createContainer, NbOverlayService, NbAdjustment, NbPosition, NbAdjustableConnectedPositionStrategy, NbGlobalPositionStrategy, NbPositionBuilderService, NbPositionedContainer, NbOverlayContainerComponent, NbTrigger, NbTriggerStrategyBase, NbClickTriggerStrategy, NbHoverTriggerStrategy, NbHintTriggerStrategy, NbFocusTriggerStrategy, NbNoopTriggerStrategy, NbTriggerStrategyBuilderService, NbPortalDirective, NbPortalOutletDirective, NbComponentPortal, NbOverlay, NbOverlayPositionBuilder, NbTemplatePortal, NbOverlayContainer, NbFlexibleConnectedPositionStrategy, NbPortalInjector, NbCdkMappingModule, NbGlobalLogicalPosition, NbGlobalPhysicalPosition, NbPositionHelper, NbDynamicOverlay, NbDynamicOverlayChange, NbDynamicOverlayHandler, NbPlatform, NbFocusMonitor, NbA11yModule, NbFocusTrap, NbFocusTrapFactoryService, NbCdkAdapterModule, NbBlockScrollStrategyAdapter, NbScrollStrategyOptions, NbOverlayContainerAdapter, NbScrollDispatcherAdapter, NbViewportRulerAdapter, NbDirectionality, NbBidiModule, NbCellDefDirective, NbHeaderCellDefDirective, NbFooterCellDefDirective, NB_SORT_HEADER_COLUMN_DEF, NbColumnDefDirective, NbHeaderCellDirective, NbFooterCellDirective, NbCellDirective, NbDataSource, NbDataRowOutletDirective, NbHeaderRowOutletDirective, NbFooterRowOutletDirective, NbCellOutletDirective, NbHeaderRowDefDirective, NbFooterRowDefDirective, NbRowDefDirective, NbHeaderRowComponent, NbFooterRowComponent, NbRowComponent, NB_TABLE_TEMPLATE, NbTable, NbTableModule, NB_DIALOG_CONFIG, NbDialogConfig, NbDialogRef, NbDialogService, NbDialogModule, NbToastrModule, NbToastRef, NbToastContainer, NbToastrContainerRegistry, NbToastrService, NbToast, NbToastComponent, NB_TOASTR_CONFIG, NbToastrConfig, NbToastrContainerComponent, NbTooltipModule, NbTooltipDirective, NbTooltipComponent, NbSelectModule, NbSelectLabelComponent, nbSelectFormFieldControlConfigFactory, NbSelectComponent, NbOptionModule, NbOptionComponent, NbOptionGroupComponent, NbOptionListComponent, NB_SELECT_INJECTION_TOKEN, NbAutocompleteModule, NbAutocompleteComponent, NbAutocompleteDirective, NbWindowModule, NbWindowService, NbWindowRef, NbWindowState, NbWindowConfig, NB_WINDOW_CONTENT, NB_WINDOW_CONFIG, NB_WINDOW_CONTEXT, NbWindowComponent, NbWindowsContainerComponent, NbDatepickerModule, NbDatepickerAdapter, NbDatepicker, NB_DATE_ADAPTER, NB_DATE_SERVICE_OPTIONS, NbDatepickerDirective, NbDateAdapterService, NbRangeAdapterService, NbDatepickerContainerComponent, NbBasePicker, NbBasePickerComponent, NbDatepickerComponent, NbRangepickerComponent, NbDialogContainerComponent, NbRadioModule, NbRadioGroupComponent, NbRadioComponent, NbTreeGridModule, NbTreeGridComponent, NB_ROW_DOUBLE_CLICK_DELAY, NbTreeGridRowComponent, NbTreeGridHeaderRowComponent, NbTreeGridFooterRowComponent, NB_TREE_GRID, NbSortDirection, NbSortDirective, NbSortHeaderIconDirective, NbSortIconComponent, NbSortHeaderComponent, NbTreeGridRowToggleComponent, NbTreeGridColumnDefDirective, NbTreeGridCellDirective, NbTreeGridHeaderCellDirective, NbTreeGridFooterCellDirective, NbTreeGridRowDefDirective, NbTreeGridHeaderRowDefDirective, NbTreeGridFooterRowDefDirective, NbTreeGridCellDefDirective, NbTreeGridHeaderCellDefDirective, NbTreeGridFooterCellDefDirective, NbFilterDirective, NbFilterInputDirective, NbTreeGridRowToggleDirective, NB_DEFAULT_ROW_LEVEL, NbTreeGridPresentationNode, NbTreeGridDataSource, NbTreeGridDataSourceBuilder, NbTreeGridDataService, NbTreeGridFilterService, NbTreeGridService, NbTreeGridSortService, NbColumnsService, NbIconModule, NbIconComponent, NbFontIcon, NbSvgIcon, NbIconPackType, NbIconDefinition, NbIconLibraries, NbToggleModule, NbToggleComponent, NbFormFieldModule, NbFormFieldComponent, NbPrefixDirective, NbSuffixDirective, NbFormFieldControl, NbFormFieldControlConfig };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FFTztBQUNQO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7a0NBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBRU87QUFDUDtBQUNBOzs7Ozs7OztrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUVPO0FBQ1A7QUFDQTtBQUNBOzs7Ozs7OztxR0FBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBRU87QUFDUDtBQUNBOzs7Ozs7OztrQ0FBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBRU87QUFDUDtBQUNBOzs7Ozs7Ozs7O2tDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBRzhCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBRzZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVV1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBRU87QUFDUDtBQUNBO0FBQ0E7Ozs7Ozs7O2tDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OzswQkFHdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Z0RBR3FCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7MEJBRzBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OzBCQUdnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7MEJBR2tCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7MEJBR2lDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OzswQkFHMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVUyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzswQkFNbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OzswQkFHa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBRU87QUFDUDtBQUNBO0FBQ0E7Ozs7OzhKQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBRU87QUFDUDs7Ozs7a0ZBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OzttS0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBTzhCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBS087QUFDUDtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUVPO0FBQ1A7Ozs7O3VHQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUVPO0FBQ1A7Ozs7OzhIQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUVPO0FBQ1A7QUFDQTtBQUNBOzs7Ozs7OztxR0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7a0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O2dEQUcyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFFTztBQUNQO0FBQ0E7Ozs7Ozs7O2tDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQWlCd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Z0RBUXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2dEQUd3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBT087QUFDUDtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQVlPO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7eUVBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Z0RBTThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O2dEQU00QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztnREFNOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBT3dCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU80QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Z0RBTTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Z0RBTTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBVXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU00QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQU9PO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O2dEQVN1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUVPO0FBQ1A7Ozs7O3VFQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBT087QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBT087QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FFTztBQUNQOzs7Ozt1RUFBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQU1PO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQU9PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFNTztBQUNQO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQU9PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUVPO0FBQ1A7QUFDQTs7Ozs7Ozs7a0NBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBYTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUtPO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztnREFPNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Z0RBT3lCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFNTztBQUNQOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBTU87QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUtPO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBaUI4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FFTztBQUNQOzs7Ozt1RUFBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBTU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU1nQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FLTztBQUNQOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBTWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVl1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBR3NCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUVPO0FBQ1A7Ozs7O3lFQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBWU87QUFDUDtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQU1PO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O2dEQU9xQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREFjNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBR3lCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztnREFNaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O2dEQU1pQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQU1PO0FBQ1A7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBU3dCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBTXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FNTztBQUNQO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztnREFNc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREFXdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBTU87QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREFVcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU8wQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU8yQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVd3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2dEQUd3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFRK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBT087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREF3QnVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFZTztBQUNQO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVV5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7Ozs7NEtBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FFTztBQUNQO0FBQ0E7QUFDQTs7Ozs7eUpBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQU1PO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2dEQVF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU0rQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUtPO0FBQ1A7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O2dEQVE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU8rQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Z0RBUzRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBT3lCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBYXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FrQk87QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU93QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBTU87QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBT29DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBT21DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2dEQUcyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBR2lDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFPTztBQUNQO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Z0RBT3NCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREFZcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBVXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUtPO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBUTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUlPO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBSU87QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBb0J3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztvQkFPNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQU9PO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBT087QUFDUDtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NFQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQWdCTztBQUNQO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU93QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUlPO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBSU87QUFDUDtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBTXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OzswQkFHeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OzsyRUFPcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7MEJBTTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OzBCQU1pQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzswQkFNaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBUzZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBUU87QUFDUDtBQUNBOzs7Ozs7Ozs7Ozs7MkdBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBUU87QUFDUDtBQUNBOzs7Ozs7Ozs7Ozs7MkdBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBUU87QUFDUDtBQUNBOzs7Ozs7Ozs7Ozs7MkdBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzswQkFNaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OzBCQU1tQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7MEJBTW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzswQkFNOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O29CQU1nQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBTWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O29CQU0wQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBVzZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OzswQkFXNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQVd1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFPTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozt3REFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkVBT3NCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBS087QUFDUDtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7d0tBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O2dEQU91QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQU1PO0FBQ1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQVdPO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O2tDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBRU87QUFDUDtBQUNBO0FBQ0E7Ozs7Ozs7O3VFQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O2dEQU91QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFtQjJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQU1PO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Z0RBUXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FPTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztnREFNK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQWlCTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBUStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBTzhCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBVXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBaUJ1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FPTztBQUNQOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBU087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBZTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFPb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQU1PO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O2tDQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVV1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFnQk87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFNdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBSU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztvQkFNOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O29CQU0rQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUVPO0FBQ1A7Ozs7O3VFQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FFTztBQUNQOzs7Ozt1RUFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQWMyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FPTztBQUNQO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBYU87QUFDUDtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2dEQU9zQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O29CQUd3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O2dEQUdrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O29CQU00QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUtPO0FBQ1A7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FFTztBQUNQO0FBQ0E7QUFDQTtBQUNBOzs7OztnTEFBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUVPO0FBQ1A7Ozs7O2dGQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFVTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUtPO0FBQ1A7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7b0JBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBS087QUFDUDtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztvQkFBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFLTztBQUNQO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O29CQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzswQkFNbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7MEJBTXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OzBCQU15QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFVTztBQUNQO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBV3FDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBV3FDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQVNxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBU087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBU087QUFDUDtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQVNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7b0JBRzBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQU0rQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUlPO0FBQ1A7Ozs7Ozs7Ozs7Ozs7b0JBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBTU87QUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREFjeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQW9CTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQVV1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O2dEQUswQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O2dEQUswQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FPTztBQUNQO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztnREFPMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXR0cmlidXRlLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBDb250ZW50Q2hpbGQsIENvbnRlbnRDaGlsZHJlbiwgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3QsIEhvc3RCaW5kaW5nLCBIb3N0TGlzdGVuZXIsIEluamVjdCwgSW5qZWN0YWJsZSwgSW5qZWN0aW9uVG9rZW4sIEluamVjdG9yLCBJbnB1dCwgSXRlcmFibGVEaWZmZXJzLCBMT0NBTEVfSUQsIE5nTW9kdWxlLCBOZ1pvbmUsIE9wdGlvbmFsLCBPdXRwdXQsIFBMQVRGT1JNX0lELCBRdWVyeUxpc3QsIFJlbmRlcmVyMiwgU2ltcGxlQ2hhbmdlLCBUZW1wbGF0ZVJlZiwgVHlwZSwgVmlld0NoaWxkLCBWaWV3Q2hpbGRyZW4sIFZpZXdDb250YWluZXJSZWYsIGZvcndhcmRSZWYsIMm1ybVkZWZpbmVJbmplY3RhYmxlLCDJtcm1aW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBpMCBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IF9fYXNzaWduLCBfX2RlY29yYXRlLCBfX2V4dGVuZHMsIF9fbWV0YWRhdGEsIF9fcGFyYW0sIF9fc3ByZWFkQXJyYXlzIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlLCBET0NVTUVOVCwgRGF0ZVBpcGUsIEZvcm1TdHlsZSwgTG9jYXRpb24sIFRyYW5zbGF0aW9uV2lkdGgsIGdldExvY2FsZURheU5hbWVzLCBnZXRMb2NhbGVGaXJzdERheU9mV2VlaywgZ2V0TG9jYWxlTW9udGhOYW1lcywgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBFTVBUWSwgT2JzZXJ2YWJsZSwgUmVwbGF5U3ViamVjdCwgU3ViamVjdCwgY29tYmluZUxhdGVzdCwgZm9ya0pvaW4sIGZyb21FdmVudCwgaW50ZXJ2YWwsIG1lcmdlLCBvZiwgdGltZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgZGVsYXksIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBmaWx0ZXIsIGZpbmFsaXplLCBtYXAsIHBhaXJ3aXNlLCByZXBlYXQsIHNoYXJlLCBza2lwLCBzdGFydFdpdGgsIHN3aXRjaE1hcCwgdGFrZSwgdGFrZVVudGlsLCB0YWtlV2hpbGUsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBOR19WQUxJREFUT1JTLCBOR19WQUxVRV9BQ0NFU1NPUiwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlLCBOYXZpZ2F0aW9uRW5kLCBSb3V0ZXIsIFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlciwgRm9jdXNLZXlNYW5hZ2VyLCBGb2N1c01vbml0b3IsIEZvY3VzVHJhcCwgRm9jdXNUcmFwRmFjdG9yeSwgSW50ZXJhY3Rpdml0eUNoZWNrZXIgfSBmcm9tICdAYW5ndWxhci9jZGsvYTExeSc7XG5pbXBvcnQgeyBDZGtQb3J0YWwsIENka1BvcnRhbE91dGxldCwgQ29tcG9uZW50UG9ydGFsLCBQb3J0YWxJbmplY3RvciwgUG9ydGFsTW9kdWxlLCBUZW1wbGF0ZVBvcnRhbCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wb3J0YWwnO1xuaW1wb3J0IHsgQmxvY2tTY3JvbGxTdHJhdGVneSwgRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LCBHbG9iYWxQb3NpdGlvblN0cmF0ZWd5LCBPdmVybGF5LCBPdmVybGF5Q29udGFpbmVyLCBPdmVybGF5TW9kdWxlLCBPdmVybGF5UG9zaXRpb25CdWlsZGVyLCBTY3JvbGxEaXNwYXRjaGVyLCBTY3JvbGxTdHJhdGVneU9wdGlvbnMsIFZpZXdwb3J0UnVsZXIgfSBmcm9tICdAYW5ndWxhci9jZGsvb3ZlcmxheSc7XG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XG5pbXBvcnQgKiBhcyBpMSBmcm9tICdAYW5ndWxhci9jZGsvcGxhdGZvcm0nO1xuaW1wb3J0IHsgRG9tU2FuaXRpemVyIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5pbXBvcnQgeyBhbmltYXRlLCBzdGF0ZSwgc3R5bGUsIHRyYW5zaXRpb24sIHRyaWdnZXIgfSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJztcbmltcG9ydCAnaW50ZXJzZWN0aW9uLW9ic2VydmVyJztcbmltcG9ydCB7IEJpZGlNb2R1bGUsIERpcmVjdGlvbmFsaXR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2JpZGknO1xuaW1wb3J0IHsgQ2RrQ2VsbCwgQ2RrQ2VsbERlZiwgQ2RrQ2VsbE91dGxldCwgQ2RrQ29sdW1uRGVmLCBDZGtGb290ZXJDZWxsLCBDZGtGb290ZXJDZWxsRGVmLCBDZGtGb290ZXJSb3csIENka0Zvb3RlclJvd0RlZiwgQ2RrSGVhZGVyQ2VsbCwgQ2RrSGVhZGVyQ2VsbERlZiwgQ2RrSGVhZGVyUm93LCBDZGtIZWFkZXJSb3dEZWYsIENka1JvdywgQ2RrUm93RGVmLCBDZGtUYWJsZSwgQ2RrVGFibGVNb2R1bGUsIERhdGFSb3dPdXRsZXQsIERhdGFTb3VyY2UsIEZvb3RlclJvd091dGxldCwgSGVhZGVyUm93T3V0bGV0IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3RhYmxlJztcbmltcG9ydCB7IEVOVEVSLCBFU0NBUEUgfSBmcm9tICdAYW5ndWxhci9jZGsva2V5Y29kZXMnO1xuaW1wb3J0ICogYXMgX2FuZ3VsYXJfY2RrX2tleWNvZGVzIGZyb20gJ0Bhbmd1bGFyL2Nkay9rZXljb2Rlcyc7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9USEVNRV9PUFRJT05TID0gbmV3IEluamVjdGlvblRva2VuKCdOZWJ1bGFyIFRoZW1lIE9wdGlvbnMnKTtcbnZhciBOQl9NRURJQV9CUkVBS1BPSU5UUyA9IG5ldyBJbmplY3Rpb25Ub2tlbignTmVidWxhciBNZWRpYSBCcmVha3BvaW50cycpO1xudmFyIE5CX0JVSUxUX0lOX0pTX1RIRU1FUyA9IG5ldyBJbmplY3Rpb25Ub2tlbignTmVidWxhciBCdWlsdC1pbiBKUyBUaGVtZXMnKTtcbnZhciBOQl9KU19USEVNRVMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05lYnVsYXIgSlMgVGhlbWVzJyk7XG4vKipcbiAqIFdlJ3JlIHByb3ZpZGluZyBicm93c2VyIGFwaXMgd2l0aCB0b2tlbnMgdG8gaW1wcm92ZSB0ZXN0aW5nIGNhcGFiaWxpdGllcy5cbiAqICovXG52YXIgTkJfV0lORE9XID0gbmV3IEluamVjdGlvblRva2VuKCdXaW5kb3cnKTtcbnZhciBOQl9ET0NVTUVOVCA9IG5ldyBJbmplY3Rpb25Ub2tlbignRG9jdW1lbnQnKTtcblxudmFyIHBhbGV0dGUgPSB7XG4gICAgcHJpbWFyeTogJyMzMzY2ZmYnLFxuICAgIHN1Y2Nlc3M6ICcjMDBkNjhmJyxcbiAgICBpbmZvOiAnIzAwOTVmZicsXG4gICAgd2FybmluZzogJyNmZmFhMDAnLFxuICAgIGRhbmdlcjogJyNmZjNkNzEnLFxufTtcbnZhciBERUZBVUxUX1RIRU1FID0ge1xuICAgIG5hbWU6ICdkZWZhdWx0JyxcbiAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgZm9udE1haW46ICdPcGVuIFNhbnMsIHNhbnMtc2VyaWYnLFxuICAgICAgICBmb250U2Vjb25kYXJ5OiAnUmFsZXdheSwgc2Fucy1zZXJpZicsXG4gICAgICAgIGJnOiAnI2ZmZmZmZicsXG4gICAgICAgIGJnMjogJyNmN2Y5ZmMnLFxuICAgICAgICBiZzM6ICcjZWRmMWY3JyxcbiAgICAgICAgYmc0OiAnI2U0ZTlmMicsXG4gICAgICAgIGJvcmRlcjogJyNmZmZmZmYnLFxuICAgICAgICBib3JkZXIyOiAnI2Y3ZjlmYycsXG4gICAgICAgIGJvcmRlcjM6ICcjZWRmMWY3JyxcbiAgICAgICAgYm9yZGVyNDogJyNlNGU5ZjInLFxuICAgICAgICBib3JkZXI1OiAnI2M1Y2VlMCcsXG4gICAgICAgIGZnOiAnIzhmOWJiMycsXG4gICAgICAgIGZnSGVhZGluZzogJyMxYTIxMzgnLFxuICAgICAgICBmZ1RleHQ6ICcjMWEyMTM4JyxcbiAgICAgICAgZmdIaWdobGlnaHQ6IHBhbGV0dGUucHJpbWFyeSxcbiAgICAgICAgbGF5b3V0Qmc6ICcjZjdmOWZjJyxcbiAgICAgICAgc2VwYXJhdG9yOiAnI2VkZjFmNycsXG4gICAgICAgIHByaW1hcnk6IHBhbGV0dGUucHJpbWFyeSxcbiAgICAgICAgc3VjY2VzczogcGFsZXR0ZS5zdWNjZXNzLFxuICAgICAgICBpbmZvOiBwYWxldHRlLmluZm8sXG4gICAgICAgIHdhcm5pbmc6IHBhbGV0dGUud2FybmluZyxcbiAgICAgICAgZGFuZ2VyOiBwYWxldHRlLmRhbmdlcixcbiAgICAgICAgcHJpbWFyeUxpZ2h0OiAnIzU5OGJmZicsXG4gICAgICAgIHN1Y2Nlc3NMaWdodDogJyMyY2U2OWInLFxuICAgICAgICBpbmZvTGlnaHQ6ICcjNDJhYWZmJyxcbiAgICAgICAgd2FybmluZ0xpZ2h0OiAnI2ZmYzk0ZCcsXG4gICAgICAgIGRhbmdlckxpZ2h0OiAnI2ZmNzA4ZCcsXG4gICAgfSxcbn07XG5cbnZhciBwYWxldHRlJDEgPSB7XG4gICAgcHJpbWFyeTogJyNhMTZlZmYnLFxuICAgIHN1Y2Nlc3M6ICcjMDBkNjhmJyxcbiAgICBpbmZvOiAnIzAwOTVmZicsXG4gICAgd2FybmluZzogJyNmZmFhMDAnLFxuICAgIGRhbmdlcjogJyNmZjNkNzEnLFxufTtcbnZhciBDT1NNSUNfVEhFTUUgPSB7XG4gICAgbmFtZTogJ2Nvc21pYycsXG4gICAgdmFyaWFibGVzOiB7XG4gICAgICAgIGZvbnRNYWluOiAnT3BlbiBTYW5zLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgZm9udFNlY29uZGFyeTogJ1JhbGV3YXksIHNhbnMtc2VyaWYnLFxuICAgICAgICBiZzogJyMzMjMyNTknLFxuICAgICAgICBiZzI6ICcjMjUyNTQ3JyxcbiAgICAgICAgYmczOiAnIzFiMWIzOCcsXG4gICAgICAgIGJnNDogJyMxMzEzMmInLFxuICAgICAgICBib3JkZXI6ICcjMzIzMjU5JyxcbiAgICAgICAgYm9yZGVyMjogJyMyNTI1NDcnLFxuICAgICAgICBib3JkZXIzOiAnIzFiMWIzOCcsXG4gICAgICAgIGJvcmRlcjQ6ICcjMTMxMzJiJyxcbiAgICAgICAgYm9yZGVyNTogJyMxMzEzMmInLFxuICAgICAgICBmZzogJyNiNGI0ZGInLFxuICAgICAgICBmZ0hlYWRpbmc6ICcjZmZmZmZmJyxcbiAgICAgICAgZmdUZXh0OiAnI2ZmZmZmZicsXG4gICAgICAgIGZnSGlnaGxpZ2h0OiBwYWxldHRlJDEucHJpbWFyeSxcbiAgICAgICAgbGF5b3V0Qmc6ICcjMTUxYTMwJyxcbiAgICAgICAgc2VwYXJhdG9yOiAnIzE1MWEzMCcsXG4gICAgICAgIHByaW1hcnk6IHBhbGV0dGUkMS5wcmltYXJ5LFxuICAgICAgICBzdWNjZXNzOiBwYWxldHRlJDEuc3VjY2VzcyxcbiAgICAgICAgaW5mbzogcGFsZXR0ZSQxLmluZm8sXG4gICAgICAgIHdhcm5pbmc6IHBhbGV0dGUkMS53YXJuaW5nLFxuICAgICAgICBkYW5nZXI6IHBhbGV0dGUkMS5kYW5nZXIsXG4gICAgICAgIHByaW1hcnlMaWdodDogJyNiMThhZmYnLFxuICAgICAgICBzdWNjZXNzTGlnaHQ6ICcjMmNlNjliJyxcbiAgICAgICAgaW5mb0xpZ2h0OiAnIzQyYWFmZicsXG4gICAgICAgIHdhcm5pbmdMaWdodDogJyNmZmM5NGQnLFxuICAgICAgICBkYW5nZXJMaWdodDogJyNmZjcwOGQnLFxuICAgIH0sXG59O1xuXG52YXIgcGFsZXR0ZSQyID0ge1xuICAgIHByaW1hcnk6ICcjNzNhMWZmJyxcbiAgICBzdWNjZXNzOiAnIzVkY2ZlMycsXG4gICAgaW5mbzogJyNiYTdmZWMnLFxuICAgIHdhcm5pbmc6ICcjZmZhMzZiJyxcbiAgICBkYW5nZXI6ICcjZmY2YjgzJyxcbn07XG52YXIgQ09SUE9SQVRFX1RIRU1FID0ge1xuICAgIG5hbWU6ICdjb3Jwb3JhdGUnLFxuICAgIGJhc2U6ICdkZWZhdWx0JyxcbiAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgZm9udE1haW46ICdPcGVuIFNhbnMsIHNhbnMtc2VyaWYnLFxuICAgICAgICBmb250U2Vjb25kYXJ5OiAnUmFsZXdheSwgc2Fucy1zZXJpZicsXG4gICAgICAgIGJnOiAnI2ZmZmZmZicsXG4gICAgICAgIGJnMjogJyNmN2Y5ZmMnLFxuICAgICAgICBiZzM6ICcjZWRmMWY3JyxcbiAgICAgICAgYmc0OiAnI2U0ZTlmMicsXG4gICAgICAgIGJvcmRlcjogJyNmZmZmZmYnLFxuICAgICAgICBib3JkZXIyOiAnI2Y3ZjlmYycsXG4gICAgICAgIGJvcmRlcjM6ICcjZWRmMWY3JyxcbiAgICAgICAgYm9yZGVyNDogJyNlNGU5ZjInLFxuICAgICAgICBib3JkZXI1OiAnI2M1Y2VlMCcsXG4gICAgICAgIGZnOiAnIzhmOWJiMycsXG4gICAgICAgIGZnSGVhZGluZzogJyMxYTIxMzgnLFxuICAgICAgICBmZ1RleHQ6ICcjMWEyMTM4JyxcbiAgICAgICAgZmdIaWdobGlnaHQ6IHBhbGV0dGUkMi5wcmltYXJ5LFxuICAgICAgICBsYXlvdXRCZzogJyNmN2Y5ZmMnLFxuICAgICAgICBzZXBhcmF0b3I6ICcjZWRmMWY3JyxcbiAgICAgICAgcHJpbWFyeTogcGFsZXR0ZSQyLnByaW1hcnksXG4gICAgICAgIHN1Y2Nlc3M6IHBhbGV0dGUkMi5zdWNjZXNzLFxuICAgICAgICBpbmZvOiBwYWxldHRlJDIuaW5mbyxcbiAgICAgICAgd2FybmluZzogcGFsZXR0ZSQyLndhcm5pbmcsXG4gICAgICAgIGRhbmdlcjogcGFsZXR0ZSQyLmRhbmdlcixcbiAgICAgICAgcHJpbWFyeUxpZ2h0OiAnIzU5OGJmZicsXG4gICAgICAgIHN1Y2Nlc3NMaWdodDogJyMyY2U2OWInLFxuICAgICAgICBpbmZvTGlnaHQ6ICcjNDJhYWZmJyxcbiAgICAgICAgd2FybmluZ0xpZ2h0OiAnI2ZmYzk0ZCcsXG4gICAgICAgIGRhbmdlckxpZ2h0OiAnI2ZmNzA4ZCcsXG4gICAgfSxcbn07XG5cbnZhciBwYWxldHRlJDMgPSB7XG4gICAgcHJpbWFyeTogJyMzMzY2ZmYnLFxuICAgIHN1Y2Nlc3M6ICcjMDBkNjhmJyxcbiAgICBpbmZvOiAnIzAwOTVmZicsXG4gICAgd2FybmluZzogJyNmZmFhMDAnLFxuICAgIGRhbmdlcjogJyNmZjNkNzEnLFxufTtcbnZhciBEQVJLX1RIRU1FID0ge1xuICAgIG5hbWU6ICdkYXJrJyxcbiAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgZm9udE1haW46ICdPcGVuIFNhbnMsIHNhbnMtc2VyaWYnLFxuICAgICAgICBmb250U2Vjb25kYXJ5OiAnUmFsZXdheSwgc2Fucy1zZXJpZicsXG4gICAgICAgIGJnOiAnIzIyMmI0NScsXG4gICAgICAgIGJnMjogJyMxYTIxMzgnLFxuICAgICAgICBiZzM6ICcjMTUxYTMwJyxcbiAgICAgICAgYmc0OiAnIzEwMTQyNicsXG4gICAgICAgIGJvcmRlcjogJyMyMjJiNDUnLFxuICAgICAgICBib3JkZXIyOiAnIzFhMjEzOCcsXG4gICAgICAgIGJvcmRlcjM6ICcjMTUxYTMwJyxcbiAgICAgICAgYm9yZGVyNDogJyMxMDE0MjYnLFxuICAgICAgICBib3JkZXI1OiAnIzEwMTQyNicsXG4gICAgICAgIGZnOiAnIzhmOWJiMycsXG4gICAgICAgIGZnSGVhZGluZzogJyNmZmZmZmYnLFxuICAgICAgICBmZ1RleHQ6ICcjZmZmZmZmJyxcbiAgICAgICAgZmdIaWdobGlnaHQ6IHBhbGV0dGUkMy5wcmltYXJ5LFxuICAgICAgICBsYXlvdXRCZzogJyMxYjFiMzgnLFxuICAgICAgICBzZXBhcmF0b3I6ICcjMWIxYjM4JyxcbiAgICAgICAgcHJpbWFyeTogcGFsZXR0ZSQzLnByaW1hcnksXG4gICAgICAgIHN1Y2Nlc3M6IHBhbGV0dGUkMy5zdWNjZXNzLFxuICAgICAgICBpbmZvOiBwYWxldHRlJDMuaW5mbyxcbiAgICAgICAgd2FybmluZzogcGFsZXR0ZSQzLndhcm5pbmcsXG4gICAgICAgIGRhbmdlcjogcGFsZXR0ZSQzLmRhbmdlcixcbiAgICAgICAgcHJpbWFyeUxpZ2h0OiAnIzU5OGJmZicsXG4gICAgICAgIHN1Y2Nlc3NMaWdodDogJyMyY2U2OWInLFxuICAgICAgICBpbmZvTGlnaHQ6ICcjNDJhYWZmJyxcbiAgICAgICAgd2FybmluZ0xpZ2h0OiAnI2ZmYzk0ZCcsXG4gICAgICAgIGRhbmdlckxpZ2h0OiAnI2ZmNzA4ZCcsXG4gICAgfSxcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBCVUlMVF9JTl9USEVNRVMgPSBbXG4gICAgREVGQVVMVF9USEVNRSxcbiAgICBDT1NNSUNfVEhFTUUsXG4gICAgQ09SUE9SQVRFX1RIRU1FLFxuICAgIERBUktfVEhFTUUsXG5dO1xuLyoqXG4gKiBKcyBUaGVtZXMgcmVnaXN0cnkgLSBwcm92aWRlcyBhY2Nlc3MgdG8gdGhlIEpTIHRoZW1lcycgdmFyaWFibGVzLlxuICogVXN1YWxseSBzaG91bGRuJ3QgYmUgdXNlZCBkaXJlY3RseSwgYnV0IHRocm91Z2ggdGhlIE5iVGhlbWVTZXJ2aWNlIGNsYXNzIG1ldGhvZHMgKGdldEpzVGhlbWUpLlxuICovXG52YXIgTmJKU1RoZW1lc1JlZ2lzdHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iSlNUaGVtZXNSZWdpc3RyeShidWlsdEluVGhlbWVzLCBuZXdUaGVtZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG5ld1RoZW1lcyA9PT0gdm9pZCAwKSB7IG5ld1RoZW1lcyA9IFtdOyB9XG4gICAgICAgIHRoaXMudGhlbWVzID0ge307XG4gICAgICAgIHZhciB0aGVtZXMgPSB0aGlzLmNvbWJpbmVCeU5hbWVzKG5ld1RoZW1lcywgYnVpbHRJblRoZW1lcyk7XG4gICAgICAgIHRoZW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgX3RoaXMucmVnaXN0ZXIodGhlbWUsIHRoZW1lLm5hbWUsIHRoZW1lLmJhc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbmV3IEpTIHRoZW1lXG4gICAgICogQHBhcmFtIGNvbmZpZyBhbnlcbiAgICAgKiBAcGFyYW0gdGhlbWVOYW1lIHN0cmluZ1xuICAgICAqIEBwYXJhbSBiYXNlVGhlbWUgc3RyaW5nXG4gICAgICovXG4gICAgTmJKU1RoZW1lc1JlZ2lzdHJ5LnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChjb25maWcsIHRoZW1lTmFtZSwgYmFzZVRoZW1lKSB7XG4gICAgICAgIHZhciBiYXNlID0gdGhpcy5oYXMoYmFzZVRoZW1lKSA/IHRoaXMuZ2V0KGJhc2VUaGVtZSkgOiB7fTtcbiAgICAgICAgdGhpcy50aGVtZXNbdGhlbWVOYW1lXSA9IHRoaXMubWVyZ2VEZWVwKHt9LCBiYXNlLCBjb25maWcpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIHRoZW1lIGlzIHJlZ2lzdGVyZWRcbiAgICAgKiBAcGFyYW0gdGhlbWVOYW1lXG4gICAgICogQHJldHVybnMgYm9vbGVhblxuICAgICAqL1xuICAgIE5iSlNUaGVtZXNSZWdpc3RyeS5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKHRoZW1lTmFtZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnRoZW1lc1t0aGVtZU5hbWVdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgdGhlbWVcbiAgICAgKiBAcGFyYW0gdGhlbWVOYW1lXG4gICAgICogQHJldHVybnMgTmJKU1RoZW1lT3B0aW9uc1xuICAgICAqL1xuICAgIE5iSlNUaGVtZXNSZWdpc3RyeS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHRoZW1lTmFtZSkge1xuICAgICAgICBpZiAoIXRoaXMudGhlbWVzW3RoZW1lTmFtZV0pIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiTmJUaGVtZUNvbmZpZzogbm8gdGhlbWUgJ1wiICsgdGhlbWVOYW1lICsgXCInIGZvdW5kIHJlZ2lzdGVyZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudGhlbWVzW3RoZW1lTmFtZV0pKTtcbiAgICB9O1xuICAgIE5iSlNUaGVtZXNSZWdpc3RyeS5wcm90b3R5cGUuY29tYmluZUJ5TmFtZXMgPSBmdW5jdGlvbiAobmV3VGhlbWVzLCBvbGRUaGVtZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG5ld1RoZW1lcykge1xuICAgICAgICAgICAgdmFyIG1lcmdlZFRoZW1lc18xID0gW107XG4gICAgICAgICAgICBuZXdUaGVtZXMuZm9yRWFjaChmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2FtZU9sZCA9IG9sZFRoZW1lcy5maW5kKGZ1bmN0aW9uICh0bSkgeyByZXR1cm4gdG0ubmFtZSA9PT0gdGhlbWUubmFtZTsgfSlcbiAgICAgICAgICAgICAgICAgICAgfHwge307XG4gICAgICAgICAgICAgICAgdmFyIG1lcmdlZFRoZW1lID0gX3RoaXMubWVyZ2VEZWVwKHt9LCBzYW1lT2xkLCB0aGVtZSk7XG4gICAgICAgICAgICAgICAgbWVyZ2VkVGhlbWVzXzEucHVzaChtZXJnZWRUaGVtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9sZFRoZW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgICAgIGlmICghbWVyZ2VkVGhlbWVzXzEuZmluZChmdW5jdGlvbiAodG0pIHsgcmV0dXJuIHRtLm5hbWUgPT09IHRoZW1lLm5hbWU7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFRoZW1lc18xLnB1c2godGhlbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZFRoZW1lc18xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvbGRUaGVtZXM7XG4gICAgfTtcbiAgICBOYkpTVGhlbWVzUmVnaXN0cnkucHJvdG90eXBlLmlzT2JqZWN0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW0pO1xuICAgIH07XG4gICAgLy8gVE9ETzogbW92ZSB0byBoZWxwZXJzXG4gICAgTmJKU1RoZW1lc1JlZ2lzdHJ5LnByb3RvdHlwZS5tZXJnZURlZXAgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBzb3VyY2VzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc291cmNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXMuc2hpZnQoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNPYmplY3QodGFyZ2V0KSAmJiB0aGlzLmlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc09iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIChfYSA9IHt9LCBfYVtrZXldID0ge30sIF9hKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZURlZXAodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCAoX2IgPSB7fSwgX2Jba2V5XSA9IHNvdXJjZVtrZXldLCBfYikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZURlZXAuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RhcmdldF0sIHNvdXJjZXMpKTtcbiAgICB9O1xuICAgIE5iSlNUaGVtZXNSZWdpc3RyeSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oMCwgSW5qZWN0KE5CX0JVSUxUX0lOX0pTX1RIRU1FUykpLFxuICAgICAgICBfX3BhcmFtKDEsIEluamVjdChOQl9KU19USEVNRVMpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtBcnJheSwgQXJyYXldKVxuICAgIF0sIE5iSlNUaGVtZXNSZWdpc3RyeSk7XG4gICAgcmV0dXJuIE5iSlNUaGVtZXNSZWdpc3RyeTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBERUZBVUxUX01FRElBX0JSRUFLUE9JTlRTID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogJ3hzJyxcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICdpcycsXG4gICAgICAgIHdpZHRoOiA0MDAsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICdzbScsXG4gICAgICAgIHdpZHRoOiA1NzYsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICdtZCcsXG4gICAgICAgIHdpZHRoOiA3NjgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICdsZycsXG4gICAgICAgIHdpZHRoOiA5OTIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICd4bCcsXG4gICAgICAgIHdpZHRoOiAxMjAwLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAneHhsJyxcbiAgICAgICAgd2lkdGg6IDE0MDAsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICd4eHhsJyxcbiAgICAgICAgd2lkdGg6IDE2MDAsXG4gICAgfSxcbl07XG4vKipcbiAqIE1hbmFnZXMgbWVkaWEgYnJlYWtwb2ludHNcbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYXZhaWxhYmxlIG1lZGlhIGJyZWFrcG9pbnRzIHRvIGNvbnZlcnQgd2luZG93IHdpZHRoIHRvIGEgY29uZmlndXJlZCBicmVha3BvaW50LFxuICogZS5nLiAyMDBweCAtICp4cyogYnJlYWtwb2ludFxuICovXG52YXIgTmJNZWRpYUJyZWFrcG9pbnRzU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk1lZGlhQnJlYWtwb2ludHNTZXJ2aWNlKGJyZWFrcG9pbnRzKSB7XG4gICAgICAgIHRoaXMuYnJlYWtwb2ludHMgPSBicmVha3BvaW50cztcbiAgICAgICAgdGhpcy5icmVha3BvaW50c01hcCA9IHRoaXMuYnJlYWtwb2ludHMucmVkdWNlKGZ1bmN0aW9uIChyZXMsIGIpIHtcbiAgICAgICAgICAgIHJlc1tiLm5hbWVdID0gYi53aWR0aDtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvbmZpZ3VyZWQgYnJlYWtwb2ludCBieSB3aWR0aFxuICAgICAqIEBwYXJhbSB3aWR0aCBudW1iZXJcbiAgICAgKiBAcmV0dXJucyB7Wnx7bmFtZTogc3RyaW5nLCB3aWR0aDogbnVtYmVyfX1cbiAgICAgKi9cbiAgICBOYk1lZGlhQnJlYWtwb2ludHNTZXJ2aWNlLnByb3RvdHlwZS5nZXRCeVdpZHRoID0gZnVuY3Rpb24gKHdpZHRoKSB7XG4gICAgICAgIHZhciB1bmtub3duID0geyBuYW1lOiAndW5rbm93bicsIHdpZHRoOiB3aWR0aCB9O1xuICAgICAgICB2YXIgYnJlYWtwb2ludHMgPSB0aGlzLmdldEJyZWFrcG9pbnRzKCk7XG4gICAgICAgIHJldHVybiBicmVha3BvaW50c1xuICAgICAgICAgICAgLmZpbmQoZnVuY3Rpb24gKHBvaW50LCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIG5leHQgPSBicmVha3BvaW50c1tpbmRleCArIDFdO1xuICAgICAgICAgICAgcmV0dXJuIHdpZHRoID49IHBvaW50LndpZHRoICYmICghbmV4dCB8fCB3aWR0aCA8IG5leHQud2lkdGgpO1xuICAgICAgICB9KSB8fCB1bmtub3duO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvbmZpZ3VyZWQgYnJlYWtwb2ludCBieSBuYW1lXG4gICAgICogQHBhcmFtIG5hbWUgc3RyaW5nXG4gICAgICogQHJldHVybnMgTmJNZWRpYUJyZWFrcG9pbnRcbiAgICAgKi9cbiAgICBOYk1lZGlhQnJlYWtwb2ludHNTZXJ2aWNlLnByb3RvdHlwZS5nZXRCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgdW5rbm93biA9IHsgbmFtZTogJ3Vua25vd24nLCB3aWR0aDogTmFOIH07XG4gICAgICAgIHZhciBicmVha3BvaW50cyA9IHRoaXMuZ2V0QnJlYWtwb2ludHMoKTtcbiAgICAgICAgcmV0dXJuIGJyZWFrcG9pbnRzLmZpbmQoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiBuYW1lID09PSBwb2ludC5uYW1lOyB9KSB8fCB1bmtub3duO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgY29uZmlndXJlZCBicmVha3BvaW50cyBmb3IgdGhlIHRoZW1lXG4gICAgICogQHJldHVybnMgTmJNZWRpYUJyZWFrcG9pbnRbXVxuICAgICAqL1xuICAgIE5iTWVkaWFCcmVha3BvaW50c1NlcnZpY2UucHJvdG90eXBlLmdldEJyZWFrcG9pbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5icmVha3BvaW50cztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBtYXAgb2YgY29uZmlndXJlZCBicmVha3BvaW50cyBmb3IgdGhlIHRoZW1lXG4gICAgICogQHJldHVybnMge1twOiBzdHJpbmddOiBudW1iZXJ9XG4gICAgICovXG4gICAgTmJNZWRpYUJyZWFrcG9pbnRzU2VydmljZS5wcm90b3R5cGUuZ2V0QnJlYWtwb2ludHNNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJyZWFrcG9pbnRzTWFwO1xuICAgIH07XG4gICAgTmJNZWRpYUJyZWFrcG9pbnRzU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oMCwgSW5qZWN0KE5CX01FRElBX0JSRUFLUE9JTlRTKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICBdLCBOYk1lZGlhQnJlYWtwb2ludHNTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJNZWRpYUJyZWFrcG9pbnRzU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogTWFpbiBOZWJ1bGFyIHNlcnZpY2UuIEluY2x1ZGVzIHZhcmlvdXMgaGVscGVyIG1ldGhvZHMuXG4gKi9cbnZhciBOYlRoZW1lU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRoZW1lU2VydmljZShvcHRpb25zLCBicmVha3BvaW50U2VydmljZSwganNUaGVtZXNSZWdpc3RyeSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmJyZWFrcG9pbnRTZXJ2aWNlID0gYnJlYWtwb2ludFNlcnZpY2U7XG4gICAgICAgIHRoaXMuanNUaGVtZXNSZWdpc3RyeSA9IGpzVGhlbWVzUmVnaXN0cnk7XG4gICAgICAgIHRoaXMudGhlbWVDaGFuZ2VzJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuICAgICAgICB0aGlzLmFwcGVuZExheW91dENsYXNzJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMucmVtb3ZlTGF5b3V0Q2xhc3MkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VXaW5kb3dXaWR0aCQgPSBuZXcgUmVwbGF5U3ViamVjdCgyKTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5uYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVRoZW1lKG9wdGlvbnMubmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIGN1cnJlbnQgYXBwbGljYXRpb24gdGhlbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqL1xuICAgIE5iVGhlbWVTZXJ2aWNlLnByb3RvdHlwZS5jaGFuZ2VUaGVtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRoaXMudGhlbWVDaGFuZ2VzJC5uZXh0KHsgbmFtZTogbmFtZSwgcHJldmlvdXM6IHRoaXMuY3VycmVudFRoZW1lIH0pO1xuICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZSA9IG5hbWU7XG4gICAgfTtcbiAgICBOYlRoZW1lU2VydmljZS5wcm90b3R5cGUuY2hhbmdlV2luZG93V2lkdGggPSBmdW5jdGlvbiAod2lkdGgpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VXaW5kb3dXaWR0aCQubmV4dCh3aWR0aCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdGhlbWUgb2JqZWN0IHdpdGggdmFyaWFibGVzIChjb2xvci9wYWRkaW5ncy9ldGMpIG9uIGEgdGhlbWUgY2hhbmdlLlxuICAgICAqIE9uY2Ugc3Vic2NyaWJlZCAtIHJldHVybnMgY3VycmVudCB0aGVtZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPE5iSlNUaGVtZU9wdGlvbnM+fVxuICAgICAqL1xuICAgIE5iVGhlbWVTZXJ2aWNlLnByb3RvdHlwZS5nZXRKc1RoZW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5vblRoZW1lQ2hhbmdlKCkucGlwZShtYXAoZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuanNUaGVtZXNSZWdpc3RyeS5nZXQodGhlbWUubmFtZSk7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIG1lZGlhIHF1ZXJ5IGJyZWFrcG9pbnQgY2hhbmdlXG4gICAgICogUmV0dXJucyBhIHBhaXIgd2hlcmUgdGhlIGZpcnN0IGl0ZW0gaXMgcHJldmlvdXMgbWVkaWEgYnJlYWtwb2ludCBhbmQgdGhlIHNlY29uZCBpdGVtIGlzIGN1cnJlbnQgYnJlYWtwb2l0LlxuICAgICAqIGBgYHRzXG4gICAgICogIFt7IG5hbWU6ICd4cycsIHdpZHRoOiAwIH0sIHsgbmFtZTogJ21kJywgd2lkdGg6IDc2OCB9XSAvLyBjaGFuZ2UgZnJvbSBgeHNgIHRvIGBtZGBcbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxbTmJNZWRpYUJyZWFrcG9pbnQsIE5iTWVkaWFCcmVha3BvaW50XT59XG4gICAgICovXG4gICAgTmJUaGVtZVNlcnZpY2UucHJvdG90eXBlLm9uTWVkaWFRdWVyeUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlV2luZG93V2lkdGgkXG4gICAgICAgICAgICAucGlwZShzdGFydFdpdGgodW5kZWZpbmVkKSwgcGFpcndpc2UoKSwgbWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHByZXZXaWR0aCA9IF9hWzBdLCB3aWR0aCA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBfdGhpcy5icmVha3BvaW50U2VydmljZS5nZXRCeVdpZHRoKHByZXZXaWR0aCksXG4gICAgICAgICAgICAgICAgX3RoaXMuYnJlYWtwb2ludFNlcnZpY2UuZ2V0QnlXaWR0aCh3aWR0aCksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9KSwgZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHByZXZQb2ludCA9IF9hWzBdLCBwb2ludCA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIHByZXZQb2ludC5uYW1lICE9PSBwb2ludC5uYW1lO1xuICAgICAgICB9KSwgZGlzdGluY3RVbnRpbENoYW5nZWQobnVsbCwgZnVuY3Rpb24gKHBhcmFtcykgeyByZXR1cm4gcGFyYW1zWzBdLm5hbWUgKyBwYXJhbXNbMV0ubmFtZTsgfSksIHNoYXJlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gY3VycmVudCB0aGVtZSBpcyBjaGFuZ2VkXG4gICAgICogQHJldHVybnMge09ic2VydmFibGU8YW55Pn1cbiAgICAgKi9cbiAgICBOYlRoZW1lU2VydmljZS5wcm90b3R5cGUub25UaGVtZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbWVDaGFuZ2VzJC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwZW5kIGEgY2xhc3MgdG8gbmItbGF5b3V0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuICAgICAqL1xuICAgIE5iVGhlbWVTZXJ2aWNlLnByb3RvdHlwZS5hcHBlbmRMYXlvdXRDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRMYXlvdXRDbGFzcyQubmV4dChjbGFzc05hbWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBuZXcgY2xhc3MgaXMgYWRkZWQgdG8gbmItbGF5b3V0IHRocm91Z2ggYGFwcGVuZExheW91dENsYXNzYCBtZXRob2RcbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxhbnk+fVxuICAgICAqL1xuICAgIE5iVGhlbWVTZXJ2aWNlLnByb3RvdHlwZS5vbkFwcGVuZExheW91dENsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBlbmRMYXlvdXRDbGFzcyQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBjbGFzcyBmcm9tIG5iLWxheW91dFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICAgKi9cbiAgICBOYlRoZW1lU2VydmljZS5wcm90b3R5cGUucmVtb3ZlTGF5b3V0Q2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGF5b3V0Q2xhc3MkLm5leHQoY2xhc3NOYW1lKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgY2xhc3MgaXMgcmVtb3ZlZCBmcm9tIG5iLWxheW91dCB0aHJvdWdoIGByZW1vdmVMYXlvdXRDbGFzc2AgbWV0aG9kXG4gICAgICogQHJldHVybnMge09ic2VydmFibGU8YW55Pn1cbiAgICAgKi9cbiAgICBOYlRoZW1lU2VydmljZS5wcm90b3R5cGUub25SZW1vdmVMYXlvdXRDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTGF5b3V0Q2xhc3MkLnBpcGUoc2hhcmUoKSk7XG4gICAgfTtcbiAgICBOYlRoZW1lU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oMCwgSW5qZWN0KE5CX1RIRU1FX09QVElPTlMpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE5iTWVkaWFCcmVha3BvaW50c1NlcnZpY2UsXG4gICAgICAgICAgICBOYkpTVGhlbWVzUmVnaXN0cnldKVxuICAgIF0sIE5iVGhlbWVTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJUaGVtZVNlcnZpY2U7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFNlcnZpY2UgdG8gY29udHJvbCB0aGUgZ2xvYmFsIHBhZ2Ugc3Bpbm5lci5cbiAqL1xudmFyIE5iU3Bpbm5lclNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTcGlubmVyU2VydmljZShkb2N1bWVudCkge1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMubG9hZGVycyA9IFtdO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gJ25iLWdsb2JhbC1zcGlubmVyJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBuZXcgbG9hZGVyIHRvIHRoZSBsaXN0IG9mIGxvYWRlciB0byBiZSBjb21wbGV0ZWQgYmVmb3JlXG4gICAgICogc3Bpbm5lciB3aWxsIGJlIGhpZGRlblxuICAgICAqIEBwYXJhbSBtZXRob2QgUHJvbWlzZTxhbnk+XG4gICAgICovXG4gICAgTmJTcGlubmVyU2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXJMb2FkZXIgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHRoaXMubG9hZGVycy5wdXNoKG1ldGhvZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGxpc3Qgb2YgbG9hZGVyXG4gICAgICovXG4gICAgTmJTcGlubmVyU2VydmljZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubG9hZGVycyA9IFtdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RhcnQgdGhlIGxvYWRlciBwcm9jZXNzLCBzaG93IHNwaW5uZGVyIGFuZCBleGVjdXRlIGxvYWRlcnNcbiAgICAgKi9cbiAgICBOYlNwaW5uZXJTZXJ2aWNlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNob3dTcGlubmVyKCk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUFsbCgpO1xuICAgIH07XG4gICAgTmJTcGlubmVyU2VydmljZS5wcm90b3R5cGUuZXhlY3V0ZUFsbCA9IGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChkb25lID09PSB2b2lkIDApIHsgZG9uZSA9IGZ1bmN0aW9uICgpIHsgfTsgfVxuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLmxvYWRlcnMpLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgX3RoaXMuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgIGRvbmUuY2FsbChudWxsLCB2YWx1ZXMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgLy8gVE9ETzogUHJvbWlzZS5yZWplY3RcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIFRPRE8gaXMgdGhlcmUgYW55IGJldHRlciB3YXkgb2YgZG9pbmcgdGhpcz9cbiAgICBOYlNwaW5uZXJTZXJ2aWNlLnByb3RvdHlwZS5zaG93U3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5nZXRTcGlubmVyRWxlbWVudCgpO1xuICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIGVsLnN0eWxlWydkaXNwbGF5J10gPSAnYmxvY2snO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlNwaW5uZXJTZXJ2aWNlLnByb3RvdHlwZS5oaWRlU3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5nZXRTcGlubmVyRWxlbWVudCgpO1xuICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIGVsLnN0eWxlWydkaXNwbGF5J10gPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iU3Bpbm5lclNlcnZpY2UucHJvdG90eXBlLmdldFNwaW5uZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKTtcbiAgICB9O1xuICAgIE5iU3Bpbm5lclNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX3BhcmFtKDAsIEluamVjdChOQl9ET0NVTUVOVCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG4gICAgXSwgTmJTcGlubmVyU2VydmljZSk7XG4gICAgcmV0dXJuIE5iU3Bpbm5lclNlcnZpY2U7XG59KCkpO1xuXG4vKipcbiAqIExheW91dCBkaXJlY3Rpb24uXG4gKiAqL1xudmFyIE5iTGF5b3V0RGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChOYkxheW91dERpcmVjdGlvbikge1xuICAgIE5iTGF5b3V0RGlyZWN0aW9uW1wiTFRSXCJdID0gXCJsdHJcIjtcbiAgICBOYkxheW91dERpcmVjdGlvbltcIlJUTFwiXSA9IFwicnRsXCI7XG59KShOYkxheW91dERpcmVjdGlvbiB8fCAoTmJMYXlvdXREaXJlY3Rpb24gPSB7fSkpO1xuXG4vKipcbiAqIExheW91dCBkaXJlY3Rpb24gc2V0dGluZyBpbmplY3Rpb24gdG9rZW4uXG4gKiAqL1xudmFyIE5CX0xBWU9VVF9ESVJFQ1RJT04gPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0xheW91dCBkaXJlY3Rpb24nKTtcbi8qKlxuICogTGF5b3V0IERpcmVjdGlvbiBTZXJ2aWNlLlxuICogQWxsb3dzIHRvIHNldCBvciBnZXQgbGF5b3V0IGRpcmVjdGlvbiBhbmQgbGlzdGVuIHRvIGl0cyBjaGFuZ2VzXG4gKi9cbnZhciBOYkxheW91dERpcmVjdGlvblNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJMYXlvdXREaXJlY3Rpb25TZXJ2aWNlKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSB2b2lkIDApIHsgZGlyZWN0aW9uID0gTmJMYXlvdXREaXJlY3Rpb24uTFRSOyB9XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICB0aGlzLiRkaXJlY3Rpb25DaGFuZ2UgPSBuZXcgUmVwbGF5U3ViamVjdCgxKTtcbiAgICAgICAgdGhpcy5zZXREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGxheW91dCBkaXJlY3Rpb24gc2V0IHRvIGxlZnQgdG8gcmlnaHQuXG4gICAgICogQHJldHVybnMgYm9vbGVhbi5cbiAgICAgKiAqL1xuICAgIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZS5wcm90b3R5cGUuaXNMdHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbiA9PT0gTmJMYXlvdXREaXJlY3Rpb24uTFRSO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGxheW91dCBkaXJlY3Rpb24gc2V0IHRvIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMgYm9vbGVhbi5cbiAgICAgKiAqL1xuICAgIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZS5wcm90b3R5cGUuaXNSdGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbiA9PT0gTmJMYXlvdXREaXJlY3Rpb24uUlRMO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjdXJyZW50IGxheW91dCBkaXJlY3Rpb24uXG4gICAgICogQHJldHVybnMgTmJMYXlvdXREaXJlY3Rpb24uXG4gICAgICogKi9cbiAgICBOYkxheW91dERpcmVjdGlvblNlcnZpY2UucHJvdG90eXBlLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBsYXlvdXQgZGlyZWN0aW9uXG4gICAgICogQHBhcmFtIHtOYkxheW91dERpcmVjdGlvbn0gZGlyZWN0aW9uXG4gICAgICovXG4gICAgTmJMYXlvdXREaXJlY3Rpb25TZXJ2aWNlLnByb3RvdHlwZS5zZXREaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICB0aGlzLiRkaXJlY3Rpb25DaGFuZ2UubmV4dChkaXJlY3Rpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gZGlyZWN0aW9uIHdhcyBjaGFuZ2VkLlxuICAgICAqIEByZXR1cm5zIE9ic2VydmFibGU8TmJMYXlvdXREaXJlY3Rpb24+LlxuICAgICAqL1xuICAgIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZS5wcm90b3R5cGUub25EaXJlY3Rpb25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRkaXJlY3Rpb25DaGFuZ2UucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oMCwgT3B0aW9uYWwoKSksIF9fcGFyYW0oMCwgSW5qZWN0KE5CX0xBWU9VVF9ESVJFQ1RJT04pKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSk7XG4gICAgcmV0dXJuIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogTGF5b3V0IHNjcm9sbCBzZXJ2aWNlLiBQcm92aWRlcyBpbmZvcm1hdGlvbiBhYm91dCBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbixcbiAqIGFzIHdlbGwgYXMgbWV0aG9kcyB0byB1cGRhdGUgcG9zaXRpb24gb2YgdGhlIHNjcm9sbC5cbiAqXG4gKiBUaGUgcmVhc29uIHdlIGFkZGVkIHRoaXMgc2VydmljZSBpcyB0aGF0IGluIE5lYnVsYXIgdGhlcmUgYXJlIHR3byBzY3JvbGwgbW9kZXM6XG4gKiAtIHRoZSBkZWZhdWx0IG1vZGUgd2hlbiBzY3JvbGwgaXMgb24gYm9keVxuICogLSBhbmQgdGhlIGB3aXRoU2Nyb2xsYCBtb2RlLCB3aGVuIHNjcm9sbCBpcyByZW1vdmVkIGZyb20gdGhlIGJvZHkgYW5kIG1vdmVkIHRvIGFuIGVsZW1lbnQgaW5zaWRlIG9mIHRoZVxuICogYG5iLWxheW91dGAgY29tcG9uZW50XG4gKi9cbnZhciBOYkxheW91dFNjcm9sbFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJMYXlvdXRTY3JvbGxTZXJ2aWNlKCkge1xuICAgICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uUmVxJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMubWFudWFsU2Nyb2xsJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuc2Nyb2xsJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuc2Nyb2xsYWJsZSQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNjcm9sbCBwb3NpdGlvblxuICAgICAqXG4gICAgICogQHJldHVybnMge09ic2VydmFibGU8TmJTY3JvbGxQb3NpdGlvbj59XG4gICAgICovXG4gICAgTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyLnN1YnNjcmliZShvYnNlcnZlcik7XG4gICAgICAgICAgICBfdGhpcy5zY3JvbGxQb3NpdGlvblJlcSQubmV4dCh7IGxpc3RlbmVyOiBsaXN0ZW5lciB9KTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXN0ZW5lci5jb21wbGV0ZSgpOyB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAgICovXG4gICAgTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLnByb3RvdHlwZS5zY3JvbGxUbyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIGlmICh4ID09PSB2b2lkIDApIHsgeCA9IG51bGw7IH1cbiAgICAgICAgaWYgKHkgPT09IHZvaWQgMCkgeyB5ID0gbnVsbDsgfVxuICAgICAgICB0aGlzLm1hbnVhbFNjcm9sbCQubmV4dCh7IHg6IHgsIHk6IHkgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyZWFtIG9mIHNjcm9sbCBldmVudHNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPGFueT59XG4gICAgICovXG4gICAgTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsJC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPE5iU2Nyb2xsUG9zaXRpb24+LlxuICAgICAqL1xuICAgIE5iTGF5b3V0U2Nyb2xsU2VydmljZS5wcm90b3R5cGUub25NYW51YWxTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hbnVhbFNjcm9sbCQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybnMge1N1YmplY3Q8YW55Pn1cbiAgICAgKi9cbiAgICBOYkxheW91dFNjcm9sbFNlcnZpY2UucHJvdG90eXBlLm9uR2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcm9sbFBvc2l0aW9uUmVxJDtcbiAgICB9O1xuICAgIE5iTGF5b3V0U2Nyb2xsU2VydmljZS5wcm90b3R5cGUub25TY3JvbGxhYmxlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxhYmxlJC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2FueX0gZXZlbnRcbiAgICAgKi9cbiAgICBOYkxheW91dFNjcm9sbFNlcnZpY2UucHJvdG90eXBlLmZpcmVTY3JvbGxDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zY3JvbGwkLm5leHQoZXZlbnQpO1xuICAgIH07XG4gICAgTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLnByb3RvdHlwZS5zY3JvbGxhYmxlID0gZnVuY3Rpb24gKHNjcm9sbGFibGUpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxhYmxlJC5uZXh0KHNjcm9sbGFibGUpO1xuICAgIH07XG4gICAgTmJMYXlvdXRTY3JvbGxTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKVxuICAgIF0sIE5iTGF5b3V0U2Nyb2xsU2VydmljZSk7XG4gICAgcmV0dXJuIE5iTGF5b3V0U2Nyb2xsU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogU2ltcGxlIGhlbHBlciBzZXJ2aWNlIHRvIHJldHVybiBMYXlvdXQgZGltZW5zaW9uc1xuICogRGVwZW5kaW5nIG9mIGN1cnJlbnQgTGF5b3V0IHNjcm9sbCBtb2RlIChkZWZhdWx0IG9yIGB3aXRoU2Nyb2xsYCB3aGVuIHNjcm9sbCBpcyBtb3ZlZCB0byBhbiBlbGVtZW50XG4gKiBpbnNpZGUgb2YgdGhlIGxheW91dCkgY29ycmVzcG9uZGluZyBkaW1lbnNpb25zIHdpbGwgYmUgcmV0dXJucyAgLSBvZiBgZG9jdW1lbnRFbGVtZW50YCBpbiBmaXJzdCBjYXNlIGFuZFxuICogYC5zY3JvbGxhYmxlLWNvbnRhaW5lcmAgaW4gdGhlIHNlY29uZC5cbiAqL1xudmFyIE5iTGF5b3V0UnVsZXJTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iTGF5b3V0UnVsZXJTZXJ2aWNlKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnREaW1lbnNpb25zUmVxJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgZGltZW5zaW9uc1xuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPE5iTGF5b3V0RGltZW5zaW9ucz59XG4gICAgICovXG4gICAgTmJMYXlvdXRSdWxlclNlcnZpY2UucHJvdG90eXBlLmdldERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgICAgICBsaXN0ZW5lci5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgX3RoaXMuY29udGVudERpbWVuc2lvbnNSZXEkLm5leHQoeyBsaXN0ZW5lcjogbGlzdGVuZXIgfSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gbGlzdGVuZXIuY29tcGxldGUoKTsgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHtTdWJqZWN0PGFueT59XG4gICAgICovXG4gICAgTmJMYXlvdXRSdWxlclNlcnZpY2UucHJvdG90eXBlLm9uR2V0RGltZW5zaW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudERpbWVuc2lvbnNSZXEkO1xuICAgIH07XG4gICAgTmJMYXlvdXRSdWxlclNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpXG4gICAgXSwgTmJMYXlvdXRSdWxlclNlcnZpY2UpO1xuICAgIHJldHVybiBOYkxheW91dFJ1bGVyU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYlNoYXJlZE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNoYXJlZE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJTaGFyZWRNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBwcm9iYWJseSB3ZSBkb24ndCBuZWVkIEZvcm1zTW9kdWxlIGluIFNoYXJlZE1vZHVsZVxuICAgICAgICAgICAgICAgIEZvcm1zTW9kdWxlLFxuICAgICAgICAgICAgICAgIFJvdXRlck1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJTaGFyZWRNb2R1bGUpO1xuICAgIHJldHVybiBOYlNoYXJlZE1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogT3ZlcnJpZGVzIGFuZ3VsYXIgY2RrIGZvY3VzIHRyYXAgdG8ga2VlcCByZXN0b3JlIGZ1bmN0aW9uYWxpdHkgaW5zaWRlIHRyYXAuXG4gKiAqL1xudmFyIE5iRm9jdXNUcmFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkZvY3VzVHJhcCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkZvY3VzVHJhcChlbGVtZW50LCBjaGVja2VyLCBuZ1pvbmUsIGRvY3VtZW50LCBkZWZlckFuY2hvcnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZWxlbWVudCwgY2hlY2tlciwgbmdab25lLCBkb2N1bWVudCwgZGVmZXJBbmNob3JzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgX3RoaXMuY2hlY2tlciA9IGNoZWNrZXI7XG4gICAgICAgIF90aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgX3RoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgX3RoaXMuc2F2ZVByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iRm9jdXNUcmFwLnByb3RvdHlwZS5yZXN0b3JlRm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNseUZvY3VzZWRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgIH07XG4gICAgTmJGb2N1c1RyYXAucHJvdG90eXBlLmJsdXJQcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNseUZvY3VzZWRFbGVtZW50LmJsdXIoKTtcbiAgICB9O1xuICAgIE5iRm9jdXNUcmFwLnByb3RvdHlwZS5zYXZlUHJldmlvdXNseUZvY3VzZWRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCA9IHRoaXMuZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICB9O1xuICAgIHJldHVybiBOYkZvY3VzVHJhcDtcbn0oRm9jdXNUcmFwKSk7XG52YXIgTmJGb2N1c1RyYXBGYWN0b3J5U2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJGb2N1c1RyYXBGYWN0b3J5U2VydmljZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlKGNoZWNrZXIsIG5nWm9uZSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY2hlY2tlciwgbmdab25lLCBkb2N1bWVudCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY2hlY2tlciA9IGNoZWNrZXI7XG4gICAgICAgIF90aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgX3RoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgZGVmZXJDYXB0dXJlRWxlbWVudHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYkZvY3VzVHJhcChlbGVtZW50LCB0aGlzLmNoZWNrZXIsIHRoaXMubmdab25lLCB0aGlzLmRvY3VtZW50LCBkZWZlckNhcHR1cmVFbGVtZW50cyk7XG4gICAgfTtcbiAgICBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19wYXJhbSgyLCBJbmplY3QoTkJfRE9DVU1FTlQpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtJbnRlcmFjdGl2aXR5Q2hlY2tlcixcbiAgICAgICAgICAgIE5nWm9uZSwgT2JqZWN0XSlcbiAgICBdLCBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJGb2N1c1RyYXBGYWN0b3J5U2VydmljZTtcbn0oRm9jdXNUcmFwRmFjdG9yeSkpO1xuXG52YXIgTmJGb2N1c0tleU1hbmFnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iRm9jdXNLZXlNYW5hZ2VyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iRm9jdXNLZXlNYW5hZ2VyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBOYkZvY3VzS2V5TWFuYWdlcjtcbn0oRm9jdXNLZXlNYW5hZ2VyKSk7XG52YXIgTmJGb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkZvY3VzS2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlKCkge1xuICAgIH1cbiAgICBOYkZvY3VzS2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYkZvY3VzS2V5TWFuYWdlcihpdGVtcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTmJGb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZTtcbn0oKSk7XG5cbnZhciBOYkFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iQWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5iQWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXI7XG59KEFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyKSk7XG52YXIgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5U2VydmljZSgpIHtcbiAgICB9XG4gICAgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYkFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyKGl0ZW1zKTtcbiAgICB9O1xuICAgIHJldHVybiBOYkFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeVNlcnZpY2U7XG59KCkpO1xudmFyIE5iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlO1xuKGZ1bmN0aW9uIChOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZSkge1xuICAgIE5iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlW05iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlW1wiUkVTRVRfQUNUSVZFXCJdID0gLTFdID0gXCJSRVNFVF9BQ1RJVkVcIjtcbiAgICBOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZVtOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZVtcIkZJUlNUX0FDVElWRVwiXSA9IDBdID0gXCJGSVJTVF9BQ1RJVkVcIjtcbn0pKE5iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlIHx8IChOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZSA9IHt9KSk7XG5cbnZhciBOYkZvY3VzTW9uaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJGb2N1c01vbml0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJGb2N1c01vbml0b3IoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJGb2N1c01vbml0b3IgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpXG4gICAgXSwgTmJGb2N1c01vbml0b3IpO1xuICAgIHJldHVybiBOYkZvY3VzTW9uaXRvcjtcbn0oRm9jdXNNb25pdG9yKSk7XG52YXIgTmJBMTF5TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQTExeU1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJBMTF5TW9kdWxlXzEgPSBOYkExMXlNb2R1bGU7XG4gICAgTmJBMTF5TW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJBMTF5TW9kdWxlXzEsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIE5iRm9jdXNLZXlNYW5hZ2VyRmFjdG9yeVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJGb2N1c01vbml0b3IsIHVzZUNsYXNzOiBGb2N1c01vbml0b3IgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgTmJBMTF5TW9kdWxlXzE7XG4gICAgTmJBMTF5TW9kdWxlID0gTmJBMTF5TW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe30pXG4gICAgXSwgTmJBMTF5TW9kdWxlKTtcbiAgICByZXR1cm4gTmJBMTF5TW9kdWxlO1xufSgpKTtcblxudmFyIE5iUG9ydGFsRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlBvcnRhbERpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlBvcnRhbERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYlBvcnRhbERpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoeyBzZWxlY3RvcjogJ1tuYlBvcnRhbF0nIH0pXG4gICAgXSwgTmJQb3J0YWxEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlBvcnRhbERpcmVjdGl2ZTtcbn0oQ2RrUG9ydGFsKSk7XG52YXIgTmJQb3J0YWxPdXRsZXREaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iUG9ydGFsT3V0bGV0RGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iUG9ydGFsT3V0bGV0RGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iUG9ydGFsT3V0bGV0RGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7IHNlbGVjdG9yOiAnW25iUG9ydGFsT3V0bGV0XScgfSlcbiAgICBdLCBOYlBvcnRhbE91dGxldERpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iUG9ydGFsT3V0bGV0RGlyZWN0aXZlO1xufShDZGtQb3J0YWxPdXRsZXQpKTtcbnZhciBOYkNvbXBvbmVudFBvcnRhbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJDb21wb25lbnRQb3J0YWwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJDb21wb25lbnRQb3J0YWwoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5iQ29tcG9uZW50UG9ydGFsO1xufShDb21wb25lbnRQb3J0YWwpKTtcbnZhciBOYk92ZXJsYXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iT3ZlcmxheSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYk92ZXJsYXkoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJPdmVybGF5ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKVxuICAgIF0sIE5iT3ZlcmxheSk7XG4gICAgcmV0dXJuIE5iT3ZlcmxheTtcbn0oT3ZlcmxheSkpO1xudmFyIE5iT3ZlcmxheVBvc2l0aW9uQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJPdmVybGF5UG9zaXRpb25CdWlsZGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iT3ZlcmxheVBvc2l0aW9uQnVpbGRlcigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYk92ZXJsYXlQb3NpdGlvbkJ1aWxkZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpXG4gICAgXSwgTmJPdmVybGF5UG9zaXRpb25CdWlsZGVyKTtcbiAgICByZXR1cm4gTmJPdmVybGF5UG9zaXRpb25CdWlsZGVyO1xufShPdmVybGF5UG9zaXRpb25CdWlsZGVyKSk7XG52YXIgTmJUZW1wbGF0ZVBvcnRhbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJUZW1wbGF0ZVBvcnRhbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRlbXBsYXRlUG9ydGFsKHRlbXBsYXRlLCB2aWV3Q29udGFpbmVyUmVmLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB0ZW1wbGF0ZSwgdmlld0NvbnRhaW5lclJlZiwgY29udGV4dCkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5iVGVtcGxhdGVQb3J0YWw7XG59KFRlbXBsYXRlUG9ydGFsKSk7XG52YXIgTmJPdmVybGF5Q29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYk92ZXJsYXlDb250YWluZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJPdmVybGF5Q29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iT3ZlcmxheUNvbnRhaW5lciA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKClcbiAgICBdLCBOYk92ZXJsYXlDb250YWluZXIpO1xuICAgIHJldHVybiBOYk92ZXJsYXlDb250YWluZXI7XG59KE92ZXJsYXlDb250YWluZXIpKTtcbnZhciBOYkZsZXhpYmxlQ29ubmVjdGVkUG9zaXRpb25TdHJhdGVneSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJGbGV4aWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3ksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJGbGV4aWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5iRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5O1xufShGbGV4aWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3kpKTtcbnZhciBOYlBvcnRhbEluamVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlBvcnRhbEluamVjdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iUG9ydGFsSW5qZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5iUG9ydGFsSW5qZWN0b3I7XG59KFBvcnRhbEluamVjdG9yKSk7XG52YXIgQ0RLX01PRFVMRVMgPSBbT3ZlcmxheU1vZHVsZSwgUG9ydGFsTW9kdWxlXTtcbi8qKlxuICogVGhpcyBtb2R1bGUgaGVscHMgdXMgdG8ga2VlcCBhbGwgYW5ndWxhci9jZGsgZGVwcyBpbnNpZGUgb3VyIGNkayBtb2R1bGUgdmlhIHByb3ZpZGluZyBhbGlhc2VzLlxuICogQXBwcm9hY2ggd2lsbCBoZWxwIHVzIG1vdmUgY2RrIGluIHNlcGFyYXRlIG5wbSBwYWNrYWdlIGFuZCByZWZhY3RvciBuZWJ1bGFyL3RoZW1lIGNvZGUuXG4gKiAqL1xudmFyIE5iQ2RrTWFwcGluZ01vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkNka01hcHBpbmdNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iQ2RrTWFwcGluZ01vZHVsZV8xID0gTmJDZGtNYXBwaW5nTW9kdWxlO1xuICAgIE5iQ2RrTWFwcGluZ01vZHVsZS5mb3JSb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iQ2RrTWFwcGluZ01vZHVsZV8xLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgTmJPdmVybGF5LFxuICAgICAgICAgICAgICAgIE5iT3ZlcmxheVBvc2l0aW9uQnVpbGRlcixcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgTmJDZGtNYXBwaW5nTW9kdWxlXzE7XG4gICAgTmJDZGtNYXBwaW5nTW9kdWxlID0gTmJDZGtNYXBwaW5nTW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogX19zcHJlYWRBcnJheXMoQ0RLX01PRFVMRVMpLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoQ0RLX01PRFVMRVMsIFtcbiAgICAgICAgICAgICAgICBOYlBvcnRhbERpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBOYlBvcnRhbE91dGxldERpcmVjdGl2ZSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJQb3J0YWxEaXJlY3RpdmUsIE5iUG9ydGFsT3V0bGV0RGlyZWN0aXZlXSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkNka01hcHBpbmdNb2R1bGUpO1xuICAgIHJldHVybiBOYkNka01hcHBpbmdNb2R1bGU7XG59KCkpO1xuXG52YXIgTmJQbGF0Zm9ybSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJQbGF0Zm9ybSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlBsYXRmb3JtKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iUGxhdGZvcm0uybVwcm92ID0gybXJtWRlZmluZUluamVjdGFibGUoeyBmYWN0b3J5OiBmdW5jdGlvbiBOYlBsYXRmb3JtX0ZhY3RvcnkoKSB7IHJldHVybiBuZXcgUGxhdGZvcm0oybXJtWluamVjdChQTEFURk9STV9JRCwgOCkpOyB9LCB0b2tlbjogTmJQbGF0Zm9ybSwgcHJvdmlkZWRJbjogXCJyb290XCIgfSk7XG4gICAgTmJQbGF0Zm9ybSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKHtcbiAgICAgICAgICAgIHByb3ZpZGVkSW46ICdyb290JyxcbiAgICAgICAgICAgIHVzZUNsYXNzOiBQbGF0Zm9ybSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlBsYXRmb3JtKTtcbiAgICByZXR1cm4gTmJQbGF0Zm9ybTtcbn0oUGxhdGZvcm0pKTtcblxuLyoqXG4gKiBQcm92aWRlcyBuYi1sYXlvdXQgYXMgb3ZlcmxheSBjb250YWluZXIuXG4gKiBDb250YWluZXIgaGFzIHRvIGJlIGNsZWFyZWQgd2hlbiBsYXlvdXQgZGVzdHJveXMuXG4gKiBBbm90aGVyIHdheSBwcmV2aW91cyB2ZXJzaW9uIG9mIHRoZSBjb250YWluZXIgd2lsbCBiZSB1c2VkXG4gKiBidXQgaXQgaXNuJ3QgaW5zZXJ0ZWQgaW4gRE9NIGFuZCBleGlzdHMgaW4gbWVtb3J5IG9ubHkuXG4gKiBUaGlzIGNhc2UgaW1wb3J0YW50IG9ubHkgaWYgeW91IHN3aXRjaCBiZXR3ZWVuIG11bHRpcGxlIGxheW91dHMuXG4gKiAqL1xudmFyIE5iT3ZlcmxheUNvbnRhaW5lckFkYXB0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iT3ZlcmxheUNvbnRhaW5lckFkYXB0ZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlcigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYk92ZXJsYXlDb250YWluZXJBZGFwdGVyLnByb3RvdHlwZS5zZXRDb250YWluZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH07XG4gICAgTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlci5wcm90b3R5cGUuY2xlYXJDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlbWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBOYk92ZXJsYXlDb250YWluZXJBZGFwdGVyLnByb3RvdHlwZS5fY3JlYXRlQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjZGstb3ZlcmxheS1jb250YWluZXInKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlbWVudCA9IGNvbnRhaW5lcjtcbiAgICB9O1xuICAgIE5iT3ZlcmxheUNvbnRhaW5lckFkYXB0ZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpXG4gICAgXSwgTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlcik7XG4gICAgcmV0dXJuIE5iT3ZlcmxheUNvbnRhaW5lckFkYXB0ZXI7XG59KE5iT3ZlcmxheUNvbnRhaW5lcikpO1xuXG52YXIgTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlZpZXdwb3J0UnVsZXJBZGFwdGVyKHBsYXRmb3JtLCBuZ1pvbmUsIHJ1bGVyLCBzY3JvbGwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGxhdGZvcm0sIG5nWm9uZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucnVsZXIgPSBydWxlcjtcbiAgICAgICAgX3RoaXMuc2Nyb2xsID0gc2Nyb2xsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iVmlld3BvcnRSdWxlckFkYXB0ZXIucHJvdG90eXBlLmdldFZpZXdwb3J0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlcztcbiAgICAgICAgLypcbiAgICAgICAgKiBnZXREaW1lbnNpb25zIGNhbGwgaXMgcmVhbGx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbi5cbiAgICAgICAgKiBBbmQgd2UgaGF2ZSB0byBjb25mb3JtIHdpdGggdGhlIGludGVyZmFjZSBvZiB0aGUgb3JpZ2luYWwgc2VydmljZS5cbiAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnJ1bGVyLmdldERpbWVuc2lvbnMoKVxuICAgICAgICAgICAgLnBpcGUobWFwKGZ1bmN0aW9uIChkaW1lbnNpb25zKSB7IHJldHVybiAoeyB3aWR0aDogZGltZW5zaW9ucy5jbGllbnRXaWR0aCwgaGVpZ2h0OiBkaW1lbnNpb25zLmNsaWVudEhlaWdodCB9KTsgfSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZWN0KSB7IHJldHVybiByZXMgPSByZWN0OyB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIE5iVmlld3BvcnRSdWxlckFkYXB0ZXIucHJvdG90eXBlLmdldFZpZXdwb3J0U2Nyb2xsUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXM7XG4gICAgICAgIC8qXG4gICAgICAgICogZ2V0UG9zaXRpb24gY2FsbCBpcyByZWFsbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uLlxuICAgICAgICAqIEFuZCB3ZSBoYXZlIHRvIGNvbmZvcm0gd2l0aCB0aGUgaW50ZXJmYWNlIG9mIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLlxuICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2Nyb2xsLmdldFBvc2l0aW9uKClcbiAgICAgICAgICAgIC5waXBlKG1hcChmdW5jdGlvbiAocG9zaXRpb24pIHsgcmV0dXJuICh7IHRvcDogcG9zaXRpb24ueSwgbGVmdDogcG9zaXRpb24ueCB9KTsgfSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChwb3NpdGlvbikgeyByZXR1cm4gcmVzID0gcG9zaXRpb247IH0pO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJQbGF0Zm9ybSwgTmdab25lLFxuICAgICAgICAgICAgTmJMYXlvdXRSdWxlclNlcnZpY2UsXG4gICAgICAgICAgICBOYkxheW91dFNjcm9sbFNlcnZpY2VdKVxuICAgIF0sIE5iVmlld3BvcnRSdWxlckFkYXB0ZXIpO1xuICAgIHJldHVybiBOYlZpZXdwb3J0UnVsZXJBZGFwdGVyO1xufShWaWV3cG9ydFJ1bGVyKSk7XG5cbnZhciBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbjtcbihmdW5jdGlvbiAoTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24pIHtcbiAgICBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbltcIlRPUF9TVEFSVFwiXSA9IFwidG9wLXN0YXJ0XCI7XG4gICAgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb25bXCJUT1BfRU5EXCJdID0gXCJ0b3AtZW5kXCI7XG4gICAgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb25bXCJCT1RUT01fU1RBUlRcIl0gPSBcImJvdHRvbS1zdGFydFwiO1xuICAgIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uW1wiQk9UVE9NX0VORFwiXSA9IFwiYm90dG9tLWVuZFwiO1xufSkoTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24gfHwgKE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uID0ge30pKTtcbnZhciBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb247XG4oZnVuY3Rpb24gKE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbikge1xuICAgIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbltcIlRPUF9SSUdIVFwiXSA9IFwidG9wLXJpZ2h0XCI7XG4gICAgTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uW1wiVE9QX0xFRlRcIl0gPSBcInRvcC1sZWZ0XCI7XG4gICAgTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uW1wiQk9UVE9NX1JJR0hUXCJdID0gXCJib3R0b20tcmlnaHRcIjtcbiAgICBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb25bXCJCT1RUT01fTEVGVFwiXSA9IFwiYm90dG9tLWxlZnRcIjtcbn0pKE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbiB8fCAoTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uID0ge30pKTtcbnZhciBOYlBvc2l0aW9uSGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iUG9zaXRpb25IZWxwZXIobGF5b3V0RGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uID0gbGF5b3V0RGlyZWN0aW9uO1xuICAgIH1cbiAgICBOYlBvc2l0aW9uSGVscGVyLnByb3RvdHlwZS50b0xvZ2ljYWxQb3NpdGlvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbikuaW5jbHVkZXMocG9zaXRpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGF5b3V0RGlyZWN0aW9uLmlzTHRyKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvTG9naWNhbFBvc2l0aW9uV2hlbkx0cihwb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0xvZ2ljYWxQb3NpdGlvbldoZW5SdGwocG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlBvc2l0aW9uSGVscGVyLnByb3RvdHlwZS50b1BoeXNpY2FsUG9zaXRpb24gPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uKS5pbmNsdWRlcyhwb3NpdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sYXlvdXREaXJlY3Rpb24uaXNMdHIoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9QaHlzaWNhbFBvc2l0aW9uV2hlbkx0cihwb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b1BoeXNpY2FsUG9zaXRpb25XaGVuUnRsKHBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJQb3NpdGlvbkhlbHBlci5wcm90b3R5cGUuaXNUb3BQb3NpdGlvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICB2YXIgbG9naWNhbFBvc2l0aW9uID0gdGhpcy50b0xvZ2ljYWxQb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgIHJldHVybiBsb2dpY2FsUG9zaXRpb24gPT09IE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9FTkRcbiAgICAgICAgICAgIHx8IGxvZ2ljYWxQb3NpdGlvbiA9PT0gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUO1xuICAgIH07XG4gICAgTmJQb3NpdGlvbkhlbHBlci5wcm90b3R5cGUuaXNSaWdodFBvc2l0aW9uID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBwaHlzaWNhbFBvc2l0aW9uID0gdGhpcy50b1BoeXNpY2FsUG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgICByZXR1cm4gcGh5c2ljYWxQb3NpdGlvbiA9PT0gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLlRPUF9SSUdIVFxuICAgICAgICAgICAgfHwgcGh5c2ljYWxQb3NpdGlvbiA9PT0gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9SSUdIVDtcbiAgICB9O1xuICAgIE5iUG9zaXRpb25IZWxwZXIucHJvdG90eXBlLnRvTG9naWNhbFBvc2l0aW9uV2hlbkx0ciA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5UT1BfUklHSFQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9FTkQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5UT1BfTEVGVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uQk9UVE9NX1JJR0hUOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5CT1RUT01fRU5EO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uQk9UVE9NX0xFRlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9TVEFSVDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJQb3NpdGlvbkhlbHBlci5wcm90b3R5cGUudG9Mb2dpY2FsUG9zaXRpb25XaGVuUnRsID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLlRPUF9SSUdIVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX0xFRlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9FTkQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5CT1RUT01fUklHSFQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9TVEFSVDtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9MRUZUOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5CT1RUT01fRU5EO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlBvc2l0aW9uSGVscGVyLnByb3RvdHlwZS50b1BoeXNpY2FsUG9zaXRpb25XaGVuTHRyID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX0xFRlQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9FTkQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5UT1BfUklHSFQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9TVEFSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9MRUZUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5CT1RUT01fRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uQk9UVE9NX1JJR0hUO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlBvc2l0aW9uSGVscGVyLnByb3RvdHlwZS50b1BoeXNpY2FsUG9zaXRpb25XaGVuUnRsID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX1JJR0hUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5UT1BfRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX0xFRlQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9TVEFSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9SSUdIVDtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uQk9UVE9NX0VORDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9MRUZUO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlBvc2l0aW9uSGVscGVyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkxheW91dERpcmVjdGlvblNlcnZpY2VdKVxuICAgIF0sIE5iUG9zaXRpb25IZWxwZXIpO1xuICAgIHJldHVybiBOYlBvc2l0aW9uSGVscGVyO1xufSgpKTtcblxudmFyIF9hO1xudmFyIE5iQWRqdXN0bWVudDtcbihmdW5jdGlvbiAoTmJBZGp1c3RtZW50KSB7XG4gICAgTmJBZGp1c3RtZW50W1wiTk9PUFwiXSA9IFwibm9vcFwiO1xuICAgIE5iQWRqdXN0bWVudFtcIkNMT0NLV0lTRVwiXSA9IFwiY2xvY2t3aXNlXCI7XG4gICAgTmJBZGp1c3RtZW50W1wiQ09VTlRFUkNMT0NLV0lTRVwiXSA9IFwiY291bnRlcmNsb2Nrd2lzZVwiO1xuICAgIE5iQWRqdXN0bWVudFtcIlZFUlRJQ0FMXCJdID0gXCJ2ZXJ0aWNhbFwiO1xuICAgIE5iQWRqdXN0bWVudFtcIkhPUklaT05UQUxcIl0gPSBcImhvcml6b250YWxcIjtcbn0pKE5iQWRqdXN0bWVudCB8fCAoTmJBZGp1c3RtZW50ID0ge30pKTtcbnZhciBOYlBvc2l0aW9uO1xuKGZ1bmN0aW9uIChOYlBvc2l0aW9uKSB7XG4gICAgTmJQb3NpdGlvbltcIlRPUFwiXSA9IFwidG9wXCI7XG4gICAgTmJQb3NpdGlvbltcIkJPVFRPTVwiXSA9IFwiYm90dG9tXCI7XG4gICAgTmJQb3NpdGlvbltcIkxFRlRcIl0gPSBcImxlZnRcIjtcbiAgICBOYlBvc2l0aW9uW1wiUklHSFRcIl0gPSBcInJpZ2h0XCI7XG4gICAgTmJQb3NpdGlvbltcIlNUQVJUXCJdID0gXCJzdGFydFwiO1xuICAgIE5iUG9zaXRpb25bXCJFTkRcIl0gPSBcImVuZFwiO1xuICAgIE5iUG9zaXRpb25bXCJUT1BfRU5EXCJdID0gXCJ0b3AtZW5kXCI7XG4gICAgTmJQb3NpdGlvbltcIlRPUF9TVEFSVFwiXSA9IFwidG9wLXN0YXJ0XCI7XG4gICAgTmJQb3NpdGlvbltcIkJPVFRPTV9FTkRcIl0gPSBcImJvdHRvbS1lbmRcIjtcbiAgICBOYlBvc2l0aW9uW1wiQk9UVE9NX1NUQVJUXCJdID0gXCJib3R0b20tc3RhcnRcIjtcbiAgICBOYlBvc2l0aW9uW1wiRU5EX1RPUFwiXSA9IFwiZW5kLXRvcFwiO1xuICAgIE5iUG9zaXRpb25bXCJFTkRfQk9UVE9NXCJdID0gXCJlbmQtYm90dG9tXCI7XG4gICAgTmJQb3NpdGlvbltcIlNUQVJUX1RPUFwiXSA9IFwic3RhcnQtdG9wXCI7XG4gICAgTmJQb3NpdGlvbltcIlNUQVJUX0JPVFRPTVwiXSA9IFwic3RhcnQtYm90dG9tXCI7XG59KShOYlBvc2l0aW9uIHx8IChOYlBvc2l0aW9uID0ge30pKTtcbnZhciBQT1NJVElPTlMgPSAoX2EgPSB7fSxcbiAgICBfYVtOYlBvc2l0aW9uLlJJR0hUXSA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ2VuZCcsIG9yaWdpblk6ICdjZW50ZXInLCBvdmVybGF5WDogJ3N0YXJ0Jywgb3ZlcmxheVk6ICdjZW50ZXInLCBvZmZzZXRYOiBvZmZzZXQgfTtcbiAgICB9LFxuICAgIF9hW05iUG9zaXRpb24uQk9UVE9NXSA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ2NlbnRlcicsIG9yaWdpblk6ICdib3R0b20nLCBvdmVybGF5WDogJ2NlbnRlcicsIG92ZXJsYXlZOiAndG9wJywgb2Zmc2V0WTogb2Zmc2V0IH07XG4gICAgfSxcbiAgICBfYVtOYlBvc2l0aW9uLkxFRlRdID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICByZXR1cm4geyBvcmlnaW5YOiAnc3RhcnQnLCBvcmlnaW5ZOiAnY2VudGVyJywgb3ZlcmxheVg6ICdlbmQnLCBvdmVybGF5WTogJ2NlbnRlcicsIG9mZnNldFg6IC1vZmZzZXQgfTtcbiAgICB9LFxuICAgIF9hW05iUG9zaXRpb24uVE9QXSA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ2NlbnRlcicsIG9yaWdpblk6ICd0b3AnLCBvdmVybGF5WDogJ2NlbnRlcicsIG92ZXJsYXlZOiAnYm90dG9tJywgb2Zmc2V0WTogLW9mZnNldCB9O1xuICAgIH0sXG4gICAgX2FbTmJQb3NpdGlvbi5TVEFSVF0gPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzW05iUG9zaXRpb24uTEVGVF0ob2Zmc2V0KTtcbiAgICB9LFxuICAgIF9hW05iUG9zaXRpb24uRU5EXSA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbTmJQb3NpdGlvbi5SSUdIVF0ob2Zmc2V0KTtcbiAgICB9LFxuICAgIF9hW05iUG9zaXRpb24uRU5EX1RPUF0gPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdlbmQnLCBvcmlnaW5ZOiAnYm90dG9tJywgb3ZlcmxheVg6ICdzdGFydCcsIG92ZXJsYXlZOiAnYm90dG9tJywgb2Zmc2V0WDogb2Zmc2V0IH07XG4gICAgfSxcbiAgICBfYVtOYlBvc2l0aW9uLkVORF9CT1RUT01dID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICByZXR1cm4geyBvcmlnaW5YOiAnZW5kJywgb3JpZ2luWTogJ3RvcCcsIG92ZXJsYXlYOiAnc3RhcnQnLCBvdmVybGF5WTogJ3RvcCcsIG9mZnNldFg6IG9mZnNldCB9O1xuICAgIH0sXG4gICAgX2FbTmJQb3NpdGlvbi5CT1RUT01fU1RBUlRdID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICByZXR1cm4geyBvcmlnaW5YOiAnZW5kJywgb3JpZ2luWTogJ2JvdHRvbScsIG92ZXJsYXlYOiAnZW5kJywgb3ZlcmxheVk6ICd0b3AnLCBvZmZzZXRZOiBvZmZzZXQgfTtcbiAgICB9LFxuICAgIF9hW05iUG9zaXRpb24uQk9UVE9NX0VORF0gPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdzdGFydCcsIG9yaWdpblk6ICdib3R0b20nLCBvdmVybGF5WDogJ3N0YXJ0Jywgb3ZlcmxheVk6ICd0b3AnLCBvZmZzZXRZOiBvZmZzZXQgfTtcbiAgICB9LFxuICAgIF9hW05iUG9zaXRpb24uU1RBUlRfVE9QXSA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ3N0YXJ0Jywgb3JpZ2luWTogJ2JvdHRvbScsIG92ZXJsYXlYOiAnZW5kJywgb3ZlcmxheVk6ICdib3R0b20nLCBvZmZzZXRYOiAtb2Zmc2V0IH07XG4gICAgfSxcbiAgICBfYVtOYlBvc2l0aW9uLlNUQVJUX0JPVFRPTV0gPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdzdGFydCcsIG9yaWdpblk6ICd0b3AnLCBvdmVybGF5WDogJ2VuZCcsIG92ZXJsYXlZOiAndG9wJywgb2Zmc2V0WDogLW9mZnNldCB9O1xuICAgIH0sXG4gICAgX2FbTmJQb3NpdGlvbi5UT1BfU1RBUlRdID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICByZXR1cm4geyBvcmlnaW5YOiAnZW5kJywgb3JpZ2luWTogJ3RvcCcsIG92ZXJsYXlYOiAnZW5kJywgb3ZlcmxheVk6ICdib3R0b20nLCBvZmZzZXRZOiAtb2Zmc2V0IH07XG4gICAgfSxcbiAgICBfYVtOYlBvc2l0aW9uLlRPUF9FTkRdID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICByZXR1cm4geyBvcmlnaW5YOiAnc3RhcnQnLCBvcmlnaW5ZOiAndG9wJywgb3ZlcmxheVg6ICdzdGFydCcsIG92ZXJsYXlZOiAnYm90dG9tJywgb2Zmc2V0WTogLW9mZnNldCB9O1xuICAgIH0sXG4gICAgX2EpO1xudmFyIENPVU5URVJfQ0xPQ0tXSVNFX1BPU0lUSU9OUyA9IFtcbiAgICBOYlBvc2l0aW9uLlRPUCxcbiAgICBOYlBvc2l0aW9uLlRPUF9FTkQsXG4gICAgTmJQb3NpdGlvbi5UT1BfU1RBUlQsXG4gICAgTmJQb3NpdGlvbi5TVEFSVCxcbiAgICBOYlBvc2l0aW9uLlNUQVJUX1RPUCxcbiAgICBOYlBvc2l0aW9uLlNUQVJUX0JPVFRPTSxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTSxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTV9TVEFSVCxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTV9FTkQsXG4gICAgTmJQb3NpdGlvbi5FTkQsXG4gICAgTmJQb3NpdGlvbi5FTkRfQk9UVE9NLFxuICAgIE5iUG9zaXRpb24uRU5EX1RPUCxcbl07XG52YXIgQ0xPQ0tXSVNFX1BPU0lUSU9OUyA9IFtcbiAgICBOYlBvc2l0aW9uLlRPUCxcbiAgICBOYlBvc2l0aW9uLlRPUF9TVEFSVCxcbiAgICBOYlBvc2l0aW9uLlRPUF9FTkQsXG4gICAgTmJQb3NpdGlvbi5FTkQsXG4gICAgTmJQb3NpdGlvbi5FTkRfVE9QLFxuICAgIE5iUG9zaXRpb24uRU5EX0JPVFRPTSxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTSxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTV9FTkQsXG4gICAgTmJQb3NpdGlvbi5CT1RUT01fU1RBUlQsXG4gICAgTmJQb3NpdGlvbi5TVEFSVCxcbiAgICBOYlBvc2l0aW9uLlNUQVJUX0JPVFRPTSxcbiAgICBOYlBvc2l0aW9uLlNUQVJUX1RPUCxcbl07XG52YXIgVkVSVElDQUxfUE9TSVRJT05TID0gW05iUG9zaXRpb24uQk9UVE9NLCBOYlBvc2l0aW9uLlRPUF07XG52YXIgSE9SSVpPTlRBTF9QT1NJVElPTlMgPSBbTmJQb3NpdGlvbi5TVEFSVCwgTmJQb3NpdGlvbi5FTkRdO1xuZnVuY3Rpb24gY29tcGFyZVBvc2l0aW9ucyhwMSwgcDIpIHtcbiAgICByZXR1cm4gcDEub3JpZ2luWCA9PT0gcDIub3JpZ2luWFxuICAgICAgICAmJiBwMS5vcmlnaW5ZID09PSBwMi5vcmlnaW5ZXG4gICAgICAgICYmIHAxLm92ZXJsYXlYID09PSBwMi5vdmVybGF5WFxuICAgICAgICAmJiBwMS5vdmVybGF5WSA9PT0gcDIub3ZlcmxheVk7XG59XG4vKipcbiAqIFRoZSBtYWluIGlkZWEgb2YgdGhlIGFkanVzdGFibGUgY29ubmVjdGVkIHN0cmF0ZWd5IGlzIHRvIHByb3ZpZGUgcHJlZGVmaW5lZCBzZXQgb2YgcG9zaXRpb25zIGZvciB5b3VyIG92ZXJsYXkuXG4gKiBZb3UgaGF2ZSB0byBwcm92aWRlIGFkanVzdG1lbnQgYW5kIGFwcHJvcHJpYXRlIHN0cmF0ZWd5IHdpbGwgYmUgY2hvc2VuIGluIHJ1bnRpbWUuXG4gKiAqL1xudmFyIE5iQWRqdXN0YWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3kgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iQWRqdXN0YWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3ksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJBZGp1c3RhYmxlQ29ubmVjdGVkUG9zaXRpb25TdHJhdGVneSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9vZmZzZXQgPSAxNTtcbiAgICAgICAgX3RoaXMucG9zaXRpb25DaGFuZ2UgPSBfdGhpcy5wb3NpdGlvbkNoYW5nZXMucGlwZShtYXAoZnVuY3Rpb24gKHBvc2l0aW9uQ2hhbmdlKSB7IHJldHVybiBwb3NpdGlvbkNoYW5nZS5jb25uZWN0aW9uUGFpcjsgfSksIG1hcChmdW5jdGlvbiAoY29ubmVjdGlvblBhaXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5hcHBsaWVkUG9zaXRpb25zLmZpbmQoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbm5lY3RlZFBvc2l0aW9uID0gX2EuY29ubmVjdGVkUG9zaXRpb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVQb3NpdGlvbnMoY29ubmVjdGVkUG9zaXRpb24sIGNvbm5lY3Rpb25QYWlyKTtcbiAgICAgICAgICAgIH0pLmtleTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iQWRqdXN0YWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3kucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uIChvdmVybGF5UmVmKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXZSBoYXZlIHRvIGFwcGx5IHBvc2l0aW9ucyBiZWZvcmUgYXR0YWNoIGJlY2F1c2Ugc3VwZXIuYXR0YWNoKCkgdmFsaWRhdGVzIHBvc2l0aW9ucyBhbmQgY3Jhc2hlcyBhcHBcbiAgICAgICAgICogaWYgbm8gcG9zaXRpb25zIHByb3ZpZGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmFwcGx5UG9zaXRpb25zKCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuYXR0YWNoLmNhbGwodGhpcywgb3ZlcmxheVJlZik7XG4gICAgfTtcbiAgICBOYkFkanVzdGFibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hcHBseVBvc2l0aW9ucygpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFwcGx5LmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBOYkFkanVzdGFibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LnByb3RvdHlwZS5wb3NpdGlvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE5iQWRqdXN0YWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3kucHJvdG90eXBlLmFkanVzdG1lbnQgPSBmdW5jdGlvbiAoYWRqdXN0bWVudCkge1xuICAgICAgICB0aGlzLl9hZGp1c3RtZW50ID0gYWRqdXN0bWVudDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYkFkanVzdGFibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYkFkanVzdGFibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LnByb3RvdHlwZS5hcHBseVBvc2l0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IHRoaXMuY3JlYXRlUG9zaXRpb25zKCk7XG4gICAgICAgIHRoaXMucGVyc2lzdENob3NlblBvc2l0aW9ucyhwb3NpdGlvbnMpO1xuICAgICAgICB0aGlzLndpdGhQb3NpdGlvbnModGhpcy5hcHBsaWVkUG9zaXRpb25zLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBjb25uZWN0ZWRQb3NpdGlvbiA9IF9hLmNvbm5lY3RlZFBvc2l0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3RlZFBvc2l0aW9uO1xuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICBOYkFkanVzdGFibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LnByb3RvdHlwZS5jcmVhdGVQb3NpdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fYWRqdXN0bWVudCkge1xuICAgICAgICAgICAgY2FzZSBOYkFkanVzdG1lbnQuTk9PUDpcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuX3Bvc2l0aW9uXTtcbiAgICAgICAgICAgIGNhc2UgTmJBZGp1c3RtZW50LkNMT0NLV0lTRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW9yZGVyUHJlZmVycmVkUG9zaXRpb25zKENMT0NLV0lTRV9QT1NJVElPTlMpO1xuICAgICAgICAgICAgY2FzZSBOYkFkanVzdG1lbnQuQ09VTlRFUkNMT0NLV0lTRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW9yZGVyUHJlZmVycmVkUG9zaXRpb25zKENPVU5URVJfQ0xPQ0tXSVNFX1BPU0lUSU9OUyk7XG4gICAgICAgICAgICBjYXNlIE5iQWRqdXN0bWVudC5IT1JJWk9OVEFMOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlb3JkZXJQcmVmZXJyZWRQb3NpdGlvbnMoSE9SSVpPTlRBTF9QT1NJVElPTlMpO1xuICAgICAgICAgICAgY2FzZSBOYkFkanVzdG1lbnQuVkVSVElDQUw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVvcmRlclByZWZlcnJlZFBvc2l0aW9ucyhWRVJUSUNBTF9QT1NJVElPTlMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkFkanVzdGFibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LnByb3RvdHlwZS5wZXJzaXN0Q2hvc2VuUG9zaXRpb25zID0gZnVuY3Rpb24gKHBvc2l0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmFwcGxpZWRQb3NpdGlvbnMgPSBwb3NpdGlvbnMubWFwKGZ1bmN0aW9uIChwb3NpdGlvbikgeyByZXR1cm4gKHtcbiAgICAgICAgICAgIGtleTogcG9zaXRpb24sXG4gICAgICAgICAgICBjb25uZWN0ZWRQb3NpdGlvbjogUE9TSVRJT05TW3Bvc2l0aW9uXShfdGhpcy5fb2Zmc2V0KSxcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgTmJBZGp1c3RhYmxlQ29ubmVjdGVkUG9zaXRpb25TdHJhdGVneS5wcm90b3R5cGUucmVvcmRlclByZWZlcnJlZFBvc2l0aW9ucyA9IGZ1bmN0aW9uIChwb3NpdGlvbnMpIHtcbiAgICAgICAgLy8gUGh5c2ljYWwgcG9zaXRpb25zIHNob3VsZCBiZSBtYXBwZWQgdG8gbG9naWNhbCBhcyBhZGp1c3RtZW50cyB1c2UgbG9naWNhbCBwb3NpdGlvbnMuXG4gICAgICAgIHZhciBzdGFydFBvc2l0aW9uSW5kZXggPSBwb3NpdGlvbnMuaW5kZXhPZih0aGlzLm1hcFRvTG9naWNhbFBvc2l0aW9uKHRoaXMuX3Bvc2l0aW9uKSk7XG4gICAgICAgIHZhciBmaXJzdFBhcnQgPSBwb3NpdGlvbnMuc2xpY2Uoc3RhcnRQb3NpdGlvbkluZGV4KTtcbiAgICAgICAgdmFyIHNlY29uZFBhcnQgPSBwb3NpdGlvbnMuc2xpY2UoMCwgc3RhcnRQb3NpdGlvbkluZGV4KTtcbiAgICAgICAgcmV0dXJuIGZpcnN0UGFydC5jb25jYXQoc2Vjb25kUGFydCk7XG4gICAgfTtcbiAgICBOYkFkanVzdGFibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LnByb3RvdHlwZS5tYXBUb0xvZ2ljYWxQb3NpdGlvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICBpZiAocG9zaXRpb24gPT09IE5iUG9zaXRpb24uTEVGVCkge1xuICAgICAgICAgICAgcmV0dXJuIE5iUG9zaXRpb24uU1RBUlQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSBOYlBvc2l0aW9uLlJJR0hUKSB7XG4gICAgICAgICAgICByZXR1cm4gTmJQb3NpdGlvbi5FTkQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIE5iQWRqdXN0YWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3k7XG59KE5iRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5KSk7XG52YXIgTmJHbG9iYWxQb3NpdGlvblN0cmF0ZWd5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkdsb2JhbFBvc2l0aW9uU3RyYXRlZ3ksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJHbG9iYWxQb3NpdGlvblN0cmF0ZWd5KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iR2xvYmFsUG9zaXRpb25TdHJhdGVneS5wcm90b3R5cGUucG9zaXRpb24gPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgc3dpdGNoIChwb3NpdGlvbikge1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5UT1BfU1RBUlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9wKCkubGVmdCgpO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5UT1BfRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvcCgpLnJpZ2h0KCk7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9TVEFSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ib3R0b20oKS5sZWZ0KCk7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9FTkQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tKCkucmlnaHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE5iR2xvYmFsUG9zaXRpb25TdHJhdGVneTtcbn0oR2xvYmFsUG9zaXRpb25TdHJhdGVneSkpO1xudmFyIE5iUG9zaXRpb25CdWlsZGVyU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UoZG9jdW1lbnQsIHZpZXdwb3J0UnVsZXIsIHBsYXRmb3JtLCBwb3NpdGlvbkJ1aWxkZXIsIG92ZXJsYXlDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLnZpZXdwb3J0UnVsZXIgPSB2aWV3cG9ydFJ1bGVyO1xuICAgICAgICB0aGlzLnBsYXRmb3JtID0gcGxhdGZvcm07XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXIgPSBvdmVybGF5Q29udGFpbmVyO1xuICAgIH1cbiAgICBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UucHJvdG90eXBlLmdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYkdsb2JhbFBvc2l0aW9uU3RyYXRlZ3koKTtcbiAgICB9O1xuICAgIE5iUG9zaXRpb25CdWlsZGVyU2VydmljZS5wcm90b3R5cGUuY29ubmVjdGVkVG8gPSBmdW5jdGlvbiAoZWxlbWVudFJlZikge1xuICAgICAgICByZXR1cm4gbmV3IE5iQWRqdXN0YWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3koZWxlbWVudFJlZiwgdGhpcy52aWV3cG9ydFJ1bGVyLCB0aGlzLmRvY3VtZW50LCB0aGlzLnBsYXRmb3JtLCB0aGlzLm92ZXJsYXlDb250YWluZXIpXG4gICAgICAgICAgICAud2l0aEZsZXhpYmxlRGltZW5zaW9ucyhmYWxzZSlcbiAgICAgICAgICAgIC53aXRoUHVzaChmYWxzZSk7XG4gICAgfTtcbiAgICBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX3BhcmFtKDAsIEluamVjdChOQl9ET0NVTUVOVCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgTmJWaWV3cG9ydFJ1bGVyQWRhcHRlcixcbiAgICAgICAgICAgIE5iUGxhdGZvcm0sXG4gICAgICAgICAgICBOYk92ZXJsYXlQb3NpdGlvbkJ1aWxkZXIsXG4gICAgICAgICAgICBOYk92ZXJsYXlDb250YWluZXJBZGFwdGVyXSlcbiAgICBdLCBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UpO1xuICAgIHJldHVybiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2U7XG59KCkpO1xuXG52YXIgTmJQb3NpdGlvbmVkQ29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8vIEBicmVha2luZy1jaGFuZ2UgQDUuMC4wIFJlbmFtZSB0byBOYlBvc2l0aW9uZWRDb250YWluZXJDb21wb25lbnQgYW5kIGVuYWJsZSB0cyBsaW50XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgZnVuY3Rpb24gTmJQb3NpdGlvbmVkQ29udGFpbmVyKCkge1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJ0b3BcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLlRPUDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwidG9wU3RhcnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLlRPUF9TVEFSVDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwidG9wRW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5UT1BfRU5EO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJyaWdodFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uUklHSFQgfHwgdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5FTkQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcImVuZFRvcFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uRU5EX1RPUDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwiZW5kQm90dG9tXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5FTkRfQk9UVE9NO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJib3R0b21cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLkJPVFRPTTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwiYm90dG9tU3RhcnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLkJPVFRPTV9TVEFSVDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwiYm90dG9tRW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5CT1RUT01fRU5EO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJsZWZ0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5MRUZUIHx8IHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uU1RBUlQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcInN0YXJ0VG9wXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5TVEFSVF9UT1A7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcInN0YXJ0Qm90dG9tXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5TVEFSVF9CT1RUT007XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktdG9wJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwidG9wXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubmItb3ZlcmxheS10b3Atc3RhcnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJ0b3BTdGFydFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktdG9wLWVuZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcInRvcEVuZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktcmlnaHQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJyaWdodFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktZW5kLXRvcCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcImVuZFRvcFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktZW5kLWJvdHRvbScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcImVuZEJvdHRvbVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktYm90dG9tJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUG9zaXRpb25lZENvbnRhaW5lci5wcm90b3R5cGUsIFwiYm90dG9tXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubmItb3ZlcmxheS1ib3R0b20tc3RhcnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJib3R0b21TdGFydFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktYm90dG9tLWVuZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcImJvdHRvbUVuZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5iLW92ZXJsYXktbGVmdCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcImxlZnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5uYi1vdmVybGF5LXN0YXJ0LXRvcCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlBvc2l0aW9uZWRDb250YWluZXIucHJvdG90eXBlLCBcInN0YXJ0VG9wXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubmItb3ZlcmxheS1zdGFydC1ib3R0b20nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQb3NpdGlvbmVkQ29udGFpbmVyLnByb3RvdHlwZSwgXCJzdGFydEJvdHRvbVwiLCBudWxsKTtcbiAgICBOYlBvc2l0aW9uZWRDb250YWluZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnJ1xuICAgICAgICB9KVxuICAgICAgICAvLyBAYnJlYWtpbmctY2hhbmdlIEA1LjAuMCBSZW5hbWUgdG8gTmJQb3NpdGlvbmVkQ29udGFpbmVyQ29tcG9uZW50IGFuZCBlbmFibGUgdHMgbGludFxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBdLCBOYlBvc2l0aW9uZWRDb250YWluZXIpO1xuICAgIHJldHVybiBOYlBvc2l0aW9uZWRDb250YWluZXI7XG59KCkpO1xudmFyIE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQodmNyLCBpbmplY3RvciwgY2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgICAgICAgdGhpcy52Y3IgPSB2Y3I7XG4gICAgICAgIHRoaXMuaW5qZWN0b3IgPSBpbmplY3RvcjtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZiA9IGNoYW5nZURldGVjdG9yUmVmO1xuICAgICAgICB0aGlzLmlzQXR0YWNoZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNTdHJpbmdDb250ZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLmNvbnRlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUuYXR0YWNoQ29tcG9uZW50UG9ydGFsID0gZnVuY3Rpb24gKHBvcnRhbCwgY29udGV4dCkge1xuICAgICAgICBwb3J0YWwuaW5qZWN0b3IgPSB0aGlzLmNyZWF0ZUNoaWxkSW5qZWN0b3IocG9ydGFsLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcik7XG4gICAgICAgIHZhciBjb21wb25lbnRSZWYgPSB0aGlzLnBvcnRhbE91dGxldC5hdHRhY2hDb21wb25lbnRQb3J0YWwocG9ydGFsKTtcbiAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29tcG9uZW50UmVmLmluc3RhbmNlLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnRSZWYuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIGNvbXBvbmVudFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBjb21wb25lbnRSZWY7XG4gICAgfTtcbiAgICBOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaFRlbXBsYXRlUG9ydGFsID0gZnVuY3Rpb24gKHBvcnRhbCkge1xuICAgICAgICB2YXIgdGVtcGxhdGVSZWYgPSB0aGlzLnBvcnRhbE91dGxldC5hdHRhY2hUZW1wbGF0ZVBvcnRhbChwb3J0YWwpO1xuICAgICAgICB0ZW1wbGF0ZVJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZVJlZjtcbiAgICB9O1xuICAgIE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUuYXR0YWNoU3RyaW5nQ29udGVudCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB0aGlzLmlzQXR0YWNoZWQgPSB0cnVlO1xuICAgIH07XG4gICAgTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZS5kZXRhY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcnRhbE91dGxldC5oYXNBdHRhY2hlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnBvcnRhbE91dGxldC5kZXRhY2goKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmF0dGFjaFN0cmluZ0NvbnRlbnQobnVsbCk7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgIH07XG4gICAgTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVDaGlsZEluamVjdG9yID0gZnVuY3Rpb24gKGNmcikge1xuICAgICAgICByZXR1cm4gbmV3IE5iUG9ydGFsSW5qZWN0b3IodGhpcy5pbmplY3RvciwgbmV3IFdlYWtNYXAoW1xuICAgICAgICAgICAgW0NvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgY2ZyXSxcbiAgICAgICAgXSkpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZChOYlBvcnRhbE91dGxldERpcmVjdGl2ZSwgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOYlBvcnRhbE91dGxldERpcmVjdGl2ZSlcbiAgICBdLCBOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLCBcInBvcnRhbE91dGxldFwiLCB2b2lkIDApO1xuICAgIE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1vdmVybGF5LWNvbnRhaW5lcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiAqbmdJZj1cXFwiaXNTdHJpbmdDb250ZW50XFxcIiBjbGFzcz1cXFwicHJpbWl0aXZlLW92ZXJsYXlcXFwiPnt7IGNvbnRlbnQgfX08L2Rpdj5cXG4gICAgPG5nLXRlbXBsYXRlIG5iUG9ydGFsT3V0bGV0PjwvbmctdGVtcGxhdGU+XFxuICBcIlxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtWaWV3Q29udGFpbmVyUmVmLFxuICAgICAgICAgICAgSW5qZWN0b3IsIENoYW5nZURldGVjdG9yUmVmXSlcbiAgICBdLCBOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQ7XG59KCkpO1xuXG5mdW5jdGlvbiBwYXRjaChjb250YWluZXIsIGNvbnRhaW5lckNvbnRleHQpIHtcbiAgICBPYmplY3QuYXNzaWduKGNvbnRhaW5lci5pbnN0YW5jZSwgY29udGFpbmVyQ29udGV4dCk7XG4gICAgY29udGFpbmVyLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICByZXR1cm4gY29udGFpbmVyO1xufVxuZnVuY3Rpb24gY3JlYXRlQ29udGFpbmVyKHJlZiwgY29udGFpbmVyLCBjb250ZXh0LCBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIpIHtcbiAgICB2YXIgY29udGFpbmVyUmVmID0gcmVmLmF0dGFjaChuZXcgTmJDb21wb25lbnRQb3J0YWwoY29udGFpbmVyLCBudWxsLCBudWxsLCBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIpKTtcbiAgICBwYXRjaChjb250YWluZXJSZWYsIGNvbnRleHQpO1xuICAgIHJldHVybiBjb250YWluZXJSZWY7XG59XG52YXIgTmJPdmVybGF5U2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk92ZXJsYXlTZXJ2aWNlKG92ZXJsYXksIGxheW91dERpcmVjdGlvbikge1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgICB0aGlzLmxheW91dERpcmVjdGlvbiA9IGxheW91dERpcmVjdGlvbjtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3ZlcmxheVNlcnZpY2UucHJvdG90eXBlLCBcInNjcm9sbFN0cmF0ZWdpZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXkuc2Nyb2xsU3RyYXRlZ2llcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJPdmVybGF5U2VydmljZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICB2YXIgb3ZlcmxheVJlZiA9IHRoaXMub3ZlcmxheS5jcmVhdGUoY29uZmlnKTtcbiAgICAgICAgdGhpcy5sYXlvdXREaXJlY3Rpb24ub25EaXJlY3Rpb25DaGFuZ2UoKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoZGlyKSB7IHJldHVybiBvdmVybGF5UmVmLnNldERpcmVjdGlvbihkaXIpOyB9KTtcbiAgICAgICAgcmV0dXJuIG92ZXJsYXlSZWY7XG4gICAgfTtcbiAgICBOYk92ZXJsYXlTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYk92ZXJsYXksIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZV0pXG4gICAgXSwgTmJPdmVybGF5U2VydmljZSk7XG4gICAgcmV0dXJuIE5iT3ZlcmxheVNlcnZpY2U7XG59KCkpO1xuXG52YXIgTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlNjcm9sbERpc3BhdGNoZXJBZGFwdGVyKG5nWm9uZSwgcGxhdGZvcm0sIHNjcm9sbFNlcnZpY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbmdab25lLCBwbGF0Zm9ybSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2Nyb2xsU2VydmljZSA9IHNjcm9sbFNlcnZpY2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlci5wcm90b3R5cGUuc2Nyb2xsZWQgPSBmdW5jdGlvbiAoYXVkaXRUaW1lSW5Ncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxTZXJ2aWNlLm9uU2Nyb2xsKCk7XG4gICAgfTtcbiAgICBOYlNjcm9sbERpc3BhdGNoZXJBZGFwdGVyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOZ1pvbmUsIE5iUGxhdGZvcm0sIE5iTGF5b3V0U2Nyb2xsU2VydmljZV0pXG4gICAgXSwgTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlcik7XG4gICAgcmV0dXJuIE5iU2Nyb2xsRGlzcGF0Y2hlckFkYXB0ZXI7XG59KFNjcm9sbERpc3BhdGNoZXIpKTtcblxuLyoqXG4gKiBPdmVycmlkZXMgZGVmYXVsdCBibG9jayBzY3JvbGwgc3RyYXRlZ3kgYmVjYXVzZSBkZWZhdWx0IHN0cmF0ZWd5IGJsb2NrcyBzY3JvbGxpbmcgb24gdGhlIGJvZHkgb25seS5cbiAqIEJ1dCBOZWJ1bGFyIGhhcyBpdHMgb3duIHNjcm9sbGFibGUgY29udGFpbmVyIC0gbmItbGF5b3V0LiBTbywgd2UgbmVlZCB0byBibG9jayBzY3JvbGxpbmcgaW4gaXQgdG8uXG4gKiAqL1xudmFyIE5iQmxvY2tTY3JvbGxTdHJhdGVneUFkYXB0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iQmxvY2tTY3JvbGxTdHJhdGVneUFkYXB0ZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJCbG9ja1Njcm9sbFN0cmF0ZWd5QWRhcHRlcihkb2N1bWVudCwgdmlld3BvcnRSdWxlciwgc2Nyb2xsU2VydmljZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB2aWV3cG9ydFJ1bGVyLCBkb2N1bWVudCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2Nyb2xsU2VydmljZSA9IHNjcm9sbFNlcnZpY2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJCbG9ja1Njcm9sbFN0cmF0ZWd5QWRhcHRlci5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmVuYWJsZS5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNjcm9sbFNlcnZpY2Uuc2Nyb2xsYWJsZShmYWxzZSk7XG4gICAgfTtcbiAgICBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc2FibGUuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlLnNjcm9sbGFibGUodHJ1ZSk7XG4gICAgfTtcbiAgICBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19wYXJhbSgwLCBJbmplY3QoTkJfRE9DVU1FTlQpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE5iVmlld3BvcnRSdWxlckFkYXB0ZXIsXG4gICAgICAgICAgICBOYkxheW91dFNjcm9sbFNlcnZpY2VdKVxuICAgIF0sIE5iQmxvY2tTY3JvbGxTdHJhdGVneUFkYXB0ZXIpO1xuICAgIHJldHVybiBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyO1xufShCbG9ja1Njcm9sbFN0cmF0ZWd5KSk7XG52YXIgTmJTY3JvbGxTdHJhdGVneU9wdGlvbnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iU2Nyb2xsU3RyYXRlZ3lPcHRpb25zLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iU2Nyb2xsU3RyYXRlZ3lPcHRpb25zKHNjcm9sbFNlcnZpY2UsIHNjcm9sbERpc3BhdGNoZXIsIHZpZXdwb3J0UnVsZXIsIG5nWm9uZSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2Nyb2xsRGlzcGF0Y2hlciwgdmlld3BvcnRSdWxlciwgbmdab25lLCBkb2N1bWVudCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2Nyb2xsU2VydmljZSA9IHNjcm9sbFNlcnZpY2U7XG4gICAgICAgIF90aGlzLnNjcm9sbERpc3BhdGNoZXIgPSBzY3JvbGxEaXNwYXRjaGVyO1xuICAgICAgICBfdGhpcy52aWV3cG9ydFJ1bGVyID0gdmlld3BvcnRSdWxlcjtcbiAgICAgICAgX3RoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICBfdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICBfdGhpcy5ibG9jayA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyKF90aGlzLmRvY3VtZW50LCBfdGhpcy52aWV3cG9ydFJ1bGVyLCBfdGhpcy5zY3JvbGxTZXJ2aWNlKTsgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBOYlNjcm9sbFN0cmF0ZWd5T3B0aW9ucyA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oNCwgSW5qZWN0KE5CX0RPQ1VNRU5UKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLFxuICAgICAgICAgICAgU2Nyb2xsRGlzcGF0Y2hlcixcbiAgICAgICAgICAgIE5iVmlld3BvcnRSdWxlckFkYXB0ZXIsXG4gICAgICAgICAgICBOZ1pvbmUsIE9iamVjdF0pXG4gICAgXSwgTmJTY3JvbGxTdHJhdGVneU9wdGlvbnMpO1xuICAgIHJldHVybiBOYlNjcm9sbFN0cmF0ZWd5T3B0aW9ucztcbn0oU2Nyb2xsU3RyYXRlZ3lPcHRpb25zKSk7XG5cbnZhciBOYkNka0FkYXB0ZXJNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDZGtBZGFwdGVyTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYkNka0FkYXB0ZXJNb2R1bGVfMSA9IE5iQ2RrQWRhcHRlck1vZHVsZTtcbiAgICBOYkNka0FkYXB0ZXJNb2R1bGUuZm9yUm9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYkNka0FkYXB0ZXJNb2R1bGVfMSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iVmlld3BvcnRSdWxlckFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlcixcbiAgICAgICAgICAgICAgICBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyLFxuICAgICAgICAgICAgICAgIE5iU2Nyb2xsRGlzcGF0Y2hlckFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgTmJTY3JvbGxTdHJhdGVneU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBPdmVybGF5Q29udGFpbmVyLCB1c2VFeGlzdGluZzogTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlciB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJPdmVybGF5Q29udGFpbmVyLCB1c2VFeGlzdGluZzogTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlciB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogU2Nyb2xsRGlzcGF0Y2hlciwgdXNlRXhpc3Rpbmc6IE5iU2Nyb2xsRGlzcGF0Y2hlckFkYXB0ZXIgfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IFNjcm9sbFN0cmF0ZWd5T3B0aW9ucywgdXNlRXhpc3Rpbmc6IE5iU2Nyb2xsU3RyYXRlZ3lPcHRpb25zIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgdmFyIE5iQ2RrQWRhcHRlck1vZHVsZV8xO1xuICAgIE5iQ2RrQWRhcHRlck1vZHVsZSA9IE5iQ2RrQWRhcHRlck1vZHVsZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHt9KVxuICAgIF0sIE5iQ2RrQWRhcHRlck1vZHVsZSk7XG4gICAgcmV0dXJuIE5iQ2RrQWRhcHRlck1vZHVsZTtcbn0oKSk7XG5cbnZhciBOYlRyaWdnZXI7XG4oZnVuY3Rpb24gKE5iVHJpZ2dlcikge1xuICAgIE5iVHJpZ2dlcltcIk5PT1BcIl0gPSBcIm5vb3BcIjtcbiAgICBOYlRyaWdnZXJbXCJDTElDS1wiXSA9IFwiY2xpY2tcIjtcbiAgICBOYlRyaWdnZXJbXCJIT1ZFUlwiXSA9IFwiaG92ZXJcIjtcbiAgICBOYlRyaWdnZXJbXCJISU5UXCJdID0gXCJoaW50XCI7XG4gICAgTmJUcmlnZ2VyW1wiRk9DVVNcIl0gPSBcImZvY3VzXCI7XG59KShOYlRyaWdnZXIgfHwgKE5iVHJpZ2dlciA9IHt9KSk7XG4vKipcbiAqIFRPRE8gbWF5YmUgd2UgaGF2ZSB0byB1c2UgcmVuZGVyZXIubGlzdGVuIGluc3RlYWQgb2Ygb2JzZXJ2YWJsZUZyb21FdmVudD9cbiAqIFJlbmRlcmVyIHByb3ZpZGVzIGNhcGFiaWxpdHkgdXNlIGl0IGluIHNlcnZpY2Ugd29ya2VyLCBzc3IgYW5kIHNvIG9uLlxuICogKi9cbnZhciBOYlRyaWdnZXJTdHJhdGVneUJhc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJUcmlnZ2VyU3RyYXRlZ3lCYXNlKGRvY3VtZW50LCBob3N0LCBjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQkID0gbmV3IFN1YmplY3QoKTtcbiAgICB9XG4gICAgTmJUcmlnZ2VyU3RyYXRlZ3lCYXNlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCQubmV4dCgpO1xuICAgIH07XG4gICAgTmJUcmlnZ2VyU3RyYXRlZ3lCYXNlLnByb3RvdHlwZS5pc05vdE9uSG9zdE9yQ29udGFpbmVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc09uSG9zdChldmVudCkgJiYgIXRoaXMuaXNPbkNvbnRhaW5lcihldmVudCk7XG4gICAgfTtcbiAgICBOYlRyaWdnZXJTdHJhdGVneUJhc2UucHJvdG90eXBlLmlzT25Ib3N0T3JDb250YWluZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNPbkhvc3QoZXZlbnQpIHx8IHRoaXMuaXNPbkNvbnRhaW5lcihldmVudCk7XG4gICAgfTtcbiAgICBOYlRyaWdnZXJTdHJhdGVneUJhc2UucHJvdG90eXBlLmlzT25Ib3N0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSBfYS50YXJnZXQ7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QuY29udGFpbnModGFyZ2V0KTtcbiAgICB9O1xuICAgIE5iVHJpZ2dlclN0cmF0ZWd5QmFzZS5wcm90b3R5cGUuaXNPbkNvbnRhaW5lciA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gX2EudGFyZ2V0O1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIoKSAmJiB0aGlzLmNvbnRhaW5lcigpLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQuY29udGFpbnModGFyZ2V0KTtcbiAgICB9O1xuICAgIHJldHVybiBOYlRyaWdnZXJTdHJhdGVneUJhc2U7XG59KCkpO1xuLyoqXG4gKiBDcmVhdGVzIHNob3cgYW5kIGhpZGUgZXZlbnQgc3RyZWFtcy5cbiAqIEZpcmVzIHRvZ2dsZSBldmVudCB3aGVuIHRoZSBjbGljayB3YXMgcGVyZm9ybWVkIG9uIHRoZSBob3N0IGVsZW1lbnQuXG4gKiBGaXJlcyBjbG9zZSBldmVudCB3aGVuIHRoZSBjbGljayB3YXMgcGVyZm9ybWVkIG9uIHRoZSBkb2N1bWVudCBidXRcbiAqIG5vdCBvbiB0aGUgaG9zdCBvciBjb250YWluZXIuXG4gKiAqL1xudmFyIE5iQ2xpY2tUcmlnZ2VyU3RyYXRlZ3kgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iQ2xpY2tUcmlnZ2VyU3RyYXRlZ3ksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJDbGlja1RyaWdnZXJTdHJhdGVneSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIC8vIHNpbmNlIHdlIHNob3VsZCB0cmFjayBjbGljayBmb3IgYm90aCBTSE9XIGFuZCBISURFIGV2ZW50IHdlIGZpcnN0bHkgbmVlZCB0byB0cmFjayB0aGUgY2xpY2sgYW5kIHRoZSBzdGF0ZVxuICAgICAgICAvLyBvZiB0aGUgY29udGFpbmVyIGFuZCB0aGVuIGxhdGVyIG9uIGRlY2lkZSBzaG91bGQgd2UgaGlkZSBpdCBvciBzaG93XG4gICAgICAgIC8vIGlmIHdlIHRyYWNrIHRoZSBjbGljayAmIHN0YXRlIHNlcGFyYXRlbHkgdGhpcyB3aWxsIGNhc2UgYSBiZWhhdmlvciB3aGVuIHRoZSBjb250YWluZXIgaXMgZ2V0dGluZyBzaG93blxuICAgICAgICAvLyBhbmQgdGhlbiBoaWRkZW4gcmlnaHQgYXdheVxuICAgICAgICBfdGhpcy5jbGljayQgPSBmcm9tRXZlbnQoX3RoaXMuZG9jdW1lbnQsICdjbGljaycpXG4gICAgICAgICAgICAucGlwZShtYXAoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBbIV90aGlzLmNvbnRhaW5lcigpICYmIF90aGlzLmlzT25Ib3N0KGV2ZW50KSwgZXZlbnRdOyB9KSwgc2hhcmUoKSwgdGFrZVVudGlsKF90aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgX3RoaXMuc2hvdyQgPSBfdGhpcy5jbGljayRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzaG91bGRTaG93ID0gX2FbMF07XG4gICAgICAgICAgICByZXR1cm4gc2hvdWxkU2hvdztcbiAgICAgICAgfSksIG1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgICB9KSwgdGFrZVVudGlsKF90aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgX3RoaXMuaGlkZSQgPSBfdGhpcy5jbGljayRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzaG91bGRTaG93ID0gX2FbMF0sIGV2ZW50ID0gX2FbMV07XG4gICAgICAgICAgICByZXR1cm4gIXNob3VsZFNob3cgJiYgIV90aGlzLmlzT25Db250YWluZXIoZXZlbnQpO1xuICAgICAgICB9KSwgbWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gX2FbMV07XG4gICAgICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICAgIH0pLCB0YWtlVW50aWwoX3RoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBOYkNsaWNrVHJpZ2dlclN0cmF0ZWd5O1xufShOYlRyaWdnZXJTdHJhdGVneUJhc2UpKTtcbi8qKlxuICogQ3JlYXRlcyBzaG93IGFuZCBoaWRlIGV2ZW50IHN0cmVhbXMuXG4gKiBGaXJlcyBvcGVuIGV2ZW50IHdoZW4gYSBtb3VzZSBob3ZlcnMgb3ZlciB0aGUgaG9zdCBlbGVtZW50IGFuZCBzdGF5IG92ZXIgYXQgbGVhc3QgMTAwIG1pbGxpc2Vjb25kcy5cbiAqIEZpcmVzIGNsb3NlIGV2ZW50IHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgaG9zdCBlbGVtZW50IGFuZCBzdG9wcyBvdXQgb2YgdGhlIGhvc3QgYW5kIHBvcG92ZXIgY29udGFpbmVyLlxuICogKi9cbnZhciBOYkhvdmVyVHJpZ2dlclN0cmF0ZWd5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkhvdmVyVHJpZ2dlclN0cmF0ZWd5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iSG92ZXJUcmlnZ2VyU3RyYXRlZ3koKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zaG93JCA9IGZyb21FdmVudChfdGhpcy5ob3N0LCAnbW91c2VlbnRlcicpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gIV90aGlzLmNvbnRhaW5lcigpOyB9KSwgXG4gICAgICAgIC8vIHRoaXMgYGRlbGF5ICYgdGFrZVVudGlsICYgcmVwZWF0YCBvcGVyYXRvcnMgY29tYmluYXRpb24gaXMgYSBzeW5vbnltIGZvciBgY29uZGl0aW9uYWwgZGVib3VuY2VgXG4gICAgICAgIC8vIG1lYW5pbmcgdGhhdCBpZiBvbmUgZXZlbnQgb2NjdXJzIGluIHNvbWUgdGltZSBhZnRlciB0aGUgaW5pdGlhbCBvbmUgd2Ugd29uJ3QgcmVhY3QgdG8gaXRcbiAgICAgICAgZGVsYXkoMTAwKSwgXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyeGpzLW5vLXVuc2FmZS10YWtldW50aWxcbiAgICAgICAgdGFrZVVudGlsKGZyb21FdmVudChfdGhpcy5ob3N0LCAnbW91c2VsZWF2ZScpKSwgcmVwZWF0KCksIHRha2VVbnRpbChfdGhpcy5kZXN0cm95ZWQkKSk7XG4gICAgICAgIF90aGlzLmhpZGUkID0gZnJvbUV2ZW50KF90aGlzLmhvc3QsICdtb3VzZWxlYXZlJylcbiAgICAgICAgICAgIC5waXBlKHN3aXRjaE1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBmcm9tRXZlbnQoX3RoaXMuZG9jdW1lbnQsICdtb3VzZW1vdmUnKVxuICAgICAgICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKDEwMCksIHRha2VXaGlsZShmdW5jdGlvbiAoKSB7IHJldHVybiAhIV90aGlzLmNvbnRhaW5lcigpOyB9KSwgZmlsdGVyKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaXNOb3RPbkhvc3RPckNvbnRhaW5lcihldmVudCk7IH0pKTsgfSksIHRha2VVbnRpbChfdGhpcy5kZXN0cm95ZWQkKSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5iSG92ZXJUcmlnZ2VyU3RyYXRlZ3k7XG59KE5iVHJpZ2dlclN0cmF0ZWd5QmFzZSkpO1xuLyoqXG4gKiBDcmVhdGVzIHNob3cgYW5kIGhpZGUgZXZlbnQgc3RyZWFtcy5cbiAqIEZpcmVzIG9wZW4gZXZlbnQgd2hlbiBhIG1vdXNlIGhvdmVycyBvdmVyIHRoZSBob3N0IGVsZW1lbnQgYW5kIHN0YXkgb3ZlciBhdCBsZWFzdCAxMDAgbWlsbGlzZWNvbmRzLlxuICogRmlyZXMgY2xvc2UgZXZlbnQgd2hlbiB0aGUgbW91c2UgbGVhdmVzIHRoZSBob3N0IGVsZW1lbnQuXG4gKiAqL1xudmFyIE5iSGludFRyaWdnZXJTdHJhdGVneSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJIaW50VHJpZ2dlclN0cmF0ZWd5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iSGludFRyaWdnZXJTdHJhdGVneSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNob3ckID0gZnJvbUV2ZW50KF90aGlzLmhvc3QsICdtb3VzZWVudGVyJylcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAvLyB0aGlzIGBkZWxheSAmIHRha2VVbnRpbCAmIHJlcGVhdGAgb3BlcmF0b3JzIGNvbWJpbmF0aW9uIGlzIGEgc3lub255bSBmb3IgYGNvbmRpdGlvbmFsIGRlYm91bmNlYFxuICAgICAgICAvLyBtZWFuaW5nIHRoYXQgaWYgb25lIGV2ZW50IG9jY3VycyBpbiBzb21lIHRpbWUgYWZ0ZXIgdGhlIGluaXRpYWwgb25lIHdlIHdvbid0IHJlYWN0IHRvIGl0XG4gICAgICAgIGRlbGF5KDEwMCksIFxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cnhqcy1uby11bnNhZmUtdGFrZXVudGlsXG4gICAgICAgIHRha2VVbnRpbChmcm9tRXZlbnQoX3RoaXMuaG9zdCwgJ21vdXNlbGVhdmUnKSksIHJlcGVhdCgpLCB0YWtlVW50aWwoX3RoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICBfdGhpcy5oaWRlJCA9IGZyb21FdmVudChfdGhpcy5ob3N0LCAnbW91c2VsZWF2ZScpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwoX3RoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBOYkhpbnRUcmlnZ2VyU3RyYXRlZ3k7XG59KE5iVHJpZ2dlclN0cmF0ZWd5QmFzZSkpO1xuLyoqXG4gKiBDcmVhdGVzIHNob3cgYW5kIGhpZGUgZXZlbnQgc3RyZWFtcy5cbiAqIEZpcmVzIG9wZW4gZXZlbnQgd2hlbiBhIGZvY3VzIGlzIG9uIHRoZSBob3N0IGVsZW1lbnQgYW5kIHN0YXkgb3ZlciBhdCBsZWFzdCAxMDAgbWlsbGlzZWNvbmRzLlxuICogRmlyZXMgY2xvc2UgZXZlbnQgd2hlbiB0aGUgZm9jdXMgbGVhdmVzIHRoZSBob3N0IGVsZW1lbnQuXG4gKiAqL1xudmFyIE5iRm9jdXNUcmlnZ2VyU3RyYXRlZ3kgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iRm9jdXNUcmlnZ2VyU3RyYXRlZ3ksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJGb2N1c1RyaWdnZXJTdHJhdGVneSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZvY3VzT3V0JCA9IGZyb21FdmVudChfdGhpcy5ob3N0LCAnZm9jdXNvdXQnKVxuICAgICAgICAgICAgLnBpcGUoc3dpdGNoTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZyb21FdmVudChfdGhpcy5kb2N1bWVudCwgJ2ZvY3VzaW4nKVxuICAgICAgICAgICAgLnBpcGUodGFrZVdoaWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhX3RoaXMuY29udGFpbmVyKCk7IH0pLCBmaWx0ZXIoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5pc05vdE9uSG9zdE9yQ29udGFpbmVyKGV2ZW50KTsgfSkpOyB9KSwgdGFrZVVudGlsKF90aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgX3RoaXMuY2xpY2tJbiQgPSBmcm9tRXZlbnQoX3RoaXMuaG9zdCwgJ2NsaWNrJylcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiAhX3RoaXMuY29udGFpbmVyKCk7IH0pLCB0YWtlVW50aWwoX3RoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICBfdGhpcy5jbGlja091dCQgPSBmcm9tRXZlbnQoX3RoaXMuZG9jdW1lbnQsICdjbGljaycpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gISFfdGhpcy5jb250YWluZXIoKTsgfSksIGZpbHRlcihmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmlzTm90T25Ib3N0T3JDb250YWluZXIoZXZlbnQpOyB9KSwgdGFrZVVudGlsKF90aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgX3RoaXMudGFiS2V5UHJlc3MkID0gZnJvbUV2ZW50KF90aGlzLmRvY3VtZW50LCAna2V5ZG93bicpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBldmVudC5rZXlDb2RlID09PSA5OyB9KSwgZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhX3RoaXMuY29udGFpbmVyKCk7IH0pLCB0YWtlVW50aWwoX3RoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICBfdGhpcy5zaG93JCA9IG1lcmdlKGZyb21FdmVudChfdGhpcy5ob3N0LCAnZm9jdXNpbicpLCBfdGhpcy5jbGlja0luJClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiAhX3RoaXMuY29udGFpbmVyKCk7IH0pLCBkZWJvdW5jZVRpbWUoMTAwKSwgXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyeGpzLW5vLXVuc2FmZS10YWtldW50aWxcbiAgICAgICAgdGFrZVVudGlsKGZyb21FdmVudChfdGhpcy5ob3N0LCAnZm9jdXNvdXQnKSksIHJlcGVhdCgpLCB0YWtlVW50aWwoX3RoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICBfdGhpcy5oaWRlJCA9IG1lcmdlKF90aGlzLmZvY3VzT3V0JCwgX3RoaXMudGFiS2V5UHJlc3MkLCBfdGhpcy5jbGlja091dCQpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwoX3RoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBOYkZvY3VzVHJpZ2dlclN0cmF0ZWd5O1xufShOYlRyaWdnZXJTdHJhdGVneUJhc2UpKTtcbi8qKlxuICogQ3JlYXRlcyBlbXB0eSBzaG93IGFuZCBoaWRlIGV2ZW50IHN0cmVhbXMuXG4gKiAqL1xudmFyIE5iTm9vcFRyaWdnZXJTdHJhdGVneSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJOb29wVHJpZ2dlclN0cmF0ZWd5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iTm9vcFRyaWdnZXJTdHJhdGVneSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNob3ckID0gRU1QVFk7XG4gICAgICAgIF90aGlzLmhpZGUkID0gRU1QVFk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5iTm9vcFRyaWdnZXJTdHJhdGVneTtcbn0oTmJUcmlnZ2VyU3RyYXRlZ3lCYXNlKSk7XG52YXIgTmJUcmlnZ2VyU3RyYXRlZ3lCdWlsZGVyU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlKF9kb2N1bWVudCkge1xuICAgICAgICB0aGlzLl9kb2N1bWVudCA9IF9kb2N1bWVudDtcbiAgICB9XG4gICAgTmJUcmlnZ2VyU3RyYXRlZ3lCdWlsZGVyU2VydmljZS5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uICh0cmlnZ2VyJCQxKSB7XG4gICAgICAgIHRoaXMuX3RyaWdnZXIgPSB0cmlnZ2VyJCQxO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE5iVHJpZ2dlclN0cmF0ZWd5QnVpbGRlclNlcnZpY2UucHJvdG90eXBlLmhvc3QgPSBmdW5jdGlvbiAoaG9zdCkge1xuICAgICAgICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlLnByb3RvdHlwZS5jb250YWluZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLl90cmlnZ2VyKSB7XG4gICAgICAgICAgICBjYXNlIE5iVHJpZ2dlci5DTElDSzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5iQ2xpY2tUcmlnZ2VyU3RyYXRlZ3kodGhpcy5fZG9jdW1lbnQsIHRoaXMuX2hvc3QsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICBjYXNlIE5iVHJpZ2dlci5ISU5UOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTmJIaW50VHJpZ2dlclN0cmF0ZWd5KHRoaXMuX2RvY3VtZW50LCB0aGlzLl9ob3N0LCB0aGlzLl9jb250YWluZXIpO1xuICAgICAgICAgICAgY2FzZSBOYlRyaWdnZXIuSE9WRVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOYkhvdmVyVHJpZ2dlclN0cmF0ZWd5KHRoaXMuX2RvY3VtZW50LCB0aGlzLl9ob3N0LCB0aGlzLl9jb250YWluZXIpO1xuICAgICAgICAgICAgY2FzZSBOYlRyaWdnZXIuRk9DVVM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOYkZvY3VzVHJpZ2dlclN0cmF0ZWd5KHRoaXMuX2RvY3VtZW50LCB0aGlzLl9ob3N0LCB0aGlzLl9jb250YWluZXIpO1xuICAgICAgICAgICAgY2FzZSBOYlRyaWdnZXIuTk9PUDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5iTm9vcFRyaWdnZXJTdHJhdGVneSh0aGlzLl9kb2N1bWVudCwgdGhpcy5faG9zdCwgdGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUcmlnZ2VyIGhhdmUgdG8gYmUgcHJvdmlkZWQnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJUcmlnZ2VyU3RyYXRlZ3lCdWlsZGVyU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oMCwgSW5qZWN0KE5CX0RPQ1VNRU5UKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICBdLCBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJUcmlnZ2VyU3RyYXRlZ3lCdWlsZGVyU2VydmljZTtcbn0oKSk7XG5cbnZhciBOYk92ZXJsYXlNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJPdmVybGF5TW9kdWxlKCkge1xuICAgIH1cbiAgICBOYk92ZXJsYXlNb2R1bGVfMSA9IE5iT3ZlcmxheU1vZHVsZTtcbiAgICBOYk92ZXJsYXlNb2R1bGUuZm9yUm9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYk92ZXJsYXlNb2R1bGVfMSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogX19zcHJlYWRBcnJheXMoW1xuICAgICAgICAgICAgICAgIE5iUG9zaXRpb25CdWlsZGVyU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIE5iT3ZlcmxheVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJQb3NpdGlvbkhlbHBlclxuICAgICAgICAgICAgXSwgTmJDZGtNYXBwaW5nTW9kdWxlLmZvclJvb3QoKS5wcm92aWRlcnMsIE5iQ2RrQWRhcHRlck1vZHVsZS5mb3JSb290KCkucHJvdmlkZXJzLCBOYkExMXlNb2R1bGUuZm9yUm9vdCgpLnByb3ZpZGVycyksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgTmJPdmVybGF5TW9kdWxlXzE7XG4gICAgTmJPdmVybGF5TW9kdWxlID0gTmJPdmVybGF5TW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIE5iQ2RrTWFwcGluZ01vZHVsZSxcbiAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICBOYlBvc2l0aW9uZWRDb250YWluZXIsXG4gICAgICAgICAgICAgICAgTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICBOYkNka01hcHBpbmdNb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJDZGtBZGFwdGVyTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJPdmVybGF5TW9kdWxlKTtcbiAgICByZXR1cm4gTmJPdmVybGF5TW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuZnVuY3Rpb24gd2luZG93RmFjdG9yeShwbGF0Zm9ybUlkKSB7XG4gICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHBsYXRmb3JtSWQpKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICAgIC8vIFByb3ZpZGUgdW5kZWZpbmVkIHRvIGdldCB0aGUgZXJyb3Igd2hlbiB0cnlpbmcgdG8gYWNjZXNzIHRoZSB3aW5kb3cgYXMgaXRcbiAgICAvLyBzaG91bGRuJ3QgYmUgdXNlZCBvdXRzaWRlIHRoZSBicm93c2VyLiBUaG9zZSB3aG8gbmVlZCB0byBwcm92aWRlIHNvbWV0aGluZ1xuICAgIC8vIGluc3RlYWQgb2Ygd2luZG93IChlLmcuIGRvbWlubyB3aW5kb3cgd2hlbiBydW5uaW5nIGluIG5vZGUpIGNvdWxkIG92ZXJyaWRlXG4gICAgLy8gTkJfV0lORE9XIHRva2VuLlxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG52YXIgTmJUaGVtZU1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRoZW1lTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYlRoZW1lTW9kdWxlXzEgPSBOYlRoZW1lTW9kdWxlO1xuICAgIC8vIFRPRE86IGNoZWNrIHRoZSBvcHRpb25zICh0aHJvdyBleGNlcHRpb24/KVxuICAgIC8qKlxuICAgICAqIE1haW4gVGhlbWUgTW9kdWxlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmJUaGVtZU9wdGlvbnMge05iVGhlbWVPcHRpb25zfSBNYWluIHRoZW1lIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gbmJKU1RoZW1lcyB7TmJKU1RoZW1lT3B0aW9uc1tdfSBMaXN0IG9mIEpTIFRoZW1lcywgd2lsbCBiZSBtZXJnZWQgd2l0aCBkZWZhdWx0IHRoZW1lc1xuICAgICAqIEBwYXJhbSBuYk1lZGlhQnJlYWtwb2ludHMge05iTWVkaWFCcmVha3BvaW50fSBBdmFpbGFibGUgbWVkaWEgYnJlYWtwb2ludHNcbiAgICAgKiBAcGFyYW0gbGF5b3V0RGlyZWN0aW9uIHtOYkxheW91dERpcmVjdGlvbn0gTGF5b3V0IGRpcmVjdGlvblxuICAgICAqXG4gICAgICogQHJldHVybnMge01vZHVsZVdpdGhQcm92aWRlcnN9XG4gICAgICovXG4gICAgTmJUaGVtZU1vZHVsZS5mb3JSb290ID0gZnVuY3Rpb24gKG5iVGhlbWVPcHRpb25zLCBuYkpTVGhlbWVzLCBuYk1lZGlhQnJlYWtwb2ludHMsIGxheW91dERpcmVjdGlvbikge1xuICAgICAgICBpZiAobmJUaGVtZU9wdGlvbnMgPT09IHZvaWQgMCkgeyBuYlRoZW1lT3B0aW9ucyA9IHsgbmFtZTogJ2RlZmF1bHQnIH07IH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYlRoZW1lTW9kdWxlXzEsXG4gICAgICAgICAgICBwcm92aWRlcnM6IF9fc3ByZWFkQXJyYXlzKFtcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1RIRU1FX09QVElPTlMsIHVzZVZhbHVlOiBuYlRoZW1lT3B0aW9ucyB8fCB7fSB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfQlVJTFRfSU5fSlNfVEhFTUVTLCB1c2VWYWx1ZTogQlVJTFRfSU5fVEhFTUVTIH0sXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9KU19USEVNRVMsIHVzZVZhbHVlOiBuYkpTVGhlbWVzIHx8IFtdIH0sXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9NRURJQV9CUkVBS1BPSU5UUywgdXNlVmFsdWU6IG5iTWVkaWFCcmVha3BvaW50cyB8fCBERUZBVUxUX01FRElBX0JSRUFLUE9JTlRTIH0sXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9ET0NVTUVOVCwgdXNlRXhpc3Rpbmc6IERPQ1VNRU5UIH0sXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9XSU5ET1csIHVzZUZhY3Rvcnk6IHdpbmRvd0ZhY3RvcnksIGRlcHM6IFtQTEFURk9STV9JRF0gfSxcbiAgICAgICAgICAgICAgICBOYkpTVGhlbWVzUmVnaXN0cnksXG4gICAgICAgICAgICAgICAgTmJUaGVtZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJNZWRpYUJyZWFrcG9pbnRzU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYlNwaW5uZXJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfTEFZT1VUX0RJUkVDVElPTiwgdXNlVmFsdWU6IGxheW91dERpcmVjdGlvbiB8fCBOYkxheW91dERpcmVjdGlvbi5MVFIgfSxcbiAgICAgICAgICAgICAgICBOYkxheW91dERpcmVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIE5iTGF5b3V0UnVsZXJTZXJ2aWNlXG4gICAgICAgICAgICBdLCBOYk92ZXJsYXlNb2R1bGUuZm9yUm9vdCgpLnByb3ZpZGVycyksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgTmJUaGVtZU1vZHVsZV8xO1xuICAgIE5iVGhlbWVNb2R1bGUgPSBOYlRoZW1lTW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHBvcnRzOiBbXSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlRoZW1lTW9kdWxlKTtcbiAgICByZXR1cm4gTmJUaGVtZU1vZHVsZTtcbn0oKSk7XG5cbnZhciBOYkNvbG9ySGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ29sb3JIZWxwZXIoKSB7XG4gICAgfVxuICAgIE5iQ29sb3JIZWxwZXIuc2hhZGUgPSBmdW5jdGlvbiAoY29sb3IsIHdlaWdodCkge1xuICAgICAgICByZXR1cm4gTmJDb2xvckhlbHBlci5taXgoJyMwMDAwMDAnLCBjb2xvciwgd2VpZ2h0KTtcbiAgICB9O1xuICAgIE5iQ29sb3JIZWxwZXIudGludCA9IGZ1bmN0aW9uIChjb2xvciwgd2VpZ2h0KSB7XG4gICAgICAgIHJldHVybiBOYkNvbG9ySGVscGVyLm1peCgnI2ZmZmZmZicsIGNvbG9yLCB3ZWlnaHQpO1xuICAgIH07XG4gICAgTmJDb2xvckhlbHBlci5taXggPSBmdW5jdGlvbiAoY29sb3IxLCBjb2xvcjIsIHdlaWdodCkge1xuICAgICAgICB2YXIgZDJoID0gZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQudG9TdHJpbmcoMTYpOyB9O1xuICAgICAgICB2YXIgaDJkID0gZnVuY3Rpb24gKGgpIHsgcmV0dXJuIHBhcnNlSW50KGgsIDE2KTsgfTtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcjJztcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA3OyBpICs9IDIpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhcnQgPSBoMmQoY29sb3IxLnN1YnN0cihpLCAyKSk7XG4gICAgICAgICAgICB2YXIgc2Vjb25kUGFydCA9IGgyZChjb2xvcjIuc3Vic3RyKGksIDIpKTtcbiAgICAgICAgICAgIHZhciByZXN1bHRQYXJ0ID0gZDJoKE1hdGguZmxvb3Ioc2Vjb25kUGFydCArIChmaXJzdFBhcnQgLSBzZWNvbmRQYXJ0KSAqICh3ZWlnaHQgLyAxMDAuMCkpKTtcbiAgICAgICAgICAgIHJlc3VsdCArPSAoJzAnICsgcmVzdWx0UGFydCkuc2xpY2UoLTIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBOYkNvbG9ySGVscGVyLmhleFRvUmdiQSA9IGZ1bmN0aW9uIChoZXgsIGFscGhhKSB7XG4gICAgICAgIHZhciBjO1xuICAgICAgICBpZiAoL14jKFtBLUZhLWYwLTldezN9KXsxLDJ9JC8udGVzdChoZXgpKSB7XG4gICAgICAgICAgICBjID0gaGV4LnN1YnN0cmluZygxKS5zcGxpdCgnJyk7XG4gICAgICAgICAgICBpZiAoYy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgICAgICBjID0gW2NbMF0sIGNbMF0sIGNbMV0sIGNbMV0sIGNbMl0sIGNbMl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYyA9ICcweCcgKyBjLmpvaW4oJycpO1xuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKCcgKyBbKGMgPj4gMTYpICYgMjU1LCAoYyA+PiA4KSAmIDI1NSwgYyAmIDI1NV0uam9pbignLCcpICsgJywnICsgYWxwaGEgKyAnKSc7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgSGV4Jyk7XG4gICAgfTtcbiAgICByZXR1cm4gTmJDb2xvckhlbHBlcjtcbn0oKSk7XG5cbnZhciBOYkljb25QYWNrVHlwZTtcbihmdW5jdGlvbiAoTmJJY29uUGFja1R5cGUpIHtcbiAgICBOYkljb25QYWNrVHlwZVtcIlNWR1wiXSA9IFwic3ZnXCI7XG4gICAgTmJJY29uUGFja1R5cGVbXCJGT05UXCJdID0gXCJmb250XCI7XG59KShOYkljb25QYWNrVHlwZSB8fCAoTmJJY29uUGFja1R5cGUgPSB7fSkpO1xuXG52YXIgTmJGb250SWNvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkZvbnRJY29uKG5hbWUsIGNvbnRlbnQsIHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0ge307IH1cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgfVxuICAgIE5iRm9udEljb24ucHJvdG90eXBlLmdldENsYXNzZXMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5wYXJhbXMucGFja0NsYXNzKSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2godGhpcy5wYXJhbXMucGFja0NsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZSA9IHRoaXMucGFyYW1zLmljb25DbGFzc1ByZWZpeCA/IHRoaXMucGFyYW1zLmljb25DbGFzc1ByZWZpeCArIFwiLVwiICsgdGhpcy5uYW1lIDogdGhpcy5uYW1lO1xuICAgICAgICBjbGFzc2VzLnB1c2gobmFtZSk7XG4gICAgICAgIHJldHVybiBjbGFzc2VzO1xuICAgIH07XG4gICAgTmJGb250SWNvbi5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gTmJGb250SWNvbjtcbn0oKSk7XG52YXIgTmJTdmdJY29uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU3ZnSWNvbihuYW1lLCBjb250ZW50LCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKHBhcmFtcyA9PT0gdm9pZCAwKSB7IHBhcmFtcyA9IHt9OyB9XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIH1cbiAgICBOYlN2Z0ljb24ucHJvdG90eXBlLmdldENsYXNzZXMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5wYXJhbXMucGFja0NsYXNzKSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2godGhpcy5wYXJhbXMucGFja0NsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICB9O1xuICAgIE5iU3ZnSWNvbi5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gTmJTdmdJY29uO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iSWNvbkRlZmluaXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJJY29uRGVmaW5pdGlvbigpIHtcbiAgICB9XG4gICAgcmV0dXJuIE5iSWNvbkRlZmluaXRpb247XG59KCkpO1xuZnVuY3Rpb24gdGhyb3dQYWNrTm90Rm91bmRFcnJvcihuYW1lKSB7XG4gICAgdGhyb3cgRXJyb3IoXCJJY29uIFBhY2sgJ1wiICsgbmFtZSArIFwiJyBpcyBub3QgcmVnaXN0ZXJlZFwiKTtcbn1cbmZ1bmN0aW9uIHRocm93Tm9EZWZhdWx0UGFja0Vycm9yKCkge1xuICAgIHRocm93IEVycm9yKCdEZWZhdWx0IHBhY2sgaXMgbm90IHJlZ2lzdGVyZWQuJyk7XG59XG5mdW5jdGlvbiB0aHJvd0ljb25Ob3RGb3VuZEVycm9yKG5hbWUsIHBhY2spIHtcbiAgICB0aHJvdyBFcnJvcihcIkljb24gJ1wiICsgbmFtZSArIFwiJyBpcyBub3QgcmVnaXN0ZXJlZCBpbiBwYWNrICdcIiArIHBhY2sgKyBcIicuIENoZWNrIGljb24gbmFtZSBvciBjb25zaWRlciBzd2l0Y2hpbmcgaWNvbiBwYWNrLlwiKTtcbn1cbmZ1bmN0aW9uIHRocm93V3JvbmdQYWNrVHlwZUVycm9yKG5hbWUsIHR5cGUsIGRlc2lyZWRUeXBlKSB7XG4gICAgdGhyb3cgRXJyb3IoXCJQYWNrICdcIiArIG5hbWUgKyBcIicgaXMgbm90IGFuICdcIiArIGRlc2lyZWRUeXBlICsgXCInIFBhY2sgYW5kIGl0cyB0eXBlIGlzICdcIiArIHR5cGUgKyBcIidcIik7XG59XG4vKipcbiAqIFRoaXMgc2VydmljZSBhbGxvd3MgdG8gcmVnaXN0ZXIgbXVsdGlwbGUgaWNvbiBwYWNrcyB0byB1c2UgdGhlbSBsYXRlciB3aXRoaW4gYDxuYi1pY29uPjwvbmItaWNvbj5gIGNvbXBvbmVudC5cbiAqL1xudmFyIE5iSWNvbkxpYnJhcmllcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkljb25MaWJyYXJpZXMoKSB7XG4gICAgICAgIHRoaXMucGFja3MgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBuZXcgU3ZnIGljb24gcGFja1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtOYkljb259IGljb25zXG4gICAgICogQHBhcmFtIHtOYkljb25QYWNrUGFyYW1zfSBwYXJhbXNcbiAgICAgKi9cbiAgICBOYkljb25MaWJyYXJpZXMucHJvdG90eXBlLnJlZ2lzdGVyU3ZnUGFjayA9IGZ1bmN0aW9uIChuYW1lLCBpY29ucywgcGFyYW1zKSB7XG4gICAgICAgIGlmIChwYXJhbXMgPT09IHZvaWQgMCkgeyBwYXJhbXMgPSB7fTsgfVxuICAgICAgICB0aGlzLnBhY2tzLnNldChuYW1lLCB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaWNvbnM6IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoaWNvbnMpKSxcbiAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICAgICAgdHlwZTogTmJJY29uUGFja1R5cGUuU1ZHLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBuZXcgZm9udCBwYWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge05iSWNvblBhY2tQYXJhbXN9IHBhcmFtc1xuICAgICAqL1xuICAgIE5iSWNvbkxpYnJhcmllcy5wcm90b3R5cGUucmVnaXN0ZXJGb250UGFjayA9IGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKHBhcmFtcyA9PT0gdm9pZCAwKSB7IHBhcmFtcyA9IHt9OyB9XG4gICAgICAgIHRoaXMucGFja3Muc2V0KG5hbWUsIHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICAgIGljb25zOiBuZXcgTWFwKCksXG4gICAgICAgICAgICB0eXBlOiBOYkljb25QYWNrVHlwZS5GT05ULFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgcGFjayBieSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKi9cbiAgICBOYkljb25MaWJyYXJpZXMucHJvdG90eXBlLmdldFBhY2sgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYWNrcy5nZXQobmFtZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHBhY2sgYXMgYSBkZWZhdWx0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKi9cbiAgICBOYkljb25MaWJyYXJpZXMucHJvdG90eXBlLnNldERlZmF1bHRQYWNrID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhY2tzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgdGhyb3dQYWNrTm90Rm91bmRFcnJvcihuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlZmF1bHRQYWNrID0gdGhpcy5wYWNrcy5nZXQobmFtZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIFN2ZyBpY29uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFja1xuICAgICAqXG4gICAgICogQHJldHVybnMgTmJJY29uRGVmaW5pdGlvblxuICAgICAqL1xuICAgIE5iSWNvbkxpYnJhcmllcy5wcm90b3R5cGUuZ2V0U3ZnSWNvbiA9IGZ1bmN0aW9uIChuYW1lLCBwYWNrKSB7XG4gICAgICAgIHZhciBpY29uc1BhY2sgPSBwYWNrID8gdGhpcy5nZXRQYWNrT3JUaHJvdyhwYWNrKSA6IHRoaXMuZ2V0RGVmYXVsdFBhY2tPclRocm93KCk7XG4gICAgICAgIGlmIChpY29uc1BhY2sudHlwZSAhPT0gTmJJY29uUGFja1R5cGUuU1ZHKSB7XG4gICAgICAgICAgICB0aHJvd1dyb25nUGFja1R5cGVFcnJvcihpY29uc1BhY2submFtZSwgaWNvbnNQYWNrLnR5cGUsICdTVkcnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWNvbiA9IHRoaXMuZ2V0SWNvbkZyb21QYWNrKG5hbWUsIGljb25zUGFjayk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgcGFjazogaWNvbnNQYWNrLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBOYkljb25QYWNrVHlwZS5TVkcsXG4gICAgICAgICAgICBpY29uOiB0aGlzLmNyZWF0ZVN2Z0ljb24obmFtZSwgaWNvbiwgaWNvbnNQYWNrLnBhcmFtcyksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIEZvbnQgaWNvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhY2tcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIE5iSWNvbkRlZmluaXRpb25cbiAgICAgKi9cbiAgICBOYkljb25MaWJyYXJpZXMucHJvdG90eXBlLmdldEZvbnRJY29uID0gZnVuY3Rpb24gKG5hbWUsIHBhY2spIHtcbiAgICAgICAgdmFyIGljb25zUGFjayA9IHBhY2sgPyB0aGlzLmdldFBhY2tPclRocm93KHBhY2spIDogdGhpcy5nZXREZWZhdWx0UGFja09yVGhyb3coKTtcbiAgICAgICAgaWYgKGljb25zUGFjay50eXBlICE9PSBOYkljb25QYWNrVHlwZS5GT05UKSB7XG4gICAgICAgICAgICB0aHJvd1dyb25nUGFja1R5cGVFcnJvcihpY29uc1BhY2submFtZSwgaWNvbnNQYWNrLnR5cGUsICdGb250Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGljb24gPSB0aGlzLmdldEljb25Gcm9tUGFjayhuYW1lLCBpY29uc1BhY2ssIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBwYWNrOiBpY29uc1BhY2submFtZSxcbiAgICAgICAgICAgIHR5cGU6IE5iSWNvblBhY2tUeXBlLkZPTlQsXG4gICAgICAgICAgICBpY29uOiB0aGlzLmNyZWF0ZUZvbnRJY29uKG5hbWUsIGljb24gPyBpY29uIDogJycsIGljb25zUGFjay5wYXJhbXMpLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBpY29uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFja1xuICAgICAqXG4gICAgICogQHJldHVybnMgTmJJY29uRGVmaW5pdGlvblxuICAgICAqL1xuICAgIE5iSWNvbkxpYnJhcmllcy5wcm90b3R5cGUuZ2V0SWNvbiA9IGZ1bmN0aW9uIChuYW1lLCBwYWNrKSB7XG4gICAgICAgIHZhciBpY29uc1BhY2sgPSBwYWNrID8gdGhpcy5nZXRQYWNrT3JUaHJvdyhwYWNrKSA6IHRoaXMuZ2V0RGVmYXVsdFBhY2tPclRocm93KCk7XG4gICAgICAgIGlmIChpY29uc1BhY2sudHlwZSA9PT0gTmJJY29uUGFja1R5cGUuU1ZHKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdmdJY29uKG5hbWUsIHBhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZvbnRJY29uKG5hbWUsIHBhY2spO1xuICAgIH07XG4gICAgTmJJY29uTGlicmFyaWVzLnByb3RvdHlwZS5jcmVhdGVTdmdJY29uID0gZnVuY3Rpb24gKG5hbWUsIGNvbnRlbnQsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gY29udGVudCBpbnN0YW5jZW9mIE5iU3ZnSWNvbiA/IGNvbnRlbnQgOiBuZXcgTmJTdmdJY29uKG5hbWUsIGNvbnRlbnQsIHBhcmFtcyk7XG4gICAgfTtcbiAgICBOYkljb25MaWJyYXJpZXMucHJvdG90eXBlLmNyZWF0ZUZvbnRJY29uID0gZnVuY3Rpb24gKG5hbWUsIGNvbnRlbnQsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gY29udGVudCBpbnN0YW5jZW9mIE5iRm9udEljb24gPyBjb250ZW50IDogbmV3IE5iRm9udEljb24obmFtZSwgY29udGVudCwgcGFyYW1zKTtcbiAgICB9O1xuICAgIE5iSWNvbkxpYnJhcmllcy5wcm90b3R5cGUuZ2V0UGFja09yVGhyb3cgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgcGFjayA9IHRoaXMucGFja3MuZ2V0KG5hbWUpO1xuICAgICAgICBpZiAoIXBhY2spIHtcbiAgICAgICAgICAgIHRocm93UGFja05vdEZvdW5kRXJyb3IobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhY2s7XG4gICAgfTtcbiAgICBOYkljb25MaWJyYXJpZXMucHJvdG90eXBlLmdldERlZmF1bHRQYWNrT3JUaHJvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRlZmF1bHRQYWNrKSB7XG4gICAgICAgICAgICB0aHJvd05vRGVmYXVsdFBhY2tFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRQYWNrO1xuICAgIH07XG4gICAgTmJJY29uTGlicmFyaWVzLnByb3RvdHlwZS5nZXRJY29uRnJvbVBhY2sgPSBmdW5jdGlvbiAobmFtZSwgcGFjaywgc2hvdWxkVGhyb3cpIHtcbiAgICAgICAgaWYgKHNob3VsZFRocm93ID09PSB2b2lkIDApIHsgc2hvdWxkVGhyb3cgPSB0cnVlOyB9XG4gICAgICAgIGlmIChzaG91bGRUaHJvdyAmJiAhcGFjay5pY29ucy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93SWNvbk5vdEZvdW5kRXJyb3IobmFtZSwgcGFjay5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFjay5pY29ucy5nZXQobmFtZSk7XG4gICAgfTtcbiAgICBOYkljb25MaWJyYXJpZXMuybVwcm92ID0gybXJtWRlZmluZUluamVjdGFibGUoeyBmYWN0b3J5OiBmdW5jdGlvbiBOYkljb25MaWJyYXJpZXNfRmFjdG9yeSgpIHsgcmV0dXJuIG5ldyBOYkljb25MaWJyYXJpZXMoKTsgfSwgdG9rZW46IE5iSWNvbkxpYnJhcmllcywgcHJvdmlkZWRJbjogXCJyb290XCIgfSk7XG4gICAgTmJJY29uTGlicmFyaWVzID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoeyBwcm92aWRlZEluOiAncm9vdCcgfSlcbiAgICBdLCBOYkljb25MaWJyYXJpZXMpO1xuICAgIHJldHVybiBOYkljb25MaWJyYXJpZXM7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIEljb24gY29tcG9uZW50LiBBbGxvd3MgdG8gcmVuZGVyIGJvdGggYHN2Z2AgYW5kIGBmb250YCBpY29ucy5cbiAqIFN0YXJ0aW5nIGZyb20gTmVidWxhciA0LjAgdXNlcyBbRXZhIEljb25zXShodHRwczovL2FrdmVvLmdpdGh1Yi5pby9ldmEtaWNvbnMvKSBwYWNrIGJ5IGRlZmF1bHQuXG4gKlxuICogQmFzaWMgaWNvbiBleGFtcGxlOlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgaWNvbi9pY29uLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBJY29uIGNvbmZpZ3VyYXRpb246XG4gKlxuICogYGBgaHRtbFxuICogPG5iLWljb24gaWNvbj1cInN0YXJcIj48L25iLWljb24+XG4gKiBgYGBcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBCeSBkZWZhdWx0IE5lYnVsYXIgY29tZXMgd2l0aG91dCBhbnkgcHJlLWluc3RhbGxlZCBpY29uIHBhY2suXG4gKiBTdGFydGluZyB3aXRoIE5lYnVsYXIgNC4wLjAgd2Ugc2hpcCBzZXBhcmF0ZSBwYWNrYWdlIGNhbGxlZCBgQG5lYnVsYXIvZXZhLWljb25zYFxuICogd2hpY2ggaW50ZWdyYXRlcyBTVkcgW0V2YSBJY29uc10oaHR0cHM6Ly9ha3Zlby5naXRodWIuaW8vZXZhLWljb25zLykgcGFjayB0byBOZWJ1bGFyLiBUbyBhZGQgaXQgdG8geW91clxuICogcHJvamVjdCBydW46XG4gKiBgYGBzaFxuICogbnBtIGkgQG5lYnVsYXIvZXZhLWljb25zXG4gKiBgYGBcbiAqIFRoaXMgY29tbWFuZCB3aWxsIGluc3RhbGwgRXZhIEljb25zIHBhY2suIFRoZW4gcmVnaXN0ZXIgYE5iRXZhSWNvbnNNb2R1bGVgIGludG8geW91ciBhcHAgbW9kdWxlOlxuICogYGBgdHNcbiAqIGltcG9ydCB7IE5iRXZhSWNvbnNNb2R1bGUgfSBmcm9tICdAbmVidWxhci9ldmEtaWNvbnMnO1xuICpcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkV2YUljb25zTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqIExhc3QgdGhpbmcsIGltcG9ydCBgTmJJY29uTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlIHdoZXJlIHlvdSBuZWVkIHRvIHNob3cgYW4gaWNvbjpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBOYkljb25Nb2R1bGUgfSBmcm9tICdAbmVidWxhci90aGVtZSc7XG4gKlxuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iSWNvbk1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogSWNvbiBjYW4gYmUgY29sb3JlZCB1c2luZyBgc3RhdHVzYCBpbnB1dDpcbiAqIGBgYGh0bWxcbiAqIDxuYi1pY29uIGljb249XCJzdGFyXCIgc3RhdHVzPVwid2FybmluZ1wiPjwvbmItaWNvbj5cbiAqIGBgYFxuICpcbiAqIENvbG9yZWQgaWNvbnM6XG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgSWNvbnMsIGljb24vaWNvbi1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIEluIGNhc2UgeW91IG5lZWQgdG8gc3BlY2lmeSBhbiBpY29uIGZyb20gYSBzcGVjaWZpYyBpY29uIHBhY2ssIHRoaXMgY291bGQgYmUgZG9uZSB1c2luZyBgcGFja2AgaW5wdXQgcHJvcGVydHk6XG4gKiBgYGBodG1sXG4gKiA8bmItaWNvbiBpY29uPVwic3RhclwiIHBhY2s9XCJmb250LWF3ZXNvbWVcIj48L25iLWljb24+XG4gKiBgYGBcbiAqIEFkZGl0aW9uYWwgaWNvbiBzZXR0aW5ncyAoaWYgYXZhaWxhYmxlIGJ5IHRoZSBpY29uIHBhY2spIGNvdWxkIGJlIHBhc3NlZCB1c2luZyBgb3B0aW9uc2AgaW5wdXQ6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLWljb24gaWNvbj1cInN0YXJcIiBbb3B0aW9uc109XCJ7IGFuaW1hdGlvbjogeyB0eXBlOiAnem9vbScgfSB9XCI+PC9uYi1pY29uPlxuICogYGBgXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGljb24tZm9udC1zaXplOlxuICogaWNvbi1saW5lLWhlaWdodDpcbiAqIGljb24td2lkdGg6XG4gKiBpY29uLWhlaWdodDpcbiAqIGljb24tc3ZnLXZlcnRpY2FsLWFsaWduOlxuICogaWNvbi1iYXNpYy1jb2xvcjpcbiAqIGljb24tcHJpbWFyeS1jb2xvcjpcbiAqIGljb24taW5mby1jb2xvcjpcbiAqIGljb24tc3VjY2Vzcy1jb2xvcjpcbiAqIGljb24td2FybmluZy1jb2xvcjpcbiAqIGljb24tZGFuZ2VyLWNvbG9yOlxuICogaWNvbi1jb250cm9sLWNvbG9yOlxuICovXG52YXIgTmJJY29uQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iSWNvbkNvbXBvbmVudChzYW5pdGl6ZXIsIGljb25MaWJyYXJ5LCBlbCwgcmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5zYW5pdGl6ZXIgPSBzYW5pdGl6ZXI7XG4gICAgICAgIHRoaXMuaWNvbkxpYnJhcnkgPSBpY29uTGlicmFyeTtcbiAgICAgICAgdGhpcy5lbCA9IGVsO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMucHJldkNsYXNzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5odG1sID0gJyc7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJY29uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSWNvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJY29uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJY29uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb25maWdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBhbGwgaWNvbiBjb25maWd1cmFibGUgcHJvcGVydGllcyB2aWEgY29uZmlnIG9iamVjdC5cbiAgICAgICAgICogSWYgcGFzc2VkIHZhbHVlIGlzIGEgc3RyaW5nIHNldCBpY29uIG5hbWUuXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jb25maWcgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pY29uID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmljb24gPSB2YWx1ZS5pY29uO1xuICAgICAgICAgICAgICAgIHRoaXMucGFjayA9IHZhbHVlLnBhY2s7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB2YWx1ZS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gdmFsdWUub3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJJY29uQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pY29uRGVmID0gdGhpcy5yZW5kZXJJY29uKHRoaXMuaWNvbiwgdGhpcy5wYWNrLCB0aGlzLm9wdGlvbnMpO1xuICAgIH07XG4gICAgTmJJY29uQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaWNvbkRlZikge1xuICAgICAgICAgICAgdGhpcy5pY29uRGVmID0gdGhpcy5yZW5kZXJJY29uKHRoaXMuaWNvbiwgdGhpcy5wYWNrLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkljb25Db21wb25lbnQucHJvdG90eXBlLnJlbmRlckljb24gPSBmdW5jdGlvbiAobmFtZSwgcGFjaywgb3B0aW9ucykge1xuICAgICAgICB2YXIgaWNvbkRlZmluaXRpb24gPSB0aGlzLmljb25MaWJyYXJ5LmdldEljb24obmFtZSwgcGFjayk7XG4gICAgICAgIHZhciBjb250ZW50ID0gaWNvbkRlZmluaXRpb24uaWNvbi5nZXRDb250ZW50KG9wdGlvbnMpO1xuICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgdGhpcy5odG1sID0gdGhpcy5zYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdEh0bWwoY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hc3NpZ25DbGFzc2VzKGljb25EZWZpbml0aW9uLmljb24uZ2V0Q2xhc3NlcyhvcHRpb25zKSk7XG4gICAgICAgIHJldHVybiBpY29uRGVmaW5pdGlvbjtcbiAgICB9O1xuICAgIE5iSWNvbkNvbXBvbmVudC5wcm90b3R5cGUuYXNzaWduQ2xhc3NlcyA9IGZ1bmN0aW9uIChjbGFzc2VzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMucHJldkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhfdGhpcy5lbC5uYXRpdmVFbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlcmVyLmFkZENsYXNzKF90aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByZXZDbGFzc2VzID0gY2xhc3NlcztcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnaW5uZXJIdG1sJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJJY29uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJodG1sXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtcHJpbWFyeScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSWNvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1pbmZvJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJJY29uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtd2FybmluZycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSWNvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1kYW5nZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSWNvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtY29udHJvbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSWNvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcImljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcInBhY2tcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcIm9wdGlvbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkljb25Db21wb25lbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE5iSWNvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29uZmlnXCIsIG51bGwpO1xuICAgIE5iSWNvbkNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1pY29uJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnJyxcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmlubGluZS1ibG9ja31cXG5cIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRG9tU2FuaXRpemVyLFxuICAgICAgICAgICAgTmJJY29uTGlicmFyaWVzLFxuICAgICAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgICAgIFJlbmRlcmVyMl0pXG4gICAgXSwgTmJJY29uQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJJY29uQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iSWNvbk1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkljb25Nb2R1bGUoaWNvbnNMaWJyYXJ5KSB7XG4gICAgICAgIHRoaXMuaWNvbnNMaWJyYXJ5ID0gaWNvbnNMaWJyYXJ5O1xuICAgICAgICB0aGlzLmVzc2VudGlhbHNQYWNrTmFtZSA9ICduZWJ1bGFyLWVzc2VudGlhbHMnO1xuICAgICAgICAvLyBpbiBjYXNlIG9mIGNvbnNlcXVlbnQgY2FsbHMgd2UgZG9uJ3QgbmVlZCB0byBlbmFibGUgYG5lYnVsYXItZXNzZW50aWFsc2AgcGFjayBhZ2FpblxuICAgICAgICBpZiAodGhpcy5pY29uc0xpYnJhcnkuZ2V0UGFjayh0aGlzLmVzc2VudGlhbHNQYWNrTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGhcbiAgICAgICAgdGhpcy5pY29uc0xpYnJhcnkucmVnaXN0ZXJTdmdQYWNrKHRoaXMuZXNzZW50aWFsc1BhY2tOYW1lLCB7XG4gICAgICAgICAgICAnY2hldnJvbi1kb3duLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImNoZXZyb24tZG93blwiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTIgMTUuNWExIDEgMCAwIDEtLjcxLS4yOWwtNC00YTEgMSAwIDEgMSAxLjQyLTEuNDJMMTIgMTMuMWwzLjMtMy4xOGExIDEgMCAxIDEgMS4zOCAxLjQ0bC00IDMuODZhMSAxIDAgMCAxLS42OC4yOHpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2NoZXZyb24tdXAtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiY2hldnJvbi11cFwiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHRyYW5zZm9ybT1cInJvdGF0ZSgxODAgMTIgMTIpXCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xNiAxNC41YTEgMSAwIDAgMS0uNzEtLjI5TDEyIDEwLjlsLTMuMyAzLjE4YTEgMSAwIDAgMS0xLjQxIDAgMSAxIDAgMCAxIDAtMS40Mmw0LTMuODZhMSAxIDAgMCAxIDEuNCAwbDQgNGExIDEgMCAwIDEgMCAxLjQyIDEgMSAwIDAgMS0uNjkuMjh6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdjaGV2cm9uLWxlZnQtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiY2hldnJvbi1sZWZ0XCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDkwIDEyIDEyKVwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTMuMzYgMTdhMSAxIDAgMCAxLS43Mi0uMzFsLTMuODYtNGExIDEgMCAwIDEgMC0xLjRsNC00YTEgMSAwIDEgMSAxLjQyIDEuNDJMMTAuOSAxMmwzLjE4IDMuM2ExIDEgMCAwIDEgMCAxLjQxIDEgMSAwIDAgMS0uNzIuMjl6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdjaGV2cm9uLXJpZ2h0LW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImNoZXZyb24tcmlnaHRcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB0cmFuc2Zvcm09XCJyb3RhdGUoLTkwIDEyIDEyKVwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTAuNSAxN2ExIDEgMCAwIDEtLjcxLS4yOSAxIDEgMCAwIDEgMC0xLjQyTDEzLjEgMTIgOS45MiA4LjY5YTEgMSAwIDAgMSAwLTEuNDEgMSAxIDAgMCAxIDEuNDIgMGwzLjg2IDRhMSAxIDAgMCAxIDAgMS40bC00IDRhMSAxIDAgMCAxLS43LjMyelwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnY2hlY2ttYXJrLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImNoZWNrbWFya1wiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNOS44NiAxOGExIDEgMCAwIDEtLjczLS4zMmwtNC44Ni01LjE3YTEgMSAwIDEgMSAxLjQ2LTEuMzdsNC4xMiA0LjM5IDguNDEtOS4yYTEgMSAwIDEgMSAxLjQ4IDEuMzRsLTkuMTQgMTBhMSAxIDAgMCAxLS43My4zM3pcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ3BhcGVyLXBsYW5lLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cInBhcGVyLXBsYW5lXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0yMSA0YTEuMzEgMS4zMSAwIDAgMC0uMDYtLjI3di0uMDlhMSAxIDAgMCAwLS4yLS4zIDEgMSAwIDAgMC0uMjktLjE5aC0uMDlhLjg2Ljg2IDAgMCAwLS4zMS0uMTVIMjBhMSAxIDAgMCAwLS4zIDBsLTE4IDZhMSAxIDAgMCAwIDAgMS45bDguNTMgMi44NCAyLjg0IDguNTNhMSAxIDAgMCAwIDEuOSAwbDYtMThBMSAxIDAgMCAwIDIxIDR6bS00LjcgMi4yOWwtNS41NyA1LjU3TDUuMTYgMTB6TTE0IDE4Ljg0bC0xLjg2LTUuNTcgNS41Ny01LjU3elwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnZmlsZS10ZXh0LW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImZpbGUtdGV4dFwiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTUgMTZIOWExIDEgMCAwIDAgMCAyaDZhMSAxIDAgMCAwIDAtMnpcIi8+PHBhdGggZD1cIk05IDE0aDNhMSAxIDAgMCAwIDAtMkg5YTEgMSAwIDAgMCAwIDJ6XCIvPjxwYXRoIGQ9XCJNMTkuNzQgOC4zM2wtNS40NC02YTEgMSAwIDAgMC0uNzQtLjMzaC03QTIuNTMgMi41MyAwIDAgMCA0IDQuNXYxNUEyLjUzIDIuNTMgMCAwIDAgNi41NiAyMmgxMC44OEEyLjUzIDIuNTMgMCAwIDAgMjAgMTkuNVY5YTEgMSAwIDAgMC0uMjYtLjY3ek0xNCA1bDIuNzQgM2gtMmEuNzkuNzkgMCAwIDEtLjc0LS44NXptMy40NCAxNUg2LjU2YS41My41MyAwIDAgMS0uNTYtLjV2LTE1YS41My41MyAwIDAgMSAuNTYtLjVIMTJ2My4xNUEyLjc5IDIuNzkgMCAwIDAgMTQuNzEgMTBIMTh2OS41YS41My41MyAwIDAgMS0uNTYuNXpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2FsZXJ0LXRyaWFuZ2xlLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImFsZXJ0LXRyaWFuZ2xlXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDkwIDEyIDEyKVwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMjIuNTYgMTYuM0wxNC44OSAzLjU4YTMuNDMgMy40MyAwIDAgMC01Ljc4IDBMMS40NCAxNi4zYTMgMyAwIDAgMC0uMDUgM0EzLjM3IDMuMzcgMCAwIDAgNC4zMyAyMWgxNS4zNGEzLjM3IDMuMzcgMCAwIDAgMi45NC0xLjY2IDMgMyAwIDAgMC0uMDUtMy4wNHptLTEuNyAyLjA1YTEuMzEgMS4zMSAwIDAgMS0xLjE5LjY1SDQuMzNhMS4zMSAxLjMxIDAgMCAxLTEuMTktLjY1IDEgMSAwIDAgMSAwLTFsNy42OC0xMi43M2ExLjQ4IDEuNDggMCAwIDEgMi4zNiAwbDcuNjcgMTIuNzJhMSAxIDAgMCAxIC4wMSAxLjAxelwiLz48Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjE2XCIgcj1cIjFcIi8+PHBhdGggZD1cIk0xMiA4YTEgMSAwIDAgMC0xIDF2NGExIDEgMCAwIDAgMiAwVjlhMSAxIDAgMCAwLTEtMXpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ3F1ZXN0aW9uLW1hcmstb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwicXVlc3Rpb24tbWFya1wiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHRyYW5zZm9ybT1cInJvdGF0ZSgxODAgMTIgMTIpXCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xNyA5QTUgNSAwIDAgMCA3IDlhMSAxIDAgMCAwIDIgMCAzIDMgMCAxIDEgMyAzIDEgMSAwIDAgMC0xIDF2MmExIDEgMCAwIDAgMiAwdi0xLjFBNSA1IDAgMCAwIDE3IDl6XCIvPjxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTlcIiByPVwiMVwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnZW1haWwtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiZW1haWxcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTE5IDRINWEzIDMgMCAwIDAtMyAzdjEwYTMgMyAwIDAgMCAzIDNoMTRhMyAzIDAgMCAwIDMtM1Y3YTMgMyAwIDAgMC0zLTN6bS0uNjcgMkwxMiAxMC43NSA1LjY3IDZ6TTE5IDE4SDVhMSAxIDAgMCAxLTEtMVY3LjI1bDcuNCA1LjU1YTEgMSAwIDAgMCAuNi4yIDEgMSAwIDAgMCAuNi0uMkwyMCA3LjI1VjE3YTEgMSAwIDAgMS0xIDF6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdmbGFzaC1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJmbGFzaFwiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTEuMTEgMjNhMSAxIDAgMCAxLS4zNC0uMDYgMSAxIDAgMCAxLS42NS0xLjA1bC43Ny03LjA5SDVhMSAxIDAgMCAxLS44My0xLjU2bDcuODktMTEuOGExIDEgMCAwIDEgMS4xNy0uMzggMSAxIDAgMCAxIC42NSAxbC0uNzcgNy4xNEgxOWExIDEgMCAwIDEgLjgzIDEuNTZsLTcuODkgMTEuOGExIDEgMCAwIDEtLjgzLjQ0ek02Ljg3IDEyLjhIMTJhMSAxIDAgMCAxIC43NC4zMyAxIDEgMCAwIDEgLjI1Ljc4bC0uNDUgNC4xNSA0LjU5LTYuODZIMTJhMSAxIDAgMCAxLTEtMS4xMWwuNDUtNC4xNXpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ3NlYXJjaC1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJzZWFyY2hcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTIwLjcxIDE5LjI5bC0zLjQtMy4zOUE3LjkyIDcuOTIgMCAwIDAgMTkgMTFhOCA4IDAgMSAwLTggOCA3LjkyIDcuOTIgMCAwIDAgNC45LTEuNjlsMy4zOSAzLjRhMSAxIDAgMCAwIDEuNDIgMCAxIDEgMCAwIDAgMC0xLjQyek01IDExYTYgNiAwIDEgMSA2IDYgNiA2IDAgMCAxLTYtNnpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2Nsb3NlLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImNsb3NlXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDE4MCAxMiAxMilcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTEzLjQxIDEybDQuMy00LjI5YTEgMSAwIDEgMC0xLjQyLTEuNDJMMTIgMTAuNTlsLTQuMjktNC4zYTEgMSAwIDAgMC0xLjQyIDEuNDJsNC4zIDQuMjktNC4zIDQuMjlhMSAxIDAgMCAwIDAgMS40MiAxIDEgMCAwIDAgMS40MiAwbDQuMjktNC4zIDQuMjkgNC4zYTEgMSAwIDAgMCAxLjQyIDAgMSAxIDAgMCAwIDAtMS40MnpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2NvbGxhcHNlLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImNvbGxhcHNlXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDE4MCAxMiAxMilcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTE5IDloLTIuNThsMy4yOS0zLjI5YTEgMSAwIDEgMC0xLjQyLTEuNDJMMTUgNy41N1Y1YTEgMSAwIDAgMC0xLTEgMSAxIDAgMCAwLTEgMXY1YTEgMSAwIDAgMCAxIDFoNWExIDEgMCAwIDAgMC0yelwiLz48cGF0aCBkPVwiTTEwIDEzSDVhMSAxIDAgMCAwIDAgMmgyLjU3bC0zLjI4IDMuMjlhMSAxIDAgMCAwIDAgMS40MiAxIDEgMCAwIDAgMS40MiAwTDkgMTYuNDJWMTlhMSAxIDAgMCAwIDEgMSAxIDEgMCAwIDAgMS0xdi01YTEgMSAwIDAgMC0xLTF6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdleHBhbmQtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiZXhwYW5kXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDE4MCAxMiAxMilcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTIwIDVhMSAxIDAgMCAwLTEtMWgtNWExIDEgMCAwIDAgMCAyaDIuNTdsLTMuMjggMy4yOWExIDEgMCAwIDAgMCAxLjQyIDEgMSAwIDAgMCAxLjQyIDBMMTggNy40MlYxMGExIDEgMCAwIDAgMSAxIDEgMSAwIDAgMCAxLTF6XCIvPjxwYXRoIGQ9XCJNMTAuNzEgMTMuMjlhMSAxIDAgMCAwLTEuNDIgMEw2IDE2LjU3VjE0YTEgMSAwIDAgMC0xLTEgMSAxIDAgMCAwLTEgMXY1YTEgMSAwIDAgMCAxIDFoNWExIDEgMCAwIDAgMC0ySDcuNDJsMy4yOS0zLjI5YTEgMSAwIDAgMCAwLTEuNDJ6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdtaW51cy1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJtaW51c1wiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHRyYW5zZm9ybT1cInJvdGF0ZSgxODAgMTIgMTIpXCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xOSAxM0g1YTEgMSAwIDAgMSAwLTJoMTRhMSAxIDAgMCAxIDAgMnpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ21pbnVzLWJvbGQtb3V0bGluZSc6ICc8c3ZnIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDggMlwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj48ZGVmcz48cmVjdCBpZD1cIm5iLW1ib1wiIHk9XCIzXCIgd2lkdGg9XCI4XCIgaGVpZ2h0PVwiMlwiIHJ4PVwiMVwiLz48L2RlZnM+PHVzZSB4bGluazpocmVmPVwiI25iLW1ib1wiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwIC0zKVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIi8+PC9zdmc+JyxcbiAgICAgICAgICAgICdjaGVja21hcmstYm9sZC1vdXRsaW5lJzogJzxzdmcgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgOCA3XCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiPjxkZWZzPjxwYXRoIGlkPVwibmItY2JvXCIgZD1cIk02LjAzOSAxLjQzYTEuMTEgMS4xMSAwIDAgMSAxLjUxNy0uMjI4Yy40ODMuMzQyLjU4OC45OTguMjM0IDEuNDY2TDQuNDMxIDcuMWExIDEgMCAwIDEtMS40OTIuMTE1TC4zMTcgNC42NzdhMS4wMjMgMS4wMjMgMCAwIDEgLjAwMi0xLjQ4MyAxLjExMyAxLjExMyAwIDAgMSAxLjUzNS4wMDJsMS42NDEgMS41OUw2LjA0IDEuNDI4elwiLz48L2RlZnM+PHVzZSB4bGluazpocmVmPVwiI25iLWNib1wiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwIC0xKVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIi8+PC9zdmc+JyxcbiAgICAgICAgICAgICdhcnJvdy1iYWNrJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiYXJyb3ctYmFja1wiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHRyYW5zZm9ybT1cInJvdGF0ZSg5MCAxMiAxMilcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTE5IDExSDcuMTRsMy42My00LjM2YTEgMSAwIDEgMC0xLjU0LTEuMjhsLTUgNmExLjE5IDEuMTkgMCAwIDAtLjA5LjE1YzAgLjA1IDAgLjA4LS4wNy4xM0ExIDEgMCAwIDAgNCAxMmExIDEgMCAwIDAgLjA3LjM2YzAgLjA1IDAgLjA4LjA3LjEzYTEuMTkgMS4xOSAwIDAgMCAuMDkuMTVsNSA2QTEgMSAwIDAgMCAxMCAxOWExIDEgMCAwIDAgLjY0LS4yMyAxIDEgMCAwIDAgLjEzLTEuNDFMNy4xNCAxM0gxOWExIDEgMCAwIDAgMC0yelwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aFxuICAgIH1cbiAgICBOYkljb25Nb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICBOYkljb25Db21wb25lbnQsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgIE5iSWNvbkNvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iSWNvbkxpYnJhcmllc10pXG4gICAgXSwgTmJJY29uTW9kdWxlKTtcbiAgICByZXR1cm4gTmJJY29uTW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDb21wb25lbnQgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoaW4gdGhlIGA8bmItY2FyZD5gIGNvbXBvbmVudC5cbiAqIEl0IGFkZHMgc3R5bGVzIGZvciBhIHByZXNldCBoZWFkZXIgc2VjdGlvbi5cbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2FyZC1oZWFkZXItdGV4dC1jb2xvcjpcbiAqIGNhcmQtaGVhZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBjYXJkLWhlYWRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhcmQtaGVhZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYXJkLWhlYWRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FyZC1oZWFkZXItYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhcmQtaGVhZGVyLWJhc2ljLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1pbmZvLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhcmQtaGVhZGVyLWRhbmdlci10ZXh0LWNvbG9yOlxuICogY2FyZC1oZWFkZXItY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FyZC1oZWFkZXItY29udHJvbC10ZXh0LWNvbG9yOlxuICovXG52YXIgTmJDYXJkSGVhZGVyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FyZEhlYWRlckNvbXBvbmVudCgpIHtcbiAgICB9XG4gICAgTmJDYXJkSGVhZGVyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhcmQtaGVhZGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cIlxuICAgICAgICB9KVxuICAgIF0sIE5iQ2FyZEhlYWRlckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2FyZEhlYWRlckNvbXBvbmVudDtcbn0oKSk7XG4vKipcbiAqIENvbXBvbmVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGhpbiAgdGhlIGA8bmItY2FyZD5gIGNvbXBvbmVudC5cbiAqIEFkZHMgc3R5bGVzIGZvciBhIHByZXNldCBib2R5IHNlY3Rpb24uXG4gKi9cbnZhciBOYkNhcmRCb2R5Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FyZEJvZHlDb21wb25lbnQoKSB7XG4gICAgfVxuICAgIE5iQ2FyZEJvZHlDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FyZC1ib2R5JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cIlxuICAgICAgICB9KVxuICAgIF0sIE5iQ2FyZEJvZHlDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhcmRCb2R5Q29tcG9uZW50O1xufSgpKTtcbi8qKlxuICogQ29tcG9uZW50IGludGVuZGVkIHRvIGJlIHVzZWQgd2l0aGluICB0aGUgYDxuYi1jYXJkPmAgY29tcG9uZW50LlxuICogQWRkcyBzdHlsZXMgZm9yIGEgcHJlc2V0IGZvb3RlciBzZWN0aW9uLlxuICovXG52YXIgTmJDYXJkRm9vdGVyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FyZEZvb3RlckNvbXBvbmVudCgpIHtcbiAgICB9XG4gICAgTmJDYXJkRm9vdGVyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhcmQtZm9vdGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cIlxuICAgICAgICB9KVxuICAgIF0sIE5iQ2FyZEZvb3RlckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2FyZEZvb3RlckNvbXBvbmVudDtcbn0oKSk7XG4vKipcbiAqIEJhc2ljIGNvbnRlbnQgY29udGFpbmVyIGNvbXBvbmVudC5cbiAqXG4gKiBCYXNpYyBjYXJkIGV4YW1wbGU6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBjYXJkL2NhcmQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEJhc2ljIGNhcmQgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItY2FyZD5cbiAqICAgPG5iLWNhcmQtYm9keT5cbiAqICAgICBDYXJkXG4gKiAgIDwvbmItY2FyZC1ib2R5PlxuICogPC9uYi1jYXJkPlxuICogYGBgXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDYXJkTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkNhcmRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIENhcmQgd2l0aCBoZWFkZXIgYW5kIGZvb3RlcjpcbiAqIEBzdGFja2VkLWV4YW1wbGUoV2l0aCBIZWFkZXIgJiBGb290ZXIsIGNhcmQvY2FyZC1mdWxsLmNvbXBvbmVudClcbiAqXG4gKiBNb3N0IG9mIHRoZSB0aW1lIG1haW4gY2FyZCBjb250ZW50IGdvZXMgdG8gYG5iLWNhcmQtYm9keWAsXG4gKiBzbyBpdCBpcyBzdHlsZWQgYW5kIGFsaWduZWQgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBoZWFkZXIgYW5kIGZvb3Rlci5cbiAqIEluIGNhc2UgeW91IG5lZWQgYSBoaWdoZXIgbGV2ZWwgb2YgY29udHJvbCwgeW91IGNhbiBwYXNzIGNvbnRlbmQgZGlyZWN0bHkgdG8gYG5iLWNhcmRgLFxuICogc28gYG5iLWNhcmQtYm9keWAgc3R5bGluZyB3aWxsIG5vdCBiZSBhcHBsaWVkLlxuICpcbiAqIENvbnNpZGVyIGFuIGV4YW1wbGUgd2l0aCBgbmItbGlzdGAgY29tcG9uZW50OlxuICogQHN0YWNrZWQtZXhhbXBsZShDYXJkIHdpdGggbGlzdCwgY2FyZC9jYXJkLXdpdGhvdXQtYm9keS5jb21wb25lbnQpXG4gKlxuICogQ29sb3JlZCBjYXJkcyBjb3VsZCBiZSBzaW1wbHkgY29uZmlndXJlZCBieSBwcm92aWRpbmcgYSBgc3RhdHVzYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ29sb3JlZCBDYXJkLCBjYXJkL2NhcmQtY29sb3JzLmNvbXBvbmVudClcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGFzc2lnbiBhbiBgYWNjZW50YCBwcm9wZXJ0eSBmb3IgYSBzbGlnaHQgY2FyZCBoaWdobGlnaHRcbiAqIGFzIHdlbGwgYXMgY29tYmluZSBpdCB3aXRoIGBzdGF0dXNgOlxuICogQHN0YWNrZWQtZXhhbXBsZShBY2NlbnQgQ2FyZCwgY2FyZC9jYXJkLWFjY2VudHMuY29tcG9uZW50KVxuICpcbiAqIENhcmRzIG9mIHNtYWxsZXIgc2l6ZXMgY291bGQgYmUgY29tYmluZWQgYW5kIHB1dCBvbiB0aGUgc2FtZSByb3cgd2l0aCBhIGJpZ2dlciBjYXJkIHNvIHRoZXkgaGF2ZSB0aGUgc2FtZSBoZWlnaHRzLlxuICogQHN0YWNrZWQtZXhhbXBsZShDYXJkIHNpemVzIGNvbWJpbmF0aW9ucywgY2FyZC9jYXJkLXNpemVzLWNvbWJpbmF0aW9ucy5jb21wb25lbnQpXG4gKlxuICogQGFkZGl0aW9uYWwtZXhhbXBsZShNdWx0aXBsZSBTaXplcywgY2FyZC9jYXJkLXNpemVzLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2FyZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FyZC10ZXh0LWNvbG9yOlxuICogY2FyZC10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2FyZC10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhcmQtdGV4dC1mb250LXdlaWdodDpcbiAqIGNhcmQtdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhcmQtYm9yZGVyLXdpZHRoOlxuICogY2FyZC1ib3JkZXItc3R5bGU6XG4gKiBjYXJkLWJvcmRlci1jb2xvcjpcbiAqIGNhcmQtYm9yZGVyLXJhZGl1czpcbiAqIGNhcmQtcGFkZGluZzpcbiAqIGNhcmQtc2hhZG93OlxuICogY2FyZC1kaXZpZGVyLWNvbG9yOlxuICogY2FyZC1kaXZpZGVyLXN0eWxlOlxuICogY2FyZC1kaXZpZGVyLXdpZHRoOlxuICogY2FyZC1oZWlnaHQtdGlueTpcbiAqIGNhcmQtaGVpZ2h0LXNtYWxsOlxuICogY2FyZC1oZWlnaHQtbWVkaXVtOlxuICogY2FyZC1oZWlnaHQtbGFyZ2U6XG4gKiBjYXJkLWhlaWdodC1naWFudDpcbiAqIGNhcmQtbWFyZ2luLWJvdHRvbTpcbiAqIGNhcmQtc2Nyb2xsYmFyLWNvbG9yOlxuICogY2FyZC1zY3JvbGxiYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhcmQtc2Nyb2xsYmFyLXdpZHRoOlxuICovXG52YXIgTmJDYXJkQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FyZENvbXBvbmVudCgpIHtcbiAgICAgICAgdGhpcy5fc2l6ZSA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FyZCBzdGF0dXM6XG4gICAgICAgICAqIGBiYXNpY2AsIGBwcmltYXJ5YCwgYGluZm9gLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcmQgYWNjZW50IChjb2xvciBvZiB0aGUgdG9wIGJvcmRlcik6XG4gICAgICAgICAqIGBiYXNpY2AsIGBwcmltYXJ5YCwgYGluZm9gLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY2NlbnQgPSAnJztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXJkIHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICAgICAgICogdGlueSwgc21hbGwsIG1lZGl1bSwgbGFyZ2UsIGdpYW50XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaXplO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fc2l6ZSA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdtZWRpdW0nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJoYXNBY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2VudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeUFjY2VudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZW50ID09PSAncHJpbWFyeSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImluZm9BY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2luZm8nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzQWNjZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NlbnQgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ0FjY2VudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZW50ID09PSAnd2FybmluZyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlckFjY2VudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZW50ID09PSAnZGFuZ2VyJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNBY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2Jhc2ljJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbEFjY2VudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZW50ID09PSAnY29udHJvbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwiYWNjZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXRpbnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcInRpbnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXNtYWxsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzbWFsbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbWVkaXVtJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtZ2lhbnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImdpYW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXByaW1hcnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtaW5mbycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1zdWNjZXNzJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXdhcm5pbmcnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtZGFuZ2VyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtYmFzaWMnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWNvbnRyb2wnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImhhc0FjY2VudFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFjY2VudC1wcmltYXJ5JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5QWNjZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYWNjZW50LWluZm8nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImluZm9BY2NlbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQtc3VjY2VzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc0FjY2VudFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFjY2VudC13YXJuaW5nJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nQWNjZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYWNjZW50LWRhbmdlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FyZENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyQWNjZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYWNjZW50LWJhc2ljJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY0FjY2VudFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFjY2VudC1jb250cm9sJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sQWNjZW50XCIsIG51bGwpO1xuICAgIE5iQ2FyZENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYXJkJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLWNhcmQtaGVhZGVyXFxcIj48L25nLWNvbnRlbnQ+XFxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItY2FyZC1ib2R5XFxcIj48L25nLWNvbnRlbnQ+XFxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1jYXJkLWZvb3RlclxcXCI+PC9uZy1jb250ZW50PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59XFxuXCJdXG4gICAgICAgIH0pXG4gICAgXSwgTmJDYXJkQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYXJkQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKlxuICogUmV2ZWFsIGNhcmQgZXhhbXBsZTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTXkgZXhhbXBsZSwgcmV2ZWFsLWNhcmQvcmV2ZWFsLWNhcmQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEFzIGEgY29udGVudCBSZXZlYWwgY2FyZCBhY2NlcHRzIHR3byBpbnN0YW5jZXMgb2YgYG5iLWNhcmRgIC0gZm9yIGZyb250IGFuZCBiYWNrIHNpZGVzLlxuICpcbiAqIEJhc2ljIHJldmVhbCBjYXJkIGNvbmZpZ3VyYXRpb246XG4gKlxuICogYGBgaHRtbFxuICogPG5iLXJldmVhbC1jYXJkPlxuICogICA8bmItY2FyZC1mcm9udD5cbiAqICAgICA8bmItY2FyZD5cbiAqICAgICAgIDxuYi1jYXJkLWJvZHk+XG4gKiAgICAgICAgIEZyb250XG4gKiAgICAgICA8L25iLWNhcmQtYm9keT5cbiAqICAgICA8L25iLWNhcmQ+XG4gKiAgIDwvbmItY2FyZC1mcm9udD5cbiAqICAgPG5iLWNhcmQtYmFjaz5cbiAqICAgICA8bmItY2FyZD5cbiAqICAgICAgIDxuYi1jYXJkLWJvZHk+XG4gKiAgICAgICAgIEJhY2tcbiAqICAgICAgIDwvbmItY2FyZC1ib2R5PlxuICogICAgIDwvbmItY2FyZD5cbiAqICAgPC9uYi1jYXJkLWJhY2s+XG4gKiA8L25iLXJldmVhbC1jYXJkPlxuICogYGBgXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDYXJkTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkNhcmRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIFJldmVhbCBDYXJkIHdpdGggaGVhZGVyIGFuZCBmb290ZXI6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFdpdGggSGVhZGVyICYgRm9vdGVyLCByZXZlYWwtY2FyZC9yZXZlYWwtY2FyZC1mdWxsLmNvbXBvbmVudClcbiAqXG4gKiBDb2xvcmVkIHJldmVhbC1jYXJkcyBjb3VsZCBiZSBzaW1wbHkgY29uZmlndXJlZCBieSBwcm92aWRpbmcgYSBgc3RhdHVzYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ29sb3JlZCBDYXJkLCByZXZlYWwtY2FyZC9yZXZlYWwtY2FyZC1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gYXNzaWduIGFuIGBhY2NlbnRgIHByb3BlcnR5IGZvciBhIHNsaWdodCBjYXJkIGhpZ2hsaWdodFxuICogYXMgd2VsbCBhcyBjb21iaW5lIGl0IHdpdGggYHN0YXR1c2A6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEFjY2VudCBDYXJkLCByZXZlYWwtY2FyZC9yZXZlYWwtY2FyZC1hY2NlbnRzLmNvbXBvbmVudClcbiAqXG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKE11bHRpcGxlIFNpemVzLCByZXZlYWwtY2FyZC9yZXZlYWwtY2FyZC1zaXplcy5jb21wb25lbnQpXG4gKi9cbnZhciBOYlJldmVhbENhcmRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJSZXZlYWxDYXJkQ29tcG9uZW50KCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV2ZWFsIHN0YXRlXG4gICAgICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmV2ZWFsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cvaGlkZSB0b2dnbGUgYnV0dG9uIHRvIGJlIGFibGUgdG8gY29udHJvbCB0b2dnbGUgZnJvbSB5b3VyIGNvZGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNob3dUb2dnbGVCdXR0b24gPSB0cnVlO1xuICAgIH1cbiAgICBOYlJldmVhbENhcmRDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZXZlYWxlZCA9ICF0aGlzLnJldmVhbGVkO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5yZXZlYWxlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYlJldmVhbENhcmRDb21wb25lbnQucHJvdG90eXBlLCBcInJldmVhbGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJSZXZlYWxDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93VG9nZ2xlQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgTmJSZXZlYWxDYXJkQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLXJldmVhbC1jYXJkJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLWNhcmQtZnJvbnRcXFwiPjwvbmctY29udGVudD5cXG4gICAgPGRpdiBjbGFzcz1cXFwic2Vjb25kLWNhcmQtY29udGFpbmVyXFxcIj5cXG4gICAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLWNhcmQtYmFja1xcXCI+PC9uZy1jb250ZW50PlxcbiAgICA8L2Rpdj5cXG4gICAgPGEgKm5nSWY9XFxcInNob3dUb2dnbGVCdXR0b25cXFwiIGNsYXNzPVxcXCJyZXZlYWwtYnV0dG9uXFxcIiAoY2xpY2spPVxcXCJ0b2dnbGUoKVxcXCI+XFxuICAgICAgPG5iLWljb24gaWNvbj1cXFwiY2hldnJvbi1kb3duLW91dGxpbmVcXFwiIHBhY2s9XFxcIm5lYnVsYXItZXNzZW50aWFsc1xcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvbmItaWNvbj5cXG4gICAgPC9hPlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVufTpob3N0IC5zZWNvbmQtY2FyZC1jb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7cmlnaHQ6MDtsZWZ0OjA7b3ZlcmZsb3c6aGlkZGVuO3RyYW5zaXRpb246dG9wIDBzIDAuNXN9Omhvc3QgOjpuZy1kZWVwIG5iLWNhcmQtZnJvbnQgbmItY2FyZCw6aG9zdCA6Om5nLWRlZXAgbmItY2FyZC1iYWNrIG5iLWNhcmR7Ym94LXNoYWRvdzpub25lO21hcmdpbjowfTpob3N0IDo6bmctZGVlcCBuYi1jYXJkLWZyb250e2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjEwMCV9Omhvc3QgOjpuZy1kZWVwIG5iLWNhcmQtYmFja3twb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjEwMCU7d2lkdGg6MTAwJTt0cmFuc2l0aW9uOnRvcCAwLjVzfTpob3N0IC5yZXZlYWwtYnV0dG9ue2N1cnNvcjpwb2ludGVyO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7Ym90dG9tOjA7dHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3N9Omhvc3QoLnJldmVhbGVkKSAuc2Vjb25kLWNhcmQtY29udGFpbmVye3RvcDowO3RyYW5zaXRpb246bm9uZX06aG9zdCgucmV2ZWFsZWQpIC5zZWNvbmQtY2FyZC1jb250YWluZXIgOjpuZy1kZWVwIG5iLWNhcmQtYmFja3t0b3A6MH06aG9zdCgucmV2ZWFsZWQpIC5yZXZlYWwtYnV0dG9ue3RyYW5zZm9ybTpub25lfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iUmV2ZWFsQ2FyZENvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iUmV2ZWFsQ2FyZENvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICpcbiAqIEZsaXAgY2FyZCBleGFtcGxlOlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgZmxpcC1jYXJkL2ZsaXAtY2FyZC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogQXMgYSBjb250ZW50IEZsaXAgY2FyZCBhY2NlcHRzIHR3byBpbnN0YW5jZXMgb2YgYG5iLWNhcmRgIC0gZm9yIGZyb250IGFuZCBiYWNrIHNpZGVzLlxuICpcbiAqIEJhc2ljIGZsaXAgY2FyZCBjb25maWd1cmF0aW9uOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1mbGlwLWNhcmQ+XG4gKiAgIDxuYi1jYXJkLWZyb250PlxuICogICAgIDxuYi1jYXJkPlxuICogICAgICAgPG5iLWNhcmQtYm9keT5cbiAqICAgICAgICAgRnJvbnRcbiAqICAgICAgIDwvbmItY2FyZC1ib2R5PlxuICogICAgIDwvbmItY2FyZD5cbiAqICAgPC9uYi1jYXJkLWZyb250PlxuICogICA8bmItY2FyZC1iYWNrPlxuICogICAgIDxuYi1jYXJkPlxuICogICAgICAgPG5iLWNhcmQtYm9keT5cbiAqICAgICAgICAgQmFja1xuICogICAgICAgPC9uYi1jYXJkLWJvZHk+XG4gKiAgICAgPC9uYi1jYXJkPlxuICogICA8L25iLWNhcmQtYmFjaz5cbiAqIDwvbmItZmxpcC1jYXJkPlxuICogYGBgXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDYXJkTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkNhcmRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIEZsaXAgQ2FyZCB3aXRoIGhlYWRlciBhbmQgZm9vdGVyOlxuICogQHN0YWNrZWQtZXhhbXBsZShXaXRoIEhlYWRlciAmIEZvb3RlciwgZmxpcC1jYXJkL2ZsaXAtY2FyZC1mdWxsLmNvbXBvbmVudC50cylcbiAqXG4gKiBDb2xvcmVkIGZsaXAtY2FyZHMgY291bGQgYmUgc2ltcGx5IGNvbmZpZ3VyZWQgYnkgcHJvdmlkaW5nIGEgYHN0YXR1c2AgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgQ2FyZCwgZmxpcC1jYXJkL2ZsaXAtY2FyZC1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gYXNzaWduIGFuIGBhY2NlbnRgIHByb3BlcnR5IGZvciBhIHNsaWdodCBjYXJkIGhpZ2hsaWdodFxuICogYXMgd2VsbCBhcyBjb21iaW5lIGl0IHdpdGggYHN0YXR1c2A6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEFjY2VudCBDYXJkLCBmbGlwLWNhcmQvZmxpcC1jYXJkLWFjY2VudHMuY29tcG9uZW50KVxuICpcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoTXVsdGlwbGUgU2l6ZXMsIGZsaXAtY2FyZC9mbGlwLWNhcmQtc2l6ZXMuY29tcG9uZW50KVxuICpcbiAqL1xudmFyIE5iRmxpcENhcmRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJGbGlwQ2FyZENvbXBvbmVudCgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZsaXAgc3RhdGVcbiAgICAgICAgICogQHR5cGUgYm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mbGlwcGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93L2hpZGUgdG9nZ2xlIGJ1dHRvbiB0byBiZSBhYmxlIHRvIGNvbnRyb2wgdG9nZ2xlIGZyb20geW91ciBjb2RlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93VG9nZ2xlQnV0dG9uID0gdHJ1ZTtcbiAgICB9XG4gICAgTmJGbGlwQ2FyZENvbXBvbmVudC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmZsaXBwZWQgPSAhdGhpcy5mbGlwcGVkO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5mbGlwcGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iRmxpcENhcmRDb21wb25lbnQucHJvdG90eXBlLCBcImZsaXBwZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkZsaXBDYXJkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93VG9nZ2xlQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgTmJGbGlwQ2FyZENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1mbGlwLWNhcmQnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcImZsaXBjYXJkLWJvZHlcXFwiPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImZyb250LWNvbnRhaW5lclxcXCI+XFxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLWNhcmQtZnJvbnRcXFwiPjwvbmctY29udGVudD5cXG4gICAgICAgIDxhICpuZ0lmPVxcXCJzaG93VG9nZ2xlQnV0dG9uXFxcIiBjbGFzcz1cXFwiZmxpcC1idXR0b25cXFwiIChjbGljayk9XFxcInRvZ2dsZSgpXFxcIj5cXG4gICAgICAgICAgPG5iLWljb24gaWNvbj1cXFwiY2hldnJvbi1sZWZ0LW91dGxpbmVcXFwiIHBhY2s9XFxcIm5lYnVsYXItZXNzZW50aWFsc1xcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvbmItaWNvbj5cXG4gICAgICAgIDwvYT5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJiYWNrLWNvbnRhaW5lclxcXCI+XFxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLWNhcmQtYmFja1xcXCI+PC9uZy1jb250ZW50PlxcbiAgICAgICAgPGEgKm5nSWY9XFxcInNob3dUb2dnbGVCdXR0b25cXFwiIGNsYXNzPVxcXCJmbGlwLWJ1dHRvblxcXCIgKGNsaWNrKT1cXFwidG9nZ2xlKClcXFwiPlxcbiAgICAgICAgICA8bmItaWNvbiBpY29uPVxcXCJjaGV2cm9uLWxlZnQtb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9uYi1pY29uPlxcbiAgICAgICAgPC9hPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIFwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmJsb2NrO3BlcnNwZWN0aXZlOjEyMDBweDtwb3NpdGlvbjpyZWxhdGl2ZX06aG9zdC1jb250ZXh0KC5mbGlwcGVkKSAuZmxpcGNhcmQtYm9keXt0cmFuc2Zvcm06cm90YXRlWSgtMTgwZGVnKX06aG9zdC1jb250ZXh0KC5mbGlwcGVkKSAuZmxpcGNhcmQtYm9keSAuZnJvbnQtY29udGFpbmVye29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgMHMgMC4yNXM7YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbn06aG9zdC1jb250ZXh0KC5mbGlwcGVkKSAuZmxpcGNhcmQtYm9keSAuZnJvbnQtY29udGFpbmVyIC5mbGlwLWJ1dHRvbntvcGFjaXR5OjA7ei1pbmRleDotMX06aG9zdC1jb250ZXh0KC5mbGlwcGVkKSAuZmxpcGNhcmQtYm9keSAuYmFjay1jb250YWluZXJ7YmFja2ZhY2UtdmlzaWJpbGl0eTp2aXNpYmxlOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTp2aXNpYmxlfS5mbGlwY2FyZC1ib2R5e2Rpc3BsYXk6ZmxleDt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjVzO3RyYW5zZm9ybS1zdHlsZTpwcmVzZXJ2ZS0zZH0uZmxpcGNhcmQtYm9keSAuZnJvbnQtY29udGFpbmVyLC5mbGlwY2FyZC1ib2R5IC5iYWNrLWNvbnRhaW5lcntmbGV4OjF9LmZsaXBjYXJkLWJvZHkgLmZyb250LWNvbnRhaW5lciAuZmxpcC1idXR0b24sLmZsaXBjYXJkLWJvZHkgLmJhY2stY29udGFpbmVyIC5mbGlwLWJ1dHRvbntjdXJzb3I6cG9pbnRlcjtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO2JvdHRvbTowO29wYWNpdHk6MTt0cmFuc2l0aW9uOm9wYWNpdHkgMHMgMC4xNXN9LmZsaXBjYXJkLWJvZHkgLmZyb250LWNvbnRhaW5lcntiYWNrZmFjZS12aXNpYmlsaXR5OnZpc2libGU7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OnZpc2libGU7dHJhbnNpdGlvbjpvcGFjaXR5IDBzIDAuMnN9LmZsaXBjYXJkLWJvZHkgLmJhY2stY29udGFpbmVye2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47dHJhbnNmb3JtOnJvdGF0ZVkoMTgwZGVnKX1cXG5cIl1cbiAgICAgICAgfSlcbiAgICBdLCBOYkZsaXBDYXJkQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJGbGlwQ2FyZENvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQ29tcG9uZW50IGludGVuZGVkIHRvIGJlIHVzZWQgd2l0aGluIHRoZSBgPG5iLWZsaXAtY2FyZD5gIGFuZCBgPG5iLXJldmVhbC1jYXJkPmAgY29tcG9uZW50cy5cbiAqXG4gKiBVc2UgaXQgYXMgYSBjb250YWluZXIgZm9yIHRoZSBmcm9udCBjYXJkLlxuICovXG52YXIgTmJDYXJkRnJvbnRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYXJkRnJvbnRDb21wb25lbnQoKSB7XG4gICAgfVxuICAgIE5iQ2FyZEZyb250Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhcmQtZnJvbnQnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8bmctY29udGVudCBzZWxlY3Q9XCJuYi1jYXJkXCI+PC9uZy1jb250ZW50PidcbiAgICAgICAgfSlcbiAgICBdLCBOYkNhcmRGcm9udENvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2FyZEZyb250Q29tcG9uZW50O1xufSgpKTtcbi8qKlxuICogQ29tcG9uZW50IGludGVuZGVkIHRvIGJlIHVzZWQgd2l0aGluIHRoZSBgPG5iLWZsaXAtY2FyZD5gIGFuZCBgPG5iLXJldmVhbC1jYXJkPmAgY29tcG9uZW50cy5cbiAqXG4gKiBVc2UgaXQgYXMgYSBjb250YWluZXIgZm9yIHRoZSBiYWNrIGNhcmQuXG4gKi9cbnZhciBOYkNhcmRCYWNrQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FyZEJhY2tDb21wb25lbnQoKSB7XG4gICAgfVxuICAgIE5iQ2FyZEJhY2tDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FyZC1iYWNrJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItY2FyZFwiPjwvbmctY29udGVudD4nXG4gICAgICAgIH0pXG4gICAgXSwgTmJDYXJkQmFja0NvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2FyZEJhY2tDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTkJfQ0FSRF9DT01QT05FTlRTID0gW1xuICAgIE5iQ2FyZENvbXBvbmVudCxcbiAgICBOYkNhcmRCb2R5Q29tcG9uZW50LFxuICAgIE5iQ2FyZEZvb3RlckNvbXBvbmVudCxcbiAgICBOYkNhcmRIZWFkZXJDb21wb25lbnQsXG4gICAgTmJSZXZlYWxDYXJkQ29tcG9uZW50LFxuICAgIE5iRmxpcENhcmRDb21wb25lbnQsXG4gICAgTmJDYXJkRnJvbnRDb21wb25lbnQsXG4gICAgTmJDYXJkQmFja0NvbXBvbmVudCxcbl07XG52YXIgTmJDYXJkTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FyZE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJDYXJkTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBfX3NwcmVhZEFycmF5cyhOQl9DQVJEX0NPTVBPTkVOVFMpLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoTkJfQ0FSRF9DT01QT05FTlRTKSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkNhcmRNb2R1bGUpO1xuICAgIHJldHVybiBOYkNhcmRNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJDYWxlbmRhclZpZXdNb2RlO1xuKGZ1bmN0aW9uIChOYkNhbGVuZGFyVmlld01vZGUpIHtcbiAgICBOYkNhbGVuZGFyVmlld01vZGVbXCJZRUFSXCJdID0gXCJ5ZWFyXCI7XG4gICAgTmJDYWxlbmRhclZpZXdNb2RlW1wiTU9OVEhcIl0gPSBcIm1vbnRoXCI7XG4gICAgTmJDYWxlbmRhclZpZXdNb2RlW1wiREFURVwiXSA9IFwiZGF0ZVwiO1xufSkoTmJDYWxlbmRhclZpZXdNb2RlIHx8IChOYkNhbGVuZGFyVmlld01vZGUgPSB7fSkpO1xudmFyIE5iQ2FsZW5kYXJTaXplO1xuKGZ1bmN0aW9uIChOYkNhbGVuZGFyU2l6ZSkge1xuICAgIE5iQ2FsZW5kYXJTaXplW1wiTUVESVVNXCJdID0gXCJtZWRpdW1cIjtcbiAgICBOYkNhbGVuZGFyU2l6ZVtcIkxBUkdFXCJdID0gXCJsYXJnZVwiO1xufSkoTmJDYWxlbmRhclNpemUgfHwgKE5iQ2FsZW5kYXJTaXplID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuZnVuY3Rpb24gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCkge1xuICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICB2YWwgPSB2YWwudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIHJldHVybiAodmFsID09PSAndHJ1ZScgfHwgdmFsID09PSAnJyk7XG4gICAgfVxuICAgIHJldHVybiAhIXZhbDtcbn1cblxuZnVuY3Rpb24gZmlyc3RDaGlsZE5vdENvbW1lbnQobm9kZSkge1xuICAgIHZhciBjaGlsZHJlbiA9IEFycmF5XG4gICAgICAgIC5mcm9tKG5vZGUuY2hpbGROb2RlcylcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHsgcmV0dXJuIGNoaWxkLm5vZGVUeXBlICE9PSBOb2RlLkNPTU1FTlRfTk9ERTsgfSk7XG4gICAgcmV0dXJuIGNoaWxkcmVuWzBdO1xufVxuZnVuY3Rpb24gbGFzdENoaWxkTm90Q29tbWVudChub2RlKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gQXJyYXlcbiAgICAgICAgLmZyb20obm9kZS5jaGlsZE5vZGVzKVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gY2hpbGQubm9kZVR5cGUgIT09IE5vZGUuQ09NTUVOVF9OT0RFOyB9KTtcbiAgICByZXR1cm4gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG59XG4vKlxuICogQGJyZWFraW5nLWNoYW5nZSBSZW1vdmUgQDYuMC4wXG4gKi9cbmZ1bmN0aW9uIGVtcHR5U3RhdHVzV2FybmluZyhzb3VyY2UpIHtcbiAgICBjb25zb2xlLndhcm4oc291cmNlICsgXCI6IFVzaW5nIGVtcHR5IHN0cmluZyBhcyBhIHN0YXR1cyBpcyBkZXByZWNhdGVkLiBVc2UgYGJhc2ljYCBpbnN0ZWFkLlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDYWxlbmRhciBjb21wb25lbnQgcHJvdmlkZXMgYSBjYXBhYmlsaXR5IHRvIGNob29zZSBhIGRhdGUuXG4gKlxuICogYGBgaHRtbFxuICogPG5iLWNhbGVuZGFyIFsoZGF0ZSldPVwiZGF0ZVwiPjwvbmItY2FsZW5kYXI+XG4gKiA8bmItY2FsZW5kYXIgW2RhdGVdPVwiZGF0ZVwiIChkYXRlQ2hhbmdlKT1cImhhbmRsZURhdGVDaGFuZ2UoJGV2ZW50KVwiPjwvbmItY2FsZW5kYXI+XG4gKiBgYGBcbiAqXG4gKiBCYXNpYyB1c2FnZSBleGFtcGxlXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBjYWxlbmRhci9jYWxlbmRhci1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDYWxlbmRhck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDYWxlbmRhck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogSWYgeW91IHdhbnQgdG8gc2VsZWN0IHJhbmdlcyB5b3UgY2FuIHVzZSBgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50YC5cbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItY2FsZW5kYXItcmFuZ2UgWyhyYW5nZSldPVwicmFuZ2VcIj48L25iLWNhbGVuZGFyLXJhbmdlPlxuICogPG5iLWNhbGVuZGFyLXJhbmdlIFtyYW5nZV09XCJyYW5nZVwiIChyYW5nZUNoYW5nZSk9XCJoYW5kbGVSYW5nZUNoYW5nZSgkZXZlbnQpXCI+PC9uYi1jYWxlbmRhci1yYW5nZT5cbiAqIGBgYFxuICpcbiAqIEluIG9yZGVyIHRvIHVzZSBpdCwgeW91IGhhdmUgdG8gaW1wb3J0IGBOYkNhbGVuZGFyUmFuZ2VNb2R1bGVgLlxuICogQHN0YWNrZWQtZXhhbXBsZShSYW5nZSwgY2FsZW5kYXIvY2FsZW5kYXItcmFuZ2Utc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIFRoZSBjYWxlbmRhciBjb21wb25lbnQgaXMgc3VwcGxpZWQgd2l0aCBhIGNhbGVuZGFyIG5hdmlnYXRpb24gdGhhdCBjb250YWlucyBuYXZpZ2F0ZSBidXR0b25zLlxuICogSWYgeW91IGRvIG5vdCB3YW50IHRvIHVzZSBpdCB5b3UgY2FuIGhpZGUgY2FsZW5kYXIgbmF2aWdhdGlvbiB1c2luZyBgc2hvd05hdmlnYXRpb25gIHByb3BlcnR5LlxuICogQHN0YWNrZWQtZXhhbXBsZShXaXRob3V0IG5hdmlnYXRpb24sIGNhbGVuZGFyL2NhbGVuZGFyLXdpdGhvdXQtbmF2aWdhdGlvbi5jb21wb25lbnQpXG4gKlxuICogQXMgeW91IGNhbiBzZWUgaW4gdGhlIGJhc2ljIHVzYWdlIGV4YW1wbGUgY2FsZW5kYXIgY29udGFpbnMgcHJldmlvdXMgYW5kIG5leHQgbW9udGggZGF5c1xuICogd2hpY2ggY2FuIGJlIGRpc2FibGVkIHVzaW5nIGBib3VuZGluZ01vbnRoYCBwcm9wZXJ0eS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoQm91bmRpbmcgbW9udGhzLCBjYWxlbmRhci9jYWxlbmRhci1ib3VuZGluZy1tb250aC5jb21wb25lbnQpXG4gKlxuICogWW91IGNhbiBkZWZpbmUgc3RhcnRpbmcgdmlldyBvZiB0aGUgY2FsZW5kYXIgYnkgc2V0dGluZyBgc3RhcnRWaWV3YCBwcm9wZXJ0eS5cbiAqIEF2YWlsYWJsZSB2YWx1ZXM6IHllYXIsIG1vbnRoIGFuZCBkYXRlLlxuICogQHN0YWNrZWQtZXhhbXBsZShTdGFydCB2aWV3LCBjYWxlbmRhci9jYWxlbmRhci1zdGFydC12aWV3LmNvbXBvbmVudClcbiAqXG4gKiBZb3UgY2FuIHVzZSBhIGxhcmdlciB2ZXJzaW9uIG9mIHRoZSBjYWxlbmRhciBieSBkZWZpbmluZyBzaXplIHByb3BlcnR5LlxuICogQXZhaWxhYmxlIHZhbHVlczogbWVkaXVtKHdoaWNoIGlzIGRlZmF1bHQpIGFuZCBsYXJnZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU2l6ZSwgY2FsZW5kYXIvY2FsZW5kYXItc2l6ZS5jb21wb25lbnQpXG4gKlxuICogQ2FsZW5kYXIgc3VwcG9ydHMgbWluIGFuZCBtYXggZGF0ZXMgd2hpY2ggZGlzYWJsZXMgdmFsdWVzIG91dCBvZiBtaW4tbWF4IHJhbmdlLlxuICogQHN0YWNrZWQtZXhhbXBsZShCb3JkZXJzLCBjYWxlbmRhci9jYWxlbmRhci1taW4tbWF4LmNvbXBvbmVudClcbiAqXG4gKiBBbHNvLCB5b3UgY2FuIGRlZmluZSBjdXN0b20gZmlsdGVyIHByb3BlcnR5IHRoYXQgc2hvdWxkIGJlIHByZWRpY2F0ZSB3aGljaCByZWNlaXZlc1xuICogZGF0ZSBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGlzIGRhdGUgaGFzIHRvIGJlIGRpc2FibGVkLiBJbiB0aGlzIGV4YW1wbGUsIHdlIHByb3ZpZGUgdGhlIGZpbHRlclxuICogd2hpY2ggZGlzYWJsZXMgd2Vla2RheXMuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEZpbHRlciwgY2FsZW5kYXIvY2FsZW5kYXItZmlsdGVyLmNvbXBvbmVudClcbiAqXG4gKiBXZWVrIG51bWJlcnMgY29sdW1uIGNvdWxkIGJlIGVuYWJsZWQgdmlhIGBzaG93V2Vla051bWJlcmAgYmluZGluZzpcbiAqIEBzdGFja2VkLWV4YW1wbGUoV2VlayBudW1iZXIsIGNhbGVuZGFyL2NhbGVuZGFyLXdlZWstbnVtYmVyLmNvbXBvbmVudClcbiAqXG4gKiBJZiB5b3UgbmVlZCBjcmVhdGUgY3VzdG9tIGNlbGxzIHlvdSBjYW4gZWFzaWx5IHByb3ZpZGUgY3VzdG9tIGNvbXBvbmVudHMgZm9yXG4gKiBjYWxlbmRhci4gRm9yIGV4YW1wbGVzIGlmIHlvdSB3YW50IHRvIHNob3cgYW55IGF2ZXJhZ2UgcHJpY2UgdW5kZXIgZWFjaCBkYXRlIHlvdSBjYW5cbiAqIGp1c3QgcHJvdmlkZSBjdXN0b20gYGRheUNlbGxDb21wb25lbnRgLiBDdXN0b20gY2VsbHMgZm9yIG1vbnRoIGFuZCB5ZWFyIGNhbiBiZSBwcm92aWRlZFxuICogdGhlIHNhbWUgd2F5LCBjaGVjayBBUEkgcmVmZXJlbmNlLlxuICogQHN0YWNrZWQtZXhhbXBsZShDdXN0b20gZGF5IGNlbGwsIGNhbGVuZGFyL2NhbGVuZGFyLWN1c3RvbS1kYXktY2VsbC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGNhbGVuZGFyLXdpZHRoOlxuICogY2FsZW5kYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWJvcmRlci1zdHlsZTpcbiAqIGNhbGVuZGFyLWJvcmRlci13aWR0aDpcbiAqIGNhbGVuZGFyLWJvcmRlci1yYWRpdXM6XG4gKiBjYWxlbmRhci10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItdGV4dC1mb250LWZhbWlseTpcbiAqIGNhbGVuZGFyLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1waWNrZXItcGFkZGluZy10b3A6XG4gKiBjYWxlbmRhci1waWNrZXItcGFkZGluZy1ib3R0b206XG4gKiBjYWxlbmRhci1waWNrZXItcGFkZGluZy1zdGFydDpcbiAqIGNhbGVuZGFyLXBpY2tlci1wYWRkaW5nLWVuZDpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGV4dC1mb250LWZhbWlseTpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGl0bGUtdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXRpdGxlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXBhZGRpbmc6XG4gKiBjYWxlbmRhci1jZWxsLWluYWN0aXZlLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1kYXktY2VsbC13aWR0aDpcbiAqIGNhbGVuZGFyLWRheS1jZWxsLWhlaWdodDpcbiAqIGNhbGVuZGFyLW1vbnRoLWNlbGwtd2lkdGg6XG4gKiBjYWxlbmRhci1tb250aC1jZWxsLWhlaWdodDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC13aWR0aDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWJhY2tncm91bmQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWRpdmlkZXItY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWRpdmlkZXItd2lkdGg6XG4gKiBjYWxlbmRhci13ZWVrZGF5LXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrZGF5LXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItd2Vla2RheS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS1ob2xpZGF5LXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktd2lkdGg6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWJhY2tncm91bmQ6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWRpdmlkZXItY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWRpdmlkZXItd2lkdGg6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItd2Vla251bWJlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItd2Vla251bWJlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla251bWJlci1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXdpZHRoOlxuICogY2FsZW5kYXItbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci1kYXktY2VsbC1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLWRheS1jZWxsLWxhcmdlLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktbGFyZ2UtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItbGFyZ2UtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla251bWJlci1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLW1vbnRoLWNlbGwtbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci1tb250aC1jZWxsLWxhcmdlLWhlaWdodDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC1sYXJnZS1oZWlnaHQ6XG4gKiAqL1xudmFyIE5iQ2FsZW5kYXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhckNvbXBvbmVudCgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgd2Ugc2hvdWxkIHJlbmRlciBwcmV2aW91cyBhbmQgbmV4dCBtb250aHNcbiAgICAgICAgICogaW4gdGhlIGN1cnJlbnQgbW9udGggdmlldy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5ib3VuZGluZ01vbnRoID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgc3RhcnRpbmcgdmlldyBmb3IgY2FsZW5kYXIuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc3RhcnRWaWV3ID0gTmJDYWxlbmRhclZpZXdNb2RlLkRBVEU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaXplIG9mIHRoZSBjYWxlbmRhciBhbmQgZW50aXJlIGNvbXBvbmVudHMuXG4gICAgICAgICAqIENhbiBiZSAnbWVkaXVtJyB3aGljaCBpcyBkZWZhdWx0IG9yICdsYXJnZScuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgc2hvdWxkIHdlIHNob3cgY2FsZW5kYXJzIG5hdmlnYXRpb24gb3Igbm90LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnNob3dOYXZpZ2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgc3ltYm9sIHVzZWQgYXMgYSBoZWFkZXIgZm9yIHdlZWsgbnVtYmVycyBjb2x1bW5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy53ZWVrTnVtYmVyU3ltYm9sID0gJyMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgZGF0ZSB3aGVuIHNlbGVjdGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmRhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93V2Vla051bWJlclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IHdlZWsgbnVtYmVycyBjb2x1bW4uXG4gICAgICAgICAqIEZhbHNlIGJ5IGRlZmF1bHQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dXZWVrTnVtYmVyO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiYm91bmRpbmdNb250aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXJ0Vmlld1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG4gICAgXSwgTmJDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcImRheUNlbGxDb21wb25lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFR5cGUpXG4gICAgXSwgTmJDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwibW9udGhDZWxsQ29tcG9uZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcInllYXJDZWxsQ29tcG9uZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcInZpc2libGVEYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dOYXZpZ2F0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd1dlZWtOdW1iZXJcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwid2Vla051bWJlclN5bWJvbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgTmJDYWxlbmRhckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5iLWJhc2UtY2FsZW5kYXJcXG4gICAgICBbYm91bmRpbmdNb250aF09XFxcImJvdW5kaW5nTW9udGhcXFwiXFxuICAgICAgW3N0YXJ0Vmlld109XFxcInN0YXJ0Vmlld1xcXCJcXG4gICAgICBbZGF0ZV09XFxcImRhdGVcXFwiXFxuICAgICAgW21pbl09XFxcIm1pblxcXCJcXG4gICAgICBbbWF4XT1cXFwibWF4XFxcIlxcbiAgICAgIFtmaWx0ZXJdPVxcXCJmaWx0ZXJcXFwiXFxuICAgICAgW2RheUNlbGxDb21wb25lbnRdPVxcXCJkYXlDZWxsQ29tcG9uZW50XFxcIlxcbiAgICAgIFttb250aENlbGxDb21wb25lbnRdPVxcXCJtb250aENlbGxDb21wb25lbnRcXFwiXFxuICAgICAgW3llYXJDZWxsQ29tcG9uZW50XT1cXFwieWVhckNlbGxDb21wb25lbnRcXFwiXFxuICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgIFt2aXNpYmxlRGF0ZV09XFxcInZpc2libGVEYXRlXFxcIlxcbiAgICAgIFtzaG93TmF2aWdhdGlvbl09XFxcInNob3dOYXZpZ2F0aW9uXFxcIlxcbiAgICAgIFtzaG93V2Vla051bWJlcl09XFxcInNob3dXZWVrTnVtYmVyXFxcIlxcbiAgICAgIFt3ZWVrTnVtYmVyU3ltYm9sXT1cXFwid2Vla051bWJlclN5bWJvbFxcXCJcXG4gICAgICAoZGF0ZUNoYW5nZSk9XFxcImRhdGVDaGFuZ2UuZW1pdCgkZXZlbnQpXFxcIlxcbiAgICA+PC9uYi1iYXNlLWNhbGVuZGFyPlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYkNhbGVuZGFyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYWxlbmRhckNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQmFzaWMgYnV0dG9uIGNvbXBvbmVudC5cbiAqXG4gKiBEZWZhdWx0IGJ1dHRvbiBzaXplIGlzIGBtZWRpdW1gIGFuZCBzdGF0dXMgY29sb3IgaXMgYGJhc2ljYDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQnV0dG9uIFNob3djYXNlLCBidXR0b24vYnV0dG9uLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBgYGBodG1sXG4gKiA8YnV0dG9uIG5iQnV0dG9uPjwvYnV0dG9uPlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkJ1dHRvbk1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJCdXR0b25Nb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIEJ1dHRvbnMgYXJlIGF2YWlsYWJsZSBpbiBtdWx0aXBsZSBjb2xvcnMgdXNpbmcgYHN0YXR1c2AgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbiBDb2xvcnMsIGJ1dHRvbi9idXR0b24tY29sb3JzLmNvbXBvbmVudC5odG1sKVxuICpcbiAqIFRoZXJlIGFyZSB0aHJlZSBidXR0b24gc2l6ZXM6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gU2l6ZXMsIGJ1dHRvbi9idXR0b24tc2l6ZXMuY29tcG9uZW50Lmh0bWwpXG4gKlxuICogQW5kIHR3byBhZGRpdGlvbmFsIHN0eWxlIHR5cGVzIC0gYG91dGxpbmVgOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoT3V0bGluZSBCdXR0b25zLCBidXR0b24vYnV0dG9uLW91dGxpbmUuY29tcG9uZW50Lmh0bWwpXG4gKlxuICogYW5kIGBoZXJvYDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbiBIZXJvLCBidXR0b24vYnV0dG9uLWhlcm8uY29tcG9uZW50Lmh0bWwpXG4gKlxuICogQnV0dG9ucyBhdmFpbGFibGUgaW4gZGlmZmVyZW50IHNoYXBlcywgd2hpY2ggY291bGQgYmUgY29tYmluZWQgd2l0aCB0aGUgb3RoZXIgcHJvcGVydGllczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQnV0dG9uIFNoYXBlcywgYnV0dG9uL2J1dHRvbi1zaGFwZXMuY29tcG9uZW50KVxuICpcbiAqIGBuYkJ1dHRvbmAgY291bGQgYmUgYXBwbGllZCB0byB0aGUgZm9sbG93aW5nIHNlbGVjdG9ycyAtIGBidXR0b25gLCBgaW5wdXRbdHlwZT1cImJ1dHRvblwiXWAsIGBpbnB1dFt0eXBlPVwic3VibWl0XCJdYFxuICogYW5kIGBhYDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQnV0dG9uIEVsZW1lbnRzLCBidXR0b24vYnV0dG9uLXR5cGVzLmNvbXBvbmVudC5odG1sKVxuICpcbiAqIEJ1dHRvbiBjYW4gYmUgbWFkZSBgZnVsbFdpZHRoYDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRnVsbCBXaWR0aCBCdXR0b24sIGJ1dHRvbi9idXR0b24tZnVsbC13aWR0aC5jb21wb25lbnQuaHRtbClcbiAqXG4gKiBJY29uIGNhbiBiZSBwbGFjZWQgaW5zaWRlIG9mIGEgYnV0dG9uIGFzIGEgY2hpbGQgZWxlbWVudDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSWNvbiBCdXR0b24sIGJ1dHRvbi9idXR0b24taWNvbi5jb21wb25lbnQuaHRtbClcbiAqXG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKEludGVyYWN0aXZlIGV4YW1wbGUsIGJ1dHRvbi9idXR0b24taW50ZXJhY3RpdmUuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBidXR0b24tY3Vyc29yOlxuICogYnV0dG9uLW91dGxpbmUtd2lkdGg6XG4gKiBidXR0b24tb3V0bGluZS1jb2xvcjpcbiAqIGJ1dHRvbi10ZXh0LWZvbnQtZmFtaWx5OlxuICogYnV0dG9uLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBidXR0b24tZGlzYWJsZWQtY3Vyc29yOlxuICogYnV0dG9uLXRpbnktdGV4dC1mb250LXNpemU6XG4gKiBidXR0b24tdGlueS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYnV0dG9uLXRpbnktaWNvbi1zaXplOlxuICogYnV0dG9uLXRpbnktaWNvbi12ZXJ0aWNhbC1tYXJnaW46XG4gKiBidXR0b24tdGlueS1pY29uLW9mZnNldDpcbiAqIGJ1dHRvbi1zbWFsbC10ZXh0LWZvbnQtc2l6ZTpcbiAqIGJ1dHRvbi1zbWFsbC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYnV0dG9uLXNtYWxsLWljb24tc2l6ZTpcbiAqIGJ1dHRvbi1zbWFsbC1pY29uLXZlcnRpY2FsLW1hcmdpbjpcbiAqIGJ1dHRvbi1zbWFsbC1pY29uLW9mZnNldDpcbiAqIGJ1dHRvbi1tZWRpdW0tdGV4dC1mb250LXNpemU6XG4gKiBidXR0b24tbWVkaXVtLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBidXR0b24tbWVkaXVtLWljb24tc2l6ZTpcbiAqIGJ1dHRvbi1tZWRpdW0taWNvbi12ZXJ0aWNhbC1tYXJnaW46XG4gKiBidXR0b24tbWVkaXVtLWljb24tb2Zmc2V0OlxuICogYnV0dG9uLWxhcmdlLXRleHQtZm9udC1zaXplOlxuICogYnV0dG9uLWxhcmdlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBidXR0b24tbGFyZ2UtaWNvbi1zaXplOlxuICogYnV0dG9uLWxhcmdlLWljb24tdmVydGljYWwtbWFyZ2luOlxuICogYnV0dG9uLWxhcmdlLWljb24tb2Zmc2V0OlxuICogYnV0dG9uLWdpYW50LXRleHQtZm9udC1zaXplOlxuICogYnV0dG9uLWdpYW50LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBidXR0b24tZ2lhbnQtaWNvbi1zaXplOlxuICogYnV0dG9uLWdpYW50LWljb24tdmVydGljYWwtbWFyZ2luOlxuICogYnV0dG9uLWdpYW50LWljb24tb2Zmc2V0OlxuICogYnV0dG9uLXJlY3RhbmdsZS1ib3JkZXItcmFkaXVzOlxuICogYnV0dG9uLXNlbWktcm91bmQtYm9yZGVyLXJhZGl1czpcbiAqIGJ1dHRvbi1yb3VuZC1ib3JkZXItcmFkaXVzOlxuICogYnV0dG9uLWZpbGxlZC1ib3JkZXItc3R5bGU6XG4gKiBidXR0b24tZmlsbGVkLWJvcmRlci13aWR0aDpcbiAqIGJ1dHRvbi1maWxsZWQtdGV4dC10cmFuc2Zvcm06XG4gKiBidXR0b24tZmlsbGVkLXRpbnktcGFkZGluZzpcbiAqIGJ1dHRvbi1maWxsZWQtc21hbGwtcGFkZGluZzpcbiAqIGJ1dHRvbi1maWxsZWQtbWVkaXVtLXBhZGRpbmc6XG4gKiBidXR0b24tZmlsbGVkLWxhcmdlLXBhZGRpbmc6XG4gKiBidXR0b24tZmlsbGVkLWdpYW50LXBhZGRpbmc6XG4gKiBidXR0b24tZmlsbGVkLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWJhc2ljLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWJhc2ljLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1wcmltYXJ5LWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1wcmltYXJ5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1zdWNjZXNzLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8tdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1pbmZvLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1pbmZvLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1pbmZvLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC13YXJuaW5nLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC13YXJuaW5nLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWRhbmdlci1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWRhbmdlci1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWRhbmdlci1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1jb250cm9sLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1jb250cm9sLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1jb250cm9sLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1jb250cm9sLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1ib3JkZXItc3R5bGU6XG4gKiBidXR0b24tb3V0bGluZS1ib3JkZXItd2lkdGg6XG4gKiBidXR0b24tb3V0bGluZS10ZXh0LXRyYW5zZm9ybTpcbiAqIGJ1dHRvbi1vdXRsaW5lLWZvY3VzLWluc2V0LXNoYWRvdy1sZW5ndGg6XG4gKiBidXR0b24tb3V0bGluZS10aW55LXBhZGRpbmc6XG4gKiBidXR0b24tb3V0bGluZS1zbWFsbC1wYWRkaW5nOlxuICogYnV0dG9uLW91dGxpbmUtbWVkaXVtLXBhZGRpbmc6XG4gKiBidXR0b24tb3V0bGluZS1sYXJnZS1wYWRkaW5nOlxuICogYnV0dG9uLW91dGxpbmUtZ2lhbnQtcGFkZGluZzpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtZm9jdXMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1ob3Zlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtYWN0aXZlLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8taG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItZm9jdXMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1ob3Zlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItYWN0aXZlLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYm9yZGVyLXN0eWxlOlxuICogYnV0dG9uLWdob3N0LWJvcmRlci13aWR0aDpcbiAqIGJ1dHRvbi1naG9zdC10ZXh0LXRyYW5zZm9ybTpcbiAqIGJ1dHRvbi1naG9zdC1mb2N1cy1pbnNldC1zaGFkb3ctbGVuZ3RoOlxuICogYnV0dG9uLWdob3N0LXRpbnktcGFkZGluZzpcbiAqIGJ1dHRvbi1naG9zdC1zbWFsbC1wYWRkaW5nOlxuICogYnV0dG9uLWdob3N0LW1lZGl1bS1wYWRkaW5nOlxuICogYnV0dG9uLWdob3N0LWxhcmdlLXBhZGRpbmc6XG4gKiBidXR0b24tZ2hvc3QtZ2lhbnQtcGFkZGluZzpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXByaW1hcnktZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXByaW1hcnktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXByaW1hcnktaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXByaW1hcnktYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXByaW1hcnktZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXN1Y2Nlc3MtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXN1Y2Nlc3MtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXN1Y2Nlc3MtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXN1Y2Nlc3MtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWluZm8tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWluZm8taG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWluZm8taG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWluZm8tYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXdhcm5pbmctZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXdhcm5pbmctaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXdhcm5pbmctaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXdhcm5pbmctYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXdhcm5pbmctZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItZm9jdXMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWRhbmdlci1ob3Zlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWRhbmdlci1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItYWN0aXZlLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtY29udHJvbC1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtZm9jdXMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtY29udHJvbC1ob3Zlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtY29udHJvbC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtYWN0aXZlLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJvcmRlci1zdHlsZTpcbiAqIGJ1dHRvbi1oZXJvLWJvcmRlci13aWR0aDpcbiAqIGJ1dHRvbi1oZXJvLXRleHQtdHJhbnNmb3JtOlxuICogYnV0dG9uLWhlcm8tdGlueS1wYWRkaW5nOlxuICogYnV0dG9uLWhlcm8tc21hbGwtcGFkZGluZzpcbiAqIGJ1dHRvbi1oZXJvLW1lZGl1bS1wYWRkaW5nOlxuICogYnV0dG9uLWhlcm8tbGFyZ2UtcGFkZGluZzpcbiAqIGJ1dHRvbi1oZXJvLWdpYW50LXBhZGRpbmc6XG4gKiBidXR0b24taGVyby1zaGFkb3c6XG4gKiBidXR0b24taGVyby10ZXh0LXNoYWRvdzpcbiAqIGJ1dHRvbi1oZXJvLWJldmVsLXNpemU6XG4gKiBidXR0b24taGVyby1nbG93LXNpemU6XG4gKiBidXR0b24taGVyby1vdXRsaW5lLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tb3V0bGluZS13aWR0aDpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1iZXZlbC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLWdsb3ctY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1hY3RpdmUtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtYWN0aXZlLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktYmV2ZWwtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LWdsb3ctY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LWFjdGl2ZS1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LWFjdGl2ZS1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy1iZXZlbC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtZ2xvdy1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtYWN0aXZlLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtYWN0aXZlLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLWJldmVsLWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1nbG93LWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLWZvY3VzLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8tZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8taG92ZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1ob3Zlci1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1hY3RpdmUtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1hY3RpdmUtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctYmV2ZWwtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLWdsb3ctY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLWFjdGl2ZS1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLWFjdGl2ZS1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItYmV2ZWwtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItZ2xvdy1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWRhbmdlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWRhbmdlci1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWRhbmdlci1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWRhbmdlci1hY3RpdmUtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLWFjdGl2ZS1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtYmV2ZWwtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLWdsb3ctY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLWFjdGl2ZS1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLWFjdGl2ZS1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICovXG52YXIgTmJCdXR0b25Db21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJCdXR0b25Db21wb25lbnQocmVuZGVyZXIsIGhvc3RFbGVtZW50LCBjZCwgem9uZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICAvKipcbiAgICAgICAgICogQnV0dG9uIHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICAgICAgICogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCwgYGxhcmdlYCwgYGdpYW50YFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gJ21lZGl1bSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdXR0b24gc3RhdHVzIChhZGRzIHNwZWNpZmljIHN0eWxlcyk6XG4gICAgICAgICAqIGBwcmltYXJ5YCwgYGluZm9gLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1dHRvbiBzaGFwZXM6IGByZWN0YW5nbGVgLCBgcm91bmRgLCBgc2VtaS1yb3VuZGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hhcGUgPSAncmVjdGFuZ2xlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1dHRvbiBhcHBlYXJhbmNlOiBgZmlsbGVkYCwgYG91dGxpbmVgLCBgZ2hvc3RgLCBgaGVyb2BcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXBwZWFyYW5jZSA9ICdmaWxsZWQnO1xuICAgICAgICB0aGlzLl9mdWxsV2lkdGggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaWxsZWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBgZmlsbGVkYCBhcHBlYXJhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGVhcmFuY2UgPT09ICdmaWxsZWQnO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnZmlsbGVkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvdXRsaW5lXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgYG91dGxpbmVgIGFwcGVhcmFuY2VcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ291dGxpbmUnO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnb3V0bGluZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2hvc3RcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBgZ2hvc3RgIGFwcGVhcmFuY2VcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ2dob3N0JztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ2dob3N0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJoZXJvXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgYGhlcm9gIGFwcGVhcmFuY2VcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ2hlcm8nO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnaGVybyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZnVsbFdpZHRoXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHNldCBlbGVtZW50IHdpbGwgZmlsbCBpdHMgY29udGFpbmVyXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mdWxsV2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9mdWxsV2lkdGggPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGVzIHRoZSBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdkaXNhYmxlZCcsIHRoaXMuZGlzYWJsZWQpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInRhYmJhYmxlXCIsIHtcbiAgICAgICAgLy8gaXNzdWUgIzc5NFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkID8gJy0xJyA6ICcwJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic21hbGxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwibWVkaXVtXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJnaWFudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWN0YW5nbGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncmVjdGFuZ2xlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyb3VuZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdyb3VuZCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic2VtaVJvdW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3NlbWktcm91bmQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImljb25MZWZ0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IHRoaXMuaWNvbkVsZW1lbnQ7XG4gICAgICAgICAgICByZXR1cm4gISEoaWNvbiAmJiBmaXJzdENoaWxkTm90Q29tbWVudChlbCkgPT09IGljb24pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImljb25SaWdodFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGljb24gPSB0aGlzLmljb25FbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuICEhKGljb24gJiYgbGFzdENoaWxkTm90Q29tbWVudChlbCkgPT09IGljb24pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEtlZXAgdGhpcyBoYW5kbGVyIHRvIHBhcnRpYWxseSBzdXBwb3J0IGFuY2hvciBkaXNhYmxpbmcuXG4gICAgICogVW5saWtlIGJ1dHRvbiwgYW5jaG9yIGRvZXNuJ3QgaGF2ZSAnZGlzYWJsZWQnIERPTSBwcm9wZXJ0eSxcbiAgICAgKiBzbyBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGFueXdheS4gV2UgcHJldmVudGluZyBuYXZpZ2F0aW9uIGFuZCBidWJibGluZy5cbiAgICAgKiBEaXNhYmxpbmcgaXMgcGFydGlhbCBkdWUgdG8gY2xpY2sgaGFuZGxlcnMgcHJlY2VkZW5jZS4gQ29uc2lkZXIgZXhhbXBsZTpcbiAgICAgKiA8YSBuYkJ1dHRvbiBbZGlzYWJsZWRdPVwidHJ1ZVwiIChjbGljayk9XCJjbGlja0hhbmRsZXIoKVwiPi4uLjwvYT5cbiAgICAgKiAnY2xpY2tIYW5kbGVyJyB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgb3VyIGhvc3QgbGlzdGVuZXIgYmVsb3cuIFdlIGNhbid0IHByZXZlbnRcbiAgICAgKiBzdWNoIGhhbmRsZXJzIGNhbGwuXG4gICAgICovXG4gICAgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gVE9ETzogIzIyNTRcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIuYWRkQ2xhc3MoX3RoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ25iLXRyYW5zaXRpb24nKTtcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpY29uRWxlbWVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuIGVsLnF1ZXJ5U2VsZWN0b3IoJ25iLWljb24nKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInNoYXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImFwcGVhcmFuY2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFwcGVhcmFuY2UtZmlsbGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsbGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYXBwZWFyYW5jZS1vdXRsaW5lJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwib3V0bGluZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFwcGVhcmFuY2UtZ2hvc3QnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJnaG9zdFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFwcGVhcmFuY2UtaGVybycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImhlcm9cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5mdWxsLXdpZHRoJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZnVsbFdpZHRoXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBIb3N0QmluZGluZygnYXR0ci5hcmlhLWRpc2FibGVkJyksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5idG4tZGlzYWJsZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIudGFiaW5kZXgnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiYmFibGVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXRpbnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwidGlueVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtc21hbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic21hbGxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLW1lZGl1bScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1naWFudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJnaWFudFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1wcmltYXJ5JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtaW5mbycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy13YXJuaW5nJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtZGFuZ2VyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1jb250cm9sJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaGFwZS1yZWN0YW5nbGUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwicmVjdGFuZ2xlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtcm91bmQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwicm91bmRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaGFwZS1zZW1pLXJvdW5kJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInNlbWlSb3VuZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmljb24tc3RhcnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImljb25MZWZ0XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuaWNvbi1lbmQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImljb25SaWdodFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkNsaWNrXCIsIG51bGwpO1xuICAgIE5iQnV0dG9uQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ2J1dHRvbltuYkJ1dHRvbl0sYVtuYkJ1dHRvbl0saW5wdXRbdHlwZT1cImJ1dHRvblwiXVtuYkJ1dHRvbl0saW5wdXRbdHlwZT1cInN1Ym1pdFwiXVtuYkJ1dHRvbl0nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gIFwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2FwcGVhcmFuY2U6bm9uZTt0ZXh0LWFsaWduOmNlbnRlcjtkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3doaXRlLXNwYWNlOm5vd3JhcDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7dXNlci1zZWxlY3Q6bm9uZX06aG9zdDpob3Zlciw6aG9zdDpmb2N1c3t0ZXh0LWRlY29yYXRpb246bm9uZX06aG9zdC5mdWxsLXdpZHRoe3dpZHRoOjEwMCV9Omhvc3QgOjpuZy1kZWVwIG5iLWljb257dmVydGljYWwtYWxpZ246dG9wfTpob3N0KC5uYi10cmFuc2l0aW9uKXt0cmFuc2l0aW9uLWR1cmF0aW9uOjAuMTVzO3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixib3JkZXItY29sb3IsYm94LXNoYWRvdyxjb2xvcjt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWlufVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtSZW5kZXJlcjIsXG4gICAgICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBOZ1pvbmVdKVxuICAgIF0sIE5iQnV0dG9uQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJCdXR0b25Db21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTkJfQlVUVE9OX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJCdXR0b25Db21wb25lbnQsXG5dO1xudmFyIE5iQnV0dG9uTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQnV0dG9uTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYkJ1dHRvbk1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBfX3NwcmVhZEFycmF5cyhOQl9CVVRUT05fQ09NUE9ORU5UUyksXG4gICAgICAgICAgICBleHBvcnRzOiBfX3NwcmVhZEFycmF5cyhOQl9CVVRUT05fQ09NUE9ORU5UUyksXG4gICAgICAgIH0pXG4gICAgXSwgTmJCdXR0b25Nb2R1bGUpO1xuICAgIHJldHVybiBOYkJ1dHRvbk1vZHVsZTtcbn0oKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iRGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJEYXRlU2VydmljZSgpIHtcbiAgICAgICAgdGhpcy5EQVlTX0lOX1dFRUsgPSA3O1xuICAgIH1cbiAgICBOYkRhdGVTZXJ2aWNlLnByb3RvdHlwZS5zZXRMb2NhbGUgPSBmdW5jdGlvbiAobG9jYWxlKSB7XG4gICAgICAgIHRoaXMubG9jYWxlID0gbG9jYWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBkYXRlIGlzIGJldHdlZW4gdGhlIHN0YXJ0IGRhdGUgYW5kIHRoZSBlbmQgZGF0ZS5cbiAgICAgKiAqL1xuICAgIE5iRGF0ZVNlcnZpY2UucHJvdG90eXBlLmlzQmV0d2VlbiA9IGZ1bmN0aW9uIChkYXRlLCBzdGFydCwgZW5kKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVEYXRlcyhkYXRlLCBzdGFydCkgPiAwICYmIHRoaXMuY29tcGFyZURhdGVzKGRhdGUsIGVuZCkgPCAwO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlzIHR3byBkYXRlcyBoYXZlIHRoZSBzYW1lIGRheS5cbiAgICAgKiAqL1xuICAgIE5iRGF0ZVNlcnZpY2UucHJvdG90eXBlLmlzU2FtZURheVNhZmUgPSBmdW5jdGlvbiAoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBkYXRlMSAmJiBkYXRlMiAmJiB0aGlzLmlzU2FtZURheShkYXRlMSwgZGF0ZTIpO1xuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlzIHR3byBkYXRlcyBoYXZlIHRoZSBzYW1lIG1vbnRoLlxuICAgICAqICovXG4gICAgTmJEYXRlU2VydmljZS5wcm90b3R5cGUuaXNTYW1lTW9udGhTYWZlID0gZnVuY3Rpb24gKGRhdGUxLCBkYXRlMikge1xuICAgICAgICByZXR1cm4gZGF0ZTEgJiYgZGF0ZTIgJiYgdGhpcy5pc1NhbWVNb250aChkYXRlMSwgZGF0ZTIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlzIHR3byBkYXRlcyBoYXZlIHRoZSBzYW1lIHllYXIuXG4gICAgICogKi9cbiAgICBOYkRhdGVTZXJ2aWNlLnByb3RvdHlwZS5pc1NhbWVZZWFyU2FmZSA9IGZ1bmN0aW9uIChkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUxICYmIGRhdGUyICYmIHRoaXMuaXNTYW1lWWVhcihkYXRlMSwgZGF0ZTIpO1xuICAgIH07XG4gICAgcmV0dXJuIE5iRGF0ZVNlcnZpY2U7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgYmF0Y2ggPSBmdW5jdGlvbiAodGFyZ2V0LCBiYXRjaFNpemUsIG9mZnNldCkge1xuICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkgeyBvZmZzZXQgPSAwOyB9XG4gICAgcmV0dXJuIHRhcmdldC5yZWR1Y2UoZnVuY3Rpb24gKHJlcywgaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGNodW5rSW5kZXggPSBNYXRoLmZsb29yKChpbmRleCArIG9mZnNldCkgLyBiYXRjaFNpemUpO1xuICAgICAgICBpZiAoIXJlc1tjaHVua0luZGV4XSkge1xuICAgICAgICAgICAgcmVzW2NodW5rSW5kZXhdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmVzW2NodW5rSW5kZXhdLnB1c2goaXRlbSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfSwgW10pO1xufTtcbi8qKlxuICogcmV0dXJucyBhcnJheSB3aXRoIG51bWJlcnMgZnJvbSB6ZXJvIHRvIGJvdW5kLlxuICogKi9cbnZhciByYW5nZSA9IGZ1bmN0aW9uIChib3VuZCwgcHJvZHVjZXIpIHtcbiAgICBpZiAocHJvZHVjZXIgPT09IHZvaWQgMCkgeyBwcm9kdWNlciA9IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9OyB9XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm91bmQ7IGkrKykge1xuICAgICAgICBhcnIucHVzaChwcm9kdWNlcihpKSk7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZShkYXRlU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgfVxuICAgIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZS5wcm90b3R5cGUuY3JlYXRlRGF5c0dyaWQgPSBmdW5jdGlvbiAoYWN0aXZlTW9udGgsIGJvdW5kaW5nTW9udGgpIHtcbiAgICAgICAgaWYgKGJvdW5kaW5nTW9udGggPT09IHZvaWQgMCkgeyBib3VuZGluZ01vbnRoID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgd2Vla3MgPSB0aGlzLmNyZWF0ZURhdGVzKGFjdGl2ZU1vbnRoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aEJvdW5kaW5nTW9udGhzKHdlZWtzLCBhY3RpdmVNb250aCwgYm91bmRpbmdNb250aCk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2UucHJvdG90eXBlLmNyZWF0ZURhdGVzID0gZnVuY3Rpb24gKGFjdGl2ZU1vbnRoKSB7XG4gICAgICAgIHZhciBkYXlzID0gdGhpcy5jcmVhdGVEYXRlUmFuZ2VGb3JNb250aChhY3RpdmVNb250aCk7XG4gICAgICAgIHZhciBzdGFydE9mV2Vla0RheURpZmYgPSB0aGlzLmdldFN0YXJ0T2ZXZWVrRGF5RGlmZihhY3RpdmVNb250aCk7XG4gICAgICAgIHJldHVybiBiYXRjaChkYXlzLCB0aGlzLmRhdGVTZXJ2aWNlLkRBWVNfSU5fV0VFSywgc3RhcnRPZldlZWtEYXlEaWZmKTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZS5wcm90b3R5cGUud2l0aEJvdW5kaW5nTW9udGhzID0gZnVuY3Rpb24gKHdlZWtzLCBhY3RpdmVNb250aCwgYm91bmRpbmdNb250aCkge1xuICAgICAgICB2YXIgd2l0aEJvdW5kaW5nTW9udGhzID0gd2Vla3M7XG4gICAgICAgIGlmICh0aGlzLmlzU2hvdWxkQWRkUHJldkJvdW5kaW5nTW9udGgod2l0aEJvdW5kaW5nTW9udGhzKSkge1xuICAgICAgICAgICAgd2l0aEJvdW5kaW5nTW9udGhzID0gdGhpcy5hZGRQcmV2Qm91bmRpbmdNb250aCh3aXRoQm91bmRpbmdNb250aHMsIGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1Nob3VsZEFkZE5leHRCb3VuZGluZ01vbnRoKHdpdGhCb3VuZGluZ01vbnRocykpIHtcbiAgICAgICAgICAgIHdpdGhCb3VuZGluZ01vbnRocyA9IHRoaXMuYWRkTmV4dEJvdW5kaW5nTW9udGgod2l0aEJvdW5kaW5nTW9udGhzLCBhY3RpdmVNb250aCwgYm91bmRpbmdNb250aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpdGhCb3VuZGluZ01vbnRocztcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZS5wcm90b3R5cGUuYWRkUHJldkJvdW5kaW5nTW9udGggPSBmdW5jdGlvbiAod2Vla3MsIGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoKSB7XG4gICAgICAgIHZhciBmaXJzdFdlZWsgPSB3ZWVrcy5zaGlmdCgpO1xuICAgICAgICB2YXIgcmVxdWlyZWRJdGVtcyA9IHRoaXMuZGF0ZVNlcnZpY2UuREFZU19JTl9XRUVLIC0gZmlyc3RXZWVrLmxlbmd0aDtcbiAgICAgICAgZmlyc3RXZWVrLnVuc2hpZnQuYXBwbHkoZmlyc3RXZWVrLCB0aGlzLmNyZWF0ZVByZXZCb3VuZGluZ0RheXMoYWN0aXZlTW9udGgsIGJvdW5kaW5nTW9udGgsIHJlcXVpcmVkSXRlbXMpKTtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXlzKFtmaXJzdFdlZWtdLCB3ZWVrcyk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2UucHJvdG90eXBlLmFkZE5leHRCb3VuZGluZ01vbnRoID0gZnVuY3Rpb24gKHdlZWtzLCBhY3RpdmVNb250aCwgYm91bmRpbmdNb250aCkge1xuICAgICAgICB2YXIgbGFzdFdlZWsgPSB3ZWVrcy5wb3AoKTtcbiAgICAgICAgdmFyIHJlcXVpcmVkSXRlbXMgPSB0aGlzLmRhdGVTZXJ2aWNlLkRBWVNfSU5fV0VFSyAtIGxhc3RXZWVrLmxlbmd0aDtcbiAgICAgICAgbGFzdFdlZWsucHVzaC5hcHBseShsYXN0V2VlaywgdGhpcy5jcmVhdGVOZXh0Qm91bmRpbmdEYXlzKGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoLCByZXF1aXJlZEl0ZW1zKSk7XG4gICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5cyh3ZWVrcywgW2xhc3RXZWVrXSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2UucHJvdG90eXBlLmNyZWF0ZVByZXZCb3VuZGluZ0RheXMgPSBmdW5jdGlvbiAoYWN0aXZlTW9udGgsIGJvdW5kaW5nTW9udGgsIHJlcXVpcmVkSXRlbXMpIHtcbiAgICAgICAgdmFyIG1vbnRoID0gdGhpcy5kYXRlU2VydmljZS5hZGRNb250aChhY3RpdmVNb250aCwgLTEpO1xuICAgICAgICB2YXIgZGF5c0luTW9udGggPSB0aGlzLmRhdGVTZXJ2aWNlLmdldE51bWJlck9mRGF5c0luTW9udGgobW9udGgpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlUmFuZ2VGb3JNb250aChtb250aClcbiAgICAgICAgICAgIC5zbGljZShkYXlzSW5Nb250aCAtIHJlcXVpcmVkSXRlbXMpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBib3VuZGluZ01vbnRoID8gZGF0ZSA6IG51bGw7IH0pO1xuICAgIH07XG4gICAgTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVOZXh0Qm91bmRpbmdEYXlzID0gZnVuY3Rpb24gKGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoLCByZXF1aXJlZEl0ZW1zKSB7XG4gICAgICAgIHZhciBtb250aCA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkTW9udGgoYWN0aXZlTW9udGgsIDEpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlUmFuZ2VGb3JNb250aChtb250aClcbiAgICAgICAgICAgIC5zbGljZSgwLCByZXF1aXJlZEl0ZW1zKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gYm91bmRpbmdNb250aCA/IGRhdGUgOiBudWxsOyB9KTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZS5wcm90b3R5cGUuZ2V0U3RhcnRPZldlZWtEYXlEaWZmID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0T2ZNb250aCA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGhTdGFydChkYXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2Vla1N0YXJ0RGlmZihzdGFydE9mTW9udGgpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlLnByb3RvdHlwZS5nZXRXZWVrU3RhcnREaWZmID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuICg3IC0gdGhpcy5kYXRlU2VydmljZS5nZXRGaXJzdERheU9mV2VlaygpICsgdGhpcy5kYXRlU2VydmljZS5nZXREYXlPZldlZWsoZGF0ZSkpICUgNztcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZS5wcm90b3R5cGUuaXNTaG91bGRBZGRQcmV2Qm91bmRpbmdNb250aCA9IGZ1bmN0aW9uICh3ZWVrcykge1xuICAgICAgICByZXR1cm4gd2Vla3NbMF0ubGVuZ3RoIDwgdGhpcy5kYXRlU2VydmljZS5EQVlTX0lOX1dFRUs7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2UucHJvdG90eXBlLmlzU2hvdWxkQWRkTmV4dEJvdW5kaW5nTW9udGggPSBmdW5jdGlvbiAod2Vla3MpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtzW3dlZWtzLmxlbmd0aCAtIDFdLmxlbmd0aCA8IHRoaXMuZGF0ZVNlcnZpY2UuREFZU19JTl9XRUVLO1xuICAgIH07XG4gICAgTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVEYXRlUmFuZ2VGb3JNb250aCA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TnVtYmVyT2ZEYXlzSW5Nb250aChkYXRlKTtcbiAgICAgICAgcmV0dXJuIHJhbmdlKGRheXNJbk1vbnRoLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgdmFyIHllYXIgPSBfdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyKGRhdGUpO1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gX3RoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGgoZGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZGF0ZVNlcnZpY2UuY3JlYXRlRGF0ZSh5ZWFyLCBtb250aCwgaSArIDEpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJEYXRlU2VydmljZV0pXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50KGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICB0aGlzLnNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgICAgIHRoaXMuZGF5Q2VsbENsYXNzID0gdHJ1ZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0b2RheVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lRGF5U2FmZSh0aGlzLmRhdGUsIHRoaXMuZGF0ZVNlcnZpY2UudG9kYXkoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiYm91bmRpbmdNb250aFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZU1vbnRoU2FmZSh0aGlzLmRhdGUsIHRoaXMudmlzaWJsZURhdGUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVEYXlTYWZlKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJlbXB0eVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNtYWxsZXJUaGFuTWluKCkgfHwgdGhpcy5ncmVhdGVyVGhhbk1heCgpIHx8IHRoaXMuZG9udEZpdEZpbHRlcigpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImlzTGFyZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImRheVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmdldERhdGUodGhpcy5kYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMuZW1wdHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdC5lbWl0KHRoaXMuZGF0ZSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUuc21hbGxlclRoYW5NaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5taW4gJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5kYXRlLCB0aGlzLm1pbikgPCAwO1xuICAgIH07XG4gICAgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLmdyZWF0ZXJUaGFuTWF4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWF4ICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMuZGF0ZSwgdGhpcy5tYXgpID4gMDtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5kb250Rml0RmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMuZmlsdGVyICYmICF0aGlzLmZpbHRlcih0aGlzLmRhdGUpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aXNpYmxlRGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MudG9kYXknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYm91bmRpbmctbW9udGgnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImJvdW5kaW5nTW9udGhcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zZWxlY3RlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5lbXB0eScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZW1wdHlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5kaXNhYmxlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0xhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZGF5LWNlbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF5Q2VsbENsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignY2xpY2snKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwib25DbGlja1wiLCBudWxsKTtcbiAgICBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1kYXktY2VsbCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY2VsbC1jb250ZW50XFxcIj5cXG4gICAgICB7eyBkYXkgfX1cXG4gICAgPC9kaXY+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGNhcGFiaWxpdHkgcGljayBkYXlzLlxuICogKi9cbnZhciBOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQobW9udGhNb2RlbCkge1xuICAgICAgICB0aGlzLm1vbnRoTW9kZWwgPSBtb250aE1vZGVsO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB3ZSBzaG91bGQgcmVuZGVyIHByZXZpb3VzIGFuZCBuZXh0IG1vbnRoc1xuICAgICAgICAgKiBpbiB0aGUgY3VycmVudCBtb250aCB2aWV3LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmJvdW5kaW5nTW9udGhzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jZWxsQ29tcG9uZW50ID0gTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaXplIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqIENhbiBiZSAnbWVkaXVtJyB3aGljaCBpcyBkZWZhdWx0IG9yICdsYXJnZScuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIG5ld2x5IHNlbGVjdGVkIGRhdGUuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuZGF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNldENlbGxDb21wb25lbnRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3VzdG9tIGRheSBjZWxsIGNvbXBvbmVudC4gSGF2ZSB0byBpbXBsZW1lbnQgYE5iQ2FsZW5kYXJDZWxsYCBpbnRlcmZhY2UuXG4gICAgICAgICAqICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGNlbGxDb21wb25lbnQpIHtcbiAgICAgICAgICAgIGlmIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsQ29tcG9uZW50ID0gY2VsbENvbXBvbmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dXZWVrTnVtYmVyXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgc2hvdWxkIHdlIHNob3cgd2VlayBudW1iZXJzIGNvbHVtbi5cbiAgICAgICAgICogRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2hvd1dlZWtOdW1iZXI7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93V2Vla051bWJlciA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB2aXNpYmxlRGF0ZSA9IF9hLnZpc2libGVEYXRlO1xuICAgICAgICBpZiAodmlzaWJsZURhdGUpIHtcbiAgICAgICAgICAgIHRoaXMud2Vla3MgPSB0aGlzLm1vbnRoTW9kZWwuY3JlYXRlRGF5c0dyaWQodGhpcy52aXNpYmxlRGF0ZSwgdGhpcy5ib3VuZGluZ01vbnRocyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm9uU2VsZWN0ID0gZnVuY3Rpb24gKGRheSkge1xuICAgICAgICB0aGlzLmRhdGVDaGFuZ2UuZW1pdChkYXkpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmlzaWJsZURhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiYm91bmRpbmdNb250aHNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuICAgIF0sIE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnY2VsbENvbXBvbmVudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVHlwZSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVHlwZV0pXG4gICAgXSwgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2V0Q2VsbENvbXBvbmVudFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd1dlZWtOdW1iZXJcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwid2Vla051bWJlclN5bWJvbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VcIiwgbnVsbCk7XG4gICAgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1kYXktcGlja2VyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmItY2FsZW5kYXItd2Vlay1udW1iZXJzICpuZ0lmPVxcXCJzaG93V2Vla051bWJlclxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2Vla3NdPVxcXCJ3ZWVrc1xcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2l6ZV09XFxcInNpemVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3dlZWtOdW1iZXJTeW1ib2xdPVxcXCJ3ZWVrTnVtYmVyU3ltYm9sXFxcIj5cXG4gICAgPC9uYi1jYWxlbmRhci13ZWVrLW51bWJlcnM+XFxuICAgIDxkaXYgY2xhc3M9XFxcImRheXMtY29udGFpbmVyXFxcIj5cXG4gICAgICA8bmItY2FsZW5kYXItZGF5cy1uYW1lcyBbc2l6ZV09XFxcInNpemVcXFwiPjwvbmItY2FsZW5kYXItZGF5cy1uYW1lcz5cXG4gICAgICA8bmItY2FsZW5kYXItcGlja2VyXFxuICAgICAgICAgIFtkYXRhXT1cXFwid2Vla3NcXFwiXFxuICAgICAgICAgIFt2aXNpYmxlRGF0ZV09XFxcInZpc2libGVEYXRlXFxcIlxcbiAgICAgICAgICBbc2VsZWN0ZWRWYWx1ZV09XFxcImRhdGVcXFwiXFxuICAgICAgICAgIFtjZWxsQ29tcG9uZW50XT1cXFwiY2VsbENvbXBvbmVudFxcXCJcXG4gICAgICAgICAgW21pbl09XFxcIm1pblxcXCJcXG4gICAgICAgICAgW21heF09XFxcIm1heFxcXCJcXG4gICAgICAgICAgW2ZpbHRlcl09XFxcImZpbHRlclxcXCJcXG4gICAgICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgICAgICAoc2VsZWN0KT1cXFwib25TZWxlY3QoJGV2ZW50KVxcXCI+XFxuICAgICAgPC9uYi1jYWxlbmRhci1waWNrZXI+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4fS5kYXlzLWNvbnRhaW5lcnt3aWR0aDoxMDAlfVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ2FsZW5kYXJEYXlzTmFtZXNDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudChkYXRlU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyRGF5c05hbWVzQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0xhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYXlzID0gdGhpcy5jcmVhdGVEYXlzTmFtZXMoKTtcbiAgICAgICAgdGhpcy5kYXlzID0gdGhpcy5zaGlmdFN0YXJ0T2ZXZWVrKGRheXMpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRGF5c05hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXREYXlPZldlZWtOYW1lcygpXG4gICAgICAgICAgICAubWFwKHRoaXMubWFya0lmSG9saWRheSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyRGF5c05hbWVzQ29tcG9uZW50LnByb3RvdHlwZS5zaGlmdFN0YXJ0T2ZXZWVrID0gZnVuY3Rpb24gKGRheXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGVTZXJ2aWNlLmdldEZpcnN0RGF5T2ZXZWVrKCk7IGkrKykge1xuICAgICAgICAgICAgZGF5cy5wdXNoKGRheXMuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRheXM7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyRGF5c05hbWVzQ29tcG9uZW50LnByb3RvdHlwZS5tYXJrSWZIb2xpZGF5ID0gZnVuY3Rpb24gKG5hbWUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHsgbmFtZTogbmFtZSwgaXNIb2xpZGF5OiBpICUgNiA9PT0gMCB9O1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1sYXJnZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyRGF5c05hbWVzQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0xhcmdlXCIsIG51bGwpO1xuICAgIE5iQ2FsZW5kYXJEYXlzTmFtZXNDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItZGF5cy1uYW1lcycsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiBjbGFzcz1cXFwiZGF5XFxcIiAqbmdGb3I9XFxcImxldCBkYXkgb2YgZGF5c1xcXCIgW2NsYXNzLmhvbGlkYXldPVxcXCJkYXkuaXNIb2xpZGF5XFxcIj57eyBkYXkubmFtZSB9fTwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufTpob3N0IC5kYXl7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkRhdGVTZXJ2aWNlXSlcbiAgICBdLCBOYkNhbGVuZGFyRGF5c05hbWVzQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcih0cnVlKTtcbiAgICAgICAgdGhpcy5tb250aENlbGxDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lTW9udGhTYWZlKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aFNhZmUodGhpcy5kYXRlLCB0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCkpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNtYWxsZXJUaGFuTWluKCkgfHwgdGhpcy5ncmVhdGVyVGhhbk1heCgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNMYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb250aFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGhOYW1lKHRoaXMuZGF0ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3QuZW1pdCh0aGlzLmRhdGUpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUuc21hbGxlclRoYW5NaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5taW4gJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5tb250aEVuZCgpLCB0aGlzLm1pbikgPCAwO1xuICAgIH07XG4gICAgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUuZ3JlYXRlclRoYW5NYXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5tYXggJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5tb250aFN0YXJ0KCksIHRoaXMubWF4KSA+IDA7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5tb250aFN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aFN0YXJ0KHRoaXMuZGF0ZSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5tb250aEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGhFbmQodGhpcy5kYXRlKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZFZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwibWluXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNlbGVjdGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MudG9kYXknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwidG9kYXlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5kaXNhYmxlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNMYXJnZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm1vbnRoLWNlbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb250aENlbGxDbGFzc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ2NsaWNrJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwib25DbGlja1wiLCBudWxsKTtcbiAgICBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLW1vbnRoLWNlbGwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcImNlbGwtY29udGVudFxcXCI+XFxuICAgICAge3sgbW9udGggfX1cXG4gICAgPC9kaXY+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE1PTlRIU19JTl9WSUVXID0gMTI7XG52YXIgTU9OVEhTX0lOX0NPTFVNTiA9IDQ7XG52YXIgTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudChkYXRlU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgdGhpcy5tb250aENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5jZWxsQ29tcG9uZW50ID0gTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudDtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiX2NlbGxDb21wb25lbnRcIiwge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBpZiAoY2VsbENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbENvbXBvbmVudCA9IGNlbGxDb21wb25lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uQ2hhbmdlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLm1vbnRoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRNb250aHMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5pbml0TW9udGhzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0RGF0ZSh0aGlzLm1vbnRoKTtcbiAgICAgICAgdmFyIHllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIodGhpcy5tb250aCk7XG4gICAgICAgIHZhciBmaXJzdE1vbnRoID0gdGhpcy5kYXRlU2VydmljZS5jcmVhdGVEYXRlKHllYXIsIDAsIGRhdGUpO1xuICAgICAgICB2YXIgbW9udGhzID0gW2ZpcnN0TW9udGhdO1xuICAgICAgICBmb3IgKHZhciBtb250aEluZGV4ID0gMTsgbW9udGhJbmRleCA8IE1PTlRIU19JTl9WSUVXOyBtb250aEluZGV4KyspIHtcbiAgICAgICAgICAgIG1vbnRocy5wdXNoKHRoaXMuZGF0ZVNlcnZpY2UuYWRkTW9udGgoZmlyc3RNb250aCwgbW9udGhJbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubW9udGhzID0gYmF0Y2gobW9udGhzLCBNT05USFNfSU5fQ09MVU1OKTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUub25TZWxlY3QgPSBmdW5jdGlvbiAobW9udGgpIHtcbiAgICAgICAgdGhpcy5tb250aENoYW5nZS5lbWl0KG1vbnRoKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibWluXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb250aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1vbnRoQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCdjZWxsQ29tcG9uZW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUeXBlXSlcbiAgICBdLCBOYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcIl9jZWxsQ29tcG9uZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1sYXJnZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VcIiwgbnVsbCk7XG4gICAgTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLW1vbnRoLXBpY2tlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5iLWNhbGVuZGFyLXBpY2tlclxcbiAgICAgIFtkYXRhXT1cXFwibW9udGhzXFxcIlxcbiAgICAgIFttaW5dPVxcXCJtaW5cXFwiXFxuICAgICAgW21heF09XFxcIm1heFxcXCJcXG4gICAgICBbZmlsdGVyXT1cXFwiZmlsdGVyXFxcIlxcbiAgICAgIFtzZWxlY3RlZFZhbHVlXT1cXFwiZGF0ZVxcXCJcXG4gICAgICBbdmlzaWJsZURhdGVdPVxcXCJtb250aFxcXCJcXG4gICAgICBbY2VsbENvbXBvbmVudF09XFxcImNlbGxDb21wb25lbnRcXFwiXFxuICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgIChzZWxlY3QpPVxcXCJvblNlbGVjdCgkZXZlbnQpXFxcIj5cXG4gICAgPC9uYi1jYWxlbmRhci1waWNrZXI+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudDtcbn0oKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ2FsZW5kYXJZZWFyTW9kZWxTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJZZWFyTW9kZWxTZXJ2aWNlKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy55ZWFyc0luVmlldyA9IDEyO1xuICAgICAgICB0aGlzLnllYXJzSW5Sb3cgPSA0O1xuICAgIH1cbiAgICBOYkNhbGVuZGFyWWVhck1vZGVsU2VydmljZS5wcm90b3R5cGUuZ2V0WWVhcnNJblZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnllYXJzSW5WaWV3O1xuICAgIH07XG4gICAgTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2UucHJvdG90eXBlLmdldFllYXJzSW5Sb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnllYXJzSW5Sb3c7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyWWVhck1vZGVsU2VydmljZS5wcm90b3R5cGUuZ2V0Vmlld1llYXJzID0gZnVuY3Rpb24gKHZpZXdZZWFyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciB5ZWFyID0gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyKHZpZXdZZWFyKTtcbiAgICAgICAgdmFyIHZpZXdTdGFydFllYXI7XG4gICAgICAgIGlmICh5ZWFyID49IDApIHtcbiAgICAgICAgICAgIHZpZXdTdGFydFllYXIgPSB5ZWFyIC0gKHllYXIgJSB0aGlzLnllYXJzSW5WaWV3KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZpZXdTdGFydFllYXIgPSB5ZWFyIC0gKHllYXIgJSB0aGlzLnllYXJzSW5WaWV3ICsgdGhpcy55ZWFyc0luVmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHllYXJzID0gcmFuZ2UodGhpcy55ZWFyc0luVmlldykubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiBfdGhpcy5jb3B5V2l0aFllYXIodmlld1N0YXJ0WWVhciArIGksIHZpZXdZZWFyKTsgfSk7XG4gICAgICAgIHJldHVybiBiYXRjaCh5ZWFycywgdGhpcy55ZWFyc0luUm93KTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJZZWFyTW9kZWxTZXJ2aWNlLnByb3RvdHlwZS5jb3B5V2l0aFllYXIgPSBmdW5jdGlvbiAoeWVhciwgZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5jcmVhdGVEYXRlKHllYXIsIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGgoZGF0ZSksIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0RGF0ZShkYXRlKSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyWWVhck1vZGVsU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJEYXRlU2VydmljZV0pXG4gICAgXSwgTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2UpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyWWVhck1vZGVsU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50KGRhdGVTZXJ2aWNlLCB5ZWFyTW9kZWxTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy55ZWFyTW9kZWxTZXJ2aWNlID0geWVhck1vZGVsU2VydmljZTtcbiAgICAgICAgdGhpcy52aWV3TW9kZSA9IE5iQ2FsZW5kYXJWaWV3TW9kZS5EQVRFO1xuICAgICAgICB0aGlzLmNoYW5nZU1vZGUgPSBuZXcgRXZlbnRFbWl0dGVyKHRydWUpO1xuICAgIH1cbiAgICBOYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQucHJvdG90eXBlLmdldFRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLnZpZXdNb2RlKSB7XG4gICAgICAgICAgICBjYXNlIE5iQ2FsZW5kYXJWaWV3TW9kZS5EQVRFOiB7XG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aE5hbWUodGhpcy5kYXRlLCBUcmFuc2xhdGlvbldpZHRoLldpZGUpO1xuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyKHRoaXMuZGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vbnRoICsgXCIgXCIgKyB5ZWFyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBOYkNhbGVuZGFyVmlld01vZGUuTU9OVEg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCIgKyB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIodGhpcy5kYXRlKTtcbiAgICAgICAgICAgIGNhc2UgTmJDYWxlbmRhclZpZXdNb2RlLllFQVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RZZWFyKCkgKyBcIiAtIFwiICsgdGhpcy5nZXRMYXN0WWVhcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQucHJvdG90eXBlLmdldEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdNb2RlID09PSBOYkNhbGVuZGFyVmlld01vZGUuREFURSkge1xuICAgICAgICAgICAgcmV0dXJuICdjaGV2cm9uLWRvd24tb3V0bGluZSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdjaGV2cm9uLXVwLW91dGxpbmUnO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50LnByb3RvdHlwZS5nZXRGaXJzdFllYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB5ZWFycyA9IHRoaXMueWVhck1vZGVsU2VydmljZS5nZXRWaWV3WWVhcnModGhpcy5kYXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhcih5ZWFyc1swXVswXSkudG9TdHJpbmcoKTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJWaWV3TW9kZUNvbXBvbmVudC5wcm90b3R5cGUuZ2V0TGFzdFllYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB5ZWFycyA9IHRoaXMueWVhck1vZGVsU2VydmljZS5nZXRWaWV3WWVhcnModGhpcy5kYXRlKTtcbiAgICAgICAgdmFyIGxhc3RSb3cgPSB5ZWFyc1t5ZWFycy5sZW5ndGggLSAxXTtcbiAgICAgICAgdmFyIGxhc3RZZWFyID0gbGFzdFJvd1tsYXN0Um93Lmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyKGxhc3RZZWFyKS50b1N0cmluZygpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aWV3TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQucHJvdG90eXBlLCBcImNoYW5nZU1vZGVcIiwgdm9pZCAwKTtcbiAgICBOYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItdmlldy1tb2RlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8YnV0dG9uIG5iQnV0dG9uIChjbGljayk9XFxcImNoYW5nZU1vZGUuZW1pdCgpXFxcIiBnaG9zdCBzdGF0dXM9XFxcImJhc2ljXFxcIj5cXG4gICAgICB7eyBnZXRUZXh0KCkgfX1cXG4gICAgICA8bmItaWNvbiBbaWNvbl09XFxcImdldEljb24oKVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj48L25iLWljb24+XFxuICAgIDwvYnV0dG9uPlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkRhdGVTZXJ2aWNlLFxuICAgICAgICAgICAgTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJWaWV3TW9kZUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2FsZW5kYXJWaWV3TW9kZUNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJQYWdlYWJsZU5hdmlnYXRpb25Db21wb25lbnQoZGlyZWN0aW9uU2VydmljZSkge1xuICAgICAgICB0aGlzLmRpcmVjdGlvblNlcnZpY2UgPSBkaXJlY3Rpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLm5leHQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMucHJldiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJQYWdlYWJsZU5hdmlnYXRpb25Db21wb25lbnQucHJvdG90eXBlLCBcImlzTHRyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb25TZXJ2aWNlLmlzTHRyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJuZXh0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJQYWdlYWJsZU5hdmlnYXRpb25Db21wb25lbnQucHJvdG90eXBlLCBcInByZXZcIiwgdm9pZCAwKTtcbiAgICBOYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLXBhZ2VhYmxlLW5hdmlnYXRpb24nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxidXR0b24gbmJCdXR0b24gKGNsaWNrKT1cXFwicHJldi5lbWl0KClcXFwiIGdob3N0IHN0YXR1cz1cXFwiYmFzaWNcXFwiIGNsYXNzPVxcXCJwcmV2LW1vbnRoXFxcIj5cXG4gICAgICA8bmItaWNvbiBbaWNvbl09XFxcImlzTHRyID8gJ2NoZXZyb24tbGVmdC1vdXRsaW5lJyA6ICdjaGV2cm9uLXJpZ2h0LW91dGxpbmUnXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiPjwvbmItaWNvbj5cXG4gICAgPC9idXR0b24+XFxuICAgIDxidXR0b24gbmJCdXR0b24gKGNsaWNrKT1cXFwibmV4dC5lbWl0KClcXFwiIGdob3N0IHN0YXR1cz1cXFwiYmFzaWNcXFwiIGNsYXNzPVxcXCJuZXh0LW1vbnRoXFxcIj5cXG4gICAgICA8bmItaWNvbiBbaWNvbl09XFxcImlzTHRyID8gJ2NoZXZyb24tcmlnaHQtb3V0bGluZScgOiAnY2hldnJvbi1sZWZ0LW91dGxpbmUnXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiPjwvbmItaWNvbj5cXG4gICAgPC9idXR0b24+XFxuICBcIixcbiAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH1cXG5cIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJMYXlvdXREaXJlY3Rpb25TZXJ2aWNlXSlcbiAgICBdLCBOYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYWxlbmRhclBhZ2VhYmxlTmF2aWdhdGlvbkNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyUGlja2VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgdGhpcy5zZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0xhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSlcbiAgICBdLCBOYkNhbGVuZGFyUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRhXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmlzaWJsZURhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZFZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNlbGxDb21wb25lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImZpbHRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgTmJDYWxlbmRhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImlzTGFyZ2VcIiwgbnVsbCk7XG4gICAgTmJDYWxlbmRhclBpY2tlckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1waWNrZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuYi1jYWxlbmRhci1waWNrZXItcm93XFxuICAgICAgKm5nRm9yPVxcXCJsZXQgcm93IG9mIGRhdGFcXFwiXFxuICAgICAgW3Jvd109XFxcInJvd1xcXCJcXG4gICAgICBbdmlzaWJsZURhdGVdPVxcXCJ2aXNpYmxlRGF0ZVxcXCJcXG4gICAgICBbc2VsZWN0ZWRWYWx1ZV09XFxcInNlbGVjdGVkVmFsdWVcXFwiXFxuICAgICAgW2NvbXBvbmVudF09XFxcImNlbGxDb21wb25lbnRcXFwiXFxuICAgICAgW21pbl09XFxcIm1pblxcXCJcXG4gICAgICBbbWF4XT1cXFwibWF4XFxcIlxcbiAgICAgIFtmaWx0ZXJdPVxcXCJmaWx0ZXJcXFwiXFxuICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgIChzZWxlY3QpPVxcXCJzZWxlY3QuZW1pdCgkZXZlbnQpXFxcIj5cXG4gICAgPC9uYi1jYWxlbmRhci1waWNrZXItcm93PlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICB9KVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyUGlja2VyQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudChjZnIpIHtcbiAgICAgICAgdGhpcy5jZnIgPSBjZnI7XG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgdGhpcy5zZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuY2ZyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgdGhpcy5jb250YWluZXJSZWYuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5yb3cuZm9yRWFjaChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF90aGlzLmNvbnRhaW5lclJlZi5jcmVhdGVDb21wb25lbnQoZmFjdG9yeSk7XG4gICAgICAgICAgICBfdGhpcy5wYXRjaFdpdGhDb250ZXh0KGNvbXBvbmVudC5pbnN0YW5jZSwgZGF0ZSk7XG4gICAgICAgICAgICBjb21wb25lbnQuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQucHJvdG90eXBlLnBhdGNoV2l0aENvbnRleHQgPSBmdW5jdGlvbiAoY29tcG9uZW50LCBkYXRlKSB7XG4gICAgICAgIGNvbXBvbmVudC52aXNpYmxlRGF0ZSA9IHRoaXMudmlzaWJsZURhdGU7XG4gICAgICAgIGNvbXBvbmVudC5zZWxlY3RlZFZhbHVlID0gdGhpcy5zZWxlY3RlZFZhbHVlO1xuICAgICAgICBjb21wb25lbnQuZGF0ZSA9IGRhdGU7XG4gICAgICAgIGNvbXBvbmVudC5taW4gPSB0aGlzLm1pbjtcbiAgICAgICAgY29tcG9uZW50Lm1heCA9IHRoaXMubWF4O1xuICAgICAgICBjb21wb25lbnQuZmlsdGVyID0gdGhpcy5maWx0ZXI7XG4gICAgICAgIGNvbXBvbmVudC5zaXplID0gdGhpcy5zaXplO1xuICAgICAgICBjb21wb25lbnQuc2VsZWN0LnN1YnNjcmliZSh0aGlzLnNlbGVjdC5lbWl0LmJpbmQodGhpcy5zZWxlY3QpKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG4gICAgXSwgTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwicm93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQucHJvdG90eXBlLCBcInZpc2libGVEYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQucHJvdG90eXBlLCBcImNvbXBvbmVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG4gICAgXSwgTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkNhbGVuZGFyUGlja2VyUm93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgVmlld0NoaWxkKFRlbXBsYXRlUmVmLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYsIHN0YXRpYzogdHJ1ZSB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFZpZXdDb250YWluZXJSZWYpXG4gICAgXSwgTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udGFpbmVyUmVmXCIsIHZvaWQgMCk7XG4gICAgTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1waWNrZXItcm93JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPG5nLXRlbXBsYXRlPjwvbmctdGVtcGxhdGU+JyxcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCJcXG4gICAgOmhvc3Qge1xcbiAgICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgICB9XFxuICBcIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyXSlcbiAgICBdLCBOYkNhbGVuZGFyUGlja2VyUm93Q29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50KGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICB0aGlzLnNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgICAgIHRoaXMueWVhckNlbGxDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVZZWFyU2FmZSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVZZWFyU2FmZSh0aGlzLmRhdGUsIHRoaXMuZGF0ZVNlcnZpY2UudG9kYXkoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zbWFsbGVyVGhhbk1pbigpIHx8IHRoaXMuZ3JlYXRlclRoYW5NYXgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNMYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInllYXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIodGhpcy5kYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0LmVtaXQodGhpcy5kYXRlKTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUuc21hbGxlclRoYW5NaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5taW4gJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy55ZWFyRW5kKCksIHRoaXMubWluKSA8IDA7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLmdyZWF0ZXJUaGFuTWF4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWF4ICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMueWVhclN0YXJ0KCksIHRoaXMubWF4KSA+IDA7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLnllYXJTdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhclN0YXJ0KHRoaXMuZGF0ZSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLnllYXJFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXJFbmQodGhpcy5kYXRlKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwibWluXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkVmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNlbGVjdGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy50b2RheScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZGlzYWJsZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0xhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MueWVhci1jZWxsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ5ZWFyQ2VsbENsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignY2xpY2snKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgbnVsbCk7XG4gICAgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLXllYXItY2VsbCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY2VsbC1jb250ZW50XFxcIj5cXG4gICAgICB7eyB5ZWFyIH19XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkRhdGVTZXJ2aWNlXSlcbiAgICBdLCBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQoZGF0ZVNlcnZpY2UsIHllYXJNb2RlbFNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnllYXJNb2RlbFNlcnZpY2UgPSB5ZWFyTW9kZWxTZXJ2aWNlO1xuICAgICAgICB0aGlzLmNlbGxDb21wb25lbnQgPSBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgdGhpcy55ZWFyQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcIl9jZWxsQ29tcG9uZW50XCIsIHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2VsbENvbXBvbmVudCkge1xuICAgICAgICAgICAgaWYgKGNlbGxDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxDb21wb25lbnQgPSBjZWxsQ29tcG9uZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnllYXJzID0gdGhpcy55ZWFyTW9kZWxTZXJ2aWNlLmdldFZpZXdZZWFycyh0aGlzLnllYXIpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLm9uU2VsZWN0ID0gZnVuY3Rpb24gKHllYXIpIHtcbiAgICAgICAgdGhpcy55ZWFyQ2hhbmdlLmVtaXQoeWVhcik7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJZZWFyUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbiAgICBdLCBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCdjZWxsQ29tcG9uZW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUeXBlXSlcbiAgICBdLCBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiX2NlbGxDb21wb25lbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwieWVhclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwieWVhckNoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1sYXJnZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJZZWFyUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCBudWxsKTtcbiAgICBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci15ZWFyLXBpY2tlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5iLWNhbGVuZGFyLXBpY2tlclxcbiAgICAgIFtkYXRhXT1cXFwieWVhcnNcXFwiXFxuICAgICAgW21pbl09XFxcIm1pblxcXCJcXG4gICAgICBbbWF4XT1cXFwibWF4XFxcIlxcbiAgICAgIFtmaWx0ZXJdPVxcXCJmaWx0ZXJcXFwiXFxuICAgICAgW3NlbGVjdGVkVmFsdWVdPVxcXCJkYXRlXFxcIlxcbiAgICAgIFt2aXNpYmxlRGF0ZV09XFxcInllYXJcXFwiXFxuICAgICAgW2NlbGxDb21wb25lbnRdPVxcXCJjZWxsQ29tcG9uZW50XFxcIlxcbiAgICAgIFtzaXplXT1cXFwic2l6ZVxcXCJcXG4gICAgICAoc2VsZWN0KT1cXFwib25TZWxlY3QoJGV2ZW50KVxcXCI+XFxuICAgIDwvbmItY2FsZW5kYXItcGlja2VyPlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkRhdGVTZXJ2aWNlLFxuICAgICAgICAgICAgTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJZZWFyUGlja2VyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQ7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyV2Vla051bWJlckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkNhbGVuZGFyV2Vla051bWJlckNvbXBvbmVudChkYXRlU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyV2Vla051bWJlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNMYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQ2FsZW5kYXJXZWVrTnVtYmVyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uQ2hhbmdlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLndlZWtzKSB7XG4gICAgICAgICAgICB0aGlzLndlZWtOdW1iZXJzID0gdGhpcy5nZXRXZWVrcygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyV2Vla051bWJlckNvbXBvbmVudC5wcm90b3R5cGUuZ2V0V2Vla3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLndlZWtzLm1hcChmdW5jdGlvbiAod2Vlaykge1xuICAgICAgICAgICAgLy8gRmluZCBsYXN0IGRlZmluZWQgZGF5IGFzIHdlZWsgY291bGQgY29udGFpbiBudWxsIGRheXMgaW4gY2FzZVxuICAgICAgICAgICAgLy8gYm91bmRpbmdNb250aCBzZXQgdG8gZmFsc2VcbiAgICAgICAgICAgIHZhciBsYXN0RGF5ID0gX19zcHJlYWRBcnJheXMod2VlaykucmV2ZXJzZSgpLmZpbmQoZnVuY3Rpb24gKGRheSkgeyByZXR1cm4gISFkYXk7IH0pO1xuICAgICAgICAgICAgLy8gVXNlIGxhc3QgZGF5IG9mIHRoZSB3ZWVrIHRvIGRldGVybWluZSB3ZWVrIG51bWJlci5cbiAgICAgICAgICAgIC8vIFRoaXMgd2F5IHdlZWtzIHdoaWNoIHNwYW4gYmV0d2VlbiBzaWJsaW5nIHllYXJzIGlzIG1hcmtlZCBmaXJzdFxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRhdGVTZXJ2aWNlLmdldFdlZWtOdW1iZXIobGFzdERheSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSlcbiAgICBdLCBOYkNhbGVuZGFyV2Vla051bWJlckNvbXBvbmVudC5wcm90b3R5cGUsIFwid2Vla3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNhbGVuZGFyV2Vla051bWJlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2FsZW5kYXJXZWVrTnVtYmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3ZWVrTnVtYmVyU3ltYm9sXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQucHJvdG90eXBlLCBcImlzTGFyZ2VcIiwgbnVsbCk7XG4gICAgTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItd2Vlay1udW1iZXJzJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJzaWduLWNvbnRhaW5lclxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwic2lnblxcXCI+e3sgd2Vla051bWJlclN5bWJvbCB9fTwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwid2Vlay1udW1iZXJcXFwiICpuZ0Zvcj1cXFwibGV0IHdlZWtOdW1iZXIgb2Ygd2Vla051bWJlcnNcXFwiPnt7IHdlZWtOdW1iZXIgfX08L2Rpdj5cXG4gIFwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59XFxuXCJdXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJXZWVrTnVtYmVyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFRoZSBgTmJOYXRpdmVEYXRlU2VydmljZWAgaXMgYmFzaWMgaW1wbGVtZW50YXRpb24gb2YgYE5iRGF0ZVNlcnZpY2VgIHVzaW5nXG4gKiBuYXRpdmUganMgZGF0ZSBvYmplY3RzIGFuZCBhbmd1bGFyIGxvY2FsaXphdGlvbiBzZXJ2aWNlcy5cbiAqICovXG52YXIgTmJOYXRpdmVEYXRlU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJOYXRpdmVEYXRlU2VydmljZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYk5hdGl2ZURhdGVTZXJ2aWNlKGxvY2FsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zZXRMb2NhbGUobG9jYWxlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5zZXRMb2NhbGUgPSBmdW5jdGlvbiAobG9jYWxlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc2V0TG9jYWxlLmNhbGwodGhpcywgbG9jYWxlKTtcbiAgICAgICAgdGhpcy5kYXRlUGlwZSA9IG5ldyBEYXRlUGlwZShsb2NhbGUpO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuaXNWYWxpZERhdGVTdHJpbmcgPSBmdW5jdGlvbiAoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4odGhpcy5wYXJzZShkYXRlLCBmb3JtYXQpLmdldFRpbWUoKSk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS50b2RheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5nZXREYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuZ2V0TW9udGggPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRNb250aCgpO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuZ2V0WWVhciA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5nZXREYXlPZldlZWsgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXkoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIHJldHVybnMgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLCBpdCBjYW4gYmUgMSBpZiB3ZWVrIHN0YXJ0cyBmcm9tIG1vbmRheVxuICAgICAqIGFuZCAwIGlmIGZyb20gc3VuZGF5IGFuZCBzbyBvbi5cbiAgICAgKiAqL1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldEZpcnN0RGF5T2ZXZWVrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZ2V0TG9jYWxlRmlyc3REYXlPZldlZWsodGhpcy5sb2NhbGUpO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuZ2V0TW9udGhOYW1lID0gZnVuY3Rpb24gKGRhdGUsIHN0eWxlJCQxKSB7XG4gICAgICAgIGlmIChzdHlsZSQkMSA9PT0gdm9pZCAwKSB7IHN0eWxlJCQxID0gVHJhbnNsYXRpb25XaWR0aC5BYmJyZXZpYXRlZDsgfVxuICAgICAgICB2YXIgaW5kZXggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vbnRoTmFtZUJ5SW5kZXgoaW5kZXgsIHN0eWxlJCQxKTtcbiAgICB9O1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldE1vbnRoTmFtZUJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIHN0eWxlJCQxKSB7XG4gICAgICAgIGlmIChzdHlsZSQkMSA9PT0gdm9pZCAwKSB7IHN0eWxlJCQxID0gVHJhbnNsYXRpb25XaWR0aC5BYmJyZXZpYXRlZDsgfVxuICAgICAgICByZXR1cm4gZ2V0TG9jYWxlTW9udGhOYW1lcyh0aGlzLmxvY2FsZSwgRm9ybVN0eWxlLkZvcm1hdCwgc3R5bGUkJDEpW2luZGV4XTtcbiAgICB9O1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldERheU9mV2Vla05hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZ2V0TG9jYWxlRGF5TmFtZXModGhpcy5sb2NhbGUsIEZvcm1TdHlsZS5Gb3JtYXQsIFRyYW5zbGF0aW9uV2lkdGguU2hvcnQpO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGRhdGUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oZGF0ZSwgZm9ybWF0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdlIGhhdmVuJ3QgZ290IGNhcGFiaWxpdHkgdG8gcGFyc2UgZGF0ZSB1c2luZyBmb3JtYXR0aW5nIHdpdGhvdXQgdGhpcmQgcGFydHkgbGlicmFyaWVzLlxuICAgICAqICovXG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKGRhdGUpKTtcbiAgICB9O1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmFkZERheSA9IGZ1bmN0aW9uIChkYXRlLCBudW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkgKyBudW0pO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuYWRkTW9udGggPSBmdW5jdGlvbiAoZGF0ZSwgbnVtKSB7XG4gICAgICAgIHZhciBtb250aCA9IHRoaXMuY3JlYXRlRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIG51bSwgMSk7XG4gICAgICAgIC8vIEluIGNhc2Ugb2YgZGF0ZSBoYXMgbW9yZSBkYXlzIHRoYW4gY2FsY3VsYXRlZCBtb250aCBqcyBEYXRlIHdpbGwgY2hhbmdlIHRoYXQgbW9udGggdG8gdGhlIG5leHQgb25lXG4gICAgICAgIC8vIGJlY2F1c2Ugb2YgdGhlIGRhdGUgb3ZlcmZsb3cuXG4gICAgICAgIG1vbnRoLnNldERhdGUoTWF0aC5taW4oZGF0ZS5nZXREYXRlKCksIHRoaXMuZ2V0TW9udGhFbmQobW9udGgpLmdldERhdGUoKSkpO1xuICAgICAgICByZXR1cm4gbW9udGg7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5hZGRZZWFyID0gZnVuY3Rpb24gKGRhdGUsIG51bSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSArIG51bSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5jb21wYXJlRGF0ZXMgPSBmdW5jdGlvbiAoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVEYXRlID0gZnVuY3Rpb24gKHllYXIsIG1vbnRoLCBkYXRlKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF0ZSk7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gY29ycmVjdCBmb3IgdGhlIGZhY3QgdGhhdCBKUyBuYXRpdmUgRGF0ZSB0cmVhdHMgeWVhcnMgaW4gcmFuZ2UgWzAsIDk5XSBhc1xuICAgICAgICAvLyBhYmJyZXZpYXRpb25zIGZvciAxOXh4LlxuICAgICAgICBpZiAoeWVhciA+PSAwICYmIHllYXIgPCAxMDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5zZXRGdWxsWWVhcihyZXN1bHQuZ2V0RnVsbFllYXIoKSAtIDE5MDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5nZXRNb250aEVuZCA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAwKTtcbiAgICB9O1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldE1vbnRoU3RhcnQgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCAxKTtcbiAgICB9O1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldE51bWJlck9mRGF5c0luTW9udGggPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb250aEVuZChkYXRlKS5nZXREYXRlKCk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5nZXRZZWFyRW5kID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDExLCAzMSk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5nZXRZZWFyU3RhcnQgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gICAgfTtcbiAgICBOYk5hdGl2ZURhdGVTZXJ2aWNlLnByb3RvdHlwZS5pc1NhbWVEYXkgPSBmdW5jdGlvbiAoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU2FtZU1vbnRoKGRhdGUxLCBkYXRlMikgJiZcbiAgICAgICAgICAgIGRhdGUxLmdldERhdGUoKSA9PT0gZGF0ZTIuZ2V0RGF0ZSgpO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuaXNTYW1lTW9udGggPSBmdW5jdGlvbiAoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU2FtZVllYXIoZGF0ZTEsIGRhdGUyKSAmJlxuICAgICAgICAgICAgZGF0ZTEuZ2V0TW9udGgoKSA9PT0gZGF0ZTIuZ2V0TW9udGgoKTtcbiAgICB9O1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmlzU2FtZVllYXIgPSBmdW5jdGlvbiAoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBkYXRlMS5nZXRGdWxsWWVhcigpID09PSBkYXRlMi5nZXRGdWxsWWVhcigpO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZS5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnbmF0aXZlJztcbiAgICB9O1xuICAgIE5iTmF0aXZlRGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldFdlZWtOdW1iZXIgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oZGF0ZSwgJ3cnKSwgMTApO1xuICAgIH07XG4gICAgTmJOYXRpdmVEYXRlU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oMCwgSW5qZWN0KExPQ0FMRV9JRCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG4gICAgXSwgTmJOYXRpdmVEYXRlU2VydmljZSk7XG4gICAgcmV0dXJuIE5iTmF0aXZlRGF0ZVNlcnZpY2U7XG59KE5iRGF0ZVNlcnZpY2UpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIFNFUlZJQ0VTID0gW1xuICAgIHsgcHJvdmlkZTogTmJEYXRlU2VydmljZSwgdXNlQ2xhc3M6IE5iTmF0aXZlRGF0ZVNlcnZpY2UgfSxcbiAgICBEYXRlUGlwZSxcbiAgICBOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2UsXG4gICAgTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2UsXG5dO1xudmFyIENPTVBPTkVOVFMgPSBbXG4gICAgTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50LFxuICAgIE5iQ2FsZW5kYXJQYWdlYWJsZU5hdmlnYXRpb25Db21wb25lbnQsXG4gICAgTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQsXG4gICAgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LFxuICAgIE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyUGlja2VyUm93Q29tcG9uZW50LFxuICAgIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQsXG4gICAgTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQsXG5dO1xuLyoqXG4gKiBgTmJDYWxlbmRhcktpdE1vZHVsZWAgaXMgYSBtb2R1bGUgdGhhdCBjb250YWlucyBtdWx0aXBsZSB1c2VmdWwgY29tcG9uZW50cyBmb3IgYnVpbGRpbmcgY3VzdG9tIGNhbGVuZGFycy5cbiAqIFNvIGlmIHlvdSB0aGluayBvdXIgY2FsZW5kYXJzIGlzIG5vdCBlbm91Z2ggcG93ZXJmdWwgZm9yIHlvdSBqdXN0IHVzZSBjYWxlbmRhci1raXQgYW5kIGJ1aWxkIHlvdXIgb3duIGNhbGVuZGFyIVxuICpcbiAqIEF2YWlsYWJsZSBjb21wb25lbnRzOlxuICogLSBgTmJDYWxlbmRhckRheVBpY2tlcmBcbiAqIC0gYE5iQ2FsZW5kYXJEYXlDZWxsYFxuICogLSBgTmJDYWxlbmRhck1vbnRoUGlja2VyYFxuICogLSBgTmJDYWxlbmRhck1vbnRoQ2VsbGBcbiAqIC0gYE5iQ2FsZW5kYXJZZWFyUGlja2VyYFxuICogLSBgTmJDYWxlbmRhclllYXJDZWxsYFxuICogLSBgTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50YFxuICogLSBgTmJDYWxlbmRhclBhZ2VhYmxlTmF2aWdhdGlvbmBcbiAqXG4gKiBGb3IgZXhhbXBsZSB5b3UgY2FuIGVhc2lseSBidWlsZCBmdWxsIGNhbGVuZGFyOlxuICogQHN0YWNrZWQtZXhhbXBsZShGdWxsIGNhbGVuZGFyLCBjYWxlbmRhci1raXQvY2FsZW5kYXIta2l0LWZ1bGwtY2FsZW5kYXIuY29tcG9uZW50KVxuICogKi9cbnZhciBOYkNhbGVuZGFyS2l0TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJLaXRNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iQ2FsZW5kYXJLaXRNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW05iU2hhcmVkTW9kdWxlLCBOYkJ1dHRvbk1vZHVsZSwgTmJJY29uTW9kdWxlXSxcbiAgICAgICAgICAgIGV4cG9ydHM6IF9fc3ByZWFkQXJyYXlzKENPTVBPTkVOVFMpLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBfX3NwcmVhZEFycmF5cyhDT01QT05FTlRTKSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogX19zcHJlYWRBcnJheXMoU0VSVklDRVMpLFxuICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQsXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KVxuICAgIF0sIE5iQ2FsZW5kYXJLaXRNb2R1bGUpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyS2l0TW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYmFzaXMgZm9yIGNhbGVuZGFyIGFuZCByYW5nZSBjYWxlbmRhciBjb21wb25lbnRzLlxuICogRW5jYXBzdWxhdGVzIGNvbW1vbiBiZWhhdmlvciAtIHN0b3JlIGNhbGVuZGFyIHN0YXRlIGFuZCBwZXJmb3JtIG5hdmlnYXRpb25cbiAqIGJldHdlZW4gcGlja2Vycy5cbiAqICovXG52YXIgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQoZGF0ZVNlcnZpY2UsIHllYXJNb2RlbFNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnllYXJNb2RlbFNlcnZpY2UgPSB5ZWFyTW9kZWxTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB3ZSBzaG91bGQgcmVuZGVyIHByZXZpb3VzIGFuZCBuZXh0IG1vbnRoc1xuICAgICAgICAgKiBpbiB0aGUgY3VycmVudCBtb250aCB2aWV3LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmJvdW5kaW5nTW9udGggPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBhY3RpdmUgdmlldyBmb3IgY2FsZW5kYXIuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuYWN0aXZlVmlld01vZGUgPSBOYkNhbGVuZGFyVmlld01vZGUuREFURTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpemUgb2YgdGhlIGNhbGVuZGFyIGFuZCBlbnRpcmUgY29tcG9uZW50cy5cbiAgICAgICAgICogQ2FuIGJlICdtZWRpdW0nIHdoaWNoIGlzIGRlZmF1bHQgb3IgJ2xhcmdlJy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHdlIHNob3VsZCBzaG93IGNhbGVuZGFyIG5hdmlnYXRpb24gb3Igbm90LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnNob3dOYXZpZ2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIGRhdGUgd2hlbiBzZWxlY3RlZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5kYXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLlZpZXdNb2RlID0gTmJDYWxlbmRhclZpZXdNb2RlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dXZWVrTnVtYmVyXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgc2hvdWxkIHdlIHNob3cgd2VlayBudW1iZXJzIGNvbHVtbi5cbiAgICAgICAgICogRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2hvd1dlZWtOdW1iZXI7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93V2Vla051bWJlciA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZpc2libGVEYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gdGhpcy5kYXRlU2VydmljZS50b2RheSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLnNldFZpZXdNb2RlID0gZnVuY3Rpb24gKHZpZXdNb2RlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVmlld01vZGUgPSB2aWV3TW9kZTtcbiAgICB9O1xuICAgIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5zZXRWaXNpYmxlRGF0ZSA9IGZ1bmN0aW9uICh2aXNpYmxlRGF0ZSkge1xuICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gdmlzaWJsZURhdGU7XG4gICAgfTtcbiAgICBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUucHJldk1vbnRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZVZpc2libGVNb250aCgtMSk7XG4gICAgfTtcbiAgICBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUubmV4dE1vbnRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZVZpc2libGVNb250aCgxKTtcbiAgICB9O1xuICAgIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5wcmV2WWVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VWaXNpYmxlWWVhcigtMSk7XG4gICAgfTtcbiAgICBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUubmV4dFllYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlVmlzaWJsZVllYXIoMSk7XG4gICAgfTtcbiAgICBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUucHJldlllYXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZVZpc2libGVZZWFycygtMSk7XG4gICAgfTtcbiAgICBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUubmV4dFllYXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZVZpc2libGVZZWFycygxKTtcbiAgICB9O1xuICAgIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5uYXZpZ2F0ZVByZXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmVWaWV3TW9kZSkge1xuICAgICAgICAgICAgY2FzZSBOYkNhbGVuZGFyVmlld01vZGUuREFURTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2TW9udGgoKTtcbiAgICAgICAgICAgIGNhc2UgTmJDYWxlbmRhclZpZXdNb2RlLk1PTlRIOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXZZZWFyKCk7XG4gICAgICAgICAgICBjYXNlIE5iQ2FsZW5kYXJWaWV3TW9kZS5ZRUFSOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXZZZWFycygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUubmF2aWdhdGVOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlVmlld01vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgTmJDYWxlbmRhclZpZXdNb2RlLkRBVEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dE1vbnRoKCk7XG4gICAgICAgICAgICBjYXNlIE5iQ2FsZW5kYXJWaWV3TW9kZS5NT05USDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0WWVhcigpO1xuICAgICAgICAgICAgY2FzZSBOYkNhbGVuZGFyVmlld01vZGUuWUVBUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0WWVhcnMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLm9uQ2hhbmdlVmlld01vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVZpZXdNb2RlID09PSBOYkNhbGVuZGFyVmlld01vZGUuREFURSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Vmlld01vZGUoTmJDYWxlbmRhclZpZXdNb2RlLllFQVIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0Vmlld01vZGUoTmJDYWxlbmRhclZpZXdNb2RlLkRBVEUpO1xuICAgIH07XG4gICAgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZVZpc2libGVNb250aCA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy52aXNpYmxlRGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkTW9udGgodGhpcy52aXNpYmxlRGF0ZSwgZGlyZWN0aW9uKTtcbiAgICB9O1xuICAgIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZS5jaGFuZ2VWaXNpYmxlWWVhciA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy52aXNpYmxlRGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkWWVhcih0aGlzLnZpc2libGVEYXRlLCBkaXJlY3Rpb24pO1xuICAgIH07XG4gICAgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZVZpc2libGVZZWFycyA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy52aXNpYmxlRGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkWWVhcih0aGlzLnZpc2libGVEYXRlLCBkaXJlY3Rpb24gKiB0aGlzLnllYXJNb2RlbFNlcnZpY2UuZ2V0WWVhcnNJblZpZXcoKSk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcImJvdW5kaW5nTW9udGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ3N0YXJ0VmlldycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3RpdmVWaWV3TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbiAgICBdLCBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXlDZWxsQ29tcG9uZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb250aENlbGxDb21wb25lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFR5cGUpXG4gICAgXSwgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcInllYXJDZWxsQ29tcG9uZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmlzaWJsZURhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmhhcy1uYXZpZ2F0aW9uJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93TmF2aWdhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5oYXMtd2Vlay1udW1iZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93V2Vla051bWJlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwid2Vla051bWJlclN5bWJvbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZUNoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1sYXJnZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCBudWxsKTtcbiAgICBOYkJhc2VDYWxlbmRhckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1iYXNlLWNhbGVuZGFyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuYi1jYXJkPlxcbiAgPG5iLWNhcmQtaGVhZGVyICpuZ0lmPVxcXCJzaG93TmF2aWdhdGlvblxcXCIgY2xhc3M9XFxcImNhbGVuZGFyLW5hdmlnYXRpb25cXFwiPlxcbiAgICA8bmItY2FsZW5kYXItdmlldy1tb2RlIFtkYXRlXT1cXFwidmlzaWJsZURhdGVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZpZXdNb2RlXT1cXFwiYWN0aXZlVmlld01vZGVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNoYW5nZU1vZGUpPVxcXCJvbkNoYW5nZVZpZXdNb2RlKClcXFwiPlxcbiAgICA8L25iLWNhbGVuZGFyLXZpZXctbW9kZT5cXG5cXG4gICAgPG5iLWNhbGVuZGFyLXBhZ2VhYmxlLW5hdmlnYXRpb24gKHByZXYpPVxcXCJuYXZpZ2F0ZVByZXYoKVxcXCIgKG5leHQpPVxcXCJuYXZpZ2F0ZU5leHQoKVxcXCI+XFxuICAgIDwvbmItY2FsZW5kYXItcGFnZWFibGUtbmF2aWdhdGlvbj5cXG4gIDwvbmItY2FyZC1oZWFkZXI+XFxuXFxuICA8bmItY2FyZC1ib2R5IFtuZ1N3aXRjaF09XFxcImFjdGl2ZVZpZXdNb2RlXFxcIj5cXG5cXG4gICAgPG5iLWNhbGVuZGFyLWRheS1waWNrZXIgKm5nU3dpdGNoQ2FzZT1cXFwiVmlld01vZGUuREFURVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2JvdW5kaW5nTW9udGhzXT1cXFwiYm91bmRpbmdNb250aFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NlbGxDb21wb25lbnRdPVxcXCJkYXlDZWxsQ29tcG9uZW50XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWluXT1cXFwibWluXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWF4XT1cXFwibWF4XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZmlsdGVyXT1cXFwiZmlsdGVyXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmlzaWJsZURhdGVdPVxcXCJ2aXNpYmxlRGF0ZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0ZV09XFxcImRhdGVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzaG93V2Vla051bWJlcl09XFxcInNob3dXZWVrTnVtYmVyXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGF0ZUNoYW5nZSk9XFxcImRhdGVDaGFuZ2UuZW1pdCgkYW55KCRldmVudCkpXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2Vla051bWJlclN5bWJvbF09XFxcIndlZWtOdW1iZXJTeW1ib2xcXFwiPlxcbiAgICA8L25iLWNhbGVuZGFyLWRheS1waWNrZXI+XFxuXFxuICAgIDxuYi1jYWxlbmRhci15ZWFyLXBpY2tlciAqbmdTd2l0Y2hDYXNlPVxcXCJWaWV3TW9kZS5ZRUFSXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NlbGxDb21wb25lbnRdPVxcXCJ5ZWFyQ2VsbENvbXBvbmVudFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlXT1cXFwiJGFueShkYXRlKVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttaW5dPVxcXCJtaW5cXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWF4XT1cXFwibWF4XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbHRlcl09XFxcImZpbHRlclxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzaXplXT1cXFwic2l6ZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt5ZWFyXT1cXFwidmlzaWJsZURhdGVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeWVhckNoYW5nZSk9XFxcInNldFZpc2libGVEYXRlKCRldmVudCk7IHNldFZpZXdNb2RlKFZpZXdNb2RlLk1PTlRIKVxcXCI+XFxuICAgIDwvbmItY2FsZW5kYXIteWVhci1waWNrZXI+XFxuXFxuICAgIDxuYi1jYWxlbmRhci1tb250aC1waWNrZXIgKm5nU3dpdGNoQ2FzZT1cXFwiVmlld01vZGUuTU9OVEhcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NlbGxDb21wb25lbnRdPVxcXCJtb250aENlbGxDb21wb25lbnRcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21pbl09XFxcIm1pblxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWF4XT1cXFwibWF4XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtmaWx0ZXJdPVxcXCJmaWx0ZXJcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttb250aF09XFxcInZpc2libGVEYXRlXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlXT1cXFwiJGFueShkYXRlKVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobW9udGhDaGFuZ2UpPVxcXCJzZXRWaXNpYmxlRGF0ZSgkZXZlbnQpOyBzZXRWaWV3TW9kZShWaWV3TW9kZS5EQVRFKVxcXCI+XFxuICAgIDwvbmItY2FsZW5kYXItbW9udGgtcGlja2VyPlxcblxcbiAgPC9uYi1jYXJkLWJvZHk+XFxuXFxuPC9uYi1jYXJkPlxcblwiXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2UsXG4gICAgICAgICAgICBOYkNhbGVuZGFyWWVhck1vZGVsU2VydmljZV0pXG4gICAgXSwgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkJhc2VDYWxlbmRhckNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkJhc2VDYWxlbmRhck1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkJhc2VDYWxlbmRhck1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJCYXNlQ2FsZW5kYXJNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW05iQ2FsZW5kYXJLaXRNb2R1bGUsIE5iU2hhcmVkTW9kdWxlLCBOYkNhcmRNb2R1bGVdLFxuICAgICAgICAgICAgZXhwb3J0czogW05iQmFzZUNhbGVuZGFyQ29tcG9uZW50XSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iQmFzZUNhbGVuZGFyQ29tcG9uZW50XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkJhc2VDYWxlbmRhck1vZHVsZSk7XG4gICAgcmV0dXJuIE5iQmFzZUNhbGVuZGFyTW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ2FsZW5kYXJNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhck1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJDYWxlbmRhck1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbTmJCYXNlQ2FsZW5kYXJNb2R1bGVdLFxuICAgICAgICAgICAgZXhwb3J0czogW05iQ2FsZW5kYXJDb21wb25lbnRdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJDYWxlbmRhckNvbXBvbmVudF0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJDYWxlbmRhck1vZHVsZSk7XG4gICAgcmV0dXJuIE5iQ2FsZW5kYXJNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJCYXNlQ2FsZW5kYXJSYW5nZUNlbGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJCYXNlQ2FsZW5kYXJSYW5nZUNlbGwoKSB7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhc2VDYWxlbmRhclJhbmdlQ2VsbC5wcm90b3R5cGUsIFwiaGFzUmFuZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhISh0aGlzLnNlbGVjdGVkVmFsdWUgJiYgdGhpcy5zZWxlY3RlZFZhbHVlLnN0YXJ0ICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZS5lbmQpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gTmJCYXNlQ2FsZW5kYXJSYW5nZUNlbGw7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50KGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgICAgIF90aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIF90aGlzLnNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgICAgIF90aGlzLnJhbmdlQ2VsbENsYXNzID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuZGF5Q2VsbENsYXNzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5SYW5nZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZSAmJiB0aGlzLmhhc1JhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNJblJhbmdlKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXJ0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMuaGFzUmFuZ2UgJiYgdGhpcy5kYXRlU2VydmljZS5pc1NhbWVEYXkodGhpcy5kYXRlLCB0aGlzLnNlbGVjdGVkVmFsdWUuc3RhcnQpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMuaGFzUmFuZ2UgJiYgdGhpcy5kYXRlU2VydmljZS5pc1NhbWVEYXkodGhpcy5kYXRlLCB0aGlzLnNlbGVjdGVkVmFsdWUuZW5kKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lRGF5KHRoaXMuZGF0ZSwgdGhpcy5kYXRlU2VydmljZS50b2RheSgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImJvdW5kaW5nTW9udGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aFNhZmUodGhpcy5kYXRlLCB0aGlzLnZpc2libGVEYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lRGF5KHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlLnN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImVtcHR5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuZGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zbWFsbGVyVGhhbk1pbigpIHx8IHRoaXMuZ3JlYXRlclRoYW5NYXgoKSB8fCB0aGlzLmRvbnRGaXRGaWx0ZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImlzTGFyZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0RGF0ZSh0aGlzLmRhdGUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLmVtcHR5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3QuZW1pdCh0aGlzLmRhdGUpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUuc21hbGxlclRoYW5NaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5taW4gJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5kYXRlLCB0aGlzLm1pbikgPCAwO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUuZ3JlYXRlclRoYW5NYXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5tYXggJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5kYXRlLCB0aGlzLm1heCkgPiAwO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUuZG9udEZpdEZpbHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLmZpbHRlciAmJiAhdGhpcy5maWx0ZXIodGhpcy5kYXRlKTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLmlzSW5SYW5nZSA9IGZ1bmN0aW9uIChkYXRlLCBfYSkge1xuICAgICAgICB2YXIgc3RhcnQgPSBfYS5zdGFydCwgZW5kID0gX2EuZW5kO1xuICAgICAgICB2YXIgaXNHcmVhdGVyVGhhblN0YXJ0ID0gdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5kYXRlLCBzdGFydCkgPj0gMDtcbiAgICAgICAgdmFyIGlzTGVzc1RoYW5FbmQgPSB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyh0aGlzLmRhdGUsIGVuZCkgPD0gMDtcbiAgICAgICAgcmV0dXJuIGlzR3JlYXRlclRoYW5TdGFydCAmJiBpc0xlc3NUaGFuRW5kO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkVmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2aXNpYmxlRGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmluLXJhbmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImluUmFuZ2VcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGFydCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGFydFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmVuZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJlbmRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5yYW5nZS1jZWxsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwicmFuZ2VDZWxsQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmRheS1jZWxsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF5Q2VsbENsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy50b2RheScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0b2RheVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmJvdW5kaW5nLW1vbnRoJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImJvdW5kaW5nTW9udGhcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zZWxlY3RlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmVtcHR5JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImVtcHR5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZGlzYWJsZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImlzTGFyZ2VcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignY2xpY2snKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkNsaWNrXCIsIG51bGwpO1xuICAgIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItcmFuZ2UtZGF5LWNlbGwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcImNlbGwtY29udGVudFxcXCI+e3sgZGF5IH19PC9kaXY+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50O1xufShOYkJhc2VDYWxlbmRhclJhbmdlQ2VsbCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50KGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgICAgIF90aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIF90aGlzLnNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgICAgIF90aGlzLnllYXJDZWxsQ2xhc3MgPSB0cnVlO1xuICAgICAgICBfdGhpcy5yYW5nZUNlbGxDbGFzcyA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpblJhbmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNSYW5nZSAmJiB0aGlzLmlzSW5SYW5nZSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwicmFuZ2VTdGFydFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzUmFuZ2UgJiYgdGhpcy5kYXRlU2VydmljZS5pc1NhbWVZZWFyKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlLnN0YXJ0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyYW5nZUVuZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzUmFuZ2UgJiYgdGhpcy5kYXRlU2VydmljZS5pc1NhbWVZZWFyKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlLmVuZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVZZWFyKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlLnN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0b2RheVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lWWVhcih0aGlzLmRhdGUsIHRoaXMuZGF0ZVNlcnZpY2UudG9kYXkoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNtYWxsZXJUaGFuTWluKCkgfHwgdGhpcy5ncmVhdGVyVGhhbk1heCgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImlzTGFyZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInllYXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIodGhpcy5kYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3QuZW1pdCh0aGlzLmRhdGUpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLnNtYWxsZXJUaGFuTWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWluICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMueWVhckVuZCgpLCB0aGlzLm1pbikgPCAwO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLmdyZWF0ZXJUaGFuTWF4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWF4ICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMueWVhclN0YXJ0KCksIHRoaXMubWF4KSA+IDA7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUueWVhclN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyU3RhcnQodGhpcy5kYXRlKTtcbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZS55ZWFyRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyRW5kKHRoaXMuZGF0ZSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUuaXNJblJhbmdlID0gZnVuY3Rpb24gKGRhdGUsIF9hKSB7XG4gICAgICAgIHZhciBzdGFydCA9IF9hLnN0YXJ0LCBlbmQgPSBfYS5lbmQ7XG4gICAgICAgIGlmIChzdGFydCAmJiBlbmQpIHtcbiAgICAgICAgICAgIHZhciBjZWxsWWVhciA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhcihkYXRlKTtcbiAgICAgICAgICAgIHZhciBzdGFydFllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIoc3RhcnQpO1xuICAgICAgICAgICAgdmFyIGVuZFllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIoZW5kKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsWWVhciA+PSBzdGFydFllYXIgJiYgY2VsbFllYXIgPD0gZW5kWWVhcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVZZWFyKGRhdGUsIHN0YXJ0KTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmluLXJhbmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpblJhbmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhcnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInJhbmdlU3RhcnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5lbmQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInJhbmdlRW5kXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2VsZWN0ZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MudG9kYXknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZGlzYWJsZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1sYXJnZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNMYXJnZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnllYXItY2VsbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ5ZWFyQ2VsbENsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5yYW5nZS1jZWxsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInJhbmdlQ2VsbENsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignY2xpY2snKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwib25DbGlja1wiLCBudWxsKTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1yYW5nZS15ZWFyLWNlbGwnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcImNlbGwtY29udGVudFxcXCI+XFxuICAgICAge3sgeWVhciB9fVxcbiAgICA8L2Rpdj5cXG4gIFwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJEYXRlU2VydmljZV0pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudDtcbn0oTmJCYXNlQ2FsZW5kYXJSYW5nZUNlbGwpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudChkYXRlU2VydmljZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICBfdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICBfdGhpcy5zZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKHRydWUpO1xuICAgICAgICBfdGhpcy5tb250aENlbGxDbGFzcyA9IHRydWU7XG4gICAgICAgIF90aGlzLnJhbmdlQ2VsbENsYXNzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb250aFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGhOYW1lKHRoaXMuZGF0ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lTW9udGgodGhpcy5kYXRlLCB0aGlzLnNlbGVjdGVkVmFsdWUuc3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpblJhbmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNSYW5nZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzSW5SYWdlKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwicmFuZ2VTdGFydFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aCh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZS5zdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInJhbmdlRW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNSYW5nZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZU1vbnRoKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlLmVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aFNhZmUodGhpcy5kYXRlLCB0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCkpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc21hbGxlclRoYW5NaW4oKSB8fCB0aGlzLmdyZWF0ZXJUaGFuTWF4KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImlzTGFyZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3QuZW1pdCh0aGlzLmRhdGUpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5zbWFsbGVyVGhhbk1pbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLm1pbiAmJiB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyh0aGlzLm1vbnRoRW5kKCksIHRoaXMubWluKSA8IDA7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLmdyZWF0ZXJUaGFuTWF4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWF4ICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMubW9udGhTdGFydCgpLCB0aGlzLm1heCkgPiAwO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5tb250aFN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aFN0YXJ0KHRoaXMuZGF0ZSk7XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLm1vbnRoRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aEVuZCh0aGlzLmRhdGUpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZS5pc0luUmFnZSA9IGZ1bmN0aW9uIChkYXRlLCByYW5nZSkge1xuICAgICAgICBpZiAocmFuZ2Uuc3RhcnQgJiYgcmFuZ2UuZW5kKSB7XG4gICAgICAgICAgICB2YXIgY2VsbERhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldE1vbnRoU3RhcnQoZGF0ZSk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldE1vbnRoU3RhcnQocmFuZ2Uuc3RhcnQpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGhTdGFydChyYW5nZS5lbmQpO1xuICAgICAgICAgICAgdmFyIGlzR3JlYXRlclRoYW5TdGFydCA9IHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKGNlbGxEYXRlLCBzdGFydCkgPj0gMDtcbiAgICAgICAgICAgIHZhciBpc0xlc3NUaGFuRW5kID0gdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXMoY2VsbERhdGUsIGVuZCkgPD0gMDtcbiAgICAgICAgICAgIHJldHVybiBpc0dyZWF0ZXJUaGFuU3RhcnQgJiYgaXNMZXNzVGhhbkVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aChkYXRlLCByYW5nZS5zdGFydCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInZpc2libGVEYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZFZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubW9udGgtY2VsbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwibW9udGhDZWxsQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnJhbmdlLWNlbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInJhbmdlQ2VsbENsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zZWxlY3RlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuaW4tcmFuZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpblJhbmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhcnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyYW5nZVN0YXJ0XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZW5kJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwicmFuZ2VFbmRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy50b2RheScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvZGF5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZGlzYWJsZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0xhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ2NsaWNrJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkNsaWNrXCIsIG51bGwpO1xuICAgIE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1yYW5nZS1tb250aC1jZWxsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjZWxsLWNvbnRlbnRcXFwiPlxcbiAgICAgIHt7IG1vbnRoIH19XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkRhdGVTZXJ2aWNlXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQ7XG59KE5iQmFzZUNhbGVuZGFyUmFuZ2VDZWxsKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ2FsZW5kYXJSYW5nZSBjb21wb25lbnQgcHJvdmlkZXMgYSBjYXBhYmlsaXR5IHRvIGNob29zZSBhIGRhdGUgcmFuZ2UuXG4gKlxuICogYGBgaHRtbFxuICogPG5iLWNhbGVuZGFyIFsoZGF0ZSldPVwiZGF0ZVwiPjwvbmItY2FsZW5kYXI+XG4gKiA8bmItY2FsZW5kYXIgW2RhdGVdPVwiZGF0ZVwiIChkYXRlQ2hhbmdlKT1cImhhbmRsZURhdGVDaGFuZ2UoJGV2ZW50KVwiPjwvbmItY2FsZW5kYXI+XG4gKiBgYGBcbiAqXG4gKiBCYXNpYyB1c2FnZSBleGFtcGxlXG4gKiBAc3RhY2tlZC1leGFtcGxlKFJhbmdlLCBjYWxlbmRhci9jYWxlbmRhci1yYW5nZS1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDYWxlbmRhclJhbmdlTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkNhbGVuZGFyUmFuZ2VNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBDYWxlbmRhclJhbmdlIGNvbXBvbmVudCBzdXBwb3J0cyBhbGwgb2YgdGhlIENhbGVuZGFyIGNvbXBvbmVudCBjdXN0b21pemF0aW9uIHByb3BlcnRpZXMuIE1vcmUgZGVmYWlscyBjYW4gYmUgZm91bmRcbiAqIGluIHRoZSBbQ2FsZW5kYXIgY29tcG9uZW50IGRvY3NdKGRvY3MvY29tcG9uZW50cy9jYWxlbmRhcikuXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGNhbGVuZGFyLXdpZHRoOlxuICogY2FsZW5kYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWJvcmRlci1zdHlsZTpcbiAqIGNhbGVuZGFyLWJvcmRlci13aWR0aDpcbiAqIGNhbGVuZGFyLWJvcmRlci1yYWRpdXM6XG4gKiBjYWxlbmRhci10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItdGV4dC1mb250LWZhbWlseTpcbiAqIGNhbGVuZGFyLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1waWNrZXItcGFkZGluZy10b3A6XG4gKiBjYWxlbmRhci1waWNrZXItcGFkZGluZy1ib3R0b206XG4gKiBjYWxlbmRhci1waWNrZXItcGFkZGluZy1zdGFydDpcbiAqIGNhbGVuZGFyLXBpY2tlci1wYWRkaW5nLWVuZDpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGV4dC1mb250LWZhbWlseTpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGl0bGUtdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXRpdGxlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXBhZGRpbmc6XG4gKiBjYWxlbmRhci1jZWxsLWluYWN0aXZlLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1kYXktY2VsbC13aWR0aDpcbiAqIGNhbGVuZGFyLWRheS1jZWxsLWhlaWdodDpcbiAqIGNhbGVuZGFyLW1vbnRoLWNlbGwtd2lkdGg6XG4gKiBjYWxlbmRhci1tb250aC1jZWxsLWhlaWdodDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC13aWR0aDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWJhY2tncm91bmQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWRpdmlkZXItY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWRpdmlkZXItd2lkdGg6XG4gKiBjYWxlbmRhci13ZWVrZGF5LXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrZGF5LXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItd2Vla2RheS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS1ob2xpZGF5LXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktd2lkdGg6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWJhY2tncm91bmQ6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWRpdmlkZXItY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWRpdmlkZXItd2lkdGg6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItd2Vla251bWJlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItd2Vla251bWJlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla251bWJlci1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXdpZHRoOlxuICogY2FsZW5kYXItbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci1kYXktY2VsbC1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLWRheS1jZWxsLWxhcmdlLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktbGFyZ2UtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItbGFyZ2UtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla251bWJlci1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLW1vbnRoLWNlbGwtbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci1tb250aC1jZWxsLWxhcmdlLWhlaWdodDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLXllYXItY2VsbC1sYXJnZS1oZWlnaHQ6XG4gKiAqL1xudmFyIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB3ZSBzaG91bGQgcmVuZGVyIHByZXZpb3VzIGFuZCBuZXh0IG1vbnRoc1xuICAgICAgICAgKiBpbiB0aGUgY3VycmVudCBtb250aCB2aWV3LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmJvdW5kaW5nTW9udGggPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBzdGFydGluZyB2aWV3IGZvciB0aGUgY2FsZW5kYXIuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc3RhcnRWaWV3ID0gTmJDYWxlbmRhclZpZXdNb2RlLkRBVEU7XG4gICAgICAgIHRoaXMuZGF5Q2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXN0b20gbW9udGggY2VsbCBjb21wb25lbnQuIEhhdmUgdG8gaW1wbGVtZW50IGBOYkNhbGVuZGFyQ2VsbGAgaW50ZXJmYWNlLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLm1vbnRoQ2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudDtcbiAgICAgICAgdGhpcy55ZWFyQ2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogU2l6ZSBvZiB0aGUgY2FsZW5kYXIgYW5kIGVudGlyZSBjb21wb25lbnRzLlxuICAgICAgICAgKiBDYW4gYmUgJ21lZGl1bScgd2hpY2ggaXMgZGVmYXVsdCBvciAnbGFyZ2UnLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IGNhbGVuZGFycyBuYXZpZ2F0aW9uIG9yIG5vdC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zaG93TmF2aWdhdGlvbiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3Nob3dXZWVrTnVtYmVyID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHN5bWJvbCB1c2VkIGFzIGEgaGVhZGVyIGZvciB3ZWVrIG51bWJlcnMgY29sdW1uXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMud2Vla051bWJlclN5bWJvbCA9ICcjJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHJhbmdlIHdoZW4gc3RhcnQgc2VsZWN0ZWQgYW5kIGVtaXRzIGFnYWluIHdoZW4gZW5kIHNlbGVjdGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnJhbmdlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJfY2VsbENvbXBvbmVudFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXN0b20gZGF5IGNlbGwgY29tcG9uZW50LiBIYXZlIHRvIGltcGxlbWVudCBgTmJDYWxlbmRhckNlbGxgIGludGVyZmFjZS5cbiAgICAgICAgICogKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoY2VsbENvbXBvbmVudCkge1xuICAgICAgICAgICAgaWYgKGNlbGxDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRheUNlbGxDb21wb25lbnQgPSBjZWxsQ29tcG9uZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJfeWVhckNlbGxDb21wb25lbnRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3VzdG9tIHllYXIgY2VsbCBjb21wb25lbnQuIEhhdmUgdG8gaW1wbGVtZW50IGBOYkNhbGVuZGFyQ2VsbGAgaW50ZXJmYWNlLlxuICAgICAgICAgKiAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBpZiAoY2VsbENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMueWVhckNlbGxDb21wb25lbnQgPSBjZWxsQ29tcG9uZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93V2Vla051bWJlclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IHdlZWsgbnVtYmVycyBjb2x1bW4uXG4gICAgICAgICAqIEZhbHNlIGJ5IGRlZmF1bHQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dXZWVrTnVtYmVyO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgdGhpcy5pbml0RGF0ZUlmTnVsbCgpO1xuICAgICAgICB0aGlzLmhhbmRsZVNlbGVjdGVkKGRhdGUpO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZS5pbml0RGF0ZUlmTnVsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlID0geyBzdGFydDogbnVsbCwgZW5kOiBudWxsIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUuaGFuZGxlU2VsZWN0ZWQgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RW5kKGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RTdGFydChkYXRlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3Rpb25TdGFydGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnJhbmdlLCBzdGFydCA9IF9hLnN0YXJ0LCBlbmQgPSBfYS5lbmQ7XG4gICAgICAgIHJldHVybiBzdGFydCAmJiAhZW5kO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3RTdGFydCA9IGZ1bmN0aW9uIChzdGFydCkge1xuICAgICAgICB0aGlzLnNlbGVjdFJhbmdlKHsgc3RhcnQ6IHN0YXJ0IH0pO1xuICAgIH07XG4gICAgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3RFbmQgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnJhbmdlLnN0YXJ0O1xuICAgICAgICBpZiAodGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXMoZGF0ZSwgc3RhcnQpID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSYW5nZSh7IHN0YXJ0OiBzdGFydCwgZW5kOiBkYXRlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSYW5nZSh7IHN0YXJ0OiBkYXRlLCBlbmQ6IHN0YXJ0IH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQucHJvdG90eXBlLnNlbGVjdFJhbmdlID0gZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgIHRoaXMucmFuZ2UgPSByYW5nZTtcbiAgICAgICAgdGhpcy5yYW5nZUNoYW5nZS5lbWl0KHJhbmdlKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImJvdW5kaW5nTW9udGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXJ0Vmlld1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibWluXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCdkYXlDZWxsQ29tcG9uZW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUeXBlXSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQucHJvdG90eXBlLCBcIl9jZWxsQ29tcG9uZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVHlwZSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQucHJvdG90eXBlLCBcIm1vbnRoQ2VsbENvbXBvbmVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgneWVhckNlbGxDb21wb25lbnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFR5cGUpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1R5cGVdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiX3llYXJDZWxsQ29tcG9uZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidmlzaWJsZURhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93TmF2aWdhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicmFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd1dlZWtOdW1iZXJcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3ZWVrTnVtYmVyU3ltYm9sXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicmFuZ2VDaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItcmFuZ2UnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuYi1iYXNlLWNhbGVuZGFyXFxuICAgICAgW2RhdGVdPVxcXCJyYW5nZVxcXCJcXG4gICAgICAoZGF0ZUNoYW5nZSk9XFxcIm9uQ2hhbmdlKCRhbnkoJGV2ZW50KSlcXFwiXFxuICAgICAgW21pbl09XFxcIm1pblxcXCJcXG4gICAgICBbbWF4XT1cXFwibWF4XFxcIlxcbiAgICAgIFtmaWx0ZXJdPVxcXCJmaWx0ZXJcXFwiXFxuICAgICAgW3N0YXJ0Vmlld109XFxcInN0YXJ0Vmlld1xcXCJcXG4gICAgICBbYm91bmRpbmdNb250aF09XFxcImJvdW5kaW5nTW9udGhcXFwiXFxuICAgICAgW2RheUNlbGxDb21wb25lbnRdPVxcXCJkYXlDZWxsQ29tcG9uZW50XFxcIlxcbiAgICAgIFttb250aENlbGxDb21wb25lbnRdPVxcXCJtb250aENlbGxDb21wb25lbnRcXFwiXFxuICAgICAgW3llYXJDZWxsQ29tcG9uZW50XT1cXFwieWVhckNlbGxDb21wb25lbnRcXFwiXFxuICAgICAgW3Zpc2libGVEYXRlXT1cXFwidmlzaWJsZURhdGVcXFwiXFxuICAgICAgW3Nob3dOYXZpZ2F0aW9uXT1cXFwic2hvd05hdmlnYXRpb25cXFwiXFxuICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgIFtzaG93V2Vla051bWJlcl09XFxcInNob3dXZWVrTnVtYmVyXFxcIlxcbiAgICAgIFt3ZWVrTnVtYmVyU3ltYm9sXT1cXFwid2Vla051bWJlclN5bWJvbFxcXCJcXG4gICAgPjwvbmItYmFzZS1jYWxlbmRhcj5cXG4gIFwiXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2VdKVxuICAgIF0sIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyUmFuZ2VNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDYWxlbmRhclJhbmdlTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYkNhbGVuZGFyUmFuZ2VNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW05iQmFzZUNhbGVuZGFyTW9kdWxlXSxcbiAgICAgICAgICAgIGV4cG9ydHM6IFtOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnRdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkNhbGVuZGFyUmFuZ2VNb2R1bGUpO1xuICAgIHJldHVybiBOYkNhbGVuZGFyUmFuZ2VNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5mdW5jdGlvbiBpc1VybFBhdGhFcXVhbChwYXRoLCBsaW5rKSB7XG4gICAgdmFyIGxvY2F0aW9uUGF0aCA9IGdldFBhdGhQYXJ0T2ZVcmwocGF0aCk7XG4gICAgcmV0dXJuIGxpbmsgPT09IGxvY2F0aW9uUGF0aDtcbn1cbmZ1bmN0aW9uIGlzVXJsUGF0aENvbnRhaW4ocGF0aCwgbGluaykge1xuICAgIHZhciBsb2NhdGlvblBhdGggPSBnZXRQYXRoUGFydE9mVXJsKHBhdGgpO1xuICAgIHZhciBlbmRPZlVybFNlZ21lbnRSZWdFeHAgPSAvXFwvfF4kLztcbiAgICByZXR1cm4gbG9jYXRpb25QYXRoLnN0YXJ0c1dpdGgobGluaykgJiZcbiAgICAgICAgbG9jYXRpb25QYXRoLnNsaWNlKGxpbmsubGVuZ3RoKS5jaGFyQXQoMCkuc2VhcmNoKGVuZE9mVXJsU2VnbWVudFJlZ0V4cCkgIT09IC0xO1xufVxuZnVuY3Rpb24gZ2V0UGF0aFBhcnRPZlVybCh1cmwpIHtcbiAgICByZXR1cm4gdXJsLm1hdGNoKC8uKj8oPz1bPzsjXXwkKS8pWzBdO1xufVxuZnVuY3Rpb24gZ2V0RnJhZ21lbnRQYXJ0T2ZVcmwodXJsKSB7XG4gICAgdmFyIG1hdGNoZWQgPSB1cmwubWF0Y2goLyMoLispLyk7XG4gICAgcmV0dXJuIG1hdGNoZWQgPyBtYXRjaGVkWzFdIDogJyc7XG59XG5mdW5jdGlvbiBpc0ZyYWdtZW50RXF1YWwocGF0aCwgZnJhZ21lbnQpIHtcbiAgICByZXR1cm4gZ2V0RnJhZ21lbnRQYXJ0T2ZVcmwocGF0aCkgPT09IGZyYWdtZW50O1xufVxuZnVuY3Rpb24gaXNGcmFnbWVudENvbnRhaW4ocGF0aCwgZnJhZ21lbnQpIHtcbiAgICByZXR1cm4gZ2V0RnJhZ21lbnRQYXJ0T2ZVcmwocGF0aCkuaW5jbHVkZXMoZnJhZ21lbnQpO1xufVxuXG4vKipcbiAqIFRoaXMgc2VydmljZSBkZXRlcm1pbmVzIHdoZXRoZXIgd2Ugc2hvdWxkIHNjcm9sbCB0aGUgbGF5b3V0IGJhY2sgdG8gdG9wLlxuICogVGhpcyBvY2N1cnMgd2hlbiB0aGUgcGFnZSBpcyBjaGFuZ2VkLCBzbyB3aGVuIGN1cnJlbnQgdXJsIFBBVEggaXMgbm90IGVxdWFsIHRvIHRoZSBwcmV2aW91cyBvbmUuXG4gKlxuICogIFRPRE86IHRoaXMgaXMgbW9zdCBsaWtlbHkgYSB0ZW1wb3Jhcnkgc29sdXRpb25zIGFzIHJlY2VudGx5IEFuZ3VsYXIgaW50cm9kdWNlcyBWaWV3cG9ydFNjcm9sbFxuICogIGFuZCBzY3JvbGwgcmVzdG9yYXRpb24gcHJvY2Vzc1xuICovXG52YXIgTmJSZXN0b3JlU2Nyb2xsVG9wSGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlcihyb3V0ZXIpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgfVxuICAgIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlci5wcm90b3R5cGUuc2hvdWxkUmVzdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmV2ZW50c1xuICAgICAgICAgICAgLnBpcGUoc3RhcnRXaXRoKG51bGwpLCBmaWx0ZXIoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBldmVudCA9PT0gbnVsbCB8fCBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQ7IH0pLCBwYWlyd2lzZSgpLCBtYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgcHJldiA9IF9hWzBdLCBjdXJyZW50ID0gX2FbMV07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucGFnZUNoYW5nZWQocHJldiwgY3VycmVudCk7XG4gICAgICAgIH0pLCBmaWx0ZXIoZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gISFyZXM7IH0pKTtcbiAgICB9O1xuICAgIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlci5wcm90b3R5cGUucGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAocHJldiwgY3VycmVudCkge1xuICAgICAgICByZXR1cm4gIXByZXYgfHwgZ2V0UGF0aFBhcnRPZlVybChwcmV2LnVybCkgIT09IGdldFBhdGhQYXJ0T2ZVcmwoY3VycmVudC51cmwpO1xuICAgIH07XG4gICAgTmJSZXN0b3JlU2Nyb2xsVG9wSGVscGVyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtSb3V0ZXJdKVxuICAgIF0sIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlcik7XG4gICAgcmV0dXJuIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlcjtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogTGF5b3V0IGNvbnRhaW5lciBjb21wb25lbnQuXG4gKiBXaGVuIHVzaW5nIHdpdGggTmVidWxhciBUaGVtZSBTeXN0ZW0gaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgY2hpbGQgY29tcG9uZW50cyBzaG91bGQgYmUgcGxhY2VkIGluc2lkZS5cbiAqXG4gKiBCYXNpYyBleGFtcGxlIG9mIHR3byBjb2x1bW4gbGF5b3V0IHdpdGggaGVhZGVyOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGxheW91dC9sYXlvdXQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIENhbiBjb250YWluIHRoZSBmb2xsb3dpbmcgY29tcG9uZW50cyBpbnNpZGU6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLWxheW91dD5cbiAqICA8bmItbGF5b3V0LWhlYWRlcj48L25iLWxheW91dC1oZWFkZXI+XG4gKiAgPG5iLWxheW91dC1mb290ZXI+PC9uYi1sYXlvdXQtZm9vdGVyPlxuICogIDxuYi1sYXlvdXQtY29sdW1uPjwvbmItbGF5b3V0LWNvbHVtbj5cbiAqICA8bmItc2lkZWJhcj48L25iLXNpZGViYXI+XG4gKiA8L25iLWxheW91dD5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJMYXlvdXRNb2R1bGVgIHRvIHlvdXIgYXBwIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJMYXlvdXRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKiBCeSBkZWZhdWx0IHRoZSBsYXlvdXQgZmlsbHMgdXAgdGhlIHdob2xlIHZpZXctcG9ydC5cbiAqIFRoZSB3aW5kb3cgc2Nyb2xsYmFycyBhcmUgZGlzYWJsZWQgb24gdGhlIGJvZHkgYW5kIG1vdmVkIGluc2lkZSBvZiB0aGUgbmItbGF5b3V0LCBzbyB0aGF0IHRoZSBzY3JvbGxiYXJzXG4gKiB3b24ndCBtZXNzIHdpdGggdGhlIGZpeGVkIG5iLWhlYWRlci5cbiAqXG4gKiBUaGUgY2hpbGQgY29tcG9uZW50cyBhcmUgcHJvamVjdGVkIGludG8gYSBmbGV4aWJsZSBsYXlvdXQgc3RydWN0dXJlIGFsbG93aW5nIHRvIGFkanVzdCB0aGUgbGF5b3V0IGJlaGF2aW9yXG4gKiBiYXNlZCBvbiB0aGUgc2V0dGluZ3MgcHJvdmlkZWQuXG4gKlxuICogVGhlIGxheW91dCBjb250ZW50IChjb2x1bW5zKSBiZWNvbWVzIGNlbnRlcmVkIHdoZW4gdGhlIHdpbmRvdyB3aWR0aCBpcyBtb3JlIHRoYW5cbiAqIHRoZSB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhlIHRoZW1lIHZhcmlhYmxlIGBsYXlvdXQtY29udGVudC13aWR0aGAuXG4gKlxuICogVGhlIGxheW91dCBhbHNvIGNvbnRhaW5zIHRoZSBhcmVhIG9uIHRoZSB2ZXJ5IHRvcCAodGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBuYi1sYXlvdXQpLCB3aGljaCBjb3VsZCBiZSB1c2VkXG4gKiB0byBkeW5hbWljYWxseSBhcHBlbmQgc29tZSBjb21wb25lbnRzIGxpa2UgbW9kYWxzIG9yIHNwaW5uZXJzL2xvYWRlcnNcbiAqIHNvIHRoYXQgdGhleSBhcmUgbG9jYXRlZCBvbiB0b3Agb2YgdGhlIGVsZW1lbnRzIGhpZXJhcmNoeS5cbiAqIE1vcmUgZGV0YWlscyBhcmUgdW5kZXIgdGhlIGBUaGVtZVNlcnZpY2VgIHNlY3Rpb24uXG4gKlxuICogVGhlIGxheW91dCBjb21wb25lbnQgaXMgYWxzbyByZXNwb25zaWJsZSBmb3IgY2hhbmdpbmcgYXBwbGljYXRpb24gdGhlbWVzLlxuICogSXQgbGlzdGVucyB0byB0aGUgYHRoZW1lQ2hhbmdlYCBldmVudCBhbmQgY2hhbmdlIGEgdGhlbWUgQ1NTIGNsYXNzIGFwcGVuZGVkIHRvIGJvZHkuXG4gKiBCYXNlZCBvbiB0aGUgY2xhc3MgYXBwZW5kZWQsIHNwZWNpZmljIENTUy10aGVtZSBpcyBhcHBsaWVkIHRvIHRoZSBhcHBsaWNhdGlvbi5cbiAqIE1vcmUgZGV0YWlscyBvZiB0aGUgVGhlbWUgU3lzdGVtIGNvdWxkIGJlIGZvdW5kIGhlcmUgW0VuYWJsaW5nIFRoZW1lIFN5c3RlbV0oIy9kb2NzL2NvbmNlcHRzL3RoZW1lLXN5c3RlbSlcbiAqXG4gKiBBIHNpbXBsZSBsYXlvdXQgd2l0aCBmb290ZXI6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShMYXlvdXQgV2l0aCBGb290ZXIsIGxheW91dC9sYXlvdXQtdy1mb290ZXIuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGFzayB0aGUgbGF5b3V0IHRvIGNlbnRlciB0aGUgY29sdW1ucyAobm90aWNlOiB3ZSBhZGRlZCBhIGBjZW50ZXJgIGF0dHJpYnV0ZVxuICogdG8gdGhlIGxheW91dDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItbGF5b3V0IGNlbnRlcj5cbiAqICAgPG5iLWxheW91dC1oZWFkZXI+QXdlc29tZSBDb21wYW55PC9uYi1sYXlvdXQtaGVhZGVyPlxuICpcbiAqICAgPG5iLWxheW91dC1jb2x1bW4+XG4gKiAgICAgSGVsbG8gV29ybGQhXG4gKiAgIDwvbmItbGF5b3V0LWNvbHVtbj5cbiAqXG4gKiAgIDxuYi1sYXlvdXQtZm9vdGVyPkNvbnRhY3QgdXM8L25iLWxheW91dC1mb290ZXI+XG4gKiA8L25iLWxheW91dD5cbiAqIGBgYFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBsYXlvdXQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGxheW91dC10ZXh0LWNvbG9yOlxuICogbGF5b3V0LXRleHQtZm9udC1mYW1pbHk6XG4gKiBsYXlvdXQtdGV4dC1mb250LXNpemU6XG4gKiBsYXlvdXQtdGV4dC1mb250LXdlaWdodDpcbiAqIGxheW91dC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogbGF5b3V0LW1pbi1oZWlnaHQ6XG4gKiBsYXlvdXQtY29udGVudC13aWR0aDpcbiAqIGxheW91dC13aW5kb3ctbW9kZS1taW4td2lkdGg6XG4gKiBsYXlvdXQtd2luZG93LW1vZGUtbWF4LXdpZHRoOlxuICogbGF5b3V0LXdpbmRvdy1tb2RlLWJhY2tncm91bmQtY29sb3I6XG4gKiBsYXlvdXQtd2luZG93LW1vZGUtcGFkZGluZy10b3A6XG4gKiBsYXlvdXQtd2luZG93LXNoYWRvdzpcbiAqIGxheW91dC1wYWRkaW5nOlxuICogbGF5b3V0LW1lZGl1bS1wYWRkaW5nOlxuICogbGF5b3V0LXNtYWxsLXBhZGRpbmc6XG4gKiBsYXlvdXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBsYXlvdXQtc2Nyb2xsYmFyLWNvbG9yOlxuICogbGF5b3V0LXNjcm9sbGJhci13aWR0aDpcbiAqL1xudmFyIE5iTGF5b3V0Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iTGF5b3V0Q29tcG9uZW50KHRoZW1lU2VydmljZSwgc3Bpbm5lclNlcnZpY2UsIGVsZW1lbnRSZWYsIHJlbmRlcmVyLCB3aW5kb3csIGRvY3VtZW50LCBwbGF0Zm9ybUlkLCBsYXlvdXREaXJlY3Rpb25TZXJ2aWNlLCBzY3JvbGxTZXJ2aWNlLCBydWxlclNlcnZpY2UsIHNjcm9sbFRvcCwgb3ZlcmxheUNvbnRhaW5lcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRoZW1lU2VydmljZSA9IHRoZW1lU2VydmljZTtcbiAgICAgICAgdGhpcy5zcGlubmVyU2VydmljZSA9IHNwaW5uZXJTZXJ2aWNlO1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMucGxhdGZvcm1JZCA9IHBsYXRmb3JtSWQ7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uU2VydmljZSA9IGxheW91dERpcmVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZSA9IHNjcm9sbFNlcnZpY2U7XG4gICAgICAgIHRoaXMucnVsZXJTZXJ2aWNlID0gcnVsZXJTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyID0gb3ZlcmxheUNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5zY3JvbGxCbG9ja0NsYXNzID0gJ25iLWdsb2JhbC1zY3JvbGxibG9jayc7XG4gICAgICAgIHRoaXMuaXNTY3JvbGxCbG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2VudGVyVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXN0b3JlU2Nyb2xsVG9wVmFsdWUgPSB0cnVlO1xuICAgICAgICB0aGlzLndpbmRvd01vZGVWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLndpdGhTY3JvbGxWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLndpdGhTdWJoZWFkZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZnRlclZpZXdJbml0JCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyQXNPdmVybGF5Q29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMudGhlbWVTZXJ2aWNlLm9uVGhlbWVDaGFuZ2UoKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAgICAgICAgIHZhciBib2R5ID0gX3RoaXMuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcbiAgICAgICAgICAgIGlmICh0aGVtZS5wcmV2aW91cykge1xuICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKGJvZHksIFwibmItdGhlbWUtXCIgKyB0aGVtZS5wcmV2aW91cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhib2R5LCBcIm5iLXRoZW1lLVwiICsgdGhlbWUubmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5vbkFwcGVuZExheW91dENsYXNzKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIuYWRkQ2xhc3MoX3RoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50aGVtZVNlcnZpY2Uub25SZW1vdmVMYXlvdXRDbGFzcygpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKF90aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3Bpbm5lclNlcnZpY2UucmVnaXN0ZXJMb2FkZXIobmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgX3RoaXMuYWZ0ZXJWaWV3SW5pdCRcbiAgICAgICAgICAgICAgICAucGlwZSh0YWtlVW50aWwoX3RoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKF8pIHsgcmV0dXJuIHJlc29sdmUoKTsgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5zcGlubmVyU2VydmljZS5sb2FkKCk7XG4gICAgICAgIHRoaXMucnVsZXJTZXJ2aWNlLm9uR2V0RGltZW5zaW9ucygpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gX2EubGlzdGVuZXI7XG4gICAgICAgICAgICBsaXN0ZW5lci5uZXh0KF90aGlzLmdldERpbWVuc2lvbnMoKSk7XG4gICAgICAgICAgICBsaXN0ZW5lci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlXG4gICAgICAgICAgICAub25TY3JvbGxhYmxlQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy53aXRoU2Nyb2xsVmFsdWU7IH0pKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoc2Nyb2xsYWJsZSkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbiBjYXNlIHdoZW4gTmVidWxhciBMYXlvdXQgY3VzdG9tIHNjcm9sbCBgd2l0aFNjcm9sbGAgbW9kZSBpcyBlbmFibGVkXG4gICAgICAgICAgICAgKiB3ZSBuZWVkIHRvIGRpc2FibGUgZGVmYXVsdCBDREsgc2Nyb2xsIGJsb2NrZXIgKEBsaW5rIE5iQmxvY2tTY3JvbGxTdHJhdGVneUFkYXB0ZXIpIG9uIEhUTUwgZWxlbWVudFxuICAgICAgICAgICAgICogc28gdGhhdCBpdCB3b24ndCBhZGQgYWRkaXRpb25hbCBwb3NpdGlvbmluZy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKHNjcm9sbGFibGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbmFibGVTY3JvbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmJsb2NrU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgICAgICAgLy8gdHJpZ2dlciBmaXJzdCB0aW1lIHNvIHRoYXQgYWZ0ZXIgdGhlIGNoYW5nZSB3ZSBoYXZlIHRoZSBpbml0aWFsIHZhbHVlXG4gICAgICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5jaGFuZ2VXaW5kb3dXaWR0aCh0aGlzLndpbmRvdy5pbm5lcldpZHRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLCBcImNlbnRlclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIGxheW91dCBjb2x1bW5zIHdpbGwgYmUgY2VudGVyZWQgYWZ0ZXIgc29tZSB3aWR0aFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmNlbnRlclZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwid2luZG93TW9kZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIGxheW91dCBlbnRlcnMgYSAnd2luZG93JyBtb2RlLCB3aGVuIHRoZSBsYXlvdXQgY29udGVudCAoaW5jbHVkaW5nIHNpZGViYXJzIGFuZCBmaXhlZCBoZWFkZXIpXG4gICAgICAgICAqIGJlY29tZXMgY2VudGVyZWQgYnkgd2lkdGggd2l0aCBhIG1hcmdpbiBmcm9tIHRoZSB0b3Agb2YgdGhlIHNjcmVlbiwgbGlrZSBhIGZsb2F0aW5nIHdpbmRvdy5cbiAgICAgICAgICogQXV0b21hdGljYWxseSBlbmFibGVzIGB3aXRoU2Nyb2xsYCBtb2RlLCBhcyBpbiB0aGUgd2luZG93IG1vZGUgc2Nyb2xsIG11c3QgYmUgaW5zaWRlIHRoZSBsYXlvdXQgYW5kIGNhbm5vdCBiZSBvblxuICAgICAgICAgKiB3aW5kb3cuIChUT0RPOiBjaGVjayB0aGlzKVxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLndpbmRvd01vZGVWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICAgICAgdGhpcy53aXRoU2Nyb2xsID0gdGhpcy53aW5kb3dNb2RlVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwid2l0aFNjcm9sbFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdG8gbW92ZSB0aGUgc2Nyb2xsYmFycyB0byBsYXlvdXQgb3IgbGVhdmUgaXQgYXQgdGhlIGJvZHkgbGV2ZWwuXG4gICAgICAgICAqIEF1dG9tYXRpY2FsbHkgc2V0IHRvIHRydWUgd2hlbiBgd2luZG93TW9kZWAgaXMgZW5hYmxlZC5cbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSB2YWxcbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy53aXRoU2Nyb2xsVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgICAgIC8vIFRPRE86IGlzIHRoaXMgdGhlIGJlc3Qgd2F5IG9mIGRvaW5nIGl0PyBhcyB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byBib2R5IGZyb20gdGhlbWUgc3R5bGVzXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgZTJlIHRlc3RcbiAgICAgICAgICAgIHZhciBib2R5ID0gdGhpcy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xuICAgICAgICAgICAgaWYgKHRoaXMud2l0aFNjcm9sbFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShib2R5LCAnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGJvZHksICdvdmVyZmxvdycsICdpbml0aWFsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVzdG9yZVNjcm9sbFRvcFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXN0b3JlcyBzY3JvbGwgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZSBhZnRlciBuYXZpZ2F0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZVNjcm9sbFRvcFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iTGF5b3V0Q29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZS5vbkdldFBvc2l0aW9uKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYS5saXN0ZW5lcjtcbiAgICAgICAgICAgIGxpc3RlbmVyLm5leHQoX3RoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKSk7XG4gICAgICAgICAgICBsaXN0ZW5lci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY3JvbGxUb3Auc2hvdWxkUmVzdG9yZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucmVzdG9yZVNjcm9sbFRvcFZhbHVlOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zY3JvbGwoMCwgMCk7IH0pO1xuICAgICAgICB0aGlzLmxheW91dERpcmVjdGlvblNlcnZpY2Uub25EaXJlY3Rpb25DaGFuZ2UoKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoZGlyZWN0aW9uKSB7IHJldHVybiBfdGhpcy5kb2N1bWVudC5kaXIgPSBkaXJlY3Rpb247IH0pO1xuICAgICAgICB0aGlzLnNjcm9sbFNlcnZpY2Uub25NYW51YWxTY3JvbGwoKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciB4ID0gX2EueCwgeSA9IF9hLnk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2Nyb2xsKHgsIHkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZnRlclZpZXdJbml0JC5uZXh0KHRydWUpO1xuICAgIH07XG4gICAgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBc092ZXJsYXlDb250YWluZXIoKTtcbiAgICB9O1xuICAgIE5iTGF5b3V0Q29tcG9uZW50LnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlLmZpcmVTY3JvbGxDaGFuZ2UoJGV2ZW50KTtcbiAgICB9O1xuICAgIE5iTGF5b3V0Q29tcG9uZW50LnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5jaGFuZ2VXaW5kb3dXaWR0aChldmVudC50YXJnZXQuaW5uZXJXaWR0aCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNjcm9sbCBhbmQgY2xpZW50IGhlaWdodC93aWR0aFxuICAgICAqXG4gICAgICogRGVwZW5kaW5nIG9uIHRoZSBjdXJyZW50IHNjcm9sbCBtb2RlIChgd2l0aFNjcm9sbD10cnVlYCkgcmV0dXJucyBzaXplcyBmcm9tIHRoZSBib2R5IGVsZW1lbnRcbiAgICAgKiBvciBmcm9tIHRoZSBgLnNjcm9sbGFibGUtY29udGFpbmVyYFxuICAgICAqIEByZXR1cm5zIHtOYkxheW91dERpbWVuc2lvbnN9XG4gICAgICovXG4gICAgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLmdldERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjbGllbnRXaWR0aCwgY2xpZW50SGVpZ2h0LCBzY3JvbGxXaWR0aCwgc2Nyb2xsSGVpZ2h0ID0gMDtcbiAgICAgICAgaWYgKHRoaXMud2l0aFNjcm9sbFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5zY3JvbGxhYmxlQ29udGFpbmVyUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBjbGllbnRXaWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICBzY3JvbGxXaWR0aCA9IGNvbnRhaW5lci5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IGNvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLmRvY3VtZW50LCBkb2N1bWVudEVsZW1lbnQgPSBfYS5kb2N1bWVudEVsZW1lbnQsIGJvZHkgPSBfYS5ib2R5O1xuICAgICAgICAgICAgY2xpZW50V2lkdGggPSBkb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgYm9keS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgYm9keS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICBzY3JvbGxXaWR0aCA9IGRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCB8fCBib2R5LnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCB8fCBib2R5LnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xpZW50V2lkdGg6IGNsaWVudFdpZHRoLFxuICAgICAgICAgICAgY2xpZW50SGVpZ2h0OiBjbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBzY3JvbGxXaWR0aDogc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICBzY3JvbGxIZWlnaHQ6IHNjcm9sbEhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgc2Nyb2xsIHBvc2l0aW9uIG9mIGN1cnJlbnQgc2Nyb2xsIGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIElmIGB3aXRoU2Nyb2xsYCA9IHRydWUsIHJldHVybnMgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBgLnNjcm9sbGFibGUtY29udGFpbmVyYCBlbGVtZW50LFxuICAgICAqIG90aGVyd2lzZSAtIG9mIHRoZSBzY3JvbGxhYmxlIGVsZW1lbnQgb2YgdGhlIHdpbmRvdyAod2hpY2ggbWF5IGJlIGRpZmZlcmVudCBkZXBlbmRpbmcgb2YgYSBicm93c2VyKVxuICAgICAqXG4gICAgICogQHJldHVybnMge05iU2Nyb2xsUG9zaXRpb259XG4gICAgICovXG4gICAgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLmdldFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy53aXRoU2Nyb2xsVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnNjcm9sbGFibGVDb250YWluZXJSZWYubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IGNvbnRhaW5lci5zY3JvbGxMZWZ0LCB5OiBjb250YWluZXIuc2Nyb2xsVG9wIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRvY3VtZW50UmVjdCA9IHRoaXMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgeCA9IC1kb2N1bWVudFJlY3QubGVmdCB8fCB0aGlzLmRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCB0aGlzLndpbmRvdy5zY3JvbGxYIHx8XG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IDA7XG4gICAgICAgIHZhciB5ID0gLWRvY3VtZW50UmVjdC50b3AgfHwgdGhpcy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCB0aGlzLndpbmRvdy5zY3JvbGxZIHx8XG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgMDtcbiAgICAgICAgcmV0dXJuIHsgeDogeCwgeTogeSB9O1xuICAgIH07XG4gICAgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLnJlZ2lzdGVyQXNPdmVybGF5Q29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5vdmVybGF5Q29udGFpbmVyLnNldENvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyLnNldENvbnRhaW5lcih0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iTGF5b3V0Q29tcG9uZW50LnByb3RvdHlwZS51bnJlZ2lzdGVyQXNPdmVybGF5Q29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5vdmVybGF5Q29udGFpbmVyLmNsZWFyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXIuY2xlYXJDb250YWluZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLnNjcm9sbCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIGlmICh4ID09PSB2b2lkIDApIHsgeCA9IG51bGw7IH1cbiAgICAgICAgaWYgKHkgPT09IHZvaWQgMCkgeyB5ID0gbnVsbDsgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLmdldFNjcm9sbFBvc2l0aW9uKCksIGN1cnJlbnRYID0gX2EueCwgY3VycmVudFkgPSBfYS55O1xuICAgICAgICB4ID0geCA9PSBudWxsID8gY3VycmVudFggOiB4O1xuICAgICAgICB5ID0geSA9PSBudWxsID8gY3VycmVudFkgOiB5O1xuICAgICAgICBpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy53aXRoU2Nyb2xsVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxhYmxlID0gdGhpcy5zY3JvbGxhYmxlQ29udGFpbmVyUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsYWJsZS5zY3JvbGxUbykge1xuICAgICAgICAgICAgICAgIHNjcm9sbGFibGUuc2Nyb2xsVG8oeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxhYmxlLnNjcm9sbExlZnQgPSB4O1xuICAgICAgICAgICAgICAgIHNjcm9sbGFibGUuc2Nyb2xsVG9wID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud2luZG93LnNjcm9sbFRvKHgsIHkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBUT0RPOiBFeHRyYWN0IGludG8gYmxvY2sgc2Nyb2xsIHN0cmF0ZWd5XG4gICAgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLmJsb2NrU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1Njcm9sbEJsb2NrZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU2Nyb2xsQmxvY2tlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXMuc2Nyb2xsQmxvY2tDbGFzcyk7XG4gICAgICAgIHZhciBzY3JvbGxhYmxlQ29udGFpbmVyRWxlbWVudCA9IHRoaXMuc2Nyb2xsYWJsZUNvbnRhaW5lclJlZi5uYXRpdmVFbGVtZW50O1xuICAgICAgICB2YXIgbGF5b3V0RWxlbWVudCA9IHRoaXMubGF5b3V0Q29udGFpbmVyUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHZhciBsYXlvdXRXaXRoU2Nyb2xsV2lkdGggPSBsYXlvdXRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICB0aGlzLnNjcm9sbGFibGVDb250YWluZXJPdmVyZmxvd09sZFZhbHVlID0gc2Nyb2xsYWJsZUNvbnRhaW5lckVsZW1lbnQuc3R5bGUub3ZlcmZsb3c7XG4gICAgICAgIHNjcm9sbGFibGVDb250YWluZXJFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIHZhciBsYXlvdXRXaXRob3V0U2Nyb2xsV2lkdGggPSBsYXlvdXRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSBsYXlvdXRXaXRob3V0U2Nyb2xsV2lkdGggLSBsYXlvdXRXaXRoU2Nyb2xsV2lkdGg7XG4gICAgICAgIGlmICghc2Nyb2xsV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxheW91dFBhZGRpbmdPbGRWYWx1ZSA9IHtcbiAgICAgICAgICAgIGxlZnQ6IGxheW91dEVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQsXG4gICAgICAgICAgICByaWdodDogbGF5b3V0RWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmxheW91dERpcmVjdGlvblNlcnZpY2UuaXNMdHIoKSkge1xuICAgICAgICAgICAgbGF5b3V0RWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBzY3JvbGxXaWR0aCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxheW91dEVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSBzY3JvbGxXaWR0aCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLmVuYWJsZVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTY3JvbGxCbG9ja2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU2Nyb2xsQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy5zY3JvbGxCbG9ja0NsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYWJsZUNvbnRhaW5lclJlZi5uYXRpdmVFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gdGhpcy5zY3JvbGxhYmxlQ29udGFpbmVyT3ZlcmZsb3dPbGRWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxheW91dFBhZGRpbmdPbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXlvdXRFbGVtZW50ID0gdGhpcy5sYXlvdXRDb250YWluZXJSZWYubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgICAgICBsYXlvdXRFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gdGhpcy5sYXlvdXRQYWRkaW5nT2xkVmFsdWUubGVmdDtcbiAgICAgICAgICAgICAgICBsYXlvdXRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IHRoaXMubGF5b3V0UGFkZGluZ09sZFZhbHVlLnJpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0UGFkZGluZ09sZFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy53aW5kb3ctbW9kZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwid2luZG93TW9kZVZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy53aXRoLXNjcm9sbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwid2l0aFNjcm9sbFZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy53aXRoLXN1YmhlYWRlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwid2l0aFN1YmhlYWRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLCBcImNlbnRlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iTGF5b3V0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3aW5kb3dNb2RlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLCBcIndpdGhTY3JvbGxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVzdG9yZVNjcm9sbFRvcFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgVmlld0NoaWxkKCdsYXlvdXRUb3BEeW5hbWljQXJlYScsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFZpZXdDb250YWluZXJSZWYpXG4gICAgXSwgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLCBcInZlcnlUb3BSZWZcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgVmlld0NoaWxkKCdzY3JvbGxhYmxlQ29udGFpbmVyJywgeyByZWFkOiBFbGVtZW50UmVmIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbiAgICBdLCBOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwic2Nyb2xsYWJsZUNvbnRhaW5lclJlZlwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBWaWV3Q2hpbGQoJ2xheW91dENvbnRhaW5lcicsIHsgcmVhZDogRWxlbWVudFJlZiB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG4gICAgXSwgTmJMYXlvdXRDb21wb25lbnQucHJvdG90eXBlLCBcImxheW91dENvbnRhaW5lclJlZlwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpzY3JvbGwnLCBbJyRldmVudCddKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkxheW91dENvbXBvbmVudC5wcm90b3R5cGUsIFwib25TY3JvbGxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFsnJGV2ZW50J10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iTGF5b3V0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvblJlc2l6ZVwiLCBudWxsKTtcbiAgICBOYkxheW91dENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1sYXlvdXQnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcInNjcm9sbGFibGUtY29udGFpbmVyXFxcIiAjc2Nyb2xsYWJsZUNvbnRhaW5lciAoc2Nyb2xsKT1cXFwib25TY3JvbGwoJGV2ZW50KVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwibGF5b3V0XFxcIiAjbGF5b3V0Q29udGFpbmVyPlxcbiAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1sYXlvdXQtaGVhZGVyOm5vdChbc3ViaGVhZGVyXSlcXFwiPjwvbmctY29udGVudD5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImxheW91dC1jb250YWluZXJcXFwiPlxcbiAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLXNpZGViYXJcXFwiPjwvbmctY29udGVudD5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCIgW2NsYXNzLmNlbnRlcl09XFxcImNlbnRlclZhbHVlXFxcIj5cXG4gICAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLWxheW91dC1oZWFkZXJbc3ViaGVhZGVyXVxcXCI+PC9uZy1jb250ZW50PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbHVtbnNcXFwiPlxcbiAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1sYXlvdXQtY29sdW1uXFxcIj48L25nLWNvbnRlbnQ+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1sYXlvdXQtZm9vdGVyXFxcIj48L25nLWNvbnRlbnQ+XFxuICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0ey13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWR9W2Rpcj1sdHJdIDpob3N0e3RleHQtYWxpZ246bGVmdH1bZGlyPXJ0bF0gOmhvc3R7dGV4dC1hbGlnbjpyaWdodH06aG9zdCAubGF5b3V0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Omhvc3QgOjpuZy1kZWVwIG5iLWxheW91dC1oZWFkZXJ7ZGlzcGxheTpibG9ja306aG9zdCA6Om5nLWRlZXAgbmItbGF5b3V0LWhlYWRlciBuYXZ7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2Rpc3BsYXk6ZmxleH06aG9zdCA6Om5nLWRlZXAgbmItbGF5b3V0LWhlYWRlci5maXhlZHtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDt6LWluZGV4OjEwNDB9Omhvc3QgLmxheW91dC1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2ZsZXg6MTstbXMtZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpyb3d9W2Rpcj1sdHJdIDpob3N0IC5sYXlvdXQtY29udGFpbmVyIDo6bmctZGVlcCBuYi1zaWRlYmFyLmxlZnR7b3JkZXI6MH1bZGlyPXJ0bF0gOmhvc3QgLmxheW91dC1jb250YWluZXIgOjpuZy1kZWVwIG5iLXNpZGViYXIubGVmdHtvcmRlcjoyfVtkaXI9bHRyXSA6aG9zdCAubGF5b3V0LWNvbnRhaW5lciA6Om5nLWRlZXAgbmItc2lkZWJhci5yaWdodHtvcmRlcjoyfVtkaXI9cnRsXSA6aG9zdCAubGF5b3V0LWNvbnRhaW5lciA6Om5nLWRlZXAgbmItc2lkZWJhci5yaWdodHtvcmRlcjowfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIDo6bmctZGVlcCBuYi1zaWRlYmFyLmVuZHtvcmRlcjoyfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIDo6bmctZGVlcCBuYi1zaWRlYmFyIC5maXhlZHtwb3NpdGlvbjpmaXhlZDt3aWR0aDoxMDAlO292ZXJmbG93LXk6YXV0bztoZWlnaHQ6MTAwJX06aG9zdCAubGF5b3V0LWNvbnRhaW5lciAuY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleDoxOy1tcy1mbGV4OjEgMSBhdXRvO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjttaW4td2lkdGg6MH06aG9zdCAubGF5b3V0LWNvbnRhaW5lciAuY29udGVudC5jZW50ZXJ7bWF4LXdpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0b306aG9zdCAubGF5b3V0LWNvbnRhaW5lciAuY29udGVudCAuY29sdW1uc3tkaXNwbGF5OmZsZXg7ZmxleDoxOy1tcy1mbGV4OjEgMSBhdXRvO2ZsZXgtZGlyZWN0aW9uOnJvdzt3aWR0aDoxMDAlfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIC5jb250ZW50IC5jb2x1bW5zIDo6bmctZGVlcCBuYi1sYXlvdXQtY29sdW1ue29yZGVyOjE7ZmxleDoxIDA7bWluLXdpZHRoOjB9W2Rpcj1sdHJdIDpob3N0IC5sYXlvdXQtY29udGFpbmVyIC5jb250ZW50IC5jb2x1bW5zIDo6bmctZGVlcCBuYi1sYXlvdXQtY29sdW1uLmxlZnR7b3JkZXI6MH1bZGlyPXJ0bF0gOmhvc3QgLmxheW91dC1jb250YWluZXIgLmNvbnRlbnQgLmNvbHVtbnMgOjpuZy1kZWVwIG5iLWxheW91dC1jb2x1bW4ubGVmdHtvcmRlcjoyfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIC5jb250ZW50IC5jb2x1bW5zIDo6bmctZGVlcCBuYi1sYXlvdXQtY29sdW1uLnN0YXJ0e29yZGVyOjB9Omhvc3QgLmxheW91dC1jb250YWluZXIgLmNvbnRlbnQgOjpuZy1kZWVwIG5iLWxheW91dC1mb290ZXJ7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOmF1dG99Omhvc3QgLmxheW91dC1jb250YWluZXIgLmNvbnRlbnQgOjpuZy1kZWVwIG5iLWxheW91dC1mb290ZXIgbmF2e2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpmbGV4fVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSg0LCBJbmplY3QoTkJfV0lORE9XKSksXG4gICAgICAgIF9fcGFyYW0oNSwgSW5qZWN0KE5CX0RPQ1VNRU5UKSksXG4gICAgICAgIF9fcGFyYW0oNiwgSW5qZWN0KFBMQVRGT1JNX0lEKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJUaGVtZVNlcnZpY2UsXG4gICAgICAgICAgICBOYlNwaW5uZXJTZXJ2aWNlLFxuICAgICAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgICAgIFJlbmRlcmVyMiwgT2JqZWN0LCBPYmplY3QsIE9iamVjdCxcbiAgICAgICAgICAgIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSxcbiAgICAgICAgICAgIE5iTGF5b3V0U2Nyb2xsU2VydmljZSxcbiAgICAgICAgICAgIE5iTGF5b3V0UnVsZXJTZXJ2aWNlLFxuICAgICAgICAgICAgTmJSZXN0b3JlU2Nyb2xsVG9wSGVscGVyLFxuICAgICAgICAgICAgTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlcl0pXG4gICAgXSwgTmJMYXlvdXRDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkxheW91dENvbXBvbmVudDtcbn0oKSk7XG4vKipcbiAqIEEgY29udGFpbmVyIGNvbXBvbmVudCB3aGljaCBkZXRlcm1pbmVzIGEgY29udGVudCBwb3NpdGlvbiBpbnNpZGUgb2YgdGhlIGxheW91dC5cbiAqIFRoZSBsYXlvdXQgY291bGQgY29udGFpbiB1bmxpbWl0ZWQgY29sdW1ucyAobm90IGluY2x1ZGluZyB0aGUgc2lkZWJhcnMpLlxuICpcbiAqIEJ5IGRlZmF1bHQgdGhlIGNvbHVtbnMgYXJlIG9yZGVyZWQgZnJvbSB0aGUgbGVmdCB0byB0aGUgcmlnaHQsXG4gKiBidXQgaXQncyBhbHNvIHBvc3NpYmxlIHRvIG92ZXJ3cml0ZSB0aGlzIGJlaGF2aW9yIGJ5IHNldHRpbmcgYSBgbGVmdGAgYXR0cmlidXRlIHRvIHRoZSBjb2x1bW4sXG4gKiBtb3ZpbmcgaXQgdG8gdGhlIHZlcnkgZmlyc3QgcG9zaXRpb246XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShDb2x1bW4gTGVmdCwgbGF5b3V0L2xheW91dC1jb2x1bW4tbGVmdC5jb21wb25lbnQpXG4gKi9cbnZhciBOYkxheW91dENvbHVtbkNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkxheW91dENvbHVtbkNvbXBvbmVudCgpIHtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iTGF5b3V0Q29sdW1uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsZWZ0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1vdmUgdGhlIGNvbHVtbiB0byB0aGUgdmVyeSBsZWZ0IHBvc2l0aW9uIGluIHRoZSBsYXlvdXQuXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMubGVmdFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iTGF5b3V0Q29sdW1uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGFydFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYWtlIGNvbHVtbiBmaXJzdCBpbiB0aGUgbGF5b3V0LlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgICAgIHRoaXMubGVmdFZhbHVlID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubGVmdCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkxheW91dENvbHVtbkNvbXBvbmVudC5wcm90b3R5cGUsIFwibGVmdFZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGFydCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkxheW91dENvbHVtbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhcnRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJMYXlvdXRDb2x1bW5Db21wb25lbnQucHJvdG90eXBlLCBcImxlZnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkxheW91dENvbHVtbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhcnRcIiwgbnVsbCk7XG4gICAgTmJMYXlvdXRDb2x1bW5Db21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItbGF5b3V0LWNvbHVtbicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYkxheW91dENvbHVtbkNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iTGF5b3V0Q29sdW1uQ29tcG9uZW50O1xufSgpKTtcbi8qKlxuICogUGFnZSBoZWFkZXIgY29tcG9uZW50LlxuICogTG9jYXRlZCBvbiB0b3Agb2YgdGhlIHBhZ2UgYWJvdmUgdGhlIGxheW91dCBjb2x1bW5zIGFuZCBzaWRlYmFycy5cbiAqIENvdWxkIGJlIG1hZGUgYGZpeGVkYCBieSBzZXR0aW5nIHRoZSBjb3JyZXNwb25kaW5nIHByb3BlcnR5LiBJbiB0aGUgZml4ZWQgbW9kZSB0aGUgaGVhZGVyIGJlY29tZXNcbiAqIHN0aWNreSB0byB0aGUgdG9wIG9mIHRoZSBuYi1sYXlvdXQgKHRvIG9mIHRoZSBwYWdlKS4gSGVyZSdzIGFuIGV4YW1wbGU6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShGaXhlZCBIZWFkZXIsIGxheW91dC9sYXlvdXQtZml4ZWQtaGVhZGVyLmNvbXBvbmVudClcbiAqXG4gKiBJbiBhIHBhaXIgd2l0aCBzaWRlYmFyIGl0IGlzIHBvc3NpYmxlIHRvIHNldHVwIGEgY29uZmlndXJhdGlvbiB3aGVuIGhlYWRlciBpcyBwbGFjZWQgb24gYSBzaWRlIG9mIHRoZSBzaWRlYmFyXG4gKiBhbmQgbm90IG9uIHRvcCBvZiBpdC4gVG8gYWNoaWV2ZSB0aGlzIHNpbXBseSBwdXQgYSBgc3ViaGVhZGVyYCBwcm9wZXJ0eSB0byB0aGUgaGVhZGVyIGxpa2UgdGhpczpcbiAqIGBgYGh0bWxcbiAqIDxuYi1sYXlvdXQtaGVhZGVyIHN1YmhlYWRlcj48L25iLWxheW91dC1oZWFkZXI+XG4gKiBgYGBcbiAqIEBzdGFja2VkLWV4YW1wbGUoU3ViaGVhZGVyLCBsYXlvdXQvbGF5b3V0LXNpZGViYXItc3ViaGVhZGVyLmNvbXBvbmVudClcbiAqIE5vdGUgdGhhdCBpbiBzdWNoIGNvbmZpZ3VyYXRpb24gc2lkZWJhciBzaGFkb3cgaXMgcmVtb3ZlZCBhbmQgaGVhZGVyIGNhbm5vdCBiZSBtYWtlIGBmaXhlZGAuXG4gKlxuICogU2FtZSB3YXkgeW91IGNhbiBwdXQgYm90aCBgZml4ZWRgIGFuZCBgY2xpcHBlZGAgaGVhZGVycyBhZGRpbmcgY3JlYXRpbmcgYSBzdWItaGVhZGVyIGZvciB5b3VyIGFwcDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFN1YmhlYWRlciwgbGF5b3V0L2xheW91dC1zdWJoZWFkZXIuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBoZWFkZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGhlYWRlci10ZXh0LWNvbG9yOlxuICogaGVhZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBoZWFkZXItdGV4dC1mb250LXNpemU6XG4gKiBoZWFkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGhlYWRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogaGVhZGVyLWhlaWdodDpcbiAqIGhlYWRlci1wYWRkaW5nOlxuICogaGVhZGVyLXNoYWRvdzpcbiAqL1xudmFyIE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50KGxheW91dCkge1xuICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaXhlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYWtlcyB0aGUgaGVhZGVyIHN0aWNreSB0byB0aGUgdG9wIG9mIHRoZSBuYi1sYXlvdXQuXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuZml4ZWRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJMYXlvdXRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcInN1YmhlYWRlclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQbGFjZXMgaGVhZGVyIG9uIGEgc2lkZSBvZiB0aGUgc2lkZWJhciwgYW5kIG5vdCBhYm92ZS5cbiAgICAgICAgICogRGlzYWJsZXMgZml4ZWQgbW9kZSBmb3IgdGhpcyBoZWFkZXIgYW5kIHJlbW92ZSBhIHNoYWRvdyBmcm9tIHRoZSBzaWRlYmFyLlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLnN1YmhlYWRlclZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgICAgICB0aGlzLmZpeGVkVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0LndpdGhTdWJoZWFkZXIgPSB0aGlzLnN1YmhlYWRlclZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmZpeGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaXhlZFZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdWJoZWFkZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJMYXlvdXRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcInN1YmhlYWRlclZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkxheW91dEhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZml4ZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkxheW91dEhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3ViaGVhZGVyXCIsIG51bGwpO1xuICAgIE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWxheW91dC1oZWFkZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuYXYgW2NsYXNzLmZpeGVkXT1cXFwiZml4ZWRWYWx1ZVxcXCI+XFxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgICA8L25hdj5cXG4gIFwiXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iTGF5b3V0Q29tcG9uZW50XSlcbiAgICBdLCBOYkxheW91dEhlYWRlckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50O1xufSgpKTtcbi8qKlxuICogUGFnZSBmb290ZXIuXG4gKiBMb2NhdGVkIHVuZGVyIHRoZSBuYi1sYXlvdXQgY29udGVudCAoc3BlY2lmaWNhbGx5LCB1bmRlciB0aGUgY29sdW1ucykuXG4gKiBDb3VsZCBiZSBtYWRlIGBmaXhlZGAsIGJlY29taW5nIHN0aWNreSB0byB0aGUgYm90dG9tIG9mIHRoZSB2aWV3IHBvcnQgKHdpbmRvdykuXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGZvb3Rlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogZm9vdGVyLXRleHQtY29sb3I6XG4gKiBmb290ZXItdGV4dC1mb250LWZhbWlseTpcbiAqIGZvb3Rlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGZvb3Rlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogZm9vdGVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBmb290ZXItdGV4dC1oaWdobGlnaHQtY29sb3I6XG4gKiBmb290ZXItaGVpZ2h0OlxuICogZm9vdGVyLXBhZGRpbmc6XG4gKiBmb290ZXItZGl2aWRlci1jb2xvcjpcbiAqIGZvb3Rlci1kaXZpZGVyLXN0eWxlOlxuICogZm9vdGVyLWRpdmlkZXItd2lkdGg6XG4gKiBmb290ZXItc2hhZG93OlxuICovXG52YXIgTmJMYXlvdXRGb290ZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJMYXlvdXRGb290ZXJDb21wb25lbnQoKSB7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkxheW91dEZvb3RlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZml4ZWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogTWFrZXMgdGhlIGZvb3RlciBzdGlja3kgdG8gdGhlIGJvdHRvbSBvZiB0aGUgd2luZG93LlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmZpeGVkVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5maXhlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkxheW91dEZvb3RlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZml4ZWRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJMYXlvdXRGb290ZXJDb21wb25lbnQucHJvdG90eXBlLCBcImZpeGVkXCIsIG51bGwpO1xuICAgIE5iTGF5b3V0Rm9vdGVyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWxheW91dC1mb290ZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuYXYgW2NsYXNzLmZpeGVkXT1cXFwiZml4ZWRWYWx1ZVxcXCI+XFxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgICA8L25hdj5cXG4gIFwiXG4gICAgICAgIH0pXG4gICAgXSwgTmJMYXlvdXRGb290ZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkxheW91dEZvb3RlckNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9MQVlPVVRfQ09NUE9ORU5UUyA9IFtcbiAgICBOYkxheW91dENvbXBvbmVudCxcbiAgICBOYkxheW91dENvbHVtbkNvbXBvbmVudCxcbiAgICBOYkxheW91dEZvb3RlckNvbXBvbmVudCxcbiAgICBOYkxheW91dEhlYWRlckNvbXBvbmVudCxcbl07XG52YXIgTmJMYXlvdXRNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJMYXlvdXRNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iTGF5b3V0TW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IF9fc3ByZWFkQXJyYXlzKE5CX0xBWU9VVF9DT01QT05FTlRTKSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlcixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHBvcnRzOiBfX3NwcmVhZEFycmF5cyhOQl9MQVlPVVRfQ09NUE9ORU5UUyksXG4gICAgICAgIH0pXG4gICAgXSwgTmJMYXlvdXRNb2R1bGUpO1xuICAgIHJldHVybiBOYkxheW91dE1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBpdGVtQ2xpY2skID0gbmV3IFN1YmplY3QoKTtcbnZhciBhZGRJdGVtcyQgPSBuZXcgUmVwbGF5U3ViamVjdCgxKTtcbnZhciBuYXZpZ2F0ZUhvbWUkID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG52YXIgZ2V0U2VsZWN0ZWRJdGVtJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xudmFyIGl0ZW1TZWxlY3QkID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG52YXIgaXRlbUhvdmVyJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xudmFyIHN1Ym1lbnVUb2dnbGUkID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG52YXIgY29sbGFwc2VBbGwkID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG4vLyBUT0RPOiBjaGVjayBpZiB3ZSBuZWVkIGJvdGggVVJMIGFuZCBMSU5LXG4vKipcbiAqXG4gKlxuICogTWVudSBJdGVtIG9wdGlvbnMgZXhhbXBsZVxuICogQHN0YWNrZWQtZXhhbXBsZShNZW51IExpbmsgUGFyYW1ldGVycywgbWVudS9tZW51LWxpbmstcGFyYW1zLmNvbXBvbmVudClcbiAqXG4gKlxuICovXG52YXIgTmJNZW51SXRlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk1lbnVJdGVtKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSXRlbSBpcyBzZWxlY3RlZCB3aGVuIHBhcnRseSBvciBmdWxseSBlcXVhbCB0byB0aGUgY3VycmVudCB1cmxcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGF0aE1hdGNoID0gJ2Z1bGwnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBpdGVtIHBhcmVudHMgaW4gdG9wLWRvd24gb3JkZXJcbiAgICAgKi9cbiAgICBOYk1lbnVJdGVtLmdldFBhcmVudHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xuICAgICAgICB2YXIgcGFyZW50ID0gaXRlbS5wYXJlbnQ7XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudHMudW5zaGlmdChwYXJlbnQpO1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9O1xuICAgIE5iTWVudUl0ZW0uaXNQYXJlbnQgPSBmdW5jdGlvbiAoaXRlbSwgcG9zc2libGVDaGlsZCkge1xuICAgICAgICByZXR1cm4gcG9zc2libGVDaGlsZC5wYXJlbnRcbiAgICAgICAgICAgID8gcG9zc2libGVDaGlsZC5wYXJlbnQgPT09IGl0ZW0gfHwgdGhpcy5pc1BhcmVudChpdGVtLCBwb3NzaWJsZUNoaWxkLnBhcmVudClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgfTtcbiAgICByZXR1cm4gTmJNZW51SXRlbTtcbn0oKSk7XG4vLyBUT0RPOiBtYXAgc2VsZWN0IGV2ZW50cyB0byByb3V0ZXIgY2hhbmdlIGV2ZW50c1xuLy8gVE9ETzogcmV2aWV3IHRoZSBpbnRlcmZhY2Vcbi8qKlxuICpcbiAqXG4gKiBNZW51IFNlcnZpY2UuIEFsbG93cyB5b3UgdG8gbGlzdGVuIHRvIG1lbnUgZXZlbnRzLCBvciB0byBpbnRlcmFjdCB3aXRoIGEgbWVudS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoTWVudSBTZXJ2aWNlLCBtZW51L21lbnUtc2VydmljZS5jb21wb25lbnQpXG4gKlxuICpcbiAqL1xudmFyIE5iTWVudVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJNZW51U2VydmljZSgpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGl0ZW1zIHRvIHRoZSBlbmQgb2YgdGhlIG1lbnUgaXRlbXMgbGlzdFxuICAgICAqIEBwYXJhbSB7TGlzdDxOYk1lbnVJdGVtPn0gaXRlbXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAgICovXG4gICAgTmJNZW51U2VydmljZS5wcm90b3R5cGUuYWRkSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIHRhZykge1xuICAgICAgICBhZGRJdGVtcyQubmV4dCh7IHRhZzogdGFnLCBpdGVtczogaXRlbXMgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb2xsYXBzZXMgYWxsIG1lbnUgaXRlbXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAgICovXG4gICAgTmJNZW51U2VydmljZS5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAodGFnKSB7XG4gICAgICAgIGNvbGxhcHNlQWxsJC5uZXh0KHsgdGFnOiB0YWcgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOYXZpZ2F0ZSB0byB0aGUgaG9tZSBtZW51IGl0ZW1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAgICovXG4gICAgTmJNZW51U2VydmljZS5wcm90b3R5cGUubmF2aWdhdGVIb21lID0gZnVuY3Rpb24gKHRhZykge1xuICAgICAgICBuYXZpZ2F0ZUhvbWUkLm5leHQoeyB0YWc6IHRhZyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW0uIFdvbid0IHN1YnNjcmliZSB0byB0aGUgZnV0dXJlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAgICogQHJldHVybnMge09ic2VydmFibGU8e3RhZzogc3RyaW5nOyBpdGVtOiBOYk1lbnVJdGVtfT59XG4gICAgICovXG4gICAgTmJNZW51U2VydmljZS5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRJdGVtID0gZnVuY3Rpb24gKHRhZykge1xuICAgICAgICB2YXIgbGlzdGVuZXIgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KG51bGwpO1xuICAgICAgICBnZXRTZWxlY3RlZEl0ZW0kLm5leHQoeyB0YWc6IHRhZywgbGlzdGVuZXI6IGxpc3RlbmVyIH0pO1xuICAgICAgICByZXR1cm4gbGlzdGVuZXIuYXNPYnNlcnZhYmxlKCk7XG4gICAgfTtcbiAgICBOYk1lbnVTZXJ2aWNlLnByb3RvdHlwZS5vbkl0ZW1DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1DbGljayQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIE5iTWVudVNlcnZpY2UucHJvdG90eXBlLm9uSXRlbVNlbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1TZWxlY3QkLnBpcGUoc2hhcmUoKSk7XG4gICAgfTtcbiAgICBOYk1lbnVTZXJ2aWNlLnByb3RvdHlwZS5vbkl0ZW1Ib3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1Ib3ZlciQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIE5iTWVudVNlcnZpY2UucHJvdG90eXBlLm9uU3VibWVudVRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN1Ym1lbnVUb2dnbGUkLnBpcGUoc2hhcmUoKSk7XG4gICAgfTtcbiAgICBOYk1lbnVTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKVxuICAgIF0sIE5iTWVudVNlcnZpY2UpO1xuICAgIHJldHVybiBOYk1lbnVTZXJ2aWNlO1xufSgpKTtcbnZhciBOYk1lbnVJbnRlcm5hbFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJNZW51SW50ZXJuYWxTZXJ2aWNlKGxvY2F0aW9uKSB7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICB9XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5wcmVwYXJlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGRlZmF1bHRJdGVtID0gbmV3IE5iTWVudUl0ZW0oKTtcbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgX3RoaXMuYXBwbHlEZWZhdWx0cyhpLCBkZWZhdWx0SXRlbSk7XG4gICAgICAgICAgICBfdGhpcy5zZXRQYXJlbnQoaSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5zZWxlY3RGcm9tVXJsID0gZnVuY3Rpb24gKGl0ZW1zLCB0YWcsIGNvbGxhcHNlT3RoZXIpIHtcbiAgICAgICAgaWYgKGNvbGxhcHNlT3RoZXIgPT09IHZvaWQgMCkgeyBjb2xsYXBzZU90aGVyID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIHNlbGVjdGVkSXRlbSA9IHRoaXMuZmluZEl0ZW1CeVVybChpdGVtcyk7XG4gICAgICAgIGlmIChzZWxlY3RlZEl0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbShzZWxlY3RlZEl0ZW0sIGl0ZW1zLCBjb2xsYXBzZU90aGVyLCB0YWcpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYk1lbnVJbnRlcm5hbFNlcnZpY2UucHJvdG90eXBlLnNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSwgaXRlbXMsIGNvbGxhcHNlT3RoZXIsIHRhZykge1xuICAgICAgICBpZiAoY29sbGFwc2VPdGhlciA9PT0gdm9pZCAwKSB7IGNvbGxhcHNlT3RoZXIgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgdW5zZWxlY3RlZEl0ZW1zID0gdGhpcy5yZXNldFNlbGVjdGlvbihpdGVtcyk7XG4gICAgICAgIHZhciBjb2xsYXBzZWRJdGVtcyA9IGNvbGxhcHNlT3RoZXIgPyB0aGlzLmNvbGxhcHNlSXRlbXMoaXRlbXMpIDogW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBOYk1lbnVJdGVtLmdldFBhcmVudHMoaXRlbSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBfYVtfaV07XG4gICAgICAgICAgICBwYXJlbnRfMS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAvLyBlbWl0IGV2ZW50IG9ubHkgZm9yIGl0ZW1zIHRoYXQgd2VyZW4ndCBzZWxlY3RlZCBiZWZvcmUgKCd1bnNlbGVjdGVkSXRlbXMnIGNvbnRhaW5zIGl0ZW1zIHRoYXQgd2VyZSBzZWxlY3RlZClcbiAgICAgICAgICAgIGlmICghdW5zZWxlY3RlZEl0ZW1zLmluY2x1ZGVzKHBhcmVudF8xKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjdChwYXJlbnRfMSwgdGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3YXNOb3RFeHBhbmRlZCA9ICFwYXJlbnRfMS5leHBhbmRlZDtcbiAgICAgICAgICAgIHBhcmVudF8xLmV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBpID0gY29sbGFwc2VkSXRlbXMuaW5kZXhPZihwYXJlbnRfMSk7XG4gICAgICAgICAgICAvLyBlbWl0IGV2ZW50IG9ubHkgZm9yIGl0ZW1zIHRoYXQgd2VyZW4ndCBleHBhbmRlZCBiZWZvcmUuXG4gICAgICAgICAgICAvLyAnY29sbGFwc2VkSXRlbXMnIGNvbnRhaW5zIGl0ZW1zIHRoYXQgd2VyZSBleHBhbmRlZCwgc28gbm8gbmVlZCB0byBlbWl0IGV2ZW50LlxuICAgICAgICAgICAgLy8gaW4gY2FzZSAnY29sbGFwc2VPdGhlcicgaXMgZmFsc2UsICdjb2xsYXBzZWRJdGVtcycgd2lsbCBiZSBlbXB0eSxcbiAgICAgICAgICAgIC8vIHNvIGFsc28gY2hlY2sgaWYgaXRlbSBpc24ndCBleHBhbmRlZCBhbHJlYWR5ICgnd2FzTm90RXhwYW5kZWQnKS5cbiAgICAgICAgICAgIGlmIChpID09PSAtMSAmJiB3YXNOb3RFeHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3VibWVudVRvZ2dsZShwYXJlbnRfMSwgdGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbGxhcHNlZEl0ZW1zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gZW1pdCBldmVudCBvbmx5IGZvciBpdGVtcyB0aGF0IHdlcmVuJ3Qgc2VsZWN0ZWQgYmVmb3JlICgndW5zZWxlY3RlZEl0ZW1zJyBjb250YWlucyBpdGVtcyB0aGF0IHdlcmUgc2VsZWN0ZWQpXG4gICAgICAgIGlmICghdW5zZWxlY3RlZEl0ZW1zLmluY2x1ZGVzKGl0ZW0pKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1TZWxlY3QoaXRlbSwgdGFnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1haW5pbmcgaXRlbXMgd2hpY2ggd2Fzbid0IGV4cGFuZGVkIGJhY2sgYWZ0ZXIgZXhwYW5kaW5nIGFsbCBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbXNcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBjb2xsYXBzZWRJdGVtc18xID0gY29sbGFwc2VkSXRlbXM7IF9iIDwgY29sbGFwc2VkSXRlbXNfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgIHZhciBjb2xsYXBzZWRJdGVtID0gY29sbGFwc2VkSXRlbXNfMVtfYl07XG4gICAgICAgICAgICB0aGlzLnN1Ym1lbnVUb2dnbGUoY29sbGFwc2VkSXRlbSwgdGFnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5jb2xsYXBzZUFsbCA9IGZ1bmN0aW9uIChpdGVtcywgdGFnLCBleGNlcHQpIHtcbiAgICAgICAgdmFyIGNvbGxhcHNlZEl0ZW1zID0gdGhpcy5jb2xsYXBzZUl0ZW1zKGl0ZW1zLCBleGNlcHQpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbGxhcHNlZEl0ZW1zXzIgPSBjb2xsYXBzZWRJdGVtczsgX2kgPCBjb2xsYXBzZWRJdGVtc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBjb2xsYXBzZWRJdGVtc18yW19pXTtcbiAgICAgICAgICAgIHRoaXMuc3VibWVudVRvZ2dsZShpdGVtLCB0YWcpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYk1lbnVJbnRlcm5hbFNlcnZpY2UucHJvdG90eXBlLm9uQWRkSXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFkZEl0ZW1zJC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5vbk5hdmlnYXRlSG9tZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRlSG9tZSQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIE5iTWVudUludGVybmFsU2VydmljZS5wcm90b3R5cGUub25Db2xsYXBzZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNvbGxhcHNlQWxsJC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5vbkdldFNlbGVjdGVkSXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGdldFNlbGVjdGVkSXRlbSQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIE5iTWVudUludGVybmFsU2VydmljZS5wcm90b3R5cGUuaXRlbUhvdmVyID0gZnVuY3Rpb24gKGl0ZW0sIHRhZykge1xuICAgICAgICBpdGVtSG92ZXIkLm5leHQoeyB0YWc6IHRhZywgaXRlbTogaXRlbSB9KTtcbiAgICB9O1xuICAgIE5iTWVudUludGVybmFsU2VydmljZS5wcm90b3R5cGUuc3VibWVudVRvZ2dsZSA9IGZ1bmN0aW9uIChpdGVtLCB0YWcpIHtcbiAgICAgICAgc3VibWVudVRvZ2dsZSQubmV4dCh7IHRhZzogdGFnLCBpdGVtOiBpdGVtIH0pO1xuICAgIH07XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5pdGVtU2VsZWN0ID0gZnVuY3Rpb24gKGl0ZW0sIHRhZykge1xuICAgICAgICBpdGVtU2VsZWN0JC5uZXh0KHsgdGFnOiB0YWcsIGl0ZW06IGl0ZW0gfSk7XG4gICAgfTtcbiAgICBOYk1lbnVJbnRlcm5hbFNlcnZpY2UucHJvdG90eXBlLml0ZW1DbGljayA9IGZ1bmN0aW9uIChpdGVtLCB0YWcpIHtcbiAgICAgICAgaXRlbUNsaWNrJC5uZXh0KHsgdGFnOiB0YWcsIGl0ZW06IGl0ZW0gfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVbnNlbGVjdCBhbGwgZ2l2ZW4gaXRlbXMgZGVlcGx5LlxuICAgICAqIEBwYXJhbSBpdGVtcyBhcnJheSBvZiBpdGVtcyB0byB1bnNlbGVjdC5cbiAgICAgKiBAcmV0dXJucyBpdGVtcyB3aGljaCBzZWxlY3RlZCB2YWx1ZSB3YXMgY2hhbmdlZC5cbiAgICAgKi9cbiAgICBOYk1lbnVJbnRlcm5hbFNlcnZpY2UucHJvdG90eXBlLnJlc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgIHZhciB1bnNlbGVjdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpdGVtc18xID0gaXRlbXM7IF9pIDwgaXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNfMVtfaV07XG4gICAgICAgICAgICBpZiAoaXRlbS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICB1bnNlbGVjdGVkSXRlbXMucHVzaC5hcHBseSh1bnNlbGVjdGVkSXRlbXMsIHRoaXMucmVzZXRTZWxlY3Rpb24oaXRlbS5jaGlsZHJlbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bnNlbGVjdGVkSXRlbXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb2xsYXBzZSBhbGwgZ2l2ZW4gaXRlbXMgZGVlcGx5LlxuICAgICAqIEBwYXJhbSBpdGVtcyBhcnJheSBvZiBpdGVtcyB0byBjb2xsYXBzZS5cbiAgICAgKiBAcGFyYW0gZXhjZXB0IG1lbnUgaXRlbSB3aGljaCBzaG91bGRuJ3QgYmUgY29sbGFwc2VkLCBhbHNvIGRpc2FibGVzIGNvbGxhcHNpbmcgZm9yIHBhcmVudHMgb2YgdGhpcyBpdGVtLlxuICAgICAqIEByZXR1cm5zIGl0ZW1zIHdoaWNoIGV4cGFuZGVkIHZhbHVlIHdhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIE5iTWVudUludGVybmFsU2VydmljZS5wcm90b3R5cGUuY29sbGFwc2VJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgZXhjZXB0KSB7XG4gICAgICAgIHZhciBjb2xsYXBzZWRJdGVtcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZW1zXzIgPSBpdGVtczsgX2kgPCBpdGVtc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc18yW19pXTtcbiAgICAgICAgICAgIGlmIChleGNlcHQgJiYgKGl0ZW0gPT09IGV4Y2VwdCB8fCBOYk1lbnVJdGVtLmlzUGFyZW50KGl0ZW0sIGV4Y2VwdCkpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5leHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIGNvbGxhcHNlZEl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbGxhcHNlZEl0ZW1zLnB1c2guYXBwbHkoY29sbGFwc2VkSXRlbXMsIHRoaXMuY29sbGFwc2VJdGVtcyhpdGVtLmNoaWxkcmVuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbGxhcHNlZEl0ZW1zO1xuICAgIH07XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5hcHBseURlZmF1bHRzID0gZnVuY3Rpb24gKGl0ZW0sIGRlZmF1bHRJdGVtKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51SXRlbSA9IF9fYXNzaWduKHt9LCBpdGVtKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihpdGVtLCBkZWZhdWx0SXRlbSwgbWVudUl0ZW0pO1xuICAgICAgICBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgIF90aGlzLmFwcGx5RGVmYXVsdHMoY2hpbGQsIGRlZmF1bHRJdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYk1lbnVJbnRlcm5hbFNlcnZpY2UucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gaXRlbTtcbiAgICAgICAgICAgIF90aGlzLnNldFBhcmVudChjaGlsZCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmluZCBkZWVwZXN0IGl0ZW0gd2hpY2ggbGluayBtYXRjaGVzIGN1cnJlbnQgVVJMIHBhdGguXG4gICAgICogQHBhcmFtIGl0ZW1zIGFycmF5IG9mIGl0ZW1zIHRvIHNlYXJjaCBpbi5cbiAgICAgKiBAcmV0dXJucyBmb3VuZCBpdGVtIG9mIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBOYk1lbnVJbnRlcm5hbFNlcnZpY2UucHJvdG90eXBlLmZpbmRJdGVtQnlVcmwgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNlbGVjdGVkSXRlbTtcbiAgICAgICAgaXRlbXMuc29tZShmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW0gPSBfdGhpcy5maW5kSXRlbUJ5VXJsKGl0ZW0uY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZEl0ZW0gJiYgX3RoaXMuaXNTZWxlY3RlZEluVXJsKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtO1xuICAgIH07XG4gICAgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLnByb3RvdHlwZS5pc1NlbGVjdGVkSW5VcmwgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgZXhhY3QgPSBpdGVtLnBhdGhNYXRjaCA9PT0gJ2Z1bGwnO1xuICAgICAgICB2YXIgbGluayA9IGl0ZW0ubGluaztcbiAgICAgICAgdmFyIGlzU2VsZWN0ZWRJblBhdGggPSBleGFjdFxuICAgICAgICAgICAgPyBpc1VybFBhdGhFcXVhbCh0aGlzLmxvY2F0aW9uLnBhdGgoKSwgbGluaylcbiAgICAgICAgICAgIDogaXNVcmxQYXRoQ29udGFpbih0aGlzLmxvY2F0aW9uLnBhdGgoKSwgbGluayk7XG4gICAgICAgIGlmIChpc1NlbGVjdGVkSW5QYXRoICYmIGl0ZW0uZnJhZ21lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGV4YWN0XG4gICAgICAgICAgICAgICAgPyBpc0ZyYWdtZW50RXF1YWwodGhpcy5sb2NhdGlvbi5wYXRoKHRydWUpLCBpdGVtLmZyYWdtZW50KVxuICAgICAgICAgICAgICAgIDogaXNGcmFnbWVudENvbnRhaW4odGhpcy5sb2NhdGlvbi5wYXRoKHRydWUpLCBpdGVtLmZyYWdtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNTZWxlY3RlZEluUGF0aDtcbiAgICB9O1xuICAgIE5iTWVudUludGVybmFsU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYXRpb25dKVxuICAgIF0sIE5iTWVudUludGVybmFsU2VydmljZSk7XG4gICAgcmV0dXJuIE5iTWVudUludGVybmFsU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYlRvZ2dsZVN0YXRlcztcbihmdW5jdGlvbiAoTmJUb2dnbGVTdGF0ZXMpIHtcbiAgICBOYlRvZ2dsZVN0YXRlc1tcIkV4cGFuZGVkXCJdID0gXCJleHBhbmRlZFwiO1xuICAgIE5iVG9nZ2xlU3RhdGVzW1wiQ29sbGFwc2VkXCJdID0gXCJjb2xsYXBzZWRcIjtcbn0pKE5iVG9nZ2xlU3RhdGVzIHx8IChOYlRvZ2dsZVN0YXRlcyA9IHt9KSk7XG52YXIgTmJNZW51SXRlbUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk1lbnVJdGVtQ29tcG9uZW50KG1lbnVTZXJ2aWNlLCBkaXJlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMubWVudVNlcnZpY2UgPSBtZW51U2VydmljZTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25TZXJ2aWNlID0gZGlyZWN0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5tZW51SXRlbSA9IG51bGw7XG4gICAgICAgIHRoaXMuaG92ZXJJdGVtID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnRvZ2dsZVN1Yk1lbnUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0SXRlbSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5pdGVtQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICBOYk1lbnVJdGVtQ29tcG9uZW50LnByb3RvdHlwZS5uZ0RvQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGUgPSB0aGlzLm1lbnVJdGVtLmV4cGFuZGVkID8gTmJUb2dnbGVTdGF0ZXMuRXhwYW5kZWQgOiBOYlRvZ2dsZVN0YXRlcy5Db2xsYXBzZWQ7XG4gICAgfTtcbiAgICBOYk1lbnVJdGVtQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubWVudVNlcnZpY2Uub25TdWJtZW51VG9nZ2xlKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gX2EuaXRlbTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtID09PSBfdGhpcy5tZW51SXRlbTtcbiAgICAgICAgfSksIG1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gX2EuaXRlbTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmV4cGFuZGVkO1xuICAgICAgICB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoaXNFeHBhbmRlZCkgeyByZXR1cm4gX3RoaXMudG9nZ2xlU3RhdGUgPSBpc0V4cGFuZGVkID8gTmJUb2dnbGVTdGF0ZXMuRXhwYW5kZWQgOiBOYlRvZ2dsZVN0YXRlcy5Db2xsYXBzZWQ7IH0pO1xuICAgIH07XG4gICAgTmJNZW51SXRlbUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYk1lbnVJdGVtQ29tcG9uZW50LnByb3RvdHlwZS5vblRvZ2dsZVN1Yk1lbnUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnRvZ2dsZVN1Yk1lbnUuZW1pdChpdGVtKTtcbiAgICB9O1xuICAgIE5iTWVudUl0ZW1Db21wb25lbnQucHJvdG90eXBlLm9uSG92ZXJJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5ob3Zlckl0ZW0uZW1pdChpdGVtKTtcbiAgICB9O1xuICAgIE5iTWVudUl0ZW1Db21wb25lbnQucHJvdG90eXBlLm9uU2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0SXRlbS5lbWl0KGl0ZW0pO1xuICAgIH07XG4gICAgTmJNZW51SXRlbUNvbXBvbmVudC5wcm90b3R5cGUub25JdGVtQ2xpY2sgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLml0ZW1DbGljay5lbWl0KGl0ZW0pO1xuICAgIH07XG4gICAgTmJNZW51SXRlbUNvbXBvbmVudC5wcm90b3R5cGUuZ2V0RXhwYW5kU3RhdGVJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5tZW51SXRlbS5leHBhbmRlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdjaGV2cm9uLWRvd24tb3V0bGluZSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uU2VydmljZS5pc0x0cigpXG4gICAgICAgICAgICA/ICdjaGV2cm9uLWxlZnQtb3V0bGluZSdcbiAgICAgICAgICAgIDogJ2NoZXZyb24tcmlnaHQtb3V0bGluZSc7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYk1lbnVJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZW51SXRlbVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYk1lbnVJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJob3Zlckl0ZW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJNZW51SXRlbUNvbXBvbmVudC5wcm90b3R5cGUsIFwidG9nZ2xlU3ViTWVudVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYk1lbnVJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RJdGVtXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iTWVudUl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcIml0ZW1DbGlja1wiLCB2b2lkIDApO1xuICAgIE5iTWVudUl0ZW1Db21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iTWVudUl0ZW1dJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxzcGFuICpuZ0lmPVxcXCJtZW51SXRlbS5ncm91cFxcXCI+XFxuICA8bmItaWNvbiBjbGFzcz1cXFwibWVudS1pY29uXFxcIiBbY29uZmlnXT1cXFwibWVudUl0ZW0uaWNvblxcXCIgKm5nSWY9XFxcIm1lbnVJdGVtLmljb25cXFwiPjwvbmItaWNvbj5cXG4gIHt7IG1lbnVJdGVtLnRpdGxlIH19XFxuPC9zcGFuPlxcbjxhICpuZ0lmPVxcXCJtZW51SXRlbS5saW5rICYmICFtZW51SXRlbS51cmwgJiYgIW1lbnVJdGVtLmNoaWxkcmVuICYmICFtZW51SXRlbS5ncm91cFxcXCJcXG4gICBbcm91dGVyTGlua109XFxcIm1lbnVJdGVtLmxpbmtcXFwiXFxuICAgW3F1ZXJ5UGFyYW1zXT1cXFwibWVudUl0ZW0ucXVlcnlQYXJhbXNcXFwiXFxuICAgW2ZyYWdtZW50XT1cXFwibWVudUl0ZW0uZnJhZ21lbnRcXFwiXFxuICAgW3NraXBMb2NhdGlvbkNoYW5nZV09XFxcIm1lbnVJdGVtLnNraXBMb2NhdGlvbkNoYW5nZVxcXCJcXG4gICBbYXR0ci50YXJnZXRdPVxcXCJtZW51SXRlbS50YXJnZXRcXFwiXFxuICAgW2F0dHIudGl0bGVdPVxcXCJtZW51SXRlbS50aXRsZVxcXCJcXG4gICBbY2xhc3MuYWN0aXZlXT1cXFwibWVudUl0ZW0uc2VsZWN0ZWRcXFwiXFxuICAgKG1vdXNlZW50ZXIpPVxcXCJvbkhvdmVySXRlbShtZW51SXRlbSlcXFwiXFxuICAgKGNsaWNrKT1cXFwib25JdGVtQ2xpY2sobWVudUl0ZW0pO1xcXCI+XFxuICA8bmItaWNvbiBjbGFzcz1cXFwibWVudS1pY29uXFxcIiBbY29uZmlnXT1cXFwibWVudUl0ZW0uaWNvblxcXCIgKm5nSWY9XFxcIm1lbnVJdGVtLmljb25cXFwiPjwvbmItaWNvbj5cXG4gIDxzcGFuIGNsYXNzPVxcXCJtZW51LXRpdGxlXFxcIj57eyBtZW51SXRlbS50aXRsZSB9fTwvc3Bhbj5cXG48L2E+XFxuPGEgKm5nSWY9XFxcIm1lbnVJdGVtLnVybCAmJiAhbWVudUl0ZW0uY2hpbGRyZW4gJiYgIW1lbnVJdGVtLmxpbmsgJiYgIW1lbnVJdGVtLmdyb3VwXFxcIlxcbiAgIFthdHRyLmhyZWZdPVxcXCJtZW51SXRlbS51cmxcXFwiXFxuICAgW2F0dHIudGFyZ2V0XT1cXFwibWVudUl0ZW0udGFyZ2V0XFxcIlxcbiAgIFthdHRyLnRpdGxlXT1cXFwibWVudUl0ZW0udGl0bGVcXFwiXFxuICAgW2NsYXNzLmFjdGl2ZV09XFxcIm1lbnVJdGVtLnNlbGVjdGVkXFxcIlxcbiAgIChtb3VzZWVudGVyKT1cXFwib25Ib3Zlckl0ZW0obWVudUl0ZW0pXFxcIlxcbiAgIChjbGljayk9XFxcIm9uU2VsZWN0SXRlbShtZW51SXRlbSlcXFwiPlxcbiAgPG5iLWljb24gY2xhc3M9XFxcIm1lbnUtaWNvblxcXCIgW2NvbmZpZ109XFxcIm1lbnVJdGVtLmljb25cXFwiICpuZ0lmPVxcXCJtZW51SXRlbS5pY29uXFxcIj48L25iLWljb24+XFxuICA8c3BhbiBjbGFzcz1cXFwibWVudS10aXRsZVxcXCI+e3sgbWVudUl0ZW0udGl0bGUgfX08L3NwYW4+XFxuPC9hPlxcbjxhICpuZ0lmPVxcXCIhbWVudUl0ZW0uY2hpbGRyZW4gJiYgIW1lbnVJdGVtLmxpbmsgJiYgIW1lbnVJdGVtLnVybCAmJiAhbWVudUl0ZW0uZ3JvdXBcXFwiXFxuICAgW2F0dHIudGFyZ2V0XT1cXFwibWVudUl0ZW0udGFyZ2V0XFxcIlxcbiAgIFthdHRyLnRpdGxlXT1cXFwibWVudUl0ZW0udGl0bGVcXFwiXFxuICAgW2NsYXNzLmFjdGl2ZV09XFxcIm1lbnVJdGVtLnNlbGVjdGVkXFxcIlxcbiAgIChtb3VzZWVudGVyKT1cXFwib25Ib3Zlckl0ZW0obWVudUl0ZW0pXFxcIlxcbiAgIChjbGljayk9XFxcIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBvbkl0ZW1DbGljayhtZW51SXRlbSk7XFxcIj5cXG4gIDxuYi1pY29uIGNsYXNzPVxcXCJtZW51LWljb25cXFwiIFtjb25maWddPVxcXCJtZW51SXRlbS5pY29uXFxcIiAqbmdJZj1cXFwibWVudUl0ZW0uaWNvblxcXCI+PC9uYi1pY29uPlxcbiAgPHNwYW4gY2xhc3M9XFxcIm1lbnUtdGl0bGVcXFwiPnt7IG1lbnVJdGVtLnRpdGxlIH19PC9zcGFuPlxcbjwvYT5cXG48YSAqbmdJZj1cXFwibWVudUl0ZW0uY2hpbGRyZW5cXFwiXFxuICAgKGNsaWNrKT1cXFwiJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IG9uVG9nZ2xlU3ViTWVudShtZW51SXRlbSk7XFxcIlxcbiAgIFthdHRyLnRhcmdldF09XFxcIm1lbnVJdGVtLnRhcmdldFxcXCJcXG4gICBbYXR0ci50aXRsZV09XFxcIm1lbnVJdGVtLnRpdGxlXFxcIlxcbiAgIFtjbGFzcy5hY3RpdmVdPVxcXCJtZW51SXRlbS5zZWxlY3RlZFxcXCJcXG4gICAobW91c2VlbnRlcik9XFxcIm9uSG92ZXJJdGVtKG1lbnVJdGVtKVxcXCJcXG4gICBocmVmPVxcXCIjXFxcIj5cXG4gIDxuYi1pY29uIGNsYXNzPVxcXCJtZW51LWljb25cXFwiIFtjb25maWddPVxcXCJtZW51SXRlbS5pY29uXFxcIiAqbmdJZj1cXFwibWVudUl0ZW0uaWNvblxcXCI+PC9uYi1pY29uPlxcbiAgPHNwYW4gY2xhc3M9XFxcIm1lbnUtdGl0bGVcXFwiPnt7IG1lbnVJdGVtLnRpdGxlIH19PC9zcGFuPlxcbiAgPG5iLWljb24gY2xhc3M9XFxcImV4cGFuZC1zdGF0ZVxcXCIgW2ljb25dPVxcXCJnZXRFeHBhbmRTdGF0ZUljb24oKVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj48L25iLWljb24+XFxuPC9hPlxcbjx1bCAqbmdJZj1cXFwibWVudUl0ZW0uY2hpbGRyZW5cXFwiXFxuICAgIFtjbGFzcy5jb2xsYXBzZWRdPVxcXCIhKG1lbnVJdGVtLmNoaWxkcmVuICYmIG1lbnVJdGVtLmV4cGFuZGVkKVxcXCJcXG4gICAgW2NsYXNzLmV4cGFuZGVkXT1cXFwibWVudUl0ZW0uZXhwYW5kZWRcXFwiXFxuICAgIFtAdG9nZ2xlXT1cXFwidG9nZ2xlU3RhdGVcXFwiXFxuICAgIGNsYXNzPVxcXCJtZW51LWl0ZW1zXFxcIj5cXG4gIDxuZy1jb250YWluZXIgKm5nRm9yPVxcXCJsZXQgaXRlbSBvZiBtZW51SXRlbS5jaGlsZHJlblxcXCI+XFxuICAgIDxsaSBuYk1lbnVJdGVtICpuZ0lmPVxcXCIhaXRlbS5oaWRkZW5cXFwiXFxuICAgICAgICBbbWVudUl0ZW1dPVxcXCJpdGVtXFxcIlxcbiAgICAgICAgW2NsYXNzLm1lbnUtZ3JvdXBdPVxcXCJpdGVtLmdyb3VwXFxcIlxcbiAgICAgICAgKGhvdmVySXRlbSk9XFxcIm9uSG92ZXJJdGVtKCRldmVudClcXFwiXFxuICAgICAgICAodG9nZ2xlU3ViTWVudSk9XFxcIm9uVG9nZ2xlU3ViTWVudSgkZXZlbnQpXFxcIlxcbiAgICAgICAgKHNlbGVjdEl0ZW0pPVxcXCJvblNlbGVjdEl0ZW0oJGV2ZW50KVxcXCJcXG4gICAgICAgIChpdGVtQ2xpY2spPVxcXCJvbkl0ZW1DbGljaygkZXZlbnQpXFxcIlxcbiAgICAgICAgY2xhc3M9XFxcIm1lbnUtaXRlbVxcXCI+XFxuICAgIDwvbGk+XFxuICA8L25nLWNvbnRhaW5lcj5cXG48L3VsPlxcblwiLFxuICAgICAgICAgICAgYW5pbWF0aW9uczogW1xuICAgICAgICAgICAgICAgIHRyaWdnZXIoJ3RvZ2dsZScsIFtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUoTmJUb2dnbGVTdGF0ZXMuQ29sbGFwc2VkLCBzdHlsZSh7IGhlaWdodDogJzAnLCBtYXJnaW46ICcwJyB9KSksXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlKE5iVG9nZ2xlU3RhdGVzLkV4cGFuZGVkLCBzdHlsZSh7IGhlaWdodDogJyonIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbihOYlRvZ2dsZVN0YXRlcy5Db2xsYXBzZWQgKyBcIiA8PT4gXCIgKyBOYlRvZ2dsZVN0YXRlcy5FeHBhbmRlZCwgYW5pbWF0ZSgzMDApKSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJNZW51U2VydmljZSxcbiAgICAgICAgICAgIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZV0pXG4gICAgXSwgTmJNZW51SXRlbUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iTWVudUl0ZW1Db21wb25lbnQ7XG59KCkpO1xuLyoqXG4gKiBWZXJ0aWNhbCBtZW51IGNvbXBvbmVudC5cbiAqXG4gKiBBY2NlcHRzIGEgbGlzdCBvZiBtZW51IGl0ZW1zIGFuZCByZW5kZXJzIHRoZW0gYWNjb3JkaW5nbHkuIFN1cHBvcnRzIG11bHRpLWxldmVsIG1lbnVzLlxuICpcbiAqIEJhc2ljIGV4YW1wbGVcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIG1lbnUvbWVudS1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogYGBgdHNcbiAqIC8vIC4uLlxuICogaXRlbXM6IE5iTWVudUl0ZW1bXSA9IFtcbiAqICB7XG4gKiAgICB0aXRsZTogaG9tZSxcbiAqICAgIGxpbms6ICcvJ1xuICogIH0sXG4gKiAge1xuICogICAgdGl0bGU6IGRhc2hib2FyZCxcbiAqICAgIGxpbms6ICdkYXNoYm9hcmQnXG4gKiAgfVxuICogXTtcbiAqIC8vIC4uLlxuICogPG5iLW1lbnUgW2l0ZW1zXT1cIml0ZW1zXCI+PC9uYi1tZW51PlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYk1lbnVNb2R1bGUuZm9yUm9vdCgpYCB0byB5b3VyIGFwcCBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iTWVudU1vZHVsZS5mb3JSb290KCksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICogYW5kIGBOYk1lbnVNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUgd2hlcmUgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgc2hvd246XG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iTWVudU1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogVHdvLWxldmVsIG1lbnUgZXhhbXBsZVxuICogQHN0YWNrZWQtZXhhbXBsZShUd28gTGV2ZWxzLCBtZW51L21lbnUtY2hpbGRyZW4uY29tcG9uZW50KVxuICpcbiAqXG4gKiBBdXRvY29sbGFwc2UgbWVudSBleGFtcGxlXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF1dG9jb2xsYXBzZSBNZW51LCBtZW51L21lbnUtYXV0b2NvbGxhcHNlLmNvbXBvbmVudClcbiAqXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIG1lbnUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG1lbnUtdGV4dC1jb2xvcjpcbiAqIG1lbnUtdGV4dC1mb250LWZhbWlseTpcbiAqIG1lbnUtdGV4dC1mb250LXNpemU6XG4gKiBtZW51LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBtZW51LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBtZW51LWdyb3VwLXRleHQtY29sb3I6XG4gKiBtZW51LWl0ZW0tYm9yZGVyLXJhZGl1czpcbiAqIG1lbnUtaXRlbS1wYWRkaW5nOlxuICogbWVudS1pdGVtLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBtZW51LWl0ZW0taG92ZXItY3Vyc29yOlxuICogbWVudS1pdGVtLWhvdmVyLXRleHQtY29sb3I6XG4gKiBtZW51LWl0ZW0taWNvbi1ob3Zlci1jb2xvcjpcbiAqIG1lbnUtaXRlbS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG1lbnUtaXRlbS1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIG1lbnUtaXRlbS1pY29uLWFjdGl2ZS1jb2xvcjpcbiAqIG1lbnUtaXRlbS1pY29uLWNvbG9yOlxuICogbWVudS1pdGVtLWljb24tbWFyZ2luOlxuICogbWVudS1pdGVtLWljb24td2lkdGg6XG4gKiBtZW51LWl0ZW0tZGl2aWRlci1jb2xvcjpcbiAqIG1lbnUtaXRlbS1kaXZpZGVyLXN0eWxlOlxuICogbWVudS1pdGVtLWRpdmlkZXItd2lkdGg6XG4gKiBtZW51LXN1Ym1lbnUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS10ZXh0LWNvbG9yOlxuICogbWVudS1zdWJtZW51LW1hcmdpbjpcbiAqIG1lbnUtc3VibWVudS1wYWRkaW5nOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYm9yZGVyLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYm9yZGVyLXN0eWxlOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYm9yZGVyLXdpZHRoOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYm9yZGVyLXJhZGl1czpcbiAqIG1lbnUtc3VibWVudS1pdGVtLXBhZGRpbmc6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0taG92ZXItYm9yZGVyLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0taG92ZXItdGV4dC1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWljb24taG92ZXItY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWljb24tYWN0aXZlLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYWN0aXZlLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1hY3RpdmUtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYWN0aXZlLWhvdmVyLXRleHQtY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1pY29uLWFjdGl2ZS1ob3Zlci1jb2xvcjpcbiAqL1xudmFyIE5iTWVudUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk1lbnVDb21wb25lbnQod2luZG93LCBwbGF0Zm9ybUlkLCBtZW51SW50ZXJuYWxTZXJ2aWNlLCByb3V0ZXIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgICAgIHRoaXMucGxhdGZvcm1JZCA9IHBsYXRmb3JtSWQ7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZSA9IG1lbnVJbnRlcm5hbFNlcnZpY2U7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLl9hdXRvQ29sbGFwc2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLCBcImF1dG9Db2xsYXBzZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2xsYXBzZSBhbGwgb3BlbmVkIHN1Ym1lbnVzIG9uIHRoZSB0b2dnbGUgZXZlbnRcbiAgICAgICAgICogRGVmYXVsdCB2YWx1ZSBpcyBcImZhbHNlXCJcbiAgICAgICAgICogQHR5cGUgYm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXV0b0NvbGxhcHNlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fYXV0b0NvbGxhcHNlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJNZW51Q29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnByZXBhcmVJdGVtcyh0aGlzLml0ZW1zKTtcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlXG4gICAgICAgICAgICAub25BZGRJdGVtKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMuY29tcGFyZVRhZyhkYXRhLnRhZyk7IH0pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBfdGhpcy5vbkFkZEl0ZW0oZGF0YSk7IH0pO1xuICAgICAgICB0aGlzLm1lbnVJbnRlcm5hbFNlcnZpY2VcbiAgICAgICAgICAgIC5vbk5hdmlnYXRlSG9tZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF90aGlzLmNvbXBhcmVUYWcoZGF0YS50YWcpOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5uYXZpZ2F0ZUhvbWUoKTsgfSk7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZVxuICAgICAgICAgICAgLm9uR2V0U2VsZWN0ZWRJdGVtKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMuY29tcGFyZVRhZyhkYXRhLnRhZyk7IH0pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBkYXRhLmxpc3RlbmVyLm5leHQoeyB0YWc6IF90aGlzLnRhZywgaXRlbTogX3RoaXMuZ2V0U2VsZWN0ZWRJdGVtKF90aGlzLml0ZW1zKSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZVxuICAgICAgICAgICAgLm9uQ29sbGFwc2VBbGwoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBfdGhpcy5jb21wYXJlVGFnKGRhdGEudGFnKTsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY29sbGFwc2VBbGwoKTsgfSk7XG4gICAgICAgIHRoaXMucm91dGVyLmV2ZW50c1xuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnNlbGVjdEZyb21VcmwoX3RoaXMuaXRlbXMsIF90aGlzLnRhZywgX3RoaXMuYXV0b0NvbGxhcHNlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnNlbGVjdEZyb21VcmwoX3RoaXMuaXRlbXMsIF90aGlzLnRhZywgX3RoaXMuYXV0b0NvbGxhcHNlKTsgfSk7XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLm9uQWRkSXRlbSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gdGhpcy5pdGVtcykucHVzaC5hcHBseShfYSwgZGF0YS5pdGVtcyk7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZS5wcmVwYXJlSXRlbXModGhpcy5pdGVtcyk7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZS5zZWxlY3RGcm9tVXJsKHRoaXMuaXRlbXMsIHRoaXMudGFnLCB0aGlzLmF1dG9Db2xsYXBzZSk7XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLm9uSG92ZXJJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLml0ZW1Ib3ZlcihpdGVtLCB0aGlzLnRhZyk7XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLm9uVG9nZ2xlU3ViTWVudSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLmF1dG9Db2xsYXBzZSkge1xuICAgICAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLmNvbGxhcHNlQWxsKHRoaXMuaXRlbXMsIHRoaXMudGFnLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpdGVtLmV4cGFuZGVkID0gIWl0ZW0uZXhwYW5kZWQ7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZS5zdWJtZW51VG9nZ2xlKGl0ZW0sIHRoaXMudGFnKTtcbiAgICB9O1xuICAgIC8vIFRPRE86IGlzIG5vdCBmaXJlZCBvbiBwYWdlIHJlbG9hZFxuICAgIE5iTWVudUNvbXBvbmVudC5wcm90b3R5cGUub25TZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnNlbGVjdEl0ZW0oaXRlbSwgdGhpcy5pdGVtcywgdGhpcy5hdXRvQ29sbGFwc2UsIHRoaXMudGFnKTtcbiAgICB9O1xuICAgIE5iTWVudUNvbXBvbmVudC5wcm90b3R5cGUub25JdGVtQ2xpY2sgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLm1lbnVJbnRlcm5hbFNlcnZpY2UuaXRlbUNsaWNrKGl0ZW0sIHRoaXMudGFnKTtcbiAgICB9O1xuICAgIE5iTWVudUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLm5hdmlnYXRlSG9tZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhvbWVJdGVtID0gdGhpcy5nZXRIb21lSXRlbSh0aGlzLml0ZW1zKTtcbiAgICAgICAgaWYgKGhvbWVJdGVtKSB7XG4gICAgICAgICAgICBpZiAoaG9tZUl0ZW0ubGluaykge1xuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtob21lSXRlbS5saW5rXSwgeyBxdWVyeVBhcmFtczogaG9tZUl0ZW0ucXVlcnlQYXJhbXMsIGZyYWdtZW50OiBob21lSXRlbS5mcmFnbWVudCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChob21lSXRlbS51cmwgJiYgaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMud2luZG93LmxvY2F0aW9uLmhyZWYgPSBob21lSXRlbS51cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iTWVudUNvbXBvbmVudC5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZS5jb2xsYXBzZUFsbCh0aGlzLml0ZW1zLCB0aGlzLnRhZyk7XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLmdldEhvbWVJdGVtID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgaXRlbXNfMSA9IGl0ZW1zOyBfaSA8IGl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0uaG9tZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhvbWVJdGVtID0gaXRlbS5jaGlsZHJlbiAmJiB0aGlzLmdldEhvbWVJdGVtKGl0ZW0uY2hpbGRyZW4pO1xuICAgICAgICAgICAgaWYgKGhvbWVJdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvbWVJdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLmNvbXBhcmVUYWcgPSBmdW5jdGlvbiAodGFnKSB7XG4gICAgICAgIHJldHVybiAhdGFnIHx8IHRhZyA9PT0gdGhpcy50YWc7XG4gICAgfTtcbiAgICBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLmdldFNlbGVjdGVkSXRlbSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnNlbGVjdGVkICYmIGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBfdGhpcy5nZXRTZWxlY3RlZEl0ZW0oaXRlbS5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VsZWN0ZWQ7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYk1lbnVDb21wb25lbnQucHJvdG90eXBlLCBcInRhZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG4gICAgXSwgTmJNZW51Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJNZW51Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhdXRvQ29sbGFwc2VcIiwgbnVsbCk7XG4gICAgTmJNZW51Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLW1lbnUnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDx1bCBjbGFzcz1cXFwibWVudS1pdGVtc1xcXCI+XFxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XFxcImxldCBpdGVtIG9mIGl0ZW1zXFxcIj5cXG4gICAgICAgIDxsaSBuYk1lbnVJdGVtICpuZ0lmPVxcXCIhaXRlbS5oaWRkZW5cXFwiXFxuICAgICAgICAgICAgW21lbnVJdGVtXT1cXFwiaXRlbVxcXCJcXG4gICAgICAgICAgICBbY2xhc3MubWVudS1ncm91cF09XFxcIml0ZW0uZ3JvdXBcXFwiXFxuICAgICAgICAgICAgKGhvdmVySXRlbSk9XFxcIm9uSG92ZXJJdGVtKCRldmVudClcXFwiXFxuICAgICAgICAgICAgKHRvZ2dsZVN1Yk1lbnUpPVxcXCJvblRvZ2dsZVN1Yk1lbnUoJGV2ZW50KVxcXCJcXG4gICAgICAgICAgICAoc2VsZWN0SXRlbSk9XFxcIm9uU2VsZWN0SXRlbSgkZXZlbnQpXFxcIlxcbiAgICAgICAgICAgIChpdGVtQ2xpY2spPVxcXCJvbkl0ZW1DbGljaygkZXZlbnQpXFxcIlxcbiAgICAgICAgICAgIGNsYXNzPVxcXCJtZW51LWl0ZW1cXFwiPlxcbiAgICAgICAgPC9saT5cXG4gICAgICA8L25nLWNvbnRhaW5lcj5cXG4gICAgPC91bD5cXG4gIFwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdCA6Om5nLWRlZXB7ZGlzcGxheTpibG9ja306aG9zdCA6Om5nLWRlZXAgLm1lbnUtaXRlbXMsOmhvc3QgOjpuZy1kZWVwIC5tZW51LWl0ZW0+Lm1lbnUtaXRlbXN7bGlzdC1zdHlsZS10eXBlOm5vbmU7b3ZlcmZsb3c6aGlkZGVufTpob3N0IDo6bmctZGVlcCAubWVudS1pdGVtIGF7ZGlzcGxheTpmbGV4O3RleHQtZGVjb3JhdGlvbjpub25lO2FsaWduLWl0ZW1zOmNlbnRlcn06aG9zdCA6Om5nLWRlZXAgLm1lbnUtaXRlbSBhIC5tZW51LXRpdGxle2ZsZXg6MSAwIGF1dG99W2Rpcj1ydGxdIDpob3N0IDo6bmctZGVlcCAubWVudS1pdGVtIGEgLm1lbnUtdGl0bGV7dGV4dC1hbGlnbjpyaWdodH06aG9zdCA6Om5nLWRlZXAgLm1lbnUtZ3JvdXAgc3BhbntkaXNwbGF5OmZsZXh9XFxuXCJdXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDAsIEluamVjdChOQl9XSU5ET1cpKSxcbiAgICAgICAgX19wYXJhbSgxLCBJbmplY3QoUExBVEZPUk1fSUQpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgTmJNZW51SW50ZXJuYWxTZXJ2aWNlLFxuICAgICAgICAgICAgUm91dGVyXSlcbiAgICBdLCBOYk1lbnVDb21wb25lbnQpO1xuICAgIHJldHVybiBOYk1lbnVDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgbmJNZW51Q29tcG9uZW50cyA9IFtOYk1lbnVDb21wb25lbnQsIE5iTWVudUl0ZW1Db21wb25lbnRdO1xudmFyIE5CX01FTlVfUFJPVklERVJTID0gW05iTWVudVNlcnZpY2UsIE5iTWVudUludGVybmFsU2VydmljZV07XG52YXIgTmJNZW51TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iTWVudU1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJNZW51TW9kdWxlXzEgPSBOYk1lbnVNb2R1bGU7XG4gICAgTmJNZW51TW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJNZW51TW9kdWxlXzEsXG4gICAgICAgICAgICBwcm92aWRlcnM6IF9fc3ByZWFkQXJyYXlzKE5CX01FTlVfUFJPVklERVJTKSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBOYk1lbnVNb2R1bGVfMTtcbiAgICBOYk1lbnVNb2R1bGUgPSBOYk1lbnVNb2R1bGVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbTmJTaGFyZWRNb2R1bGUsIE5iSWNvbk1vZHVsZV0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IF9fc3ByZWFkQXJyYXlzKG5iTWVudUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMobmJNZW51Q29tcG9uZW50cyksXG4gICAgICAgIH0pXG4gICAgXSwgTmJNZW51TW9kdWxlKTtcbiAgICByZXR1cm4gTmJNZW51TW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBSb3V0ZSB0YWJzZXQgY29tcG9uZW50cy5cbiAqIFJlbmRlcnMgdGFicyBpbnNpZGUgb2YgYSByb3V0ZXItb3V0bGV0LlxuICpcbiAqIGBgYHRzXG4gKiAgdGFicyA9IFtcbiAqICB7XG4gKiAgICB0aXRsZTogJ1JvdXRlIHRhYiAjMScsXG4gKiAgICByb3V0ZTogJy9wYWdlcy9kZXNjcmlwdGlvbicsXG4gKiAgICBpY29uOiAnaG9tZScsXG4gKiAgICByZXNwb25zaXZlOiB0cnVlLCAvLyBoaWRlIHRpdGxlIGJlZm9yZSBgcm91dGUtdGFicy1pY29uLW9ubHktbWF4LXdpZHRoYCB2YWx1ZVxuICogIH0sXG4gKiAge1xuICogICAgdGl0bGU6ICdSb3V0ZSB0YWIgIzInLFxuICogICAgcm91dGU6ICcvcGFnZXMvaW1hZ2VzJyxcbiAqICAgIH1cbiAqICBdO1xuICpcbiAqICA8bmItcm91dGUtdGFic2V0IFt0YWJzXT1cInRhYnNcIj48L25iLXJvdXRlLXRhYnNldD5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJSb3V0ZVRhYnNldE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJSb3V0ZVRhYnNldE1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUm91dGUgVGFic2V0LCB0YWJzZXQvcm91dGUtdGFic2V0LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogcm91dGUtdGFic2V0LWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtYm9yZGVyLXJhZGl1czpcbiAqIHJvdXRlLXRhYnNldC1zaGFkb3c6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXBhZGRpbmc6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXRleHQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXRleHQtZm9udC1mYW1pbHk6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXRleHQtZm9udC1zaXplOlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LXRyYW5zZm9ybTpcbiAqIHJvdXRlLXRhYnNldC10YWItdW5kZXJsaW5lLXdpZHRoOlxuICogcm91dGUtdGFic2V0LXRhYi11bmRlcmxpbmUtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItYWN0aXZlLXVuZGVybGluZS1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItZm9jdXMtdGV4dC1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItZm9jdXMtdW5kZXJsaW5lLWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1ob3Zlci10ZXh0LWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1ob3Zlci11bmRlcmxpbmUtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWRpc2FibGVkLXVuZGVybGluZS1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC1kaXZpZGVyLWNvbG9yOlxuICogcm91dGUtdGFic2V0LWRpdmlkZXItc3R5bGU6XG4gKiByb3V0ZS10YWJzZXQtZGl2aWRlci13aWR0aDpcbiAqIHJvdXRlLXRhYnNldC1zY3JvbGxiYXItY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtc2Nyb2xsYmFyLXdpZHRoOlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LWhpZGUtYnJlYWtwb2ludDpcbiAqL1xudmFyIE5iUm91dGVUYWJzZXRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJSb3V0ZVRhYnNldENvbXBvbmVudCgpIHtcbiAgICAgICAgdGhpcy5mdWxsV2lkdGhWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogT3B0aW9ucyBwYXNzZWQgdG8gYHJvdXRlckxpbmtBY3RpdmVPcHRpb25zYCBkaXJlY3RpdmUgd2hpY2ggc2V0IG9uIHRhYiBsaW5rcy5cbiAgICAgICAgICogYHsgZXhhY3Q6IHRydWUgfWAgYnkgZGVmYXVsdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWN0aXZlTGlua09wdGlvbnMgPSB7IGV4YWN0OiB0cnVlIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuIHRhYiBpcyBzZWxlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPGFueT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZVRhYiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUm91dGVUYWJzZXRDb21wb25lbnQucHJvdG90eXBlLCBcImZ1bGxXaWR0aFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYWtlIGZ1bGwgd2lkdGggb2YgYSBwYXJlbnRcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSB2YWxcbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5mdWxsV2lkdGhWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYlJvdXRlVGFic2V0Q29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3RUYWIgPSBmdW5jdGlvbiAodGFiKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlVGFiLmVtaXQodGFiKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZnVsbC13aWR0aCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYlJvdXRlVGFic2V0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmdWxsV2lkdGhWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG4gICAgXSwgTmJSb3V0ZVRhYnNldENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFic1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iUm91dGVUYWJzZXRDb21wb25lbnQucHJvdG90eXBlLCBcImFjdGl2ZUxpbmtPcHRpb25zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlJvdXRlVGFic2V0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmdWxsV2lkdGhcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iUm91dGVUYWJzZXRDb21wb25lbnQucHJvdG90eXBlLCBcImNoYW5nZVRhYlwiLCB2b2lkIDApO1xuICAgIE5iUm91dGVUYWJzZXRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItcm91dGUtdGFic2V0JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8dWwgY2xhc3M9XFxcInJvdXRlLXRhYnNldFxcXCI+XFxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XFxcImxldCB0YWIgb2YgdGFic1xcXCI+XFxuICAgICAgICA8bGkgKm5nSWY9XFxcInRhYi5kaXNhYmxlZDsgZWxzZSBlbmFibGVkXFxcIlxcbiAgICAgICAgICAgIFtjbGFzcy5yZXNwb25zaXZlXT1cXFwidGFiLnJlc3BvbnNpdmVcXFwiXFxuICAgICAgICAgICAgY2xhc3M9XFxcInJvdXRlLXRhYiBkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICB0YWJpbmRleD1cXFwiLTFcXFwiPlxcbiAgICAgICAgICA8YSB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJ0YWItbGlua1xcXCI+XFxuICAgICAgICAgICAgPG5iLWljb24gKm5nSWY9XFxcInRhYi5pY29uXFxcIiBbY29uZmlnXT1cXFwidGFiLmljb25cXFwiPjwvbmItaWNvbj5cXG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cXFwidGFiLnRpdGxlXFxcIiBjbGFzcz1cXFwidGFiLXRleHRcXFwiPnt7IHRhYi50aXRsZSB9fTwvc3Bhbj5cXG4gICAgICAgICAgPC9hPlxcbiAgICAgICAgPC9saT5cXG5cXG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjZW5hYmxlZD5cXG4gICAgICAgICAgPGxpIChjbGljayk9XFxcIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBzZWxlY3RUYWIodGFiKVxcXCJcXG4gICAgICAgICAgICAgIFtyb3V0ZXJMaW5rXT1cXFwidGFiLnJvdXRlXFxcIlxcbiAgICAgICAgICAgICAgcm91dGVyTGlua0FjdGl2ZT1cXFwiYWN0aXZlXFxcIlxcbiAgICAgICAgICAgICAgW3JvdXRlckxpbmtBY3RpdmVPcHRpb25zXT1cXFwiYWN0aXZlTGlua09wdGlvbnNcXFwiXFxuICAgICAgICAgICAgICBbY2xhc3MucmVzcG9uc2l2ZV09XFxcInRhYi5yZXNwb25zaXZlXFxcIlxcbiAgICAgICAgICAgICAgdGFiaW5kZXg9XFxcIjBcXFwiXFxuICAgICAgICAgICAgICBjbGFzcz1cXFwicm91dGUtdGFiXFxcIj5cXG4gICAgICAgICAgICA8YSB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJ0YWItbGlua1xcXCI+XFxuICAgICAgICAgICAgICA8bmItaWNvbiAqbmdJZj1cXFwidGFiLmljb25cXFwiIFtpY29uXT1cXFwidGFiLmljb25cXFwiPjwvbmItaWNvbj5cXG4gICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVxcXCJ0YWIudGl0bGVcXFwiIGNsYXNzPVxcXCJ0YWItdGV4dFxcXCI+e3sgdGFiLnRpdGxlIH19PC9zcGFuPlxcbiAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgPC9saT5cXG4gICAgICAgIDwvbmctdGVtcGxhdGU+XFxuICAgICAgPC9uZy1jb250YWluZXI+XFxuICAgIDwvdWw+XFxuICAgIDxyb3V0ZXItb3V0bGV0Pjwvcm91dGVyLW91dGxldD5cXG4gIFwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCIucm91dGUtdGFic2V0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7bGlzdC1zdHlsZS10eXBlOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowfS5yb3V0ZS10YWJzZXQgLnJvdXRlLXRhYnttYXJnaW4tYm90dG9tOi0xcHg7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzowfS5yb3V0ZS10YWJzZXQgLnJvdXRlLXRhYi5hY3RpdmUgYTo6YmVmb3Jle2Rpc3BsYXk6YmxvY2t9LnJvdXRlLXRhYnNldCAucm91dGUtdGFiIGF7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1kZWNvcmF0aW9uOm5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2t9LnJvdXRlLXRhYnNldCAucm91dGUtdGFiIGE6OmJlZm9yZXtwb3NpdGlvbjphYnNvbHV0ZTtjb250ZW50OicnO3dpZHRoOjEwMCU7Ym9yZGVyLXJhZGl1czozcHg7Ym90dG9tOi0ycHg7bGVmdDowfS5yb3V0ZS10YWJzZXQgLnJvdXRlLXRhYiBhIG5iLWljb257dmVydGljYWwtYWxpZ246bWlkZGxlfVtkaXI9bHRyXSA6aG9zdCAudGFiLWxpbmsgbmItaWNvbitzcGFue21hcmdpbi1sZWZ0Oi41cmVtfVtkaXI9cnRsXSA6aG9zdCAudGFiLWxpbmsgbmItaWNvbitzcGFue21hcmdpbi1yaWdodDouNXJlbX06aG9zdCguZnVsbC13aWR0aCkgLnJvdXRlLXRhYnNldHtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iUm91dGVUYWJzZXRDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlJvdXRlVGFic2V0Q29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iUm91dGVUYWJzZXRNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJSb3V0ZVRhYnNldE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJSb3V0ZVRhYnNldE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJJY29uTW9kdWxlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgIE5iUm91dGVUYWJzZXRDb21wb25lbnQsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgIE5iUm91dGVUYWJzZXRDb21wb25lbnQsXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KVxuICAgIF0sIE5iUm91dGVUYWJzZXRNb2R1bGUpO1xuICAgIHJldHVybiBOYlJvdXRlVGFic2V0TW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBTaWRlYmFyIHNlcnZpY2UuXG4gKlxuICogUm9vdCBtb2R1bGUgc2VydmljZSB0byBjb250cm9sIHRoZSBzaWRlYmFyIGZyb20gYW55IHBhcnQgb2YgdGhlIGFwcC5cbiAqXG4gKiBBbGxvd3MgeW91IHRvIGNoYW5nZSBzaWRlYmFyIHN0YXRlIGR5bmFtaWNhbGx5IGZyb20gYW55IHBhcnQgb2YgdGhlIGFwcDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2lkZWJhciBTdGF0ZSwgc2lkZWJhci9zaWRlYmFyLXRvZ2dsZS5jb21wb25lbnQpXG4gKi9cbnZhciBOYlNpZGViYXJTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU2lkZWJhclNlcnZpY2UoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuZXhwYW5kJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuY29sbGFwc2UkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5jb21wYWN0JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZSB0byB0b2dnbGUgZXZlbnRzXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHsgY29tcGFjdDogYm9vbGVhbiwgdGFnOiBzdHJpbmcgfT5cbiAgICAgKi9cbiAgICBOYlNpZGViYXJTZXJ2aWNlLnByb3RvdHlwZS5vblRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlJC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIGV4cGFuZCBldmVudHNcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHsgdGFnOiBzdHJpbmcgfT5cbiAgICAgKi9cbiAgICBOYlNpZGViYXJTZXJ2aWNlLnByb3RvdHlwZS5vbkV4cGFuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwYW5kJC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIGNvbGxhcHNlIGV2ZW5zXG4gICAgICogQHJldHVybnMgT2JzZXJ2YWJsZTx7IHRhZzogc3RyaW5nIH0+XG4gICAgICovXG4gICAgTmJTaWRlYmFyU2VydmljZS5wcm90b3R5cGUub25Db2xsYXBzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2UkLnBpcGUoc2hhcmUoKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gY29tcGFjdCBldmVuc1xuICAgICAqIEByZXR1cm5zIE9ic2VydmFibGU8eyB0YWc6IHN0cmluZyB9PlxuICAgICAqL1xuICAgIE5iU2lkZWJhclNlcnZpY2UucHJvdG90eXBlLm9uQ29tcGFjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFjdCQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBhIHNpZGViYXJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbXBhY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIElmIHlvdSBoYXZlIG11bHRpcGxlIHNpZGViYXJzIG9uIHRoZSBwYWdlLCBtYXJrIHRoZW0gd2l0aCBgdGFnYCBpbnB1dCBwcm9wZXJ0eSBhbmQgcGFzcyBpdCBoZXJlXG4gICAgICogdG8gc3BlY2lmeSB3aGljaCBzaWRlYmFyIHlvdSB3YW50IHRvIGNvbnRyb2xcbiAgICAgKi9cbiAgICBOYlNpZGViYXJTZXJ2aWNlLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoY29tcGFjdCwgdGFnKSB7XG4gICAgICAgIGlmIChjb21wYWN0ID09PSB2b2lkIDApIHsgY29tcGFjdCA9IGZhbHNlOyB9XG4gICAgICAgIHRoaXMudG9nZ2xlJC5uZXh0KHsgY29tcGFjdDogY29tcGFjdCwgdGFnOiB0YWcgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeHBhbmRzIGEgc2lkZWJhclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgSWYgeW91IGhhdmUgbXVsdGlwbGUgc2lkZWJhcnMgb24gdGhlIHBhZ2UsIG1hcmsgdGhlbSB3aXRoIGB0YWdgIGlucHV0IHByb3BlcnR5IGFuZCBwYXNzIGl0IGhlcmVcbiAgICAgKiB0byBzcGVjaWZ5IHdoaWNoIHNpZGViYXIgeW91IHdhbnQgdG8gY29udHJvbFxuICAgICAqL1xuICAgIE5iU2lkZWJhclNlcnZpY2UucHJvdG90eXBlLmV4cGFuZCA9IGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgdGhpcy5leHBhbmQkLm5leHQoeyB0YWc6IHRhZyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbGxhcHNlcyBhIHNpZGViYXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIElmIHlvdSBoYXZlIG11bHRpcGxlIHNpZGViYXJzIG9uIHRoZSBwYWdlLCBtYXJrIHRoZW0gd2l0aCBgdGFnYCBpbnB1dCBwcm9wZXJ0eSBhbmQgcGFzcyBpdCBoZXJlXG4gICAgICogdG8gc3BlY2lmeSB3aGljaCBzaWRlYmFyIHlvdSB3YW50IHRvIGNvbnRyb2xcbiAgICAgKi9cbiAgICBOYlNpZGViYXJTZXJ2aWNlLnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZSQubmV4dCh7IHRhZzogdGFnIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZXMgc2lkZWJhciBjb21wYWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyBJZiB5b3UgaGF2ZSBtdWx0aXBsZSBzaWRlYmFycyBvbiB0aGUgcGFnZSwgbWFyayB0aGVtIHdpdGggYHRhZ2AgaW5wdXQgcHJvcGVydHkgYW5kIHBhc3MgaXQgaGVyZVxuICAgICAqIHRvIHNwZWNpZnkgd2hpY2ggc2lkZWJhciB5b3Ugd2FudCB0byBjb250cm9sXG4gICAgICovXG4gICAgTmJTaWRlYmFyU2VydmljZS5wcm90b3R5cGUuY29tcGFjdCA9IGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgdGhpcy5jb21wYWN0JC5uZXh0KHsgdGFnOiB0YWcgfSk7XG4gICAgfTtcbiAgICBOYlNpZGViYXJTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKVxuICAgIF0sIE5iU2lkZWJhclNlcnZpY2UpO1xuICAgIHJldHVybiBOYlNpZGViYXJTZXJ2aWNlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBTaWRlYmFyIGhlYWRlciBjb250YWluZXIuXG4gKlxuICogUGxhY2Vob2xkZXIgd2hpY2ggY29udGFpbnMgYSBzaWRlYmFyIGhlYWRlciBjb250ZW50LFxuICogcGxhY2VkIGF0IHRoZSB2ZXJ5IHRvcCBvZiB0aGUgc2lkZWJhciBvdXRzaWRlIG9mIHRoZSBzY3JvbGwgYXJlYS5cbiAqL1xudmFyIE5iU2lkZWJhckhlYWRlckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNpZGViYXJIZWFkZXJDb21wb25lbnQoKSB7XG4gICAgfVxuICAgIE5iU2lkZWJhckhlYWRlckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zaWRlYmFyLWhlYWRlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYlNpZGViYXJIZWFkZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlNpZGViYXJIZWFkZXJDb21wb25lbnQ7XG59KCkpO1xuLyoqXG4gKiBTaWRlYmFyIGZvb3RlciBjb250YWluZXIuXG4gKlxuICogUGxhY2Vob2xkZXIgd2hpY2ggY29udGFpbnMgYSBzaWRlYmFyIGZvb3RlciBjb250ZW50LFxuICogcGxhY2VkIGF0IHRoZSB2ZXJ5IGJvdHRvbSBvZiB0aGUgc2lkZWJhciBvdXRzaWRlIG9mIHRoZSBzY3JvbGwgYXJlYS5cbiAqL1xudmFyIE5iU2lkZWJhckZvb3RlckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNpZGViYXJGb290ZXJDb21wb25lbnQoKSB7XG4gICAgfVxuICAgIE5iU2lkZWJhckZvb3RlckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zaWRlYmFyLWZvb3RlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYlNpZGViYXJGb290ZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlNpZGViYXJGb290ZXJDb21wb25lbnQ7XG59KCkpO1xuLyoqXG4gKiBMYXlvdXQgc2lkZWJhciBjb21wb25lbnQuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgc2lkZWJhci9zaWRlYmFyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlNpZGViYXJNb2R1bGUuZm9yUm9vdCgpYCB0byB5b3VyIGFwcCBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU2lkZWJhck1vZHVsZS5mb3JSb290KCksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICogYW5kIGBOYlNpZGViYXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUgd2hlcmUgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgc2hvd246XG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU2lkZWJhck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogU2lkZWJhciBjYW4gYmUgcGxhY2VkIG9uIHRoZSBsZWZ0IG9yIHRoZSByaWdodCBzaWRlIG9mIHRoZSBsYXlvdXQsXG4gKiBvciBvbiBzdGFydC9lbmQgcG9zaXRpb24gb2YgbGF5b3V0IChkZXBlbmRzIG9uIGRvY3VtZW50IGRpcmVjdGlvbiwgbGVmdCB0byByaWdodCBvciByaWdodCB0byBsZWZ0KVxuICogSXQgY2FuIGJlIGZpeGVkIChzaG93biBhYm92ZSB0aGUgY29udGVudCkgb3IgY2FuIHB1c2ggdGhlIGxheW91dCB3aGVuIG9wZW5lZC5cbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgc3RhdGVzIC0gYGV4cGFuZGVkYCwgYGNvbGxhcHNlZGAsIGBjb21wYWN0ZWRgLlxuICogQnkgZGVmYXVsdCBzaWRlYmFyIGNvbnRlbnQgaXMgZml4ZWQgYW5kIHNhdmVzIGl0cyBwb3NpdGlvbiB3aGlsZSB0aGUgcGFnZSBpcyBiZWluZyBzY3JvbGxlZC5cbiAqXG4gKiBDb21wYWN0ZWQgc2lkZWJhciBleGFtcGxlOlxuICogQHN0YWNrZWQtZXhhbXBsZShDb21wYWN0ZWQgU2lkZWJhciwgc2lkZWJhci9zaWRlYmFyLWNvbXBhY3RlZC5jb21wb25lbnQpXG4gKlxuICogU2lkZWJhciBhbHNvIHN1cHBvcnRzIGEgYHJlc3BvbnNpdmVgIGJlaGF2aW9yLCBsaXN0ZW5pbmcgdG8gd2luZG93IHNpemUgY2hhbmdlIGFuZCBjaGFuZ2luZyBpdHMgc2l6ZSByZXNwZWN0YWJseS5cbiAqXG4gKiBJbiBhIHBhaXIgd2l0aCBoZWFkZXIgaXQgaXMgcG9zc2libGUgdG8gc2V0dXAgYSBjb25maWd1cmF0aW9uIHdoZW4gaGVhZGVyIGlzIHBsYWNlZCBvbiBhIHNpZGUgb2YgdGhlIHNpZGViYXJcbiAqIGFuZCBub3Qgb24gdG9wIG9mIGl0LiBUbyBhY2hpZXZlIHRoaXMgc2ltcGx5IHB1dCBhIGBzdWJoZWFkZXJgIHByb3BlcnR5IHRvIHRoZSBoZWFkZXIgbGlrZSB0aGlzOlxuICogYGBgaHRtbFxuICogPG5iLWxheW91dC1oZWFkZXIgc3ViaGVhZGVyPjwvbmItbGF5b3V0LWhlYWRlcj5cbiAqIGBgYFxuICogQHN0YWNrZWQtZXhhbXBsZShTdWJoZWFkZXIsIGxheW91dC9sYXlvdXQtc2lkZWJhci1zdWJoZWFkZXIuY29tcG9uZW50KVxuICogTm90ZSB0aGF0IGluIHN1Y2ggY29uZmlndXJhdGlvbiBzaWRlYmFyIHNoYWRvdyBpcyByZW1vdmVkIGFuZCBoZWFkZXIgY2Fubm90IGJlIG1ha2UgYGZpeGVkYC5cbiAqXG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKFJpZ2h0IFNpZGViYXIsIHNpZGViYXIvc2lkZWJhci1yaWdodC5jb21wb25lbnQpXG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKEZpeGVkIFNpZGViYXIsIHNpZGViYXIvc2lkZWJhci1maXhlZC5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHNpZGViYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNpZGViYXItdGV4dC1jb2xvcjpcbiAqIHNpZGViYXItdGV4dC1mb250LWZhbWlseTpcbiAqIHNpZGViYXItdGV4dC1mb250LXNpemU6XG4gKiBzaWRlYmFyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzaWRlYmFyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzaWRlYmFyLWhlaWdodDpcbiAqIHNpZGViYXItd2lkdGg6XG4gKiBzaWRlYmFyLXdpZHRoLWNvbXBhY3Q6XG4gKiBzaWRlYmFyLXBhZGRpbmc6XG4gKiBzaWRlYmFyLWhlYWRlci1oZWlnaHQ6XG4gKiBzaWRlYmFyLWZvb3Rlci1oZWlnaHQ6XG4gKiBzaWRlYmFyLXNoYWRvdzpcbiAqIHNpZGViYXItbWVudS1pdGVtLWhpZ2hsaWdodC1jb2xvcjpcbiAqIHNpZGViYXItc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzaWRlYmFyLXNjcm9sbGJhci1jb2xvcjpcbiAqIHNpZGViYXItc2Nyb2xsYmFyLXdpZHRoOlxuICovXG52YXIgTmJTaWRlYmFyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU2lkZWJhckNvbXBvbmVudChzaWRlYmFyU2VydmljZSwgdGhlbWVTZXJ2aWNlLCBlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuc2lkZWJhclNlcnZpY2UgPSBzaWRlYmFyU2VydmljZTtcbiAgICAgICAgdGhpcy50aGVtZVNlcnZpY2UgPSB0aGVtZVNlcnZpY2U7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMucmVzcG9uc2l2ZVZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckZpeGVkVmFsdWUgPSB0cnVlO1xuICAgICAgICB0aGlzLmZpeGVkVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yaWdodFZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGVmdFZhbHVlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdGFydFZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5kVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgLy8gVE9ETzogZ2V0IHdpZHRoIGJ5IHRoZSBrZXkgYW5kIGRlZmluZSBvbmx5IG1heCB3aWR0aCBmb3IgdGhlIHRhYmxldHMgYW5kIG1vYmlsZXNcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRyb2xzIG9uIHdoaWNoIHNjcmVlbiBzaXplcyBzaWRlYmFyIHNob3VsZCBiZSBzd2l0Y2hlZCB0byBjb21wYWN0ZWQgc3RhdGUuXG4gICAgICAgICAqIFdvcmtzIG9ubHkgd2hlbiByZXNwb25zaXZlIG1vZGUgaXMgb24uXG4gICAgICAgICAqIERlZmF1bHQgdmFsdWVzIGFyZSBgWyd4cycsICdpcycsICdzbScsICdtZCcsICdsZyddYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUgc3RyaW5nW11cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29tcGFjdGVkQnJlYWtwb2ludHMgPSBbJ3hzJywgJ2lzJywgJ3NtJywgJ21kJywgJ2xnJ107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyBvbiB3aGljaCBzY3JlZW4gc2l6ZXMgc2lkZWJhciBzaG91bGQgYmUgc3dpdGNoZWQgdG8gY29sbGFwc2VkIHN0YXRlLlxuICAgICAgICAgKiBXb3JrcyBvbmx5IHdoZW4gcmVzcG9uc2l2ZSBtb2RlIGlzIG9uLlxuICAgICAgICAgKiBEZWZhdWx0IHZhbHVlcyBhcmUgYFsneHMnLCAnaXMnXWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHN0cmluZ1tdXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbGxhcHNlZEJyZWFrcG9pbnRzID0gWyd4cycsICdpcyddO1xuICAgICAgICB0aGlzLnJlc3BvbnNpdmVTdGF0ZSA9IE5iU2lkZWJhckNvbXBvbmVudF8xLlJFU1BPTlNJVkVfU1RBVEVfUEM7XG4gICAgfVxuICAgIE5iU2lkZWJhckNvbXBvbmVudF8xID0gTmJTaWRlYmFyQ29tcG9uZW50O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHtcbiAgICAgICAgLy8gVE9ETzogcmVuYW1lIHN0YXRlVmFsdWUgdG8gc3RhdGUgKHRha2UgYSBsb29rIHRvIHRoZSBjYXJkIGNvbXBvbmVudClcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVZhbHVlID09PSBOYlNpZGViYXJDb21wb25lbnRfMS5TVEFURV9FWFBBTkRFRDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sbGFwc2VkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVZhbHVlID09PSBOYlNpZGViYXJDb21wb25lbnRfMS5TVEFURV9DT0xMQVBTRUQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbXBhY3RlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVWYWx1ZSA9PT0gTmJTaWRlYmFyQ29tcG9uZW50XzEuU1RBVEVfQ09NUEFDVEVEO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyaWdodFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQbGFjZXMgc2lkZWJhciBvbiB0aGUgcmlnaHQgc2lkZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5yaWdodFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgICAgICB0aGlzLmxlZnRWYWx1ZSA9ICF0aGlzLnJpZ2h0VmFsdWU7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW5kVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwibGVmdFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQbGFjZXMgc2lkZWJhciBvbiB0aGUgbGVmdCBzaWRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICAgICAgdGhpcy5yaWdodFZhbHVlID0gIXRoaXMubGVmdFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zdGFydFZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVuZFZhbHVlID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXJ0XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBsYWNlcyBzaWRlYmFyIG9uIHRoZSBzdGFydCBlZGdlIG9mIGxheW91dFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgICAgICB0aGlzLmVuZFZhbHVlID0gIXRoaXMuc3RhcnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMubGVmdFZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZW5kXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBsYWNlcyBzaWRlYmFyIG9uIHRoZSBlbmQgZWRnZSBvZiBsYXlvdXRcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRWYWx1ZSA9ICF0aGlzLmVuZFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5sZWZ0VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmlnaHRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaXhlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYWtlcyBzaWRlYmFyIGZpeGVkIChzaG93biBhYm92ZSB0aGUgbGF5b3V0IGNvbnRlbnQpXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmZpeGVkVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udGFpbmVyRml4ZWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogTWFrZXMgc2lkZWJhciBjb250YWluZXIgZml4ZWRcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRml4ZWRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsIHNpZGViYXIgc3RhdGUsIGBleHBhbmRlZGB8YGNvbGxhcHNlZGB8YGNvbXBhY3RlZGBcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVZhbHVlID0gdmFsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZXNwb25zaXZlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1ha2VzIHNpZGViYXIgbGlzdGVuIHRvIG1lZGlhIHF1ZXJ5IGV2ZW50cyBhbmQgY2hhbmdlIGl0cyBiZWhhdmlvdXJcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2l2ZVZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUudG9nZ2xlUmVzcG9uc2l2ZSA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhUXVlcnlTdWJzY3JpcHRpb24gPSB0aGlzLm9uTWVkaWFRdWVyeUNoYW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm1lZGlhUXVlcnlTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWFRdWVyeVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMucmVzcG9uc2l2ZSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVSZXNwb25zaXZlKHRoaXMucmVzcG9uc2l2ZVZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zaWRlYmFyU2VydmljZS5vblRvZ2dsZSgpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLnRhZyB8fCBfdGhpcy50YWcgPT09IGRhdGEudGFnKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlKGRhdGEuY29tcGFjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNpZGViYXJTZXJ2aWNlLm9uRXhwYW5kKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMudGFnIHx8IF90aGlzLnRhZyA9PT0gZGF0YS50YWcpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2lkZWJhclNlcnZpY2Uub25Db2xsYXBzZSgpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLnRhZyB8fCBfdGhpcy50YWcgPT09IGRhdGEudGFnKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2lkZWJhclNlcnZpY2Uub25Db21wYWN0KClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMudGFnIHx8IF90aGlzLnRhZyA9PT0gZGF0YS50YWcpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb21wYWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICAgICAgaWYgKHRoaXMubWVkaWFRdWVyeVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5tZWRpYVF1ZXJ5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIFRPRE86IHRoaXMgaXMgbW9yZSBvZiBhIHdvcmthcm91bmQsIHNob3VsZCBiZSBhIGJldHRlciB3YXkgdG8gbWFrZSBjb21wb25lbnRzIGNvbW11bmljYXRlIHRvIGVhY2ggb3RoZXJcbiAgICBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIG1lbnUgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCduYi1tZW51Jyk7XG4gICAgICAgIGlmIChtZW51ICYmIG1lbnUuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSB0aGlzLmdldE1lbnVMaW5rKGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBpZiAobGluayAmJiBsaW5rLm5leHRFbGVtZW50U2libGluZyAmJiBsaW5rLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtaXRlbXMnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2lkZWJhclNlcnZpY2UuZXhwYW5kKHRoaXMudGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29sbGFwc2VzIHRoZSBzaWRlYmFyXG4gICAgICovXG4gICAgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE5iU2lkZWJhckNvbXBvbmVudF8xLlNUQVRFX0NPTExBUFNFRDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEV4cGFuZHMgdGhlIHNpZGViYXJcbiAgICAgKi9cbiAgICBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLmV4cGFuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE5iU2lkZWJhckNvbXBvbmVudF8xLlNUQVRFX0VYUEFOREVEO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29tcGFjdHMgdGhlIHNpZGViYXIgKG1pbmltaXplcylcbiAgICAgKi9cbiAgICBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLmNvbXBhY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBOYlNpZGViYXJDb21wb25lbnRfMS5TVEFURV9DT01QQUNURUQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHNpZGViYXIgc3RhdGUgKGV4cGFuZGVkfGNvbGxhcHNlZHxjb21wYWN0ZWQpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb21wYWN0IElmIHRydWUsIHRoZW4gc2lkZWJhciBzdGF0ZSB3aWxsIGJlIGNoYW5nZWQgYmV0d2VlbiBleHBhbmRlZCAmIGNvbXBhY3RlZCxcbiAgICAgKiBvdGhlcndpc2UgLSBiZXR3ZWVuIGV4cGFuZGVkICYgY29sbGFwc2VkLiBGYWxzZSBieSBkZWZhdWx0LlxuICAgICAqXG4gICAgICogVG9nZ2xlIHNpZGViYXIgc3RhdGVcbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogdGhpcy5zaWRlYmFyLnRvZ2dsZSh0cnVlKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChjb21wYWN0KSB7XG4gICAgICAgIGlmIChjb21wYWN0ID09PSB2b2lkIDApIHsgY29tcGFjdCA9IGZhbHNlOyB9XG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNpdmVFbmFibGVkKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc3BvbnNpdmVTdGF0ZSA9PT0gTmJTaWRlYmFyQ29tcG9uZW50XzEuUkVTUE9OU0lWRV9TVEFURV9NT0JJTEUpIHtcbiAgICAgICAgICAgICAgICBjb21wYWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsb3NlZFN0YXRlcyA9IFtOYlNpZGViYXJDb21wb25lbnRfMS5TVEFURV9DT01QQUNURUQsIE5iU2lkZWJhckNvbXBvbmVudF8xLlNUQVRFX0NPTExBUFNFRF07XG4gICAgICAgIGlmIChjb21wYWN0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gY2xvc2VkU3RhdGVzLmluY2x1ZGVzKHRoaXMuc3RhdGVWYWx1ZSkgP1xuICAgICAgICAgICAgICAgIE5iU2lkZWJhckNvbXBvbmVudF8xLlNUQVRFX0VYUEFOREVEIDogTmJTaWRlYmFyQ29tcG9uZW50XzEuU1RBVEVfQ09NUEFDVEVEO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IGNsb3NlZFN0YXRlcy5pbmNsdWRlcyh0aGlzLnN0YXRlVmFsdWUpID9cbiAgICAgICAgICAgICAgICBOYlNpZGViYXJDb21wb25lbnRfMS5TVEFURV9FWFBBTkRFRCA6IE5iU2lkZWJhckNvbXBvbmVudF8xLlNUQVRFX0NPTExBUFNFRDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZS5vbk1lZGlhUXVlcnlDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy50aGVtZVNlcnZpY2Uub25NZWRpYVF1ZXJ5Q2hhbmdlKClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgcHJldiA9IF9hWzBdLCBjdXJyZW50ID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgaXNDb2xsYXBzZWQgPSBfdGhpcy5jb2xsYXBzZWRCcmVha3BvaW50cy5pbmNsdWRlcyhjdXJyZW50Lm5hbWUpO1xuICAgICAgICAgICAgdmFyIGlzQ29tcGFjdGVkID0gX3RoaXMuY29tcGFjdGVkQnJlYWtwb2ludHMuaW5jbHVkZXMoY3VycmVudC5uYW1lKTtcbiAgICAgICAgICAgIGlmIChpc0NvbXBhY3RlZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmZpeGVkID0gX3RoaXMuY29udGFpbmVyRml4ZWRWYWx1ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb21wYWN0KCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucmVzcG9uc2l2ZVN0YXRlID0gTmJTaWRlYmFyQ29tcG9uZW50XzEuUkVTUE9OU0lWRV9TVEFURV9UQUJMRVQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5maXhlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2UoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXNwb25zaXZlU3RhdGUgPSBOYlNpZGViYXJDb21wb25lbnRfMS5SRVNQT05TSVZFX1NUQVRFX01PQklMRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNDb2xsYXBzZWQgJiYgIWlzQ29tcGFjdGVkICYmIHByZXYud2lkdGggPCBjdXJyZW50LndpZHRoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZml4ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXNwb25zaXZlU3RhdGUgPSBOYlNpZGViYXJDb21wb25lbnRfMS5SRVNQT05TSVZFX1NUQVRFX1BDO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUucmVzcG9uc2l2ZUVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNpdmVWYWx1ZTtcbiAgICB9O1xuICAgIE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUuZ2V0TWVudUxpbmsgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoIWVsZW1lbnQgfHwgZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICduYi1tZW51Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZW51TGluayhlbGVtZW50LnBhcmVudEVsZW1lbnQpO1xuICAgIH07XG4gICAgdmFyIE5iU2lkZWJhckNvbXBvbmVudF8xO1xuICAgIE5iU2lkZWJhckNvbXBvbmVudC5TVEFURV9FWFBBTkRFRCA9ICdleHBhbmRlZCc7XG4gICAgTmJTaWRlYmFyQ29tcG9uZW50LlNUQVRFX0NPTExBUFNFRCA9ICdjb2xsYXBzZWQnO1xuICAgIE5iU2lkZWJhckNvbXBvbmVudC5TVEFURV9DT01QQUNURUQgPSAnY29tcGFjdGVkJztcbiAgICBOYlNpZGViYXJDb21wb25lbnQuUkVTUE9OU0lWRV9TVEFURV9NT0JJTEUgPSAnbW9iaWxlJztcbiAgICBOYlNpZGViYXJDb21wb25lbnQuUkVTUE9OU0lWRV9TVEFURV9UQUJMRVQgPSAndGFibGV0JztcbiAgICBOYlNpZGViYXJDb21wb25lbnQuUkVTUE9OU0lWRV9TVEFURV9QQyA9ICdwYyc7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5maXhlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImZpeGVkVmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnJpZ2h0JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwicmlnaHRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubGVmdCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImxlZnRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhcnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGFydFZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5lbmQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJlbmRWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZXhwYW5kZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuY29sbGFwc2VkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb2xsYXBzZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5jb21wYWN0ZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbXBhY3RlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwicmlnaHRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImxlZnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXJ0XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJlbmRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImZpeGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250YWluZXJGaXhlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXRlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJTaWRlYmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZXNwb25zaXZlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU2lkZWJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFnXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbXBhY3RlZEJyZWFrcG9pbnRzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSlcbiAgICBdLCBOYlNpZGViYXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbGxhcHNlZEJyZWFrcG9pbnRzXCIsIHZvaWQgMCk7XG4gICAgTmJTaWRlYmFyQ29tcG9uZW50ID0gTmJTaWRlYmFyQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc2lkZWJhcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiBjbGFzcz1cXFwibWFpbi1jb250YWluZXJcXFwiXFxuICAgICAgICAgW2NsYXNzLm1haW4tY29udGFpbmVyLWZpeGVkXT1cXFwiY29udGFpbmVyRml4ZWRWYWx1ZVxcXCI+XFxuICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1zaWRlYmFyLWhlYWRlclxcXCI+PC9uZy1jb250ZW50PlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcInNjcm9sbGFibGVcXFwiIChjbGljayk9XFxcIm9uQ2xpY2soJGV2ZW50KVxcXCI+XFxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgPC9kaXY+XFxuICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1zaWRlYmFyLWZvb3RlclxcXCI+PC9uZy1jb250ZW50PlxcbiAgICA8L2Rpdj5cXG4gIFwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO292ZXJmbG93OmhpZGRlbjt6LWluZGV4OmF1dG87b3JkZXI6MH06aG9zdCAuc2Nyb2xsYWJsZXtvdmVyZmxvdy15OmF1dG87b3ZlcmZsb3cteDpoaWRkZW47ZmxleDoxfTpob3N0IC5tYWluLWNvbnRhaW5lcnt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgMCwgMCk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn06aG9zdCAubWFpbi1jb250YWluZXItZml4ZWR7cG9zaXRpb246Zml4ZWR9Omhvc3QucmlnaHR7bWFyZ2luLXJpZ2h0OjA7bWFyZ2luLWxlZnQ6YXV0b31bZGlyPWx0cl0gOmhvc3QucmlnaHR7b3JkZXI6NH1bZGlyPXJ0bF0gOmhvc3QucmlnaHR7b3JkZXI6MH06aG9zdC5lbmR7b3JkZXI6NH1bZGlyPWx0cl0gOmhvc3QuZW5ke21hcmdpbi1yaWdodDowO21hcmdpbi1sZWZ0OmF1dG99W2Rpcj1ydGxdIDpob3N0LmVuZHttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDphdXRvfTpob3N0LmZpeGVke3Bvc2l0aW9uOmZpeGVkO2hlaWdodDoxMDAlO3otaW5kZXg6OTk5O3RvcDowO2JvdHRvbTowO2xlZnQ6MH06aG9zdC5maXhlZC5yaWdodHtyaWdodDowfVtkaXI9bHRyXSA6aG9zdC5maXhlZC5zdGFydHtsZWZ0OjB9W2Rpcj1ydGxdIDpob3N0LmZpeGVkLnN0YXJ0e3JpZ2h0OjB9W2Rpcj1sdHJdIDpob3N0LmZpeGVkLmVuZHtyaWdodDowfVtkaXI9cnRsXSA6aG9zdC5maXhlZC5lbmR7bGVmdDowfTpob3N0IDo6bmctZGVlcCBuYi1zaWRlYmFyLWZvb3RlcnttYXJnaW4tdG9wOmF1dG87ZGlzcGxheTpibG9ja306aG9zdCA6Om5nLWRlZXAgbmItc2lkZWJhci1oZWFkZXJ7ZGlzcGxheTpibG9ja31cXG5cIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJTaWRlYmFyU2VydmljZSxcbiAgICAgICAgICAgIE5iVGhlbWVTZXJ2aWNlLFxuICAgICAgICAgICAgRWxlbWVudFJlZl0pXG4gICAgXSwgTmJTaWRlYmFyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJTaWRlYmFyQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5CX1NJREVCQVJfQ09NUE9ORU5UUyA9IFtcbiAgICBOYlNpZGViYXJDb21wb25lbnQsXG4gICAgTmJTaWRlYmFyRm9vdGVyQ29tcG9uZW50LFxuICAgIE5iU2lkZWJhckhlYWRlckNvbXBvbmVudCxcbl07XG52YXIgTkJfU0lERUJBUl9QUk9WSURFUlMgPSBbXG4gICAgTmJTaWRlYmFyU2VydmljZSxcbl07XG52YXIgTmJTaWRlYmFyTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU2lkZWJhck1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJTaWRlYmFyTW9kdWxlXzEgPSBOYlNpZGViYXJNb2R1bGU7XG4gICAgTmJTaWRlYmFyTW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJTaWRlYmFyTW9kdWxlXzEsXG4gICAgICAgICAgICBwcm92aWRlcnM6IF9fc3ByZWFkQXJyYXlzKE5CX1NJREVCQVJfUFJPVklERVJTKSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBOYlNpZGViYXJNb2R1bGVfMTtcbiAgICBOYlNpZGViYXJNb2R1bGUgPSBOYlNpZGViYXJNb2R1bGVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBfX3NwcmVhZEFycmF5cyhOQl9TSURFQkFSX0NPTVBPTkVOVFMpLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoTkJfU0lERUJBUl9DT01QT05FTlRTKSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlNpZGViYXJNb2R1bGUpO1xuICAgIHJldHVybiBOYlNpZGViYXJNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFNwZWNpZmljIHRhYiBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIDxuYi10YWIgdGFiVGl0bGU9XCJVc2Vyc1wiXG4gKiAgIGJhZGdlVGV4dD1cIjk5K1wiXG4gKiAgIGJhZGdlU3RhdHVzPVwiZGFuZ2VyXCI+XG4gKiAgIDxwPkxpc3Qgb2YgPHN0cm9uZz51c2Vyczwvc3Ryb25nPi48L3A+XG4gKiA8L25iLXRhYj5cbiBgYGBcbiAqL1xudmFyIE5iVGFiQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVGFiQ29tcG9uZW50KCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzcG9uc2l2ZVZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGlzYWJsZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQmFkZ2Ugc3RhdHVzIChhZGRzIHNwZWNpZmljIHN0eWxlcyk6XG4gICAgICAgICAqICdwcmltYXJ5JywgJ2luZm8nLCAnc3VjY2VzcycsICd3YXJuaW5nJywgJ2RhbmdlcidcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYWRnZVN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIHRoaXMuaW5pdCA9IGZhbHNlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEl0ZW0gaXMgZGlzYWJsZWQgYW5kIGNhbm5vdCBiZSBvcGVuZWQuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZFZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcInJlc3BvbnNpdmVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNpdmVWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cgb25seSBpY29ucyB3aGVuIHdpZHRoIGlzIHNtYWxsZXIgdGhhbiBgdGFicy1pY29uLW9ubHktbWF4LXdpZHRoYFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5yZXNwb25zaXZlVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVGFiQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3RpdmVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGFjdGl2ZSB0YWJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZVZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVGFiQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXp5TG9hZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMYXp5IGxvYWQgY29udGVudCBiZWZvcmUgdGFiIHNlbGVjdGlvblxuICAgICAgICAgKiBUT0RPOiByZW5hbWUsIGFzIGxhenkgaXMgYnkgZGVmYXVsdCwgYW5kIHRoaXMgaXMgbW9yZSBgaW5zdGFudCBsb2FkYFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmluaXQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcInRhYlRpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcInRhYklkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcInRhYkljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ2Rpc2FibGVkJyksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5kaXNhYmxlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcInJlc3BvbnNpdmVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcInJvdXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5jb250ZW50LWFjdGl2ZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYlRhYkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYWN0aXZlVmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iVGFiQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3RpdmVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlRhYkNvbXBvbmVudC5wcm90b3R5cGUsIFwibGF6eUxvYWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUYWJDb21wb25lbnQucHJvdG90eXBlLCBcImJhZGdlVGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iVGFiQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYWRnZVN0YXR1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iVGFiQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYWRnZVBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgTmJUYWJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdGFiJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJpbml0XFxcIj5cXG4gICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgIDwvbmctY29udGFpbmVyPlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYlRhYkNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iVGFiQ29tcG9uZW50O1xufSgpKTtcbi8vIFRPRE86IENvbWJpbmUgdGFic2V0IHdpdGggcm91dGUtdGFic2V0LCBzbyB0aGF0IHdlIGNhbjpcbi8vIC0gaGF2ZSBzaW1pbGFyIGludGVyZmFjZVxuLy8gLSBlYXN5IHRvIG1pZ3JhdGUgZnJvbSBvbmUgdG8gYW5vdGhlclxuLy8gLSBjYW4gbWl4IHRoZW0gYm90aCAocm91dGUvY29udGVudCB0YWIpXG4vKipcbiAqXG4gKiBEeW5hbWljIHRhYnNldCBjb21wb25lbnQuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCB0YWJzZXQvdGFic2V0LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBCYXNpYyB0YWJzZXQgZXhhbXBsZVxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi10YWJzZXQ+XG4gKiAgPG5iLXRhYiB0YWJUaXRsZT1cIlNpbXBsZSBUYWIgIzFcIj5cbiAqICAgIFRhYiBjb250ZW50IDFcbiAqICA8L25iLXRhYj5cbiAqICA8bmItdGFiIHRhYlRpdGxlPVwiU2ltcGxlIFRhYiAjMlwiPlxuICogICAgVGFiIGNvbnRlbnQgMlxuICogIDwvbmItdGFiPlxuICogPC9uYi10YWJzZXQ+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlRhYnNldE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJUYWJzZXRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc2V0IGEgYmFkZ2UgdG8gYSBwYXJ0aWN1bGFyIHRhYjpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVGFiIFdpdGggQmFkZ2UsIHRhYnNldC90YWJzZXQtYmFkZ2UuY29tcG9uZW50KVxuICpcbiAqIGFuZCB3ZSBjYW4gc2V0IGl0IHRvIGZ1bGwgYSB3aWR0aCBvZiBhIHBhcmVudCBjb21wb25lbnRcbiAqIEBzdGFja2VkLWV4YW1wbGUoRnVsbCBXaWR0aCwgdGFic2V0L3RhYnNldC13aWR0aC5jb21wb25lbnQpXG4gKlxuICogYHRhYkljb25gIHNob3VsZCBiZSB1c2VkIHRvIGFkZCBhbiBpY29uIHRvIHRoZSB0YWIuIEljb24gY2FuIGFsc28gYmUgY29tYmluZWQgd2l0aCB0aXRsZS5cbiAqIGByZXNwb25zaXZlYCB0YWIgcHJvcGVydHkgaWYgc2V0IGFsbG93cyB5b3UgdG8gaGlkZSB0aGUgdGl0bGUgb24gc21hbGxlciBzY3JlZW5zXG4gKiAoYHRhYnMtaWNvbi1vbmx5LW1heC13aWR0aGAgcHJvcGVydHkpIGZvciBiZXR0ZXIgcmVzcG9uc2l2ZSBiZWhhdmlvdXIuIFlvdSBjYW4gb3BlbiB0aGUgZm9sbG93aW5nIGV4YW1wbGUgYW5kIG1ha2VcbiAqIHlvdXIgc2NyZWVuIHNtYWxsZXIgLSB0aXRsZXMgd2lsbCBiZSBoaWRkZW4gaW4gdGhlIGxhc3QgdGFic2V0IGluIHRoZSBsaXN0OlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSWNvbiwgdGFic2V0L3RhYnNldC1pY29uLmNvbXBvbmVudClcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGRpc2FibGUgYSB0YWIgdXNpbmcgYGRpc2FibGVkYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRGlzYWJsZWQgVGFiLCB0YWJzZXQvdGFic2V0LWRpc2FibGVkLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogdGFic2V0LWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWJzZXQtYm9yZGVyLXJhZGl1czpcbiAqIHRhYnNldC1zaGFkb3c6XG4gKiB0YWJzZXQtdGFiLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWJzZXQtdGFiLXBhZGRpbmc6XG4gKiB0YWJzZXQtdGFiLXRleHQtY29sb3I6XG4gKiB0YWJzZXQtdGFiLXRleHQtZm9udC1mYW1pbHk6XG4gKiB0YWJzZXQtdGFiLXRleHQtZm9udC1zaXplOlxuICogdGFic2V0LXRhYi10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdGFic2V0LXRhYi10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdGFic2V0LXRhYi10ZXh0LXRyYW5zZm9ybTpcbiAqIHRhYnNldC10YWItdW5kZXJsaW5lLXdpZHRoOlxuICogdGFic2V0LXRhYi11bmRlcmxpbmUtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFic2V0LXRhYi1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIHRhYnNldC10YWItYWN0aXZlLXVuZGVybGluZS1jb2xvcjpcbiAqIHRhYnNldC10YWItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhYnNldC10YWItZm9jdXMtdGV4dC1jb2xvcjpcbiAqIHRhYnNldC10YWItZm9jdXMtdW5kZXJsaW5lLWNvbG9yOlxuICogdGFic2V0LXRhYi1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFic2V0LXRhYi1ob3Zlci10ZXh0LWNvbG9yOlxuICogdGFic2V0LXRhYi1ob3Zlci11bmRlcmxpbmUtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWRpc2FibGVkLXVuZGVybGluZS1jb2xvcjpcbiAqIHRhYnNldC1kaXZpZGVyLWNvbG9yOlxuICogdGFic2V0LWRpdmlkZXItc3R5bGU6XG4gKiB0YWJzZXQtZGl2aWRlci13aWR0aDpcbiAqIHRhYnNldC1jb250ZW50LWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWJzZXQtY29udGVudC1wYWRkaW5nOlxuICogdGFic2V0LWNvbnRlbnQtdGV4dC1jb2xvcjpcbiAqIHRhYnNldC1jb250ZW50LXRleHQtZm9udC1mYW1pbHk6XG4gKiB0YWJzZXQtY29udGVudC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRhYnNldC1jb250ZW50LXRleHQtZm9udC13ZWlnaHQ6XG4gKiB0YWJzZXQtY29udGVudC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdGFic2V0LXNjcm9sbGJhci1jb2xvcjpcbiAqIHRhYnNldC1zY3JvbGxiYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhYnNldC1zY3JvbGxiYXItd2lkdGg6XG4gKiB0YWJzZXQtdGFiLXRleHQtaGlkZS1icmVha3BvaW50OlxuICovXG52YXIgTmJUYWJzZXRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJUYWJzZXRDb21wb25lbnQocm91dGUsIGNoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgICAgIHRoaXMucm91dGUgPSByb3V0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZiA9IGNoYW5nZURldGVjdG9yUmVmO1xuICAgICAgICB0aGlzLmZ1bGxXaWR0aFZhbHVlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuIHRhYiBpcyBzZWxlY3RlZFxuICAgICAgICAgKiBAdHlwZSBFdmVudEVtaXR0ZXI8YW55PlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VUYWIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRhYnNldENvbXBvbmVudC5wcm90b3R5cGUsIFwiZnVsbFdpZHRoXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRha2UgZnVsbCB3aWR0aCBvZiBhIHBhcmVudFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxXaWR0aFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8vIFRPRE86IHJlZmFjdG9yaW5nIHRoaXMgY29tcG9uZW50LCBhdm9pZCBjaGFuZ2UgZGV0ZWN0aW9uIGxvb3BcbiAgICBOYlRhYnNldENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlckNvbnRlbnRJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnJvdXRlLnBhcmFtc1xuICAgICAgICAgICAgLnBpcGUobWFwKGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50YWJzLmZpbmQoZnVuY3Rpb24gKHRhYikgeyByZXR1cm4gX3RoaXMucm91dGVQYXJhbSA/IHRhYi5yb3V0ZSA9PT0gcGFyYW1zW190aGlzLnJvdXRlUGFyYW1dIDogdGFiLmFjdGl2ZTsgfSk7XG4gICAgICAgIH0pLCBkZWxheSgwKSwgbWFwKGZ1bmN0aW9uICh0YWIpIHsgcmV0dXJuIHRhYiB8fCBfdGhpcy50YWJzLmZpcnN0OyB9KSwgZmlsdGVyKGZ1bmN0aW9uICh0YWIpIHsgcmV0dXJuICEhdGFiOyB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHRhYlRvU2VsZWN0KSB7XG4gICAgICAgICAgICBfdGhpcy5zZWxlY3RUYWIodGFiVG9TZWxlY3QpO1xuICAgICAgICAgICAgX3RoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy8gVE9ETzogbmF2aWdhdGUgdG8gcm91dGVQYXJhbVxuICAgIE5iVGFic2V0Q29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3RUYWIgPSBmdW5jdGlvbiAoc2VsZWN0ZWRUYWIpIHtcbiAgICAgICAgaWYgKCFzZWxlY3RlZFRhYi5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goZnVuY3Rpb24gKHRhYikgeyByZXR1cm4gdGFiLmFjdGl2ZSA9IHRhYiA9PT0gc2VsZWN0ZWRUYWI7IH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VUYWIuZW1pdChzZWxlY3RlZFRhYik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBDb250ZW50Q2hpbGRyZW4oTmJUYWJDb21wb25lbnQpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iVGFic2V0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5mdWxsLXdpZHRoJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iVGFic2V0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmdWxsV2lkdGhWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJUYWJzZXRDb21wb25lbnQucHJvdG90eXBlLCBcImZ1bGxXaWR0aFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlRhYnNldENvbXBvbmVudC5wcm90b3R5cGUsIFwicm91dGVQYXJhbVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlRhYnNldENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2hhbmdlVGFiXCIsIHZvaWQgMCk7XG4gICAgTmJUYWJzZXRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdGFic2V0JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8dWwgY2xhc3M9XFxcInRhYnNldFxcXCI+XFxuICAgICAgPGxpICpuZ0Zvcj1cXFwibGV0IHRhYiBvZiB0YWJzXFxcIlxcbiAgICAgICAgICAoY2xpY2spPVxcXCJzZWxlY3RUYWIodGFiKVxcXCJcXG4gICAgICAgICAgKGtleXVwLnNwYWNlKT1cXFwic2VsZWN0VGFiKHRhYilcXFwiXFxuICAgICAgICAgIChrZXl1cC5lbnRlcik9XFxcInNlbGVjdFRhYih0YWIpXFxcIlxcbiAgICAgICAgICBbY2xhc3MucmVzcG9uc2l2ZV09XFxcInRhYi5yZXNwb25zaXZlXFxcIlxcbiAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cXFwidGFiLmFjdGl2ZVxcXCJcXG4gICAgICAgICAgW2NsYXNzLmRpc2FibGVkXT1cXFwidGFiLmRpc2FibGVkXFxcIlxcbiAgICAgICAgICBbYXR0ci50YWJpbmRleF09XFxcInRhYi5kaXNhYmxlZCA/IC0xIDogMFxcXCJcXG4gICAgICAgICAgY2xhc3M9XFxcInRhYlxcXCI+XFxuICAgICAgICA8YSBocmVmIChjbGljayk9XFxcIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJ0YWItbGlua1xcXCI+XFxuICAgICAgICAgIDxuYi1pY29uICpuZ0lmPVxcXCJ0YWIudGFiSWNvblxcXCIgW2NvbmZpZ109XFxcInRhYi50YWJJY29uXFxcIj48L25iLWljb24+XFxuICAgICAgICAgIDxzcGFuICpuZ0lmPVxcXCJ0YWIudGFiVGl0bGVcXFwiIGNsYXNzPVxcXCJ0YWItdGV4dFxcXCI+e3sgdGFiLnRhYlRpdGxlIH19PC9zcGFuPlxcbiAgICAgICAgPC9hPlxcbiAgICAgICAgPG5iLWJhZGdlICpuZ0lmPVxcXCJ0YWIuYmFkZ2VUZXh0XFxcIlxcbiAgICAgICAgICBbdGV4dF09XFxcInRhYi5iYWRnZVRleHRcXFwiXFxuICAgICAgICAgIFtzdGF0dXNdPVxcXCJ0YWIuYmFkZ2VTdGF0dXNcXFwiXFxuICAgICAgICAgIFtwb3NpdGlvbl09XFxcInRhYi5iYWRnZVBvc2l0aW9uXFxcIj5cXG4gICAgICAgIDwvbmItYmFkZ2U+XFxuICAgICAgPC9saT5cXG4gICAgPC91bD5cXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi10YWJcXFwiPjwvbmctY29udGVudD5cXG4gIFwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmJsb2NrfTpob3N0LmZ1bGwtd2lkdGggLnRhYnNldHtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kfTpob3N0IDo6bmctZGVlcCBuYi10YWJ7ZmxleDoxOy1tcy1mbGV4OjEgMSBhdXRvO292ZXJmbG93OmF1dG87ZGlzcGxheTpub25lfTpob3N0IDo6bmctZGVlcCBuYi10YWIuY29udGVudC1hY3RpdmV7ZGlzcGxheTpibG9ja306aG9zdCAudGFic2V0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7bGlzdC1zdHlsZS10eXBlOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowfTpob3N0IC50YWJzZXQgLnRhYnttYXJnaW4tYm90dG9tOi0xcHg7dGV4dC1hbGlnbjpjZW50ZXI7cG9zaXRpb246cmVsYXRpdmV9Omhvc3QgLnRhYnNldCAudGFiLmFjdGl2ZSBhOjpiZWZvcmV7ZGlzcGxheTpibG9ja306aG9zdCAudGFic2V0IC50YWIgYXtkaXNwbGF5OmZsZXg7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1kZWNvcmF0aW9uOm5vbmV9Omhvc3QgLnRhYnNldCAudGFiIGE6OmJlZm9yZXtwb3NpdGlvbjphYnNvbHV0ZTtjb250ZW50OicnO3dpZHRoOjEwMCU7Ym9yZGVyLXJhZGl1czozcHg7Ym90dG9tOi0ycHg7bGVmdDowfTpob3N0IC50YWJzZXQgLnRhYiBhIG5iLWljb257dmVydGljYWwtYWxpZ246bWlkZGxlfVtkaXI9bHRyXSA6aG9zdCAudGFic2V0IC50YWIgYSBuYi1pY29uK3NwYW57bWFyZ2luLWxlZnQ6LjVyZW19W2Rpcj1ydGxdIDpob3N0IC50YWJzZXQgLnRhYiBhIG5iLWljb24rc3BhbnttYXJnaW4tcmlnaHQ6LjVyZW19XFxuXCJdXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0FjdGl2YXRlZFJvdXRlLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWZdKVxuICAgIF0sIE5iVGFic2V0Q29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJUYWJzZXRDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIEJhZGdlIGlzIGEgc2ltcGxlIGxhYmVsaW5nIGNvbXBvbmVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGFkZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHRvIGFueSBjb250ZW50IG9yIGhpZ2hsaWdodCB1bnJlYWQgaXRlbXMuXG4gKlxuICogRWxlbWVudCBpcyBhYnNvbHV0ZSBwb3NpdGlvbmVkLCBzbyBwYXJlbnQgc2hvdWxkIGJlXG4gKiBbcG9zaXRpb25lZCBlbGVtZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvcG9zaXRpb24pLlxuICogSXQgbWVhbnMgcGFyZW50IGBwb3NpdGlvbmAgc2hvdWxkIGJlIHNldCB0byBhbnl0aGluZyBleGNlcHQgYHN0YXRpY2AsIGUuZy4gYHJlbGF0aXZlYCxcbiAqIGBhYnNvbHV0ZWAsIGBmaXhlZGAsIG9yIGBzdGlja3lgLlxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQmFkZ2VNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQmFkZ2VNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIEJhZGdlIHdpdGggZGVmYXVsdCBwb3NpdGlvbiBhbmQgc3RhdHVzKGNvbG9yKTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItYmFkZ2UgdGV4dD1cImJhZGdlVGV4dFwiPjwvbmItYmFkZ2U+XG4gKiBgYGBcbiAqXG4gKiBGb3IgZXhhbXBsZSwgYmFkZ2UgY2FuIGJlIHBsYWNlZCBpbnRvIG5iLWNhcmQgaGVhZGVyOlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgYmFkZ2UvYmFkZ2Utc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEJhZGdlIGxvY2F0ZWQgb24gdGhlIGJvdHRvbSByaWdodCB3aXRoIHdhcm5pbmcgc3RhdHVzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1iYWRnZSB0ZXh0PVwiYmFkZ2VUZXh0XCIgc3RhdHVzPVwid2FybmluZ1wiIHBvc2l0aW9uPVwiYm90dG9tIHJpZ2h0XCI+XG4gKiA8L25iLWJhZGdlPlxuICogYGBgXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGJhZGdlLWJvcmRlci1yYWRpdXM6XG4gKiBiYWRnZS10ZXh0LWZvbnQtZmFtaWx5OlxuICogYmFkZ2UtdGV4dC1mb250LXNpemU6XG4gKiBiYWRnZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYmFkZ2UtdGV4dC1saW5lLWhlaWdodDpcbiAqIGJhZGdlLXBhZGRpbmc6XG4gKiBiYWRnZS1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYmFkZ2UtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIGJhZGdlLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJhZGdlLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIGJhZGdlLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJhZGdlLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGJhZGdlLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJhZGdlLWluZm8tdGV4dC1jb2xvcjpcbiAqIGJhZGdlLXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJhZGdlLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIGJhZGdlLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYmFkZ2UtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBiYWRnZS1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiBiYWRnZS1jb250cm9sLXRleHQtY29sb3I6XG4gKi9cbnZhciBOYkJhZGdlQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQmFkZ2VDb21wb25lbnQoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUZXh0IHRvIGRpc3BsYXlcbiAgICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRleHQgPSAnJztcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBvc2l0aW9uID0gJ3RvcCByaWdodCc7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fZGVmYXVsdFBvc2l0aW9uO1xuICAgICAgICB0aGlzLl9zdGF0dXMgPSAnYmFzaWMnO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQmFkZ2UgcG9zaXRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhbnkgY2xhc3Mgb3IgdG8gb25lIG9mIHByZWRlZmluZWQgcG9zaXRpb25zOlxuICAgICAgICAgKiAndG9wIGxlZnQnLCAndG9wIHJpZ2h0JywgJ2JvdHRvbSBsZWZ0JywgJ2JvdHRvbSByaWdodCcsXG4gICAgICAgICAqICd0b3Agc3RhcnQnLCAndG9wIGVuZCcsICdib3R0b20gc3RhcnQnLCAnYm90dG9tIGVuZCdcbiAgICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdmFsdWUgfHwgdGhpcy5fZGVmYXVsdFBvc2l0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJhZGdlIHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiAnYmFzaWMnLCAncHJpbWFyeScsICdpbmZvJywgJ3N1Y2Nlc3MnLCAnd2FybmluZycsICdkYW5nZXInLCAnY29udHJvbCdcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBlbXB0eVN0YXR1c1dhcm5pbmcoJ05iQmFkZ2UnKTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICdiYXNpYyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdkYW5nZXInO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidG9wXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5pbmNsdWRlcygndG9wJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyaWdodFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uaW5jbHVkZXMoJ3JpZ2h0Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJib3R0b21cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmluY2x1ZGVzKCdib3R0b20nKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImxlZnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmluY2x1ZGVzKCdsZWZ0Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGFydFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uaW5jbHVkZXMoJ3N0YXJ0Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJlbmRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmluY2x1ZGVzKCdlbmQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1wcmltYXJ5JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtc3VjY2VzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWluZm8nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy13YXJuaW5nJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtZGFuZ2VyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1jb250cm9sJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQmFkZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5wb3NpdGlvbi10b3AnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidG9wXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MucG9zaXRpb24tcmlnaHQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicmlnaHRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5wb3NpdGlvbi1ib3R0b20nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiYm90dG9tXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MucG9zaXRpb24tbGVmdCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkJhZGdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsZWZ0XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MucG9zaXRpb24tc3RhcnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhcnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5wb3NpdGlvbi1lbmQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZW5kXCIsIG51bGwpO1xuICAgIE5iQmFkZ2VDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItYmFkZ2UnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwie3t0ZXh0fX1cIixcbiAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7cG9zaXRpb246YWJzb2x1dGU7dGV4dC1hbGlnbjpjZW50ZXI7d2hpdGUtc3BhY2U6bm93cmFwO3ZlcnRpY2FsLWFsaWduOmJhc2VsaW5lfTpob3N0KC5wb3NpdGlvbi10b3Ape3RvcDowfTpob3N0KC5wb3NpdGlvbi1yaWdodCl7cmlnaHQ6MH06aG9zdCgucG9zaXRpb24tYm90dG9tKXtib3R0b206MH06aG9zdCgucG9zaXRpb24tbGVmdCl7bGVmdDowfVtkaXI9bHRyXSA6aG9zdCgucG9zaXRpb24tc3RhcnQpe2xlZnQ6MH1bZGlyPXJ0bF0gOmhvc3QoLnBvc2l0aW9uLXN0YXJ0KXtyaWdodDowfVtkaXI9bHRyXSA6aG9zdCgucG9zaXRpb24tZW5kKXtyaWdodDowfVtkaXI9cnRsXSA6aG9zdCgucG9zaXRpb24tZW5kKXtsZWZ0OjB9XFxuXCJdXG4gICAgICAgIH0pXG4gICAgXSwgTmJCYWRnZUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQmFkZ2VDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJCYWRnZU1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkJhZGdlTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYkJhZGdlTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGV4cG9ydHM6IFtOYkJhZGdlQ29tcG9uZW50XSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iQmFkZ2VDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iQmFkZ2VNb2R1bGUpO1xuICAgIHJldHVybiBOYkJhZGdlTW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5CX1RBQlNFVF9DT01QT05FTlRTID0gW1xuICAgIE5iVGFic2V0Q29tcG9uZW50LFxuICAgIE5iVGFiQ29tcG9uZW50LFxuXTtcbnZhciBOYlRhYnNldE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRhYnNldE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJUYWJzZXRNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iQmFkZ2VNb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJJY29uTW9kdWxlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogX19zcHJlYWRBcnJheXMoTkJfVEFCU0VUX0NPTVBPTkVOVFMpLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoTkJfVEFCU0VUX0NPTVBPTkVOVFMpLFxuICAgICAgICB9KVxuICAgIF0sIE5iVGFic2V0TW9kdWxlKTtcbiAgICByZXR1cm4gTmJUYWJzZXRNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjb21wb25lbnQgc2hvd2luZyBhIHVzZXIgYXZhdGFyIChwaWN0dXJlKSB3aXRoIGEgdXNlciBuYW1lIG9uIHRoZSByaWdodC5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIHVzZXIvdXNlci1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogYGBgdHNcbiAqICAgPG5iLXVzZXIgbmFtZT1cIkpvaG4gRG9lXCIgdGl0bGU9XCJFbmdpbmVlclwiPjwvbmItdXNlcj5cbiAqIGBgYFxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iVXNlck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJVc2VyTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBBdmFpbGFibGUgaW4gbXVsdGlwbGUgc2l6ZXM6XG4gKiBAc3RhY2tlZC1leGFtcGxlKE11bHRpcGxlIFNpemVzLCB1c2VyL3VzZXItc2l6ZXMuY29tcG9uZW50KVxuICpcbiAqXG4gKiBZb3UgY2FuIGhpZGUgdW5uZWNlc3NhcnkgY2FwdGlvbnMgKG5hbWUsIHRpdGxlIG9yIGJvdGgpOlxuICogQHN0YWNrZWQtZXhhbXBsZShIaWRlIGNhcHRpb25zIGluIHVzZXIgY29tcG9uZW50LCB1c2VyL3VzZXItaGlkZS1jYXB0aW9ucy5jb21wb25lbnQpXG4gKlxuICpcbiAqIFlvdSBjYW4gc2V0IGN1c3RvbSBhdmF0YXIgYmFja2dyb3VuZC1jb2xvciwgdXNlciBpbWFnZSAoYXMgbGluayBvciBCQVNFNjQgc3RyaW5nKSBhbmQgZGlzYWJsZSB1c2VyIGluaXRpYWxzOlxuICogQHN0YWNrZWQtZXhhbXBsZShBdmF0YXIgaW1hZ2Ugc2V0dGluZ3MsIHVzZXIvdXNlci1hdmF0YXItc2V0dGluZ3MuY29tcG9uZW50KVxuICpcbiAqIENvbXBvbmVudCBzaGFwZSBjb3VsZCBiZSBjb250cm9sbGVkIHdpdGggYHNoYXBlYCBpbnB1dC5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hhcGVzLCB1c2VyL3VzZXItc2hhcGUuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiB1c2VyLXBpY3R1cmUtYm94LWJhY2tncm91bmQtY29sb3I6XG4gKiB1c2VyLXBpY3R1cmUtYm94LWJvcmRlci1jb2xvcjpcbiAqIHVzZXItcGljdHVyZS1ib3gtYm9yZGVyLXdpZHRoOlxuICogdXNlci1pbml0aWFscy10ZXh0LWNvbG9yOlxuICogdXNlci1pbml0aWFscy10ZXh0LWZvbnQtZmFtaWx5OlxuICogdXNlci1pbml0aWFscy10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdXNlci1uYW1lLXRleHQtY29sb3I6XG4gKiB1c2VyLW5hbWUtdGV4dC1mb250LWZhbWlseTpcbiAqIHVzZXItbmFtZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdXNlci10aXRsZS10ZXh0LWNvbG9yOlxuICogdXNlci10aXRsZS10ZXh0LWZvbnQtZmFtaWx5OlxuICogdXNlci10aXRsZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdXNlci1yZWN0YW5nbGUtYm9yZGVyLXJhZGl1czpcbiAqIHVzZXItc2VtaS1yb3VuZC1ib3JkZXItcmFkaXVzOlxuICogdXNlci1yb3VuZC1ib3JkZXItcmFkaXVzOlxuICogdXNlci10aW55LWhlaWdodDpcbiAqIHVzZXItdGlueS13aWR0aDpcbiAqIHVzZXItdGlueS1pbml0aWFscy10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItdGlueS1pbml0aWFscy10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci10aW55LW5hbWUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLXRpbnktbmFtZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci10aW55LXRpdGxlLXRleHQtZm9udC1zaXplOlxuICogdXNlci10aW55LXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLXNtYWxsLWhlaWdodDpcbiAqIHVzZXItc21hbGwtd2lkdGg6XG4gKiB1c2VyLXNtYWxsLWluaXRpYWxzLXRleHQtZm9udC1zaXplOlxuICogdXNlci1zbWFsbC1pbml0aWFscy10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1zbWFsbC1uYW1lLXRleHQtZm9udC1zaXplOlxuICogdXNlci1zbWFsbC1uYW1lLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLXNtYWxsLXRpdGxlLXRleHQtZm9udC1zaXplOlxuICogdXNlci1zbWFsbC10aXRsZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1tZWRpdW0taGVpZ2h0OlxuICogdXNlci1tZWRpdW0td2lkdGg6XG4gKiB1c2VyLW1lZGl1bS1pbml0aWFscy10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItbWVkaXVtLWluaXRpYWxzLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLW1lZGl1bS1uYW1lLXRleHQtZm9udC1zaXplOlxuICogdXNlci1tZWRpdW0tbmFtZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1tZWRpdW0tdGl0bGUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLW1lZGl1bS10aXRsZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1sYXJnZS1oZWlnaHQ6XG4gKiB1c2VyLWxhcmdlLXdpZHRoOlxuICogdXNlci1sYXJnZS1pbml0aWFscy10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItbGFyZ2UtaW5pdGlhbHMtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItbGFyZ2UtbmFtZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItbGFyZ2UtbmFtZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1sYXJnZS10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItbGFyZ2UtdGl0bGUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItZ2lhbnQtaGVpZ2h0OlxuICogdXNlci1naWFudC13aWR0aDpcbiAqIHVzZXItZ2lhbnQtaW5pdGlhbHMtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLWdpYW50LWluaXRpYWxzLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLWdpYW50LW5hbWUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLWdpYW50LW5hbWUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItZ2lhbnQtdGl0bGUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLWdpYW50LXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKi9cbnZhciBOYlVzZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJVc2VyQ29tcG9uZW50KGRvbVNhbml0aXplcikge1xuICAgICAgICB0aGlzLmRvbVNhbml0aXplciA9IGRvbVNhbml0aXplcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhIG5hbWUgdG8gYmUgc2hvd24gb24gdGhlIHJpZ2h0IG9mIGEgdXNlciBwaWN0dXJlXG4gICAgICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gJ0Fub255bW91cyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaXplIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqIFBvc3NpYmxlIHZhbHVlczogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCAoZGVmYXVsdCksIGBsYXJnZWAsICdnaWFudCcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNpemUgPSAnbWVkaXVtJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoYXBlIG9mIHRoZSBwaWN0dXJlIGJveC5cbiAgICAgICAgICogUG9zc2libGUgdmFsdWVzOiBgcmVjdGFuZ2xlYCwgYHNlbWktcm91bmRgLCBgcm91bmRgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaGFwZSA9ICdyb3VuZCc7XG4gICAgICAgIHRoaXMuX3Nob3dOYW1lID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2hvd1RpdGxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2hvd0luaXRpYWxzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJhZGdlIHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmFkZ2VTdGF0dXMgPSAnYmFzaWMnO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwaWN0dXJlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFic29sdXRlIHBhdGggdG8gYSB1c2VyIHBpY3R1cmUgb3IgYmFzZTY0IGltYWdlLlxuICAgICAgICAgKiBVc2VyIG5hbWUgaW5pdGlhbHMgd2lsbCBiZSBzaG93biBpZiBubyBwaWN0dXJlIHNwZWNpZmllZCAoSkQgZm9yIEpvaG4gRG9lKS5cbiAgICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5pbWFnZUJhY2tncm91bmRTdHlsZSA9IHZhbHVlID8gdGhpcy5kb21TYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKFwidXJsKFwiICsgdmFsdWUgKyBcIilcIikgOiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93TmFtZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHNob3cgYSB1c2VyIG5hbWUgb3Igbm90XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaG93TmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93TmFtZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93VGl0bGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0byBzaG93IGEgdXNlciB0aXRsZSBvciBub3RcbiAgICAgICAgICogQHR5cGUgYm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2hvd1RpdGxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dUaXRsZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93SW5pdGlhbHNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0byBzaG93IGEgdXNlciBpbml0aWFscyAoaWYgbm8gcGljdHVyZSBzcGVjaWZpZWQpIG9yIG5vdFxuICAgICAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaG93SW5pdGlhbHM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0luaXRpYWxzID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9ubHlQaWN0dXJlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdG8gc2hvdyBvbmx5IGEgcGljdHVyZSBvciBhbHNvIHNob3cgdGhlIG5hbWUgYW5kIHRpdGxlXG4gICAgICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLnNob3dOYW1lICYmICF0aGlzLnNob3dUaXRsZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dOYW1lID0gdGhpcy5zaG93VGl0bGUgPSAhY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInRpbnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICd0aW55JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic21hbGxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1lZGl1bVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbGFyZ2UnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJnaWFudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwicmVjdGFuZ2xlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3JlY3RhbmdsZSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNlbWlSb3VuZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdzZW1pLXJvdW5kJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwicm91bmRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncm91bmQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLmdldEluaXRpYWxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgICB2YXIgbmFtZXMgPSB0aGlzLm5hbWUuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIHJldHVybiBuYW1lcy5tYXAoZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4uY2hhckF0KDApOyB9KS5zcGxpY2UoMCwgMikuam9pbignJykudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwaWN0dXJlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNoYXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dOYW1lXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93VGl0bGVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dJbml0aWFsc1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwib25seVBpY3R1cmVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYWRnZVRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcImJhZGdlU3RhdHVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYWRnZVBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXRpbnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1zbWFsbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlVzZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1tZWRpdW0nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWdpYW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaGFwZS1yZWN0YW5nbGUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWN0YW5nbGVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaGFwZS1zZW1pLXJvdW5kJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVXNlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2VtaVJvdW5kXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtcm91bmQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJVc2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyb3VuZFwiLCBudWxsKTtcbiAgICBOYlVzZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdXNlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJ1c2VyLWNvbnRhaW5lclxcXCI+XFxuICA8ZGl2ICpuZ0lmPVxcXCJpbWFnZUJhY2tncm91bmRTdHlsZVxcXCIgY2xhc3M9XFxcInVzZXItcGljdHVyZSBpbWFnZVxcXCIgW3N0eWxlLmJhY2tncm91bmQtaW1hZ2VdPVxcXCJpbWFnZUJhY2tncm91bmRTdHlsZVxcXCI+XFxuICAgIDxuYi1iYWRnZSAqbmdJZj1cXFwiYmFkZ2VUZXh0XFxcIiBbdGV4dF09XFxcImJhZGdlVGV4dFxcXCIgW3N0YXR1c109XFxcImJhZGdlU3RhdHVzXFxcIiBbcG9zaXRpb25dPVxcXCJiYWRnZVBvc2l0aW9uXFxcIj48L25iLWJhZGdlPlxcbiAgPC9kaXY+XFxuICA8ZGl2ICpuZ0lmPVxcXCIhaW1hZ2VCYWNrZ3JvdW5kU3R5bGVcXFwiIGNsYXNzPVxcXCJ1c2VyLXBpY3R1cmUgaW5pdGlhbHNcXFwiIFtzdHlsZS5iYWNrZ3JvdW5kLWNvbG9yXT1cXFwiY29sb3JcXFwiPlxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJzaG93SW5pdGlhbHNcXFwiPlxcbiAgICAgIHt7IGdldEluaXRpYWxzKCkgfX1cXG4gICAgPC9uZy1jb250YWluZXI+XFxuICAgIDxuYi1iYWRnZSAqbmdJZj1cXFwiYmFkZ2VUZXh0XFxcIiBbdGV4dF09XFxcImJhZGdlVGV4dFxcXCIgW3N0YXR1c109XFxcImJhZGdlU3RhdHVzXFxcIiBbcG9zaXRpb25dPVxcXCJiYWRnZVBvc2l0aW9uXFxcIj48L25iLWJhZGdlPlxcbiAgPC9kaXY+XFxuXFxuICA8ZGl2IGNsYXNzPVxcXCJpbmZvLWNvbnRhaW5lclxcXCI+XFxuICAgIDxkaXYgKm5nSWY9XFxcInNob3dOYW1lICYmIG5hbWVcXFwiIGNsYXNzPVxcXCJ1c2VyLW5hbWVcXFwiPnt7IG5hbWUgfX08L2Rpdj5cXG4gICAgPGRpdiAqbmdJZj1cXFwic2hvd1RpdGxlICYmIHRpdGxlXFxcIiBjbGFzcz1cXFwidXNlci10aXRsZVxcXCI+e3sgdGl0bGUgfX08L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcblwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXh9Omhvc3QgLnVzZXItY29udGFpbmVye3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9Omhvc3QgLnVzZXItcGljdHVyZXtwb3NpdGlvbjpyZWxhdGl2ZTtmbGV4LXNocmluazowfTpob3N0IC51c2VyLXBpY3R1cmUuaW1hZ2V7YmFja2dyb3VuZC1zaXplOmNvdmVyO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdH06aG9zdCAudXNlci1waWN0dXJlLmluaXRpYWxze2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn1bZGlyPXJ0bF0gOmhvc3QgLnVzZXItbmFtZSxbZGlyPXJ0bF0gOmhvc3QgLnVzZXItdGl0bGV7dGV4dC1hbGlnbjpyaWdodH1bZGlyPWx0cl0gOmhvc3QgLmluZm8tY29udGFpbmVye21hcmdpbi1sZWZ0Oi41cmVtfVtkaXI9cnRsXSA6aG9zdCAuaW5mby1jb250YWluZXJ7bWFyZ2luLXJpZ2h0Oi41cmVtfVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtEb21TYW5pdGl6ZXJdKVxuICAgIF0sIE5iVXNlckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iVXNlckNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9VU0VSX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJVc2VyQ29tcG9uZW50LFxuXTtcbnZhciBOYlVzZXJNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJVc2VyTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYlVzZXJNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iQmFkZ2VNb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBfX3NwcmVhZEFycmF5cyhOQl9VU0VSX0NPTVBPTkVOVFMpLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoTkJfVVNFUl9DT01QT05FTlRTKSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlVzZXJNb2R1bGUpO1xuICAgIHJldHVybiBOYlVzZXJNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIEFjdGlvbiBpdGVtLCBkaXNwbGF5IGEgbGluayB3aXRoIGFuIGljb24sIG9yIGFueSBvdGhlciBjb250ZW50IHByb3ZpZGVkIGluc3RlYWQuXG4gKi9cbnZhciBOYkFjdGlvbkNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkFjdGlvbkNvbXBvbmVudCgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9wdGlvbmFsIHRpdGxlIGZvciBtb3VzZW92ZXJcbiAgICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpdGxlID0gJyc7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCYWRnZSBzdGF0dXMgKGFkZHMgc3BlY2lmaWMgc3R5bGVzKTpcbiAgICAgICAgICogJ3ByaW1hcnknLCAnaW5mbycsICdzdWNjZXNzJywgJ3dhcm5pbmcnLCAnZGFuZ2VyJ1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJhZGdlU3RhdHVzID0gJ2Jhc2ljJztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWN0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWaXN1YWxseSBkaXNhYmxlcyB0aGUgaXRlbVxuICAgICAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJBY3Rpb25Db21wb25lbnQucHJvdG90eXBlLCBcImxpbmtcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkFjdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiaHJlZlwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQWN0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQWN0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpY29uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5kaXNhYmxlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJBY3Rpb25Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQWN0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYWRnZVRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkFjdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFkZ2VTdGF0dXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkFjdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFkZ2VQb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIE5iQWN0aW9uQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWFjdGlvbicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cXFwiaWNvbjsgZWxzZSBwcm9qZWN0ZWRDb250ZW50XFxcIj5cXG4gICAgICA8YSBjbGFzcz1cXFwiaWNvbi1jb250YWluZXJcXFwiXFxuICAgICAgICAgW3JvdXRlckxpbmtdPVxcXCJsaW5rXFxcIlxcbiAgICAgICAgIFt0aXRsZV09XFxcInRpdGxlXFxcIlxcbiAgICAgICAgICpuZ0lmPVxcXCJsaW5rXFxcIj5cXG4gICAgICAgIDxuYi1pY29uIFtjb25maWddPVxcXCJpY29uXFxcIj48L25iLWljb24+XFxuICAgICAgPC9hPlxcbiAgICAgIDxhIGNsYXNzPVxcXCJpY29uLWNvbnRhaW5lclxcXCJcXG4gICAgICAgICBbaHJlZl09XFxcImhyZWZcXFwiXFxuICAgICAgICAgW3RpdGxlXT1cXFwidGl0bGVcXFwiXFxuICAgICAgICAgKm5nSWY9XFxcImhyZWYgJiYgIWxpbmtcXFwiPlxcbiAgICAgICAgPG5iLWljb24gW2NvbmZpZ109XFxcImljb25cXFwiPjwvbmItaWNvbj5cXG4gICAgICA8L2E+XFxuICAgICAgPGEgY2xhc3M9XFxcImljb24tY29udGFpbmVyXFxcIlxcbiAgICAgICAgIGhyZWY9XFxcIiNcXFwiXFxuICAgICAgICAgW3RpdGxlXT1cXFwidGl0bGVcXFwiXFxuICAgICAgICAgKm5nSWY9XFxcIiFocmVmICYmICFsaW5rXFxcIlxcbiAgICAgICAgIChjbGljayk9XFxcIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpXFxcIj5cXG4gICAgICAgIDxuYi1pY29uIFtjb25maWddPVxcXCJpY29uXFxcIj48L25iLWljb24+XFxuICAgICAgPC9hPlxcbiAgICA8L25nLWNvbnRhaW5lcj5cXG5cXG4gICAgPG5nLXRlbXBsYXRlICNwcm9qZWN0ZWRDb250ZW50PlxcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgPC9uZy10ZW1wbGF0ZT5cXG5cXG4gICAgPG5iLWJhZGdlICpuZ0lmPVxcXCJiYWRnZVRleHRcXFwiXFxuICAgICAgICAgICAgICBbdGV4dF09XFxcImJhZGdlVGV4dFxcXCJcXG4gICAgICAgICAgICAgIFtzdGF0dXNdPVxcXCJiYWRnZVN0YXR1c1xcXCJcXG4gICAgICAgICAgICAgIFtwb3NpdGlvbl09XFxcImJhZGdlUG9zaXRpb25cXFwiPlxcbiAgICA8L25iLWJhZGdlPlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZX06aG9zdCguZGlzYWJsZWQpe2N1cnNvcjpub3QtYWxsb3dlZH06aG9zdCguZGlzYWJsZWQpIGEsOmhvc3QoLmRpc2FibGVkKSBuYi1pY29ue2N1cnNvcjpub3QtYWxsb3dlZH06aG9zdC1jb250ZXh0KG5iLWFjdGlvbnMuZnVsbC13aWR0aCl7anVzdGlmeS1jb250ZW50OmNlbnRlcjt3aWR0aDoxMDAlfWEuaWNvbi1jb250YWluZXI6aG92ZXIsYS5pY29uLWNvbnRhaW5lcjpmb2N1c3t0ZXh0LWRlY29yYXRpb246bm9uZX1uYi1pY29uOmhvdmVye2N1cnNvcjpwb2ludGVyfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iQWN0aW9uQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJBY3Rpb25Db21wb25lbnQ7XG59KCkpO1xuLyoqXG4gKiBTaG93cyBhIGhvcml6b250YWwgbGlzdCBvZiBhY3Rpb25zLCBhdmFpbGFibGUgaW4gbXVsdGlwbGUgc2l6ZXMuXG4gKiBBbGlnbnMgaXRlbXMgdmVydGljYWxseS5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBhY3Rpb24vYWN0aW9uLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBCYXNpYyBhY3Rpb25zIHNldHVwOlxuICogYGBgaHRtbFxuICogPG5iLWFjdGlvbnMgc2l6ZT1cInNtYWxsXCI+XG4gKiAgIDxuYi1hY3Rpb24gaWNvbj1cIm5iLXNlYXJjaFwiPjwvbmItYWN0aW9uPlxuICogICA8bmItYWN0aW9uIGljb249XCJuYi1wb3dlci1jaXJjbGVkXCI+PC9uYi1hY3Rpb24+XG4gKiAgIDxuYi1hY3Rpb24gaWNvbj1cIm5iLXBlcnNvblwiPjwvbmItYWN0aW9uPlxuICogPC9uYi1hY3Rpb25zPlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkFjdGlvbnNNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQWN0aW9uc01vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogTXVsdGlwbGUgc2l6ZXMgZXhhbXBsZTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTXVsdGlwbGUgU2l6ZXMsIGFjdGlvbi9hY3Rpb24tc2l6ZXMuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc3BlY2lmeSBhIGBiYWRnZWAgdmFsdWU6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShBY3Rpb24gQmFkZ2UsIGFjdGlvbi9hY3Rpb24tYmFkZ2UuY29tcG9uZW50KVxuICpcbiAqIGFuZCB3ZSBjYW4gc2V0IGl0IHRvIGZ1bGwgYSB3aWR0aCBvZiBhIHBhcmVudCBjb21wb25lbnRcbiAqIEBzdGFja2VkLWV4YW1wbGUoRnVsbCBXaWR0aCwgYWN0aW9uL2FjdGlvbi13aWR0aC5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGFjdGlvbnMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGFjdGlvbnMtZGl2aWRlci1jb2xvcjpcbiAqIGFjdGlvbnMtZGl2aWRlci1zdHlsZTpcbiAqIGFjdGlvbnMtZGl2aWRlci13aWR0aDpcbiAqIGFjdGlvbnMtaWNvbi1jb2xvcjpcbiAqIGFjdGlvbnMtdGV4dC1jb2xvcjpcbiAqIGFjdGlvbnMtdGV4dC1mb250LWZhbWlseTpcbiAqIGFjdGlvbnMtdGV4dC1mb250LXdlaWdodDpcbiAqIGFjdGlvbnMtdGV4dC1saW5lLWhlaWdodDpcbiAqIGFjdGlvbnMtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIGFjdGlvbnMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGFjdGlvbnMtdGlueS1oZWlnaHQ6XG4gKiBhY3Rpb25zLXRpbnktaWNvbi1oZWlnaHQ6XG4gKiBhY3Rpb25zLXRpbnktcGFkZGluZzpcbiAqIGFjdGlvbnMtdGlueS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGFjdGlvbnMtc21hbGwtaGVpZ2h0OlxuICogYWN0aW9ucy1zbWFsbC1pY29uLWhlaWdodDpcbiAqIGFjdGlvbnMtc21hbGwtcGFkZGluZzpcbiAqIGFjdGlvbnMtc21hbGwtdGV4dC1mb250LXNpemU6XG4gKiBhY3Rpb25zLW1lZGl1bS1oZWlnaHQ6XG4gKiBhY3Rpb25zLW1lZGl1bS1pY29uLWhlaWdodDpcbiAqIGFjdGlvbnMtbWVkaXVtLXBhZGRpbmc6XG4gKiBhY3Rpb25zLW1lZGl1bS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGFjdGlvbnMtbGFyZ2UtaGVpZ2h0OlxuICogYWN0aW9ucy1sYXJnZS1pY29uLWhlaWdodDpcbiAqIGFjdGlvbnMtbGFyZ2UtcGFkZGluZzpcbiAqIGFjdGlvbnMtbGFyZ2UtdGV4dC1mb250LXNpemU6XG4gKiBhY3Rpb25zLWdpYW50LWhlaWdodDpcbiAqIGFjdGlvbnMtZ2lhbnQtaWNvbi1oZWlnaHQ6XG4gKiBhY3Rpb25zLWdpYW50LXBhZGRpbmc6XG4gKiBhY3Rpb25zLWdpYW50LXRleHQtZm9udC1zaXplOlxuICovXG52YXIgTmJBY3Rpb25zQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQWN0aW9uc0NvbXBvbmVudCgpIHtcbiAgICAgICAgdGhpcy5fc2l6ZSA9ICdzbWFsbCc7XG4gICAgICAgIHRoaXMuX2Z1bGxXaWR0aCA9IGZhbHNlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpemUgb2YgdGhlIGNvbXBvbmVudDogJ3RpbnknLCAnc21hbGwnIChkZWZhdWx0KSwgJ21lZGl1bScsICdsYXJnZScsICdnaWFudCdcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9zaXplID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFjdGlvbnNDb21wb25lbnQucHJvdG90eXBlLCBcImZ1bGxXaWR0aFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb21wb25lbnQgd2lsbCBmaWxsIGZ1bGwgd2lkdGggb2YgdGhlIGNvbnRhaW5lclxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZnVsbFdpZHRoO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZnVsbFdpZHRoID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWN0aW9uc0NvbXBvbmVudC5wcm90b3R5cGUsIFwidGlueVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3RpbnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzbWFsbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWN0aW9uc0NvbXBvbmVudC5wcm90b3R5cGUsIFwibWVkaXVtXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWN0aW9uc0NvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdsYXJnZSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFjdGlvbnNDb21wb25lbnQucHJvdG90eXBlLCBcImdpYW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbiAgICBdLCBOYkFjdGlvbnNDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5mdWxsLXdpZHRoJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkFjdGlvbnNDb21wb25lbnQucHJvdG90eXBlLCBcImZ1bGxXaWR0aFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtdGlueScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFjdGlvbnNDb21wb25lbnQucHJvdG90eXBlLCBcInRpbnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXNtYWxsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWN0aW9uc0NvbXBvbmVudC5wcm90b3R5cGUsIFwic21hbGxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLW1lZGl1bScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFjdGlvbnNDb21wb25lbnQucHJvdG90eXBlLCBcIm1lZGl1bVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtZ2lhbnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJnaWFudFwiLCBudWxsKTtcbiAgICBOYkFjdGlvbnNDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItYWN0aW9ucycsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1hY3Rpb25cXFwiPjwvbmctY29udGVudD5cXG4gIFwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iQWN0aW9uc0NvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQWN0aW9uc0NvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9BQ1RJT05TX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJBY3Rpb25Db21wb25lbnQsXG4gICAgTmJBY3Rpb25zQ29tcG9uZW50LFxuXTtcbnZhciBOYkFjdGlvbnNNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJBY3Rpb25zTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYkFjdGlvbnNNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iQmFkZ2VNb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJJY29uTW9kdWxlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogX19zcHJlYWRBcnJheXMoTkJfQUNUSU9OU19DT01QT05FTlRTKSxcbiAgICAgICAgICAgIGV4cG9ydHM6IF9fc3ByZWFkQXJyYXlzKE5CX0FDVElPTlNfQ09NUE9ORU5UUyksXG4gICAgICAgIH0pXG4gICAgXSwgTmJBY3Rpb25zTW9kdWxlKTtcbiAgICByZXR1cm4gTmJBY3Rpb25zTW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBTZWFyY2ggY29tcG9uZW50IHNlcnZpY2UsIGNvbm5lY3RzIHlvdXIgY29kZSB0byBhIHBhZ2UtbGV2ZWwgc2VhcmNoIGNvbXBvbmVudC5cbiAqL1xudmFyIE5iU2VhcmNoU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNlYXJjaFNlcnZpY2UoKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoU3VibWl0dGluZ3MkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zZWFyY2hBY3RpdmF0aW9ucyQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnNlYXJjaERlYWN0aXZhdGlvbnMkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dCQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKioqXG4gICAgICogQWN0aXZhdGUgKG9wZW4pIHNlYXJjaCBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoVHlwZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICAgKi9cbiAgICBOYlNlYXJjaFNlcnZpY2UucHJvdG90eXBlLmFjdGl2YXRlU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaFR5cGUsIHRhZykge1xuICAgICAgICB0aGlzLnNlYXJjaEFjdGl2YXRpb25zJC5uZXh0KHsgc2VhcmNoVHlwZTogc2VhcmNoVHlwZSwgdGFnOiB0YWcgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZWFjdGliYXRlIChjbG9zZSkgc2VhcmNoIGNvbXBvbmVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZWFyY2hUeXBlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgICAqL1xuICAgIE5iU2VhcmNoU2VydmljZS5wcm90b3R5cGUuZGVhY3RpdmF0ZVNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hUeXBlLCB0YWcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hEZWFjdGl2YXRpb25zJC5uZXh0KHsgc2VhcmNoVHlwZTogc2VhcmNoVHlwZSwgdGFnOiB0YWcgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHNlYXJjaCBzdWJtaXRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGVybVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICAgKi9cbiAgICBOYlNlYXJjaFNlcnZpY2UucHJvdG90eXBlLnN1Ym1pdFNlYXJjaCA9IGZ1bmN0aW9uICh0ZXJtLCB0YWcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hTdWJtaXR0aW5ncyQubmV4dCh7IHRlcm06IHRlcm0sIHRhZzogdGFnIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBzZWFyY2ggc3VibWl0IGJ5IGlucHV0IGV2ZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRlcm1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAgICovXG4gICAgTmJTZWFyY2hTZXJ2aWNlLnByb3RvdHlwZS5zZWFyY2hJbnB1dCA9IGZ1bmN0aW9uICh0ZXJtLCB0YWcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dCQubmV4dCh7IHRlcm06IHRlcm0sIHRhZzogdGFnIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvICdhY3RpdmF0ZScgZXZlbnRcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHtzZWFyY2hUeXBlOiBzdHJpbmc7IHRhZz86IHN0cmluZ30+XG4gICAgICovXG4gICAgTmJTZWFyY2hTZXJ2aWNlLnByb3RvdHlwZS5vblNlYXJjaEFjdGl2YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hBY3RpdmF0aW9ucyQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZSB0byAnZGVhY3RpdmF0ZScgZXZlbnRcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHtzZWFyY2hUeXBlOiBzdHJpbmc7IHRhZz86IHN0cmluZ30+XG4gICAgICovXG4gICAgTmJTZWFyY2hTZXJ2aWNlLnByb3RvdHlwZS5vblNlYXJjaERlYWN0aXZhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlYXJjaERlYWN0aXZhdGlvbnMkLnBpcGUoc2hhcmUoKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gJ3N1Ym1pdCcgZXZlbnQgKHdoZW4gc3VibWl0IGJ1dHRvbiBjbGlja2VkKVxuICAgICAqIEByZXR1cm5zIE9ic2VydmFibGU8e3Rlcm06IHN0cmluZzsgdGFnPzogc3RyaW5nfT5cbiAgICAgKi9cbiAgICBOYlNlYXJjaFNlcnZpY2UucHJvdG90eXBlLm9uU2VhcmNoU3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hTdWJtaXR0aW5ncyQucGlwZShzaGFyZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZSB0byBpbnB1dCBldmVudFxuICAgICAqIEByZXR1cm5zIE9ic2VydmFibGU8e3Rlcm06IHN0cmluZzsgdGFnPzogc3RyaW5nfT5cbiAgICAgKi9cbiAgICBOYlNlYXJjaFNlcnZpY2UucHJvdG90eXBlLm9uU2VhcmNoSW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlYXJjaElucHV0JC5waXBlKHNoYXJlKCkpO1xuICAgIH07XG4gICAgTmJTZWFyY2hTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKVxuICAgIF0sIE5iU2VhcmNoU2VydmljZSk7XG4gICAgcmV0dXJuIE5iU2VhcmNoU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogc2VhcmNoLWZpZWxkLWNvbXBvbmVudCBpcyB1c2VkIHVuZGVyIHRoZSBob29kIGJ5IG5iLXNlYXJjaCBjb21wb25lbnRcbiAqIGNhbid0IGJlIHVzZWQgaXRzZWxmXG4gKi9cbnZhciBOYlNlYXJjaEZpZWxkQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU2VhcmNoRmllbGRDb21wb25lbnQoKSB7XG4gICAgICAgIHRoaXMuc2hvdyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnNlYXJjaCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudF8xID0gTmJTZWFyY2hGaWVsZENvbXBvbmVudDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd0NsYXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwibW9kYWxab29taW5cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IE5iU2VhcmNoRmllbGRDb21wb25lbnRfMS5UWVBFX01PREFMX1pPT01JTjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcInJvdGF0ZUxheW91dFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmJTZWFyY2hGaWVsZENvbXBvbmVudF8xLlRZUEVfUk9UQVRFX0xBWU9VVDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcIm1vZGFsTW92ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmJTZWFyY2hGaWVsZENvbXBvbmVudF8xLlRZUEVfTU9EQUxfTU9WRTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImN1cnRhaW5cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IE5iU2VhcmNoRmllbGRDb21wb25lbnRfMS5UWVBFX0NVUlRBSU47XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb2x1bW5DdXJ0YWluXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBOYlNlYXJjaEZpZWxkQ29tcG9uZW50XzEuVFlQRV9DT0xVTU5fQ1VSVEFJTjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcIm1vZGFsRHJvcFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmJTZWFyY2hGaWVsZENvbXBvbmVudF8xLlRZUEVfTU9EQUxfRFJPUDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcIm1vZGFsSGFsZlwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmJTZWFyY2hGaWVsZENvbXBvbmVudF8xLlRZUEVfTU9EQUxfSEFMRjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHNob3cgPSBfYS5zaG93O1xuICAgICAgICB2YXIgYmVjYW1lSGlkZGVuID0gIXNob3cuaXNGaXJzdENoYW5nZSgpICYmIHNob3cuY3VycmVudFZhbHVlID09PSBmYWxzZTtcbiAgICAgICAgaWYgKGJlY2FtZUhpZGRlbiAmJiB0aGlzLmlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZm9jdXNJbnB1dCgpO1xuICAgIH07XG4gICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmZvY3VzSW5wdXQoKTtcbiAgICB9O1xuICAgIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLmVtaXRDbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbG9zZS5lbWl0KCk7XG4gICAgfTtcbiAgICBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3RvdHlwZS5zdWJtaXRTZWFyY2ggPSBmdW5jdGlvbiAodGVybSkge1xuICAgICAgICBpZiAodGVybSkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2guZW1pdCh0ZXJtKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUuZW1pdFNlYXJjaElucHV0ID0gZnVuY3Rpb24gKHRlcm0pIHtcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dC5lbWl0KHRlcm0pO1xuICAgIH07XG4gICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUuZm9jdXNJbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdyAmJiB0aGlzLmlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgTmJTZWFyY2hGaWVsZENvbXBvbmVudF8xO1xuICAgIE5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9NT0RBTF9aT09NSU4gPSAnbW9kYWwtem9vbWluJztcbiAgICBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfUk9UQVRFX0xBWU9VVCA9ICdyb3RhdGUtbGF5b3V0JztcbiAgICBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfTU9EQUxfTU9WRSA9ICdtb2RhbC1tb3ZlJztcbiAgICBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfQ1VSVEFJTiA9ICdjdXJ0YWluJztcbiAgICBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfQ09MVU1OX0NVUlRBSU4gPSAnY29sdW1uLWN1cnRhaW4nO1xuICAgIE5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9NT0RBTF9EUk9QID0gJ21vZGFsLWRyb3AnO1xuICAgIE5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9NT0RBTF9IQUxGID0gJ21vZGFsLWhhbGYnO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImhpbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaG93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcInNlYXJjaFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWFyY2hJbnB1dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBWaWV3Q2hpbGQoJ3NlYXJjaElucHV0JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImlucHV0RWxlbWVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2hvdycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dDbGFzc1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm1vZGFsLXpvb21pbicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcIm1vZGFsWm9vbWluXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Mucm90YXRlLWxheW91dCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcInJvdGF0ZUxheW91dFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm1vZGFsLW1vdmUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb2RhbE1vdmVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5jdXJ0YWluJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwiY3VydGFpblwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmNvbHVtbi1jdXJ0YWluJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sdW1uQ3VydGFpblwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm1vZGFsLWRyb3AnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb2RhbERyb3BcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5tb2RhbC1oYWxmJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWFyY2hGaWVsZENvbXBvbmVudC5wcm90b3R5cGUsIFwibW9kYWxIYWxmXCIsIG51bGwpO1xuICAgIE5iU2VhcmNoRmllbGRDb21wb25lbnQgPSBOYlNlYXJjaEZpZWxkQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc2VhcmNoLWZpZWxkJyxcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcInNlYXJjaFxcXCIgKGtleXVwLmVzYyk9XFxcImVtaXRDbG9zZSgpXFxcIj5cXG4gICAgICA8YnV0dG9uIChjbGljayk9XFxcImVtaXRDbG9zZSgpXFxcIiBuYkJ1dHRvbiBnaG9zdCBjbGFzcz1cXFwiY2xvc2UtYnV0dG9uXFxcIj5cXG4gICAgICAgIDxuYi1pY29uIGljb249XFxcImNsb3NlLW91dGxpbmVcXFwiIHBhY2s9XFxcIm5lYnVsYXItZXNzZW50aWFsc1xcXCI+PC9uYi1pY29uPlxcbiAgICAgIDwvYnV0dG9uPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0td3JhcHBlclxcXCI+XFxuICAgICAgICA8Zm9ybSBjbGFzcz1cXFwiZm9ybVxcXCIgKGtleXVwLmVudGVyKT1cXFwic3VibWl0U2VhcmNoKHNlYXJjaElucHV0LnZhbHVlKVxcXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tY29udGVudFxcXCI+XFxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJzZWFyY2gtaW5wdXRcXFwiXFxuICAgICAgICAgICAgICAgICAgICNzZWFyY2hJbnB1dFxcbiAgICAgICAgICAgICAgICAgICAoaW5wdXQpPVxcXCJlbWl0U2VhcmNoSW5wdXQoc2VhcmNoSW5wdXQudmFsdWUpXFxcIlxcbiAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCJcXG4gICAgICAgICAgICAgICAgICAgW2F0dHIucGxhY2Vob2xkZXJdPVxcXCJwbGFjZWhvbGRlclxcXCJcXG4gICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XFxcIi0xXFxcIlxcbiAgICAgICAgICAgICAgICAgICAoYmx1cik9XFxcImZvY3VzSW5wdXQoKVxcXCIvPlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImluZm9cXFwiPnt7IGhpbnQgfX08L3NwYW4+XFxuICAgICAgICA8L2Zvcm0+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0IGJ1dHRvbnttYXJnaW46MDtwYWRkaW5nOjA7Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDpub25lfTpob3N0IGJ1dHRvbjpmb2N1c3tib3gtc2hhZG93Om5vbmU7b3V0bGluZTpub25lfTpob3N0IGlucHV0e2JvcmRlci10b3A6MDtib3JkZXItcmlnaHQ6MDtib3JkZXItbGVmdDowO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czowO2xpbmUtaGVpZ2h0OjE7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MC4wNXJlbSAwOy13ZWJraXQtYXBwZWFyYW5jZTpub25lfTpob3N0IGlucHV0OmZvY3Vze291dGxpbmU6bm9uZX06aG9zdCBpbnB1dDo6cGxhY2Vob2xkZXJ7b3BhY2l0eTowLjN9Omhvc3Qgc3Bhbntmb250LXNpemU6OTAlO2ZvbnQtd2VpZ2h0OmJvbGQ7ZGlzcGxheTpibG9jazt3aWR0aDo3NSU7bWFyZ2luOjAgYXV0bztwYWRkaW5nOjAuODVyZW0gMDt0ZXh0LWFsaWduOnJpZ2h0fTpob3N0Lm1vZGFsLXpvb21pbntkaXNwbGF5OmJsb2NrfTpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoe2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDUwO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgMC41c306aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaDo6YmVmb3JlLDpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoOjphZnRlcntjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOmNhbGMoMTAwJSArIDE1cHgpO2hlaWdodDpjYWxjKDEwMCUgKyAxNXB4KTtwb2ludGVyLWV2ZW50czpub25lfTpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoOjpiZWZvcmV7dG9wOjA7bGVmdDowO2JvcmRlci1yaWdodC13aWR0aDowO2JvcmRlci1ib3R0b20td2lkdGg6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTE1cHgsIC0xNXB4LCAwKX06aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaDo6YWZ0ZXJ7cmlnaHQ6MDtib3R0b206MDtib3JkZXItdG9wLXdpZHRoOjA7Ym9yZGVyLWxlZnQtd2lkdGg6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMTVweCwgMTVweCwgMCl9Omhvc3QubW9kYWwtem9vbWluIC5zZWFyY2ggYnV0dG9ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDozcmVtO2ZvbnQtc2l6ZToyLjVyZW19W2Rpcj1sdHJdIDpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoIGJ1dHRvbntyaWdodDozcmVtfVtkaXI9cnRsXSA6aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaCBidXR0b257bGVmdDozcmVtfTpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoIGlucHV0e2ZvbnQtc2l6ZToxMHZ3O3dpZHRoOjc1JX06aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaCBidXR0b257b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNkKDAuOCwgMC44LCAxKTt0cmFuc2l0aW9uOm9wYWNpdHkgMC41cywgdHJhbnNmb3JtIDAuNXN9Omhvc3QubW9kYWwtem9vbWluIC5zZWFyY2ggZm9ybXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC44LCAwLjgsIDEpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzLCB0cmFuc2Zvcm0gMC41c306aG9zdC5tb2RhbC16b29taW4uc2hvdyAuc2VhcmNoe3BvaW50ZXItZXZlbnRzOmF1dG87b3BhY2l0eToxfTpob3N0Lm1vZGFsLXpvb21pbi5zaG93IC5zZWFyY2g6OmJlZm9yZSw6aG9zdC5tb2RhbC16b29taW4uc2hvdyAuc2VhcmNoOjphZnRlcnt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgMCwgMCk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC41c306aG9zdC5tb2RhbC16b29taW4uc2hvdyAuc2VhcmNoIGJ1dHRvbntvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMSwgMSl9Omhvc3QubW9kYWwtem9vbWluLnNob3cgLnNlYXJjaCBmb3Jte29wYWNpdHk6MTt0cmFuc2Zvcm06c2NhbGUzZCgxLCAxLCAxKX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MHJlbSl7Omhvc3QubW9kYWwtem9vbWluIGZvcm17bWFyZ2luOjVyZW0gMCAxcmVtfTpob3N0Lm1vZGFsLXpvb21pbiBzcGFue3RleHQtYWxpZ246bGVmdH19XFxuXCIsIFwiOjpuZy1kZWVwIG5iLWxheW91dC5yb3RhdGUtbGF5b3V0e3Bvc2l0aW9uOmZpeGVkO292ZXJmbG93OmhpZGRlbjt3aWR0aDoxMDAlfTo6bmctZGVlcCBuYi1sYXlvdXQucm90YXRlLWxheW91dCAuc2Nyb2xsYWJsZS1jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxMDAwMTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjVzIGN1YmljLWJlemllcigwLjIsIDEsIDAuMywgMSl9OjpuZy1kZWVwIG5iLWxheW91dC5yb3RhdGUtbGF5b3V0LndpdGgtc2VhcmNoIC5zY3JvbGxhYmxlLWNvbnRhaW5lcnt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjVzIGN1YmljLWJlemllcigwLjIsIDEsIDAuMywgMSk7dHJhbnNmb3JtLW9yaWdpbjo1MHZ3IDUwdmg7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDEwMDBweCkgdHJhbnNsYXRlM2QoMCwgNTB2aCwgMCkgcm90YXRlM2QoMSwgMCwgMCwgMzBkZWcpO3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3Qucm90YXRlLWxheW91dHtwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMHZ3O2hlaWdodDoxMDB2aDtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MDt0cmFuc2l0aW9uLXByb3BlcnR5Om9wYWNpdHk7dHJhbnNpdGlvbi1kZWxheTowLjRzfTpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO3otaW5kZXg6MTA1MDtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6NTB2aDtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgMC41czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yLCAxLCAwLjMsIDEpfTpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaCBidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjNyZW07Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC44LCAwLjgsIDEpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzLCB0cmFuc2Zvcm0gMC41czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yLCAxLCAwLjMsIDEpfVtkaXI9bHRyXSA6aG9zdC5yb3RhdGUtbGF5b3V0IC5zZWFyY2ggYnV0dG9ue3JpZ2h0OjNyZW19W2Rpcj1ydGxdIDpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaCBidXR0b257bGVmdDozcmVtfTpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaCBmb3Jte21hcmdpbjo1cmVtIDA7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNkKDAuNywgMC43LCAxKTt0cmFuc2l0aW9uOm9wYWNpdHkgMC41cywgdHJhbnNmb3JtIDAuNXM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMiwgMSwgMC4zLCAxKX06aG9zdC5yb3RhdGUtbGF5b3V0IC5zZWFyY2ggaW5wdXR7Zm9udC1zaXplOjd2dzt3aWR0aDo3NSV9Omhvc3Qucm90YXRlLWxheW91dC5zaG93e29wYWNpdHk6MTt0cmFuc2l0aW9uLWRlbGF5OjBzfTpob3N0LnJvdGF0ZS1sYXlvdXQuc2hvdyAuc2VhcmNoe3BvaW50ZXItZXZlbnRzOmF1dG87b3BhY2l0eToxfTpob3N0LnJvdGF0ZS1sYXlvdXQuc2hvdyAuc2VhcmNoIGJ1dHRvbntvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMSwgMSl9Omhvc3Qucm90YXRlLWxheW91dC5zaG93IC5zZWFyY2ggZm9ybXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMSwgMSl9XFxuXCIsIFwiOjpuZy1kZWVwIG5iLWxheW91dC5tb2RhbC1tb3ZlIC5sYXlvdXR7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC41c306Om5nLWRlZXAgbmItbGF5b3V0Lm1vZGFsLW1vdmUud2l0aC1zZWFyY2ggLmxheW91dHt0cmFuc2Zvcm06c2NhbGUzZCgwLjgsIDAuOCwgMSk7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5tb2RhbC1tb3ZlIC5zZWFyY2h7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwNTA7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMHZoO3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzfTpob3N0Lm1vZGFsLW1vdmUgLnNlYXJjaCBidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjNyZW07Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNXN9W2Rpcj1sdHJdIDpob3N0Lm1vZGFsLW1vdmUgLnNlYXJjaCBidXR0b257cmlnaHQ6M3JlbX1bZGlyPXJ0bF0gOmhvc3QubW9kYWwtbW92ZSAuc2VhcmNoIGJ1dHRvbntsZWZ0OjNyZW19Omhvc3QubW9kYWwtbW92ZSAuc2VhcmNoIGZvcm17bWFyZ2luOjVyZW0gMDtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC44LCAwLjgsIDEpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzLCB0cmFuc2Zvcm0gMC41c306aG9zdC5tb2RhbC1tb3ZlIC5zZWFyY2ggaW5wdXR7Zm9udC1zaXplOjEwdnc7d2lkdGg6NzUlO3RyYW5zZm9ybTpzY2FsZTNkKDAsIDEsIDEpO3RyYW5zZm9ybS1vcmlnaW46MCA1MCU7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4zc306aG9zdC5tb2RhbC1tb3ZlLnNob3cgLnNlYXJjaHtwb2ludGVyLWV2ZW50czphdXRvO29wYWNpdHk6MX06aG9zdC5tb2RhbC1tb3ZlLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxfTpob3N0Lm1vZGFsLW1vdmUuc2hvdyAuc2VhcmNoIGZvcm17b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0Lm1vZGFsLW1vdmUuc2hvdyAuc2VhcmNoIGlucHV0e3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpO3RyYW5zaXRpb24tZHVyYXRpb246MC41c31AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MHJlbSl7Omhvc3QubW9kYWwtbW92ZSBzcGFue3RleHQtYWxpZ246bGVmdH19XFxuXCIsIFwiOmhvc3QuY3VydGFpbiAuc2VhcmNoe3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6MTA1MDt0b3A6MDtsZWZ0OjEwMCU7b3ZlcmZsb3c6aGlkZGVuO2hlaWdodDoxMDB2aDt3aWR0aDoxMDAlO3BhZGRpbmc6M3JlbTtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3M7dHJhbnNpdGlvbi1kZWxheTowLjRzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fTpob3N0LmN1cnRhaW4gLnNlYXJjaDo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjNzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fTpob3N0LmN1cnRhaW4gLnNlYXJjaCBidXR0b257Zm9udC1zaXplOjIuNXJlbTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6M3JlbTt0cmFuc2l0aW9uOm9wYWNpdHkgMC4xczt0cmFuc2l0aW9uLWRlbGF5OjAuM3N9W2Rpcj1sdHJdIDpob3N0LmN1cnRhaW4gLnNlYXJjaCBidXR0b257cmlnaHQ6M3JlbX1bZGlyPXJ0bF0gOmhvc3QuY3VydGFpbiAuc2VhcmNoIGJ1dHRvbntsZWZ0OjNyZW19Omhvc3QuY3VydGFpbiAuc2VhcmNoIGZvcm17d2lkdGg6NTAlO29wYWNpdHk6MDt0cmFuc2Zvcm06c2NhbGUzZCgwLjgsIDAuOCwgMSk7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNXMsIHRyYW5zZm9ybSAwLjVzfTpob3N0LmN1cnRhaW4gLnNlYXJjaCBpbnB1dHt3aWR0aDoxMDAlO2ZvbnQtc2l6ZTo2dnd9Omhvc3QuY3VydGFpbi5zaG93IC5zZWFyY2h7d2lkdGg6MTAwJTtwb2ludGVyLWV2ZW50czphdXRvO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMTAwJSwgMCwgMCk7dHJhbnNpdGlvbi1kZWxheTowc306aG9zdC5jdXJ0YWluLnNob3cgLnNlYXJjaDo6YWZ0ZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwMCUsIDAsIDApO3RyYW5zaXRpb24tZGVsYXk6MC40c306aG9zdC5jdXJ0YWluLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0LmN1cnRhaW4uc2hvdyAuc2VhcmNoIGZvcm17b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQwZW0pezpob3N0LmN1cnRhaW4gc3Bhbnt3aWR0aDo5MCV9Omhvc3QuY3VydGFpbiBpbnB1dHtmb250LXNpemU6MmVtO3dpZHRoOjkwJX19OjpuZy1kZWVwIG5iLWxheW91dC5jdXJ0YWluIC5zY3JvbGxhYmxlLWNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjB9XFxuXCIsIFwiOjpuZy1kZWVwIG5iLWxheW91dC5jb2x1bW4tY3VydGFpbi53aXRoLXNlYXJjaCAubGF5b3V0e3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QuY29sdW1uLWN1cnRhaW57ZGlzcGxheTpibG9jaztwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwNTA7dG9wOjA7bGVmdDo1MCU7b3ZlcmZsb3c6aGlkZGVuO3dpZHRoOjUwJTtoZWlnaHQ6MTAwdmg7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5jb2x1bW4tY3VydGFpbjo6YmVmb3Jle2NvbnRlbnQ6Jyc7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dHJhbnNmb3JtOnNjYWxlM2QoMCwgMSwgMSk7dHJhbnNmb3JtLW9yaWdpbjowIDUwJTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjNzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjg2LCAwLCAwLjA3LCAxKX06aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoe3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6Mi41cmVtIDEuNXJlbSAwO2JhY2tncm91bmQ6dHJhbnNwYXJlbnR9Omhvc3QuY29sdW1uLWN1cnRhaW4gLnNlYXJjaCBidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjJyZW07Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNXN9W2Rpcj1sdHJdIDpob3N0LmNvbHVtbi1jdXJ0YWluIC5zZWFyY2ggYnV0dG9ue3JpZ2h0OjJyZW19W2Rpcj1ydGxdIDpob3N0LmNvbHVtbi1jdXJ0YWluIC5zZWFyY2ggYnV0dG9ue2xlZnQ6MnJlbX06aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoIGZvcm17d2lkdGg6ODUlO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMTUwJSwgMCwgMCk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4zc306aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoIGlucHV0e2ZvbnQtc2l6ZToyLjVyZW07d2lkdGg6MTAwJX06aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoIHNwYW57Zm9udC1zaXplOjg1JX06aG9zdC5jb2x1bW4tY3VydGFpbi5zaG93e3BvaW50ZXItZXZlbnRzOmF1dG99Omhvc3QuY29sdW1uLWN1cnRhaW4uc2hvdzo6YmVmb3Jle3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0LmNvbHVtbi1jdXJ0YWluLnNob3cgLnNlYXJjaCBmb3Jte3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLCAwLCAwKTt0cmFuc2l0aW9uLWRlbGF5OjAuMTVzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjg2LCAwLCAwLjA3LCAxKX06aG9zdC5jb2x1bW4tY3VydGFpbi5zaG93IC5zZWFyY2ggYnV0dG9ue29wYWNpdHk6MTt6LWluZGV4OjEwMH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MHJlbSl7Omhvc3QuY29sdW1uLWN1cnRhaW4gc3Bhbnt3aWR0aDo5MCV9Omhvc3QuY29sdW1uLWN1cnRhaW4gaW5wdXR7Zm9udC1zaXplOjJyZW07d2lkdGg6OTAlfX1cXG5cIiwgXCI6Om5nLWRlZXAgbmItbGF5b3V0Lm1vZGFsLWRyb3AgLmxheW91dHtwb3NpdGlvbjpyZWxhdGl2ZTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjRzLCBvcGFjaXR5IDAuNHM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKX06Om5nLWRlZXAgbmItbGF5b3V0Lm1vZGFsLWRyb3Aud2l0aC1zZWFyY2ggLmxheW91dHtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC45LCAwLjksIDEpO3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QubW9kYWwtZHJvcCAuc2VhcmNoe2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7ei1pbmRleDoxMDUwO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kOm5vbmU7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2g6OmJlZm9yZXtjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNHN9Omhvc3QubW9kYWwtZHJvcCAuc2VhcmNoIGJ1dHRvbntmb250LXNpemU6Mi41cmVtO3Bvc2l0aW9uOmFic29sdXRlO3RvcDozcmVtO2Rpc3BsYXk6YmxvY2s7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAwLjRzfVtkaXI9bHRyXSA6aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggYnV0dG9ue3JpZ2h0OjNyZW19W2Rpcj1ydGxdIDpob3N0Lm1vZGFsLWRyb3AgLnNlYXJjaCBidXR0b257bGVmdDozcmVtfTpob3N0Lm1vZGFsLWRyb3AgLnNlYXJjaCBmb3Jte3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbjo1cmVtIDAgMnJlbX06aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggaW5wdXR7Zm9udC1zaXplOjZ2dzt3aWR0aDo2MCU7cGFkZGluZzowLjI1cmVtO3RleHQtYWxpZ246Y2VudGVyO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgMC40c306aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggc3Bhbntwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4Ojk7ZGlzcGxheTpibG9jazt3aWR0aDo2MCU7cGFkZGluZzowLjg1cmVtIDA7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLCAtNTBweCwgMCk7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNHMsIHRyYW5zZm9ybSAwLjRzfTpob3N0Lm1vZGFsLWRyb3AgLnNlYXJjaCAuZm9ybS1jb250ZW50e3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTA7b3ZlcmZsb3c6aGlkZGVuO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLCAtNTBweCwgMCk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC40c306aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggLmZvcm0tY29udGVudDo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjIwJTt3aWR0aDo2MCU7aGVpZ2h0OjEwNSU7b3BhY2l0eTowO3RyYW5zZm9ybS1vcmlnaW46NTAlIDB9Omhvc3QubW9kYWwtZHJvcC5zaG93IC5zZWFyY2h7cG9pbnRlci1ldmVudHM6YXV0b306aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaDo6YmVmb3Jle29wYWNpdHk6MX06aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxfTpob3N0Lm1vZGFsLWRyb3Auc2hvdyAuc2VhcmNoIC5mb3JtLWNvbnRlbnR7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsIDAsIDApO3RyYW5zaXRpb246bm9uZX06aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaCAuZm9ybS1jb250ZW50OjphZnRlcnthbmltYXRpb246c2NhbGVVcERvd24gMC44cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGZvcndhcmRzfTpob3N0Lm1vZGFsLWRyb3Auc2hvdyAuc2VhcmNoIGlucHV0e29wYWNpdHk6MTt0cmFuc2l0aW9uOm9wYWNpdHkgMHMgMC40c306aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaCBzcGFue29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgMCwgMCk7dHJhbnNpdGlvbi1kZWxheTowLjRzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fUBrZXlmcmFtZXMgc2NhbGVVcERvd257MCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDAsIDEpfTUwJXt0cmFuc2Zvcm06c2NhbGUzZCgxLCAxLCAxKTt0cmFuc2Zvcm0tb3JpZ2luOjUwJSAwO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fTUwLjEle3RyYW5zZm9ybS1vcmlnaW46NTAlIDEwMCU7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXR9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMCwgMSk7dHJhbnNmb3JtLW9yaWdpbjo1MCUgMTAwJTt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLW91dH19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDByZW0pezpob3N0Lm1vZGFsLWRyb3AgZm9ybXttYXJnaW46MnJlbSAwfTpob3N0Lm1vZGFsLWRyb3AgaW5wdXR7d2lkdGg6MTAwJTtsZWZ0OjB9fVxcblwiLCBcIjo6bmctZGVlcCBuYi1sYXlvdXQubW9kYWwtaGFsZiAubGF5b3V0e3RyYW5zaXRpb246dHJhbnNmb3JtIDAuNnMsIG9wYWNpdHkgMC42czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yLCAxLCAwLjMsIDEpfTo6bmctZGVlcCBuYi1sYXlvdXQubW9kYWwtaGFsZi53aXRoLXNlYXJjaCAubGF5b3V0e3RyYW5zZm9ybTpzY2FsZTNkKDAuOCwgMC44LCAxKTtwb2ludGVyLWV2ZW50czpub25lfTpob3N0Lm1vZGFsLWhhbGYgLnNlYXJjaHt0ZXh0LWFsaWduOmNlbnRlcjtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwNTA7dG9wOjA7bGVmdDowO292ZXJmbG93OmhpZGRlbjt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kOm5vbmU7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5tb2RhbC1oYWxmIC5zZWFyY2g6OmJlZm9yZXtjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAwLjZzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjIsIDEsIDAuMywgMSl9Omhvc3QubW9kYWwtaGFsZiAuc2VhcmNoIGJ1dHRvbntmb250LXNpemU6Mi41cmVtO3Bvc2l0aW9uOmFic29sdXRlO3RvcDozcmVtO2Rpc3BsYXk6YmxvY2s7ei1pbmRleDoxMDA7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNkKDAuOCwgMC44LCAxKTt0cmFuc2l0aW9uOm9wYWNpdHkgMC42cywgdHJhbnNmb3JtIDAuNnM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMiwgMSwgMC4zLCAxKX1bZGlyPWx0cl0gOmhvc3QubW9kYWwtaGFsZiAuc2VhcmNoIGJ1dHRvbntyaWdodDozcmVtfVtkaXI9cnRsXSA6aG9zdC5tb2RhbC1oYWxmIC5zZWFyY2ggYnV0dG9ue2xlZnQ6M3JlbX06aG9zdC5tb2RhbC1oYWxmIC5zZWFyY2ggLmZvcm0td3JhcHBlcntwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7d2lkdGg6MTAwJTtoZWlnaHQ6NTAlO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuNnM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMiwgMSwgMC4zLCAxKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgLTEwMCUsIDApfTpob3N0Lm1vZGFsLWhhbGYgLnNlYXJjaCBmb3Jte3dpZHRoOjc1JTttYXJnaW46MCBhdXRvfTpob3N0Lm1vZGFsLWhhbGYgLnNlYXJjaCBpbnB1dHtmb250LXNpemU6N3Z3O3dpZHRoOjEwMCV9Omhvc3QubW9kYWwtaGFsZi5zaG93IC5zZWFyY2h7cG9pbnRlci1ldmVudHM6YXV0b306aG9zdC5tb2RhbC1oYWxmLnNob3cgLnNlYXJjaDo6YmVmb3Jle29wYWNpdHk6MX06aG9zdC5tb2RhbC1oYWxmLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0Lm1vZGFsLWhhbGYuc2hvdyAuc2VhcmNoIC5mb3JtLXdyYXBwZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsIDAsIDApfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iU2VhcmNoRmllbGRDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlNlYXJjaEZpZWxkQ29tcG9uZW50O1xufSgpKTtcbi8qKlxuICogQmVhdXRpZnVsIGZ1bGwtcGFnZSBzZWFyY2ggY29udHJvbC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBzZWFyY2gvc2VhcmNoLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBCYXNpYyBzZXR1cDpcbiAqXG4gKiBgYGB0c1xuICogIDxuYi1zZWFyY2ggdHlwZT1cInJvdGF0ZS1sYXlvdXRcIj48L25iLXNlYXJjaD5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJTZWFyY2hNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU2VhcmNoTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBTZXZlcmFsIGFuaW1hdGlvbiB0eXBlcyBhcmUgYXZhaWxhYmxlOlxuICogbW9kYWwtem9vbWluLCByb3RhdGUtbGF5b3V0LCBtb2RhbC1tb3ZlLCBjdXJ0YWluLCBjb2x1bW4tY3VydGFpbiwgbW9kYWwtZHJvcCwgbW9kYWwtaGFsZlxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gaGFuZGxlIHNlYXJjaCBldmVudCB1c2luZyBgTmJTZWFyY2hTZXJ2aWNlYDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNlYXJjaCBFdmVudCwgc2VhcmNoL3NlYXJjaC1ldmVudC5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHNlYXJjaC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VhcmNoLWRpdmlkZXItY29sb3I6XG4gKiBzZWFyY2gtZGl2aWRlci1zdHlsZTpcbiAqIHNlYXJjaC1kaXZpZGVyLXdpZHRoOlxuICogc2VhcmNoLWV4dHJhLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWFyY2gtdGV4dC1jb2xvcjpcbiAqIHNlYXJjaC10ZXh0LWZvbnQtZmFtaWx5OlxuICogc2VhcmNoLXRleHQtZm9udC1zaXplOlxuICogc2VhcmNoLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzZWFyY2gtdGV4dC1saW5lLWhlaWdodDpcbiAqIHNlYXJjaC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VhcmNoLWluZm8tdGV4dC1jb2xvcjpcbiAqIHNlYXJjaC1pbmZvLXRleHQtZm9udC1mYW1pbHk6XG4gKiBzZWFyY2gtaW5mby10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlYXJjaC1pbmZvLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzZWFyY2gtaW5mby10ZXh0LWxpbmUtaGVpZ2h0OlxuICovXG52YXIgTmJTZWFyY2hDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTZWFyY2hDb21wb25lbnQoc2VhcmNoU2VydmljZSwgdGhlbWVTZXJ2aWNlLCByb3V0ZXIsIG92ZXJsYXlTZXJ2aWNlLCBjaGFuZ2VEZXRlY3Rvcikge1xuICAgICAgICB0aGlzLnNlYXJjaFNlcnZpY2UgPSBzZWFyY2hTZXJ2aWNlO1xuICAgICAgICB0aGlzLnRoZW1lU2VydmljZSA9IHRoZW1lU2VydmljZTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMub3ZlcmxheVNlcnZpY2UgPSBvdmVybGF5U2VydmljZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvciA9IGNoYW5nZURldGVjdG9yO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zaG93U2VhcmNoRmllbGQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlYXJjaCBpbnB1dCBwbGFjZWhvbGRlclxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9ICdTZWFyY2guLi4nO1xuICAgICAgICAvKipcbiAgICAgICAgICogSGludCBzaG93aW5nIHVuZGVyIHRoZSBpbnB1dCBmaWVsZCB0byBpbXByb3ZlIHVzZXIgZXhwZXJpZW5jZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oaW50ID0gJ0hpdCBlbnRlciB0byBzZWFyY2gnO1xuICAgIH1cbiAgICBOYlNlYXJjaENvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMucm91dGVyLmV2ZW50c1xuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oaWRlU2VhcmNoKCk7IH0pO1xuICAgICAgICB0aGlzLnNlYXJjaFNlcnZpY2Uub25TZWFyY2hBY3RpdmF0ZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuICFfdGhpcy50YWcgfHwgZGF0YS50YWcgPT09IF90aGlzLnRhZzsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMub3BlblNlYXJjaCgpOyB9KTtcbiAgICAgICAgdGhpcy5zZWFyY2hTZXJ2aWNlLm9uU2VhcmNoRGVhY3RpdmF0ZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuICFfdGhpcy50YWcgfHwgZGF0YS50YWcgPT09IF90aGlzLnRhZzsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGlkZVNlYXJjaCgpOyB9KTtcbiAgICB9O1xuICAgIE5iU2VhcmNoQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheVJlZiAmJiB0aGlzLm92ZXJsYXlSZWYuaGFzQXR0YWNoZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMYXlvdXRDbGFzc2VzKCk7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYuZGV0YWNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIE5iU2VhcmNoQ29tcG9uZW50LnByb3RvdHlwZS5vcGVuU2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMub3ZlcmxheVJlZikge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5UmVmID0gdGhpcy5vdmVybGF5U2VydmljZS5jcmVhdGUoKTtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVJlZi5hdHRhY2godGhpcy5zZWFyY2hGaWVsZFBvcnRhbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aGVtZVNlcnZpY2UuYXBwZW5kTGF5b3V0Q2xhc3ModGhpcy50eXBlKTtcbiAgICAgICAgb2YobnVsbCkucGlwZShkZWxheSgwKSkuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnRoZW1lU2VydmljZS5hcHBlbmRMYXlvdXRDbGFzcygnd2l0aC1zZWFyY2gnKTtcbiAgICAgICAgICAgIF90aGlzLnNob3dTZWFyY2hGaWVsZCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJTZWFyY2hDb21wb25lbnQucHJvdG90eXBlLmhpZGVTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGF5b3V0Q2xhc3NlcygpO1xuICAgICAgICB0aGlzLnNob3dTZWFyY2hGaWVsZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgdGhpcy5zZWFyY2hCdXR0b24ubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgIH07XG4gICAgTmJTZWFyY2hDb21wb25lbnQucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uICh0ZXJtKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoU2VydmljZS5zdWJtaXRTZWFyY2godGVybSwgdGhpcy50YWcpO1xuICAgICAgICB0aGlzLmhpZGVTZWFyY2goKTtcbiAgICB9O1xuICAgIE5iU2VhcmNoQ29tcG9uZW50LnByb3RvdHlwZS5lbWl0SW5wdXQgPSBmdW5jdGlvbiAodGVybSkge1xuICAgICAgICB0aGlzLnNlYXJjaFNlcnZpY2Uuc2VhcmNoSW5wdXQodGVybSwgdGhpcy50YWcpO1xuICAgIH07XG4gICAgTmJTZWFyY2hDb21wb25lbnQucHJvdG90eXBlLmVtaXRBY3RpdmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hTZXJ2aWNlLmFjdGl2YXRlU2VhcmNoKHRoaXMudHlwZSwgdGhpcy50YWcpO1xuICAgIH07XG4gICAgTmJTZWFyY2hDb21wb25lbnQucHJvdG90eXBlLmVtaXREZWFjdGl2YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNlYXJjaFNlcnZpY2UuZGVhY3RpdmF0ZVNlYXJjaCh0aGlzLnR5cGUsIHRoaXMudGFnKTtcbiAgICB9O1xuICAgIE5iU2VhcmNoQ29tcG9uZW50LnByb3RvdHlwZS5yZW1vdmVMYXlvdXRDbGFzc2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5yZW1vdmVMYXlvdXRDbGFzcygnd2l0aC1zZWFyY2gnKTtcbiAgICAgICAgb2YobnVsbCkucGlwZShkZWxheSg1MDApKS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMudGhlbWVTZXJ2aWNlLnJlbW92ZUxheW91dENsYXNzKF90aGlzLnR5cGUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU2VhcmNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNlYXJjaENvbXBvbmVudC5wcm90b3R5cGUsIFwicGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNlYXJjaENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGludFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU2VhcmNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZChOYlBvcnRhbERpcmVjdGl2ZSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOYlBvcnRhbERpcmVjdGl2ZSlcbiAgICBdLCBOYlNlYXJjaENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VhcmNoRmllbGRQb3J0YWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgVmlld0NoaWxkKCdzZWFyY2hCdXR0b24nLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuICAgIF0sIE5iU2VhcmNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWFyY2hCdXR0b25cIiwgdm9pZCAwKTtcbiAgICBOYlNlYXJjaENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zZWFyY2gnLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGJ1dHRvbiAjc2VhcmNoQnV0dG9uIGNsYXNzPVxcXCJzdGFydC1zZWFyY2hcXFwiIChjbGljayk9XFxcImVtaXRBY3RpdmF0ZSgpXFxcIiBuYkJ1dHRvbiBnaG9zdD5cXG4gICAgICA8bmItaWNvbiBpY29uPVxcXCJzZWFyY2gtb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj48L25iLWljb24+XFxuICAgIDwvYnV0dG9uPlxcbiAgICA8bmItc2VhcmNoLWZpZWxkXFxuICAgICAgKm5iUG9ydGFsXFxuICAgICAgW3Nob3ddPVxcXCJzaG93U2VhcmNoRmllbGRcXFwiXFxuICAgICAgW3R5cGVdPVxcXCJ0eXBlXFxcIlxcbiAgICAgIFtwbGFjZWhvbGRlcl09XFxcInBsYWNlaG9sZGVyXFxcIlxcbiAgICAgIFtoaW50XT1cXFwiaGludFxcXCJcXG4gICAgICAoc2VhcmNoKT1cXFwic2VhcmNoKCRldmVudClcXFwiXFxuICAgICAgKHNlYXJjaElucHV0KT1cXFwiZW1pdElucHV0KCRldmVudClcXFwiXFxuICAgICAgKGNsb3NlKT1cXFwiZW1pdERlYWN0aXZhdGUoKVxcXCI+XFxuICAgIDwvbmItc2VhcmNoLWZpZWxkPlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0IGJ1dHRvbntmb250LXNpemU6MnJlbTttYXJnaW46MCBhdXRvO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOm5vbmV9Omhvc3QgYnV0dG9uOmZvY3Vze2JveC1zaGFkb3c6bm9uZTtvdXRsaW5lOm5vbmV9OjpuZy1kZWVwIG5iLWxheW91dC53aXRoLXNlYXJjaCAuc2Nyb2xsYWJsZS1jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDowfVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYlNlYXJjaFNlcnZpY2UsXG4gICAgICAgICAgICBOYlRoZW1lU2VydmljZSxcbiAgICAgICAgICAgIFJvdXRlcixcbiAgICAgICAgICAgIE5iT3ZlcmxheVNlcnZpY2UsXG4gICAgICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZl0pXG4gICAgXSwgTmJTZWFyY2hDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlNlYXJjaENvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYlNlYXJjaE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNlYXJjaE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJTZWFyY2hNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iT3ZlcmxheU1vZHVsZSxcbiAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJCdXR0b25Nb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgTmJTZWFyY2hDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTZWFyY2hDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICBOYlNlYXJjaFNlcnZpY2UsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTZWFyY2hGaWVsZENvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJTZWFyY2hNb2R1bGUpO1xuICAgIHJldHVybiBOYlNlYXJjaE1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU3R5bGVkIGNoZWNrYm94IGNvbXBvbmVudFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGNoZWNrYm94L2NoZWNrYm94LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkNoZWNrYm94Q29tcG9uZW50YCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkNoZWNrYm94TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBDaGVja2JveCBpcyBhdmFpbGFibGUgaW4gbXVsdGlwbGUgY29sb3JzIHVzaW5nIGBzdGF0dXNgIHByb3BlcnR5OlxuICogQHN0YWNrZWQtZXhhbXBsZShDb2xvcmVkIENoZWNrYm94ZXMsIGNoZWNrYm94L2NoZWNrYm94LXN0YXR1cy5jb21wb25lbnQpXG4gKlxuICogSW5kZXRlcm1pbmF0ZSBzdGF0ZSBpcyBhbHNvIHN1cHBvcnRlZDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSW5kZXRlcm1pbmF0ZSBDaGVja2JveCwgY2hlY2tib3gvY2hlY2tib3gtaW5kZXRlcm1pbmF0ZS5jb21wb25lbnQpXG4gKlxuICogQ2hlY2tib3ggY2FuIGJlIGRpc2FibGVkIHZpYSBgZGlzYWJsZWRgIGF0dHJpYnV0ZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoRGlzYWJsZWQgQ2hlY2tib3gsIGNoZWNrYm94L2NoZWNrYm94LWRpc2FibGVkLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2hlY2tib3gtaGVpZ2h0OlxuICogY2hlY2tib3gtd2lkdGg6XG4gKiBjaGVja2JveC1ib3JkZXItc3R5bGU6XG4gKiBjaGVja2JveC1ib3JkZXItd2lkdGg6XG4gKiBjaGVja2JveC1ib3JkZXItcmFkaXVzOlxuICogY2hlY2tib3gtb3V0bGluZS13aWR0aDpcbiAqIGNoZWNrYm94LW91dGxpbmUtY29sb3I6XG4gKiBjaGVja2JveC10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2hlY2tib3gtdGV4dC1mb250LXNpemU6XG4gKiBjaGVja2JveC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2hlY2tib3gtdGV4dC1saW5lLWhlaWdodDpcbiAqIGNoZWNrYm94LXRleHQtc3BhY2U6XG4gKiBjaGVja2JveC1wYWRkaW5nOlxuICogY2hlY2tib3gtZm9jdXMtaW5zZXQtc2hhZG93LWxlbmd0aDpcbiAqIGNoZWNrYm94LWJhc2ljLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1jaGVja2VkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWluZGV0ZXJtaW5hdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWluZGV0ZXJtaW5hdGUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtaW5kZXRlcm1pbmF0ZS1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWRpc2FibGVkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktY2hlY2tlZC1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWluZGV0ZXJtaW5hdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktaW5kZXRlcm1pbmF0ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWluZGV0ZXJtaW5hdGUtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWZvY3VzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWFjdGl2ZS1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1kaXNhYmxlZC1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1jaGVja2VkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtaW5kZXRlcm1pbmF0ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1pbmRldGVybWluYXRlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtaW5kZXRlcm1pbmF0ZS1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWhvdmVyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtYWN0aXZlLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWRpc2FibGVkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWNoZWNrZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1pbmRldGVybWluYXRlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWluZGV0ZXJtaW5hdGUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1pbmRldGVybWluYXRlLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWZvY3VzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8taG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tZGlzYWJsZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctY2hlY2tlZC1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWluZGV0ZXJtaW5hdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctaW5kZXRlcm1pbmF0ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWluZGV0ZXJtaW5hdGUtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWZvY3VzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWFjdGl2ZS1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1kaXNhYmxlZC1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1jaGVja2VkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1pbmRldGVybWluYXRlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItaW5kZXRlcm1pbmF0ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItaW5kZXRlcm1pbmF0ZS1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWZvY3VzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWRpc2FibGVkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1jaGVja2VkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtaW5kZXRlcm1pbmF0ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1pbmRldGVybWluYXRlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtaW5kZXRlcm1pbmF0ZS1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWhvdmVyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtYWN0aXZlLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWRpc2FibGVkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICovXG52YXIgTmJDaGVja2JveENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkNoZWNrYm94Q29tcG9uZW50KGNoYW5nZURldGVjdG9yLCByZW5kZXJlciwgaG9zdEVsZW1lbnQsIHpvbmUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvciA9IGNoYW5nZURldGVjdG9yO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHRoaXMuX2NoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgdGhpcy5faW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogT3V0cHV0IHdoZW4gY2hlY2tlZCBzdGF0ZSBpcyBjaGFuZ2VkIGJ5IGEgdXNlclxuICAgICAgICAgKiBAdHlwZSBFdmVudEVtaXR0ZXI8Ym9vbGVhbj5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hlY2tlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgTmJDaGVja2JveENvbXBvbmVudF8xID0gTmJDaGVja2JveENvbXBvbmVudDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tib3ggdmFsdWVcbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQGJyZWFraW5nLWNoYW5nZSBSZW1vdmUgQDUuMC4wXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAYnJlYWtpbmctY2hhbmdlIFJlbW92ZSBANS4wLjBcbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ05iQ2hlY2tib3g6IGB2YWx1ZWAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDUuMC4wLiBVc2UgYGNoZWNrZWRgIGluc3RlYWQuJyk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hlY2tib3hDb21wb25lbnQucHJvdG90eXBlLCBcImNoZWNrZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja2VkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyBpbnB1dCBkaXNhYmxlZCBzdGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tib3ggc3RhdHVzLlxuICAgICAgICAgKiBQb3NzaWJsZSB2YWx1ZXMgYXJlOiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGluZm9gLCBgY29udHJvbGAuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZW1wdHlTdGF0dXNXYXJuaW5nKCdOYkNoZWNrYm94Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5kZXRlcm1pbmF0ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyBjaGVja2JveCBpbmRldGVybWluYXRlIHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmRldGVybWluYXRlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5faW5kZXRlcm1pbmF0ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdXRwdXQgd2hlbiBjaGVja2VkIHN0YXRlIGlzIGNoYW5nZWQgYnkgYSB1c2VyXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEBicmVha2luZy1jaGFuZ2UgUmVtb3ZlIEA1LjAuMFxuICAgICAgICAgKiBAdHlwZSBFdmVudEVtaXR0ZXI8Ym9vbGVhbj5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdOYkNoZWNrYm94OiBgdmFsdWVDaGFuZ2VgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiA1LjAuMC4gVXNlIGBjaGVja2VkQ2hhbmdlYCBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tlZENoYW5nZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWVDaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZENoYW5nZSA9IHZhbHVlQ2hhbmdlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hlY2tib3hDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdkYW5nZXInO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnY29udHJvbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQ2hlY2tib3hDb21wb25lbnQucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gVE9ETzogIzIyNTRcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIuYWRkQ2xhc3MoX3RoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ25iLXRyYW5zaXRpb24nKTtcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUucmVnaXN0ZXJPbkNoYW5nZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgfTtcbiAgICBOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZS5yZWdpc3Rlck9uVG91Y2hlZCA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICAgIH07XG4gICAgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tlZCA9IHZhbDtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9O1xuICAgIE5iQ2hlY2tib3hDb21wb25lbnQucHJvdG90eXBlLnNldERpc2FibGVkU3RhdGUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9O1xuICAgIE5iQ2hlY2tib3hDb21wb25lbnQucHJvdG90eXBlLnNldFRvdWNoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgfTtcbiAgICBOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZS51cGRhdGVWYWx1ZUFuZEluZGV0ZXJtaW5hdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICB0aGlzLmNoZWNrZWQgPSBpbnB1dC5jaGVja2VkO1xuICAgICAgICB0aGlzLmNoZWNrZWRDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrZWQpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuY2hlY2tlZCk7XG4gICAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZSA9IGlucHV0LmluZGV0ZXJtaW5hdGU7XG4gICAgfTtcbiAgICB2YXIgTmJDaGVja2JveENvbXBvbmVudF8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5kZXRlcm1pbmF0ZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0V2ZW50RW1pdHRlcl0pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVDaGFuZ2VcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2hlY2tib3hDb21wb25lbnQucHJvdG90eXBlLCBcImNoZWNrZWRDaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1wcmltYXJ5JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1zdWNjZXNzJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy13YXJuaW5nJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1kYW5nZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtaW5mbycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2hlY2tib3hDb21wb25lbnQucHJvdG90eXBlLCBcImluZm9cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtYmFzaWMnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNoZWNrYm94Q29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1jb250cm9sJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGVja2JveENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCBudWxsKTtcbiAgICBOYkNoZWNrYm94Q29tcG9uZW50ID0gTmJDaGVja2JveENvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNoZWNrYm94JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bGFiZWwgY2xhc3M9XFxcImxhYmVsXFxcIj5cXG4gICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIGNsYXNzPVxcXCJuYXRpdmUtaW5wdXQgdmlzdWFsbHktaGlkZGVuXFxcIlxcbiAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgW2NoZWNrZWRdPVxcXCJjaGVja2VkXFxcIlxcbiAgICAgICAgICAgICAoY2hhbmdlKT1cXFwidXBkYXRlVmFsdWVBbmRJbmRldGVybWluYXRlKCRldmVudClcXFwiXFxuICAgICAgICAgICAgIChibHVyKT1cXFwic2V0VG91Y2hlZCgpXFxcIlxcbiAgICAgICAgICAgICAoY2xpY2spPVxcXCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcXFwiXFxuICAgICAgICAgICAgIFtpbmRldGVybWluYXRlXT1cXFwiaW5kZXRlcm1pbmF0ZVxcXCI+XFxuICAgICAgPHNwYW4gW2NsYXNzLmluZGV0ZXJtaW5hdGVdPVxcXCJpbmRldGVybWluYXRlXFxcIiBbY2xhc3MuY2hlY2tlZF09XFxcImNoZWNrZWRcXFwiIGNsYXNzPVxcXCJjdXN0b20tY2hlY2tib3hcXFwiPlxcbiAgICAgICAgPG5iLWljb24gKm5nSWY9XFxcImluZGV0ZXJtaW5hdGVcXFwiIGljb249XFxcIm1pbnVzLWJvbGQtb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj48L25iLWljb24+XFxuICAgICAgICA8bmItaWNvbiAqbmdJZj1cXFwiY2hlY2tlZCAmJiAhaW5kZXRlcm1pbmF0ZVxcXCIgaWNvbj1cXFwiY2hlY2ttYXJrLWJvbGQtb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj48L25iLWljb24+XFxuICAgICAgPC9zcGFuPlxcbiAgICAgIDxzcGFuIGNsYXNzPVxcXCJ0ZXh0XFxcIj5cXG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICA8L3NwYW4+XFxuICAgIDwvbGFiZWw+XFxuICBcIixcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3tcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE5iQ2hlY2tib3hDb21wb25lbnRfMTsgfSksXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0IC5sYWJlbHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW46MDttaW4taGVpZ2h0OmluaGVyaXR9Omhvc3QgLmN1c3RvbS1jaGVja2JveHtmbGV4LXNocmluazowfTpob3N0KC5uYi10cmFuc2l0aW9uKSAuY3VzdG9tLWNoZWNrYm94e3RyYW5zaXRpb24tZHVyYXRpb246MC4xNXM7dHJhbnNpdGlvbi1wcm9wZXJ0eTpiYWNrZ3JvdW5kLWNvbG9yLGJvcmRlcixib3gtc2hhZG93O3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW59Omhvc3QoLm5iLXRyYW5zaXRpb24pIC50ZXh0e3RyYW5zaXRpb24tZHVyYXRpb246MC4xNXM7dHJhbnNpdGlvbi1wcm9wZXJ0eTpjb2xvcjt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWlufVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgICAgIEVsZW1lbnRSZWYsXG4gICAgICAgICAgICBOZ1pvbmVdKVxuICAgIF0sIE5iQ2hlY2tib3hDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNoZWNrYm94Q29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ2hlY2tib3hNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDaGVja2JveE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJDaGVja2JveE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJJY29uTW9kdWxlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iQ2hlY2tib3hDb21wb25lbnRdLFxuICAgICAgICAgICAgZXhwb3J0czogW05iQ2hlY2tib3hDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iQ2hlY2tib3hNb2R1bGUpO1xuICAgIHJldHVybiBOYkNoZWNrYm94TW9kdWxlO1xufSgpKTtcblxudmFyIE5iRHluYW1pY092ZXJsYXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJEeW5hbWljT3ZlcmxheShvdmVybGF5LCBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIHpvbmUsIG92ZXJsYXlDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgPSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI7XG4gICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lciA9IG92ZXJsYXlDb250YWluZXI7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICAgICAgICB0aGlzLm92ZXJsYXlDb25maWcgPSB7fTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5Q2hhbmdlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuaXNTaG93biQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkR5bmFtaWNPdmVybGF5LnByb3RvdHlwZSwgXCJpc0F0dGFjaGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWYgJiYgdGhpcy5yZWYuaGFzQXR0YWNoZWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLCBcImlzU2hvd25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzU2hvd24kLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBjb250ZW50LCBjb250ZXh0LCBwb3NpdGlvblN0cmF0ZWd5LCBvdmVybGF5Q29uZmlnKSB7XG4gICAgICAgIGlmIChvdmVybGF5Q29uZmlnID09PSB2b2lkIDApIHsgb3ZlcmxheUNvbmZpZyA9IHt9OyB9XG4gICAgICAgIHRoaXMuc2V0Q29udGVudEFuZENvbnRleHQoY29udGVudCwgY29udGV4dCk7XG4gICAgICAgIHRoaXMuc2V0Q29tcG9uZW50KGNvbXBvbmVudFR5cGUpO1xuICAgICAgICB0aGlzLnNldFBvc2l0aW9uU3RyYXRlZ3kocG9zaXRpb25TdHJhdGVneSk7XG4gICAgICAgIHRoaXMuc2V0T3ZlcmxheUNvbmZpZyhvdmVybGF5Q29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5LnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheS5wcm90b3R5cGUuc2V0Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZXh0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLnNldENvbnRlbnRBbmRDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRlbnQsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheS5wcm90b3R5cGUuc2V0Q29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlID0gY29tcG9uZW50VHlwZTtcbiAgICAgICAgLy8gaW4gY2FzZSB0aGUgY29tcG9uZW50IGlzIHNob3duIHdlIHJlY3JlYXRlIGl0IGFuZCBzaG93IGl0IGJhY2tcbiAgICAgICAgdmFyIHdhc0F0dGFjaGVkID0gdGhpcy5pc0F0dGFjaGVkO1xuICAgICAgICB0aGlzLmRpc3Bvc2VPdmVybGF5UmVmKCk7XG4gICAgICAgIGlmICh3YXNBdHRhY2hlZCkge1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLnNldFBvc2l0aW9uU3RyYXRlZ3kgPSBmdW5jdGlvbiAocG9zaXRpb25TdHJhdGVneSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3lDaGFuZ2UkLm5leHQoKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5ID0gcG9zaXRpb25TdHJhdGVneTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5LnBvc2l0aW9uQ2hhbmdlXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gISFfdGhpcy5jb250YWluZXI7IH0pLCB0YWtlVW50aWwobWVyZ2UodGhpcy5wb3NpdGlvblN0cmF0ZWd5Q2hhbmdlJCwgdGhpcy5kZXN0cm95JCkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIF90aGlzLmxhc3RBcHBsaWVkUG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgICAgIHBhdGNoKF90aGlzLmNvbnRhaW5lciwgeyBwb3NpdGlvbjogcG9zaXRpb24gfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMucmVmLnVwZGF0ZVBvc2l0aW9uU3RyYXRlZ3kodGhpcy5wb3NpdGlvblN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheS5wcm90b3R5cGUuc2V0T3ZlcmxheUNvbmZpZyA9IGZ1bmN0aW9uIChvdmVybGF5Q29uZmlnKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheUNvbmZpZyA9IG92ZXJsYXlDb25maWc7XG4gICAgICAgIHZhciB3YXNBdHRhY2hlZCA9IHRoaXMuaXNBdHRhY2hlZDtcbiAgICAgICAgdGhpcy5kaXNwb3NlT3ZlcmxheVJlZigpO1xuICAgICAgICBpZiAod2FzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5LnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVmKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU92ZXJsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlckNvbnRhaW5lcigpO1xuICAgICAgICBpZiAoIXRoaXMuaGFzT3ZlcmxheUluQ29udGFpbmVyKCkpIHtcbiAgICAgICAgICAgIC8vIERpc3Bvc2Ugb3ZlcmxheSByZWYgYXMgaXQgcmVmZXJzIHRvIHRoZSBvbGQgb3ZlcmxheSBjb250YWluZXIgYW5kIGNyZWF0ZSBuZXcgYnkgY2FsbGluZyBgc2hvd2BcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZU92ZXJsYXlSZWYoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU2hvd24kLm5leHQodHJ1ZSk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVmKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWYuZGV0YWNoKCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc1Nob3duJC5uZXh0KGZhbHNlKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBdHRhY2hlZCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZU92ZXJsYXlSZWYoKTtcbiAgICAgICAgdGhpcy5pc1Nob3duJC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3lDaGFuZ2UkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5LnByb3RvdHlwZS5nZXRDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLmNyZWF0ZU92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVmID0gdGhpcy5vdmVybGF5LmNyZWF0ZShfX2Fzc2lnbih7IHBvc2l0aW9uU3RyYXRlZ3k6IHRoaXMucG9zaXRpb25TdHJhdGVneSwgc2Nyb2xsU3RyYXRlZ3k6IHRoaXMub3ZlcmxheS5zY3JvbGxTdHJhdGVnaWVzLnJlcG9zaXRpb24oKSB9LCB0aGlzLm92ZXJsYXlDb25maWcpKTtcbiAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbldoZW5TdGFibGUoKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLnJlbmRlckNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lckNvbnRleHQgPSB0aGlzLmNyZWF0ZUNvbnRhaW5lckNvbnRleHQoKTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjcmVhdGVDb250YWluZXIodGhpcy5yZWYsIHRoaXMuY29tcG9uZW50VHlwZSwgY29udGFpbmVyQ29udGV4dCwgdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmluc3RhbmNlLnJlbmRlckNvbnRlbnQoKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250YWluZXJDb250ZXh0ID0gdGhpcy5jcmVhdGVDb250YWluZXJDb250ZXh0KCk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb250YWluZXIuaW5zdGFuY2UsIGNvbnRhaW5lckNvbnRleHQpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnN0YW5jZS5yZW5kZXJDb250ZW50KCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLmNyZWF0ZUNvbnRhaW5lckNvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICBjZnI6IHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMubGFzdEFwcGxpZWRQb3NpdGlvbixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpbWVuc2lvbnMgb2YgdGhlIGNvbnRhaW5lciBtYXkgY2hhbmdlIGFmdGVyIGNvbnRlbnQgdXBkYXRlLiBTbyB3ZSBsaXN0ZW4gdG8gem9uZS5zdGFibGUgZXZlbnQgdG9cbiAgICAgKiByZXBvc2l0aW9uIHRoZSBjb250YWluZXIuXG4gICAgICovXG4gICAgTmJEeW5hbWljT3ZlcmxheS5wcm90b3R5cGUudXBkYXRlUG9zaXRpb25XaGVuU3RhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnpvbmUub25TdGFibGVcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVmICYmIF90aGlzLnJlZi51cGRhdGVQb3NpdGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXkucHJvdG90eXBlLmhhc092ZXJsYXlJbkNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lci5nZXRDb250YWluZXJFbGVtZW50KCkuY29udGFpbnModGhpcy5yZWYuaG9zdEVsZW1lbnQpO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheS5wcm90b3R5cGUuZGlzcG9zZU92ZXJsYXlSZWYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5yZWYuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5yZWYgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYk92ZXJsYXlTZXJ2aWNlLFxuICAgICAgICAgICAgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgICAgICAgICAgTmdab25lLFxuICAgICAgICAgICAgTmJPdmVybGF5Q29udGFpbmVyXSlcbiAgICBdLCBOYkR5bmFtaWNPdmVybGF5KTtcbiAgICByZXR1cm4gTmJEeW5hbWljT3ZlcmxheTtcbn0oKSk7XG5cbnZhciBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkR5bmFtaWNPdmVybGF5Q2hhbmdlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iRHluYW1pY092ZXJsYXlDaGFuZ2UocHJldmlvdXNWYWx1ZSwgY3VycmVudFZhbHVlLCBmaXJzdENoYW5nZSkge1xuICAgICAgICBpZiAoZmlyc3RDaGFuZ2UgPT09IHZvaWQgMCkgeyBmaXJzdENoYW5nZSA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUsIGZpcnN0Q2hhbmdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlLnByb3RvdHlwZS5pc0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZSAhPT0gdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgIH07XG4gICAgcmV0dXJuIE5iRHluYW1pY092ZXJsYXlDaGFuZ2U7XG59KFNpbXBsZUNoYW5nZSkpO1xudmFyIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyKHBvc2l0aW9uQnVpbGRlciwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgZHluYW1pY092ZXJsYXlTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneUJ1aWxkZXIgPSB0cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyO1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5U2VydmljZSA9IGR5bmFtaWNPdmVybGF5U2VydmljZTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IHt9O1xuICAgICAgICB0aGlzLl90cmlnZ2VyID0gTmJUcmlnZ2VyLk5PT1A7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gTmJQb3NpdGlvbi5UT1A7XG4gICAgICAgIHRoaXMuX2FkanVzdG1lbnQgPSBOYkFkanVzdG1lbnQuTk9PUDtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gMTU7XG4gICAgICAgIHRoaXMuX292ZXJsYXlDb25maWcgPSB7fTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0ge307XG4gICAgfVxuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5ob3N0ID0gZnVuY3Rpb24gKGhvc3QpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLmhvc3QgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9ob3N0LCBob3N0KTtcbiAgICAgICAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAodHJpZ2dlciQkMSkge1xuICAgICAgICB0aGlzLmNoYW5nZXMudHJpZ2dlciA9IG5ldyBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlKHRoaXMuX3RyaWdnZXIsIHRyaWdnZXIkJDEpO1xuICAgICAgICB0aGlzLl90cmlnZ2VyID0gdHJpZ2dlciQkMTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUucG9zaXRpb24gPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLnBvc2l0aW9uID0gbmV3IE5iRHluYW1pY092ZXJsYXlDaGFuZ2UodGhpcy5fcG9zaXRpb24sIHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuYWRqdXN0bWVudCA9IGZ1bmN0aW9uIChhZGp1c3RtZW50KSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcy5hZGp1c3RtZW50ID0gbmV3IE5iRHluYW1pY092ZXJsYXlDaGFuZ2UodGhpcy5fYWRqdXN0bWVudCwgYWRqdXN0bWVudCk7XG4gICAgICAgIHRoaXMuX2FkanVzdG1lbnQgPSBhZGp1c3RtZW50O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5jb21wb25lbnRUeXBlID0gZnVuY3Rpb24gKGNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLmNvbXBvbmVudFR5cGUgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9jb21wb25lbnRUeXBlLCBjb21wb25lbnRUeXBlKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZSA9IGNvbXBvbmVudFR5cGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLmNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICB0aGlzLmNoYW5nZXMuY29udGVudCA9IG5ldyBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlKHRoaXMuX2NvbnRlbnQsIGNvbnRlbnQpO1xuICAgICAgICB0aGlzLl9jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuY29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcy5jb250ZXh0ID0gbmV3IE5iRHluYW1pY092ZXJsYXlDaGFuZ2UodGhpcy5fY29udGV4dCwgY29udGV4dCk7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcy5vZmZzZXQgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9vZmZzZXQsIG9mZnNldCk7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUub3ZlcmxheUNvbmZpZyA9IGZ1bmN0aW9uIChvdmVybGF5Q29uZmlnKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcy5vdmVybGF5Q29uZmlnID0gbmV3IE5iRHluYW1pY092ZXJsYXlDaGFuZ2UodGhpcy5fb3ZlcmxheUNvbmZpZywgb3ZlcmxheUNvbmZpZyk7XG4gICAgICAgIHRoaXMuX292ZXJsYXlDb25maWcgPSBvdmVybGF5Q29uZmlnO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jb21wb25lbnRUeXBlIHx8ICF0aGlzLl9ob3N0KSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk5iRHluYW1pY092ZXJsYXlIYW5kbGVyOiBhdCBsZWFzdCAnY29tcG9uZW50VHlwZScgYW5kICdob3N0JyBzaG91bGQgYmVcXG4gICAgICBwYXNzZWQgYmVmb3JlIGJ1aWxkaW5nIGEgZHluYW1pYyBvdmVybGF5LlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5ID0gdGhpcy5keW5hbWljT3ZlcmxheVNlcnZpY2UuY3JlYXRlKHRoaXMuX2NvbXBvbmVudFR5cGUsIHRoaXMuX2NvbnRlbnQsIHRoaXMuX2NvbnRleHQsIHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpLCB0aGlzLl9vdmVybGF5Q29uZmlnKTtcbiAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJDaGFuZ2VzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmR5bmFtaWNPdmVybGF5O1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLnJlYnVpbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3ZSBzaG91bGQgbm90IHRocm93IGhlcmVcbiAgICAgICAgICogYXMgd2UgdXNlIHJlYnVpbHQgaW4gbGlmZWN5Y2xlIGhvb2tzXG4gICAgICAgICAqIHdoaWNoIGl0IGNvdWxkIGJlIGNhbGxlZCBiZWZvcmUgdGhlIGJ1aWxkXG4gICAgICAgICAqIHNvIHdlIGp1c3QgaWdub3JlIHRoaXMgY2FsbFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCF0aGlzLmR5bmFtaWNPdmVybGF5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNQb3NpdGlvblN0cmF0ZWd5VXBkYXRlUmVxdWlyZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheS5zZXRQb3NpdGlvblN0cmF0ZWd5KHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1RyaWdnZXJTdHJhdGVneVVwZGF0ZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ29udGFpbmVyUmVyZW5kZXJSZXF1aXJlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LnNldENvbnRlbnRBbmRDb250ZXh0KHRoaXMuX2NvbnRlbnQsIHRoaXMuX2NvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ29tcG9uZW50VHlwZVVwZGF0ZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuc2V0Q29tcG9uZW50KHRoaXMuX2NvbXBvbmVudFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzT3ZlcmxheUNvbmZpZ1VwZGF0ZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuc2V0T3ZlcmxheUNvbmZpZyh0aGlzLl9vdmVybGF5Q29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyQ2hhbmdlcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5keW5hbWljT3ZlcmxheTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZHluYW1pY092ZXJsYXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5iRHluYW1pY092ZXJsYXlIYW5kbGVyOiBjYW5ub3QgY29ubmVjdCB0byBEeW5hbWljT3ZlcmxheVxcbiAgICAgIGFzIGl0IGlzIG5vdCBjcmVhdGVkIHlldC4gQ2FsbCBidWlsZCgpIGZpcnN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uVHJpZ2dlcnModGhpcy5keW5hbWljT3ZlcmxheSk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudHJpZ2dlclN0cmF0ZWd5KSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5jbGVhckNoYW5nZXMoKTtcbiAgICAgICAgaWYgKHRoaXMuZHluYW1pY092ZXJsYXkpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuY3JlYXRlUG9zaXRpb25TdHJhdGVneSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb25CdWlsZGVyXG4gICAgICAgICAgICAuY29ubmVjdGVkVG8odGhpcy5faG9zdClcbiAgICAgICAgICAgIC5wb3NpdGlvbih0aGlzLl9wb3NpdGlvbilcbiAgICAgICAgICAgIC5hZGp1c3RtZW50KHRoaXMuX2FkanVzdG1lbnQpXG4gICAgICAgICAgICAub2Zmc2V0KHRoaXMuX29mZnNldCk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuc3Vic2NyaWJlT25UcmlnZ2VycyA9IGZ1bmN0aW9uIChkeW5hbWljT3ZlcmxheSkge1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneSA9IHRoaXMudHJpZ2dlclN0cmF0ZWd5QnVpbGRlclxuICAgICAgICAgICAgLnRyaWdnZXIodGhpcy5fdHJpZ2dlcilcbiAgICAgICAgICAgIC5ob3N0KHRoaXMuX2hvc3QubmF0aXZlRWxlbWVudClcbiAgICAgICAgICAgIC5jb250YWluZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gZHluYW1pY092ZXJsYXkuZ2V0Q29udGFpbmVyKCk7IH0pXG4gICAgICAgICAgICAuYnVpbGQoKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuc2hvdyQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGR5bmFtaWNPdmVybGF5LnNob3coKTsgfSk7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LmhpZGUkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBkeW5hbWljT3ZlcmxheS5oaWRlKCk7IH0pO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLmlzQ29udGFpbmVyUmVyZW5kZXJSZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb250ZW50VXBkYXRlZCgpXG4gICAgICAgICAgICB8fCB0aGlzLmlzQ29udGV4dFVwZGF0ZWQoKVxuICAgICAgICAgICAgfHwgdGhpcy5pc1Bvc2l0aW9uU3RyYXRlZ3lVcGRhdGVSZXF1aXJlZCgpO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLmlzUG9zaXRpb25TdHJhdGVneVVwZGF0ZVJlcXVpcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0FkanVzdG1lbnRVcGRhdGVkKCkgfHwgdGhpcy5pc1Bvc2l0aW9uVXBkYXRlZCgpIHx8IHRoaXMuaXNPZmZzZXRVcGRhdGVkKCkgfHwgdGhpcy5pc0hvc3RVcGRhdGVkKCk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuaXNUcmlnZ2VyU3RyYXRlZ3lVcGRhdGVSZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNUcmlnZ2VyVXBkYXRlZCgpIHx8IHRoaXMuaXNIb3N0VXBkYXRlZCgpO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLmlzQ29tcG9uZW50VHlwZVVwZGF0ZVJlcXVpcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0NvbXBvbmVudFR5cGVVcGRhdGVkKCk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuaXNPdmVybGF5Q29uZmlnVXBkYXRlUmVxdWlyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzT3ZlcmxheUNvbmZpZ1VwZGF0ZWQoKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5pc0NvbXBvbmVudFR5cGVVcGRhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmNvbXBvbmVudFR5cGUgJiYgdGhpcy5jaGFuZ2VzLmNvbXBvbmVudFR5cGUuaXNDaGFuZ2VkKCk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuaXNDb250ZW50VXBkYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5jb250ZW50ICYmIHRoaXMuY2hhbmdlcy5jb250ZW50LmlzQ2hhbmdlZCgpO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLmlzQ29udGV4dFVwZGF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuY29udGV4dCAmJiB0aGlzLmNoYW5nZXMuY29udGV4dC5pc0NoYW5nZWQoKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5pc0FkanVzdG1lbnRVcGRhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmFkanVzdG1lbnQgJiYgdGhpcy5jaGFuZ2VzLmFkanVzdG1lbnQuaXNDaGFuZ2VkKCk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuaXNQb3NpdGlvblVwZGF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMucG9zaXRpb24gJiYgdGhpcy5jaGFuZ2VzLnBvc2l0aW9uLmlzQ2hhbmdlZCgpO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLmlzSG9zdFVwZGF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuaG9zdCAmJiB0aGlzLmNoYW5nZXMuaG9zdC5pc0NoYW5nZWQoKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5pc1RyaWdnZXJVcGRhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLnRyaWdnZXIgJiYgdGhpcy5jaGFuZ2VzLnRyaWdnZXIuaXNDaGFuZ2VkKCk7XG4gICAgfTtcbiAgICBOYkR5bmFtaWNPdmVybGF5SGFuZGxlci5wcm90b3R5cGUuaXNPZmZzZXRVcGRhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLm9mZnNldCAmJiB0aGlzLmNoYW5nZXMub2Zmc2V0LmlzQ2hhbmdlZCgpO1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIucHJvdG90eXBlLmlzT3ZlcmxheUNvbmZpZ1VwZGF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMub3ZlcmxheUNvbmZpZyAmJiB0aGlzLmNoYW5nZXMub3ZlcmxheUNvbmZpZy5pc0NoYW5nZWQoKTtcbiAgICB9O1xuICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLnByb3RvdHlwZS5jbGVhckNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IHt9O1xuICAgIH07XG4gICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iUG9zaXRpb25CdWlsZGVyU2VydmljZSxcbiAgICAgICAgICAgIE5iVHJpZ2dlclN0cmF0ZWd5QnVpbGRlclNlcnZpY2UsXG4gICAgICAgICAgICBOYkR5bmFtaWNPdmVybGF5XSlcbiAgICBdLCBOYkR5bmFtaWNPdmVybGF5SGFuZGxlcik7XG4gICAgcmV0dXJuIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBPdmVybGF5IGNvbnRhaW5lci5cbiAqIFJlbmRlcnMgcHJvdmlkZWQgY29udGVudCBpbnNpZGUuXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHBvcG92ZXItdGV4dC1jb2xvcjpcbiAqIHBvcG92ZXItdGV4dC1mb250LWZhbWlseTpcbiAqIHBvcG92ZXItdGV4dC1mb250LXNpemU6XG4gKiBwb3BvdmVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBwb3BvdmVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBwb3BvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBwb3BvdmVyLWJvcmRlci13aWR0aDpcbiAqIHBvcG92ZXItYm9yZGVyLWNvbG9yOlxuICogcG9wb3Zlci1ib3JkZXItcmFkaXVzOlxuICogcG9wb3Zlci1zaGFkb3c6XG4gKiBwb3BvdmVyLWFycm93LXNpemU6XG4gKiBwb3BvdmVyLXBhZGRpbmc6XG4gKiAqL1xudmFyIE5iUG9wb3ZlckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJQb3BvdmVyQ29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iUG9wb3ZlckNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYlBvcG92ZXJDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGV0YWNoQ29udGVudCgpO1xuICAgICAgICB0aGlzLmF0dGFjaENvbnRlbnQoKTtcbiAgICB9O1xuICAgIE5iUG9wb3ZlckNvbXBvbmVudC5wcm90b3R5cGUuZGV0YWNoQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyLmRldGFjaCgpO1xuICAgIH07XG4gICAgTmJQb3BvdmVyQ29tcG9uZW50LnByb3RvdHlwZS5hdHRhY2hDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50IGluc3RhbmNlb2YgVGVtcGxhdGVSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoVGVtcGxhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbnRlbnQgaW5zdGFuY2VvZiBUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaENvbXBvbmVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJQb3BvdmVyQ29tcG9uZW50LnByb3RvdHlwZS5hdHRhY2hUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXG4gICAgICAgICAgICAuYXR0YWNoVGVtcGxhdGVQb3J0YWwobmV3IE5iVGVtcGxhdGVQb3J0YWwodGhpcy5jb250ZW50LCBudWxsLCB7ICRpbXBsaWNpdDogdGhpcy5jb250ZXh0IH0pKTtcbiAgICB9O1xuICAgIE5iUG9wb3ZlckNvbXBvbmVudC5wcm90b3R5cGUuYXR0YWNoQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9ydGFsID0gbmV3IE5iQ29tcG9uZW50UG9ydGFsKHRoaXMuY29udGVudCwgbnVsbCwgbnVsbCwgdGhpcy5jZnIpO1xuICAgICAgICB2YXIgcmVmID0gdGhpcy5vdmVybGF5Q29udGFpbmVyLmF0dGFjaENvbXBvbmVudFBvcnRhbChwb3J0YWwsIHRoaXMuY29udGV4dCk7XG4gICAgICAgIHJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfTtcbiAgICBOYlBvcG92ZXJDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaFN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyLmF0dGFjaFN0cmluZ0NvbnRlbnQodGhpcy5jb250ZW50KTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBWaWV3Q2hpbGQoTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudClcbiAgICBdLCBOYlBvcG92ZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm92ZXJsYXlDb250YWluZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlBvcG92ZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRlbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlBvcG92ZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcilcbiAgICBdLCBOYlBvcG92ZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNmclwiLCB2b2lkIDApO1xuICAgIE5iUG9wb3ZlckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1wb3BvdmVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiYXJyb3dcXFwiPjwvc3Bhbj5cXG4gICAgPG5iLW92ZXJsYXktY29udGFpbmVyPjwvbmItb3ZlcmxheS1jb250YWluZXI+XFxuICBcIixcbiAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QgLmFycm93e3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjA7aGVpZ2h0OjB9XFxuXCJdXG4gICAgICAgIH0pXG4gICAgXSwgTmJQb3BvdmVyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJQb3BvdmVyQ29tcG9uZW50O1xufShOYlBvc2l0aW9uZWRDb250YWluZXIpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBQb3dlcmZ1bCBwb3BvdmVyIGRpcmVjdGl2ZSwgd2hpY2ggcHJvdmlkZXMgdGhlIGJlc3QgVVggZm9yIHlvdXIgdXNlcnMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgcG9wb3Zlci9wb3BvdmVyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBQb3BvdmVyIGNhbiBhY2NlcHQgZGlmZmVyZW50IGNvbnRlbnQgc3VjaCBhczpcbiAqIFRlbXBsYXRlUmVmXG4gKlxuICogYGBgaHRtbFxuICogPGJ1dHRvbiBbbmJQb3BvdmVyXT1cInRlbXBsYXRlUmVmXCI+PC9idXR0b24+XG4gKiA8bmctdGVtcGxhdGUgI3RlbXBsYXRlUmVmPlxuICogICA8c3Bhbj5IZWxsbywgUG9wb3ZlciE8L3NwYW4+XG4gKiA8L25nLXRlbXBsYXRlPlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlBvcG92ZXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iUG9wb3Zlck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogQ3VzdG9tIGNvbXBvbmVudHNcbiAqXG4gKiBgYGBodG1sXG4gKiA8YnV0dG9uIFtuYlBvcG92ZXJdPVwiTXlQb3BvdmVyQ29tcG9uZW50XCI+PC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiBCb3RoIGN1c3RvbSBjb21wb25lbnRzIGFuZCB0ZW1wbGF0ZVJlZiBwb3BvdmVycyBjYW4gcmVjZWl2ZSAqY29udGVudENvbnRleHQqIHByb3BlcnR5XG4gKiB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBjb250ZW50IHByb3BzLlxuICpcbiAqIFByaW1pdGl2ZSB0eXBlc1xuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gbmJQb3BvdmVyPVwiSGVsbG8sIFBvcG92ZXIhXCI+PC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiBQb3BvdmVyIGhhcyBkaWZmZXJlbnQgcGxhY2VtZW50cywgc3VjaCBhczogdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0LCBzdGFydCBhbmQgZW5kXG4gKiB3aGljaCBjYW4gYmUgdXNlZCBhcyBmb2xsb3dpbmc6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShQbGFjZW1lbnRzLCBwb3BvdmVyL3BvcG92ZXItcGxhY2VtZW50cy5jb21wb25lbnQpXG4gKlxuICogQnkgZGVmYXVsdCBwb3BvdmVyIHdpbGwgdHJ5IHRvIGFkanVzdCBpdHNlbGYgdG8gbWF4aW1hbGx5IGZpdCB2aWV3cG9ydFxuICogYW5kIHByb3ZpZGUgdGhlIGJlc3QgdXNlciBleHBlcmllbmNlLiBJdCB3aWxsIHRyeSB0byBjaGFuZ2UgcG9zaXRpb24gb2YgdGhlIHBvcG92ZXIgY29udGFpbmVyLlxuICogSWYgeW91IHdhbnQgdG8gZGlzYWJsZSB0aGlzIGJlaGF2aW91ciBzZXQgaXQgYG5vb3BgLlxuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gbmJQb3BvdmVyPVwiSGVsbG8sIFBvcG92ZXIhXCIgbmJQb3BvdmVyQWRqdXN0bWVudD1cIm5vb3BcIj48L2J1dHRvbj5cbiAqIGBgYFxuICpcbiAqIFBvcG92ZXIgaGFzIGEgbnVtYmVyIG9mIHRyaWdnZXJzIHdoaWNoIHByb3ZpZGVzIGFuIGFiaWxpdHkgdG8gc2hvdyBhbmQgaGlkZSB0aGUgY29tcG9uZW50IGluIGRpZmZlcmVudCB3YXlzOlxuICpcbiAqIC0gQ2xpY2sgbW9kZSBzaG93cyB0aGUgY29tcG9uZW50IHdoZW4gYSB1c2VyIGNsaWNrcyBvbiB0aGUgaG9zdCBlbGVtZW50IGFuZCBoaWRlcyB3aGVuIHRoZSB1c2VyIGNsaWNrc1xuICogc29tZXdoZXJlIG9uIHRoZSBkb2N1bWVudCBvdXRzaWRlIHRoZSBjb21wb25lbnQuXG4gKiAtIEhpbnQgcHJvdmlkZXMgY2FwYWJpbGl0eSB0byBzaG93IHRoZSBjb21wb25lbnQgd2hlbiB0aGUgdXNlciBob3ZlcnMgb3ZlciB0aGUgaG9zdCBlbGVtZW50XG4gKiBhbmQgaGlkZSB3aGVuIHRoZSB1c2VyIGhvdmVycyBvdXQgb2YgdGhlIGhvc3QuXG4gKiAtIEhvdmVyIHdvcmtzIGxpa2UgaGludCBtb2RlIHdpdGggb25lIGV4Y2VwdGlvbiAtIHdoZW4gdGhlIHVzZXIgbW92ZXMgbW91c2UgZnJvbSBob3N0IGVsZW1lbnQgdG9cbiAqIHRoZSBjb250YWluZXIgZWxlbWVudCB0aGUgY29tcG9uZW50IHJlbWFpbnMgb3Blbiwgc28gdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBpbnRlcmFjdCB3aXRoIGl0IGNvbnRlbnQuXG4gKiAtIEZvY3VzIG1vZGUgaXMgYXBwbGllZCB3aGVuIHVzZXIgZm9jdXNlcyB0aGUgZWxlbWVudC5cbiAqIC0gTm9vcCBtb2RlIC0gdGhlIGNvbXBvbmVudCB3b24ndCByZWFjdCB0byB0aGUgdXNlciBpbnRlcmFjdGlvbi5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF2YWlsYWJsZSBUcmlnZ2VycywgcG9wb3Zlci9wb3BvdmVyLW1vZGVzLmNvbXBvbmVudC5odG1sKVxuICpcbiAqIE5vb3AgbW9kZSBpcyBlc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIHlvdSBuZWVkIHRvIGNvbnRyb2wgUG9wb3ZlciBwcm9ncmFtbWF0aWNhbGx5LCBmb3IgZXhhbXBsZSBzaG93L2hpZGVcbiAqIGFzIGEgcmVzdWx0IG9mIHNvbWUgdGhpcmQtcGFydHkgYWN0aW9uLCBsaWtlIEhUVFAgcmVxdWVzdCBvciB2YWxpZGF0aW9uIGNoZWNrOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTWFudWFsIENvbnRyb2wsIHBvcG92ZXIvcG9wb3Zlci1ub29wLmNvbXBvbmVudClcbiAqXG4gKiBCZWxvdyBhcmUgZXhhbXBsZXMgZm9yIG1hbnVhbCBwb3BvdmVyIHNldHRpbmdzIGNvbnRyb2wsIGJvdGggdmlhIHRlbXBsYXRlIGJpbmRpbmcgYW5kIGNvZGUuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFBvcG92ZXIgU2V0dGluZ3MsIHBvcG92ZXIvcG9wb3Zlci1keW5hbWljLmNvbXBvbmVudClcbiAqXG4gKiBQbGVhc2Ugbm90ZSwgd2hpbGUgbWFuaXB1bGF0aW5nIFBvcG92ZXIgc2V0dGluZyB2aWEgY29kZSwgeW91IG5lZWQgdG8gY2FsbCBgcmVidWlsZCgpYCBtZXRob2QgdG8gYXBwbHkgdGhlIHNldHRpbmdzXG4gKiBjaGFuZ2VkLlxuICogQHN0YWNrZWQtZXhhbXBsZShQb3BvdmVyIFNldHRpbmdzIENvZGUsIHBvcG92ZXIvcG9wb3Zlci1keW5hbWljLWNvZGUuY29tcG9uZW50KVxuICpcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoVGVtcGxhdGUgUmVmLCBwb3BvdmVyL3BvcG92ZXItdGVtcGxhdGUtcmVmLmNvbXBvbmVudClcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoQ3VzdG9tIENvbXBvbmVudCwgcG9wb3Zlci9wb3BvdmVyLWN1c3RvbS1jb21wb25lbnQuY29tcG9uZW50KVxuICogKi9cbnZhciBOYlBvcG92ZXJEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJQb3BvdmVyRGlyZWN0aXZlKGhvc3RSZWYsIGR5bmFtaWNPdmVybGF5SGFuZGxlcikge1xuICAgICAgICB0aGlzLmhvc3RSZWYgPSBob3N0UmVmO1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5SGFuZGxlciA9IGR5bmFtaWNPdmVybGF5SGFuZGxlcjtcbiAgICAgICAgdGhpcy5wb3BvdmVyQ29tcG9uZW50ID0gTmJQb3BvdmVyQ29tcG9uZW50O1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRhaW5lciBjb250ZW50IGNvbnRleHQuIFdpbGwgYmUgYXBwbGllZCB0byB0aGUgcmVuZGVyZWQgY29tcG9uZW50LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmNvbnRleHQgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvc2l0aW9uIHdpbGwgYmUgY2FsY3VsYXRlZCByZWxhdGl2ZWx5IGhvc3QgZWxlbWVudCBiYXNlZCBvbiB0aGUgcG9zaXRpb24uXG4gICAgICAgICAqIENhbiBiZSB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQsIHN0YXJ0IG9yIGVuZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE5iUG9zaXRpb24uVE9QO1xuICAgICAgICB0aGlzLl9hZGp1c3RtZW50ID0gTmJBZGp1c3RtZW50LkNMT0NLV0lTRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc2NyaWJlcyB3aGVuIHRoZSBjb250YWluZXIgd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICogQXZhaWxhYmxlIG9wdGlvbnM6IGBjbGlja2AsIGBob3ZlcmAsIGBoaW50YCwgYGZvY3VzYCBhbmQgYG5vb3BgXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMudHJpZ2dlciA9IE5iVHJpZ2dlci5DTElDSztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgcG9wb3ZlciBvZmZzZXRcbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5vZmZzZXQgPSAxNTtcbiAgICAgICAgdGhpcy5wb3BvdmVyQ2xhc3MgPSAnJztcbiAgICAgICAgdGhpcy5uYlBvcG92ZXJTaG93U3RhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlBvcG92ZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcImFkanVzdG1lbnRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29udGFpbmVyIHBvc2l0aW9uIHdpbGwgYmUgY2hhbmdlcyBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHRoaXMgc3RyYXRlZ3kgaWYgY29udGFpbmVyIGNhbid0IGZpdCB2aWV3IHBvcnQuXG4gICAgICAgICAqIFNldCB0aGlzIHByb3BlcnR5IHRvIGBub29wYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBkaXNhYmxlIGF1dG9tYXRpY2FsbHkgYWRqdXN0bWVudC5cbiAgICAgICAgICogQXZhaWxhYmxlIHZhbHVlczogYGNsb2Nrd2lzZWAgKGRlZmF1bHQpLCBgY291bnRlcmNsb2Nrd2lzZWAsIGB2ZXJ0aWNhbGAsIGBob3Jpem9udGFsYCwgYG5vb3BgLlxuICAgICAgICAgKiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGp1c3RtZW50O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIEBicmVha2luZy1jaGFuZ2UgUmVtb3ZlIEA1LjAuMFxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhbHN5IHZhbHVlcyBmb3IgJ25iUG9wb3ZlckFkanVzdG1lbnQnIGFyZSBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gTmVidWxhciA1LlxcbiBVc2UgJ25vb3AnIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gTmJBZGp1c3RtZW50Lk5PT1A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9hZGp1c3RtZW50ID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlBvcG92ZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcImlzU2hvd25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhISh0aGlzLmR5bmFtaWNPdmVybGF5ICYmIHRoaXMuZHluYW1pY092ZXJsYXkuaXNBdHRhY2hlZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyXG4gICAgICAgICAgICAuaG9zdCh0aGlzLmhvc3RSZWYpXG4gICAgICAgICAgICAuY29tcG9uZW50VHlwZSh0aGlzLnBvcG92ZXJDb21wb25lbnQpO1xuICAgIH07XG4gICAgTmJQb3BvdmVyRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZWJ1aWxkKCk7XG4gICAgfTtcbiAgICBOYlBvcG92ZXJEaXJlY3RpdmUucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheSA9IHRoaXMuY29uZmlndXJlRHluYW1pY092ZXJsYXkoKVxuICAgICAgICAgICAgLmJ1aWxkKCk7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuaXNTaG93blxuICAgICAgICAgICAgLnBpcGUoc2tpcCgxKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoaXNTaG93bikgeyByZXR1cm4gX3RoaXMubmJQb3BvdmVyU2hvd1N0YXRlQ2hhbmdlLmVtaXQoeyBpc1Nob3duOiBpc1Nob3duIH0pOyB9KTtcbiAgICB9O1xuICAgIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUucmVidWlsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheSA9IHRoaXMuY29uZmlndXJlRHluYW1pY092ZXJsYXkoKVxuICAgICAgICAgICAgLnJlYnVpbGQoKTtcbiAgICB9O1xuICAgIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheS5zaG93KCk7XG4gICAgfTtcbiAgICBOYlBvcG92ZXJEaXJlY3RpdmUucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuaGlkZSgpO1xuICAgIH07XG4gICAgTmJQb3BvdmVyRGlyZWN0aXZlLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkudG9nZ2xlKCk7XG4gICAgfTtcbiAgICBOYlBvcG92ZXJEaXJlY3RpdmUucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5SGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYlBvcG92ZXJEaXJlY3RpdmUucHJvdG90eXBlLmNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXJcbiAgICAgICAgICAgIC5wb3NpdGlvbih0aGlzLnBvc2l0aW9uKVxuICAgICAgICAgICAgLnRyaWdnZXIodGhpcy50cmlnZ2VyKVxuICAgICAgICAgICAgLm9mZnNldCh0aGlzLm9mZnNldClcbiAgICAgICAgICAgIC5hZGp1c3RtZW50KHRoaXMuYWRqdXN0bWVudClcbiAgICAgICAgICAgIC5jb250ZW50KHRoaXMuY29udGVudClcbiAgICAgICAgICAgIC5jb250ZXh0KHRoaXMuY29udGV4dClcbiAgICAgICAgICAgIC5vdmVybGF5Q29uZmlnKHsgcGFuZWxDbGFzczogdGhpcy5wb3BvdmVyQ2xhc3MgfSk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iUG9wb3ZlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJQb3BvdmVyQ29udGV4dCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29udGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJQb3BvdmVyUGxhY2VtZW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJQb3BvdmVyRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJQb3BvdmVyQWRqdXN0bWVudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYWRqdXN0bWVudFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iUG9wb3ZlclRyaWdnZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlBvcG92ZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcInRyaWdnZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iUG9wb3Zlck9mZnNldCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwib2Zmc2V0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYlBvcG92ZXJDbGFzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwicG9wb3ZlckNsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iUG9wb3ZlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwibmJQb3BvdmVyU2hvd1N0YXRlQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgTmJQb3BvdmVyRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlBvcG92ZXJdJyxcbiAgICAgICAgICAgIGV4cG9ydEFzOiAnbmJQb3BvdmVyJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW05iRHluYW1pY092ZXJsYXlIYW5kbGVyLCBOYkR5bmFtaWNPdmVybGF5XSxcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgICAgIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyXSlcbiAgICBdLCBOYlBvcG92ZXJEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlBvcG92ZXJEaXJlY3RpdmU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJQb3BvdmVyTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iUG9wb3Zlck1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJQb3BvdmVyTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtOYk92ZXJsYXlNb2R1bGVdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJQb3BvdmVyRGlyZWN0aXZlLCBOYlBvcG92ZXJDb21wb25lbnRdLFxuICAgICAgICAgICAgZXhwb3J0czogW05iUG9wb3ZlckRpcmVjdGl2ZV0sXG4gICAgICAgICAgICBlbnRyeUNvbXBvbmVudHM6IFtOYlBvcG92ZXJDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iUG9wb3Zlck1vZHVsZSk7XG4gICAgcmV0dXJuIE5iUG9wb3Zlck1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ29udGV4dCBtZW51IGNvbXBvbmVudCB1c2VkIGFzIGNvbnRlbnQgd2l0aGluIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUuXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGNvbnRleHQtbWVudS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY29udGV4dC1tZW51LWJvcmRlci1jb2xvcjpcbiAqIGNvbnRleHQtbWVudS1ib3JkZXItc3R5bGU6XG4gKiBjb250ZXh0LW1lbnUtYm9yZGVyLXdpZHRoOlxuICogY29udGV4dC1tZW51LWJvcmRlci1yYWRpdXM6XG4gKiBjb250ZXh0LW1lbnUtdGV4dC1hbGlnbjpcbiAqIGNvbnRleHQtbWVudS1taW4td2lkdGg6XG4gKiBjb250ZXh0LW1lbnUtbWF4LXdpZHRoOlxuICogY29udGV4dC1tZW51LXNoYWRvdzpcbiAqICovXG52YXIgTmJDb250ZXh0TWVudUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJDb250ZXh0TWVudUNvbXBvbmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkNvbnRleHRNZW51Q29tcG9uZW50KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaXRlbXMgPSBbXTtcbiAgICAgICAgX3RoaXMuY29udGV4dCA9IHsgaXRlbXM6IFtdIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG1ldGhvZCBpcyBlbXB0eSBzaW5jZSB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIGFkZGl0aW9uYWxseVxuICAgICAqIHJlbmRlciBpcyBoYW5kbGVkIGJ5IGNoYW5nZSBkZXRlY3Rpb25cbiAgICAgKi9cbiAgICBOYkNvbnRleHRNZW51Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG4gICAgXSwgTmJDb250ZXh0TWVudUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNvbnRleHRNZW51Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkNvbnRleHRNZW51Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250ZXh0XCIsIHZvaWQgMCk7XG4gICAgTmJDb250ZXh0TWVudUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jb250ZXh0LW1lbnUnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuYi1tZW51IGNsYXNzPVxcXCJjb250ZXh0LW1lbnVcXFwiIFtpdGVtc109XFxcImNvbnRleHQuaXRlbXNcXFwiIFt0YWddPVxcXCJjb250ZXh0LnRhZ1xcXCI+PC9uYi1tZW51PlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYkNvbnRleHRNZW51Q29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDb250ZXh0TWVudUNvbXBvbmVudDtcbn0oTmJQb3NpdGlvbmVkQ29udGFpbmVyKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogRnVsbCBmZWF0dXJlZCBjb250ZXh0IG1lbnUgZGlyZWN0aXZlLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGNvbnRleHQtbWVudS9jb250ZXh0LW1lbnUtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEp1c3QgcGFzcyBtZW51IGl0ZW1zIGFycmF5OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gW25iQ29udGV4dE1lbnVdPVwiaXRlbXNcIj48L2J1dHRvbj5cbiAqIC4uLlxuICogaXRlbXMgPSBbeyB0aXRsZTogJ1Byb2ZpbGUnIH0sIHsgdGl0bGU6ICdMb2cgb3V0JyB9XTtcbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDb250ZXh0TWVudU1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDb250ZXh0TWVudU1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogQWxzbyBtYWtlIHN1cmUgYE5iTWVudU1vZHVsZWAgaXMgaW1wb3J0ZWQgdG8geW91ciBgYXBwLm1vZHVsZWAuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iTWVudU1vZHVsZS5mb3JSb290KCksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIElmIHlvdSB3YW50IHRvIGhhbmRsZSBjb250ZXh0IG1lbnUgY2xpY2tzIHlvdSBoYXZlIHRvIHBhc3MgYG5iQ29udGV4dE1lbnVUYWdgXG4gKiBwYXJhbSBhbmQgcmVnaXN0ZXIgdG8gZXZlbnRzIHVzaW5nIE5iTWVudVNlcnZpY2UuXG4gKiBgTmJDb250ZXh0TWVudWAgcmVuZGVycyBwbGFpbiBgTmJNZW51YCBpbnNpZGUsIHNvXG4gKiB5b3UgaGF2ZSB0byB3b3JrIHdpdGggaXQganVzdCBsaWtlIHdpdGggYE5iTWVudWAgY29tcG9uZW50OlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTWVudSBpdGVtIGNsaWNrLCBjb250ZXh0LW1lbnUvY29udGV4dC1tZW51LWNsaWNrLmNvbXBvbmVudClcbiAqXG4gKiBDb250ZXh0IG1lbnUgaGFzIGRpZmZlcmVudCBwbGFjZW1lbnRzLCBzdWNoIGFzOiB0b3AsIGJvdHRvbSwgbGVmdCBhbmQgcmlnaHRcbiAqIHdoaWNoIGNhbiBiZSB1c2VkIGFzIGZvbGxvd2luZzpcbiAqXG4gKiBgYGBodG1sXG4gKiA8YnV0dG9uIFtuYkNvbnRleHRNZW51XT1cIml0ZW1zXCIgbmJDb250ZXh0TWVudVBsYWNlbWVudD1cInJpZ2h0XCI+PC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiBgYGB0c1xuICogaXRlbXMgPSBbeyB0aXRsZTogJ1Byb2ZpbGUnIH0sIHsgdGl0bGU6ICdMb2cgb3V0JyB9XTtcbiAqIGBgYFxuICpcbiAqIEJ5IGRlZmF1bHQgY29udGV4dCBtZW51IHdpbGwgdHJ5IHRvIGFkanVzdCBpdHNlbGYgdG8gbWF4aW1hbGx5IGZpdCB2aWV3cG9ydFxuICogYW5kIHByb3ZpZGUgdGhlIGJlc3QgdXNlciBleHBlcmllbmNlLiBJdCB3aWxsIHRyeSB0byBjaGFuZ2UgcG9zaXRpb24gb2YgdGhlIGNvbnRleHQgbWVudS5cbiAqIElmIHlvdSB3YW5uYSBkaXNhYmxlIHRoaXMgYmVoYXZpb3VyIGp1c3Qgc2V0IGl0IGZhbHN5IHZhbHVlLlxuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gW25iQ29udGV4dE1lbnVdPVwiaXRlbXNcIiBuYkNvbnRleHRNZW51QWRqdXN0bWVudD1cImNvdW50ZXJjbG9ja3dpc2VcIj48L2J1dHRvbj5cbiAqIGBgYFxuICpcbiAqIGBgYHRzXG4gKiBpdGVtcyA9IFt7IHRpdGxlOiAnUHJvZmlsZScgfSwgeyB0aXRsZTogJ0xvZyBvdXQnIH1dO1xuICogYGBgXG4gKiBDb250ZXh0IG1lbnUgaGFzIGEgbnVtYmVyIG9mIHRyaWdnZXJzIHdoaWNoIHByb3ZpZGVzIGFuIGFiaWxpdHkgdG8gc2hvdyBhbmQgaGlkZSB0aGUgY29tcG9uZW50IGluIGRpZmZlcmVudCB3YXlzOlxuICpcbiAqIC0gQ2xpY2sgbW9kZSBzaG93cyB0aGUgY29tcG9uZW50IHdoZW4gYSB1c2VyIGNsaWNrcyBvbiB0aGUgaG9zdCBlbGVtZW50IGFuZCBoaWRlcyB3aGVuIHRoZSB1c2VyIGNsaWNrc1xuICogc29tZXdoZXJlIG9uIHRoZSBkb2N1bWVudCBvdXRzaWRlIHRoZSBjb21wb25lbnQuXG4gKiAtIEhpbnQgcHJvdmlkZXMgY2FwYWJpbGl0eSB0byBzaG93IHRoZSBjb21wb25lbnQgd2hlbiB0aGUgdXNlciBob3ZlcnMgb3ZlciB0aGUgaG9zdCBlbGVtZW50XG4gKiBhbmQgaGlkZSB3aGVuIHRoZSB1c2VyIGhvdmVycyBvdXQgb2YgdGhlIGhvc3QuXG4gKiAtIEhvdmVyIHdvcmtzIGxpa2UgaGludCBtb2RlIHdpdGggb25lIGV4Y2VwdGlvbiAtIHdoZW4gdGhlIHVzZXIgbW92ZXMgbW91c2UgZnJvbSBob3N0IGVsZW1lbnQgdG9cbiAqIHRoZSBjb250YWluZXIgZWxlbWVudCB0aGUgY29tcG9uZW50IHJlbWFpbnMgb3Blbiwgc28gdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBpbnRlcmFjdCB3aXRoIGl0IGNvbnRlbnQuXG4gKiAtIEZvY3VzIG1vZGUgaXMgYXBwbGllZCB3aGVuIHVzZXIgZm9jdXNlcyB0aGUgZWxlbWVudC5cbiAqIC0gTm9vcCBtb2RlIC0gdGhlIGNvbXBvbmVudCB3b24ndCByZWFjdCB0byB0aGUgdXNlciBpbnRlcmFjdGlvbi5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF2YWlsYWJsZSBUcmlnZ2VycywgY29udGV4dC1tZW51L2NvbnRleHQtbWVudS1tb2Rlcy5jb21wb25lbnQuaHRtbClcbiAqXG4gKiBOb29wIG1vZGUgaXMgZXNwZWNpYWxseSB1c2VmdWwgd2hlbiB5b3UgbmVlZCB0byBjb250cm9sIFBvcG92ZXIgcHJvZ3JhbW1hdGljYWxseSwgZm9yIGV4YW1wbGUgc2hvdy9oaWRlXG4gKiBhcyBhIHJlc3VsdCBvZiBzb21lIHRoaXJkLXBhcnR5IGFjdGlvbiwgbGlrZSBIVFRQIHJlcXVlc3Qgb3IgdmFsaWRhdGlvbiBjaGVjazpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKE1hbnVhbCBDb250cm9sLCBjb250ZXh0LW1lbnUvY29udGV4dC1tZW51LW5vb3AuY29tcG9uZW50KVxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTWFudWFsIENvbnRyb2wsIGNvbnRleHQtbWVudS9jb250ZXh0LW1lbnUtcmlnaHQtY2xpY2suY29tcG9uZW50KVxuICogKi9cbnZhciBOYkNvbnRleHRNZW51RGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUoaG9zdFJlZiwgbWVudVNlcnZpY2UsIGR5bmFtaWNPdmVybGF5SGFuZGxlcikge1xuICAgICAgICB0aGlzLmhvc3RSZWYgPSBob3N0UmVmO1xuICAgICAgICB0aGlzLm1lbnVTZXJ2aWNlID0gbWVudVNlcnZpY2U7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyID0gZHluYW1pY092ZXJsYXlIYW5kbGVyO1xuICAgICAgICB0aGlzLmNvbnRleHRNZW51SG9zdCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb3NpdGlvbiB3aWxsIGJlIGNhbGN1bGF0ZWQgcmVsYXRpdmVseSBob3N0IGVsZW1lbnQgYmFzZWQgb24gdGhlIHBvc2l0aW9uLlxuICAgICAgICAgKiBDYW4gYmUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gTmJQb3NpdGlvbi5CT1RUT007XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250YWluZXIgcG9zaXRpb24gd2lsbCBiZSBjaGFuZ2VzIGF1dG9tYXRpY2FsbHkgYmFzZWQgb24gdGhpcyBzdHJhdGVneSBpZiBjb250YWluZXIgY2FuJ3QgZml0IHZpZXcgcG9ydC5cbiAgICAgICAgICogU2V0IHRoaXMgcHJvcGVydHkgdG8gYW55IGZhbHN5IHZhbHVlIGlmIHlvdSB3YW50IHRvIGRpc2FibGUgYXV0b21hdGljYWxseSBhZGp1c3RtZW50LlxuICAgICAgICAgKiBBdmFpbGFibGUgdmFsdWVzOiBjbG9ja3dpc2UsIGNvdW50ZXJjbG9ja3dpc2UuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuYWRqdXN0bWVudCA9IE5iQWRqdXN0bWVudC5DTE9DS1dJU0U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXNjcmliZXMgd2hlbiB0aGUgY29udGFpbmVyIHdpbGwgYmUgc2hvd24uXG4gICAgICAgICAqIEF2YWlsYWJsZSBvcHRpb25zOiBgY2xpY2tgLCBgaG92ZXJgLCBgaGludGAsIGBmb2N1c2AgYW5kIGBub29wYFxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnRyaWdnZXIgPSBOYlRyaWdnZXIuQ0xJQ0s7XG4gICAgICAgIHRoaXMuY29udGV4dE1lbnVDbGFzcyA9ICcnO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBbXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLCBcIml0ZW1zXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJhc2ljIG1lbnUgaXRlbXMsIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBpbnRlcm5hbCBOYk1lbnVDb21wb25lbnQuXG4gICAgICAgICAqICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlSXRlbXMoaXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgXG4gICAgTmJDb250ZXh0TWVudURpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyXG4gICAgICAgICAgICAuaG9zdCh0aGlzLmhvc3RSZWYpXG4gICAgICAgICAgICAuY29tcG9uZW50VHlwZShOYkNvbnRleHRNZW51Q29tcG9uZW50KTtcbiAgICB9O1xuICAgIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLm5nT25DaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlYnVpbGQoKTtcbiAgICB9O1xuICAgIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheSA9IHRoaXMuY29uZmlndXJlRHluYW1pY092ZXJsYXkoKVxuICAgICAgICAgICAgLmJ1aWxkKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25JdGVtQ2xpY2soKTtcbiAgICB9O1xuICAgIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLnJlYnVpbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkgPSB0aGlzLmNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5KClcbiAgICAgICAgICAgIC5yZWJ1aWxkKCk7XG4gICAgfTtcbiAgICBOYkNvbnRleHRNZW51RGlyZWN0aXZlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LnNob3coKTtcbiAgICB9O1xuICAgIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuaGlkZSgpO1xuICAgIH07XG4gICAgTmJDb250ZXh0TWVudURpcmVjdGl2ZS5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LnRvZ2dsZSgpO1xuICAgIH07XG4gICAgTmJDb250ZXh0TWVudURpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyLmRlc3Ryb3koKTtcbiAgICB9O1xuICAgIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLmNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXJcbiAgICAgICAgICAgIC5wb3NpdGlvbih0aGlzLnBvc2l0aW9uKVxuICAgICAgICAgICAgLnRyaWdnZXIodGhpcy50cmlnZ2VyKVxuICAgICAgICAgICAgLmFkanVzdG1lbnQodGhpcy5hZGp1c3RtZW50KVxuICAgICAgICAgICAgLmNvbnRleHQoe1xuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMucG9zaXRpb24sXG4gICAgICAgICAgICBpdGVtczogdGhpcy5faXRlbXMsXG4gICAgICAgICAgICB0YWc6IHRoaXMudGFnLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLm92ZXJsYXlDb25maWcoeyBwYW5lbENsYXNzOiB0aGlzLmNvbnRleHRNZW51Q2xhc3MgfSk7XG4gICAgfTtcbiAgICAvKlxuICAgICAqIE5iTWVudUNvbXBvbmVudCB3aWxsIGNyYXNoIGlmIGRvbid0IHBhc3MgbWVudSBpdGVtcyB0byBpdC5cbiAgICAgKiBTbywgd2UganVzdCB2YWxpZGF0aW5nIHRoZW0gYW5kIHRocm93IGN1c3RvbSBvYnZpb3VzIGVycm9yLlxuICAgICAqICovXG4gICAgTmJDb250ZXh0TWVudURpcmVjdGl2ZS5wcm90b3R5cGUudmFsaWRhdGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiTGlzdCBvZiBtZW51IGl0ZW1zIGV4cGVjdGVkLCBidXQgZ2l2ZW46IFwiICsgaXRlbXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNvbnRleHRNZW51RGlyZWN0aXZlLnByb3RvdHlwZS5zdWJzY3JpYmVPbkl0ZW1DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5tZW51U2VydmljZS5vbkl0ZW1DbGljaygpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gX2EudGFnO1xuICAgICAgICAgICAgcmV0dXJuIHRhZyA9PT0gX3RoaXMudGFnO1xuICAgICAgICB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oaWRlKCk7IH0pO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5jb250ZXh0LW1lbnUtaG9zdCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLCBcImNvbnRleHRNZW51SG9zdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJDb250ZXh0TWVudVBsYWNlbWVudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkNvbnRleHRNZW51QWRqdXN0bWVudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLCBcImFkanVzdG1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iQ29udGV4dE1lbnVUYWcnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNvbnRleHRNZW51RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ0YWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iQ29udGV4dE1lbnUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtBcnJheV0pXG4gICAgXSwgTmJDb250ZXh0TWVudURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiaXRlbXNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkNvbnRleHRNZW51VHJpZ2dlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLCBcInRyaWdnZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iQ29udGV4dE1lbnVDbGFzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUucHJvdG90eXBlLCBcImNvbnRleHRNZW51Q2xhc3NcIiwgdm9pZCAwKTtcbiAgICBOYkNvbnRleHRNZW51RGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkNvbnRleHRNZW51XScsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtOYkR5bmFtaWNPdmVybGF5SGFuZGxlciwgTmJEeW5hbWljT3ZlcmxheV0sXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsXG4gICAgICAgICAgICBOYk1lbnVTZXJ2aWNlLFxuICAgICAgICAgICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXJdKVxuICAgIF0sIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYkNvbnRleHRNZW51RGlyZWN0aXZlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQ29udGV4dE1lbnVNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDb250ZXh0TWVudU1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJDb250ZXh0TWVudU1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBOYk92ZXJsYXlNb2R1bGUsIE5iTWVudU1vZHVsZV0sXG4gICAgICAgICAgICBleHBvcnRzOiBbTmJDb250ZXh0TWVudURpcmVjdGl2ZV0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYkNvbnRleHRNZW51RGlyZWN0aXZlLCBOYkNvbnRleHRNZW51Q29tcG9uZW50XSxcbiAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW05iQ29udGV4dE1lbnVDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iQ29udGV4dE1lbnVNb2R1bGUpO1xuICAgIHJldHVybiBOYkNvbnRleHRNZW51TW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBQcm9ncmVzcyBCYXIgaXMgYSBjb21wb25lbnQgZm9yIGluZGljYXRpbmcgcHJvZ3Jlc3MuXG4gKlxuICogU2ltcGxlIHVzYWdlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1wcm9ncmVzcy1iYXIgW3ZhbHVlXT1cIjUwXCI+PC9uYi1wcm9ncmVzcy1iYXI+XG4gKiBgYGBcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iUHJvZ3Jlc3NCYXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iUHJvZ3Jlc3NCYXJNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIFByb2dyZXNzIGJhciBhY2NlcHRzIHByb3BlcnR5IGB2YWx1ZWAgaW4gcmFuZ2UgMC0xMDBcbiAqIEBzdGFja2VkLWV4YW1wbGUoUHJvZ3Jlc3MgYmFyLCBwcm9ncmVzcy1iYXIvcHJvZ3Jlc3MtYmFyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBQcm9ncmVzcyBiYXIgYmFja2dyb3VuZCBjb3VsZCBiZSBjb25maWd1cmVkIGJ5IHByb3ZpZGluZyBhIGBzdGF0dXNgIHByb3BlcnR5OlxuICogQHN0YWNrZWQtZXhhbXBsZShQcm9ncmVzcyBiYXIgc3RhdHVzLCBwcm9ncmVzcy1iYXIvcHJvZ3Jlc3MtYmFyLXN0YXR1cy5jb21wb25lbnQpXG4gKlxuICogUHJvZ3Jlc3MgYmFyIHNpemUgKGhlaWdodCBhbmQgZm9udC1zaXplKSBjb3VsZCBiZSBjb25maWd1cmVkIGJ5IHByb3ZpZGluZyBhIGBzaXplYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUHJvZ3Jlc3MgYmFyIHNpemUsIHByb2dyZXNzLWJhci9wcm9ncmVzcy1iYXItc2l6ZS5jb21wb25lbnQpXG4gKlxuICogYGRpc3BsYXlWYWx1ZWAgcHJvcGVydHkgc2hvd3MgY3VycmVudCB2YWx1ZSBpbnNpZGUgcHJvZ3Jlc3MgYmFyLiBJdCdzIGFsc28gcG9zc2libGUgdG8gYWRkIGN1c3RvbSB0ZXh0IGluc2lkZTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUHJvZ3Jlc3MgYmFyIHZhbHVlLCBwcm9ncmVzcy1iYXIvcHJvZ3Jlc3MtYmFyLXZhbHVlLmNvbXBvbmVudClcbiAqXG4gKiBQcm9ncmVzcyBiYXIgc3VwcG9ydHMgYHdpZHRoYCBhbmQgYGJhY2tncm91bmQtY29sb3JgIHRyYW5zaXRpb246XG4gKiBAc3RhY2tlZC1leGFtcGxlKFByb2dyZXNzIGJhciBpbnRlcmFjdGl2ZSwgcHJvZ3Jlc3MtYmFyL3Byb2dyZXNzLWJhci1pbnRlcmFjdGl2ZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHByb2dyZXNzLWJhci1hbmltYXRpb24tZHVyYXRpb246XG4gKiBwcm9ncmVzcy1iYXItYm9yZGVyLXJhZGl1czpcbiAqIHByb2dyZXNzLWJhci10ZXh0LWZvbnQtZmFtaWx5OlxuICogcHJvZ3Jlc3MtYmFyLXRpbnktaGVpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLXRpbnktdGV4dC1mb250LXNpemU6XG4gKiBwcm9ncmVzcy1iYXItdGlueS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLXRpbnktdGV4dC1saW5lLWhlaWdodDpcbiAqIHByb2dyZXNzLWJhci1zbWFsbC1oZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItc21hbGwtdGV4dC1mb250LXNpemU6XG4gKiBwcm9ncmVzcy1iYXItc21hbGwtdGV4dC1mb250LXdlaWdodDpcbiAqIHByb2dyZXNzLWJhci1zbWFsbC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLW1lZGl1bS1oZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItbWVkaXVtLXRleHQtZm9udC1zaXplOlxuICogcHJvZ3Jlc3MtYmFyLW1lZGl1bS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLW1lZGl1bS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLWxhcmdlLWhlaWdodDpcbiAqIHByb2dyZXNzLWJhci1sYXJnZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHByb2dyZXNzLWJhci1sYXJnZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLWxhcmdlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItZ2lhbnQtaGVpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLWdpYW50LXRleHQtZm9udC1zaXplOlxuICogcHJvZ3Jlc3MtYmFyLWdpYW50LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItZ2lhbnQtdGV4dC1saW5lLWhlaWdodDpcbiAqIHByb2dyZXNzLWJhci1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWJhc2ljLWZpbGxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWJhc2ljLXRleHQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLXByaW1hcnktZmlsbGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1zdWNjZXNzLWZpbGxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItaW5mby1maWxsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1pbmZvLXRleHQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLXdhcm5pbmctZmlsbGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItd2FybmluZy10ZXh0LWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWRhbmdlci1maWxsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItY29udHJvbC1maWxsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1jb250cm9sLXRleHQtY29sb3I6XG4gKi9cbnZhciBOYlByb2dyZXNzQmFyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9ncmVzcyBiYXIgdmFsdWUgaW4gcGVyY2VudCAoMCAtIDEwMClcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWUgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvZ3Jlc3MgYmFyIGJhY2tncm91bmQgKGBiYXNpY2AgKGRlZmF1bHQpLCBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGApXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9ncmVzcyBiYXIgc2l6ZSAoYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCAoZGVmYXVsdCksIGBsYXJnZWAsIGBnaWFudGApXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNpemUgPSAnbWVkaXVtJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc3BsYXlzIHZhbHVlIGluc2lkZSBwcm9ncmVzcyBiYXJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzbWFsbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1lZGl1bVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcImdpYW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcImluZm9cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnY29udHJvbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuICAgIF0sIE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNwbGF5VmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtdGlueScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1zbWFsbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzbWFsbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbWVkaXVtJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1lZGl1bVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWdpYW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcImdpYW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXByaW1hcnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1zdWNjZXNzJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtaW5mbycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXdhcm5pbmcnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1kYW5nZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWJhc2ljJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUHJvZ3Jlc3NCYXJDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWNvbnRyb2wnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCBudWxsKTtcbiAgICBOYlByb2dyZXNzQmFyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLXByb2dyZXNzLWJhcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGRpdiBjbGFzcz1cXFwicHJvZ3Jlc3MtY29udGFpbmVyXFxcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJwcm9ncmVzcy12YWx1ZVxcXCIgW3N0eWxlLndpZHRoLiVdPVxcXCJ2YWx1ZVxcXCI+XFxuICAgICAgICA8c3BhbiAqbmdJZj1cXFwiZGlzcGxheVZhbHVlXFxcIj57eyB2YWx1ZSB9fSU8L3NwYW4+XFxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6YmxvY2t9LnByb2dyZXNzLWNvbnRhaW5lcntvdmVyZmxvdzpoaWRkZW59LnByb2dyZXNzLXZhbHVle2hlaWdodDoxMDAlO3RleHQtYWxpZ246Y2VudGVyO292ZXJmbG93OmhpZGRlbn1cXG5cIl1cbiAgICAgICAgfSlcbiAgICBdLCBOYlByb2dyZXNzQmFyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJQcm9ncmVzc0JhckNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYlByb2dyZXNzQmFyTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iUHJvZ3Jlc3NCYXJNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iUHJvZ3Jlc3NCYXJNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iUHJvZ3Jlc3NCYXJDb21wb25lbnRdLFxuICAgICAgICAgICAgZXhwb3J0czogW05iUHJvZ3Jlc3NCYXJDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iUHJvZ3Jlc3NCYXJNb2R1bGUpO1xuICAgIHJldHVybiBOYlByb2dyZXNzQmFyTW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBBbGVydCBjb21wb25lbnQuXG4gKlxuICogQmFzaWMgYWxlcnQgZXhhbXBsZTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGFsZXJ0L2FsZXJ0LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBBbGVydCBjb25maWd1cmF0aW9uOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1hbGVydCBzdGF0dXM9XCJzdWNjZXNzXCI+XG4gKiAgIFlvdSBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IGF1dGhlbnRpY2F0ZWQhXG4gKiA8L25iLWFsZXJ0PlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkFsZXJ0TW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkFsZXJ0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBBbGVydCBjb3VsZCBhZGRpdGlvbmFsbHkgaGF2ZSBhIGBjbG9zZWAgYnV0dG9uIHdoZW4gYGNsb3NhYmxlYCBwcm9wZXJ0eSBpcyBzZXQ6XG4gKiBgYGBodG1sXG4gKiA8bmItYWxlcnQgc3RhdHVzPVwic3VjY2Vzc1wiIGNsb3NhYmxlIChjbG9zZSk9XCJvbkNsb3NlKClcIj5cbiAqICAgWW91IGhhdmUgYmVlbiBzdWNjZXNzZnVsbHkgYXV0aGVudGljYXRlZCFcbiAqIDwvbmItYWxlcnQ+XG4gKiBgYGBcbiAqXG4gKiBDb2xvcmVkIGFsZXJ0cyBjb3VsZCBiZSBzaW1wbHkgY29uZmlndXJlZCBieSBwcm92aWRpbmcgYSBgc3RhdHVzYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQWxlcnQgc3RhdHVzLCBhbGVydC9hbGVydC1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gYXNzaWduIGFuIGBhY2NlbnRgIHByb3BlcnR5IGZvciBhIHNsaWdodCBhbGVydCBoaWdobGlnaHRcbiAqIGFzIHdlbGwgYXMgY29tYmluZSBpdCB3aXRoIGBzdGF0dXNgOlxuICogQHN0YWNrZWQtZXhhbXBsZShBbGVydCBhY2NlbnQsIGFsZXJ0L2FsZXJ0LWFjY2VudHMuY29tcG9uZW50KVxuICpcbiAqIEFuZCBgb3V0bGluZWAgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKE91dGxpbmUgQWxlcnQsIGFsZXJ0L2FsZXJ0LW91dGxpbmUuY29tcG9uZW50KVxuICpcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoTXVsdGlwbGUgU2l6ZXMsIGFsZXJ0L2FsZXJ0LXNpemVzLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogYWxlcnQtYm9yZGVyLXJhZGl1czpcbiAqIGFsZXJ0LWJvdHRvbS1tYXJnaW46XG4gKiBhbGVydC1wYWRkaW5nOlxuICogYWxlcnQtc2Nyb2xsYmFyLWNvbG9yOlxuICogYWxlcnQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBhbGVydC1zY3JvbGxiYXItd2lkdGg6XG4gKiBhbGVydC1zaGFkb3c6XG4gKiBhbGVydC10ZXh0LWZvbnQtZmFtaWx5OlxuICogYWxlcnQtdGV4dC1mb250LXNpemU6XG4gKiBhbGVydC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYWxlcnQtdGV4dC1saW5lLWhlaWdodDpcbiAqIGFsZXJ0LWNsb3NhYmxlLXN0YXJ0LXBhZGRpbmc6XG4gKiBhbGVydC10aW55LWhlaWdodDpcbiAqIGFsZXJ0LXNtYWxsLWhlaWdodDpcbiAqIGFsZXJ0LW1lZGl1bS1oZWlnaHQ6XG4gKiBhbGVydC1tZWRpdW0tcGFkZGluZzpcbiAqIGFsZXJ0LWxhcmdlLWhlaWdodDpcbiAqIGFsZXJ0LWdpYW50LWhlaWdodDpcbiAqIGFsZXJ0LWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBhbGVydC1iYXNpYy10ZXh0LWNvbG9yOlxuICogYWxlcnQtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogYWxlcnQtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogYWxlcnQtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtaW5mby10ZXh0LWNvbG9yOlxuICogYWxlcnQtd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtd2FybmluZy10ZXh0LWNvbG9yOlxuICogYWxlcnQtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBhbGVydC1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIGFsZXJ0LWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGFsZXJ0LWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC1iYXNpYy1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC1wcmltYXJ5LWNvbG9yOlxuICogYWxlcnQtYWNjZW50LWluZm8tY29sb3I6XG4gKiBhbGVydC1hY2NlbnQtc3VjY2Vzcy1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC13YXJuaW5nLWNvbG9yOlxuICogYWxlcnQtYWNjZW50LWRhbmdlci1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC1jb250cm9sLWNvbG9yOlxuICogYWxlcnQtb3V0bGluZS13aWR0aDpcbiAqIGFsZXJ0LW91dGxpbmUtYmFzaWMtY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLXByaW1hcnktY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLWluZm8tY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLXN1Y2Nlc3MtY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLXdhcm5pbmctY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLWRhbmdlci1jb2xvcjpcbiAqIGFsZXJ0LW91dGxpbmUtY29udHJvbC1jb2xvcjpcbiAqL1xudmFyIE5iQWxlcnRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJBbGVydENvbXBvbmVudCgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICAgICAgICogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCwgYGxhcmdlYCwgYGdpYW50YFxuICAgICAgICAgKiBVbnNldCBieSBkZWZhdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gJyc7XG4gICAgICAgIHRoaXMuX3N0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGVydCBhY2NlbnQgKGNvbG9yIG9mIHRoZSB0b3AgYm9yZGVyKTpcbiAgICAgICAgICogYGJhc2ljYCwgYHByaW1hcnlgLCBgc3VjY2Vzc2AsIGBpbmZvYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgLlxuICAgICAgICAgKiBVbnNldCBieSBkZWZhdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY2NlbnQgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IG91dGxpbmUgKGNvbG9yIG9mIHRoZSBib3JkZXIpOlxuICAgICAgICAgKiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBzdWNjZXNzYCwgYGluZm9gLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGAuXG4gICAgICAgICAqIFVuc2V0IGJ5IGRlZmF1bHQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm91dGxpbmUgPSAnJztcbiAgICAgICAgdGhpcy5fY2xvc2FibGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW4gY2hpcCBpcyByZW1vdmVkXG4gICAgICAgICAqIEB0eXBlIEV2ZW50RW1pdHRlcjxhbnk+XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiBgYmFzaWNgIChkZWZhdWx0KSwgYHByaW1hcnlgLCBgc3VjY2Vzc2AsIGBpbmZvYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIGVtcHR5U3RhdHVzV2FybmluZygnTmJBbGVydCcpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gJ2Jhc2ljJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2FibGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2hvd3MgYGNsb3NlYCBpY29uXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jbG9zYWJsZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nsb3NhYmxlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogRW1pdHMgdGhlIHJlbW92ZWQgY2hpcCBldmVudFxuICAgICAqL1xuICAgIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xvc2UuZW1pdCgpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInRpbnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICd0aW55JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwibWVkaXVtXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbGFyZ2UnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlBY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ3ByaW1hcnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc0FjY2VudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZW50ID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvQWNjZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NlbnQgPT09ICdpbmZvJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdBY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ3dhcm5pbmcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyQWNjZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NlbnQgPT09ICdkYW5nZXInO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNBY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2Jhc2ljJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xBY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2NvbnRyb2wnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeU91dGxpbmVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICdwcmltYXJ5JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NPdXRsaW5lXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRsaW5lID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvT3V0bGluZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0bGluZSA9PT0gJ2luZm8nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ091dGxpbmVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICd3YXJuaW5nJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlck91dGxpbmVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICdkYW5nZXInO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNPdXRsaW5lXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRsaW5lID09PSAnYmFzaWMnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbE91dGxpbmVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICdjb250cm9sJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhY2NlbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvdXRsaW5lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5jbG9zYWJsZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2FibGVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXRpbnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1zbWFsbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1tZWRpdW0nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWdpYW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtcHJpbWFyeScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtc3VjY2VzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtaW5mbycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImluZm9cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtd2FybmluZycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtZGFuZ2VyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWJhc2ljJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtY29udHJvbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQtcHJpbWFyeScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlBY2NlbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQtc3VjY2VzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NBY2NlbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQtaW5mbycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImluZm9BY2NlbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQtd2FybmluZycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdBY2NlbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQtZGFuZ2VyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyQWNjZW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYWNjZW50LWJhc2ljJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNBY2NlbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY2NlbnQtY29udHJvbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xBY2NlbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5vdXRsaW5lLXByaW1hcnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5T3V0bGluZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm91dGxpbmUtc3VjY2VzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NPdXRsaW5lXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Mub3V0bGluZS1pbmZvJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb091dGxpbmVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5vdXRsaW5lLXdhcm5pbmcnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nT3V0bGluZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm91dGxpbmUtZGFuZ2VyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBbGVydENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyT3V0bGluZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm91dGxpbmUtYmFzaWMnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY091dGxpbmVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5vdXRsaW5lLWNvbnRyb2wnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFsZXJ0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sT3V0bGluZVwiLCBudWxsKTtcbiAgICBOYkFsZXJ0Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWFsZXJ0JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8YnV0dG9uICpuZ0lmPVxcXCJjbG9zYWJsZVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiY2xvc2VcXFwiIGFyaWEtbGFiZWw9XFxcIkNsb3NlXFxcIiAoY2xpY2spPVxcXCJvbkNsb3NlKClcXFwiPlxcbiAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIj4mdGltZXM7PC9zcGFuPlxcbiAgICA8L2J1dHRvbj5cXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cG9zaXRpb246cmVsYXRpdmV9W2Rpcj1sdHJdIDpob3N0IC5jbG9zZXtyaWdodDowfVtkaXI9cnRsXSA6aG9zdCAuY2xvc2V7bGVmdDowfS5jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtjb2xvcjppbmhlcml0O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyOjA7YXBwZWFyYW5jZTpub25lfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iQWxlcnRDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkFsZXJ0Q29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iQWxlcnRNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJBbGVydE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJBbGVydE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgTmJBbGVydENvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJBbGVydENvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJBbGVydE1vZHVsZSk7XG4gICAgcmV0dXJuIE5iQWxlcnRNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENoYXQgZm9ybSBjb21wb25lbnQuXG4gKlxuICogU2hvdyBhIG1lc3NhZ2UgZm9ybSB3aXRoIGEgc2VuZCBtZXNzYWdlIGJ1dHRvbi5cbiAqXG4gKiBgYGB0c1xuICogPG5iLWNoYXQtZm9ybSBzaG93QnV0dG9uPVwidHJ1ZVwiIGJ1dHRvbkljb249XCJuYi1zZW5kXCI+XG4gKiA8L25iLWNoYXQtZm9ybT5cbiAqIGBgYFxuICpcbiAqIFdoZW4gYFtkcm9wRmlsZXNdPVwidHJ1ZVwiYCBoYW5kbGVzIGZpbGVzIGRyYWcmZHJvcCB3aXRoIGEgZmlsZSBwcmV2aWV3LlxuICpcbiAqIERyYWcgJiBkcm9wIGF2YWlsYWJsZSBmb3IgZmlsZXMgYW5kIGltYWdlczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRHJhZyAmIERyb3AgQ2hhdCwgY2hhdC9jaGF0LWRyb3AuY29tcG9uZW50KVxuICpcbiAqIE5ldyBtZXNzYWdlIGNvdWxkIGJlIHRyYWNrZWQgb3V0c2lkZSBieSB1c2luZyBgKHNlbmQpYCBvdXRwdXQuXG4gKlxuICogYGBgdHNcbiAqIDxuYi1jaGF0LWZvcm0gKHNlbmQpPVwib25OZXdNZXNzYWdlKCRldmVudClcIj5cbiAqIDwvbmItY2hhdC1mb3JtPlxuICpcbiAqIC8vIC4uLlxuICpcbiAqIG9uTmV3TWVzc2FnZSh7IG1lc3NhZ2U6IHN0cmluZywgZmlsZXM6IGFueVtdIH0pIHtcbiAqICAgdGhpcy5zZXJ2aWNlLnNlbmRUb1NlcnZlcihtZXNzYWdlLCBmaWxlcyk7XG4gKiB9XG4gKiBgYGBcbiAqL1xudmFyIE5iQ2hhdEZvcm1Db21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDaGF0Rm9ybUNvbXBvbmVudChjZCwgZG9tU2FuaXRpemVyKSB7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5kb21TYW5pdGl6ZXIgPSBkb21TYW5pdGl6ZXI7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgdGhpcy5pbnB1dEZvY3VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5wdXRIb3ZlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRyb3BwZWRGaWxlcyA9IFtdO1xuICAgICAgICB0aGlzLmltZ0Ryb3BUeXBlcyA9IFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvZ2lmJ107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVkZWZpbmVkIG1lc3NhZ2UgdGV4dFxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXNzYWdlIHBsYWNlaG9sZGVyIHRleHRcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWVzc2FnZVBsYWNlaG9sZGVyID0gJ1R5cGUgYSBtZXNzYWdlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlbmQgYnV0dG9uIHRpdGxlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1dHRvblRpdGxlID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZW5kIGJ1dHRvbiBpY29uLCBzaG93biBpZiBgYnV0dG9uVGl0bGVgIGlzIGVtcHR5XG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1dHRvbkljb24gPSAncGFwZXItcGxhbmUtb3V0bGluZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93IHNlbmQgYnV0dG9uXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cgc2VuZCBidXR0b25cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyb3BGaWxlcyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlsZSBkcm9wIHBsYWNlaG9sZGVyIHRleHRcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZHJvcEZpbGVQbGFjZWhvbGRlciA9ICdEcm9wIGZpbGUgdG8gc2VuZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPHsgbWVzc2FnZTogc3RyaW5nLCBmaWxlczogRmlsZVtdIH0+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmZpbGVPdmVyID0gZmFsc2U7XG4gICAgfVxuICAgIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLm9uRHJvcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5kcm9wRmlsZXMpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZmlsZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIgJiYgZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNfMS5pbWdEcm9wVHlwZXMuaW5jbHVkZXMoZmlsZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMudXJsU3R5bGUgPSBfdGhpcy5kb21TYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKFwidXJsKFwiICsgcmVzLnNyYyArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZnIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzXzEuZHJvcHBlZEZpbGVzLnB1c2gocmVzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBfbG9vcF8xKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJDaGF0Rm9ybUNvbXBvbmVudC5wcm90b3R5cGUucmVtb3ZlRmlsZSA9IGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuZHJvcHBlZEZpbGVzLmluZGV4T2YoZmlsZSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRyb3BwZWRGaWxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNoYXRGb3JtQ29tcG9uZW50LnByb3RvdHlwZS5vbkRyYWdPdmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kcm9wRmlsZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZU92ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNoYXRGb3JtQ29tcG9uZW50LnByb3RvdHlwZS5vbkRyYWdMZWF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZHJvcEZpbGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVPdmVyID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kcm9wcGVkRmlsZXMubGVuZ3RoIHx8IFN0cmluZyh0aGlzLm1lc3NhZ2UpLnRyaW0oKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZC5lbWl0KHsgbWVzc2FnZTogdGhpcy5tZXNzYWdlLCBmaWxlczogdGhpcy5kcm9wcGVkRmlsZXMgfSk7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgIHRoaXMuZHJvcHBlZEZpbGVzID0gW107XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLnNldFN0YXR1cyA9IGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzICE9PSBzdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLmdldElucHV0U3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5maWxlT3Zlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGlnaGxpZ2h0U3RhdHVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5wdXRGb2N1cyB8fCB0aGlzLmlucHV0SG92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2Jhc2ljJztcbiAgICB9O1xuICAgIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLmdldEJ1dHRvblN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGlnaGxpZ2h0U3RhdHVzKCk7XG4gICAgfTtcbiAgICBOYkNoYXRGb3JtQ29tcG9uZW50LnByb3RvdHlwZS5nZXRIaWdobGlnaHRTdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJyB8fCB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3ByaW1hcnknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLCBcIm1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRGb3JtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZXNzYWdlUGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRGb3JtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJidXR0b25UaXRsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLCBcImJ1dHRvbkljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJDaGF0Rm9ybUNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd0J1dHRvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkNoYXRGb3JtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkcm9wRmlsZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRGb3JtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkcm9wRmlsZVBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLCBcInNlbmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmZpbGUtb3ZlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLCBcImZpbGVPdmVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignZHJvcCcsIFsnJGV2ZW50J10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLCBcIm9uRHJvcFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdExpc3RlbmVyKCdkcmFnb3ZlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iQ2hhdEZvcm1Db21wb25lbnQucHJvdG90eXBlLCBcIm9uRHJhZ092ZXJcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignZHJhZ2xlYXZlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG4gICAgXSwgTmJDaGF0Rm9ybUNvbXBvbmVudC5wcm90b3R5cGUsIFwib25EcmFnTGVhdmVcIiwgbnVsbCk7XG4gICAgTmJDaGF0Rm9ybUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0LWZvcm0nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcImRyb3BwZWQtZmlsZXNcXFwiICpuZ0lmPVxcXCJkcm9wcGVkRmlsZXM/Lmxlbmd0aFxcXCI+XFxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XFxcImxldCBmaWxlIG9mIGRyb3BwZWRGaWxlc1xcXCI+XFxuICAgICAgICA8ZGl2ICpuZ0lmPVxcXCJmaWxlLnVybFN0eWxlXFxcIiBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XFxcImZpbGUudXJsU3R5bGVcXFwiPlxcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwicmVtb3ZlXFxcIiAoY2xpY2spPVxcXCJyZW1vdmVGaWxlKGZpbGUpXFxcIj4mdGltZXM7PC9zcGFuPlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8ZGl2PlxcbiAgICAgICAgICA8bmItaWNvbiAqbmdJZj1cXFwiIWZpbGUudXJsU3R5bGVcXFwiIGljb249XFxcImZpbGUtdGV4dC1vdXRsaW5lXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiPjwvbmItaWNvbj5cXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInJlbW92ZVxcXCIgKGNsaWNrKT1cXFwicmVtb3ZlRmlsZShmaWxlKVxcXCI+JnRpbWVzOzwvc3Bhbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvbmctY29udGFpbmVyPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwibWVzc2FnZS1yb3dcXFwiPlxcbiAgICAgIDxpbnB1dCBuYklucHV0XFxuICAgICAgICAgICAgIGZ1bGxXaWR0aFxcbiAgICAgICAgICAgICBbc3RhdHVzXT1cXFwiZ2V0SW5wdXRTdGF0dXMoKVxcXCJcXG4gICAgICAgICAgICAgKGZvY3VzKT1cXFwiaW5wdXRGb2N1cyA9IHRydWVcXFwiXFxuICAgICAgICAgICAgIChibHVyKT1cXFwiaW5wdXRGb2N1cyA9IGZhbHNlXFxcIlxcbiAgICAgICAgICAgICAobW91c2VlbnRlcik9XFxcImlucHV0SG92ZXIgPSB0cnVlXFxcIlxcbiAgICAgICAgICAgICAobW91c2VsZWF2ZSk9XFxcImlucHV0SG92ZXIgPSBmYWxzZVxcXCJcXG4gICAgICAgICAgICAgWyhuZ01vZGVsKV09XFxcIm1lc3NhZ2VcXFwiXFxuICAgICAgICAgICAgIFtjbGFzcy53aXRoLWJ1dHRvbl09XFxcInNob3dCdXR0b25cXFwiXFxuICAgICAgICAgICAgIHR5cGU9XFxcInRleHRcXFwiXFxuICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVxcXCJ7eyBmaWxlT3ZlciA/IGRyb3BGaWxlUGxhY2Vob2xkZXIgOiBtZXNzYWdlUGxhY2Vob2xkZXIgfX1cXFwiXFxuICAgICAgICAgICAgIChrZXl1cC5lbnRlcik9XFxcInNlbmRNZXNzYWdlKClcXFwiPlxcbiAgICAgIDxidXR0b24gbmJCdXR0b25cXG4gICAgICAgICAgICAgIFtzdGF0dXNdPVxcXCJnZXRCdXR0b25TdGF0dXMoKVxcXCJcXG4gICAgICAgICAgICAgICpuZ0lmPVxcXCJzaG93QnV0dG9uXFxcIlxcbiAgICAgICAgICAgICAgW2NsYXNzLndpdGgtaWNvbl09XFxcIiFidXR0b25UaXRsZVxcXCJcXG4gICAgICAgICAgICAgIChjbGljayk9XFxcInNlbmRNZXNzYWdlKClcXFwiXFxuICAgICAgICAgICAgICBjbGFzcz1cXFwic2VuZC1idXR0b25cXFwiPlxcbiAgICAgICAgPG5iLWljb24gKm5nSWY9XFxcIiFidXR0b25UaXRsZTsgZWxzZSB0aXRsZVxcXCIgW2ljb25dPVxcXCJidXR0b25JY29uXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiPjwvbmItaWNvbj5cXG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjdGl0bGU+e3sgYnV0dG9uVGl0bGUgfX08L25nLXRlbXBsYXRlPlxcbiAgICAgIDwvYnV0dG9uPlxcbiAgICA8L2Rpdj5cXG4gIFwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQ2hhbmdlRGV0ZWN0b3JSZWYsIERvbVNhbml0aXplcl0pXG4gICAgXSwgTmJDaGF0Rm9ybUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2hhdEZvcm1Db21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENoYXQgbWVzc2FnZSBjb21wb25lbnQuXG4gKlxuICogTXVsdGlwbGUgbWVzc2FnZSB0eXBlcyBhcmUgYXZhaWxhYmxlIHRocm91Z2ggYSBgdHlwZWAgcHJvcGVydHksIHN1Y2ggYXNcbiAqIC0gdGV4dCAtIHNpbXBsZSB0ZXh0IG1lc3NhZ2VcbiAqIC0gZmlsZSAtIGNvdWxkIGJlIGEgZmlsZSBwcmV2aWV3IG9yIGEgZmlsZSBpY29uXG4gKiBpZiBtdWx0aXBsZSBmaWxlcyBhcmUgcHJvdmlkZWQgZ3JvdXBlZCBmaWxlcyBhcmUgc2hvd25cbiAqIC0gcXVvdGUgLSBxdW90ZXMgYSBtZXNzYWdlIHdpdGggc3BlY2lmaWMgcXVvdGUgc3R5bGVzXG4gKiAtIG1hcCAtIHNob3dzIGEgZ29vZ2xlIG1hcCBwaWN0dXJlIGJ5IHByb3ZpZGVkIFtsYXRpdHVkZV0gYW5kIFtsb25naXR1ZGVdIHByb3BlcnRpZXNcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF2YWlsYWJsZSBUeXBlcywgY2hhdC9jaGF0LW1lc3NhZ2UtdHlwZXMtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIE1lc3NhZ2Ugd2l0aCBhdHRhY2hlZCBmaWxlczpcbiAqIGBgYGh0bWxcbiAqIDxuYi1jaGF0LW1lc3NhZ2VcbiAqICAgdHlwZT1cImZpbGVcIlxuICogICBbZmlsZXNdPVwiWyB7IHVybDogJy4uLicgfSBdXCJcbiAqICAgbWVzc2FnZT1cIkhlbGxvIHdvcmxkIVwiPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiBgYGBcbiAqXG4gKiBNYXAgbWVzc2FnZTpcbiAqIGBgYGh0bWxcbiAqIDxuYi1jaGF0LW1lc3NhZ2VcbiAqICAgdHlwZT1cIm1hcFwiXG4gKiAgIFtsYXRpdHVkZV09XCI1My45MTRcIlxuICogICBbbG9uZ2l0dWRlXT1cIjI3LjU5XCJcbiAqICAgbWVzc2FnZT1cIkhlcmUgSSBhbVwiPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiBgYGBcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2hhdC1tZXNzYWdlLWJhY2tncm91bmQ6XG4gKiBjaGF0LW1lc3NhZ2UtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1yZXBseS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLXJlcGx5LXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtYXZhdGFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2Utc2VuZGVyLXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtcXVvdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1xdW90ZS10ZXh0LWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLWZpbGUtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1maWxlLWJhY2tncm91bmQtY29sb3I6XG4gKi9cbnZhciBOYkNoYXRNZXNzYWdlQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQoZG9tU2FuaXRpemVyKSB7XG4gICAgICAgIHRoaXMuZG9tU2FuaXRpemVyID0gZG9tU2FuaXRpemVyO1xuICAgICAgICB0aGlzLl9yZXBseSA9IGZhbHNlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0TWVzc2FnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZmx5SW5PdXRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0TWVzc2FnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibm90UmVwbHlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5yZXBseTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcInJlcGx5XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgaWYgYSBtZXNzYWdlIGlzIGEgcmVwbHlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlcGx5O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVwbHkgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0TWVzc2FnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiYXZhdGFyXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1lc3NhZ2Ugc2VuZCBhdmF0YXJcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmF2YXRhclN0eWxlID0gdmFsdWUgPyB0aGlzLmRvbVNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0U3R5bGUoXCJ1cmwoXCIgKyB2YWx1ZSArIFwiKVwiKSA6IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLmdldEluaXRpYWxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zZW5kZXIpIHtcbiAgICAgICAgICAgIHZhciBuYW1lcyA9IHRoaXMuc2VuZGVyLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICByZXR1cm4gbmFtZXMubWFwKGZ1bmN0aW9uIChuKSB7IHJldHVybiBuLmNoYXJBdCgwKTsgfSkuc3BsaWNlKDAsIDIpLmpvaW4oJycpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdAZmx5SW5PdXQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNoYXRNZXNzYWdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmbHlJbk91dFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm5vdC1yZXBseScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcIm5vdFJlcGx5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MucmVwbHknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcInJlcGx5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcIm1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRNZXNzYWdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIERhdGUpXG4gICAgXSwgTmJDaGF0TWVzc2FnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVGb3JtYXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImZpbGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0TWVzc2FnZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicXVvdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbiAgICBdLCBOYkNoYXRNZXNzYWdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXRpdHVkZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImxvbmdpdHVkZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQucHJvdG90eXBlLCBcImF2YXRhclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRNZXNzYWdlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgTmJDaGF0TWVzc2FnZUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0LW1lc3NhZ2UnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgY2xhc3M9XFxcImF2YXRhclxcXCIgW3N0eWxlLmJhY2tncm91bmQtaW1hZ2VdPVxcXCJhdmF0YXJTdHlsZVxcXCIgKm5nSWY9XFxcIiFyZXBseVxcXCI+XFxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cXFwiIWF2YXRhclN0eWxlXFxcIj5cXG4gICAgICAgIHt7IGdldEluaXRpYWxzKCkgfX1cXG4gICAgICA8L25nLWNvbnRhaW5lcj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm1lc3NhZ2VcXFwiPlxcbiAgICAgIDxuZy1jb250YWluZXIgW25nU3dpdGNoXT1cXFwidHlwZVxcXCI+XFxuXFxuICAgICAgICA8bmItY2hhdC1tZXNzYWdlLWZpbGUgKm5nU3dpdGNoQ2FzZT1cXFwiJ2ZpbGUnXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzZW5kZXJdPVxcXCJzZW5kZXJcXFwiIFtkYXRlXT1cXFwiZGF0ZVxcXCIgW2RhdGVGb3JtYXRdPVxcXCJkYXRlRm9ybWF0XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttZXNzYWdlXT1cXFwibWVzc2FnZVxcXCIgW2ZpbGVzXT1cXFwiZmlsZXNcXFwiPlxcbiAgICAgICAgPC9uYi1jaGF0LW1lc3NhZ2UtZmlsZT5cXG5cXG4gICAgICAgIDxuYi1jaGF0LW1lc3NhZ2UtcXVvdGUgKm5nU3dpdGNoQ2FzZT1cXFwiJ3F1b3RlJ1xcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2VuZGVyXT1cXFwic2VuZGVyXFxcIiBbZGF0ZV09XFxcImRhdGVcXFwiIFtkYXRlRm9ybWF0XT1cXFwiZGF0ZUZvcm1hdFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWVzc2FnZV09XFxcIm1lc3NhZ2VcXFwiIFtxdW90ZV09XFxcInF1b3RlXFxcIj5cXG4gICAgICAgIDwvbmItY2hhdC1tZXNzYWdlLXF1b3RlPlxcblxcbiAgICAgICAgPG5iLWNoYXQtbWVzc2FnZS1tYXAgKm5nU3dpdGNoQ2FzZT1cXFwiJ21hcCdcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NlbmRlcl09XFxcInNlbmRlclxcXCIgW2RhdGVdPVxcXCJkYXRlXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttZXNzYWdlXT1cXFwibWVzc2FnZVxcXCIgW2xhdGl0dWRlXT1cXFwibGF0aXR1ZGVcXFwiIFtsb25naXR1ZGVdPVxcXCJsb25naXR1ZGVcXFwiPlxcbiAgICAgICAgPC9uYi1jaGF0LW1lc3NhZ2UtbWFwPlxcblxcbiAgICAgICAgPG5iLWNoYXQtbWVzc2FnZS10ZXh0ICpuZ1N3aXRjaERlZmF1bHRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2VuZGVyXT1cXFwic2VuZGVyXFxcIiBbZGF0ZV09XFxcImRhdGVcXFwiIFtkYXRlRm9ybWF0XT1cXFwiZGF0ZUZvcm1hdFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWVzc2FnZV09XFxcIm1lc3NhZ2VcXFwiPlxcbiAgICAgICAgPC9uYi1jaGF0LW1lc3NhZ2UtdGV4dD5cXG4gICAgICA8L25nLWNvbnRhaW5lcj5cXG4gICAgPC9kaXY+XFxuICBcIixcbiAgICAgICAgICAgIGFuaW1hdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKCdmbHlJbk91dCcsIFtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUoJ2luJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDApJyB9KSksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtMTAwJSknIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZSg4MCksXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IHZvaWQnLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlKDgwLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMTAwJSknIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRG9tU2FuaXRpemVyXSlcbiAgICBdLCBOYkNoYXRNZXNzYWdlQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDaGF0TWVzc2FnZUNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ29udmVyc2F0aW9uYWwgVUkgY29sbGVjdGlvbiAtIGEgc2V0IG9mIGNvbXBvbmVudHMgZm9yIGNoYXQtbGlrZSBVSSBjb25zdHJ1Y3Rpb24uXG4gKlxuICogTWFpbiBmZWF0dXJlczpcbiAqIC0gZGlmZmVyZW50IG1lc3NhZ2UgdHlwZXMgc3VwcG9ydCAodGV4dCwgaW1hZ2UsIGZpbGUsIGZpbGUgZ3JvdXAsIG1hcCwgZXRjKVxuICogLSBkcmFnICYgZHJvcCBmb3IgaW1hZ2VzIGFuZCBmaWxlcyB3aXRoIHByZXZpZXdcbiAqIC0gZGlmZmVyZW50IFVJIHN0eWxlc1xuICogLSBjdXN0b20gYWN0aW9uIGJ1dHRvbnMgKGNvbWluZyBzb29uKVxuICpcbiAqIEhlcmUncyBhIGNvbXBsZXRlIGV4YW1wbGUgYnVpbGQgaW4gYSBib3QtbGlrZSBhcHAuIFR5cGUgYGhlbHBgIHRvIGJlIGFibGUgdG8gcmVjZWl2ZSBkaWZmZXJlbnQgbWVzc2FnZSB0eXBlcy5cbiAqIEVuam95IHRoZSBjb252ZXJzYXRpb24gYW5kIHRoZSBiZWF1dGlmdWwgVUkuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBjaGF0L2NoYXQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEJhc2ljIGNoYXQgY29uZmlndXJhdGlvbiBhbmQgdXNhZ2U6XG4gKiBgYGB0c1xuICogPG5iLWNoYXQgdGl0bGU9XCJOZWJ1bGFyIENvbnZlcnNhdGlvbmFsIFVJXCI+XG4gKiAgICAgICA8bmItY2hhdC1tZXNzYWdlICpuZ0Zvcj1cImxldCBtc2cgb2YgbWVzc2FnZXNcIlxuICogICAgICAgICAgICAgICAgICAgICAgICBbdHlwZV09XCJtc2cudHlwZVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFttZXNzYWdlXT1cIm1zZy50ZXh0XCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW3JlcGx5XT1cIm1zZy5yZXBseVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtzZW5kZXJdPVwibXNnLnVzZXIubmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlXT1cIm1zZy5kYXRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbGVzXT1cIm1zZy5maWxlc1wiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtxdW90ZV09XCJtc2cucXVvdGVcIlxuICogICAgICAgICAgICAgICAgICAgICAgICBbbGF0aXR1ZGVdPVwibXNnLmxhdGl0dWRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2xvbmdpdHVkZV09XCJtc2cubG9uZ2l0dWRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2F2YXRhcl09XCJtc2cudXNlci5hdmF0YXJcIj5cbiAqICAgPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKlxuICogICA8bmItY2hhdC1mb3JtIChzZW5kKT1cInNlbmRNZXNzYWdlKCRldmVudClcIiBbZHJvcEZpbGVzXT1cInRydWVcIj5cbiAqICAgPC9uYi1jaGF0LWZvcm0+XG4gKiA8L25iLWNoYXQ+XG4gKiBgYGBcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQ2hhdE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDaGF0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKlxuICogSWYgeW91IG5lZWQgdG8gcHJvdmlkZSBhbiBBUEkga2V5IGZvciBhIGBtYXBgIG1lc3NhZ2UgdHlwZSAod2hpY2ggaXMgcmVxdWlyZWQgYnkgR29vZ2xlIE1hcHMpXG4gKiB5b3UgbWF5IHVzZSBgTmJDaGF0TW9kdWxlLmZvclJvb3QoeyAuLi4gfSlgIGNhbGwgaWYgdGhpcyBpcyBhIGdsb2JhbCBhcHAgY29uZmlndXJhdGlvblxuICogb3IgYE5iQ2hhdE1vZHVsZS5mb3JDaGlsZCh7IC4uLiB9KWAgZm9yIGEgZmVhdHVyZSBtb2R1bGUgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQ2hhdE1vZHVsZS5mb3JSb290KHsgbWVzc2FnZUdvb2dsZU1hcEtleTogJ01BUF9LRVknIH0pLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgbWFpbiBjb21wb25lbnRzOlxuICogYGBgdHNcbiAqIDxuYi1jaGF0PlxuICogPC9uYi1jaGF0PiAvLyBjaGF0IGNvbnRhaW5lclxuICpcbiAqIDxuYi1jaGF0LWZvcm0+XG4gKiA8L25iLWNoYXQtZm9ybT4gLy8gY2hhdCBmb3JtIHdpdGggZHJhZyZkcm9wIGZpbGVzIGZlYXR1cmVcbiAqXG4gKiA8bmItY2hhdC1tZXNzYWdlPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+IC8vIGNoYXQgbWVzc2FnZSwgYXZhaWxhYmxlIG11bHRpcGxlIHR5cGVzXG4gKiBgYGBcbiAqXG4gKiBUd28gdXNlcnMgY29udmVyc2F0aW9uIHNob3djYXNlOlxuICogQHN0YWNrZWQtZXhhbXBsZShDb252ZXJzYXRpb24sIGNoYXQvY2hhdC1jb252ZXJzYXRpb24tc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIENoYXQgVUkgaXMgYWxzbyBhdmFpbGFibGUgaW4gZGlmZmVyZW50IGNvbG9ycyBieSBzcGVjaWZ5aW5nIGEgYFtzdGF0dXNdYCBpbnB1dDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgQ2hhdCwgY2hhdC9jaGF0LWNvbG9ycy5jb21wb25lbnQpXG4gKlxuICogQWxzbyBpdCBpcyBwb3NzaWJsZSB0byBjb25maWd1cmUgc2l6ZXMgdGhyb3VnaCBgW3NpemVdYCBpbnB1dDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKENoYXQgU2l6ZXMsIGNoYXQvY2hhdC1zaXplcy5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGNoYXQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtYm9yZGVyOlxuICogY2hhdC1ib3JkZXItcmFkaXVzOlxuICogY2hhdC1zaGFkb3c6XG4gKiBjaGF0LXBhZGRpbmc6XG4gKiBjaGF0LXNjcm9sbGJhci1jb2xvcjpcbiAqIGNoYXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LXNjcm9sbGJhci13aWR0aDpcbiAqIGNoYXQtdGV4dC1jb2xvcjpcbiAqIGNoYXQtdGV4dC1mb250LWZhbWlseTpcbiAqIGNoYXQtdGV4dC1mb250LXNpemU6XG4gKiBjaGF0LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjaGF0LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjaGF0LWhlYWRlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2hhdC1oZWFkZXItdGV4dC1mb250LXNpemU6XG4gKiBjaGF0LWhlYWRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2hhdC1oZWFkZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGNoYXQtdGlueS1oZWlnaHQ6XG4gKiBjaGF0LXNtYWxsLWhlaWdodDpcbiAqIGNoYXQtbWVkaXVtLWhlaWdodDpcbiAqIGNoYXQtbGFyZ2UtaGVpZ2h0OlxuICogY2hhdC1naWFudC1oZWlnaHQ6XG4gKiBjaGF0LWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LWJhc2ljLXRleHQtY29sb3I6XG4gKiBjaGF0LXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogY2hhdC1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGNoYXQtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1pbmZvLXRleHQtY29sb3I6XG4gKiBjaGF0LXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtd2FybmluZy10ZXh0LWNvbG9yOlxuICogY2hhdC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBjaGF0LWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtY29udHJvbC10ZXh0LWNvbG9yOlxuICogY2hhdC1kaXZpZGVyLWNvbG9yOlxuICogY2hhdC1kaXZpZGVyLXN0eWxlOlxuICogY2hhdC1kaXZpZGVyLXdpZHRoOlxuICogY2hhdC1tZXNzYWdlLWJhY2tncm91bmQ6XG4gKiBjaGF0LW1lc3NhZ2UtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1yZXBseS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLXJlcGx5LXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtYXZhdGFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2Utc2VuZGVyLXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtcXVvdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1xdW90ZS10ZXh0LWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLWZpbGUtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1maWxlLWJhY2tncm91bmQtY29sb3I6XG4gKi9cbnZhciBOYkNoYXRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDaGF0Q29tcG9uZW50KCkge1xuICAgICAgICB0aGlzLl9zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICB0aGlzLm5vTWVzc2FnZXNQbGFjZWhvbGRlciA9ICdObyBtZXNzYWdlcyB5ZXQuJztcbiAgICAgICAgdGhpcy5fc2Nyb2xsQm90dG9tID0gdHJ1ZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoYXQgc3RhdHVzIGNvbG9yIChhZGRzIHNwZWNpZmljIHN0eWxlcyk6XG4gICAgICAgICAqIGBiYXNpY2AgKGRlZmF1bHQpLCBgcHJpbWFyeWAsIGBzdWNjZXNzYCwgYGluZm9gLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGAuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZW1wdHlTdGF0dXNXYXJuaW5nKCdOYkNoYXQnKTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICdiYXNpYyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2Nyb2xsQm90dG9tXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNjcm9sbCBjaGF0IHRvIHRoZSBib3R0b20gb2YgdGhlIGxpc3Qgd2hlbiBhIG5ldyBtZXNzYWdlIGFycml2ZXNcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEJvdHRvbTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbEJvdHRvbSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xuICAgICAgICBpZiAoJ3N0YXR1cycgaW4gY2hhbmdlcykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGb3JtU3RhdHVzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlckNvbnRlbnRJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUZvcm1TdGF0dXMoKTtcbiAgICB9O1xuICAgIE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLm1lc3NhZ2VzLmNoYW5nZXNcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBfdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlldygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgfTtcbiAgICBOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLnVwZGF0ZVZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbEJvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxMaXN0Qm90dG9tKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUuc2Nyb2xsTGlzdEJvdHRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxhYmxlLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxhYmxlLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICAgIH07XG4gICAgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZS51cGRhdGVGb3JtU3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jaGF0Rm9ybSkge1xuICAgICAgICAgICAgdGhpcy5jaGF0Rm9ybS5zZXRTdGF0dXModGhpcy5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdtZWRpdW0nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJub01lc3NhZ2VzUGxhY2Vob2xkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2Nyb2xsQm90dG9tXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBWaWV3Q2hpbGQoJ3Njcm9sbGFibGUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzY3JvbGxhYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIENvbnRlbnRDaGlsZHJlbihOYkNoYXRNZXNzYWdlQ29tcG9uZW50KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFF1ZXJ5TGlzdClcbiAgICBdLCBOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcIm1lc3NhZ2VzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIENvbnRlbnRDaGlsZChOYkNoYXRGb3JtQ29tcG9uZW50KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE5iQ2hhdEZvcm1Db21wb25lbnQpXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGF0Rm9ybVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS10aW55JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGlueVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtc21hbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzbWFsbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbWVkaXVtJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQ2hhdENvbXBvbmVudC5wcm90b3R5cGUsIFwibWVkaXVtXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1sYXJnZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1naWFudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcImdpYW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXByaW1hcnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWluZm8nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXdhcm5pbmcnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWRhbmdlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkNoYXRDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWNvbnRyb2wnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJDaGF0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sXCIsIG51bGwpO1xuICAgIE5iQ2hhdENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkZXJcXFwiPnt7IHRpdGxlIH19PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcInNjcm9sbGFibGVcXFwiICNzY3JvbGxhYmxlPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIm1lc3NhZ2VzXFxcIj5cXG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItY2hhdC1tZXNzYWdlXFxcIj48L25nLWNvbnRlbnQ+XFxuICAgICAgICA8cCBjbGFzcz1cXFwibm8tbWVzc2FnZXNcXFwiICpuZ0lmPVxcXCIhbWVzc2FnZXM/Lmxlbmd0aFxcXCI+e3sgbm9NZXNzYWdlc1BsYWNlaG9sZGVyIH19PC9wPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZm9ybVxcXCI+XFxuICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1jaGF0LWZvcm1cXFwiPjwvbmctY29udGVudD5cXG4gICAgPC9kaXY+XFxuICBcIixcbiAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJX1cXG5cIl1cbiAgICAgICAgfSlcbiAgICBdLCBOYkNoYXRDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNoYXRDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJDaGF0T3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkNoYXRPcHRpb25zKCkge1xuICAgIH1cbiAgICByZXR1cm4gTmJDaGF0T3B0aW9ucztcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ2hhdCBtZXNzYWdlIGNvbXBvbmVudC5cbiAqL1xudmFyIE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDaGF0TWVzc2FnZU1hcENvbXBvbmVudChvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXNzYWdlIHNlbmQgZGF0ZSBmb3JtYXQsIGRlZmF1bHQgJ3Nob3J0VGltZSdcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9ICdzaG9ydFRpbWUnO1xuICAgICAgICB0aGlzLm1hcEtleSA9IG9wdGlvbnMubWVzc2FnZUdvb2dsZU1hcEtleTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQucHJvdG90eXBlLCBcImZpbGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuICAgICAgICAgICAgICAgIHVybDogXCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvc3RhdGljbWFwP2NlbnRlcj1cIiArIHRoaXMubGF0aXR1ZGUgKyBcIixcIiArIHRoaXMubG9uZ2l0dWRlICsgXCImem9vbT0xMiZzaXplPTQwMHg0MDAma2V5PVwiICsgdGhpcy5tYXBLZXksXG4gICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgICAgICAgICAgaWNvbjogJ2xvY2F0aW9uJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQucHJvdG90eXBlLCBcIm1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRNZXNzYWdlTWFwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIERhdGUpXG4gICAgXSwgTmJDaGF0TWVzc2FnZU1hcENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVGb3JtYXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbiAgICBdLCBOYkNoYXRNZXNzYWdlTWFwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXRpdHVkZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQucHJvdG90eXBlLCBcImxvbmdpdHVkZVwiLCB2b2lkIDApO1xuICAgIE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2hhdC1tZXNzYWdlLW1hcCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5iLWNoYXQtbWVzc2FnZS1maWxlIFtmaWxlc109XFxcIltmaWxlXVxcXCIgW21lc3NhZ2VdPVxcXCJtZXNzYWdlXFxcIiBbc2VuZGVyXT1cXFwic2VuZGVyXFxcIiBbZGF0ZV09XFxcImRhdGVcXFwiXFxuICAgICBbZGF0ZUZvcm1hdF09XFxcImRhdGVGb3JtYXRcXFwiPjwvbmItY2hhdC1tZXNzYWdlLWZpbGU+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iQ2hhdE9wdGlvbnNdKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNoYXRNZXNzYWdlTWFwQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDaGF0IG1lc3NhZ2UgY29tcG9uZW50LlxuICovXG52YXIgTmJDaGF0TWVzc2FnZUZpbGVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDaGF0TWVzc2FnZUZpbGVDb21wb25lbnQoY2QsIGRvbVNhbml0aXplcikge1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuZG9tU2FuaXRpemVyID0gZG9tU2FuaXRpemVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWVzc2FnZSBzZW5kIGRhdGUgZm9ybWF0LCBkZWZhdWx0ICdzaG9ydFRpbWUnXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSAnc2hvcnRUaW1lJztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaWxlc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXNzYWdlIGZpbGUgcGF0aFxuICAgICAgICAgKiBAdHlwZSB7RGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGZpbGVzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5yZWFkeUZpbGVzID0gKGZpbGVzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNJbWFnZSA9IF90aGlzLmlzSW1hZ2UoZmlsZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBmaWxlKSwgeyB1cmxTdHlsZTogaXNJbWFnZSAmJiBfdGhpcy5kb21TYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKFwidXJsKFwiICsgZmlsZS51cmwgKyBcIilcIiksIGlzSW1hZ2U6IGlzSW1hZ2UgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYkNoYXRNZXNzYWdlRmlsZUNvbXBvbmVudC5wcm90b3R5cGUuaXNJbWFnZSA9IGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgIHZhciB0eXBlID0gZmlsZS50eXBlO1xuICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvZ2lmJ10uaW5jbHVkZXModHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0TWVzc2FnZUZpbGVDb21wb25lbnQucHJvdG90eXBlLCBcIm1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRNZXNzYWdlRmlsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic2VuZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBEYXRlKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0TWVzc2FnZUZpbGVDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVGb3JtYXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtBcnJheV0pXG4gICAgXSwgTmJDaGF0TWVzc2FnZUZpbGVDb21wb25lbnQucHJvdG90eXBlLCBcImZpbGVzXCIsIG51bGwpO1xuICAgIE5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNoYXQtbWVzc2FnZS1maWxlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmItY2hhdC1tZXNzYWdlLXRleHQgW3NlbmRlcl09XFxcInNlbmRlclxcXCIgW2RhdGVdPVxcXCJkYXRlXFxcIiBbZGF0ZUZvcm1hdF09XFxcImRhdGVGb3JtYXRcXFwiIFttZXNzYWdlXT1cXFwibWVzc2FnZVxcXCI+XFxuICAgICAge3sgbWVzc2FnZSB9fVxcbiAgICA8L25iLWNoYXQtbWVzc2FnZS10ZXh0PlxcblxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJyZWFkeUZpbGVzPy5sZW5ndGggPiAxXFxcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlLWNvbnRlbnQtZ3JvdXBcXFwiPlxcbiAgICAgICAgPGEgKm5nRm9yPVxcXCJsZXQgZmlsZSBvZiByZWFkeUZpbGVzXFxcIiBbaHJlZl09XFxcImZpbGUudXJsXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgIDxuYi1pY29uIFtpY29uXT1cXFwiZmlsZS5pY29uXFxcIiAqbmdJZj1cXFwiIWZpbGUudXJsU3R5bGUgJiYgZmlsZS5pY29uXFxcIj48L25iLWljb24+XFxuICAgICAgICAgIDxkaXYgKm5nSWY9XFxcImZpbGUudXJsU3R5bGVcXFwiIFtzdHlsZS5iYWNrZ3JvdW5kLWltYWdlXT1cXFwiZmlsZS51cmxTdHlsZVxcXCI+PC9kaXY+XFxuICAgICAgICA8L2E+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvbmctY29udGFpbmVyPlxcblxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJyZWFkeUZpbGVzPy5sZW5ndGggPT09IDFcXFwiPlxcbiAgICAgIDxhIFtocmVmXT1cXFwicmVhZHlGaWxlc1swXS51cmxcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgIDxuYi1pY29uIFtpY29uXT1cXFwicmVhZHlGaWxlc1swXS5pY29uXFxcIiAqbmdJZj1cXFwiIXJlYWR5RmlsZXNbMF0udXJsU3R5bGUgJiYgcmVhZHlGaWxlc1swXS5pY29uXFxcIj48L25iLWljb24+XFxuICAgICAgICA8ZGl2ICpuZ0lmPVxcXCJyZWFkeUZpbGVzWzBdLnVybFN0eWxlXFxcIiBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XFxcInJlYWR5RmlsZXNbMF0udXJsU3R5bGVcXFwiPjwvZGl2PlxcbiAgICAgIDwvYT5cXG4gICAgPC9uZy1jb250YWluZXI+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0NoYW5nZURldGVjdG9yUmVmLCBEb21TYW5pdGl6ZXJdKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJDaGF0TWVzc2FnZUZpbGVDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENoYXQgbWVzc2FnZSBjb21wb25lbnQuXG4gKi9cbnZhciBOYkNoYXRNZXNzYWdlUXVvdGVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50KCkge1xuICAgICAgICAvKipcbiAgICAgICAgICAqIE1lc3NhZ2Ugc2VuZCBkYXRlIGZvcm1hdCwgZGVmYXVsdCAnc2hvcnRUaW1lJ1xuICAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICAqL1xuICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSAnc2hvcnRUaW1lJztcbiAgICB9XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIERhdGUpXG4gICAgXSwgTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlRm9ybWF0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJxdW90ZVwiLCB2b2lkIDApO1xuICAgIE5iQ2hhdE1lc3NhZ2VRdW90ZUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0LW1lc3NhZ2UtcXVvdGUnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxwIGNsYXNzPVxcXCJzZW5kZXJcXFwiICpuZ0lmPVxcXCJzZW5kZXIgfHwgZGF0ZVxcXCI+e3sgc2VuZGVyIH19IDx0aW1lPnt7IGRhdGUgfCBkYXRlOiBkYXRlRm9ybWF0IH19PC90aW1lPjwvcD5cXG4gICAgPHAgY2xhc3M9XFxcInF1b3RlXFxcIj5cXG4gICAgICB7eyBxdW90ZSB9fVxcbiAgICA8L3A+XFxuICAgIDxuYi1jaGF0LW1lc3NhZ2UtdGV4dCBbbWVzc2FnZV09XFxcIm1lc3NhZ2VcXFwiPlxcbiAgICAgIHt7IG1lc3NhZ2UgfX1cXG4gICAgPC9uYi1jaGF0LW1lc3NhZ2UtdGV4dD5cXG4gIFwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgfSlcbiAgICBdLCBOYkNoYXRNZXNzYWdlUXVvdGVDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkNoYXRNZXNzYWdlUXVvdGVDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENoYXQgbWVzc2FnZSBjb21wb25lbnQuXG4gKi9cbnZhciBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudCgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1lc3NhZ2Ugc2VuZCBkYXRlIGZvcm1hdCwgZGVmYXVsdCAnc2hvcnRUaW1lJ1xuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gJ3Nob3J0VGltZSc7XG4gICAgfVxuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwibWVzc2FnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRGF0ZSlcbiAgICBdLCBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ2hhdE1lc3NhZ2VUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlRm9ybWF0XCIsIHZvaWQgMCk7XG4gICAgTmJDaGF0TWVzc2FnZVRleHRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2hhdC1tZXNzYWdlLXRleHQnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxwIGNsYXNzPVxcXCJzZW5kZXJcXFwiICpuZ0lmPVxcXCJzZW5kZXIgfHwgZGF0ZVxcXCI+e3sgc2VuZGVyIH19IDx0aW1lPnt7IGRhdGUgIHwgZGF0ZTogZGF0ZUZvcm1hdCB9fTwvdGltZT48L3A+XFxuICAgIDxwIGNsYXNzPVxcXCJ0ZXh0XFxcIiAqbmdJZj1cXFwibWVzc2FnZVxcXCI+e3sgbWVzc2FnZSB9fTwvcD5cXG4gIFwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgfSlcbiAgICBdLCBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQ2hhdE1lc3NhZ2VUZXh0Q29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLypcbiAqIENsYXNzIHVzZWQgYXMgaW5qZWN0aW9uIHRva2VuIHRvIHByb3ZpZGUgZm9ybSBlbGVtZW50LlxuICoqL1xudmFyIE5iRm9ybUZpZWxkQ29udHJvbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkZvcm1GaWVsZENvbnRyb2woKSB7XG4gICAgfVxuICAgIE5iRm9ybUZpZWxkQ29udHJvbCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKClcbiAgICBdLCBOYkZvcm1GaWVsZENvbnRyb2wpO1xuICAgIHJldHVybiBOYkZvcm1GaWVsZENvbnRyb2w7XG59KCkpO1xuLypcbiAqIE9wdGlvbmFsIGNvbmZpZyB0byBiZSBwcm92aWRlZCBvbiBOYkZvcm1GaWVsZENvbnRyb2wgdG8gYWx0ZXIgZGVmYXVsdCBzZXR0aW5ncy5cbiAqKi9cbnZhciBOYkZvcm1GaWVsZENvbnRyb2xDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJGb3JtRmllbGRDb250cm9sQ29uZmlnKCkge1xuICAgICAgICB0aGlzLnN1cHBvcnRzUHJlZml4ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdXBwb3J0c1N1ZmZpeCA9IHRydWU7XG4gICAgfVxuICAgIE5iRm9ybUZpZWxkQ29udHJvbENvbmZpZyA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKClcbiAgICBdLCBOYkZvcm1GaWVsZENvbnRyb2xDb25maWcpO1xuICAgIHJldHVybiBOYkZvcm1GaWVsZENvbnRyb2xDb25maWc7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIEJhc2ljIGlucHV0IGRpcmVjdGl2ZS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8aW5wdXQgbmJJbnB1dD48L2lucHV0PlxuICogYGBgXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJJbnB1dE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJJbnB1dE1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogRGVmYXVsdCBpbnB1dCBzaXplIGlzIGBtZWRpdW1gOlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgaW5wdXQvaW5wdXQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIElucHV0cyBhcmUgYXZhaWxhYmxlIGluIG11bHRpcGxlIGNvbG9ycyB1c2luZyBgc3RhdHVzYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSW5wdXQgQ29sb3JzLCBpbnB1dC9pbnB1dC1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIFRoZXJlIGFyZSB0aHJlZSBpbnB1dCBzaXplczpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKElucHV0IFNpemVzLCBpbnB1dC9pbnB1dC1zaXplcy5jb21wb25lbnQpXG4gKlxuICogSW5wdXRzIGF2YWlsYWJsZSBpbiBkaWZmZXJlbnQgc2hhcGVzLCB3aGljaCBjb3VsZCBiZSBjb21iaW5lZCB3aXRoIHRoZSBvdGhlciBwcm9wZXJ0aWVzOlxuICogQHN0YWNrZWQtZXhhbXBsZShJbnB1dCBTaGFwZXMsIGlucHV0L2lucHV0LXNoYXBlcy5jb21wb25lbnQpXG4gKlxuICogYG5iSW5wdXRgIGNvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGZvbGxvd2luZyBzZWxlY3RvcnMgLSBgaW5wdXRgLCBgdGV4dGFyZWFgOlxuICogQHN0YWNrZWQtZXhhbXBsZShJbnB1dCBFbGVtZW50cywgaW5wdXQvaW5wdXQtdHlwZXMuY29tcG9uZW50KVxuICpcbiAqIFlvdSBjYW4gYWRkIGBmdWxsV2lkdGhgIGF0dHJpYnV0ZSB0byBtYWtlIGVsZW1lbnQgZmlsbCBjb250YWluZXI6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEZ1bGwgd2lkdGggaW5wdXRzLCBpbnB1dC9pbnB1dC1mdWxsLXdpZHRoLmNvbXBvbmVudClcbiAqXG4gKiBPciB5b3UgY2FuIGJpbmQgY29udHJvbCB3aXRoIGZvcm0gY29udHJvbHMgb3IgbmdNb2RlbDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSW5wdXQgZm9ybSBiaW5kaW5nLCBpbnB1dC9pbnB1dC1mb3JtLmNvbXBvbmVudClcbiAqXG4gKiBVc2UgYDxuYi1mb3JtLWZpZWxkPmAgdG8gYWRkIGN1c3RvbSBjb250ZW50IHRvIHRoZSBpbnB1dCBmaWVsZC5cbiAqIEZpcnN0IGltcG9ydCBgTmJGb3JtRmllbGRNb2R1bGVgLiBUaGVuIHB1dCB0aGUgaW5wdXQgZmllbGQgYW5kIGN1c3RvbSBjb250ZW50IGludG9cbiAqIGA8bmItZm9ybS1maWVsZD5gIGFuZCBhZGQgYG5iUHJlZml4YCBvciBgbmJTdWZmaXhgIGRpcmVjdGl2ZSB0byB0aGUgY3VzdG9tIGNvbnRlbnQuXG4gKiBgbmJQcmVmaXhgIHB1dHMgY29udGVudCBiZWZvcmUgaW5wdXQgYW5kIGBuYlN1ZmZpeGAgYWZ0ZXIuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShJbnB1dCB3aXRoIGljb24sIGZvcm0tZmllbGQvZm9ybS1maWVsZC1pbnB1dC5jb21wb25lbnQpXG4gKiBAc3RhY2tlZC1leGFtcGxlKElucHV0IHdpdGggYnV0dG9uLCBmb3JtLWZpZWxkL2Zvcm0tZmllbGQtcGFzc3dvcmQuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBpbnB1dC1ib3JkZXItc3R5bGU6XG4gKiBpbnB1dC1ib3JkZXItd2lkdGg6XG4gKiBpbnB1dC1vdXRsaW5lLWNvbG9yOlxuICogaW5wdXQtb3V0bGluZS13aWR0aDpcbiAqIGlucHV0LXBsYWNlaG9sZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBpbnB1dC10ZXh0LWZvbnQtZmFtaWx5OlxuICogaW5wdXQtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtYmFzaWMtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1iYXNpYy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtYmFzaWMtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtYmFzaWMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLWRpc2FibGVkLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXByaW1hcnktZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LXByaW1hcnktZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGlucHV0LXByaW1hcnktZGlzYWJsZWQtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtc3VjY2Vzcy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogaW5wdXQtc3VjY2Vzcy1kaXNhYmxlZC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtaW5mby10ZXh0LWNvbG9yOlxuICogaW5wdXQtaW5mby1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtaW5mby1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1pbmZvLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1pbmZvLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWluZm8taG92ZXItYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtaW5mby1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtaW5mby1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBpbnB1dC1pbmZvLWRpc2FibGVkLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXdhcm5pbmctZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LXdhcm5pbmctZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtd2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtd2FybmluZy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGlucHV0LXdhcm5pbmctZGlzYWJsZWQtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LWRhbmdlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtZGFuZ2VyLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWRhbmdlci1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWRhbmdlci1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWRhbmdlci1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWRhbmdlci1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGlucHV0LWRhbmdlci1kaXNhYmxlZC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtY29udHJvbC10ZXh0LWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1jb250cm9sLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1jb250cm9sLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1jb250cm9sLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBpbnB1dC1jb250cm9sLWRpc2FibGVkLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1yZWN0YW5nbGUtYm9yZGVyLXJhZGl1czpcbiAqIGlucHV0LXNlbWktcm91bmQtYm9yZGVyLXJhZGl1czpcbiAqIGlucHV0LXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKiBpbnB1dC10aW55LXRleHQtZm9udC1zaXplOlxuICogaW5wdXQtdGlueS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtdGlueS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogaW5wdXQtdGlueS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGlucHV0LXRpbnktcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGlucHV0LXRpbnktcGxhY2Vob2xkZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LXRpbnktcGFkZGluZzpcbiAqIGlucHV0LXRpbnktbWF4LXdpZHRoOlxuICogaW5wdXQtc21hbGwtdGV4dC1mb250LXNpemU6XG4gKiBpbnB1dC1zbWFsbC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtc21hbGwtdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LXNtYWxsLXBsYWNlaG9sZGVyLXRleHQtZm9udC1zaXplOlxuICogaW5wdXQtc21hbGwtcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGlucHV0LXNtYWxsLXBsYWNlaG9sZGVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBpbnB1dC1zbWFsbC1wYWRkaW5nOlxuICogaW5wdXQtc21hbGwtbWF4LXdpZHRoOlxuICogaW5wdXQtbWVkaXVtLXRleHQtZm9udC1zaXplOlxuICogaW5wdXQtbWVkaXVtLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBpbnB1dC1tZWRpdW0tdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LW1lZGl1bS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGlucHV0LW1lZGl1bS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtbWVkaXVtLXBsYWNlaG9sZGVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBpbnB1dC1tZWRpdW0tcGFkZGluZzpcbiAqIGlucHV0LW1lZGl1bS1tYXgtd2lkdGg6XG4gKiBpbnB1dC1sYXJnZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGlucHV0LWxhcmdlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBpbnB1dC1sYXJnZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogaW5wdXQtbGFyZ2UtcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBpbnB1dC1sYXJnZS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtbGFyZ2UtcGxhY2Vob2xkZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LWxhcmdlLXBhZGRpbmc6XG4gKiBpbnB1dC1sYXJnZS1tYXgtd2lkdGg6XG4gKiBpbnB1dC1naWFudC10ZXh0LWZvbnQtc2l6ZTpcbiAqIGlucHV0LWdpYW50LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBpbnB1dC1naWFudC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogaW5wdXQtZ2lhbnQtcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBpbnB1dC1naWFudC1wbGFjZWhvbGRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtZ2lhbnQtcGxhY2Vob2xkZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LWdpYW50LXBhZGRpbmc6XG4gKiBpbnB1dC1naWFudC1tYXgtd2lkdGg6XG4gKi9cbnZhciBOYklucHV0RGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iSW5wdXREaXJlY3RpdmUoZWxlbWVudFJlZiwgZm9jdXNNb25pdG9yLCByZW5kZXJlciwgem9uZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLmZvY3VzTW9uaXRvciA9IGZvY3VzTW9uaXRvcjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpZWxkIHNpemUgbW9kaWZpY2F0aW9ucy4gUG9zc2libGUgdmFsdWVzOiBgc21hbGxgLCBgbWVkaXVtYCAoZGVmYXVsdCksIGBsYXJnZWAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpZWxkU2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICB0aGlzLl9zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmllbGQgc2hhcGVzIG1vZGlmaWNhdGlvbnMuIFBvc3NpYmxlIHZhbHVlczogYHJlY3RhbmdsZWAgKGRlZmF1bHQpLCBgcm91bmRgLCBgc2VtaS1yb3VuZGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNoYXBlID0gJ3JlY3RhbmdsZSc7XG4gICAgICAgIHRoaXMuX2Z1bGxXaWR0aCA9IGZhbHNlO1xuICAgICAgICAvKlxuICAgICAgICAgKiBAZG9jcy1wcml2YXRlXG4gICAgICAgICAqKi9cbiAgICAgICAgdGhpcy5zdGF0dXMkID0gbmV3IEJlaGF2aW9yU3ViamVjdCh0aGlzLnN0YXR1cyk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLnNpemUkID0gbmV3IEJlaGF2aW9yU3ViamVjdCh0aGlzLmZpZWxkU2l6ZSk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLmZvY3VzZWQkID0gbmV3IEJlaGF2aW9yU3ViamVjdChmYWxzZSk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLmRpc2FibGVkJCA9IG5ldyBCZWhhdmlvclN1YmplY3QoZmFsc2UpO1xuICAgIH1cbiAgICBOYklucHV0RGlyZWN0aXZlXzEgPSBOYklucHV0RGlyZWN0aXZlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzdGF0dXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRmllbGQgc3RhdHVzIChhZGRzIHNwZWNpZmljIHN0eWxlcyk6XG4gICAgICAgICAqIGBiYXNpY2AsIGBwcmltYXJ5YCwgYGluZm9gLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIGVtcHR5U3RhdHVzV2FybmluZygnTmJJbnB1dCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImZ1bGxXaWR0aFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBzZXQgZWxlbWVudCB3aWxsIGZpbGwgY29udGFpbmVyLiBgZmFsc2VgIGJ5IGRlZmF1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mdWxsV2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9mdWxsV2lkdGggPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZS5uZ0RvQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpc0Rpc2FibGVkID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZGlzYWJsZWQ7XG4gICAgICAgIGlmIChpc0Rpc2FibGVkICE9PSB0aGlzLmRpc2FibGVkJC52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCQubmV4dChpc0Rpc2FibGVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHN0YXR1cyA9IF9hLnN0YXR1cywgZmllbGRTaXplID0gX2EuZmllbGRTaXplO1xuICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyQubmV4dCh0aGlzLnN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5zaXplJC5uZXh0KHRoaXMuZmllbGRTaXplKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZm9jdXNNb25pdG9yLm1vbml0b3IodGhpcy5lbGVtZW50UmVmKVxuICAgICAgICAgICAgLnBpcGUobWFwKGZ1bmN0aW9uIChvcmlnaW4pIHsgcmV0dXJuICEhb3JpZ2luOyB9KSwgZmluYWxpemUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZm9jdXNNb25pdG9yLnN0b3BNb25pdG9yaW5nKF90aGlzLmVsZW1lbnRSZWYpOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmZvY3VzZWQkKTtcbiAgICB9O1xuICAgIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gVE9ETzogIzIyNTRcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIuYWRkQ2xhc3MoX3RoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnbmItdHJhbnNpdGlvbicpO1xuICAgICAgICB9KTsgfSk7XG4gICAgfTtcbiAgICBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwidGlueVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRTaXplID09PSAndGlueSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzbWFsbFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRTaXplID09PSAnc21hbGwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwibWVkaXVtXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZFNpemUgPT09ICdtZWRpdW0nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwibGFyZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpZWxkU2l6ZSA9PT0gJ2xhcmdlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImdpYW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZFNpemUgPT09ICdnaWFudCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImluZm9cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImRhbmdlclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImJhc2ljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJjb250cm9sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcInJlY3RhbmdsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdyZWN0YW5nbGUnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwic2VtaVJvdW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3NlbWktcm91bmQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwicm91bmRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncm91bmQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICB2YXIgTmJJbnB1dERpcmVjdGl2ZV8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImZpZWxkU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcInN0YXR1c1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzaGFwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuaW5wdXQtZnVsbC13aWR0aCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiZnVsbFdpZHRoXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS10aW55JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwidGlueVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtc21hbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzbWFsbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbWVkaXVtJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwibWVkaXVtXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1sYXJnZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImxhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1naWFudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImdpYW50XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXByaW1hcnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWluZm8nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXdhcm5pbmcnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWRhbmdlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImRhbmdlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImJhc2ljXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWNvbnRyb2wnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJjb250cm9sXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtcmVjdGFuZ2xlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwicmVjdGFuZ2xlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtc2VtaS1yb3VuZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iSW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcInNlbWlSb3VuZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNoYXBlLXJvdW5kJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwicm91bmRcIiwgbnVsbCk7XG4gICAgTmJJbnB1dERpcmVjdGl2ZSA9IE5iSW5wdXREaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdpbnB1dFtuYklucHV0XSx0ZXh0YXJlYVtuYklucHV0XScsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5iRm9ybUZpZWxkQ29udHJvbCwgdXNlRXhpc3Rpbmc6IE5iSW5wdXREaXJlY3RpdmVfMSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgICAgIE5iRm9jdXNNb25pdG9yLFxuICAgICAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICAgICAgTmdab25lXSlcbiAgICBdLCBOYklucHV0RGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJJbnB1dERpcmVjdGl2ZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9JTlBVVF9DT01QT05FTlRTID0gW1xuICAgIE5iSW5wdXREaXJlY3RpdmUsXG5dO1xudmFyIE5iSW5wdXRNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJJbnB1dE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJJbnB1dE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbTmJTaGFyZWRNb2R1bGVdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBOQl9JTlBVVF9DT01QT05FTlRTLFxuICAgICAgICAgICAgZXhwb3J0czogTkJfSU5QVVRfQ09NUE9ORU5UUyxcbiAgICAgICAgfSlcbiAgICBdLCBOYklucHV0TW9kdWxlKTtcbiAgICByZXR1cm4gTmJJbnB1dE1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9DSEFUX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJDaGF0Q29tcG9uZW50LFxuICAgIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQsXG4gICAgTmJDaGF0Rm9ybUNvbXBvbmVudCxcbiAgICBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudCxcbiAgICBOYkNoYXRNZXNzYWdlRmlsZUNvbXBvbmVudCxcbiAgICBOYkNoYXRNZXNzYWdlUXVvdGVDb21wb25lbnQsXG4gICAgTmJDaGF0TWVzc2FnZU1hcENvbXBvbmVudCxcbl07XG52YXIgTmJDaGF0TW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQ2hhdE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJDaGF0TW9kdWxlXzEgPSBOYkNoYXRNb2R1bGU7XG4gICAgTmJDaGF0TW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iQ2hhdE1vZHVsZV8xLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOYkNoYXRPcHRpb25zLCB1c2VWYWx1ZTogb3B0aW9ucyB8fCB7fSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIE5iQ2hhdE1vZHVsZS5mb3JDaGlsZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJDaGF0TW9kdWxlXzEsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5iQ2hhdE9wdGlvbnMsIHVzZVZhbHVlOiBvcHRpb25zIHx8IHt9IH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgdmFyIE5iQ2hhdE1vZHVsZV8xO1xuICAgIE5iQ2hhdE1vZHVsZSA9IE5iQ2hhdE1vZHVsZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJJbnB1dE1vZHVsZSxcbiAgICAgICAgICAgICAgICBOYkJ1dHRvbk1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IF9fc3ByZWFkQXJyYXlzKE5CX0NIQVRfQ09NUE9ORU5UUyksXG4gICAgICAgICAgICBleHBvcnRzOiBfX3NwcmVhZEFycmF5cyhOQl9DSEFUX0NPTVBPTkVOVFMpLFxuICAgICAgICB9KVxuICAgIF0sIE5iQ2hhdE1vZHVsZSk7XG4gICAgcmV0dXJuIE5iQ2hhdE1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU3R5bGVkIHNwaW5uZXIgY29tcG9uZW50XG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHNwaW5uZXItdGV4dC1jb2xvcjpcbiAqIHNwaW5uZXItdGV4dC1mb250LWZhbWlseTpcbiAqIHNwaW5uZXItdGV4dC1mb250LXNpemU6XG4gKiBzcGlubmVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzcGlubmVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzcGlubmVyLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBzcGlubmVyLWJhc2ljLWNpcmNsZS1maWxsZWQtY29sb3I6XG4gKiBzcGlubmVyLWJhc2ljLWNpcmNsZS1lbXB0eS1jb2xvcjpcbiAqIHNwaW5uZXItcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc3Bpbm5lci1wcmltYXJ5LWNpcmNsZS1maWxsZWQtY29sb3I6XG4gKiBzcGlubmVyLXByaW1hcnktY2lyY2xlLWVtcHR5LWNvbG9yOlxuICogc3Bpbm5lci1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBzcGlubmVyLWluZm8tY2lyY2xlLWZpbGxlZC1jb2xvcjpcbiAqIHNwaW5uZXItaW5mby1jaXJjbGUtZW1wdHktY29sb3I6XG4gKiBzcGlubmVyLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNwaW5uZXItc3VjY2Vzcy1jaXJjbGUtZmlsbGVkLWNvbG9yOlxuICogc3Bpbm5lci1zdWNjZXNzLWNpcmNsZS1lbXB0eS1jb2xvcjpcbiAqIHNwaW5uZXItd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc3Bpbm5lci13YXJuaW5nLWNpcmNsZS1maWxsZWQtY29sb3I6XG4gKiBzcGlubmVyLXdhcm5pbmctY2lyY2xlLWVtcHR5LWNvbG9yOlxuICogc3Bpbm5lci1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNwaW5uZXItZGFuZ2VyLWNpcmNsZS1maWxsZWQtY29sb3I6XG4gKiBzcGlubmVyLWRhbmdlci1jaXJjbGUtZW1wdHktY29sb3I6XG4gKiBzcGlubmVyLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNwaW5uZXItY29udHJvbC1jaXJjbGUtZmlsbGVkLWNvbG9yOlxuICogc3Bpbm5lci1jb250cm9sLWNpcmNsZS1lbXB0eS1jb2xvcjpcbiAqIHNwaW5uZXItaGVpZ2h0LXRpbnk6XG4gKiBzcGlubmVyLWhlaWdodC1zbWFsbDpcbiAqIHNwaW5uZXItaGVpZ2h0LW1lZGl1bTpcbiAqIHNwaW5uZXItaGVpZ2h0LWxhcmdlOlxuICogc3Bpbm5lci1oZWlnaHQtZ2lhbnQ6XG4gKi9cbnZhciBOYlNwaW5uZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTcGlubmVyQ29tcG9uZW50KCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZGluZyB0ZXh0IHRoYXQgaXMgc2hvd24gbmVhciB0aGUgaWNvblxuICAgICAgICAgKiBAdHlwZSBzdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICdMb2FkaW5nLi4uJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwaW5uZXIgc2l6ZSwgYXZhaWxhYmxlIHNpemVzOlxuICAgICAgICAgKiB0aW55LCBzbWFsbCwgbWVkaXVtLCBsYXJnZSwgZ2lhbnRcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNpemUgPSAnbWVkaXVtJztcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ2Jhc2ljJztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwaW5uZXIgc3RhdHVzIChhZGRzIHNwZWNpZmljIHN0eWxlcyk6XG4gICAgICAgICAqIGBiYXNpY2AsIGBwcmltYXJ5YCwgYGluZm9gLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBlbXB0eVN0YXR1c1dhcm5pbmcoJ05iU3Bpbm5lcicpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gJ2Jhc2ljJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTcGlubmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTcGlubmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdtZWRpdW0nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTcGlubmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTcGlubmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcIndhcm5pbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTcGlubmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtdGlueScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGlueVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtc21hbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1tZWRpdW0nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1lZGl1bVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1naWFudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtcHJpbWFyeScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1pbmZvJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTcGlubmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtd2FybmluZycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1kYW5nZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtY29udHJvbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU3Bpbm5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCBudWxsKTtcbiAgICBOYlNwaW5uZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc3Bpbm5lcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPHNwYW4gY2xhc3M9XFxcInNwaW4tY2lyY2xlXFxcIj48L3NwYW4+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJtZXNzYWdlXFxcIiAqbmdJZj1cXFwibWVzc2FnZVxcXCI+e3sgbWVzc2FnZSB9fTwvc3Bhbj5cXG4gIFwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtvcGFjaXR5OjE7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLXJhZGl1czppbmhlcml0O3RvcDowO3JpZ2h0OjA7bGVmdDowO2JvdHRvbTowO292ZXJmbG93OmhpZGRlbjt6LWluZGV4Ojk5OTk7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3Zpc2liaWxpdHk6dmlzaWJsZX06aG9zdCAuc3Bpbi1jaXJjbGV7YW5pbWF0aW9uOnNwaW4gMC44cyBpbmZpbml0ZSBsaW5lYXI7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci13aWR0aDowLjEyNWVtO3dpZHRoOjFlbTtoZWlnaHQ6MWVtfTpob3N0IC5tZXNzYWdle21hcmdpbi1sZWZ0OjAuNXJlbX1cXG5cIl1cbiAgICAgICAgfSlcbiAgICBdLCBOYlNwaW5uZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlNwaW5uZXJDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFN0eWxlZCBzcGlubmVyIGRpcmVjdGl2ZVxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU3Bpbm5lciBTaG93Y2FzZSwgc3Bpbm5lci9zcGlubmVyLWNhcmQuY29tcG9uZW50KVxuICpcbiAqXG4gKiBgYGB0c1xuICogPG5iLWNhcmQgW25iU3Bpbm5lcl09XCJsb2FkaW5nXCIgbmJTcGlubmVyU3RhdHVzPVwiZGFuZ2VyXCI+XG4gKiAgIDxuYi1jYXJkLWJvZHk+Q2FyZCBDb250ZW50PC9uYi1jYXJkLWJvZHk+XG4gKiA8L25iLWNhcmQ+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlNwaW5uZXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU3Bpbm5lck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogQ291bGQgYmUgY29sb3JlZCB1c2luZyBgc3RhdHVzYCBwcm9wZXJ0eVxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU3Bpbm5lciBDb2xvcnMsIHNwaW5uZXIvc3Bpbm5lci1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIEF2YWlsYWJsZSBpbiBkaWZmZXJlbnQgc2l6ZXMgd2l0aCBgc2l6ZWAgcHJvcGVydHk6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTcGlubmVyIFNpemVzLCBzcGlubmVyL3NwaW5uZXItc2l6ZXMuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gcGxhY2UgaXQgaW50byB0aGUgYnV0dG9uOlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b25zIHdpdGggc3Bpbm5lciwgc3Bpbm5lci9zcGlubmVyLWJ1dHRvbi5jb21wb25lbnQpXG4gKlxuICogT3IgdGFiczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU3Bpbm5lciBpbiB0YWJzLCBzcGlubmVyL3NwaW5uZXItdGFicy5jb21wb25lbnQpXG4gKi9cbnZhciBOYlNwaW5uZXJEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTcGlubmVyRGlyZWN0aXZlKGRpcmVjdGl2ZVZpZXcsIGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgcmVuZGVyZXIsIGRpcmVjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5kaXJlY3RpdmVWaWV3ID0gZGlyZWN0aXZlVmlldztcbiAgICAgICAgdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgPSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5kaXJlY3RpdmVFbGVtZW50ID0gZGlyZWN0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5zaG91bGRTaG93ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGlubmVyIHN0YXR1cyBjb2xvclxuICAgICAgICAgKiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNwaW5uZXJTdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3Bpbm5lciBzaXplLiBQb3NzaWJsZSB2YWx1ZXM6IGB0aW55YCwgYHNtYWxsYCwgYG1lZGl1bWAgKGRlZmF1bHQpLCBgbGFyZ2VgLCBgZ2lhbnRgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNwaW5uZXJTaXplID0gJ21lZGl1bSc7XG4gICAgICAgIHRoaXMuaXNTcGlubmVyRXhpc3QgPSBmYWxzZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU3Bpbm5lckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwibmJTcGlubmVyXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpcmVjdGl2ZSB2YWx1ZSAtIHNob3cgb3IgaGlkZSBzcGlubmVyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudEZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRTaG93ID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYlNwaW5uZXJEaXJlY3RpdmUucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudEZhY3RvcnkgPSB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShOYlNwaW5uZXJDb21wb25lbnQpO1xuICAgICAgICBpZiAodGhpcy5zaG91bGRTaG93KSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJTcGlubmVyRGlyZWN0aXZlLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1NwaW5uZXJFeGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3RpdmVWaWV3LnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5pc1NwaW5uZXJFeGlzdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlNwaW5uZXJEaXJlY3RpdmUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NwaW5uZXJFeGlzdCkge1xuICAgICAgICAgICAgdGhpcy5zcGlubmVyID0gdGhpcy5kaXJlY3RpdmVWaWV3LmNyZWF0ZUNvbXBvbmVudCh0aGlzLmNvbXBvbmVudEZhY3RvcnkpO1xuICAgICAgICAgICAgdGhpcy5zZXRJbnN0YW5jZUlucHV0cyh0aGlzLnNwaW5uZXIuaW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5zcGlubmVyLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQodGhpcy5kaXJlY3RpdmVFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIHRoaXMuc3Bpbm5lci5sb2NhdGlvbi5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuaXNTcGlubmVyRXhpc3QgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlNwaW5uZXJEaXJlY3RpdmUucHJvdG90eXBlLnNldEluc3RhbmNlSW5wdXRzID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgIGluc3RhbmNlLm1lc3NhZ2UgPSB0aGlzLnNwaW5uZXJNZXNzYWdlO1xuICAgICAgICB0eXBlb2YgdGhpcy5zcGlubmVyU3RhdHVzICE9PSAndW5kZWZpbmVkJyAmJiAoaW5zdGFuY2Uuc3RhdHVzID0gdGhpcy5zcGlubmVyU3RhdHVzKTtcbiAgICAgICAgdHlwZW9mIHRoaXMuc3Bpbm5lclNpemUgIT09ICd1bmRlZmluZWQnICYmIChpbnN0YW5jZS5zaXplID0gdGhpcy5zcGlubmVyU2l6ZSk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iU3Bpbm5lck1lc3NhZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNwaW5uZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcInNwaW5uZXJNZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYlNwaW5uZXJTdGF0dXMnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNwaW5uZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcInNwaW5uZXJTdGF0dXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iU3Bpbm5lclNpemUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNwaW5uZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcInNwaW5uZXJTaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYlNwaW5uZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iU3Bpbm5lckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwibmJTcGlubmVyXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubmItc3Bpbm5lci1jb250YWluZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlNwaW5uZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcImlzU3Bpbm5lckV4aXN0XCIsIHZvaWQgMCk7XG4gICAgTmJTcGlubmVyRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7IHNlbGVjdG9yOiAnW25iU3Bpbm5lcl0nIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1ZpZXdDb250YWluZXJSZWYsXG4gICAgICAgICAgICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgICAgICBFbGVtZW50UmVmXSlcbiAgICBdLCBOYlNwaW5uZXJEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlNwaW5uZXJEaXJlY3RpdmU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJTcGlubmVyTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU3Bpbm5lck1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJTcGlubmVyTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHBvcnRzOiBbTmJTcGlubmVyQ29tcG9uZW50LCBOYlNwaW5uZXJEaXJlY3RpdmVdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJTcGlubmVyQ29tcG9uZW50LCBOYlNwaW5uZXJEaXJlY3RpdmVdLFxuICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbTmJTcGlubmVyQ29tcG9uZW50XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlNwaW5uZXJNb2R1bGUpO1xuICAgIHJldHVybiBOYlNwaW5uZXJNb2R1bGU7XG59KCkpO1xuXG52YXIgTkJfU1RFUFBFUiA9IG5ldyBJbmplY3Rpb25Ub2tlbignTmVidWxhciBTdGVwcGVyIENvbXBvbmVudCcpO1xuXG4vKipcbiAqIENvbXBvbmVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGhpbiAgdGhlIGA8bmItc3RlcHBlcj5gIGNvbXBvbmVudC5cbiAqIENvbnRhaW5lciBmb3IgYSBzdGVwXG4gKi9cbnZhciBOYlN0ZXBDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTdGVwQ29tcG9uZW50KHN0ZXBwZXIpIHtcbiAgICAgICAgdGhpcy5faGlkZGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmludGVyYWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGVwcGVyID0gc3RlcHBlcjtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU3RlcENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGlkZGVuXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgc3RlcCB3aWxsIGJlIGRpc3BsYXllZCBpbiB3aXphcmRcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oaWRkZW47XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRkZW4gPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTdGVwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0xhYmVsVGVtcGxhdGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgdGhhdCBsYWJlbCBpcyBhIFRlbXBsYXRlUmVmLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIGJvb2xlYW5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYWJlbCBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTdGVwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb21wbGV0ZWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBzdGVwIGlzIG1hcmtlZCBhcyBjb21wbGV0ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29tcGxldGVkIHx8IHRoaXMuaXNDb21wbGV0ZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTdGVwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0NvbXBsZXRlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RlcENvbnRyb2wgPyB0aGlzLnN0ZXBDb250cm9sLnZhbGlkICYmIHRoaXMuaW50ZXJhY3RlZCA6IHRoaXMuaW50ZXJhY3RlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogTWFyayBzdGVwIGFzIHNlbGVjdGVkXG4gICAgICogKi9cbiAgICBOYlN0ZXBDb21wb25lbnQucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGVwcGVyLnNlbGVjdGVkID0gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlc2V0IHN0ZXAgYW5kIHN0ZXBDb250cm9sIHN0YXRlXG4gICAgICogKi9cbiAgICBOYlN0ZXBDb21wb25lbnQucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmludGVyYWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc3RlcENvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcENvbnRyb2wucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZChUZW1wbGF0ZVJlZiwgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbiAgICBdLCBOYlN0ZXBDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRlbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlN0ZXBDb21wb25lbnQucHJvdG90eXBlLCBcInN0ZXBDb250cm9sXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJTdGVwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYWJlbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJTdGVwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJoaWRkZW5cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlN0ZXBDb21wb25lbnQucHJvdG90eXBlLCBcImNvbXBsZXRlZFwiLCBudWxsKTtcbiAgICBOYlN0ZXBDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc3RlcCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLXRlbXBsYXRlPlxcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgPC9uZy10ZW1wbGF0ZT5cXG4gIFwiXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDAsIEluamVjdChOQl9TVEVQUEVSKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICBdLCBOYlN0ZXBDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlN0ZXBDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFN0ZXBwZXIgY29tcG9uZW50XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgc3RlcHBlci9zdGVwcGVyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlN0ZXBwZXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU3RlcHBlck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogSWYgc3RlcCBsYWJlbCBpcyBzdHJpbmcgeW91IGNhbiBwYXNzIGl0IGFzIGBsYWJlbGAgYXR0cmlidXRlLiBPdGhlcndpc2UgbmctdGVtcGxhdGUgc2hvdWxkIGJlIHVzZWQ6XG4gKiBgYGBodG1sXG4gKiAvLyAuLi5cbiAqIDxuYi1zdGVwcGVyIG9yaWVudGF0aW9uPVwiaG9yaXpvbnRhbFwiPlxuICogICA8bmItc3RlcCBsYWJlbD1cInN0ZXAgbnVtYmVyIG9uZVwiPlxuICogICAgICAgLy8gLi4uIHN0ZXAgY29udGVudCBoZXJlXG4gKiAgIDwvbmItc3RlcD5cbiAqICAgPG5iLXN0ZXAgbGFiZWw9XCJzdGVwTGFiZWxcIj5cbiAqICAgICAgIDxuZy10ZW1wbGF0ZSAjc3RlcExhYmVsPlxuICogICAgICAgICAgIDxkaXY+XG4gKiAgICAgICAgICAgICAgIHN0ZXAgbnVtYmVyIHR3b1xuICogICAgICAgICAgIDwvZGl2PlxuICogICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAqICAgICAgIC8vIC4uLiBzdGVwIGNvbnRlbnQgaGVyZVxuICogICA8L25iLXN0ZXA+XG4gKiA8L25iLXN0ZXBwZXI+XG4gKiBgYGBcbiAqXG4gKiBXaGVuIGxpbmVhciBtb2RlIGVuYWJsZWQgdXNlciBjYW4ndCBtb3ZlIGZvcndhcmQgdW5sZXNzIGN1cnJlbnQgc3RlcCBpcyBjb21wbGV0ZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoTGluZWFyLCBzdGVwcGVyL3N0ZXBwZXItbGluZWFyLmNvbXBvbmVudClcbiAqXG4gKiBTcGVjaWZ5IGBbc3RlcENvbnRyb2xdPVwiZm9ybVwiYCBhbmQgc3RlcHBlciBhbGxvdyBnbyB0byB0aGUgbmV4dCBzdGVwIG9ubHkgaWYgZm9ybSBpcyB2YWxpZC5cbiAqIFlvdSBjYW4gZGlzYWJsZSBpdCB2aWEgYGxpbmVhcmAgbW9kZSBzZXR0aW5nLlxuICogYGBgaHRtbFxuICogLy8gLi4uXG4gKiA8bmItc3RlcHBlciAgb3JpZW50YXRpb249XCJob3Jpem9udGFsXCI+XG4gKiAgIDxuYi1zdGVwIGxhYmVsPVwic3RlcCBudW1iZXIgb25lXCIgW3N0ZXBDb250cm9sXT1cImZvcm1cIj5cbiAqICAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cImZvcm1cIj5cbiAqICAgICAgIC8vIC4uLlxuICogICAgIDwvZm9ybT5cbiAqICAgPC9uYi1zdGVwPlxuICogICAgLy8gLi4uXG4gKiA8L25iLXN0ZXBwZXI+XG4gKiBgYGBcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFZhbGlkYXRpb24sIHN0ZXBwZXIvc3RlcHBlci12YWxpZGF0aW9uLmNvbXBvbmVudClcbiAqXG4gKiBTdGVwcGVyIGNvbXBvbmVudCBoYXMgdHdvIGxheW91dCBvcHRpb25zIC0gYHZlcnRpY2FsYCAmIGBob3Jpem9udGFsYFxuICogQHN0YWNrZWQtZXhhbXBsZShWZXJ0aWNhbCwgc3RlcHBlci9zdGVwcGVyLXZlcnRpY2FsLmNvbXBvbmVudClcbiAqXG4gKiBgZGlzYWJsZVN0ZXBOYXZpZ2F0aW9uYCBkaXNhYmxlcyBuYXZpZ2F0aW9uIGJ5IGNsaWNraW5nIG9uIHN0ZXBzLCBzbyB1c2VyIGNhbiBuYXZpZ2F0ZSBvbmx5IHVzaW5nXG4gKiAnbmJTdGVwcGVyUHJldmlvdXMnIGFuZCAnbmJTdGVwcGVyTmV4dCcgYnV0dG9ucy5cbiAqIEBzdGFja2VkLWV4YW1wbGUoRGlzYWJsZWQgc3RlcHMgbmF2aWdhdGlvbiwgc3RlcHBlci9zdGVwcGVyLWRpc2FibGVkLXN0ZXAtbmF2LmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogc3RlcHBlci1zdGVwLXRleHQtY29sb3I6XG4gKiBzdGVwcGVyLXN0ZXAtdGV4dC1mb250LWZhbWlseTpcbiAqIHN0ZXBwZXItc3RlcC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHN0ZXBwZXItc3RlcC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc3RlcHBlci1zdGVwLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzdGVwcGVyLXN0ZXAtYWN0aXZlLXRleHQtY29sb3I6XG4gKiBzdGVwcGVyLXN0ZXAtY29tcGxldGVkLXRleHQtY29sb3I6XG4gKiBzdGVwcGVyLXN0ZXAtaW5kZXgtYm9yZGVyLWNvbG9yOlxuICogc3RlcHBlci1zdGVwLWluZGV4LWJvcmRlci1zdHlsZTpcbiAqIHN0ZXBwZXItc3RlcC1pbmRleC1ib3JkZXItd2lkdGg6XG4gKiBzdGVwcGVyLXN0ZXAtaW5kZXgtYm9yZGVyLXJhZGl1czpcbiAqIHN0ZXBwZXItc3RlcC1pbmRleC13aWR0aDpcbiAqIHN0ZXBwZXItc3RlcC1pbmRleC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogc3RlcHBlci1zdGVwLWluZGV4LWNvbXBsZXRlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc3RlcHBlci1zdGVwLWluZGV4LWNvbXBsZXRlZC1ib3JkZXItY29sb3I6XG4gKiBzdGVwcGVyLXN0ZXAtaW5kZXgtY29tcGxldGVkLXRleHQtY29sb3I6XG4gKiBzdGVwcGVyLWNvbm5lY3Rvci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc3RlcHBlci1jb25uZWN0b3ItY29tcGxldGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzdGVwcGVyLWhvcml6b250YWwtY29ubmVjdG9yLW1hcmdpbjpcbiAqIHN0ZXBwZXItdmVydGljYWwtY29ubmVjdG9yLW1hcmdpbjpcbiAqIHN0ZXBwZXItc3RlcC1jb250ZW50LXBhZGRpbmc6XG4gKi9cbnZhciBOYlN0ZXBwZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTdGVwcGVyQ29tcG9uZW50KCkge1xuICAgICAgICB0aGlzLl9zZWxlY3RlZEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fZGlzYWJsZVN0ZXBOYXZpZ2F0aW9uID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdGVwcGVyIG9yaWVudGF0aW9uIC0gYGhvcml6b250YWxgfGB2ZXJ0aWNhbGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JpZW50YXRpb24gPSAnaG9yaXpvbnRhbCc7XG4gICAgICAgIHRoaXMuX2xpbmVhciA9IHRydWU7XG4gICAgfVxuICAgIE5iU3RlcHBlckNvbXBvbmVudF8xID0gTmJTdGVwcGVyQ29tcG9uZW50O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlN0ZXBwZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkSW5kZXhcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2VsZWN0ZWQgc3RlcCBpbmRleFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRJbmRleDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGVwcykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcmtDdXJyZW50U3RlcEludGVyYWN0ZWQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbkJlU2VsZWN0ZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlU3RlcE5hdmlnYXRpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlU3RlcE5hdmlnYXRpb247XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyBuYXZpZ2F0aW9uIGJ5IGNsaWNraW5nIG9uIHN0ZXBzLiBGYWxzZSBieSBkZWZhdWx0XG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlU3RlcE5hdmlnYXRpb24gPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWxlY3RlZCBzdGVwIGNvbXBvbmVudFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGVwcyA/IHRoaXMuc3RlcHMudG9BcnJheSgpW3RoaXMuc2VsZWN0ZWRJbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHN0ZXApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGVwcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHRoaXMuc3RlcHMudG9BcnJheSgpLmluZGV4T2Yoc3RlcCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlN0ZXBwZXJDb21wb25lbnQucHJvdG90eXBlLCBcImxpbmVhclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVhcjtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbG93IG1vdmluZyBmb3J3YXJkIG9ubHkgaWYgdGhlIGN1cnJlbnQgc3RlcCBpcyBjb21wbGV0ZVxuICAgICAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fbGluZWFyID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU3RlcHBlckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmVydGljYWxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWVudGF0aW9uID09PSAndmVydGljYWwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJob3Jpem9udGFsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBOYXZpZ2F0ZSB0byBuZXh0IHN0ZXBcbiAgICAgKiAqL1xuICAgIE5iU3RlcHBlckNvbXBvbmVudC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gTWF0aC5taW4odGhpcy5zZWxlY3RlZEluZGV4ICsgMSwgdGhpcy5zdGVwcy5sZW5ndGggLSAxKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIHByZXZpb3VzIHN0ZXBcbiAgICAgKiAqL1xuICAgIE5iU3RlcHBlckNvbXBvbmVudC5wcm90b3R5cGUucHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IE1hdGgubWF4KHRoaXMuc2VsZWN0ZWRJbmRleCAtIDEsIDApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVzZXQgc3RlcHBlciBhbmQgc3RlcENvbnRyb2xzIHRvIGluaXRpYWwgc3RhdGVcbiAgICAgKiAqL1xuICAgIE5iU3RlcHBlckNvbXBvbmVudC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPSAwO1xuICAgICAgICB0aGlzLnN0ZXBzLmZvckVhY2goZnVuY3Rpb24gKHN0ZXApIHsgcmV0dXJuIHN0ZXAucmVzZXQoKTsgfSk7XG4gICAgfTtcbiAgICBOYlN0ZXBwZXJDb21wb25lbnQucHJvdG90eXBlLmlzU3RlcFNlbGVjdGVkID0gZnVuY3Rpb24gKHN0ZXApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWQgPT09IHN0ZXA7XG4gICAgfTtcbiAgICAvKlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiovXG4gICAgTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZS5nZXRTdGVwVGVtcGxhdGUgPSBmdW5jdGlvbiAoc3RlcCkge1xuICAgICAgICBpZiAoc3RlcC5pc0xhYmVsVGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGVwLmxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZS5pc1N0ZXBWYWxpZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwcy50b0FycmF5KClbaW5kZXhdLmNvbXBsZXRlZDtcbiAgICB9O1xuICAgIE5iU3RlcHBlckNvbXBvbmVudC5wcm90b3R5cGUuY2FuQmVTZWxlY3RlZCA9IGZ1bmN0aW9uIChpbmRleFRvQ2hlY2spIHtcbiAgICAgICAgdmFyIG5vU3RlcHMgPSAhdGhpcy5zdGVwcyB8fCB0aGlzLnN0ZXBzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgaWYgKG5vU3RlcHMgfHwgaW5kZXhUb0NoZWNrIDwgMCB8fCBpbmRleFRvQ2hlY2sgPj0gdGhpcy5zdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXhUb0NoZWNrIDw9IHRoaXMuc2VsZWN0ZWRJbmRleCB8fCAhdGhpcy5saW5lYXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpc0FsbFN0ZXBzVmFsaWQgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5zZWxlY3RlZEluZGV4OyBpIDwgaW5kZXhUb0NoZWNrOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N0ZXBWYWxpZChpKSkge1xuICAgICAgICAgICAgICAgIGlzQWxsU3RlcHNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0FsbFN0ZXBzVmFsaWQ7XG4gICAgfTtcbiAgICBOYlN0ZXBwZXJDb21wb25lbnQucHJvdG90eXBlLm1hcmtDdXJyZW50U3RlcEludGVyYWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgTmJTdGVwcGVyQ29tcG9uZW50XzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG4gICAgXSwgTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZEluZGV4XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlU3RlcE5hdmlnYXRpb25cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOYlN0ZXBDb21wb25lbnQpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iU3RlcENvbXBvbmVudF0pXG4gICAgXSwgTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlN0ZXBwZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm9yaWVudGF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlN0ZXBwZXJDb21wb25lbnQucHJvdG90eXBlLCBcImxpbmVhclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnZlcnRpY2FsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTdGVwcGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmhvcml6b250YWwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlN0ZXBwZXJDb21wb25lbnQucHJvdG90eXBlLCBcImhvcml6b250YWxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIENvbnRlbnRDaGlsZHJlbihOYlN0ZXBDb21wb25lbnQpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iU3RlcHBlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RlcHNcIiwgdm9pZCAwKTtcbiAgICBOYlN0ZXBwZXJDb21wb25lbnQgPSBOYlN0ZXBwZXJDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zdGVwcGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuZy10ZW1wbGF0ZT48bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLXN0ZXBcXFwiPjwvbmctY29udGVudD48L25nLXRlbXBsYXRlPlxcbjxkaXYgY2xhc3M9XFxcImhlYWRlclxcXCI+XFxuICA8bmctY29udGFpbmVyICpuZ0Zvcj1cXFwibGV0IHN0ZXAgb2Ygc3RlcHM7IGxldCBpbmRleCA9IGluZGV4OyBsZXQgZmlyc3QgPSBmaXJzdFxcXCI+XFxuXFxuICAgIDxkaXYgKm5nSWY9XFxcIiFmaXJzdCAmJiAhc3RlcC5oaWRkZW5cXFwiXFxuICAgICAgICAgW2NsYXNzLmNvbm5lY3Rvci1wYXN0XT1cXFwiaW5kZXggPD0gc2VsZWN0ZWRJbmRleFxcXCJcXG4gICAgICAgICBjbGFzcz1cXFwiY29ubmVjdG9yXFxcIj48L2Rpdj5cXG5cXG4gICAgPGRpdiAqbmdJZj1cXFwiIXN0ZXAuaGlkZGVuXFxcIiBjbGFzcz1cXFwic3RlcFxcXCJcXG4gICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdPVxcXCJpc1N0ZXBTZWxlY3RlZChzdGVwKVxcXCJcXG4gICAgICAgICBbY2xhc3MuY29tcGxldGVkXT1cXFwiIWlzU3RlcFNlbGVjdGVkKHN0ZXApICYmIHN0ZXAuY29tcGxldGVkXFxcIlxcbiAgICAgICAgIFtjbGFzcy5ub25pbnRlcmFjdGl2ZV09XFxcImRpc2FibGVTdGVwTmF2aWdhdGlvblxcXCJcXG4gICAgICAgICAoY2xpY2spPVxcXCIhZGlzYWJsZVN0ZXBOYXZpZ2F0aW9uICYmIHN0ZXAuc2VsZWN0KClcXFwiPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImxhYmVsLWluZGV4XFxcIj5cXG4gICAgICAgIDxzcGFuICpuZ0lmPVxcXCIhc3RlcC5jb21wbGV0ZWQgfHwgaXNTdGVwU2VsZWN0ZWQoc3RlcClcXFwiPnt7IGluZGV4ICsgMSB9fTwvc3Bhbj5cXG4gICAgICAgIDxuYi1pY29uICpuZ0lmPVxcXCIhaXNTdGVwU2VsZWN0ZWQoc3RlcCkgJiYgc3RlcC5jb21wbGV0ZWRcXFwiIGljb249XFxcImNoZWNrbWFyay1vdXRsaW5lXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiPlxcbiAgICAgICAgPC9uYi1pY29uPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImxhYmVsXFxcIj5cXG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XFxcInN0ZXAuaXNMYWJlbFRlbXBsYXRlXFxcIj5cXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cXFwiZ2V0U3RlcFRlbXBsYXRlKHN0ZXApXFxcIj48L25nLWNvbnRhaW5lcj5cXG4gICAgICAgIDwvbmctY29udGFpbmVyPlxcbiAgICAgICAgPHNwYW4gKm5nSWY9XFxcIiFzdGVwLmlzTGFiZWxUZW1wbGF0ZVxcXCI+e3sgc3RlcC5sYWJlbCB9fTwvc3Bhbj5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICA8L25nLWNvbnRhaW5lcj5cXG48L2Rpdj5cXG48ZGl2IGNsYXNzPVxcXCJzdGVwLWNvbnRlbnRcXFwiPlxcbiAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XFxcInNlbGVjdGVkPy5jb250ZW50XFxcIj48L25nLWNvbnRhaW5lcj5cXG48L2Rpdj5cXG5cIixcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTkJfU1RFUFBFUiwgdXNlRXhpc3Rpbmc6IE5iU3RlcHBlckNvbXBvbmVudF8xIH1dLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdCguaG9yaXpvbnRhbCkgLmhlYWRlciAuc3RlcHtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Omhvc3QoLmhvcml6b250YWwpIC5oZWFkZXIgLmNvbm5lY3RvcntoZWlnaHQ6MnB4fTpob3N0KC5ob3Jpem9udGFsKSAubGFiZWwtaW5kZXh7bWFyZ2luLWJvdHRvbToxMHB4fTpob3N0KC52ZXJ0aWNhbCl7ZGlzcGxheTpmbGV4O2hlaWdodDoxMDAlfTpob3N0KC52ZXJ0aWNhbCkgLmhlYWRlcntmbGV4LWRpcmVjdGlvbjpjb2x1bW59Omhvc3QoLnZlcnRpY2FsKSAuaGVhZGVyIC5sYWJlbHttYXJnaW46MCAxMHB4fTpob3N0KC52ZXJ0aWNhbCkgLmhlYWRlciAuY29ubmVjdG9ye3dpZHRoOjJweH0uaGVhZGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O21hcmdpbi1ib3R0b206MTBweH0uaGVhZGVyIC5jb25uZWN0b3J7ZmxleDphdXRvfS5oZWFkZXIgLnN0ZXB7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtjdXJzb3I6cG9pbnRlcn0uaGVhZGVyIC5zdGVwLm5vbmludGVyYWN0aXZle2N1cnNvcjpkZWZhdWx0fS5oZWFkZXIgLmxhYmVsLWluZGV4e2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcn0uaGVhZGVyIC5sYWJlbHt3aWR0aDptYXgtY29udGVudH1cXG5cIl1cbiAgICAgICAgfSlcbiAgICBdLCBOYlN0ZXBwZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlN0ZXBwZXJDb21wb25lbnQ7XG59KCkpO1xuXG52YXIgTmJTdGVwcGVyTmV4dERpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlN0ZXBwZXJOZXh0RGlyZWN0aXZlKHN0ZXBwZXIpIHtcbiAgICAgICAgdGhpcy5zdGVwcGVyID0gc3RlcHBlcjtcbiAgICAgICAgdGhpcy50eXBlID0gJ3N1Ym1pdCc7XG4gICAgfVxuICAgIE5iU3RlcHBlck5leHREaXJlY3RpdmUucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RlcHBlci5uZXh0KCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSwgSG9zdEJpbmRpbmcoJ2F0dHIudHlwZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU3RlcHBlck5leHREaXJlY3RpdmUucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdExpc3RlbmVyKCdjbGljaycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iU3RlcHBlck5leHREaXJlY3RpdmUucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgbnVsbCk7XG4gICAgTmJTdGVwcGVyTmV4dERpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdidXR0b25bbmJTdGVwcGVyTmV4dF0nLFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYlN0ZXBwZXJDb21wb25lbnRdKVxuICAgIF0sIE5iU3RlcHBlck5leHREaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlN0ZXBwZXJOZXh0RGlyZWN0aXZlO1xufSgpKTtcbnZhciBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZShzdGVwcGVyKSB7XG4gICAgICAgIHRoaXMuc3RlcHBlciA9IHN0ZXBwZXI7XG4gICAgICAgIHRoaXMudHlwZSA9ICdidXR0b24nO1xuICAgIH1cbiAgICBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGVwcGVyLnByZXZpb3VzKCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSwgSG9zdEJpbmRpbmcoJ2F0dHIudHlwZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU3RlcHBlclByZXZpb3VzRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignY2xpY2snKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZS5wcm90b3R5cGUsIFwib25DbGlja1wiLCBudWxsKTtcbiAgICBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdidXR0b25bbmJTdGVwcGVyUHJldmlvdXNdJyxcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJTdGVwcGVyQ29tcG9uZW50XSlcbiAgICBdLCBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iU3RlcHBlclByZXZpb3VzRGlyZWN0aXZlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iU3RlcHBlck1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlN0ZXBwZXJNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iU3RlcHBlck1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJJY29uTW9kdWxlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgIE5iU3RlcHBlckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBOYlN0ZXBDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgTmJTdGVwcGVyTmV4dERpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgTmJTdGVwcGVyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIE5iU3RlcENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBOYlN0ZXBwZXJOZXh0RGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIE5iU3RlcHBlclByZXZpb3VzRGlyZWN0aXZlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlN0ZXBwZXJNb2R1bGUpO1xuICAgIHJldHVybiBOYlN0ZXBwZXJNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIEFuIGFjY29yZGlvbiBhbGxvd3MgdG8gdG9nZ2xlIHRoZSBkaXNwbGF5IG9mIHNlY3Rpb25zIG9mIGNvbnRlbnRcbiAqXG4gKiBCYXNpYyBleGFtcGxlXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBhY2NvcmRpb24vYWNjb3JkaW9uLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBgYGB0c1xuICogPG5iLWFjY29yZGlvbj5cbiAqICA8bmItYWNjb3JkaW9uLWl0ZW0+XG4gKiAgIDxuYi1hY2NvcmRpb24taXRlbS1oZWFkZXI+UHJvZHVjdCBEZXRhaWxzPC9uYi1hY2NvcmRpb24taXRlbS1oZWFkZXI+XG4gKiAgIDxuYi1hY2NvcmRpb24taXRlbS1ib2R5PlxuICogICAgIEl0ZW0gQ29udGVudFxuICogICA8L25iLWFjY29yZGlvbi1pdGVtLWJvZHk+XG4gKiAgPC9uYi1hY2NvcmRpb24taXRlbT5cbiAqIDwvbmItYWNjb3JkaW9uPlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkFjY29yZGlvbk1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJBY2NvcmRpb25Nb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIFdpdGggYG11bHRpYCBtb2RlIGFjY29yZGlvbiBjYW4gaGF2ZSBtdWx0aXBsZSBpdGVtcyBleHBhbmRlZDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTXVsdGlwbGUgZXhwYW5kZWQgaXRlbXMsIGFjY29yZGlvbi9hY2NvcmRpb24tbXVsdGkuY29tcG9uZW50KVxuICpcbiAqIGBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnRgIGhhcyBzZXZlcmFsIG1ldGhvZHMsIGZvciBleGFtcGxlIGl0IGlzIHBvc3NpYmxlIHRvIHRyaWdnZXIgaXRlbSBjbGljay90b2dnbGU6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEV4cGFuZCBBUEksIGFjY29yZGlvbi9hY2NvcmRpb24tdG9nZ2xlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogYWNjb3JkaW9uLWJvcmRlci1yYWRpdXM6XG4gKiBhY2NvcmRpb24tcGFkZGluZzpcbiAqIGFjY29yZGlvbi1zaGFkb3c6XG4gKiBhY2NvcmRpb24taGVhZGVyLXRleHQtY29sb3I6XG4gKiBhY2NvcmRpb24taGVhZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBhY2NvcmRpb24taGVhZGVyLXRleHQtZm9udC1zaXplOlxuICogYWNjb3JkaW9uLWhlYWRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYWNjb3JkaW9uLWhlYWRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYWNjb3JkaW9uLWhlYWRlci1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYWNjb3JkaW9uLWhlYWRlci1ib3JkZXItY29sb3I6XG4gKiBhY2NvcmRpb24taGVhZGVyLWJvcmRlci1zdHlsZTpcbiAqIGFjY29yZGlvbi1oZWFkZXItYm9yZGVyLXdpZHRoOlxuICogYWNjb3JkaW9uLWl0ZW0tYmFja2dyb3VuZC1jb2xvcjpcbiAqIGFjY29yZGlvbi1pdGVtLXRleHQtY29sb3I6XG4gKiBhY2NvcmRpb24taXRlbS10ZXh0LWZvbnQtZmFtaWx5OlxuICogYWNjb3JkaW9uLWl0ZW0tdGV4dC1mb250LXNpemU6XG4gKiBhY2NvcmRpb24taXRlbS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYWNjb3JkaW9uLWl0ZW0tdGV4dC1saW5lLWhlaWdodDpcbiAqL1xudmFyIE5iQWNjb3JkaW9uQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQWNjb3JkaW9uQ29tcG9uZW50KCkge1xuICAgICAgICB0aGlzLm9wZW5DbG9zZUl0ZW1zID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5tdWx0aVZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFjY29yZGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwibXVsdGlcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogIEFsbG93IG11bHRpcGxlIGl0ZW1zIHRvIGJlIGV4cGFuZGVkIGF0IHRoZSBzYW1lIHRpbWUuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tdWx0aVZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMubXVsdGlWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBPcGVucyBhbGwgZW5hYmxlZCBhY2NvcmRpb24gaXRlbXMuXG4gICAgICovXG4gICAgTmJBY2NvcmRpb25Db21wb25lbnQucHJvdG90eXBlLm9wZW5BbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm11bHRpKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5DbG9zZUl0ZW1zLm5leHQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbG9zZXMgYWxsIGVuYWJsZWQgYWNjb3JkaW9uIGl0ZW1zLlxuICAgICAqL1xuICAgIE5iQWNjb3JkaW9uQ29tcG9uZW50LnByb3RvdHlwZS5jbG9zZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vcGVuQ2xvc2VJdGVtcy5uZXh0KHRydWUpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCdtdWx0aScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJBY2NvcmRpb25Db21wb25lbnQucHJvdG90eXBlLCBcIm11bHRpXCIsIG51bGwpO1xuICAgIE5iQWNjb3JkaW9uQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWFjY29yZGlvbicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1hY2NvcmRpb24taXRlbVxcXCI+PC9uZy1jb250ZW50PlxcbiAgXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICB9KVxuICAgIF0sIE5iQWNjb3JkaW9uQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJBY2NvcmRpb25Db21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENvbXBvbmVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGhpbiBgPG5iLWFjY29yZGlvbj5gIGNvbXBvbmVudFxuICovXG52YXIgTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudChhY2NvcmRpb24sIGNkKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uID0gYWNjb3JkaW9uO1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuZXZlciB0aGUgZXhwYW5kZWQgc3RhdGUgb2YgdGhlIGFjY29yZGlvbiBjaGFuZ2VzLlxuICAgICAgICAgKiBQcmltYXJpbHkgdXNlZCB0byBmYWNpbGl0YXRlIHR3by13YXkgYmluZGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29sbGFwc2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRWYWx1ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzYWJsZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sbGFwc2VkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEl0ZW0gaXMgY29sbGFwc2UgKGB0cnVlYCBieSBkZWZhdWx0KVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZWRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZWRDaGFuZ2UuZW1pdCh0aGlzLmNvbGxhcHNlZFZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJdGVtIGlzIGV4cGFuZGVkIChgZmFsc2VgIGJ5IGRlZmF1bHQpXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuY29sbGFwc2VkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkVmFsdWUgPSAhY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEl0ZW0gaXMgZGlzYWJsZWQgYW5kIGNhbm5vdCBiZSBvcGVuZWQuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZFZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIE9wZW4vY2xvc2UgdGhlIGl0ZW1cbiAgICAgKi9cbiAgICBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRoaXMgdGVtcG9yYXJ5IHZhcmlhYmxlIGFzIGBvcGVuQ2xvc2VJdGVtcy5uZXh0YCB3aWxsIGNoYW5nZSBjdXJyZW50IHZhbHVlIHdlIG5lZWQgdG8gc2F2ZVxuICAgICAgICAgICAgdmFyIHdpbGxTZXQgPSAhdGhpcy5jb2xsYXBzZWQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWNjb3JkaW9uLm11bHRpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY2NvcmRpb24ub3BlbkNsb3NlSXRlbXMubmV4dCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkID0gd2lsbFNldDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgaXRlbS5cbiAgICAgKi9cbiAgICBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLmRpc2FibGVkICYmICh0aGlzLmNvbGxhcHNlZCA9IGZhbHNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbGxhcHNlIHRoZSBpdGVtLlxuICAgICAqL1xuICAgIE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLmRpc2FibGVkICYmICh0aGlzLmNvbGxhcHNlZCA9IHRydWUpO1xuICAgIH07XG4gICAgTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5hY2NvcmRpb24ub3BlbkNsb3NlSXRlbXNcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGNvbGxhcHNlZCkge1xuICAgICAgICAgICAgIV90aGlzLmRpc2FibGVkICYmIChfdGhpcy5jb2xsYXBzZWQgPSBjb2xsYXBzZWQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlLm5leHQodHJ1ZSk7XG4gICAgfTtcbiAgICBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLmludmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbUludmFsaWRhdGUubmV4dCh0cnVlKTtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnY29sbGFwc2VkJyksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5jb2xsYXBzZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29sbGFwc2VkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnZXhwYW5kZWQnKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmV4cGFuZGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnZGlzYWJsZWQnKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmRpc2FibGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcImNvbGxhcHNlZENoYW5nZVwiLCB2b2lkIDApO1xuICAgIE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1hY2NvcmRpb24taXRlbScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1hY2NvcmRpb24taXRlbS1oZWFkZXJcXFwiPjwvbmctY29udGVudD5cXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1hY2NvcmRpb24taXRlbS1ib2R5XFxcIj48L25nLWNvbnRlbnQ+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSgwLCBIb3N0KCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iQWNjb3JkaW9uQ29tcG9uZW50LCBDaGFuZ2VEZXRlY3RvclJlZl0pXG4gICAgXSwgTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIGFjY29yZGlvbkl0ZW1Cb2R5VHJpZ2dlciA9IHRyaWdnZXIoJ2FjY29yZGlvbkl0ZW1Cb2R5JywgW1xuICAgIHN0YXRlKCdjb2xsYXBzZWQnLCBzdHlsZSh7XG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgICAgIGhlaWdodDogMCxcbiAgICB9KSksXG4gICAgc3RhdGUoJ2V4cGFuZGVkJywgc3R5bGUoe1xuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJyxcbiAgICB9KSksXG4gICAgdHJhbnNpdGlvbignY29sbGFwc2VkID0+IGV4cGFuZGVkJywgYW5pbWF0ZSgnMTAwbXMgZWFzZS1pbicpKSxcbiAgICB0cmFuc2l0aW9uKCdleHBhbmRlZCA9PiBjb2xsYXBzZWQnLCBhbmltYXRlKCcxMDBtcyBlYXNlLW91dCcpKSxcbl0pO1xuLyoqXG4gKiBDb21wb25lbnQgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoaW4gYDxuYi1hY2NvcmRpb24taXRlbT5gIGNvbXBvbmVudFxuICovXG52YXIgTmJBY2NvcmRpb25JdGVtQm9keUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkFjY29yZGlvbkl0ZW1Cb2R5Q29tcG9uZW50KGFjY29yZGlvbkl0ZW0sIGNkKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbSA9IGFjY29yZGlvbkl0ZW07XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFjY29yZGlvbkl0ZW1Cb2R5Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3JkaW9uSXRlbS5jb2xsYXBzZWQgPyAnY29sbGFwc2VkJyA6ICdleHBhbmRlZCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQWNjb3JkaW9uSXRlbUJvZHlDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW0uYWNjb3JkaW9uSXRlbUludmFsaWRhdGVcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2QubWFya0ZvckNoZWNrKCk7IH0pO1xuICAgIH07XG4gICAgTmJBY2NvcmRpb25JdGVtQm9keUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYkFjY29yZGlvbkl0ZW1Cb2R5Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWFjY29yZGlvbi1pdGVtLWJvZHknLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgW0BhY2NvcmRpb25JdGVtQm9keV09XFxcInsgdmFsdWU6IHN0YXRlIH1cXFwiPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW0tYm9keVxcXCI+XFxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBhbmltYXRpb25zOiBbYWNjb3JkaW9uSXRlbUJvZHlUcmlnZ2VyXSxcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDAsIEhvc3QoKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50LCBDaGFuZ2VEZXRlY3RvclJlZl0pXG4gICAgXSwgTmJBY2NvcmRpb25JdGVtQm9keUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQWNjb3JkaW9uSXRlbUJvZHlDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENvbXBvbmVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGhpbiBgPG5iLWFjY29yZGlvbi1pdGVtPmAgY29tcG9uZW50XG4gKi9cbnZhciBOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50KGFjY29yZGlvbkl0ZW0sIGNkKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbSA9IGFjY29yZGlvbkl0ZW07XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcImlzQ29sbGFwc2VkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NvcmRpb25JdGVtLmNvbGxhcHNlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5hY2NvcmRpb25JdGVtLmNvbGxhcHNlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiYmFibGVcIiwge1xuICAgICAgICAvLyBpc3N1ZSAjNzk0XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3JkaW9uSXRlbS5kaXNhYmxlZCA/ICctMScgOiAnMCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NvcmRpb25JdGVtLmRpc2FibGVkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hY2NvcmRpb25JdGVtLnRvZ2dsZSgpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdjb2xsYXBzZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2V4cGFuZGVkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5hY2NvcmRpb25JdGVtLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmNkLm1hcmtGb3JDaGVjaygpOyB9KTtcbiAgICB9O1xuICAgIE5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFjY29yZGlvbi1pdGVtLWhlYWRlci1jb2xsYXBzZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0NvbGxhcHNlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFjY29yZGlvbi1pdGVtLWhlYWRlci1leHBhbmRlZCcpLFxuICAgICAgICBIb3N0QmluZGluZygnYXR0ci5hcmlhLWV4cGFuZGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdhdHRyLnRhYmluZGV4JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJiYWJsZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1kaXNhYmxlZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ2NsaWNrJyksXG4gICAgICAgIEhvc3RMaXN0ZW5lcigna2V5ZG93bi5zcGFjZScpLFxuICAgICAgICBIb3N0TGlzdGVuZXIoJ2tleWRvd24uZW50ZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcInRvZ2dsZVwiLCBudWxsKTtcbiAgICBOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItYWNjb3JkaW9uLWl0ZW0taGVhZGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLWFjY29yZGlvbi1pdGVtLXRpdGxlXFxcIj48L25nLWNvbnRlbnQ+XFxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItYWNjb3JkaW9uLWl0ZW0tZGVzY3JpcHRpb25cXFwiPjwvbmctY29udGVudD5cXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgICA8bmItaWNvbiBpY29uPVxcXCJjaGV2cm9uLWRvd24tb3V0bGluZVxcXCJcXG4gICAgICAgICAgICAgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIlxcbiAgICAgICAgICAgICBbQGV4cGFuc2lvbkluZGljYXRvcl09XFxcInN0YXRlXFxcIlxcbiAgICAgICAgICAgICAqbmdJZj1cXFwiIWRpc2FibGVkXFxcIlxcbiAgICAgICAgICAgICBjbGFzcz1cXFwiZXhwYW5zaW9uLWluZGljYXRvclxcXCI+XFxuICAgIDwvbmItaWNvbj5cXG4gIFwiLFxuICAgICAgICAgICAgYW5pbWF0aW9uczogW1xuICAgICAgICAgICAgICAgIHRyaWdnZXIoJ2V4cGFuc2lvbkluZGljYXRvcicsIFtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUoJ2V4cGFuZGVkJywgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ2NvbGxhcHNlZCA9PiBleHBhbmRlZCcsIGFuaW1hdGUoJzEwMG1zIGVhc2UtaW4nKSksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ2V4cGFuZGVkID0+IGNvbGxhcHNlZCcsIGFuaW1hdGUoJzEwMG1zIGVhc2Utb3V0JykpLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2N1cnNvcjpwb2ludGVyfTpob3N0OmZvY3Vze291dGxpbmU6MH1cXG5cIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fcGFyYW0oMCwgSG9zdCgpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQsIENoYW5nZURldGVjdG9yUmVmXSlcbiAgICBdLCBOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkFjY29yZGlvbkl0ZW1IZWFkZXJDb21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTkJfQUNDT1JESU9OX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJBY2NvcmRpb25Db21wb25lbnQsXG4gICAgTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50LFxuICAgIE5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudCxcbiAgICBOYkFjY29yZGlvbkl0ZW1Cb2R5Q29tcG9uZW50LFxuXTtcbnZhciBOYkFjY29yZGlvbk1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkFjY29yZGlvbk1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJBY2NvcmRpb25Nb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgTmJJY29uTW9kdWxlXSxcbiAgICAgICAgICAgIGV4cG9ydHM6IF9fc3ByZWFkQXJyYXlzKE5CX0FDQ09SRElPTl9DT01QT05FTlRTKSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogX19zcHJlYWRBcnJheXMoTkJfQUNDT1JESU9OX0NPTVBPTkVOVFMpLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkFjY29yZGlvbk1vZHVsZSk7XG4gICAgcmV0dXJuIE5iQWNjb3JkaW9uTW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBMaXN0IGlzIGEgY29udGFpbmVyIGNvbXBvbmVudCB0aGF0IHdyYXBzIGBuYi1saXN0LWl0ZW1gIGNvbXBvbmVudC5cbiAqXG4gKiBCYXNpYyBleGFtcGxlOlxuICogQHN0YWNrZWQtZXhhbXBsZShTaW1wbGUgbGlzdCwgbGlzdC9zaW1wbGUtbGlzdC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogYG5iLWxpc3QtaXRlbWAgYWNjZXB0cyBhcmJpdHJhcnkgY29udGVudCwgc28geW91IGNhbiBjcmVhdGUgYSBsaXN0IG9mIGFueSBjb21wb25lbnRzLlxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iTGlzdE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJMaXN0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBMaXN0IG9mIHVzZXJzOlxuICogQHN0YWNrZWQtZXhhbXBsZShVc2VycyBsaXN0LCBsaXN0L3VzZXJzLWxpc3Qtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBsaXN0LWl0ZW0tZGl2aWRlci1jb2xvcjpcbiAqIGxpc3QtaXRlbS1kaXZpZGVyLXN0eWxlOlxuICogbGlzdC1pdGVtLWRpdmlkZXItd2lkdGg6XG4gKiBsaXN0LWl0ZW0tcGFkZGluZzpcbiAqIGxpc3QtaXRlbS10ZXh0LWNvbG9yOlxuICogbGlzdC1pdGVtLWZvbnQtZmFtaWx5OlxuICogbGlzdC1pdGVtLWZvbnQtc2l6ZTpcbiAqIGxpc3QtaXRlbS1mb250LXdlaWdodDpcbiAqIGxpc3QtaXRlbS1saW5lLWhlaWdodDpcbiAqL1xudmFyIE5iTGlzdENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkxpc3RDb21wb25lbnQoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSb2xlIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb2xlID0gJ2xpc3QnO1xuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIucm9sZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicm9sZVwiLCB2b2lkIDApO1xuICAgIE5iTGlzdENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1saXN0JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItbGlzdC1pdGVtXFxcIj48L25nLWNvbnRlbnQ+XCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleDoxIDEgYXV0bztvdmVyZmxvdzphdXRvfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iTGlzdENvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iTGlzdENvbXBvbmVudDtcbn0oKSk7XG4vKipcbiAqIExpc3QgaXRlbSBjb21wb25lbnQgaXMgYSBncm91cGluZyBjb21wb25lbnQgdGhhdCBhY2NlcHRzIGFyYml0cmFyeSBjb250ZW50LlxuICogSXQgc2hvdWxkIGJlIGRpcmVjdCBjaGlsZCBvZiBgbmItbGlzdGAgY29tcG9uZXQuXG4gKi9cbnZhciBOYkxpc3RJdGVtQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iTGlzdEl0ZW1Db21wb25lbnQoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSb2xlIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb2xlID0gJ2xpc3RpdGVtJztcbiAgICB9XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIEhvc3RCaW5kaW5nKCdhdHRyLnJvbGUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkxpc3RJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyb2xlXCIsIHZvaWQgMCk7XG4gICAgTmJMaXN0SXRlbUNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1saXN0LWl0ZW0nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2ZsZXgtc2hyaW5rOjB9XFxuXCJdXG4gICAgICAgIH0pXG4gICAgXSwgTmJMaXN0SXRlbUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iTGlzdEl0ZW1Db21wb25lbnQ7XG59KCkpO1xuXG4vKipcbiAqIExpc3QgcGFnZXIgZGlyZWN0aXZlXG4gKlxuICogRGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gZGV0ZXJtaW5lIHBhZ2Ugb2YgY3VycmVudGx5IHZpZXdpbmcgaXRlbXMuXG4gKlxuICovXG52YXIgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogUGFnZSB0byBzdGFydCBjb3VudGluZyB3aXRoLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydFBhZ2UgPSAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgd2hlbiBhbm90aGVyIHBhZ2UgYmVjb21lIHZpc2libGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMpIHsgcmV0dXJuIF90aGlzLmNoZWNrRm9yUGFnZUNoYW5nZShlbnRyaWVzKTsgfSwgeyB0aHJlc2hvbGQ6IDAuNSB9KTtcbiAgICB9XG4gICAgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMubGlzdEl0ZW1zICYmIHRoaXMubGlzdEl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlSXRlbXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RJdGVtcy5jaGFuZ2VzXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm9ic2VydmVJdGVtcygpOyB9KTtcbiAgICB9O1xuICAgIE5iTGlzdFBhZ2VUcmFja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0ICYmIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH07XG4gICAgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLm9ic2VydmVJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5saXN0SXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaSkgeyByZXR1cm4gX3RoaXMub2JzZXJ2ZXIub2JzZXJ2ZShpLm5hdGl2ZUVsZW1lbnQpOyB9KTtcbiAgICB9O1xuICAgIE5iTGlzdFBhZ2VUcmFja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5jaGVja0ZvclBhZ2VDaGFuZ2UgPSBmdW5jdGlvbiAoZW50cmllcykge1xuICAgICAgICB2YXIgbW9zdFZpc2libGVQYWdlID0gdGhpcy5maW5kTW9zdFZpc2libGVQYWdlKGVudHJpZXMpO1xuICAgICAgICBpZiAobW9zdFZpc2libGVQYWdlICYmIHRoaXMuY3VycmVudFBhZ2UgIT09IG1vc3RWaXNpYmxlUGFnZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IG1vc3RWaXNpYmxlUGFnZTtcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5nZS5lbWl0KHRoaXMuY3VycmVudFBhZ2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkxpc3RQYWdlVHJhY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUuZmluZE1vc3RWaXNpYmxlUGFnZSA9IGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgIHZhciBpbnRlcnNlY3Rpb25SYXRpb0J5UGFnZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbnRyaWVzXzEgPSBlbnRyaWVzOyBfaSA8IGVudHJpZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNfMVtfaV07XG4gICAgICAgICAgICBpZiAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPCAwLjUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbGVtZW50SW5kZXggPSB0aGlzLmVsZW1lbnRJbmRleChlbnRyeS50YXJnZXQpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYWdlID0gdGhpcy5zdGFydFBhZ2UgKyBNYXRoLmZsb29yKGVsZW1lbnRJbmRleCAvIHRoaXMucGFnZVNpemUpO1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gZW50cnkuaW50ZXJzZWN0aW9uUmF0aW87XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUmF0aW9CeVBhZ2UuaGFzKHBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmF0aW8gKz0gaW50ZXJzZWN0aW9uUmF0aW9CeVBhZ2UuZ2V0KHBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uUmF0aW9CeVBhZ2Uuc2V0KHBhZ2UsIHJhdGlvKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWF4UmF0aW8gPSAwO1xuICAgICAgICB2YXIgbW9zdFZpc2libGVQYWdlO1xuICAgICAgICBpbnRlcnNlY3Rpb25SYXRpb0J5UGFnZS5mb3JFYWNoKGZ1bmN0aW9uIChyYXRpbywgcGFnZSkge1xuICAgICAgICAgICAgaWYgKHJhdGlvID4gbWF4UmF0aW8pIHtcbiAgICAgICAgICAgICAgICBtYXhSYXRpbyA9IHJhdGlvO1xuICAgICAgICAgICAgICAgIG1vc3RWaXNpYmxlUGFnZSA9IHBhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW9zdFZpc2libGVQYWdlO1xuICAgIH07XG4gICAgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLmVsZW1lbnRJbmRleCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50LnBhcmVudEVsZW1lbnQgJiYgZWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuXG4gICAgICAgICAgICA/IEFycmF5LmZyb20oZWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKS5pbmRleE9mKGVsZW1lbnQpXG4gICAgICAgICAgICA6IC0xO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG4gICAgXSwgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcInBhZ2VTaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG4gICAgXSwgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcInN0YXJ0UGFnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkxpc3RQYWdlVHJhY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwicGFnZUNoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBDb250ZW50Q2hpbGRyZW4oTmJMaXN0SXRlbUNvbXBvbmVudCwgeyByZWFkOiBFbGVtZW50UmVmIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iTGlzdFBhZ2VUcmFja2VyRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJsaXN0SXRlbXNcIiwgdm9pZCAwKTtcbiAgICBOYkxpc3RQYWdlVHJhY2tlckRpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJMaXN0UGFnZVRyYWNrZXJdJyxcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkxpc3RQYWdlVHJhY2tlckRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iTGlzdFBhZ2VUcmFja2VyRGlyZWN0aXZlO1xufSgpKTtcblxudmFyIE5iU2Nyb2xsYWJsZUNvbnRhaW5lckRpbWVudGlvbnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTY3JvbGxhYmxlQ29udGFpbmVyRGltZW50aW9ucygpIHtcbiAgICB9XG4gICAgcmV0dXJuIE5iU2Nyb2xsYWJsZUNvbnRhaW5lckRpbWVudGlvbnM7XG59KCkpO1xuLyoqXG4gKiBJbmZpbml0ZSBMaXN0IERpcmVjdGl2ZVxuICpcbiAqIGBgYGh0bWxcbiAqICA8bmItbGlzdCBuYkluZmluaXRlTGlzdCBbdGhyZXNob2xkXT1cIjUwMFwiIChib3R0b21UaHJlc2hvbGQpPVwibG9hZE5leHQoKVwiPlxuICogICAgPG5iLWxpc3QtaXRlbSAqbmdGb3I9XCJsZXQgaXRlbSBvZiBpdGVtc1wiPjwvbmItbGlzdC1pdGVtPlxuICogIDwvbmItbGlzdD5cbiAqIGBgYFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2ltcGxlIGluZmluaXRlIGxpc3QsIGluZmluaXRlLWxpc3QvaW5maW5pdGUtbGlzdC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogRGlyZWN0aXZlIHdpbGwgbm90aWZ5IHdoZW4gbGlzdCBzY3JvbGxlZCB1cCBvciBkb3duIHRvIGEgZ2l2ZW4gdGhyZXNob2xkLlxuICogQnkgZGVmYXVsdCBpdCBsaXN0ZW4gdG8gc2Nyb2xsIG9mIGxpc3Qgb24gd2hpY2ggYXBwbGllZCwgYnV0IGFsc28gY2FuIGJlIHNldCB0byBsaXN0ZW4gdG8gd2luZG93IHNjcm9sbC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNjcm9sbCBtb2RlcywgaW5maW5pdGUtbGlzdC9pbmZpbml0ZS1saXN0LXNjcm9sbC1tb2Rlcy5jb21wb25lbnQpXG4gKlxuICogVG8gaW1wcm92ZSBVWCBvZiBpbmZpbml0ZSBsaXN0cywgaXQncyBiZXR0ZXIgdG8ga2VlcCBjdXJyZW50IHBhZ2UgaW4gdXJsLFxuICogc28gdXNlciBhYmxlIHRvIHJldHVybiB0byB0aGUgbGFzdCB2aWV3ZWQgcGFnZSBvciB0byBzaGFyZSBhIGxpbmsgdG8gdGhpcyBwYWdlLlxuICogYG5iTGlzdFBhZ2VUcmFja2VyYCBkaXJlY3RpdmUgd2lsbCBoZWxwIHlvdSB0byBrbm93LCB3aGF0IHBhZ2UgdXNlciBjdXJyZW50bHkgdmlld2luZy5cbiAqIEp1c3QgcHV0IGl0IG9uIGEgbGlzdCwgc2V0IHBhZ2Ugc2l6ZSBhbmQgaXQgd2lsbCBjYWxjdWxhdGUgcGFnZSB0aGF0IGN1cnJlbnRseSBpbiB2aWV3cG9ydC5cbiAqIFlvdSBjYW4gW29wZW4gdGhlIGV4YW1wbGVdKGV4YW1wbGUvaW5maW5pdGUtbGlzdC9pbmZpbml0ZS1uZXdzLWxpc3QuY29tcG9uZW50KVxuICogaW4gYSBuZXcgdGFiIHRvIGNoZWNrIG91dCB0aGlzIGZlYXR1cmUuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShJbmZpbml0ZSBsaXN0IHdpdGggcGFnZXIsIGluZmluaXRlLWxpc3QvaW5maW5pdGUtbmV3cy1saXN0LmNvbXBvbmVudClcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEluZmluaXRlIGxpc3Qgd2l0aCBwbGFjZWhvbGRlcnMgYXQgdGhlIHRvcCwgaW5maW5pdGUtbGlzdC9pbmZpbml0ZS1saXN0LXBsYWNlaG9sZGVycy5jb21wb25lbnQpXG4gKlxuICovXG52YXIgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUoZWxlbWVudFJlZiwgc2Nyb2xsU2VydmljZSwgZGltZW5zaW9uc1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlID0gc2Nyb2xsU2VydmljZTtcbiAgICAgICAgdGhpcy5kaW1lbnNpb25zU2VydmljZSA9IGRpbWVuc2lvbnNTZXJ2aWNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy53aW5kb3dTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW4gZGlzdGFuY2UgYmV0d2VlbiBsaXN0IGJvdHRvbSBhbmQgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gaXMgbGVzcyB0aGFuIHRocmVzaG9sZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYm90dG9tVGhyZXNob2xkID0gbmV3IEV2ZW50RW1pdHRlcih0cnVlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW4gZGlzdGFuY2UgYmV0d2VlbiBsaXN0IHRvcCBhbmQgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gaXMgbGVzcyB0aGFuIHRocmVzaG9sZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG9wVGhyZXNob2xkID0gbmV3IEV2ZW50RW1pdHRlcih0cnVlKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJlbGVtZW50U2Nyb2xsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMud2luZG93U2Nyb2xsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvdG90eXBlLCBcImxpc3RlbldpbmRvd1Njcm9sbFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCeSBkZWZhdWx0IGNvbXBvbmVudCBvYnNlcnZlcyBsaXN0IHNjcm9sbCBwb3NpdGlvbi5cbiAgICAgICAgICogSWYgc2V0IHRvIGB0cnVlYCwgY29tcG9uZW50IHdpbGwgb2JzZXJ2ZSBwb3NpdGlvbiBvZiBwYWdlIHNjcm9sbCBpbnN0ZWFkLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMud2luZG93U2Nyb2xsID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvdG90eXBlLm9uRWxlbWVudFNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFNjcm9sbCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja1Bvc2l0aW9uKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlLm9uU2Nyb2xsKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy53aW5kb3dTY3JvbGw7IH0pLCBzd2l0Y2hNYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZ2V0Q29udGFpbmVyRGltZW5zaW9ucygpOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoZGltZW50aW9ucykgeyByZXR1cm4gX3RoaXMuY2hlY2tQb3NpdGlvbihkaW1lbnRpb25zKTsgfSk7XG4gICAgICAgIHRoaXMubGlzdEl0ZW1zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAvLyBGb3Igc29tZSByZWFzb24sIGNoYW5nZXMgYXJlIGVtaXR0ZWQgYmVmb3JlIGxpc3QgaXRlbSByZW1vdmVkIGZyb20gZG9tLFxuICAgICAgICAvLyBzbyBkaW1lbnNpb25zIHdpbGwgYmUgaW5jb3JyZWN0LlxuICAgICAgICAvLyBDaGVjayBldmVyeSA1MG1zIGZvciBhIHNlY29uZCBpZiBkb20gYW5kIHF1ZXJ5IGFyZSBpbiBzeW5jLlxuICAgICAgICAvLyBPbmNlIHRoZXkgc3luY2hyb25pemVkLCB3ZSBjYW4gZ2V0IHByb3BlciBkaW1lbnNpb25zLlxuICAgICAgICBzd2l0Y2hNYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gaW50ZXJ2YWwoNTApLnBpcGUoZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmluU3luY1dpdGhEb20oKTsgfSksIHRha2UoMSksIHRha2VVbnRpbCh0aW1lcigxMDAwKSkpOyB9KSwgc3dpdGNoTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmdldENvbnRhaW5lckRpbWVuc2lvbnMoKTsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRpbWVudGlvbnMpIHsgcmV0dXJuIF90aGlzLmNoZWNrUG9zaXRpb24oZGltZW50aW9ucyk7IH0pO1xuICAgICAgICB0aGlzLmdldENvbnRhaW5lckRpbWVuc2lvbnMoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKGRpbWVudGlvbnMpIHsgcmV0dXJuIF90aGlzLmNoZWNrUG9zaXRpb24oZGltZW50aW9ucyk7IH0pO1xuICAgIH07XG4gICAgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvdG90eXBlLmNoZWNrUG9zaXRpb24gPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IF9hLnNjcm9sbEhlaWdodCwgc2Nyb2xsVG9wID0gX2Euc2Nyb2xsVG9wLCBjbGllbnRIZWlnaHQgPSBfYS5jbGllbnRIZWlnaHQ7XG4gICAgICAgIHZhciBpbml0aWFsQ2hlY2sgPSB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbiA9PSBudWxsO1xuICAgICAgICB2YXIgbWFudWFsQ2hlY2sgPSB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbiA9PT0gc2Nyb2xsVG9wO1xuICAgICAgICB2YXIgc2Nyb2xsVXAgPSBzY3JvbGxUb3AgPCB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbjtcbiAgICAgICAgdmFyIHNjcm9sbERvd24gPSBzY3JvbGxUb3AgPiB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbjtcbiAgICAgICAgdmFyIGRpc3RhbmNlVG9Cb3R0b20gPSBzY3JvbGxIZWlnaHQgLSBzY3JvbGxUb3AgLSBjbGllbnRIZWlnaHQ7XG4gICAgICAgIGlmICgoaW5pdGlhbENoZWNrIHx8IG1hbnVhbENoZWNrIHx8IHNjcm9sbERvd24pICYmIGRpc3RhbmNlVG9Cb3R0b20gPD0gdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tVGhyZXNob2xkLmVtaXQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGluaXRpYWxDaGVjayB8fCBzY3JvbGxVcCkgJiYgc2Nyb2xsVG9wIDw9IHRoaXMudGhyZXNob2xkKSB7XG4gICAgICAgICAgICB0aGlzLnRvcFRocmVzaG9sZC5lbWl0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxUb3A7XG4gICAgfTtcbiAgICBOYkluZmluaXRlTGlzdERpcmVjdGl2ZS5wcm90b3R5cGUuZ2V0Q29udGFpbmVyRGltZW5zaW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFNjcm9sbCkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHNjcm9sbFRvcCA9IF9hLnNjcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0ID0gX2Euc2Nyb2xsSGVpZ2h0LCBjbGllbnRIZWlnaHQgPSBfYS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICByZXR1cm4gb2YoeyBzY3JvbGxUb3A6IHNjcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0OiBzY3JvbGxIZWlnaHQsIGNsaWVudEhlaWdodDogY2xpZW50SGVpZ2h0IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JrSm9pbih0aGlzLnNjcm9sbFNlcnZpY2UuZ2V0UG9zaXRpb24oKSwgdGhpcy5kaW1lbnNpb25zU2VydmljZS5nZXREaW1lbnNpb25zKCkpXG4gICAgICAgICAgICAucGlwZShtYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBfYVswXSwgZGltZW5zaW9ucyA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuICh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxQb3NpdGlvbi55LFxuICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodDogZGltZW5zaW9ucy5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0OiBkaW1lbnNpb25zLmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICBOYkluZmluaXRlTGlzdERpcmVjdGl2ZS5wcm90b3R5cGUuaW5TeW5jV2l0aERvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA9PT0gdGhpcy5saXN0SXRlbXMubGVuZ3RoO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpXG4gICAgXSwgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvdG90eXBlLCBcInRocmVzaG9sZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJsaXN0ZW5XaW5kb3dTY3JvbGxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJib3R0b21UaHJlc2hvbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvdG90eXBlLCBcInRvcFRocmVzaG9sZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ3Njcm9sbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJvbkVsZW1lbnRTY3JvbGxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIENvbnRlbnRDaGlsZHJlbihOYkxpc3RJdGVtQ29tcG9uZW50KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFF1ZXJ5TGlzdClcbiAgICBdLCBOYkluZmluaXRlTGlzdERpcmVjdGl2ZS5wcm90b3R5cGUsIFwibGlzdEl0ZW1zXCIsIHZvaWQgMCk7XG4gICAgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iSW5maW5pdGVMaXN0XScsXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsXG4gICAgICAgICAgICBOYkxheW91dFNjcm9sbFNlcnZpY2UsXG4gICAgICAgICAgICBOYkxheW91dFJ1bGVyU2VydmljZV0pXG4gICAgXSwgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYkluZmluaXRlTGlzdERpcmVjdGl2ZTtcbn0oKSk7XG5cbnZhciBjb21wb25lbnRzID0gW1xuICAgIE5iTGlzdENvbXBvbmVudCxcbiAgICBOYkxpc3RJdGVtQ29tcG9uZW50LFxuICAgIE5iTGlzdFBhZ2VUcmFja2VyRGlyZWN0aXZlLFxuICAgIE5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLFxuXTtcbnZhciBOYkxpc3RNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJMaXN0TW9kdWxlKCkge1xuICAgIH1cbiAgICBOYkxpc3RNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBjb21wb25lbnRzLFxuICAgICAgICAgICAgZXhwb3J0czogY29tcG9uZW50cyxcbiAgICAgICAgfSlcbiAgICBdLCBOYkxpc3RNb2R1bGUpO1xuICAgIHJldHVybiBOYkxpc3RNb2R1bGU7XG59KCkpO1xuXG52YXIgTmJEaXJlY3Rpb25hbGl0eSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJEaXJlY3Rpb25hbGl0eSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkRpcmVjdGlvbmFsaXR5KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iRGlyZWN0aW9uYWxpdHkgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpXG4gICAgXSwgTmJEaXJlY3Rpb25hbGl0eSk7XG4gICAgcmV0dXJuIE5iRGlyZWN0aW9uYWxpdHk7XG59KERpcmVjdGlvbmFsaXR5KSk7XG5cbnZhciBOYkJpZGlNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iQmlkaU1vZHVsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkJpZGlNb2R1bGUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJCaWRpTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJEaXJlY3Rpb25hbGl0eSwgdXNlRXhpc3Rpbmc6IERpcmVjdGlvbmFsaXR5IH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KVxuICAgIF0sIE5iQmlkaU1vZHVsZSk7XG4gICAgcmV0dXJuIE5iQmlkaU1vZHVsZTtcbn0oQmlkaU1vZHVsZSkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JuYmlvbi5cbiAqL1xuLyoqXG4gKiBDZWxsIGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSB0ZW1wbGF0ZSBvZiBhIGNvbHVtbidzIGRhdGEgcm93IGNlbGwgYXMgd2VsbCBhcyBjZWxsLXNwZWNpZmljIHByb3BlcnRpZXMuXG4gKi9cbnZhciBOYkNlbGxEZWZEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iQ2VsbERlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkNlbGxEZWZEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJDZWxsRGVmRGlyZWN0aXZlXzEgPSBOYkNlbGxEZWZEaXJlY3RpdmU7XG4gICAgdmFyIE5iQ2VsbERlZkRpcmVjdGl2ZV8xO1xuICAgIE5iQ2VsbERlZkRpcmVjdGl2ZSA9IE5iQ2VsbERlZkRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkNlbGxEZWZdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrQ2VsbERlZiwgdXNlRXhpc3Rpbmc6IE5iQ2VsbERlZkRpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KVxuICAgIF0sIE5iQ2VsbERlZkRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iQ2VsbERlZkRpcmVjdGl2ZTtcbn0oQ2RrQ2VsbERlZikpO1xuLyoqXG4gKiBIZWFkZXIgY2VsbCBkZWZpbml0aW9uIGZvciB0aGUgbmItdGFibGUuXG4gKiBDYXB0dXJlcyB0aGUgdGVtcGxhdGUgb2YgYSBjb2x1bW4ncyBoZWFkZXIgY2VsbCBhbmQgYXMgd2VsbCBhcyBjZWxsLXNwZWNpZmljIHByb3BlcnRpZXMuXG4gKi9cbnZhciBOYkhlYWRlckNlbGxEZWZEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkhlYWRlckNlbGxEZWZEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJIZWFkZXJDZWxsRGVmRGlyZWN0aXZlXzEgPSBOYkhlYWRlckNlbGxEZWZEaXJlY3RpdmU7XG4gICAgdmFyIE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZV8xO1xuICAgIE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSA9IE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkhlYWRlckNlbGxEZWZdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrSGVhZGVyQ2VsbERlZiwgdXNlRXhpc3Rpbmc6IE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KVxuICAgIF0sIE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZTtcbn0oQ2RrSGVhZGVyQ2VsbERlZikpO1xuLyoqXG4gKiBGb290ZXIgY2VsbCBkZWZpbml0aW9uIGZvciB0aGUgbmItdGFibGUuXG4gKiBDYXB0dXJlcyB0aGUgdGVtcGxhdGUgb2YgYSBjb2x1bW4ncyBmb290ZXIgY2VsbCBhbmQgYXMgd2VsbCBhcyBjZWxsLXNwZWNpZmljIHByb3BlcnRpZXMuXG4gKi9cbnZhciBOYkZvb3RlckNlbGxEZWZEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkZvb3RlckNlbGxEZWZEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJGb290ZXJDZWxsRGVmRGlyZWN0aXZlXzEgPSBOYkZvb3RlckNlbGxEZWZEaXJlY3RpdmU7XG4gICAgdmFyIE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZV8xO1xuICAgIE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSA9IE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkZvb3RlckNlbGxEZWZdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrRm9vdGVyQ2VsbERlZiwgdXNlRXhpc3Rpbmc6IE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KVxuICAgIF0sIE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZTtcbn0oQ2RrRm9vdGVyQ2VsbERlZikpO1xudmFyIE5CX1NPUlRfSEVBREVSX0NPTFVNTl9ERUYgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05CX1NPUlRfSEVBREVSX0NPTFVNTl9ERUYnKTtcbi8qKlxuICogQ29sdW1uIGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIERlZmluZXMgYSBzZXQgb2YgY2VsbHMgYXZhaWxhYmxlIGZvciBhIHRhYmxlIGNvbHVtbi5cbiAqL1xudmFyIE5iQ29sdW1uRGVmRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkNvbHVtbkRlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkNvbHVtbkRlZkRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYkNvbHVtbkRlZkRpcmVjdGl2ZV8xID0gTmJDb2x1bW5EZWZEaXJlY3RpdmU7XG4gICAgdmFyIE5iQ29sdW1uRGVmRGlyZWN0aXZlXzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkNvbHVtbkRlZicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQ29sdW1uRGVmRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iQ29sdW1uRGVmRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzdGlja3lcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJDb2x1bW5EZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcInN0aWNreUVuZFwiLCB2b2lkIDApO1xuICAgIE5iQ29sdW1uRGVmRGlyZWN0aXZlID0gTmJDb2x1bW5EZWZEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJDb2x1bW5EZWZdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogQ2RrQ29sdW1uRGVmLCB1c2VFeGlzdGluZzogTmJDb2x1bW5EZWZEaXJlY3RpdmVfMSB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfU09SVF9IRUFERVJfQ09MVU1OX0RFRiwgdXNlRXhpc3Rpbmc6IE5iQ29sdW1uRGVmRGlyZWN0aXZlXzEgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJDb2x1bW5EZWZEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYkNvbHVtbkRlZkRpcmVjdGl2ZTtcbn0oQ2RrQ29sdW1uRGVmKSk7XG4vKiogSGVhZGVyIGNlbGwgdGVtcGxhdGUgY29udGFpbmVyIHRoYXQgYWRkcyB0aGUgcmlnaHQgY2xhc3NlcyBhbmQgcm9sZS4gKi9cbnZhciBOYkhlYWRlckNlbGxEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iSGVhZGVyQ2VsbERpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkhlYWRlckNlbGxEaXJlY3RpdmUoY29sdW1uRGVmLCBlbGVtZW50UmVmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbHVtbkRlZiwgZWxlbWVudFJlZikgfHwgdGhpcztcbiAgICAgICAgZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJuYi1jb2x1bW4tXCIgKyBjb2x1bW5EZWYuY3NzQ2xhc3NGcmllbmRseU5hbWUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iSGVhZGVyQ2VsbERpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1oZWFkZXItY2VsbCwgdGhbbmJIZWFkZXJDZWxsXScsXG4gICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLWhlYWRlci1jZWxsJyxcbiAgICAgICAgICAgICAgICAncm9sZSc6ICdjb2x1bW5oZWFkZXInLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJDb2x1bW5EZWZEaXJlY3RpdmUsXG4gICAgICAgICAgICBFbGVtZW50UmVmXSlcbiAgICBdLCBOYkhlYWRlckNlbGxEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYkhlYWRlckNlbGxEaXJlY3RpdmU7XG59KENka0hlYWRlckNlbGwpKTtcbi8qKiBGb290ZXIgY2VsbCB0ZW1wbGF0ZSBjb250YWluZXIgdGhhdCBhZGRzIHRoZSByaWdodCBjbGFzc2VzIGFuZCByb2xlLiAqL1xudmFyIE5iRm9vdGVyQ2VsbERpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJGb290ZXJDZWxsRGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iRm9vdGVyQ2VsbERpcmVjdGl2ZShjb2x1bW5EZWYsIGVsZW1lbnRSZWYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29sdW1uRGVmLCBlbGVtZW50UmVmKSB8fCB0aGlzO1xuICAgICAgICBlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5iLWNvbHVtbi1cIiArIGNvbHVtbkRlZi5jc3NDbGFzc0ZyaWVuZGx5TmFtZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJGb290ZXJDZWxsRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWZvb3Rlci1jZWxsLCB0ZFtuYkZvb3RlckNlbGxdJyxcbiAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbmItZm9vdGVyLWNlbGwnLFxuICAgICAgICAgICAgICAgICdyb2xlJzogJ2dyaWRjZWxsJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iQ29sdW1uRGVmRGlyZWN0aXZlLFxuICAgICAgICAgICAgRWxlbWVudFJlZl0pXG4gICAgXSwgTmJGb290ZXJDZWxsRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJGb290ZXJDZWxsRGlyZWN0aXZlO1xufShDZGtGb290ZXJDZWxsKSk7XG4vKiogQ2VsbCB0ZW1wbGF0ZSBjb250YWluZXIgdGhhdCBhZGRzIHRoZSByaWdodCBjbGFzc2VzIGFuZCByb2xlLiAqL1xudmFyIE5iQ2VsbERpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJDZWxsRGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iQ2VsbERpcmVjdGl2ZShjb2x1bW5EZWYsIGVsZW1lbnRSZWYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29sdW1uRGVmLCBlbGVtZW50UmVmKSB8fCB0aGlzO1xuICAgICAgICBlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5iLWNvbHVtbi1cIiArIGNvbHVtbkRlZi5jc3NDbGFzc0ZyaWVuZGx5TmFtZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJDZWxsRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNlbGwsIHRkW25iQ2VsbF0nLFxuICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi1jZWxsJyxcbiAgICAgICAgICAgICAgICAncm9sZSc6ICdncmlkY2VsbCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkNvbHVtbkRlZkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIEVsZW1lbnRSZWZdKVxuICAgIF0sIE5iQ2VsbERpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iQ2VsbERpcmVjdGl2ZTtcbn0oQ2RrQ2VsbCkpO1xuXG52YXIgTmJEYXRhU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkRhdGFTb3VyY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJEYXRhU291cmNlKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBOYkRhdGFTb3VyY2U7XG59KERhdGFTb3VyY2UpKTtcblxudmFyIE5iRGF0YVJvd091dGxldERpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJEYXRhUm93T3V0bGV0RGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iRGF0YVJvd091dGxldERpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYkRhdGFSb3dPdXRsZXREaXJlY3RpdmVfMSA9IE5iRGF0YVJvd091dGxldERpcmVjdGl2ZTtcbiAgICB2YXIgTmJEYXRhUm93T3V0bGV0RGlyZWN0aXZlXzE7XG4gICAgTmJEYXRhUm93T3V0bGV0RGlyZWN0aXZlID0gTmJEYXRhUm93T3V0bGV0RGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iUm93T3V0bGV0XScsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IERhdGFSb3dPdXRsZXQsIHVzZUV4aXN0aW5nOiBOYkRhdGFSb3dPdXRsZXREaXJlY3RpdmVfMSB9XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkRhdGFSb3dPdXRsZXREaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYkRhdGFSb3dPdXRsZXREaXJlY3RpdmU7XG59KERhdGFSb3dPdXRsZXQpKTtcbnZhciBOYkhlYWRlclJvd091dGxldERpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJIZWFkZXJSb3dPdXRsZXREaXJlY3RpdmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJIZWFkZXJSb3dPdXRsZXREaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJIZWFkZXJSb3dPdXRsZXREaXJlY3RpdmVfMSA9IE5iSGVhZGVyUm93T3V0bGV0RGlyZWN0aXZlO1xuICAgIHZhciBOYkhlYWRlclJvd091dGxldERpcmVjdGl2ZV8xO1xuICAgIE5iSGVhZGVyUm93T3V0bGV0RGlyZWN0aXZlID0gTmJIZWFkZXJSb3dPdXRsZXREaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJIZWFkZXJSb3dPdXRsZXRdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogSGVhZGVyUm93T3V0bGV0LCB1c2VFeGlzdGluZzogTmJIZWFkZXJSb3dPdXRsZXREaXJlY3RpdmVfMSB9XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkhlYWRlclJvd091dGxldERpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iSGVhZGVyUm93T3V0bGV0RGlyZWN0aXZlO1xufShIZWFkZXJSb3dPdXRsZXQpKTtcbnZhciBOYkZvb3RlclJvd091dGxldERpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmVfMSA9IE5iRm9vdGVyUm93T3V0bGV0RGlyZWN0aXZlO1xuICAgIHZhciBOYkZvb3RlclJvd091dGxldERpcmVjdGl2ZV8xO1xuICAgIE5iRm9vdGVyUm93T3V0bGV0RGlyZWN0aXZlID0gTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJGb290ZXJSb3dPdXRsZXRdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogRm9vdGVyUm93T3V0bGV0LCB1c2VFeGlzdGluZzogTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmVfMSB9XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkZvb3RlclJvd091dGxldERpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iRm9vdGVyUm93T3V0bGV0RGlyZWN0aXZlO1xufShGb290ZXJSb3dPdXRsZXQpKTtcbnZhciBOYkNlbGxPdXRsZXREaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iQ2VsbE91dGxldERpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkNlbGxPdXRsZXREaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJDZWxsT3V0bGV0RGlyZWN0aXZlXzEgPSBOYkNlbGxPdXRsZXREaXJlY3RpdmU7XG4gICAgdmFyIE5iQ2VsbE91dGxldERpcmVjdGl2ZV8xO1xuICAgIE5iQ2VsbE91dGxldERpcmVjdGl2ZSA9IE5iQ2VsbE91dGxldERpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkNlbGxPdXRsZXRdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrQ2VsbE91dGxldCwgdXNlRXhpc3Rpbmc6IE5iQ2VsbE91dGxldERpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KVxuICAgIF0sIE5iQ2VsbE91dGxldERpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iQ2VsbE91dGxldERpcmVjdGl2ZTtcbn0oQ2RrQ2VsbE91dGxldCkpO1xuLyoqXG4gKiBIZWFkZXIgcm93IGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSBoZWFkZXIgcm93J3MgdGVtcGxhdGUgYW5kIG90aGVyIGhlYWRlciBwcm9wZXJ0aWVzIHN1Y2ggYXMgdGhlIGNvbHVtbnMgdG8gZGlzcGxheS5cbiAqL1xudmFyIE5iSGVhZGVyUm93RGVmRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZV8xID0gTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmU7XG4gICAgdmFyIE5iSGVhZGVyUm93RGVmRGlyZWN0aXZlXzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkhlYWRlclJvd0RlZicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iSGVhZGVyUm93RGVmRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkhlYWRlclJvd0RlZlN0aWNreScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwic3RpY2t5XCIsIHZvaWQgMCk7XG4gICAgTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUgPSBOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkhlYWRlclJvd0RlZl0nLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBDZGtIZWFkZXJSb3dEZWYsIHVzZUV4aXN0aW5nOiBOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KVxuICAgIF0sIE5iSGVhZGVyUm93RGVmRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmU7XG59KENka0hlYWRlclJvd0RlZikpO1xuLyoqXG4gKiBGb290ZXIgcm93IGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSBmb290ZXIgcm93J3MgdGVtcGxhdGUgYW5kIG90aGVyIGZvb3RlciBwcm9wZXJ0aWVzIHN1Y2ggYXMgdGhlIGNvbHVtbnMgdG8gZGlzcGxheS5cbiAqL1xudmFyIE5iRm9vdGVyUm93RGVmRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZV8xID0gTmJGb290ZXJSb3dEZWZEaXJlY3RpdmU7XG4gICAgdmFyIE5iRm9vdGVyUm93RGVmRGlyZWN0aXZlXzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkZvb3RlclJvd0RlZicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iRm9vdGVyUm93RGVmRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkZvb3RlclJvd0RlZlN0aWNreScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbiAgICBdLCBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwic3RpY2t5XCIsIHZvaWQgMCk7XG4gICAgTmJGb290ZXJSb3dEZWZEaXJlY3RpdmUgPSBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkZvb3RlclJvd0RlZl0nLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBDZGtGb290ZXJSb3dEZWYsIHVzZUV4aXN0aW5nOiBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KVxuICAgIF0sIE5iRm9vdGVyUm93RGVmRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJGb290ZXJSb3dEZWZEaXJlY3RpdmU7XG59KENka0Zvb3RlclJvd0RlZikpO1xuLyoqXG4gKiBEYXRhIHJvdyBkZWZpbml0aW9uIGZvciB0aGUgbmItdGFibGUuXG4gKiBDYXB0dXJlcyB0aGUgZGF0YSByb3cncyB0ZW1wbGF0ZSBhbmQgb3RoZXIgcHJvcGVydGllcyBzdWNoIGFzIHRoZSBjb2x1bW5zIHRvIGRpc3BsYXkgYW5kXG4gKiBhIHdoZW4gcHJlZGljYXRlIHRoYXQgZGVzY3JpYmVzIHdoZW4gdGhpcyByb3cgc2hvdWxkIGJlIHVzZWQuXG4gKi9cbnZhciBOYlJvd0RlZkRpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJSb3dEZWZEaXJlY3RpdmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJSb3dEZWZEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJSb3dEZWZEaXJlY3RpdmVfMSA9IE5iUm93RGVmRGlyZWN0aXZlO1xuICAgIHZhciBOYlJvd0RlZkRpcmVjdGl2ZV8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJSb3dEZWZDb2x1bW5zJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJSb3dEZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iUm93RGVmV2hlbicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG4gICAgXSwgTmJSb3dEZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcIndoZW5cIiwgdm9pZCAwKTtcbiAgICBOYlJvd0RlZkRpcmVjdGl2ZSA9IE5iUm93RGVmRGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iUm93RGVmXScsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IENka1Jvd0RlZiwgdXNlRXhpc3Rpbmc6IE5iUm93RGVmRGlyZWN0aXZlXzEgfV0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJSb3dEZWZEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlJvd0RlZkRpcmVjdGl2ZTtcbn0oQ2RrUm93RGVmKSk7XG4vKiogRm9vdGVyIHRlbXBsYXRlIGNvbnRhaW5lciB0aGF0IGNvbnRhaW5zIHRoZSBjZWxsIG91dGxldC4gQWRkcyB0aGUgcmlnaHQgY2xhc3MgYW5kIHJvbGUuICovXG52YXIgTmJIZWFkZXJSb3dDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iSGVhZGVyUm93Q29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iSGVhZGVyUm93Q29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iSGVhZGVyUm93Q29tcG9uZW50XzEgPSBOYkhlYWRlclJvd0NvbXBvbmVudDtcbiAgICB2YXIgTmJIZWFkZXJSb3dDb21wb25lbnRfMTtcbiAgICBOYkhlYWRlclJvd0NvbXBvbmVudCA9IE5iSGVhZGVyUm93Q29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItaGVhZGVyLXJvdywgdHJbbmJIZWFkZXJSb3ddJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmctY29udGFpbmVyIG5iQ2VsbE91dGxldD48L25nLWNvbnRhaW5lcj5cIixcbiAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbmItaGVhZGVyLXJvdycsXG4gICAgICAgICAgICAgICAgJ3JvbGUnOiAncm93JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IENka0hlYWRlclJvdywgdXNlRXhpc3Rpbmc6IE5iSGVhZGVyUm93Q29tcG9uZW50XzEgfV1cbiAgICAgICAgfSlcbiAgICBdLCBOYkhlYWRlclJvd0NvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iSGVhZGVyUm93Q29tcG9uZW50O1xufShDZGtIZWFkZXJSb3cpKTtcbi8qKiBGb290ZXIgdGVtcGxhdGUgY29udGFpbmVyIHRoYXQgY29udGFpbnMgdGhlIGNlbGwgb3V0bGV0LiBBZGRzIHRoZSByaWdodCBjbGFzcyBhbmQgcm9sZS4gKi9cbnZhciBOYkZvb3RlclJvd0NvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJGb290ZXJSb3dDb21wb25lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJGb290ZXJSb3dDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJGb290ZXJSb3dDb21wb25lbnRfMSA9IE5iRm9vdGVyUm93Q29tcG9uZW50O1xuICAgIHZhciBOYkZvb3RlclJvd0NvbXBvbmVudF8xO1xuICAgIE5iRm9vdGVyUm93Q29tcG9uZW50ID0gTmJGb290ZXJSb3dDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1mb290ZXItcm93LCB0cltuYkZvb3RlclJvd10nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuZy1jb250YWluZXIgbmJDZWxsT3V0bGV0PjwvbmctY29udGFpbmVyPlwiLFxuICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi1mb290ZXItcm93JyxcbiAgICAgICAgICAgICAgICAncm9sZSc6ICdyb3cnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrRm9vdGVyUm93LCB1c2VFeGlzdGluZzogTmJGb290ZXJSb3dDb21wb25lbnRfMSB9XVxuICAgICAgICB9KVxuICAgIF0sIE5iRm9vdGVyUm93Q29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJGb290ZXJSb3dDb21wb25lbnQ7XG59KENka0Zvb3RlclJvdykpO1xuLyoqIERhdGEgcm93IHRlbXBsYXRlIGNvbnRhaW5lciB0aGF0IGNvbnRhaW5zIHRoZSBjZWxsIG91dGxldC4gQWRkcyB0aGUgcmlnaHQgY2xhc3MgYW5kIHJvbGUuICovXG52YXIgTmJSb3dDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iUm93Q29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iUm93Q29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iUm93Q29tcG9uZW50XzEgPSBOYlJvd0NvbXBvbmVudDtcbiAgICB2YXIgTmJSb3dDb21wb25lbnRfMTtcbiAgICBOYlJvd0NvbXBvbmVudCA9IE5iUm93Q29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItcm93LCB0cltuYlJvd10nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuZy1jb250YWluZXIgbmJDZWxsT3V0bGV0PjwvbmctY29udGFpbmVyPlwiLFxuICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi1yb3cnLFxuICAgICAgICAgICAgICAgICdyb2xlJzogJ3JvdycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBDZGtSb3csIHVzZUV4aXN0aW5nOiBOYlJvd0NvbXBvbmVudF8xIH1dXG4gICAgICAgIH0pXG4gICAgXSwgTmJSb3dDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlJvd0NvbXBvbmVudDtcbn0oQ2RrUm93KSk7XG5cbnZhciBOQl9UQUJMRV9URU1QTEFURSA9IFwiXFxuICA8bmctY29udGFpbmVyIG5iSGVhZGVyUm93T3V0bGV0PjwvbmctY29udGFpbmVyPlxcbiAgPG5nLWNvbnRhaW5lciBuYlJvd091dGxldD48L25nLWNvbnRhaW5lcj5cXG4gIDxuZy1jb250YWluZXIgbmJGb290ZXJSb3dPdXRsZXQ+PC9uZy1jb250YWluZXI+XCI7XG52YXIgTmJUYWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJUYWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRhYmxlKGRpZmZlcnMsIGNoYW5nZURldGVjdG9yUmVmLCBlbGVtZW50UmVmLCByb2xlLCBkaXIsIGRvY3VtZW50LCBwbGF0Zm9ybSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgZGlmZmVycywgY2hhbmdlRGV0ZWN0b3JSZWYsIGVsZW1lbnRSZWYsIHJvbGUsIGRpciwgZG9jdW1lbnQsIHBsYXRmb3JtKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYlRhYmxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLXRhYmxlLW5vdC1pbXBsZW1lbnRlZCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcIlxuICAgICAgICB9KVxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcG9uZW50LWNsYXNzLXN1ZmZpeFxuICAgICAgICAsXG4gICAgICAgIF9fcGFyYW0oMywgQXR0cmlidXRlKCdyb2xlJykpLFxuICAgICAgICBfX3BhcmFtKDUsIEluamVjdChOQl9ET0NVTUVOVCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0l0ZXJhYmxlRGlmZmVycyxcbiAgICAgICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICAgICAgRWxlbWVudFJlZiwgU3RyaW5nLCBOYkRpcmVjdGlvbmFsaXR5LCBPYmplY3QsIE5iUGxhdGZvcm1dKVxuICAgIF0sIE5iVGFibGUpO1xuICAgIHJldHVybiBOYlRhYmxlO1xufShDZGtUYWJsZSkpO1xudmFyIENPTVBPTkVOVFMkMSA9IFtcbiAgICBOYlRhYmxlLFxuICAgIC8vIFRlbXBsYXRlIGRlZnNcbiAgICBOYkhlYWRlckNlbGxEZWZEaXJlY3RpdmUsXG4gICAgTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUsXG4gICAgTmJDb2x1bW5EZWZEaXJlY3RpdmUsXG4gICAgTmJDZWxsRGVmRGlyZWN0aXZlLFxuICAgIE5iUm93RGVmRGlyZWN0aXZlLFxuICAgIE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSxcbiAgICBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZSxcbiAgICAvLyBPdXRsZXRzXG4gICAgTmJEYXRhUm93T3V0bGV0RGlyZWN0aXZlLFxuICAgIE5iSGVhZGVyUm93T3V0bGV0RGlyZWN0aXZlLFxuICAgIE5iRm9vdGVyUm93T3V0bGV0RGlyZWN0aXZlLFxuICAgIE5iQ2VsbE91dGxldERpcmVjdGl2ZSxcbiAgICAvLyBDZWxsIGRpcmVjdGl2ZXNcbiAgICBOYkhlYWRlckNlbGxEaXJlY3RpdmUsXG4gICAgTmJDZWxsRGlyZWN0aXZlLFxuICAgIE5iRm9vdGVyQ2VsbERpcmVjdGl2ZSxcbiAgICAvLyBSb3cgZGlyZWN0aXZlc1xuICAgIE5iSGVhZGVyUm93Q29tcG9uZW50LFxuICAgIE5iUm93Q29tcG9uZW50LFxuICAgIE5iRm9vdGVyUm93Q29tcG9uZW50LFxuXTtcbnZhciBOYlRhYmxlTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlRhYmxlTW9kdWxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iVGFibGVNb2R1bGUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJUYWJsZU1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbTmJCaWRpTW9kdWxlXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogX19zcHJlYWRBcnJheXMoQ09NUE9ORU5UUyQxKSxcbiAgICAgICAgICAgIGV4cG9ydHM6IF9fc3ByZWFkQXJyYXlzKENPTVBPTkVOVFMkMSksXG4gICAgICAgIH0pXG4gICAgXSwgTmJUYWJsZU1vZHVsZSk7XG4gICAgcmV0dXJuIE5iVGFibGVNb2R1bGU7XG59KENka1RhYmxlTW9kdWxlKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9ESUFMT0dfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuKCdEZWZhdWx0IGRpYWxvZyBvcHRpb25zJyk7XG4vKipcbiAqIERlc2NyaWJlcyBhbGwgYXZhaWxhYmxlIG9wdGlvbnMgdGhhdCBtYXkgYmUgcGFzc2VkIHRvIHRoZSBOYkRpYWxvZ1NlcnZpY2UuXG4gKiAqL1xudmFyIE5iRGlhbG9nQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iRGlhbG9nQ29uZmlnKGNvbmZpZykge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSB0aGFuIG92ZXJsYXkgd2lsbCByZW5kZXIgYmFja2Ryb3AgdW5kZXIgYSBkaWFsb2cuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuaGFzQmFja2Ryb3AgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xhc3MgdGhhdCdsbCBiZSBhc3NpZ25lZCB0byB0aGUgYmFja2Ryb3AgZWxlbWVudC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5iYWNrZHJvcENsYXNzID0gJ292ZXJsYXktYmFja2Ryb3AnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xhc3MgdGhhdCdsbCBiZSBhc3NpZ25lZCB0byB0aGUgZGlhbG9nIG92ZXJsYXkuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuZGlhbG9nQ2xhc3MgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUgdGhlbiBtb3VzZSBjbGlja3MgYnkgYmFja2Ryb3Agd2lsbCBjbG9zZSBhIGRpYWxvZy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5jbG9zZU9uQmFja2Ryb3BDbGljayA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlIHRoZW4gZXNjYXBlIHByZXNzIHdpbGwgY2xvc2UgYSBkaWFsb2cuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuY2xvc2VPbkVzYyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyBzY3JvbGwgb24gY29udGVudCB1bmRlciBkaWFsb2cgaWYgdHJ1ZSBhbmQgZG9lcyBub3RoaW5nIG90aGVyd2lzZS5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5oYXNTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZvY3VzZXMgZGlhbG9nIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgb3BlbiBpZiB0cnVlLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmF1dG9Gb2N1cyA9IHRydWU7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY29uZmlnKTtcbiAgICB9XG4gICAgcmV0dXJuIE5iRGlhbG9nQ29uZmlnO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYE5iRGlhbG9nUmVmYCBoZWxwcyB0byBtYW5pcHVsYXRlIGRpYWxvZyBhZnRlciBpdCB3YXMgY3JlYXRlZC5cbiAqIFRoZSBkaWFsb2cgY2FuIGJlIGRpc21pc3NlZCBieSB1c2luZyBgY2xvc2VgIG1ldGhvZCBvZiB0aGUgZGlhbG9nUmVmLlxuICogWW91IGNhbiBhY2Nlc3MgcmVuZGVyZWQgY29tcG9uZW50IGFzIGBjb250ZW50YCBwcm9wZXJ0eSBvZiB0aGUgZGlhbG9nUmVmLlxuICogYG9uQmFja2Ryb3BDbGlja2Agc3RyZWFtcyBjbGljayBldmVudHMgb24gdGhlIGJhY2tkcm9wIG9mIHRoZSBkaWFsb2cuXG4gKiAqL1xudmFyIE5iRGlhbG9nUmVmID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iRGlhbG9nUmVmKG92ZXJsYXlSZWYpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5UmVmID0gb3ZlcmxheVJlZjtcbiAgICAgICAgdGhpcy5vbkNsb3NlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMub25DbG9zZSA9IHRoaXMub25DbG9zZSQuYXNPYnNlcnZhYmxlKCk7XG4gICAgICAgIHRoaXMub25CYWNrZHJvcENsaWNrID0gdGhpcy5vdmVybGF5UmVmLmJhY2tkcm9wQ2xpY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGlkZXMgZGlhbG9nLlxuICAgICAqICovXG4gICAgTmJEaWFsb2dSZWYucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKHJlcykge1xuICAgICAgICB0aGlzLm92ZXJsYXlSZWYuZGV0YWNoKCk7XG4gICAgICAgIHRoaXMub3ZlcmxheVJlZi5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMub25DbG9zZSQubmV4dChyZXMpO1xuICAgICAgICB0aGlzLm9uQ2xvc2UkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gTmJEaWFsb2dSZWY7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENvbnRhaW5lciBjb21wb25lbnQgZm9yIGVhY2ggZGlhbG9nLlxuICogQWxsIHRoZSBkaWFsb2dzIHdpbGwgYmUgYXR0YWNoZWQgdG8gaXQuXG4gKiAvLyBUT0RPIGFkZCBhbmltYXRpb25zXG4gKiAqL1xudmFyIE5iRGlhbG9nQ29udGFpbmVyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iRGlhbG9nQ29udGFpbmVyQ29tcG9uZW50KGNvbmZpZywgZWxlbWVudFJlZiwgZm9jdXNUcmFwRmFjdG9yeSkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICAgICAgdGhpcy5mb2N1c1RyYXBGYWN0b3J5ID0gZm9jdXNUcmFwRmFjdG9yeTtcbiAgICB9XG4gICAgTmJEaWFsb2dDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzVHJhcCA9IHRoaXMuZm9jdXNUcmFwRmFjdG9yeS5jcmVhdGUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RyYXAuYmx1clByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCgpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RyYXAuZm9jdXNJbml0aWFsRWxlbWVudCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5hdXRvRm9jdXMgJiYgdGhpcy5mb2N1c1RyYXApIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLnJlc3RvcmVGb2N1cygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUuYXR0YWNoQ29tcG9uZW50UG9ydGFsID0gZnVuY3Rpb24gKHBvcnRhbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3J0YWxPdXRsZXQuYXR0YWNoQ29tcG9uZW50UG9ydGFsKHBvcnRhbCk7XG4gICAgfTtcbiAgICBOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUuYXR0YWNoVGVtcGxhdGVQb3J0YWwgPSBmdW5jdGlvbiAocG9ydGFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcnRhbE91dGxldC5hdHRhY2hUZW1wbGF0ZVBvcnRhbChwb3J0YWwpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZChOYlBvcnRhbE91dGxldERpcmVjdGl2ZSwgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOYlBvcnRhbE91dGxldERpcmVjdGl2ZSlcbiAgICBdLCBOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9ydGFsT3V0bGV0XCIsIHZvaWQgMCk7XG4gICAgTmJEaWFsb2dDb250YWluZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZGlhbG9nLWNvbnRhaW5lcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxuZy10ZW1wbGF0ZSBuYlBvcnRhbE91dGxldD48L25nLXRlbXBsYXRlPidcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJEaWFsb2dDb25maWcsXG4gICAgICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICAgICAgTmJGb2N1c1RyYXBGYWN0b3J5U2VydmljZV0pXG4gICAgXSwgTmJEaWFsb2dDb250YWluZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYkRpYWxvZ1NlcnZpY2VgIGhlbHBzIHRvIG9wZW4gZGlhbG9ncy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBkaWFsb2cvZGlhbG9nLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBBIG5ldyBkaWFsb2cgaXMgb3BlbmVkIGJ5IGNhbGxpbmcgdGhlIGBvcGVuYCBtZXRob2Qgd2l0aCBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgYW5kIGFuIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24uXG4gKiBgb3BlbmAgbWV0aG9kIHdpbGwgcmV0dXJuIGBOYkRpYWxvZ1JlZmAgdGhhdCBjYW4gYmUgdXNlZCBmb3IgdGhlIGZ1cnRoZXIgbWFuaXB1bGF0aW9ucy5cbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkRpYWxvZ01vZHVsZS5mb3JSb290KClgIHRvIHlvdXIgYXBwIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJEaWFsb2dNb2R1bGUuZm9yUm9vdChjb25maWcpLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiBJZiB5b3UgYXJlIHVzaW5nIGl0IGluIGEgbGF6eSBsb2FkZWQgbW9kdWxlIHRoYW4geW91IGhhdmUgdG8gaW5zdGFsbCBpdCB3aXRoIGBOYkRpYWxvZ01vZHVsZS5mb3JDaGlsZCgpYDpcbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJEaWFsb2dNb2R1bGUuZm9yQ2hpbGQoY29uZmlnKSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgTGF6eUxvYWRlZE1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBkaWFsb2dSZWYgPSB0aGlzLmRpYWxvZ1NlcnZpY2Uub3BlbihNeURpYWxvZ0NvbXBvbmVudCwgeyAuLi4gfSk7XG4gKiBgYGBcbiAqXG4gKiBgTmJEaWFsb2dSZWZgIGdpdmVzIGNhcGFiaWxpdHkgYWNjZXNzIHJlZmVyZW5jZSB0byB0aGUgcmVuZGVyZWQgZGlhbG9nIGNvbXBvbmVudCxcbiAqIGRlc3Ryb3kgZGlhbG9nIGFuZCBzb21lIG90aGVyIG9wdGlvbnMgZGVzY3JpYmVkIGJlbG93LlxuICpcbiAqIEFsc28sIHlvdSBjYW4gaW5qZWN0IGBOYkRpYWxvZ1JlZmAgaW4gZGlhbG9nIGNvbXBvbmVudC5cbiAqXG4gKiBgYGB0c1xuICogdGhpcy5kaWFsb2dTZXJ2aWNlLm9wZW4oTXlEaWFsb2dDb21wb25lbnQsIHsgLi4uIH0pO1xuICpcbiAqIC8vIG15LWRpYWxvZy5jb21wb25lbnQudHNcbiAqIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBkaWFsb2dSZWY6IE5iRGlhbG9nUmVmKSB7XG4gKiB9XG4gKlxuICogY2xvc2UoKSB7XG4gKiAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBJbnN0ZWFkIG9mIGNvbXBvbmVudCB5b3UgY2FuIGNyZWF0ZSBkaWFsb2cgZnJvbSBUZW1wbGF0ZVJlZjpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFRlbXBsYXRlIHJlZiwgZGlhbG9nL2RpYWxvZy10ZW1wbGF0ZS5jb21wb25lbnQpXG4gKlxuICogVGhlIGRpYWxvZyBtYXkgcmV0dXJuIHJlc3VsdCB0aHJvdWdoIGBOYkRpYWxvZ1JlZmAuIENhbGxpbmcgY29tcG9uZW50IGNhbiByZWNlaXZlIHRoaXMgcmVzdWx0IHdpdGggYG9uQ2xvc2VgXG4gKiBzdHJlYW0gb2YgYE5iRGlhbG9nUmVmYC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFJlc3VsdCwgZGlhbG9nL2RpYWxvZy1yZXN1bHQuY29tcG9uZW50KVxuICpcbiAqICMjIyBDb25maWd1cmF0aW9uXG4gKlxuICogQXMgd2UgbWVudGlvbmVkIGFib3ZlLCBgb3BlbmAgbWV0aG9kIG9mIHRoZSBgTmJEaWFsb2dTZXJ2aWNlYCBtYXkgcmVjZWl2ZSBvcHRpb25hbCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gKiBBbHNvLCB5b3UgY2FuIHByb3ZpZGUgZ2xvYmFsIGRpYWxvZ3MgY29uZmlndXJhdGlvbiB0aHJvdWdoIGBOYkRpYWxvZ01vZHVsZS5mb3JSb290KHsgLi4uIH0pYC5cbiAqXG4gKiBUaGlzIGNvbmZpZyBtYXkgY29udGFpbiB0aGUgZm9sbG93aW5nOlxuICpcbiAqIGBjb250ZXh0YCAtIGJvdGgsIHRlbXBsYXRlIGFuZCBjb21wb25lbnQgbWF5IHJlY2VpdmUgZGF0YSB0aHJvdWdoIGBjb25maWcuY29udGV4dGAgcHJvcGVydHkuXG4gKiBGb3IgY29tcG9uZW50cywgdGhpcyBkYXRhIHdpbGwgYmUgYXNzaWduZWQgdGhyb3VnaCBpbnB1dHMuXG4gKiBGb3IgdGVtcGxhdGVzLCB5b3UgY2FuIGFjY2VzcyBpdCBpbnNpZGUgdGVtcGxhdGUgYXMgJGltcGxpY2l0LlxuICpcbiAqIGBgYHRzXG4gKiB0aGlzLmRpYWxvZ1NlcnZpY2Uub3Blbih0ZW1wbGF0ZSwgeyBjb250ZXh0OiAncGFzcyBkYXRhIGluIHRlbXBsYXRlJyB9KTtcbiAqIGBgYFxuICpcbiAqIGBgYGh0bWxcbiAqIDxuZy10ZW1wbGF0ZSBsZXQtc29tZS1hZGRpdGlvbmFsLWRhdGE+XG4gKiAgIHt7IHNvbWUtYWRkaXRpb25hbC1kYXRhIH19XG4gKiA8bmctdGVtcGxhdGUvPlxuICogYGBgXG4gKlxuICogYGhhc0JhY2tkcm9wYCAtIGRldGVybWluZXMgaXMgc2VydmljZSBoYXZlIHRvIHJlbmRlciBiYWNrZHJvcCB1bmRlciB0aGUgZGlhbG9nLlxuICogRGVmYXVsdCBpcyB0cnVlLlxuICogQHN0YWNrZWQtZXhhbXBsZShCYWNrZHJvcCwgZGlhbG9nL2RpYWxvZy1oYXMtYmFja2Ryb3AuY29tcG9uZW50KVxuICpcbiAqIGBjbG9zZU9uQmFja2Ryb3BDbGlja2AgLSBjbG9zZSBkaWFsb2cgb24gYmFja2Ryb3AgY2xpY2sgaWYgdHJ1ZS5cbiAqIERlZmF1bHQgaXMgdHJ1ZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoQmFja2Ryb3AgY2xpY2ssIGRpYWxvZy9kaWFsb2ctYmFja2Ryb3AtY2xpY2suY29tcG9uZW50KVxuICpcbiAqIGBjbG9zZU9uRXNjYCAtIGNsb3NlIGRpYWxvZyBvbiBlc2NhcGUgYnV0dG9uIG9uIHRoZSBrZXlib2FyZC5cbiAqIERlZmF1bHQgaXMgdHJ1ZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoRXNjYXBlIGhpdCwgZGlhbG9nL2RpYWxvZy1lc2MuY29tcG9uZW50KVxuICpcbiAqIGBoYXNTY3JvbGxgIC0gRGlzYWJsZXMgc2Nyb2xsIG9uIGNvbnRlbnQgdW5kZXIgZGlhbG9nIGlmIHRydWUgYW5kIGRvZXMgbm90aGluZyBvdGhlcndpc2UuXG4gKiBEZWZhdWx0IGlzIGZhbHNlLlxuICogUGxlYXNlLCBvcGVuIGRpYWxvZ3MgaW4gdGhlIHNlcGFyYXRlIHdpbmRvdyBhbmQgdHJ5IHRvIHNjcm9sbC5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU2Nyb2xsLCBkaWFsb2cvZGlhbG9nLXNjcm9sbC5jb21wb25lbnQpXG4gKlxuICogYGF1dG9Gb2N1c2AgLSBGb2N1c2VzIGRpYWxvZyBhdXRvbWF0aWNhbGx5IGFmdGVyIG9wZW4gaWYgdHJ1ZS4gSXQncyB1c2VmdWwgdG8gcHJldmVudCBtaXNjbGlja3Mgb25cbiAqIHRyaWdnZXIgZWxlbWVudHMgYW5kIG9wZW5pbmcgbXVsdGlwbGUgZGlhbG9ncy5cbiAqIERlZmF1bHQgaXMgdHJ1ZS5cbiAqXG4gKiBBcyB5b3UgY2FuIHNlZSwgaWYgeW91IG9wZW4gZGlhbG9nIHdpdGggYXV0byBmb2N1cyBkaWFsb2cgd2lsbCBmb2N1cyBmaXJzdCBmb2N1c2FibGUgZWxlbWVudFxuICogb3IganVzdCBibHVyIHByZXZpb3VzbHkgZm9jdXNlZCBhdXRvbWF0aWNhbGx5LlxuICogT3RoZXJ3aXNlLCB3aXRob3V0IGF1dG8gZm9jdXMsIHRoZSBmb2N1cyB3aWxsIHN0YXkgb24gdGhlIHByZXZpb3VzbHkgZm9jdXNlZCBlbGVtZW50LlxuICogUGxlYXNlLCBvcGVuIGRpYWxvZ3MgaW4gdGhlIHNlcGFyYXRlIHdpbmRvdyBhbmQgdHJ5IHRvIGNsaWNrIG9uIHRoZSBidXR0b24gd2l0aG91dCBmb2N1c1xuICogYW5kIHRoZW4gaGl0IHNwYWNlIGFueSB0aW1lcy4gTXVsdGlwbGUgc2FtZSBkaWFsb2dzIHdpbGwgYmUgb3BlbmVkLlxuICogQHN0YWNrZWQtZXhhbXBsZShBdXRvIGZvY3VzLCBkaWFsb2cvZGlhbG9nLWF1dG8tZm9jdXMuY29tcG9uZW50KVxuICogKi9cbnZhciBOYkRpYWxvZ1NlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJEaWFsb2dTZXJ2aWNlKGRvY3VtZW50LCBnbG9iYWxDb25maWcsIHBvc2l0aW9uQnVpbGRlciwgb3ZlcmxheSwgaW5qZWN0b3IsIGNmcikge1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMuZ2xvYmFsQ29uZmlnID0gZ2xvYmFsQ29uZmlnO1xuICAgICAgICB0aGlzLnBvc2l0aW9uQnVpbGRlciA9IHBvc2l0aW9uQnVpbGRlcjtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgdGhpcy5pbmplY3RvciA9IGluamVjdG9yO1xuICAgICAgICB0aGlzLmNmciA9IGNmcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgbmV3IGluc3RhbmNlIG9mIHRoZSBkaWFsb2csIG1heSByZWNlaXZlIG9wdGlvbmFsIGNvbmZpZy5cbiAgICAgKiAqL1xuICAgIE5iRGlhbG9nU2VydmljZS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChjb250ZW50LCB1c2VyQ29uZmlnKSB7XG4gICAgICAgIGlmICh1c2VyQ29uZmlnID09PSB2b2lkIDApIHsgdXNlckNvbmZpZyA9IHt9OyB9XG4gICAgICAgIHZhciBjb25maWcgPSBuZXcgTmJEaWFsb2dDb25maWcoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuZ2xvYmFsQ29uZmlnKSwgdXNlckNvbmZpZykpO1xuICAgICAgICB2YXIgb3ZlcmxheVJlZiA9IHRoaXMuY3JlYXRlT3ZlcmxheShjb25maWcpO1xuICAgICAgICB2YXIgZGlhbG9nUmVmID0gbmV3IE5iRGlhbG9nUmVmKG92ZXJsYXlSZWYpO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jcmVhdGVDb250YWluZXIoY29uZmlnLCBvdmVybGF5UmVmKTtcbiAgICAgICAgdGhpcy5jcmVhdGVDb250ZW50KGNvbmZpZywgY29udGVudCwgY29udGFpbmVyLCBkaWFsb2dSZWYpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyQ2xvc2VMaXN0ZW5lcnMoY29uZmlnLCBvdmVybGF5UmVmLCBkaWFsb2dSZWYpO1xuICAgICAgICByZXR1cm4gZGlhbG9nUmVmO1xuICAgIH07XG4gICAgTmJEaWFsb2dTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVPdmVybGF5ID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICB2YXIgcG9zaXRpb25TdHJhdGVneSA9IHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpO1xuICAgICAgICB2YXIgc2Nyb2xsU3RyYXRlZ3kgPSB0aGlzLmNyZWF0ZVNjcm9sbFN0cmF0ZWd5KGNvbmZpZy5oYXNTY3JvbGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5LmNyZWF0ZSh7XG4gICAgICAgICAgICBwb3NpdGlvblN0cmF0ZWd5OiBwb3NpdGlvblN0cmF0ZWd5LFxuICAgICAgICAgICAgc2Nyb2xsU3RyYXRlZ3k6IHNjcm9sbFN0cmF0ZWd5LFxuICAgICAgICAgICAgaGFzQmFja2Ryb3A6IGNvbmZpZy5oYXNCYWNrZHJvcCxcbiAgICAgICAgICAgIGJhY2tkcm9wQ2xhc3M6IGNvbmZpZy5iYWNrZHJvcENsYXNzLFxuICAgICAgICAgICAgcGFuZWxDbGFzczogY29uZmlnLmRpYWxvZ0NsYXNzLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iRGlhbG9nU2VydmljZS5wcm90b3R5cGUuY3JlYXRlUG9zaXRpb25TdHJhdGVneSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb25CdWlsZGVyXG4gICAgICAgICAgICAuZ2xvYmFsKClcbiAgICAgICAgICAgIC5jZW50ZXJWZXJ0aWNhbGx5KClcbiAgICAgICAgICAgIC5jZW50ZXJIb3Jpem9udGFsbHkoKTtcbiAgICB9O1xuICAgIE5iRGlhbG9nU2VydmljZS5wcm90b3R5cGUuY3JlYXRlU2Nyb2xsU3RyYXRlZ3kgPSBmdW5jdGlvbiAoaGFzU2Nyb2xsKSB7XG4gICAgICAgIGlmIChoYXNTY3JvbGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXkuc2Nyb2xsU3RyYXRlZ2llcy5ub29wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5LnNjcm9sbFN0cmF0ZWdpZXMuYmxvY2soKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJEaWFsb2dTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVDb250YWluZXIgPSBmdW5jdGlvbiAoY29uZmlnLCBvdmVybGF5UmVmKSB7XG4gICAgICAgIHZhciBpbmplY3RvciA9IG5ldyBOYlBvcnRhbEluamVjdG9yKHRoaXMuY3JlYXRlSW5qZWN0b3IoY29uZmlnKSwgbmV3IFdlYWtNYXAoW1tOYkRpYWxvZ0NvbmZpZywgY29uZmlnXV0pKTtcbiAgICAgICAgdmFyIGNvbnRhaW5lclBvcnRhbCA9IG5ldyBOYkNvbXBvbmVudFBvcnRhbChOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudCwgbnVsbCwgaW5qZWN0b3IsIHRoaXMuY2ZyKTtcbiAgICAgICAgdmFyIGNvbnRhaW5lclJlZiA9IG92ZXJsYXlSZWYuYXR0YWNoKGNvbnRhaW5lclBvcnRhbCk7XG4gICAgICAgIHJldHVybiBjb250YWluZXJSZWYuaW5zdGFuY2U7XG4gICAgfTtcbiAgICBOYkRpYWxvZ1NlcnZpY2UucHJvdG90eXBlLmNyZWF0ZUNvbnRlbnQgPSBmdW5jdGlvbiAoY29uZmlnLCBjb250ZW50LCBjb250YWluZXIsIGRpYWxvZ1JlZikge1xuICAgICAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmKSB7XG4gICAgICAgICAgICB2YXIgcG9ydGFsID0gdGhpcy5jcmVhdGVUZW1wbGF0ZVBvcnRhbChjb25maWcsIGNvbnRlbnQsIGRpYWxvZ1JlZik7XG4gICAgICAgICAgICBjb250YWluZXIuYXR0YWNoVGVtcGxhdGVQb3J0YWwocG9ydGFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwb3J0YWwgPSB0aGlzLmNyZWF0ZUNvbXBvbmVudFBvcnRhbChjb25maWcsIGNvbnRlbnQsIGRpYWxvZ1JlZik7XG4gICAgICAgICAgICBkaWFsb2dSZWYuY29tcG9uZW50UmVmID0gY29udGFpbmVyLmF0dGFjaENvbXBvbmVudFBvcnRhbChwb3J0YWwpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkaWFsb2dSZWYuY29tcG9uZW50UmVmLmluc3RhbmNlLCBfX2Fzc2lnbih7fSwgY29uZmlnLmNvbnRleHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJEaWFsb2dTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVUZW1wbGF0ZVBvcnRhbCA9IGZ1bmN0aW9uIChjb25maWcsIGNvbnRlbnQsIGRpYWxvZ1JlZikge1xuICAgICAgICByZXR1cm4gbmV3IE5iVGVtcGxhdGVQb3J0YWwoY29udGVudCwgbnVsbCwgeyAkaW1wbGljaXQ6IGNvbmZpZy5jb250ZXh0LCBkaWFsb2dSZWY6IGRpYWxvZ1JlZiB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdlJ3JlIGNyZWF0aW5nIHBvcnRhbCB3aXRoIGN1c3RvbSBpbmplY3RvciBwcm92aWRlZCB0aHJvdWdoIGNvbmZpZyBvciB1c2luZyBnbG9iYWwgaW5qZWN0b3IuXG4gICAgICogVGhpcyBhcHByb2FjaCBwcm92aWRlcyB1cyBjYXBhYmlsaXR5IGluamVjdCBgTmJEaWFsb2dSZWZgIGluIGRpYWxvZyBjb21wb25lbnQuXG4gICAgICogKi9cbiAgICBOYkRpYWxvZ1NlcnZpY2UucHJvdG90eXBlLmNyZWF0ZUNvbXBvbmVudFBvcnRhbCA9IGZ1bmN0aW9uIChjb25maWcsIGNvbnRlbnQsIGRpYWxvZ1JlZikge1xuICAgICAgICB2YXIgaW5qZWN0b3IgPSB0aGlzLmNyZWF0ZUluamVjdG9yKGNvbmZpZyk7XG4gICAgICAgIHZhciBwb3J0YWxJbmplY3RvciA9IG5ldyBOYlBvcnRhbEluamVjdG9yKGluamVjdG9yLCBuZXcgV2Vha01hcChbW05iRGlhbG9nUmVmLCBkaWFsb2dSZWZdXSkpO1xuICAgICAgICByZXR1cm4gbmV3IE5iQ29tcG9uZW50UG9ydGFsKGNvbnRlbnQsIGNvbmZpZy52aWV3Q29udGFpbmVyUmVmLCBwb3J0YWxJbmplY3Rvcik7XG4gICAgfTtcbiAgICBOYkRpYWxvZ1NlcnZpY2UucHJvdG90eXBlLmNyZWF0ZUluamVjdG9yID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gY29uZmlnLnZpZXdDb250YWluZXJSZWYgJiYgY29uZmlnLnZpZXdDb250YWluZXJSZWYuaW5qZWN0b3IgfHwgdGhpcy5pbmplY3RvcjtcbiAgICB9O1xuICAgIE5iRGlhbG9nU2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXJDbG9zZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChjb25maWcsIG92ZXJsYXlSZWYsIGRpYWxvZ1JlZikge1xuICAgICAgICBpZiAoY29uZmlnLmNsb3NlT25CYWNrZHJvcENsaWNrKSB7XG4gICAgICAgICAgICBvdmVybGF5UmVmLmJhY2tkcm9wQ2xpY2soKS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlhbG9nUmVmLmNsb3NlKCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcuY2xvc2VPbkVzYykge1xuICAgICAgICAgICAgZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICdrZXl1cCcpXG4gICAgICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gZXZlbnQua2V5Q29kZSA9PT0gMjc7IH0pLCB0YWtlVW50aWwoZGlhbG9nUmVmLm9uQ2xvc2UpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlhbG9nUmVmLmNsb3NlKCk7IH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkRpYWxvZ1NlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX3BhcmFtKDAsIEluamVjdChOQl9ET0NVTUVOVCkpLFxuICAgICAgICBfX3BhcmFtKDEsIEluamVjdChOQl9ESUFMT0dfQ09ORklHKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3QsIE5iUG9zaXRpb25CdWlsZGVyU2VydmljZSxcbiAgICAgICAgICAgIE5iT3ZlcmxheVNlcnZpY2UsXG4gICAgICAgICAgICBJbmplY3RvcixcbiAgICAgICAgICAgIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcl0pXG4gICAgXSwgTmJEaWFsb2dTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJEaWFsb2dTZXJ2aWNlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iRGlhbG9nTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iRGlhbG9nTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYkRpYWxvZ01vZHVsZV8xID0gTmJEaWFsb2dNb2R1bGU7XG4gICAgTmJEaWFsb2dNb2R1bGUuZm9yUm9vdCA9IGZ1bmN0aW9uIChkaWFsb2dDb25maWcpIHtcbiAgICAgICAgaWYgKGRpYWxvZ0NvbmZpZyA9PT0gdm9pZCAwKSB7IGRpYWxvZ0NvbmZpZyA9IHt9OyB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJEaWFsb2dNb2R1bGVfMSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iRGlhbG9nU2VydmljZSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX0RJQUxPR19DT05GSUcsIHVzZVZhbHVlOiBkaWFsb2dDb25maWcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBOYkRpYWxvZ01vZHVsZS5mb3JDaGlsZCA9IGZ1bmN0aW9uIChkaWFsb2dDb25maWcpIHtcbiAgICAgICAgaWYgKGRpYWxvZ0NvbmZpZyA9PT0gdm9pZCAwKSB7IGRpYWxvZ0NvbmZpZyA9IHt9OyB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJEaWFsb2dNb2R1bGVfMSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iRGlhbG9nU2VydmljZSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX0RJQUxPR19DT05GSUcsIHVzZVZhbHVlOiBkaWFsb2dDb25maWcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgTmJEaWFsb2dNb2R1bGVfMTtcbiAgICBOYkRpYWxvZ01vZHVsZSA9IE5iRGlhbG9nTW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW05iU2hhcmVkTW9kdWxlLCBOYk92ZXJsYXlNb2R1bGVdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJEaWFsb2dDb250YWluZXJDb21wb25lbnRdLFxuICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbTmJEaWFsb2dDb250YWluZXJDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iRGlhbG9nTW9kdWxlKTtcbiAgICByZXR1cm4gTmJEaWFsb2dNb2R1bGU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJUb2FzdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRvYXN0KCkge1xuICAgIH1cbiAgICByZXR1cm4gTmJUb2FzdDtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYlRvYXN0Q29tcG9uZW50YCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIGVhY2ggdG9hc3Qgd2l0aCBhcHByb3ByaWF0ZSBzdHlsZXMuXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHRvYXN0ci1ib3JkZXItc3R5bGU6XG4gKiB0b2FzdHItYm9yZGVyLXdpZHRoOlxuICogdG9hc3RyLWJvcmRlci1yYWRpdXM6XG4gKiB0b2FzdHItcGFkZGluZzpcbiAqIHRvYXN0ci1zaGFkb3c6XG4gKiB0b2FzdHItdGV4dC1mb250LWZhbWlseTpcbiAqIHRvYXN0ci10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRvYXN0ci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdG9hc3RyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB0b2FzdHItdGl0bGUtdGV4dC1mb250LWZhbWlseTpcbiAqIHRvYXN0ci10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRvYXN0ci10aXRsZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdG9hc3RyLXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB0b2FzdHItYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1iYXNpYy1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItaWNvbi1iYXNpYy1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS1ob3Zlci1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWhvdmVyLWJhc2ljLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogdG9hc3RyLWljb24tcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWljb24tcHJpbWFyeS1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS1ob3Zlci1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtaG92ZXItcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogdG9hc3RyLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLXN1Y2Nlc3MtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtaG92ZXItc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWhvdmVyLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogdG9hc3RyLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci1pbmZvLXRleHQtY29sb3I6XG4gKiB0b2FzdHItaWNvbi1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItaWNvbi1pbmZvLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWhvdmVyLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS1ob3Zlci1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItd2FybmluZy1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItd2FybmluZy10ZXh0LWNvbG9yOlxuICogdG9hc3RyLWljb24td2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWljb24td2FybmluZy1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS1ob3Zlci13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtaG92ZXItd2FybmluZy1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWljb24tZGFuZ2VyLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWhvdmVyLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWhvdmVyLWRhbmdlci1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogdG9hc3RyLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWNvbnRyb2wtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtaG92ZXItY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWhvdmVyLWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogKi9cbnZhciBOYlRvYXN0Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVG9hc3RDb21wb25lbnQocmVuZGVyZXIsIGVsZW1lbnRSZWYpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvYXN0LmNvbmZpZy5zdGF0dXMgPT09ICdkYW5nZXInO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvYXN0LmNvbmZpZy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuc3RhdHVzID09PSAnY29udHJvbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkZXN0cm95QnlDbGlja1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9hc3QuY29uZmlnLmRlc3Ryb3lCeUNsaWNrO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGFzSWNvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGljb24gPSB0aGlzLnRvYXN0LmNvbmZpZy5pY29uO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpY29uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEhKGljb24gJiYgaWNvbi5pY29uKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9hc3RDb21wb25lbnQucHJvdG90eXBlLCBcImN1c3RvbUljb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuaWNvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9hc3RDb21wb25lbnQucHJvdG90eXBlLCBcImljb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvYXN0LmNvbmZpZy5pY29uO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaWNvblBhY2tcIiwge1xuICAgICAgICAvKiBAZGVwcmVjYXRlZCBVc2UgcGFjayBwcm9wZXJ0eSBvZiBpY29uIGNvbmZpZyAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvYXN0LmNvbmZpZy5pY29uUGFjaztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9hc3RDb21wb25lbnQucHJvdG90eXBlLCBcImljb25Db25maWdcIiwge1xuICAgICAgICAvKlxuICAgICAgICAgIEBicmVha2luZy1jaGFuZ2UgNSByZW1vdmVcbiAgICAgICAgICBAZGVwcmVjYXRlZFxuICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0b2FzdENvbmZpZyA9IHRoaXMudG9hc3QuY29uZmlnO1xuICAgICAgICAgICAgdmFyIGlzSWNvbk5hbWUgPSB0eXBlb2YgdGhpcy5pY29uID09PSAnc3RyaW5nJztcbiAgICAgICAgICAgIGlmICghaXNJY29uTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2FzdENvbmZpZy5pY29uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGljb25Db25maWcgPSB7IGljb246IHRvYXN0Q29uZmlnLmljb24gfTtcbiAgICAgICAgICAgIGlmICh0b2FzdENvbmZpZy5pY29uUGFjaykge1xuICAgICAgICAgICAgICAgIGljb25Db25maWcucGFjayA9IHRvYXN0Q29uZmlnLmljb25QYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGljb25Db25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iVG9hc3RDb21wb25lbnQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveS5lbWl0KCk7XG4gICAgfTtcbiAgICBOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudG9hc3QuY29uZmlnLnRvYXN0Q2xhc3MpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHRoaXMudG9hc3QuY29uZmlnLnRvYXN0Q2xhc3MpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE5iVG9hc3QpXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidG9hc3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGVzdHJveVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwic3VjY2Vzc1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1pbmZvJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9hc3RDb21wb25lbnQucHJvdG90eXBlLCBcImluZm9cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtd2FybmluZycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXByaW1hcnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1kYW5nZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWJhc2ljJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9hc3RDb21wb25lbnQucHJvdG90eXBlLCBcImJhc2ljXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWNvbnRyb2wnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmRlc3Ryb3ktYnktY2xpY2snKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGVzdHJveUJ5Q2xpY2tcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5oYXMtaWNvbicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRvYXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJoYXNJY29uXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuY3VzdG9tLWljb24nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2FzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiY3VzdG9tSWNvblwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdExpc3RlbmVyKCdjbGljaycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iVG9hc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgbnVsbCk7XG4gICAgTmJUb2FzdENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi10b2FzdCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJpY29uLWNvbnRhaW5lclxcXCIgKm5nSWY9XFxcImhhc0ljb24gJiYgaWNvblxcXCI+XFxuICA8bmItaWNvbiBbY29uZmlnXT1cXFwiaWNvbkNvbmZpZ1xcXCI+PC9uYi1pY29uPlxcbjwvZGl2PlxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY29udGFpbmVyXFxcIj5cXG4gIDxzcGFuIGNsYXNzPVxcXCJ0aXRsZSBzdWJ0aXRsZVxcXCI+e3sgdG9hc3QudGl0bGUgfX08L3NwYW4+XFxuICA8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlXFxcIj57eyB0b2FzdC5tZXNzYWdlIH19PC9kaXY+XFxuPC9kaXY+XFxuXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7d2lkdGg6MjVyZW07bWFyZ2luOjAuNXJlbX06aG9zdCAudGl0bGV7bWFyZ2luLXJpZ2h0OjAuMjVyZW19Omhvc3QuZGVmYXVsdCAuY29udGVudC1jb250YWluZXIsOmhvc3Q6bm90KC5oYXMtaWNvbikgLmNvbnRlbnQtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3d9Omhvc3QuZGVzdHJveS1ieS1jbGlja3tjdXJzb3I6cG9pbnRlcn06aG9zdCBuYi1pY29ue2ZvbnQtc2l6ZToyLjVyZW19Omhvc3Qgc3Zne3dpZHRoOjIuNXJlbTtoZWlnaHQ6Mi41cmVtfVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtSZW5kZXJlcjIsIEVsZW1lbnRSZWZdKVxuICAgIF0sIE5iVG9hc3RDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlRvYXN0Q29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIHZvaWRTdGF0ZSA9IHN0eWxlKHtcbiAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKHt7IGRpcmVjdGlvbiB9fTExMCUpJyxcbiAgICBoZWlnaHQ6IDAsXG4gICAgbWFyZ2luTGVmdDogJzAnLFxuICAgIG1hcmdpblJpZ2h0OiAnMCcsXG4gICAgbWFyZ2luVG9wOiAnMCcsXG4gICAgbWFyZ2luQm90dG9tOiAnMCcsXG59KTtcbnZhciBkZWZhdWx0T3B0aW9ucyA9IHsgcGFyYW1zOiB7IGRpcmVjdGlvbjogJycgfSB9O1xudmFyIE5iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50KGxheW91dERpcmVjdGlvbiwgcG9zaXRpb25IZWxwZXIpIHtcbiAgICAgICAgdGhpcy5sYXlvdXREaXJlY3Rpb24gPSBsYXlvdXREaXJlY3Rpb247XG4gICAgICAgIHRoaXMucG9zaXRpb25IZWxwZXIgPSBwb3NpdGlvbkhlbHBlcjtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuY29udGVudCA9IFtdO1xuICAgIH1cbiAgICBOYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uLm9uRGlyZWN0aW9uQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMub25EaXJlY3Rpb25DaGFuZ2UoKTsgfSk7XG4gICAgfTtcbiAgICBOYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUub25EaXJlY3Rpb25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLnBvc2l0aW9uSGVscGVyLmlzUmlnaHRQb3NpdGlvbih0aGlzLnBvc2l0aW9uKSA/ICcnIDogJy0nO1xuICAgICAgICB0aGlzLmZhZGVJbiA9IHsgdmFsdWU6ICcnLCBwYXJhbXM6IHsgZGlyZWN0aW9uOiBkaXJlY3Rpb24gfSB9O1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSlcbiAgICBdLCBOYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIE5iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250ZXh0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUb2FzdHJDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZHJlbihOYlRvYXN0Q29tcG9uZW50KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFF1ZXJ5TGlzdClcbiAgICBdLCBOYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwidG9hc3RzXCIsIHZvaWQgMCk7XG4gICAgTmJUb2FzdHJDb250YWluZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdG9hc3RyLWNvbnRhaW5lcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPG5iLXRvYXN0IFtAZmFkZUluXT1cXFwiZmFkZUluXFxcIiAqbmdGb3I9XFxcImxldCB0b2FzdCBvZiBjb250ZW50XFxcIiBbdG9hc3RdPVxcXCJ0b2FzdFxcXCI+PC9uYi10b2FzdD5cIixcbiAgICAgICAgICAgIGFuaW1hdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKCdmYWRlSW4nLCBbXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJzplbnRlcicsIFt2b2lkU3RhdGUsIGFuaW1hdGUoMTAwKV0sIGRlZmF1bHRPcHRpb25zKSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbignOmxlYXZlJywgW2FuaW1hdGUoMTAwLCB2b2lkU3RhdGUpXSwgZGVmYXVsdE9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkxheW91dERpcmVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBOYlBvc2l0aW9uSGVscGVyXSlcbiAgICBdLCBOYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5CX1RPQVNUUl9DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0RlZmF1bHQgdG9hc3RyIG9wdGlvbnMnKTtcbi8qKlxuICogVGhlIGBOYlRvYXN0ckNvbmZpZ2AgY2xhc3MgZGVzY3JpYmVzIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGBOYlRvYXN0clNlcnZpY2Uuc2hvd2AgYW5kIGdsb2JhbCB0b2FzdHIgY29uZmlndXJhdGlvbi5cbiAqICovXG52YXIgTmJUb2FzdHJDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJUb2FzdHJDb25maWcoY29uZmlnKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXJlIG9uIHRoZSBzY3JlZW4gdG9hc3QgaGF2ZSB0byBiZSByZW5kZXJlZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9FTkQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdGF0dXMgY2hvb3NlcyBjb2xvciBzY2hlbWUgZm9yIHRoZSB0b2FzdC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRHVyYXRpb24gaXMgdGltZW91dCBiZXR3ZWVuIHRvYXN0IGFwcGVhcnMgYW5kIGRpc2FwcGVhcnMuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSAzMDAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVzdHJveSBieSBjbGljayBtZWFucyB5b3UgY2FuIGhpZGUgdGhlIHRvYXN0IGJ5IGNsaWNraW5nIGl0LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmRlc3Ryb3lCeUNsaWNrID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHByZXZlbnREdXBsaWNhdGVzIGlzIHRydWUgdGhlbiB0aGUgdG9hc3Qgd2l0aCB0aGUgc2FtZSB0aXRsZSwgbWVzc2FnZSBhbmQgc3RhdHVzIHdpbGwgbm90IGJlIHJlbmRlcmVkLlxuICAgICAgICAgKiBGaW5kIGR1cGxpY2F0ZXMgYmVoYXZpb3VyIGRldGVybWluZWQgYnkgYHByZXZlbnREdXBsaWNhdGVzYC5cbiAgICAgICAgICogVGhlIGRlZmF1bHQgYHByZXZpb3VzYCBkdXBsaWNhdGUgYmVoYXZpb3VyIGlzIHVzZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMucHJldmVudER1cGxpY2F0ZXMgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgdGhlIGhvdyB0byB0aHJlYXQgZHVwbGljYXRlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5kdXBsaWNhdGVzQmVoYXZpb3VyID0gJ3ByZXZpb3VzJztcbiAgICAgICAgLypcbiAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHZpc2libGUgdG9hc3RzLiBJZiB0aGUgbGltaXQgZXhjZWVkZWQgdGhlIG9sZGVzdCB0b2FzdCB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICAgICogKi9cbiAgICAgICAgdGhpcy5saW1pdCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGFzcyB0byBiZSBhcHBsaWVkIHRvIHRoZSB0b2FzdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG9hc3RDbGFzcyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyByZW5kZXIgaWNvbiBvciBub3QuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuaGFzSWNvbiA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJY29uIG5hbWUgb3IgaWNvbiBjb25maWcgb2JqZWN0IHRoYXQgY2FuIGJlIHByb3ZpZGVkIHRvIHJlbmRlciBjdXN0b20gaWNvbi5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5pY29uID0gJ2VtYWlsJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRvYXN0IHN0YXR1cyBpY29uLWNsYXNzIG1hcHBpbmcuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuaWNvbnMgPSB7XG4gICAgICAgICAgICBkYW5nZXI6ICdmbGFzaC1vdXRsaW5lJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ICdjaGVja21hcmstb3V0bGluZScsXG4gICAgICAgICAgICBpbmZvOiAncXVlc3Rpb24tbWFyay1vdXRsaW5lJyxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdhbGVydC10cmlhbmdsZS1vdXRsaW5lJyxcbiAgICAgICAgICAgIHByaW1hcnk6ICdlbWFpbC1vdXRsaW5lJyxcbiAgICAgICAgICAgIGNvbnRyb2w6ICdlbWFpbC1vdXRsaW5lJyxcbiAgICAgICAgICAgIGJhc2ljOiAnZW1haWwtb3V0bGluZScsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChjb25maWcuc3RhdHVzID09PSAnJykge1xuICAgICAgICAgICAgZW1wdHlTdGF0dXNXYXJuaW5nKCdOYlRvYXN0cicpO1xuICAgICAgICAgICAgY29uZmlnLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXRjaEljb24oY29uZmlnKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjb25maWcpO1xuICAgIH1cbiAgICBOYlRvYXN0ckNvbmZpZy5wcm90b3R5cGUucGF0Y2hJY29uID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBpZiAoISgnaWNvbicgaW4gY29uZmlnKSkge1xuICAgICAgICAgICAgY29uZmlnLmljb24gPSB7XG4gICAgICAgICAgICAgICAgaWNvbjogdGhpcy5pY29uc1tjb25maWcuc3RhdHVzIHx8ICdiYXNpYyddLFxuICAgICAgICAgICAgICAgIHBhY2s6ICduZWJ1bGFyLWVzc2VudGlhbHMnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE5iVG9hc3RyQ29uZmlnO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iVG9hc3RSZWYgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJUb2FzdFJlZih0b2FzdENvbnRhaW5lciwgdG9hc3QpIHtcbiAgICAgICAgdGhpcy50b2FzdENvbnRhaW5lciA9IHRvYXN0Q29udGFpbmVyO1xuICAgICAgICB0aGlzLnRvYXN0ID0gdG9hc3Q7XG4gICAgfVxuICAgIE5iVG9hc3RSZWYucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRvYXN0Q29udGFpbmVyLmRlc3Ryb3kodGhpcy50b2FzdCk7XG4gICAgfTtcbiAgICByZXR1cm4gTmJUb2FzdFJlZjtcbn0oKSk7XG52YXIgTmJUb2FzdENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRvYXN0Q29udGFpbmVyKHBvc2l0aW9uLCBjb250YWluZXJSZWYsIHBvc2l0aW9uSGVscGVyKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5jb250YWluZXJSZWYgPSBjb250YWluZXJSZWY7XG4gICAgICAgIHRoaXMucG9zaXRpb25IZWxwZXIgPSBwb3NpdGlvbkhlbHBlcjtcbiAgICAgICAgdGhpcy50b2FzdHMgPSBbXTtcbiAgICAgICAgdGhpcy50b2FzdER1cGxpY2F0ZUNvbXBhcmVGdW5jID0gZnVuY3Rpb24gKHQxLCB0Mikge1xuICAgICAgICAgICAgcmV0dXJuIHQxLm1lc3NhZ2UgPT09IHQyLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAmJiB0MS50aXRsZSA9PT0gdDIudGl0bGVcbiAgICAgICAgICAgICAgICAmJiB0MS5jb25maWcuc3RhdHVzID09PSB0Mi5jb25maWcuc3RhdHVzO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb2FzdENvbnRhaW5lci5wcm90b3R5cGUsIFwibmF0aXZlRWxlbWVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iVG9hc3RDb250YWluZXIucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uICh0b2FzdCkge1xuICAgICAgICBpZiAodG9hc3QuY29uZmlnLnByZXZlbnREdXBsaWNhdGVzICYmIHRoaXMuaXNEdXBsaWNhdGUodG9hc3QpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVUb2FzdElmTGltaXRSZWFjaGVkKHRvYXN0KTtcbiAgICAgICAgdmFyIHRvYXN0Q29tcG9uZW50ID0gdGhpcy5hdHRhY2hUb2FzdCh0b2FzdCk7XG4gICAgICAgIGlmICh0b2FzdC5jb25maWcuZGVzdHJveUJ5Q2xpY2spIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlT25DbGljayh0b2FzdENvbXBvbmVudCwgdG9hc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2FzdC5jb25maWcuZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RGVzdHJveVRpbWVvdXQodG9hc3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJldlRvYXN0ID0gdG9hc3Q7XG4gICAgICAgIHJldHVybiBuZXcgTmJUb2FzdFJlZih0aGlzLCB0b2FzdCk7XG4gICAgfTtcbiAgICBOYlRvYXN0Q29udGFpbmVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKHRvYXN0KSB7XG4gICAgICAgIGlmICh0aGlzLnByZXZUb2FzdCA9PT0gdG9hc3QpIHtcbiAgICAgICAgICAgIHRoaXMucHJldlRvYXN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvYXN0cyA9IHRoaXMudG9hc3RzLmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAhPT0gdG9hc3Q7IH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigpO1xuICAgIH07XG4gICAgTmJUb2FzdENvbnRhaW5lci5wcm90b3R5cGUuaXNEdXBsaWNhdGUgPSBmdW5jdGlvbiAodG9hc3QpIHtcbiAgICAgICAgcmV0dXJuIHRvYXN0LmNvbmZpZy5kdXBsaWNhdGVzQmVoYXZpb3VyID09PSAncHJldmlvdXMnXG4gICAgICAgICAgICA/IHRoaXMuaXNEdXBsaWNhdGVQcmV2aW91cyh0b2FzdClcbiAgICAgICAgICAgIDogdGhpcy5pc0R1cGxpY2F0ZUFtb25nQWxsKHRvYXN0KTtcbiAgICB9O1xuICAgIE5iVG9hc3RDb250YWluZXIucHJvdG90eXBlLmlzRHVwbGljYXRlUHJldmlvdXMgPSBmdW5jdGlvbiAodG9hc3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldlRvYXN0ICYmIHRoaXMudG9hc3REdXBsaWNhdGVDb21wYXJlRnVuYyh0aGlzLnByZXZUb2FzdCwgdG9hc3QpO1xuICAgIH07XG4gICAgTmJUb2FzdENvbnRhaW5lci5wcm90b3R5cGUuaXNEdXBsaWNhdGVBbW9uZ0FsbCA9IGZ1bmN0aW9uICh0b2FzdCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy50b2FzdHMuc29tZShmdW5jdGlvbiAodCkgeyByZXR1cm4gX3RoaXMudG9hc3REdXBsaWNhdGVDb21wYXJlRnVuYyh0LCB0b2FzdCk7IH0pO1xuICAgIH07XG4gICAgTmJUb2FzdENvbnRhaW5lci5wcm90b3R5cGUucmVtb3ZlVG9hc3RJZkxpbWl0UmVhY2hlZCA9IGZ1bmN0aW9uICh0b2FzdCkge1xuICAgICAgICBpZiAoIXRvYXN0LmNvbmZpZy5saW1pdCB8fCB0aGlzLnRvYXN0cy5sZW5ndGggPCB0b2FzdC5jb25maWcubGltaXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbkhlbHBlci5pc1RvcFBvc2l0aW9uKHRvYXN0LmNvbmZpZy5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgIHRoaXMudG9hc3RzLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2FzdHMuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJUb2FzdENvbnRhaW5lci5wcm90b3R5cGUuYXR0YWNoVG9hc3QgPSBmdW5jdGlvbiAodG9hc3QpIHtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb25IZWxwZXIuaXNUb3BQb3NpdGlvbih0b2FzdC5jb25maWcucG9zaXRpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hUb1RvcCh0b2FzdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hUb0JvdHRvbSh0b2FzdCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iVG9hc3RDb250YWluZXIucHJvdG90eXBlLmF0dGFjaFRvVG9wID0gZnVuY3Rpb24gKHRvYXN0KSB7XG4gICAgICAgIHRoaXMudG9hc3RzLnVuc2hpZnQodG9hc3QpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJSZWYuaW5zdGFuY2UudG9hc3RzLmZpcnN0O1xuICAgIH07XG4gICAgTmJUb2FzdENvbnRhaW5lci5wcm90b3R5cGUuYXR0YWNoVG9Cb3R0b20gPSBmdW5jdGlvbiAodG9hc3QpIHtcbiAgICAgICAgdGhpcy50b2FzdHMucHVzaCh0b2FzdCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lclJlZi5pbnN0YW5jZS50b2FzdHMubGFzdDtcbiAgICB9O1xuICAgIE5iVG9hc3RDb250YWluZXIucHJvdG90eXBlLnNldERlc3Ryb3lUaW1lb3V0ID0gZnVuY3Rpb24gKHRvYXN0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZGVzdHJveSh0b2FzdCk7IH0sIHRvYXN0LmNvbmZpZy5kdXJhdGlvbik7XG4gICAgfTtcbiAgICBOYlRvYXN0Q29udGFpbmVyLnByb3RvdHlwZS5zdWJzY3JpYmVPbkNsaWNrID0gZnVuY3Rpb24gKHRvYXN0Q29tcG9uZW50LCB0b2FzdCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0b2FzdENvbXBvbmVudC5kZXN0cm95LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5kZXN0cm95KHRvYXN0KTsgfSk7XG4gICAgfTtcbiAgICBOYlRvYXN0Q29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBhdGNoKHRoaXMuY29udGFpbmVyUmVmLCB7IGNvbnRlbnQ6IHRoaXMudG9hc3RzLCBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiB9KTtcbiAgICB9O1xuICAgIHJldHVybiBOYlRvYXN0Q29udGFpbmVyO1xufSgpKTtcbnZhciBOYlRvYXN0ckNvbnRhaW5lclJlZ2lzdHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVG9hc3RyQ29udGFpbmVyUmVnaXN0cnkob3ZlcmxheSwgcG9zaXRpb25CdWlsZGVyLCBwb3NpdGlvbkhlbHBlciwgY2ZyLCBkb2N1bWVudCkge1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgICB0aGlzLnBvc2l0aW9uQnVpbGRlciA9IHBvc2l0aW9uQnVpbGRlcjtcbiAgICAgICAgdGhpcy5wb3NpdGlvbkhlbHBlciA9IHBvc2l0aW9uSGVscGVyO1xuICAgICAgICB0aGlzLmNmciA9IGNmcjtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLm92ZXJsYXlzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBOYlRvYXN0ckNvbnRhaW5lclJlZ2lzdHJ5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgdmFyIGxvZ2ljYWxQb3NpdGlvbiA9IHRoaXMucG9zaXRpb25IZWxwZXIudG9Mb2dpY2FsUG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgICB2YXIgb3ZlcmxheVdpdGhDb250YWluZXIgPSB0aGlzLm92ZXJsYXlzLmdldChsb2dpY2FsUG9zaXRpb24pO1xuICAgICAgICBpZiAoIW92ZXJsYXlXaXRoQ29udGFpbmVyIHx8ICF0aGlzLmV4aXN0c0luRG9tKG92ZXJsYXlXaXRoQ29udGFpbmVyLnRvYXN0ckNvbnRhaW5lcikpIHtcbiAgICAgICAgICAgIGlmIChvdmVybGF5V2l0aENvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIG92ZXJsYXlXaXRoQ29udGFpbmVyLm92ZXJsYXlSZWYuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnN0YW50aWF0ZUNvbnRhaW5lcihsb2dpY2FsUG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlzLmdldChsb2dpY2FsUG9zaXRpb24pLnRvYXN0ckNvbnRhaW5lcjtcbiAgICB9O1xuICAgIE5iVG9hc3RyQ29udGFpbmVyUmVnaXN0cnkucHJvdG90eXBlLmluc3RhbnRpYXRlQ29udGFpbmVyID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciB0b2FzdHJPdmVybGF5V2l0aENvbnRhaW5lciA9IHRoaXMuY3JlYXRlQ29udGFpbmVyKHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5vdmVybGF5cy5zZXQocG9zaXRpb24sIHRvYXN0ck92ZXJsYXlXaXRoQ29udGFpbmVyKTtcbiAgICB9O1xuICAgIE5iVG9hc3RyQ29udGFpbmVyUmVnaXN0cnkucHJvdG90eXBlLmNyZWF0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICB2YXIgcG9zaXRpb25TdHJhdGVneSA9IHRoaXMucG9zaXRpb25CdWlsZGVyLmdsb2JhbCgpLnBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgdmFyIHJlZiA9IHRoaXMub3ZlcmxheS5jcmVhdGUoeyBwb3NpdGlvblN0cmF0ZWd5OiBwb3NpdGlvblN0cmF0ZWd5IH0pO1xuICAgICAgICB0aGlzLmFkZENsYXNzVG9PdmVybGF5SG9zdChyZWYpO1xuICAgICAgICB2YXIgY29udGFpbmVyUmVmID0gcmVmLmF0dGFjaChuZXcgTmJDb21wb25lbnRQb3J0YWwoTmJUb2FzdHJDb250YWluZXJDb21wb25lbnQsIG51bGwsIG51bGwsIHRoaXMuY2ZyKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvdmVybGF5UmVmOiByZWYsXG4gICAgICAgICAgICB0b2FzdHJDb250YWluZXI6IG5ldyBOYlRvYXN0Q29udGFpbmVyKHBvc2l0aW9uLCBjb250YWluZXJSZWYsIHRoaXMucG9zaXRpb25IZWxwZXIpLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgTmJUb2FzdHJDb250YWluZXJSZWdpc3RyeS5wcm90b3R5cGUuYWRkQ2xhc3NUb092ZXJsYXlIb3N0ID0gZnVuY3Rpb24gKG92ZXJsYXlSZWYpIHtcbiAgICAgICAgb3ZlcmxheVJlZi5ob3N0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0b2FzdHItb3ZlcmxheS1jb250YWluZXInKTtcbiAgICB9O1xuICAgIE5iVG9hc3RyQ29udGFpbmVyUmVnaXN0cnkucHJvdG90eXBlLmV4aXN0c0luRG9tID0gZnVuY3Rpb24gKHRvYXN0Q29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50LmJvZHkuY29udGFpbnModG9hc3RDb250YWluZXIubmF0aXZlRWxlbWVudCk7XG4gICAgfTtcbiAgICBOYlRvYXN0ckNvbnRhaW5lclJlZ2lzdHJ5ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19wYXJhbSg0LCBJbmplY3QoTkJfRE9DVU1FTlQpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYk92ZXJsYXlTZXJ2aWNlLFxuICAgICAgICAgICAgTmJQb3NpdGlvbkJ1aWxkZXJTZXJ2aWNlLFxuICAgICAgICAgICAgTmJQb3NpdGlvbkhlbHBlcixcbiAgICAgICAgICAgIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgT2JqZWN0XSlcbiAgICBdLCBOYlRvYXN0ckNvbnRhaW5lclJlZ2lzdHJ5KTtcbiAgICByZXR1cm4gTmJUb2FzdHJDb250YWluZXJSZWdpc3RyeTtcbn0oKSk7XG4vKipcbiAqIFRoZSBgTmJUb2FzdHJTZXJ2aWNlYCBwcm92aWRlcyBhIGNhcGFiaWxpdHkgdG8gYnVpbGQgdG9hc3Qgbm90aWZpY2F0aW9ucy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCB0b2FzdHIvdG9hc3RyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBgTmJUb2FzdHJTZXJ2aWNlLnNob3cobWVzc2FnZSwgdGl0bGUsIGNvbmZpZylgIGFjY2VwdHMgdGhyZWUgcGFyYW1zLCB0aXRsZSBhbmQgY29uZmlnIGFyZSBvcHRpb25hbC5cbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlRvYXN0ck1vZHVsZS5mb3JSb290KClgIHRvIHlvdXIgYXBwIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJUb2FzdHJNb2R1bGUuZm9yUm9vdChjb25maWcpLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBDYWxsaW5nIGBOYlRvYXN0clNlcnZpY2Uuc2hvdyguLi4pYCB3aWxsIHJlbmRlciBuZXcgdG9hc3QgYW5kIHJldHVybiBgTmJUb2FzdHJSZWZgIHdpdGhcbiAqIGhlbHAgb2Ygd2hpY2ggeW91IG1heSBjbG9zZSBuZXdseSBjcmVhdGVkIHRvYXN0IGJ5IGNhbGxpbmcgYGNsb3NlYCBtZXRob2QuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHRvYXN0UmVmOiBOYlRvYXN0UmVmID0gdGhpcy50b2FzdHJTZXJ2aWNlLnNob3coLi4uKTtcbiAqIHRvYXN0UmVmLmNsb3NlKCk7XG4gKiBgYGBcbiAqXG4gKiBDb25maWcgYWNjZXB0cyBmb2xsb3dpbmcgb3B0aW9uczpcbiAqXG4gKiBgcG9zaXRpb25gIC0gZGV0ZXJtaW5lcyB3aGVyZSBvbiB0aGUgc2NyZWVuIHRvYXN0IHdpbGwgYmUgcmVuZGVyZWQuXG4gKiBEZWZhdWx0IGlzIGB0b3AtZW5kYC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFBvc2l0aW9uLCB0b2FzdHIvdG9hc3RyLXBvc2l0aW9ucy5jb21wb25lbnQpXG4gKlxuICogYHN0YXR1c2AgLSBjb2xvcmluZyBhbmQgaWNvbiBvZiB0aGUgdG9hc3QuXG4gKiBEZWZhdWx0IGlzIGBiYXNpY2AuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTdGF0dXMsIHRvYXN0ci90b2FzdHItc3RhdHVzZXMuY29tcG9uZW50KVxuICpcbiAqIGBkdXJhdGlvbmAgLSB0aGUgdGltZSBhZnRlciB3aGljaCB0aGUgdG9hc3Qgd2lsbCBiZSBkZXN0cm95ZWQuXG4gKiBgMGAgbWVhbnMgZW5kbGVzcyB0b2FzdCwgdGhhdCBtYXkgYmUgZGVzdHJveWVkIGJ5IGNsaWNrIG9ubHkuXG4gKiBEZWZhdWx0IGlzIDMwMDAgbXMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShEdXJhdGlvbiwgdG9hc3RyL3RvYXN0ci1kdXJhdGlvbi5jb21wb25lbnQpXG4gKlxuICogYGRlc3Ryb3lCeUNsaWNrYCAtIHByb3ZpZGVzIGEgY2FwYWJpbGl0eSB0byBkZXN0cm95IHRvYXN0IGJ5IGNsaWNrLlxuICogRGVmYXVsdCBpcyB0cnVlLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRGVzdHJveSBieSBjbGljaywgdG9hc3RyL3RvYXN0ci1kZXN0cm95LWJ5LWNsaWNrLmNvbXBvbmVudClcbiAqXG4gKiBgcHJldmVudER1cGxpY2F0ZXNgIC0gZG9uJ3QgY3JlYXRlIG5ldyB0b2FzdCBpZiBpdCBoYXMgdGhlIHNhbWUgdGl0bGUsIG1lc3NhZ2UgYW5kIHN0YXR1cy5cbiAqIERlZmF1bHQgaXMgZmFsc2UuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShQcmV2ZW50IGR1cGxpY2F0ZXMsIHRvYXN0ci90b2FzdHItcHJldmVudC1kdXBsaWNhdGVzLmNvbXBvbmVudClcbiAqXG4gKiBgZHVwbGljYXRlc0JlaGF2aW91cmAgLSBkZXRlcm1pbmVzIGhvdyB0byB0aHJlYXQgdGhlIHRvYXN0cyBkdXBsaWNhdGlvbi5cbiAqIENvbXBhcmUgd2l0aCB0aGUgcHJldmlvdXMgbWVzc2FnZSBgcHJldmlvdXNgXG4gKiBvciB3aXRoIGFsbCB2aXNpYmxlIG1lc3NhZ2VzIGBhbGxgLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUHJldmVudCBkdXBsaWNhdGVzIGJlaGF2aW91ciAsIHRvYXN0ci90b2FzdHItcHJldmVudC1kdXBsaWNhdGVzLWJlaGF2aW91ci5jb21wb25lbnQpXG4gKlxuICogYGxpbWl0YCAtIHRoZSBudW1iZXIgb2YgdmlzaWJsZSB0b2FzdHMgaW4gdGhlIHRvYXN0IGNvbnRhaW5lci4gVGhlIG51bWJlciBvZiB0b2FzdHMgaXMgdW5saW1pdGVkIGJ5IGRlZmF1bHQuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShQcmV2ZW50IGR1cGxpY2F0ZXMgYmVoYXZpb3VyICwgdG9hc3RyL3RvYXN0ci1saW1pdC5jb21wb25lbnQpXG4gKlxuICogYGhhc0ljb25gIC0gaWYgdHJ1ZSB0aGVuIHJlbmRlciB0b2FzdCBpY29uLlxuICogYGljb25gIC0geW91IGNhbiBwYXNzIGljb24gY2xhc3MgdGhhdCB3aWxsIGJlIGFwcGxpZWQgaW50byB0aGUgdG9hc3QuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShIYXMgaWNvbiwgdG9hc3RyL3RvYXN0ci1pY29uLmNvbXBvbmVudClcbiAqICovXG52YXIgTmJUb2FzdHJTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVG9hc3RyU2VydmljZShnbG9iYWxDb25maWcsIGNvbnRhaW5lclJlZ2lzdHJ5KSB7XG4gICAgICAgIHRoaXMuZ2xvYmFsQ29uZmlnID0gZ2xvYmFsQ29uZmlnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lclJlZ2lzdHJ5ID0gY29udGFpbmVyUmVnaXN0cnk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNob3dzIHRvYXN0IHdpdGggbWVzc2FnZSwgdGl0bGUgYW5kIHVzZXIgY29uZmlnLlxuICAgICAqICovXG4gICAgTmJUb2FzdHJTZXJ2aWNlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHRpdGxlLCB1c2VyQ29uZmlnKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBuZXcgTmJUb2FzdHJDb25maWcoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuZ2xvYmFsQ29uZmlnKSwgdXNlckNvbmZpZykpO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJSZWdpc3RyeS5nZXQoY29uZmlnLnBvc2l0aW9uKTtcbiAgICAgICAgdmFyIHRvYXN0ID0geyBtZXNzYWdlOiBtZXNzYWdlLCB0aXRsZTogdGl0bGUsIGNvbmZpZzogY29uZmlnIH07XG4gICAgICAgIHJldHVybiBjb250YWluZXIuYXR0YWNoKHRvYXN0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNob3dzIHN1Y2Nlc3MgdG9hc3Qgd2l0aCBtZXNzYWdlLCB0aXRsZSBhbmQgdXNlciBjb25maWcuXG4gICAgICogKi9cbiAgICBOYlRvYXN0clNlcnZpY2UucHJvdG90eXBlLnN1Y2Nlc3MgPSBmdW5jdGlvbiAobWVzc2FnZSwgdGl0bGUsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsIHRpdGxlLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29uZmlnKSwgeyBzdGF0dXM6ICdzdWNjZXNzJyB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG93cyBpbmZvIHRvYXN0IHdpdGggbWVzc2FnZSwgdGl0bGUgYW5kIHVzZXIgY29uZmlnLlxuICAgICAqICovXG4gICAgTmJUb2FzdHJTZXJ2aWNlLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHRpdGxlLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvdyhtZXNzYWdlLCB0aXRsZSwgX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbmZpZyksIHsgc3RhdHVzOiAnaW5mbycgfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvd3Mgd2FybmluZyB0b2FzdCB3aXRoIG1lc3NhZ2UsIHRpdGxlIGFuZCB1c2VyIGNvbmZpZy5cbiAgICAgKiAqL1xuICAgIE5iVG9hc3RyU2VydmljZS5wcm90b3R5cGUud2FybmluZyA9IGZ1bmN0aW9uIChtZXNzYWdlLCB0aXRsZSwgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3cobWVzc2FnZSwgdGl0bGUsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb25maWcpLCB7IHN0YXR1czogJ3dhcm5pbmcnIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNob3dzIHByaW1hcnkgdG9hc3Qgd2l0aCBtZXNzYWdlLCB0aXRsZSBhbmQgdXNlciBjb25maWcuXG4gICAgICogKi9cbiAgICBOYlRvYXN0clNlcnZpY2UucHJvdG90eXBlLnByaW1hcnkgPSBmdW5jdGlvbiAobWVzc2FnZSwgdGl0bGUsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsIHRpdGxlLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29uZmlnKSwgeyBzdGF0dXM6ICdwcmltYXJ5JyB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG93cyBkYW5nZXIgdG9hc3Qgd2l0aCBtZXNzYWdlLCB0aXRsZSBhbmQgdXNlciBjb25maWcuXG4gICAgICogKi9cbiAgICBOYlRvYXN0clNlcnZpY2UucHJvdG90eXBlLmRhbmdlciA9IGZ1bmN0aW9uIChtZXNzYWdlLCB0aXRsZSwgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3cobWVzc2FnZSwgdGl0bGUsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb25maWcpLCB7IHN0YXR1czogJ2RhbmdlcicgfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvd3MgZGVmYXVsdCB0b2FzdCB3aXRoIG1lc3NhZ2UsIHRpdGxlIGFuZCB1c2VyIGNvbmZpZy5cbiAgICAgKiAqL1xuICAgIE5iVG9hc3RyU2VydmljZS5wcm90b3R5cGUuZGVmYXVsdCA9IGZ1bmN0aW9uIChtZXNzYWdlLCB0aXRsZSwgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3cobWVzc2FnZSwgdGl0bGUsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb25maWcpLCB7IHN0YXR1czogJ2Jhc2ljJyB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG93cyBjb250cm9sIHRvYXN0IHdpdGggbWVzc2FnZSwgdGl0bGUgYW5kIHVzZXIgY29uZmlnLlxuICAgICAqICovXG4gICAgTmJUb2FzdHJTZXJ2aWNlLnByb3RvdHlwZS5jb250cm9sID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHRpdGxlLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdChtZXNzYWdlLCB0aXRsZSwgX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbmZpZyksIHsgc3RhdHVzOiAnY29udHJvbCcgfSkpO1xuICAgIH07XG4gICAgTmJUb2FzdHJTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19wYXJhbSgwLCBJbmplY3QoTkJfVE9BU1RSX0NPTkZJRykpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iVG9hc3RyQ29uZmlnLFxuICAgICAgICAgICAgTmJUb2FzdHJDb250YWluZXJSZWdpc3RyeV0pXG4gICAgXSwgTmJUb2FzdHJTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJUb2FzdHJTZXJ2aWNlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iVG9hc3RyTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVG9hc3RyTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYlRvYXN0ck1vZHVsZV8xID0gTmJUb2FzdHJNb2R1bGU7XG4gICAgTmJUb2FzdHJNb2R1bGUuZm9yUm9vdCA9IGZ1bmN0aW9uICh0b2FzdHJDb25maWcpIHtcbiAgICAgICAgaWYgKHRvYXN0ckNvbmZpZyA9PT0gdm9pZCAwKSB7IHRvYXN0ckNvbmZpZyA9IHt9OyB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJUb2FzdHJNb2R1bGVfMSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iVG9hc3RyU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYlRvYXN0ckNvbnRhaW5lclJlZ2lzdHJ5LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfVE9BU1RSX0NPTkZJRywgdXNlVmFsdWU6IHRvYXN0ckNvbmZpZyB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBOYlRvYXN0ck1vZHVsZV8xO1xuICAgIE5iVG9hc3RyTW9kdWxlID0gTmJUb2FzdHJNb2R1bGVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbTmJTaGFyZWRNb2R1bGUsIE5iT3ZlcmxheU1vZHVsZSwgTmJJY29uTW9kdWxlXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50LCBOYlRvYXN0Q29tcG9uZW50XSxcbiAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW05iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50LCBOYlRvYXN0Q29tcG9uZW50XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlRvYXN0ck1vZHVsZSk7XG4gICAgcmV0dXJuIE5iVG9hc3RyTW9kdWxlO1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFRvb2x0aXAgY29udGFpbmVyLlxuICogUmVuZGVycyBwcm92aWRlZCB0b29sdGlwIGluc2lkZS5cbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogdG9vbHRpcC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9vbHRpcC1ib3JkZXItY29sb3I6XG4gKiB0b29sdGlwLWJvcmRlci1zdHlsZTpcbiAqIHRvb2x0aXAtYm9yZGVyLXdpZHRoOlxuICogdG9vbHRpcC1ib3JkZXItcmFkaXVzOlxuICogdG9vbHRpcC1wYWRkaW5nOlxuICogdG9vbHRpcC10ZXh0LWNvbG9yOlxuICogdG9vbHRpcC10ZXh0LWZvbnQtZmFtaWx5OlxuICogdG9vbHRpcC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRvb2x0aXAtdGV4dC1mb250LXdlaWdodDpcbiAqIHRvb2x0aXAtdGV4dC1saW5lLWhlaWdodDpcbiAqIHRvb2x0aXAtaWNvbi1oZWlnaHQ6XG4gKiB0b29sdGlwLWljb24td2lkdGg6XG4gKiB0b29sdGlwLW1heC13aWR0aDpcbiAqIHRvb2x0aXAtYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvb2x0aXAtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogdG9vbHRpcC1iYXNpYy10ZXh0LWNvbG9yOlxuICogdG9vbHRpcC1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiB0b29sdGlwLXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogdG9vbHRpcC1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiB0b29sdGlwLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvb2x0aXAtaW5mby1ib3JkZXItY29sb3I6XG4gKiB0b29sdGlwLWluZm8tdGV4dC1jb2xvcjpcbiAqIHRvb2x0aXAtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9vbHRpcC1zdWNjZXNzLWJvcmRlci1jb2xvcjpcbiAqIHRvb2x0aXAtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogdG9vbHRpcC13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b29sdGlwLXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogdG9vbHRpcC13YXJuaW5nLXRleHQtY29sb3I6XG4gKiB0b29sdGlwLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9vbHRpcC1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogdG9vbHRpcC1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHRvb2x0aXAtY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9vbHRpcC1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIHRvb2x0aXAtY29udHJvbC10ZXh0LWNvbG9yOlxuICogdG9vbHRpcC1zaGFkb3c6XG4gKi9cbnZhciBOYlRvb2x0aXBDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJUb29sdGlwQ29tcG9uZW50KCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogUG9wb3ZlciBwb3NpdGlvbiByZWxhdGl2ZWx5IGhvc3QgZWxlbWVudC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE5iUG9zaXRpb24uVE9QO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSB7fTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9vbHRpcENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmluZGluZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gKyBcIiBcIiArIHRoaXMuc3RhdHVzQ2xhc3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvb2x0aXBDb21wb25lbnQucHJvdG90eXBlLCBcInNob3dcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb29sdGlwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0dXNDbGFzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dC5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGF0dXMtXCIgKyB0aGlzLmNvbnRleHQuc3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBUaGUgbWV0aG9kIGlzIGVtcHR5IHNpbmNlIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgYWRkaXRpb25hbGx5XG4gICAgICogcmVuZGVyIGlzIGhhbmRsZWQgYnkgY2hhbmdlIGRldGVjdGlvblxuICAgICAqL1xuICAgIE5iVG9vbHRpcENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlRvb2x0aXBDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRlbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlRvb2x0aXBDb21wb25lbnQucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9vbHRpcENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmluZGluZ1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ0BzaG93VG9vbHRpcCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9vbHRpcENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlRvb2x0aXBDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRleHRcIiwgdm9pZCAwKTtcbiAgICBOYlRvb2x0aXBDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdG9vbHRpcCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPHNwYW4gY2xhc3M9XFxcImFycm93XFxcIj48L3NwYW4+XFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnRcXFwiPlxcbiAgICAgIDxuYi1pY29uICpuZ0lmPVxcXCJjb250ZXh0Py5pY29uXFxcIiBbY29uZmlnXT1cXFwiY29udGV4dC5pY29uXFxcIj48L25iLWljb24+XFxuICAgICAgPHNwYW4gKm5nSWY9XFxcImNvbnRlbnRcXFwiPnt7IGNvbnRlbnQgfX08L3NwYW4+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICBhbmltYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgdHJpZ2dlcignc2hvd1Rvb2x0aXAnLCBbXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlKCdpbicsIHN0eWxlKHsgb3BhY2l0eTogMSB9KSksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlKHsgb3BhY2l0eTogMCB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGUoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gdm9pZCcsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGUoMTAwLCBzdHlsZSh7IG9wYWNpdHk6IDAgfSkpLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e3otaW5kZXg6MTAwMDB9Omhvc3QgLmNvbnRlbnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn06aG9zdC5yaWdodCAuY29udGVudHtmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZX06aG9zdCAuYXJyb3d7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MDtoZWlnaHQ6MH06aG9zdCBuYi1pY29uK3NwYW57bWFyZ2luLWxlZnQ6MC41cmVtfTpob3N0LnJpZ2h0IG5iLWljb24rc3BhbnttYXJnaW4tcmlnaHQ6MC41cmVtfTpob3N0IC5hcnJvd3tib3JkZXItbGVmdDo2cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OjZweCBzb2xpZCB0cmFuc3BhcmVudH06aG9zdCguYm90dG9tKSAuYXJyb3d7dG9wOi02cHg7bGVmdDpjYWxjKDUwJSAtIDZweCl9Omhvc3QoLmJvdHRvbS1zdGFydCkgLmFycm93e3RvcDotNnB4fVtkaXI9bHRyXSA6aG9zdCguYm90dG9tLXN0YXJ0KSAuYXJyb3d7cmlnaHQ6NnB4fVtkaXI9cnRsXSA6aG9zdCguYm90dG9tLXN0YXJ0KSAuYXJyb3d7bGVmdDo2cHh9Omhvc3QoLmJvdHRvbS1lbmQpIC5hcnJvd3t0b3A6LTZweH1bZGlyPWx0cl0gOmhvc3QoLmJvdHRvbS1lbmQpIC5hcnJvd3tsZWZ0OjZweH1bZGlyPXJ0bF0gOmhvc3QoLmJvdHRvbS1lbmQpIC5hcnJvd3tyaWdodDo2cHh9Omhvc3QoLmxlZnQpIC5hcnJvdyw6aG9zdCguc3RhcnQpIC5hcnJvd3t0b3A6Y2FsYyg1MCUgLSAyLjRweCl9W2Rpcj1sdHJdIDpob3N0KC5sZWZ0KSAuYXJyb3csW2Rpcj1sdHJdIDpob3N0KC5zdGFydCkgLmFycm93e3JpZ2h0Oi04cHg7dHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyl9W2Rpcj1ydGxdIDpob3N0KC5sZWZ0KSAuYXJyb3csW2Rpcj1ydGxdIDpob3N0KC5zdGFydCkgLmFycm93e2xlZnQ6LThweDt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9Omhvc3QoLnN0YXJ0LXRvcCkgLmFycm93e3JpZ2h0Oi04cHg7Ym90dG9tOjZweDt0cmFuc2Zvcm06cm90YXRlKDkwZGVnKX06aG9zdCguc3RhcnQtYm90dG9tKSAuYXJyb3d7cmlnaHQ6LThweDt0b3A6NnB4O3RyYW5zZm9ybTpyb3RhdGUoOTBkZWcpfTpob3N0KC50b3ApIC5hcnJvd3tib3R0b206LTZweDtsZWZ0OmNhbGMoNTAlIC0gNnB4KTt0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyl9Omhvc3QoLnRvcC1zdGFydCkgLmFycm93e2JvdHRvbTpjYWxjKC0xICogNnB4ICsgMXB4KTt0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyl9W2Rpcj1sdHJdIDpob3N0KC50b3Atc3RhcnQpIC5hcnJvd3tyaWdodDo2cHh9W2Rpcj1ydGxdIDpob3N0KC50b3Atc3RhcnQpIC5hcnJvd3tsZWZ0OjZweH06aG9zdCgudG9wLWVuZCkgLmFycm93e2JvdHRvbTpjYWxjKC02cHggKyAxcHgpO3RyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKX1bZGlyPWx0cl0gOmhvc3QoLnRvcC1lbmQpIC5hcnJvd3tsZWZ0OjZweH1bZGlyPXJ0bF0gOmhvc3QoLnRvcC1lbmQpIC5hcnJvd3tyaWdodDo2cHh9Omhvc3QoLnJpZ2h0KSAuYXJyb3csOmhvc3QoLmVuZCkgLmFycm93e3RvcDpjYWxjKDUwJSAtIDIuNHB4KX1bZGlyPWx0cl0gOmhvc3QoLnJpZ2h0KSAuYXJyb3csW2Rpcj1sdHJdIDpob3N0KC5lbmQpIC5hcnJvd3tsZWZ0Oi04cHg7dHJhbnNmb3JtOnJvdGF0ZSgyNzBkZWcpfVtkaXI9cnRsXSA6aG9zdCgucmlnaHQpIC5hcnJvdyxbZGlyPXJ0bF0gOmhvc3QoLmVuZCkgLmFycm93e3JpZ2h0Oi04cHg7dHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyl9Omhvc3QoLmVuZC10b3ApIC5hcnJvd3tsZWZ0OmNhbGMoLTZweCAtIDZweCAvIDIuNSk7Ym90dG9tOjZweDt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9Omhvc3QoLmVuZC1ib3R0b20pIC5hcnJvd3tsZWZ0OmNhbGMoLTZweCAtIDZweCAvIDIuNSk7dG9wOjZweDt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9XFxuXCJdXG4gICAgICAgIH0pXG4gICAgXSwgTmJUb29sdGlwQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJUb29sdGlwQ29tcG9uZW50O1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqXG4gKiBUb29sdGlwIGRpcmVjdGl2ZSBmb3Igc21hbGwgdGV4dC9pY29uIGhpbnRzLlxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iVG9vbHRpcE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJUb29sdGlwTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCB0b29sdGlwL3Rvb2x0aXAtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIFRvb2x0aXAgY2FuIGFjY2VwdCBhIGhpbnQgdGV4dCBhbmQvb3IgYW4gaWNvbjpcbiAqIEBzdGFja2VkLWV4YW1wbGUoV2l0aCBJY29uLCB0b29sdGlwL3Rvb2x0aXAtd2l0aC1pY29uLmNvbXBvbmVudClcbiAqXG4gKiBTYW1lIHdheSBhcyBQb3BvdmVyLCB0b29sdGlwIGNhbiBhY2NlcHQgcGxhY2VtZW50IHBvc2l0aW9uIHdpdGggYG5iVG9vbHRpcFBsYWNlbWVudGAgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFBsYWNlbWVudHMsIHRvb2x0aXAvdG9vbHRpcC1wbGFjZW1lbnRzLmNvbXBvbmVudClcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHNwZWNpZnkgdG9vbHRpcCBjb2xvciB1c2luZyBgbmJUb29sdGlwU3RhdHVzYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ29sb3JlZCBUb29sdGlwcywgdG9vbHRpcC90b29sdGlwLWNvbG9ycy5jb21wb25lbnQpXG4gKlxuICogVG9vbHRpcCBoYXMgYSBudW1iZXIgb2YgdHJpZ2dlcnMgd2hpY2ggcHJvdmlkZXMgYW4gYWJpbGl0eSB0byBzaG93IGFuZCBoaWRlIHRoZSBjb21wb25lbnQgaW4gZGlmZmVyZW50IHdheXM6XG4gKlxuICogLSBDbGljayBtb2RlIHNob3dzIHRoZSBjb21wb25lbnQgd2hlbiBhIHVzZXIgY2xpY2tzIG9uIHRoZSBob3N0IGVsZW1lbnQgYW5kIGhpZGVzIHdoZW4gdGhlIHVzZXIgY2xpY2tzXG4gKiBzb21ld2hlcmUgb24gdGhlIGRvY3VtZW50IG91dHNpZGUgdGhlIGNvbXBvbmVudC5cbiAqIC0gSGludCBwcm92aWRlcyBjYXBhYmlsaXR5IHRvIHNob3cgdGhlIGNvbXBvbmVudCB3aGVuIHRoZSB1c2VyIGhvdmVycyBvdmVyIHRoZSBob3N0IGVsZW1lbnRcbiAqIGFuZCBoaWRlIHdoZW4gdGhlIHVzZXIgaG92ZXJzIG91dCBvZiB0aGUgaG9zdC5cbiAqIC0gSG92ZXIgd29ya3MgbGlrZSBoaW50IG1vZGUgd2l0aCBvbmUgZXhjZXB0aW9uIC0gd2hlbiB0aGUgdXNlciBtb3ZlcyBtb3VzZSBmcm9tIGhvc3QgZWxlbWVudCB0b1xuICogdGhlIGNvbnRhaW5lciBlbGVtZW50IHRoZSBjb21wb25lbnQgcmVtYWlucyBvcGVuLCBzbyB0aGF0IGl0IGlzIHBvc3NpYmxlIHRvIGludGVyYWN0IHdpdGggaXQgY29udGVudC5cbiAqIC0gRm9jdXMgbW9kZSBpcyBhcHBsaWVkIHdoZW4gdXNlciBmb2N1c2VzIHRoZSBlbGVtZW50LlxuICogLSBOb29wIG1vZGUgLSB0aGUgY29tcG9uZW50IHdvbid0IHJlYWN0IHRvIHRoZSB1c2VyIGludGVyYWN0aW9uLlxuICovXG52YXIgTmJUb29sdGlwRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVG9vbHRpcERpcmVjdGl2ZShob3N0UmVmLCBkeW5hbWljT3ZlcmxheUhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXIgPSBkeW5hbWljT3ZlcmxheUhhbmRsZXI7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnRvb2x0aXBDb21wb25lbnQgPSBOYlRvb2x0aXBDb21wb25lbnQ7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gODtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb3NpdGlvbiB3aWxsIGJlIGNhbGN1bGF0ZWQgcmVsYXRpdmVseSBob3N0IGVsZW1lbnQgYmFzZWQgb24gdGhlIHBvc2l0aW9uLlxuICAgICAgICAgKiBDYW4gYmUgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LCBzdGFydCBvciBlbmQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gTmJQb3NpdGlvbi5UT1A7XG4gICAgICAgIHRoaXMuX2FkanVzdG1lbnQgPSBOYkFkanVzdG1lbnQuQ0xPQ0tXSVNFO1xuICAgICAgICB0aGlzLnRvb2x0aXBDbGFzcyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVzY3JpYmVzIHdoZW4gdGhlIGNvbnRhaW5lciB3aWxsIGJlIHNob3duLlxuICAgICAgICAgKiBBdmFpbGFibGUgb3B0aW9uczogYGNsaWNrYCwgYGhvdmVyYCwgYGhpbnRgLCBgZm9jdXNgIGFuZCBgbm9vcGBcbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy50cmlnZ2VyID0gTmJUcmlnZ2VyLkhJTlQ7XG4gICAgICAgIHRoaXMubmJUb29sdGlwU2hvd1N0YXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJhZGp1c3RtZW50XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRhaW5lciBwb3NpdGlvbiB3aWxsIGNoYW5nZSBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHRoaXMgc3RyYXRlZ3kgaWYgY29udGFpbmVyIGNhbid0IGZpdCB2aWV3IHBvcnQuXG4gICAgICAgICAqIFNldCB0aGlzIHByb3BlcnR5IHRvIGBub29wYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBkaXNhYmxlIGF1dG9tYXRpYyBhZGp1c3RtZW50LlxuICAgICAgICAgKiBBdmFpbGFibGUgdmFsdWVzOiBgY2xvY2t3aXNlYCAoZGVmYXVsdCksIGBjb3VudGVyY2xvY2t3aXNlYCwgYHZlcnRpY2FsYCwgYGhvcml6b250YWxgLCBgbm9vcGAuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGp1c3RtZW50O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIEBicmVha2luZy1jaGFuZ2UgUmVtb3ZlIEA1LjAuMFxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhbHN5IHZhbHVlcyBmb3IgJ25iUG9wb3ZlckFkanVzdG1lbnQnIGFyZSBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gTmVidWxhciA1LlxcbiBVc2UgJ25vb3AnIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gTmJBZGp1c3RtZW50Lk5PT1A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9hZGp1c3RtZW50ID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvb2x0aXBEaXJlY3RpdmUucHJvdG90eXBlLCBcImljb25cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQWNjZXB0cyBpY29uIG5hbWUgb3IgaWNvbiBjb25maWcgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgTmJJY29uQ29uZmlnfSBpY29uIG5hbWUgb3IgY29uZmlnIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoaWNvbikge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRleHQsIHsgaWNvbjogaWNvbiB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9vbHRpcERpcmVjdGl2ZS5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXNcbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRleHQsIHsgc3RhdHVzOiBzdGF0dXMgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvb2x0aXBEaXJlY3RpdmUucHJvdG90eXBlLCBcImlzU2hvd25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhISh0aGlzLmR5bmFtaWNPdmVybGF5ICYmIHRoaXMuZHluYW1pY092ZXJsYXkuaXNBdHRhY2hlZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iVG9vbHRpcERpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyXG4gICAgICAgICAgICAuaG9zdCh0aGlzLmhvc3RSZWYpXG4gICAgICAgICAgICAuY29tcG9uZW50VHlwZSh0aGlzLnRvb2x0aXBDb21wb25lbnQpXG4gICAgICAgICAgICAub2Zmc2V0KHRoaXMub2Zmc2V0KTtcbiAgICB9O1xuICAgIE5iVG9vbHRpcERpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVidWlsZCgpO1xuICAgIH07XG4gICAgTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkgPSB0aGlzLmNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5KClcbiAgICAgICAgICAgIC5idWlsZCgpO1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LmlzU2hvd25cbiAgICAgICAgICAgIC5waXBlKHNraXAoMSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGlzU2hvd24pIHsgcmV0dXJuIF90aGlzLm5iVG9vbHRpcFNob3dTdGF0ZUNoYW5nZS5lbWl0KHsgaXNTaG93bjogaXNTaG93biB9KTsgfSk7XG4gICAgfTtcbiAgICBOYlRvb2x0aXBEaXJlY3RpdmUucHJvdG90eXBlLnJlYnVpbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkgPSB0aGlzLmNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5KClcbiAgICAgICAgICAgIC5yZWJ1aWxkKCk7XG4gICAgfTtcbiAgICBOYlRvb2x0aXBEaXJlY3RpdmUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuc2hvdygpO1xuICAgIH07XG4gICAgTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LmhpZGUoKTtcbiAgICB9O1xuICAgIE5iVG9vbHRpcERpcmVjdGl2ZS5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LnRvZ2dsZSgpO1xuICAgIH07XG4gICAgTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZS5jb25maWd1cmVEeW5hbWljT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyXG4gICAgICAgICAgICAucG9zaXRpb24odGhpcy5wb3NpdGlvbilcbiAgICAgICAgICAgIC50cmlnZ2VyKHRoaXMudHJpZ2dlcilcbiAgICAgICAgICAgIC5hZGp1c3RtZW50KHRoaXMuYWRqdXN0bWVudClcbiAgICAgICAgICAgIC5jb250ZW50KHRoaXMuY29udGVudClcbiAgICAgICAgICAgIC5jb250ZXh0KHRoaXMuY29udGV4dClcbiAgICAgICAgICAgIC5vdmVybGF5Q29uZmlnKHsgcGFuZWxDbGFzczogdGhpcy50b29sdGlwQ2xhc3MgfSk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iVG9vbHRpcCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iVG9vbHRpcERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJUb29sdGlwUGxhY2VtZW50JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJUb29sdGlwQWRqdXN0bWVudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iVG9vbHRpcERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYWRqdXN0bWVudFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iVG9vbHRpcENsYXNzJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ0b29sdGlwQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iVG9vbHRpcEljb24nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICBdLCBOYlRvb2x0aXBEaXJlY3RpdmUucHJvdG90eXBlLCBcImljb25cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYlRvb2x0aXBTdGF0dXMnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbiAgICBdLCBOYlRvb2x0aXBEaXJlY3RpdmUucHJvdG90eXBlLCBcInN0YXR1c1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iVG9vbHRpcFRyaWdnZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlRvb2x0aXBEaXJlY3RpdmUucHJvdG90eXBlLCBcInRyaWdnZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJUb29sdGlwRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJuYlRvb2x0aXBTaG93U3RhdGVDaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBOYlRvb2x0aXBEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iVG9vbHRpcF0nLFxuICAgICAgICAgICAgZXhwb3J0QXM6ICduYlRvb2x0aXAnLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIsIE5iRHluYW1pY092ZXJsYXldLFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFbGVtZW50UmVmLFxuICAgICAgICAgICAgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXJdKVxuICAgIF0sIE5iVG9vbHRpcERpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iVG9vbHRpcERpcmVjdGl2ZTtcbn0oKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iVG9vbHRpcE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRvb2x0aXBNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iVG9vbHRpcE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbTmJTaGFyZWRNb2R1bGUsIE5iT3ZlcmxheU1vZHVsZSwgTmJJY29uTW9kdWxlXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iVG9vbHRpcENvbXBvbmVudCwgTmJUb29sdGlwRGlyZWN0aXZlXSxcbiAgICAgICAgICAgIGV4cG9ydHM6IFtOYlRvb2x0aXBEaXJlY3RpdmVdLFxuICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbTmJUb29sdGlwQ29tcG9uZW50XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlRvb2x0aXBNb2R1bGUpO1xuICAgIHJldHVybiBOYlRvb2x0aXBNb2R1bGU7XG59KCkpO1xuXG52YXIgTkJfU0VMRUNUX0lOSkVDVElPTl9UT0tFTiA9IG5ldyBJbmplY3Rpb25Ub2tlbignTkJfU0VMRUNUX0lOSkVDVElPTl9UT0tFTicpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8vIENvbXBvbmVudCBjbGFzcyBzY29wZWQgY291bnRlciBmb3IgYXJpYSBhdHRyaWJ1dGVzLlxudmFyIGxhc3RPcHRpb25JZCA9IDA7XG4vKipcbiAqIE5iT3B0aW9uQ29tcG9uZW50XG4gKlxuICogQHN0eWxlc1xuICpcbiAqIG9wdGlvbi1iYWNrZ3JvdW5kLWNvbG9yOlxuICogb3B0aW9uLXRleHQtY29sb3I6XG4gKiBvcHRpb24tdGV4dC1mb250LWZhbWlseTpcbiAqIG9wdGlvbi1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogb3B0aW9uLWhvdmVyLXRleHQtY29sb3I6XG4gKiBvcHRpb24tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tYWN0aXZlLXRleHQtY29sb3I6XG4gKiBvcHRpb24tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG9wdGlvbi1mb2N1cy10ZXh0LWNvbG9yOlxuICogb3B0aW9uLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqIG9wdGlvbi1zZWxlY3RlZC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogb3B0aW9uLXNlbGVjdGVkLWhvdmVyLXRleHQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtYWN0aXZlLXRleHQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG9wdGlvbi1zZWxlY3RlZC1mb2N1cy10ZXh0LWNvbG9yOlxuICogb3B0aW9uLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIG9wdGlvbi10aW55LXRleHQtZm9udC1zaXplOlxuICogb3B0aW9uLXRpbnktdGV4dC1mb250LXdlaWdodDpcbiAqIG9wdGlvbi10aW55LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBvcHRpb24tdGlueS1wYWRkaW5nOlxuICogb3B0aW9uLXNtYWxsLXRleHQtZm9udC1zaXplOlxuICogb3B0aW9uLXNtYWxsLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBvcHRpb24tc21hbGwtdGV4dC1saW5lLWhlaWdodDpcbiAqIG9wdGlvbi1zbWFsbC1wYWRkaW5nOlxuICogb3B0aW9uLW1lZGl1bS10ZXh0LWZvbnQtc2l6ZTpcbiAqIG9wdGlvbi1tZWRpdW0tdGV4dC1mb250LXdlaWdodDpcbiAqIG9wdGlvbi1tZWRpdW0tdGV4dC1saW5lLWhlaWdodDpcbiAqIG9wdGlvbi1tZWRpdW0tcGFkZGluZzpcbiAqIG9wdGlvbi1sYXJnZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIG9wdGlvbi1sYXJnZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogb3B0aW9uLWxhcmdlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBvcHRpb24tbGFyZ2UtcGFkZGluZzpcbiAqIG9wdGlvbi1naWFudC10ZXh0LWZvbnQtc2l6ZTpcbiAqIG9wdGlvbi1naWFudC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogb3B0aW9uLWdpYW50LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBvcHRpb24tZ2lhbnQtcGFkZGluZzpcbiAqKi9cbnZhciBOYk9wdGlvbkNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk9wdGlvbkNvbXBvbmVudChwYXJlbnQsIGVsZW1lbnRSZWYsIGNkLCB6b25lLCByZW5kZXJlcikge1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEJ5R3JvdXAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHZhbHVlIHdoZW4gb3B0aW9uIHNlbGVjdGlvbiBjaGFuZ2UuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiBvcHRpb24gY2xpY2tlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGljayQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcG9uZW50IHNjb3BlZCBpZCBmb3IgYXJpYSBhdHRyaWJ1dGVzLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmlkID0gXCJuYi1vcHRpb24tXCIgKyBsYXN0T3B0aW9uSWQrKztcbiAgICAgICAgdGhpcy5fYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQgfHwgdGhpcy5kaXNhYmxlZEJ5R3JvdXA7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xpY2tcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWNrJC5hc09ic2VydmFibGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFsaXZlID0gZmFsc2U7XG4gICAgfTtcbiAgICBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLyBUT0RPOiAjMjI1NFxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhfdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICduYi10cmFuc2l0aW9uJyk7XG4gICAgICAgIH0pOyB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwid2l0aENoZWNrYm94XCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgc2hvdWxkIHdlIHJlbmRlciBjaGVja2JveC5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBsZSAmJiB0aGlzLnZhbHVlICE9IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udGVudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLCBcIm11bHRpcGxlXCIsIHtcbiAgICAgICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIGlzU2hvd0NoZWNrYm94IHByb3BlcnR5IHRvIGNvbnRyb2wgdGhpcyBiZWhhdmlvdXIgb3V0c2lkZSwgaXNzdWVzLzE5NjVcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBXZSBjaGVjayBwYXJlbnQgZXhpc3RpbmcgYmVjYXVzZSBwYXJlbnQgY2FuIGJlIE5iU2VsZWN0Q29tcG9uZW50IG9yXG4gICAgICAgICAgICAvLyBOYkF1dG9jb21wbGV0ZSBhbmQgYG1pbHRpcGxlYCBwcm9wZXJ0eSBleGlzdHMgb25seSBpbiBOYlNlbGVjdENvbXBvbmVudFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQubXVsdGlwbGUgOiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZENsYXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZEF0dHJpYnV0ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyAnJyA6IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiaW5kZXhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnLTEnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLCBcImFjdGl2ZUNsYXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBcbiAgICBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLmNsaWNrJC5uZXh0KHRoaXMpO1xuICAgICAgICAvLyBQcmV2ZW50IHNjcm9sbCBvbiBzcGFjZSBjbGljaywgZXRjLlxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24odHJ1ZSk7XG4gICAgfTtcbiAgICBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUuZGVzZWxlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKGZhbHNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgZGlzYWJsZWQgYnkgZ3JvdXAgc3RhdGUgYW5kIG1hcmtzIGNvbXBvbmVudCBmb3IgY2hlY2suXG4gICAgICovXG4gICAgTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLnNldERpc2FibGVkQnlHcm91cFN0YXRlID0gZnVuY3Rpb24gKGRpc2FibGVkKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkQnlHcm91cCAhPT0gZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRCeUdyb3VwID0gZGlzYWJsZWQ7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUuc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGVkKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbiBjYXNlIG9mIGNoYW5naW5nIG9wdGlvbnMgaW4gcnVudGltZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSBzZWxlY3RlZCBvcHRpb24gd2lsbCBiZSBrZXB0IGluIHNlbGVjdCBjb21wb25lbnQuXG4gICAgICAgICAqIFRoaXMgbWF5IGxlYWQgdG8gZXhjZXB0aW9ucyB3aXRoIGRldGVjdGluZyBjaGFuZ2VzIGluIGRlc3Ryb3llZCBjb21wb25lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEFsc28gQW5ndWxhciBjYW4gY2FsbCB3cml0ZVZhbHVlIG9uIGRlc3Ryb3llZCB2aWV3IChzZWxlY3QgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvcikuXG4gICAgICAgICAqIGFuZ3VsYXIvYW5ndWxhciMyNzgwM1xuICAgICAgICAgKiAqL1xuICAgICAgICBpZiAodGhpcy5hbGl2ZSAmJiB0aGlzLnNlbGVjdGVkICE9PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2UuZW1pdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iT3B0aW9uQ29tcG9uZW50LnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICB9O1xuICAgIE5iT3B0aW9uQ29tcG9uZW50LnByb3RvdHlwZS5nZXRMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudDtcbiAgICB9O1xuICAgIE5iT3B0aW9uQ29tcG9uZW50LnByb3RvdHlwZS5zZXRBY3RpdmVTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfTtcbiAgICBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUuc2V0SW5hY3RpdmVTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIE91dHB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuICAgIF0sIE5iT3B0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3Rpb25DaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIuaWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm11bHRpcGxlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLCBcIm11bHRpcGxlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2VsZWN0ZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkQ2xhc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpc2FibGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJPcHRpb25Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkQXR0cmlidXRlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygndGFiSW5kZXgnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiaW5kZXhcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5hY3RpdmUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYk9wdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYWN0aXZlQ2xhc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignY2xpY2snLCBbJyRldmVudCddKSxcbiAgICAgICAgSG9zdExpc3RlbmVyKCdrZXlkb3duLnNwYWNlJywgWyckZXZlbnQnXSksXG4gICAgICAgIEhvc3RMaXN0ZW5lcigna2V5ZG93bi5lbnRlcicsIFsnJGV2ZW50J10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iT3B0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkNsaWNrXCIsIG51bGwpO1xuICAgIE5iT3B0aW9uQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLW9wdGlvbicsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmItY2hlY2tib3ggKm5nSWY9XFxcIndpdGhDaGVja2JveFxcXCJcXG4gICAgICAgICAgICAgICAgIFtjaGVja2VkXT1cXFwic2VsZWN0ZWRcXFwiXFxuICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIj5cXG4gICAgPC9uYi1jaGVja2JveD5cXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIi8qIVxcbiAqIEBsaWNlbnNlXFxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXFxuICovOmhvc3R7ZGlzcGxheTpmbGV4fTpob3N0OmhvdmVye2N1cnNvcjpwb2ludGVyfTpob3N0IG5iLWNoZWNrYm94e2Rpc3BsYXk6ZmxleDtwb2ludGVyLWV2ZW50czpub25lfVtkaXI9bHRyXSA6aG9zdCBuYi1jaGVja2JveHttYXJnaW4tcmlnaHQ6LjVyZW19W2Rpcj1ydGxdIDpob3N0IG5iLWNoZWNrYm94e21hcmdpbi1sZWZ0Oi41cmVtfTpob3N0IG5iLWNoZWNrYm94IDo6bmctZGVlcCAubGFiZWx7cGFkZGluZzowfTpob3N0KFtkaXNhYmxlZF0pe3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QoLm5iLXRyYW5zaXRpb24pe3RyYW5zaXRpb24tZHVyYXRpb246MC4xNXM7dHJhbnNpdGlvbi1wcm9wZXJ0eTpiYWNrZ3JvdW5kLWNvbG9yLGNvbG9yO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW59XFxuXCJdXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDAsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDAsIEluamVjdChOQl9TRUxFQ1RfSU5KRUNUSU9OX1RPS0VOKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBFbGVtZW50UmVmLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBOZ1pvbmUsXG4gICAgICAgICAgICBSZW5kZXJlcjJdKVxuICAgIF0sIE5iT3B0aW9uQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJPcHRpb25Db21wb25lbnQ7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYlNlbGVjdExhYmVsQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU2VsZWN0TGFiZWxDb21wb25lbnQoKSB7XG4gICAgfVxuICAgIE5iU2VsZWN0TGFiZWxDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc2VsZWN0LWxhYmVsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PidcbiAgICAgICAgfSlcbiAgICBdLCBOYlNlbGVjdExhYmVsQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJTZWxlY3RMYWJlbENvbXBvbmVudDtcbn0oKSk7XG5mdW5jdGlvbiBuYlNlbGVjdEZvcm1GaWVsZENvbnRyb2xDb25maWdGYWN0b3J5KCkge1xuICAgIHZhciBjb25maWcgPSBuZXcgTmJGb3JtRmllbGRDb250cm9sQ29uZmlnKCk7XG4gICAgY29uZmlnLnN1cHBvcnRzU3VmZml4ID0gZmFsc2U7XG4gICAgcmV0dXJuIGNvbmZpZztcbn1cbi8qKlxuICogVGhlIGBOYlNlbGVjdENvbXBvbmVudGAgcHJvdmlkZXMgYSBjYXBhYmlsaXR5IHRvIHNlbGVjdCBvbmUgb2YgdGhlIHBhc3NlZCBpdGVtcy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBzZWxlY3Qvc2VsZWN0LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlNlbGVjdE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJTZWxlY3RNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIElmIHlvdSB3YW50IHRvIHVzZSBpdCBhcyB0aGUgbXVsdGktc2VsZWN0IGNvbnRyb2wgeW91IGhhdmUgdG8gbWFyayBpdCBhcyBgbXVsdGlwbGVgLlxuICogSW4gdGhpcyBjYXNlLCBgbmItc2VsZWN0YCB3aWxsIHdvcmsgb25seSB3aXRoIGFycmF5cyAtIGFjY2VwdCBhcnJheXMgYW5kIHByb3BhZ2F0ZSBhcnJheXMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShNdWx0aXBsZSwgc2VsZWN0L3NlbGVjdC1tdWx0aXBsZS5jb21wb25lbnQpXG4gKlxuICogSXRlbXMgd2l0aG91dCB2YWx1ZXMgd2lsbCBjbGVhbiB0aGUgc2VsZWN0aW9uLiBCb3RoIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzIHdpbGwgYWxzbyBjbGVhbiB0aGUgc2VsZWN0aW9uLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ2xlYW4gc2VsZWN0aW9uLCBzZWxlY3Qvc2VsZWN0LWNsZWFuLmNvbXBvbmVudClcbiAqXG4gKiBTZWxlY3QgbWF5IGJlIGJvdW5kZWQgdXNpbmcgYHNlbGVjdGVkYCBpbnB1dDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItc2VsZWN0IFsoc2VsZWN0ZWQpXT1cInNlbGVjdGVkXCI+PC9uYi1zZWxlY3RlZD5cbiAqIGBgYFxuICpcbiAqIE9yIHlvdSBjYW4gYmluZCBjb250cm9sIHdpdGggZm9ybSBjb250cm9scyBvciBuZ01vZGVsOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2VsZWN0IGZvcm0gYmluZGluZywgc2VsZWN0L3NlbGVjdC1mb3JtLmNvbXBvbmVudClcbiAqXG4gKiBPcHRpb25zIGluIHRoZSBzZWxlY3QgbWF5IGJlIGdyb3VwZWQgdXNpbmcgYG5iLW9wdGlvbi1ncm91cGAgY29tcG9uZW50LlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoR3JvdXBpbmcsIHNlbGVjdC9zZWxlY3QtZ3JvdXBzLmNvbXBvbmVudClcbiAqXG4gKiBTZWxlY3QgbWF5IGhhdmUgYSBwbGFjZWhvbGRlciB0aGF0IHdpbGwgYmUgc2hvd24gd2hlbiBub3RoaW5nIHNlbGVjdGVkOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUGxhY2Vob2xkZXIsIHNlbGVjdC9zZWxlY3QtcGxhY2Vob2xkZXIuY29tcG9uZW50KVxuICpcbiAqIFlvdSBjYW4gZGlzYWJsZSBzZWxlY3QsIG9wdGlvbnMgYW5kIHdob2xlIGdyb3Vwcy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKERpc2FibGVkIHNlbGVjdCwgc2VsZWN0L3NlbGVjdC1kaXNhYmxlZC5jb21wb25lbnQpXG4gKlxuICogQWxzbywgdGhlIGN1c3RvbSBsYWJlbCBtYXkgYmUgcHJvdmlkZWQgaW4gc2VsZWN0LlxuICogVGhpcyBjdXN0b20gbGFiZWwgd2lsbCBiZSB1c2VkIGZvciBpbnN0ZWFkIHBsYWNlaG9sZGVyIHdoZW4gc29tZXRoaW5nIHNlbGVjdGVkLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ3VzdG9tIGxhYmVsLCBzZWxlY3Qvc2VsZWN0LWxhYmVsLmNvbXBvbmVudClcbiAqXG4gKiBEZWZhdWx0IGBuYi1zZWxlY3RgIHNpemUgaXMgYG1lZGl1bWAgYW5kIHN0YXR1cyBpcyBgYmFzaWNgLlxuICogU2VsZWN0IGlzIGF2YWlsYWJsZSBpbiBtdWx0aXBsZSBjb2xvcnMgdXNpbmcgYHN0YXR1c2AgcHJvcGVydHk6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTZWxlY3Qgc3RhdHVzZXMsIHNlbGVjdC9zZWxlY3Qtc3RhdHVzLmNvbXBvbmVudClcbiAqXG4gKiBUaGVyZSBhcmUgZml2ZSBzZWxlY3Qgc2l6ZXM6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTZWxlY3Qgc2l6ZXMsIHNlbGVjdC9zZWxlY3Qtc2l6ZXMuY29tcG9uZW50KVxuICpcbiAqIEFuZCB0d28gYWRkaXRpb25hbCBzdHlsZSB0eXBlcyAtIGBmaWxsZWRgOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRmlsbGVkIHNlbGVjdCwgc2VsZWN0L3NlbGVjdC1maWxsZWQuY29tcG9uZW50KVxuICpcbiAqIGFuZCBgaGVyb2A6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTZWxlY3QgY29sb3JzLCBzZWxlY3Qvc2VsZWN0LWhlcm8uY29tcG9uZW50KVxuICpcbiAqIFNlbGVjdCBpcyBhdmFpbGFibGUgaW4gZGlmZmVyZW50IHNoYXBlcywgdGhhdCBjb3VsZCBiZSBjb21iaW5lZCB3aXRoIHRoZSBvdGhlciBwcm9wZXJ0aWVzOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2VsZWN0IHNoYXBlcywgc2VsZWN0L3NlbGVjdC1zaGFwZXMuY29tcG9uZW50KVxuICpcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoSW50ZXJhY3RpdmUsIHNlbGVjdC9zZWxlY3QtaW50ZXJhY3RpdmUuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBzZWxlY3QtY3Vyc29yOlxuICogc2VsZWN0LWRpc2FibGVkLWN1cnNvcjpcbiAqIHNlbGVjdC1taW4td2lkdGg6XG4gKiBzZWxlY3Qtb3V0bGluZS13aWR0aDpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbG9yOlxuICogc2VsZWN0LWljb24tb2Zmc2V0OlxuICogc2VsZWN0LXRleHQtZm9udC1mYW1pbHk6XG4gKiBzZWxlY3QtcGxhY2Vob2xkZXItdGV4dC1mb250LWZhbWlseTpcbiAqIHNlbGVjdC10aW55LXRleHQtZm9udC1zaXplOlxuICogc2VsZWN0LXRpbnktdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC10aW55LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzZWxlY3QtdGlueS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlbGVjdC10aW55LXBsYWNlaG9sZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzZWxlY3QtdGlueS1tYXgtd2lkdGg6XG4gKiBzZWxlY3Qtc21hbGwtdGV4dC1mb250LXNpemU6XG4gKiBzZWxlY3Qtc21hbGwtdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC1zbWFsbC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogc2VsZWN0LXNtYWxsLXBsYWNlaG9sZGVyLXRleHQtZm9udC1zaXplOlxuICogc2VsZWN0LXNtYWxsLXBsYWNlaG9sZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzZWxlY3Qtc21hbGwtbWF4LXdpZHRoOlxuICogc2VsZWN0LW1lZGl1bS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlbGVjdC1tZWRpdW0tdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC1tZWRpdW0tdGV4dC1saW5lLWhlaWdodDpcbiAqIHNlbGVjdC1tZWRpdW0tcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBzZWxlY3QtbWVkaXVtLXBsYWNlaG9sZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzZWxlY3QtbWVkaXVtLW1heC13aWR0aDpcbiAqIHNlbGVjdC1sYXJnZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlbGVjdC1sYXJnZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VsZWN0LWxhcmdlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzZWxlY3QtbGFyZ2UtcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBzZWxlY3QtbGFyZ2UtcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC1sYXJnZS1tYXgtd2lkdGg6XG4gKiBzZWxlY3QtZ2lhbnQtdGV4dC1mb250LXNpemU6XG4gKiBzZWxlY3QtZ2lhbnQtdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC1naWFudC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogc2VsZWN0LWdpYW50LXBsYWNlaG9sZGVyLXRleHQtZm9udC1zaXplOlxuICogc2VsZWN0LWdpYW50LXBsYWNlaG9sZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzZWxlY3QtZ2lhbnQtbWF4LXdpZHRoOlxuICogc2VsZWN0LXJlY3RhbmdsZS1ib3JkZXItcmFkaXVzOlxuICogc2VsZWN0LXNlbWktcm91bmQtYm9yZGVyLXJhZGl1czpcbiAqIHNlbGVjdC1yb3VuZC1ib3JkZXItcmFkaXVzOlxuICogc2VsZWN0LW91dGxpbmUtYm9yZGVyLXN0eWxlOlxuICogc2VsZWN0LW91dGxpbmUtYm9yZGVyLXdpZHRoOlxuICogc2VsZWN0LW91dGxpbmUtdGlueS1wYWRkaW5nOlxuICogc2VsZWN0LW91dGxpbmUtc21hbGwtcGFkZGluZzpcbiAqIHNlbGVjdC1vdXRsaW5lLW1lZGl1bS1wYWRkaW5nOlxuICogc2VsZWN0LW91dGxpbmUtbGFyZ2UtcGFkZGluZzpcbiAqIHNlbGVjdC1vdXRsaW5lLWdpYW50LXBhZGRpbmc6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1zdWNjZXNzLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWluZm8taG92ZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWRhbmdlci1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWRhbmdlci1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWRhbmdlci1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWRhbmdlci1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWRhbmdlci1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWFkamFjZW50LWJvcmRlci1zdHlsZTpcbiAqIHNlbGVjdC1vdXRsaW5lLWFkamFjZW50LWJvcmRlci13aWR0aDpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLW9wZW4tYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1vcGVuLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1vcGVuLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1vcGVuLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWluZm8tYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1vcGVuLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLW9wZW4tYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWFkamFjZW50LWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtb3Blbi1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWFkamFjZW50LWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYm9yZGVyLXN0eWxlOlxuICogc2VsZWN0LWZpbGxlZC1ib3JkZXItd2lkdGg6XG4gKiBzZWxlY3QtZmlsbGVkLXRpbnktcGFkZGluZzpcbiAqIHNlbGVjdC1maWxsZWQtc21hbGwtcGFkZGluZzpcbiAqIHNlbGVjdC1maWxsZWQtbWVkaXVtLXBhZGRpbmc6XG4gKiBzZWxlY3QtZmlsbGVkLWxhcmdlLXBhZGRpbmc6XG4gKiBzZWxlY3QtZmlsbGVkLWdpYW50LXBhZGRpbmc6XG4gKiBzZWxlY3QtZmlsbGVkLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWJhc2ljLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWJhc2ljLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWJhc2ljLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtcHJpbWFyeS1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXByaW1hcnktcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtcHJpbWFyeS1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtcHJpbWFyeS1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtcHJpbWFyeS1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXN1Y2Nlc3MtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1zdWNjZXNzLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXN1Y2Nlc3MtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXN1Y2Nlc3MtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXN1Y2Nlc3MtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1pbmZvLWljb24tY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtaW5mby1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1pbmZvLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1pbmZvLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8taG92ZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1pbmZvLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1pbmZvLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtd2FybmluZy1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXdhcm5pbmctcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtd2FybmluZy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtd2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtd2FybmluZy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtd2FybmluZy1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWNvbnRyb2wtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1jb250cm9sLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWNvbnRyb2wtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWNvbnRyb2wtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWNvbnRyb2wtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tdGlueS1wYWRkaW5nOlxuICogc2VsZWN0LWhlcm8tc21hbGwtcGFkZGluZzpcbiAqIHNlbGVjdC1oZXJvLW1lZGl1bS1wYWRkaW5nOlxuICogc2VsZWN0LWhlcm8tbGFyZ2UtcGFkZGluZzpcbiAqIHNlbGVjdC1oZXJvLWdpYW50LXBhZGRpbmc6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1wcmltYXJ5LWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tcHJpbWFyeS1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tcHJpbWFyeS1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1wcmltYXJ5LWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1wcmltYXJ5LWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtaGVyby1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1zdWNjZXNzLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tc3VjY2Vzcy1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tc3VjY2Vzcy1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1zdWNjZXNzLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1zdWNjZXNzLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtaGVyby1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1pbmZvLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8taWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8taW5mby1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8taW5mby1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1pbmZvLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1pbmZvLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1pbmZvLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtaGVyby1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby13YXJuaW5nLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8td2FybmluZy1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8td2FybmluZy1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby13YXJuaW5nLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby13YXJuaW5nLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtaGVyby13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tZGFuZ2VyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWRhbmdlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tZGFuZ2VyLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tZGFuZ2VyLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItaG92ZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tZGFuZ2VyLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWRhbmdlci1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1jb250cm9sLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tY29udHJvbC1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tY29udHJvbC1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1jb250cm9sLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1jb250cm9sLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1jb250cm9sLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtaGVyby1jb250cm9sLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiAqL1xudmFyIE5iU2VsZWN0Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU2VsZWN0Q29tcG9uZW50KGRvY3VtZW50LCBvdmVybGF5LCBob3N0UmVmLCBwb3NpdGlvbkJ1aWxkZXIsIHRyaWdnZXJTdHJhdGVneUJ1aWxkZXIsIGNkLCBmb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSwgZm9jdXNNb25pdG9yLCByZW5kZXJlciwgem9uZSkge1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMuaG9zdFJlZiA9IGhvc3RSZWY7XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneUJ1aWxkZXIgPSB0cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyO1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuZm9jdXNLZXlNYW5hZ2VyRmFjdG9yeVNlcnZpY2UgPSBmb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZTtcbiAgICAgICAgdGhpcy5mb2N1c01vbml0b3IgPSBmb2N1c01vbml0b3I7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlbGVjdCBzaXplLCBhdmFpbGFibGUgc2l6ZXM6XG4gICAgICAgICAqIGB0aW55YCwgYHNtYWxsYCwgYG1lZGl1bWAgKGRlZmF1bHQpLCBgbGFyZ2VgLCBgZ2lhbnRgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNpemUgPSAnbWVkaXVtJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlbGVjdCBzdGF0dXMgKGFkZHMgc3BlY2lmaWMgc3R5bGVzKTpcbiAgICAgICAgICogYGJhc2ljYCwgYHByaW1hcnlgLCBgaW5mb2AsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWxlY3Qgc2hhcGVzOiBgcmVjdGFuZ2xlYCAoZGVmYXVsdCksIGByb3VuZGAsIGBzZW1pLXJvdW5kYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaGFwZSA9ICdyZWN0YW5nbGUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2VsZWN0IGFwcGVhcmFuY2VzOiBgb3V0bGluZWAgKGRlZmF1bHQpLCBgZmlsbGVkYCwgYGhlcm9gXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnb3V0bGluZSc7XG4gICAgICAgIHRoaXMuX2Z1bGxXaWR0aCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVycyBzZWxlY3QgcGxhY2Vob2xkZXIgaWYgbm90aGluZyBzZWxlY3RlZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9ICcnO1xuICAgICAgICB0aGlzLl9tdWx0aXBsZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2lsbCBiZSBlbWl0dGVkIHdoZW4gc2VsZWN0ZWQgdmFsdWUgY2hhbmdlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpc3Qgb2Ygc2VsZWN0ZWQgb3B0aW9ucy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlbCA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3VycmVudCBvdmVybGF5IHBvc2l0aW9uIGJlY2F1c2Ugb2Ygd2UgaGF2ZSB0byB0b2dnbGUgb3ZlcmxheVBvc2l0aW9uXG4gICAgICAgICAqIGluIFtuZ0NsYXNzXSBkaXJlY3Rpb24gYW5kIHRoaXMgZGlyZWN0aXZlIGNhbiB1c2Ugb25seSBzdHJpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbiA9ICcnO1xuICAgICAgICB0aGlzLm9wdGlvbnNPdmVybGF5T2Zmc2V0ID0gODtcbiAgICAgICAgdGhpcy5hbGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRnVuY3Rpb24gcGFzc2VkIHRocm91Z2ggY29udHJvbCB2YWx1ZSBhY2Nlc3NvciB0byBwcm9wYWdhdGUgY2hhbmdlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLnN0YXR1cyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHRoaXMuc3RhdHVzKTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuc2l6ZSQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHRoaXMuc2l6ZSk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLmZvY3VzZWQkID0gbmV3IEJlaGF2aW9yU3ViamVjdChmYWxzZSk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLmRpc2FibGVkJCA9IG5ldyBCZWhhdmlvclN1YmplY3QodGhpcy5kaXNhYmxlZCk7XG4gICAgfVxuICAgIE5iU2VsZWN0Q29tcG9uZW50XzEgPSBOYlNlbGVjdENvbXBvbmVudDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIm91dGxpbmVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBgb3V0bGluZWAgc3R5bGVzXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGVhcmFuY2UgPT09ICdvdXRsaW5lJztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ291dGxpbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImZpbGxlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIGBmaWxsZWRgIHN0eWxlc1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBlYXJhbmNlID09PSAnZmlsbGVkJztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ2ZpbGxlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGVyb1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIGBoZXJvYCBzdHlsZXNcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ2hlcm8nO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnaGVybyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGhlIHNlbGVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLl9kaXNhYmxlZDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmdWxsV2lkdGhcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgc2V0IGVsZW1lbnQgd2lsbCBmaWxsIGl0cyBjb250YWluZXJcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Z1bGxXaWR0aDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGxXaWR0aCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm11bHRpcGxlXG4gICAgICAgICAgICAgICAgPyB0aGlzLnNlbGVjdGlvbk1vZGVsLm1hcChmdW5jdGlvbiAobykgeyByZXR1cm4gby52YWx1ZTsgfSlcbiAgICAgICAgICAgICAgICA6IHRoaXMuc2VsZWN0aW9uTW9kZWxbMF0udmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBY2NlcHRzIHNlbGVjdGVkIGl0ZW0gb3IgYXJyYXkgb2Ygc2VsZWN0ZWQgaXRlbXMuXG4gICAgICAgICAqICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlVmFsdWUodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIm11bHRpcGxlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdpdmVzIGNhcGFiaWxpdHkganVzdCB3cml0ZSBgbXVsdGlwbGVgIG92ZXIgdGhlIGVsZW1lbnQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpcGxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImlzT3BlblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIHNlbGVjdCBvcGVuZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmICYmIHRoaXMucmVmLmhhc0F0dGFjaGVkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNIaWRkZW5cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBzZWxlY3QgaGlkZGVuLlxuICAgICAgICAgKiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5pc09wZW47XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdFdpZHRoXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgd2lkdGggb2YgdGhlIHNlbGVjdCBidXR0b24uXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0QnV0dG9uQ2xhc3Nlc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25Nb2RlbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0aW9uTW9kZWwubGVuZ3RoICYmICF0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlbXB0eScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKHRoaXMub3ZlcmxheVBvc2l0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbGFzc2VzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGlvblZpZXdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29udGVudCByZW5kZXJlZCBpbiB0aGUgbGFiZWwuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZWwubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZGVsLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7IHJldHVybiBvcHRpb24uY29udGVudDsgfSkuam9pbignLCAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZGVsWzBdLmNvbnRlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5uZ09uQ2hhbmdlcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZGlzYWJsZWQgPSBfYS5kaXNhYmxlZCwgc3RhdHVzID0gX2Euc3RhdHVzLCBzaXplID0gX2Euc2l6ZTtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkJC5uZXh0KGRpc2FibGVkLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMkLm5leHQoc3RhdHVzLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSQubmV4dChzaXplLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyQ29udGVudEluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jaGFuZ2VzXG4gICAgICAgICAgICAucGlwZShzdGFydFdpdGgodGhpcy5vcHRpb25zKSwgZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnF1ZXVlICE9IG51bGwgJiYgX3RoaXMuY2FuU2VsZWN0VmFsdWUoKTsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gQ2FsbCAnd3JpdGVWYWx1ZScgd2hlbiBjdXJyZW50IGNoYW5nZSBkZXRlY3Rpb24gcnVuIGlzIGZpbmlzaGVkLlxuICAgICAgICAgICAgLy8gV2hlbiB3cml0aW5nIGlzIGZpbmlzaGVkLCBjaGFuZ2UgZGV0ZWN0aW9uIHN0YXJ0cyBhZ2Fpbiwgc2luY2VcbiAgICAgICAgICAgIC8vIG1pY3JvdGFza3MgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAvLyBQcmV2ZW50cyBFeHByZXNzaW9uQ2hhbmdlZEFmdGVySXRIYXNCZWVuQ2hlY2tlZEVycm9yLlxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMud3JpdGVWYWx1ZShfdGhpcy5xdWV1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneSA9IHRoaXMuY3JlYXRlVHJpZ2dlclN0cmF0ZWd5KCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25CdXR0b25Gb2N1cygpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uVHJpZ2dlcnMoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbk9wdGlvbkNsaWNrKCk7XG4gICAgICAgIC8vIFRPRE86ICMyMjU0XG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlcmVyLmFkZENsYXNzKF90aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudCwgJ25iLXRyYW5zaXRpb24nKTtcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFsaXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgICAgIGlmICh0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5yZWYuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyaWdnZXJTdHJhdGVneSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNIaWRkZW4pIHtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoVG9PdmVybGF5KCk7XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZU9wdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5yZWYuZGV0YWNoKCk7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUucmVnaXN0ZXJPbkNoYW5nZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUucmVnaXN0ZXJPblRvdWNoZWQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zZXREaXNhYmxlZFN0YXRlID0gZnVuY3Rpb24gKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuYWxpdmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYW5TZWxlY3RWYWx1ZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbih2YWx1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2VsZWN0cyBvcHRpb24gb3IgY2xlYXIgYWxsIHNlbGVjdGVkIG9wdGlvbnMgaWYgdmFsdWUgaXMgbnVsbC5cbiAgICAgKiAqL1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVPcHRpb25DbGljayA9IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG51bGw7XG4gICAgICAgIGlmIChvcHRpb24udmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb24ob3B0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGVzZWxlY3QgYWxsIHNlbGVjdGVkIG9wdGlvbnMuXG4gICAgICogKi9cbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7IHJldHVybiBvcHRpb24uZGVzZWxlY3QoKTsgfSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwgPSBbXTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5lbWl0U2VsZWN0ZWQodGhpcy5tdWx0aXBsZSA/IFtdIDogbnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGhvdyB0byBzZWxlY3Qgb3B0aW9uIGFzIG11bHRpcGxlIG9yIHNpbmdsZS5cbiAgICAgKiAqL1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3RPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU11bHRpcGxlU2VsZWN0KG9wdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZVNlbGVjdChvcHRpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZWxlY3Qgc2luZ2xlIG9wdGlvbi5cbiAgICAgKiAqL1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVTaW5nbGVTZWxlY3QgPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0aW9uTW9kZWwucG9wKCk7XG4gICAgICAgIGlmIChzZWxlY3RlZCAmJiBzZWxlY3RlZCAhPT0gb3B0aW9uKSB7XG4gICAgICAgICAgICBzZWxlY3RlZC5kZXNlbGVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwgPSBbb3B0aW9uXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdCgpO1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgdGhpcy5idXR0b24ubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB0aGlzLmVtaXRTZWxlY3RlZChvcHRpb24udmFsdWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2VsZWN0IGZvciBtdWx0aXBsZSBvcHRpb25zLlxuICAgICAqICovXG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLmhhbmRsZU11bHRpcGxlU2VsZWN0ID0gZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZGVsID0gdGhpcy5zZWxlY3Rpb25Nb2RlbC5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudmFsdWUgIT09IG9wdGlvbi52YWx1ZTsgfSk7XG4gICAgICAgICAgICBvcHRpb24uZGVzZWxlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwucHVzaChvcHRpb24pO1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdFNlbGVjdGVkKHRoaXMuc2VsZWN0aW9uTW9kZWwubWFwKGZ1bmN0aW9uIChvcHQpIHsgcmV0dXJuIG9wdC52YWx1ZTsgfSkpO1xuICAgIH07XG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaFRvT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVPdmVybGF5KCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZU9uUG9zaXRpb25DaGFuZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlS2V5TWFuYWdlcigpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVPbk92ZXJsYXlLZXlzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWYuYXR0YWNoKHRoaXMucG9ydGFsKTtcbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zZXRBY3RpdmVPcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGVsLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5rZXlNYW5hZ2VyLnNldEFjdGl2ZUl0ZW0odGhpcy5zZWxlY3Rpb25Nb2RlbFswXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0Rmlyc3RJdGVtQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVPdmVybGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2Nyb2xsU3RyYXRlZ3kgPSB0aGlzLmNyZWF0ZVNjcm9sbFN0cmF0ZWd5KCk7XG4gICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneSA9IHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpO1xuICAgICAgICB0aGlzLnJlZiA9IHRoaXMub3ZlcmxheS5jcmVhdGUoeyBwb3NpdGlvblN0cmF0ZWd5OiB0aGlzLnBvc2l0aW9uU3RyYXRlZ3ksIHNjcm9sbFN0cmF0ZWd5OiBzY3JvbGxTdHJhdGVneSB9KTtcbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVLZXlNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmtleU1hbmFnZXIgPSB0aGlzLmZvY3VzS2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlLmNyZWF0ZSh0aGlzLm9wdGlvbnMpLndpdGhUeXBlQWhlYWQoMjAwKTtcbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVQb3NpdGlvblN0cmF0ZWd5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbkJ1aWxkZXJcbiAgICAgICAgICAgIC5jb25uZWN0ZWRUbyh0aGlzLmJ1dHRvbilcbiAgICAgICAgICAgIC5wb3NpdGlvbihOYlBvc2l0aW9uLkJPVFRPTSlcbiAgICAgICAgICAgIC5vZmZzZXQodGhpcy5vcHRpb25zT3ZlcmxheU9mZnNldClcbiAgICAgICAgICAgIC5hZGp1c3RtZW50KE5iQWRqdXN0bWVudC5WRVJUSUNBTCk7XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlU2Nyb2xsU3RyYXRlZ3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXkuc2Nyb2xsU3RyYXRlZ2llcy5ibG9jaygpO1xuICAgIH07XG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLmNyZWF0ZVRyaWdnZXJTdHJhdGVneSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlclN0cmF0ZWd5QnVpbGRlclxuICAgICAgICAgICAgLnRyaWdnZXIoTmJUcmlnZ2VyLkNMSUNLKVxuICAgICAgICAgICAgLmhvc3QodGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQpXG4gICAgICAgICAgICAuY29udGFpbmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmdldENvbnRhaW5lcigpOyB9KVxuICAgICAgICAgICAgLmJ1aWxkKCk7XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUuc3Vic2NyaWJlT25UcmlnZ2VycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuc2hvdyQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNob3coKTsgfSk7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LmhpZGUkXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaXNPcGVuOyB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0NsaWNrZWRXaXRoaW5Db21wb25lbnQoJGV2ZW50KSkge1xuICAgICAgICAgICAgICAgIF90aGlzLm9uVG91Y2hlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zdWJzY3JpYmVPblBvc2l0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3kucG9zaXRpb25DaGFuZ2VcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy5vdmVybGF5UG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgICAgIF90aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUuc3Vic2NyaWJlT25PcHRpb25DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSB1c2VyIGNoYW5nZXMgcHJvdmlkZWQgb3B0aW9ucyBsaXN0IGluIHRoZSBydW50aW1lIHdlIGhhdmUgdG8gaGFuZGxlIHRoaXNcbiAgICAgICAgICogYW5kIHJlc3Vic2NyaWJlIG9uIG9wdGlvbnMgc2VsZWN0aW9uIGNoYW5nZXMgZXZlbnQuXG4gICAgICAgICAqIE90aGVyd2lzZSwgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBzZWxlY3QgbmV3IG9wdGlvbnMuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMub3B0aW9ucy5jaGFuZ2VzXG4gICAgICAgICAgICAucGlwZShzdGFydFdpdGgodGhpcy5vcHRpb25zKSwgc3dpdGNoTWFwKGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVyZ2UuYXBwbHkodm9pZCAwLCBvcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7IHJldHVybiBvcHRpb24uY2xpY2s7IH0pKTtcbiAgICAgICAgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGNsaWNrZWRPcHRpb24pIHsgcmV0dXJuIF90aGlzLmhhbmRsZU9wdGlvbkNsaWNrKGNsaWNrZWRPcHRpb24pOyB9KTtcbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zdWJzY3JpYmVPbk92ZXJsYXlLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnJlZi5rZXlkb3duRXZlbnRzKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5pc09wZW47IH0pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEVTQ0FQRSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmJ1dHRvbi5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMua2V5TWFuYWdlci5vbktleWRvd24oZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5rZXlNYW5hZ2VyLnRhYk91dFxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICBfdGhpcy5vblRvdWNoZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUuc3Vic2NyaWJlT25CdXR0b25Gb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5mb2N1c01vbml0b3IubW9uaXRvcih0aGlzLmJ1dHRvbilcbiAgICAgICAgICAgIC5waXBlKG1hcChmdW5jdGlvbiAob3JpZ2luKSB7IHJldHVybiAhIW9yaWdpbjsgfSksIGZpbmFsaXplKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmZvY3VzTW9uaXRvci5zdG9wTW9uaXRvcmluZyhfdGhpcy5idXR0b24pOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmZvY3VzZWQkKTtcbiAgICB9O1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5nZXRDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZiAmJiB0aGlzLnJlZi5oYXNBdHRhY2hlZCgpICYmIHtcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgbmF0aXZlRWxlbWVudDogdGhpcy5yZWYub3ZlcmxheUVsZW1lbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUHJvcGFnYXRlIHNlbGVjdGVkIHZhbHVlLlxuICAgICAqICovXG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLmVtaXRTZWxlY3RlZCA9IGZ1bmN0aW9uIChzZWxlY3RlZCkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKHNlbGVjdGVkKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KHNlbGVjdGVkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBzZWxlY3RlZCB2YWx1ZSBpbiBtb2RlbC5cbiAgICAgKiAqL1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgIWlzQXJyYXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuXFwndCBhc3NpZ24gc2luZ2xlIHZhbHVlIGlmIHNlbGVjdCBpcyBtYXJrZWQgYXMgbXVsdGlwbGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUgJiYgaXNBcnJheSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGFzc2lnbiBhcnJheSBpZiBzZWxlY3QgaXMgbm90IG1hcmtlZCBhcyBtdWx0aXBsZScpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb25zID0gdGhpcy5zZWxlY3Rpb25Nb2RlbDtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlbCA9IFtdO1xuICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7IHJldHVybiBfdGhpcy5zZWxlY3RWYWx1ZShvcHRpb24pOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbmQgb3B0aW9ucyB3aGljaCB3ZXJlIHNlbGVjdGVkIGJlZm9yZSBhbmQgdHJpZ2dlciBkZXNlbGVjdFxuICAgICAgICBwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb25zXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChvcHRpb24pIHsgcmV0dXJuICFfdGhpcy5zZWxlY3Rpb25Nb2RlbC5pbmNsdWRlcyhvcHRpb24pOyB9KVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikgeyByZXR1cm4gb3B0aW9uLmRlc2VsZWN0KCk7IH0pO1xuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2VsZWN0cyB2YWx1ZS5cbiAgICAgKiAqL1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS5zZWxlY3RWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgY29ycmVzcG9uZGluZyA9IHRoaXMub3B0aW9ucy5maW5kKGZ1bmN0aW9uIChvcHRpb24pIHsgcmV0dXJuIG9wdGlvbi52YWx1ZSA9PT0gdmFsdWU7IH0pO1xuICAgICAgICBpZiAoY29ycmVzcG9uZGluZykge1xuICAgICAgICAgICAgY29ycmVzcG9uZGluZy5zZWxlY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwucHVzaChjb3JyZXNwb25kaW5nKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0b3VjaGVkIGlmIGZvY3VzIG1vdmVkIG91dHNpZGUgb2YgYnV0dG9uIGFuZCBvdmVybGF5LFxuICAgICAqIGlnbm9yaW5nIHRoZSBjYXNlIHdoZW4gZm9jdXMgbW92ZWQgdG8gb3B0aW9ucyBvdmVybGF5LlxuICAgICAqL1xuICAgIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZS50cnlTZXRUb3VjaGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbikge1xuICAgICAgICAgICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLmlzQ2xpY2tlZFdpdGhpbkNvbXBvbmVudCA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50ID09PSAkZXZlbnQudGFyZ2V0IHx8IHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKCRldmVudC50YXJnZXQpO1xuICAgIH07XG4gICAgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLmNhblNlbGVjdFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5sZW5ndGgpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aW55XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic21hbGxcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwibWVkaXVtXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJnaWFudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJyZWN0YW5nbGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncmVjdGFuZ2xlJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJyb3VuZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdyb3VuZCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VtaVJvdW5kXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3NlbWktcm91bmQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICB2YXIgTmJTZWxlY3RDb21wb25lbnRfMTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhcGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiYXBwZWFyYW5jZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYXBwZWFyYW5jZS1vdXRsaW5lJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwib3V0bGluZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmFwcGVhcmFuY2UtZmlsbGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZmlsbGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuYXBwZWFyYW5jZS1oZXJvJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGVyb1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmZ1bGwtd2lkdGgnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJmdWxsV2lkdGhcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIm11bHRpcGxlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRDaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29udGVudENoaWxkcmVuKE5iT3B0aW9uQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvcHRpb25zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIENvbnRlbnRDaGlsZChOYlNlbGVjdExhYmVsQ29tcG9uZW50KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiY3VzdG9tTGFiZWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgVmlld0NoaWxkKE5iUG9ydGFsRGlyZWN0aXZlKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE5iUG9ydGFsRGlyZWN0aXZlKVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwb3J0YWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgVmlld0NoaWxkKCdzZWxlY3RCdXR0b24nLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJidXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm9wZW4nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImlzT3BlblwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtdGlueScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGlueVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtc21hbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1tZWRpdW0nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcIm1lZGl1bVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbGFyZ2UnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImxhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1naWFudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtcHJpbWFyeScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1pbmZvJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInN1Y2Nlc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtd2FybmluZycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1kYW5nZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcImRhbmdlclwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtY29udHJvbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNoYXBlLXJlY3RhbmdsZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwicmVjdGFuZ2xlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtcm91bmQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJTZWxlY3RDb21wb25lbnQucHJvdG90eXBlLCBcInJvdW5kXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2hhcGUtc2VtaS1yb3VuZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlNlbGVjdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2VtaVJvdW5kXCIsIG51bGwpO1xuICAgIE5iU2VsZWN0Q29tcG9uZW50ID0gTmJTZWxlY3RDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zZWxlY3QnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGJ1dHRvbiBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgIFtuZ0NsYXNzXT1cXFwic2VsZWN0QnV0dG9uQ2xhc3Nlc1xcXCJcXG4gICAgICAgIChibHVyKT1cXFwidHJ5U2V0VG91Y2hlZCgpXFxcIlxcbiAgICAgICAgKGtleWRvd24uYXJyb3dEb3duKT1cXFwic2hvdygpXFxcIlxcbiAgICAgICAgKGtleWRvd24uYXJyb3dVcCk9XFxcInNob3coKVxcXCJcXG4gICAgICAgIGNsYXNzPVxcXCJzZWxlY3QtYnV0dG9uXFxcIlxcbiAgICAgICAgdHlwZT1cXFwiYnV0dG9uXFxcIlxcbiAgICAgICAgI3NlbGVjdEJ1dHRvbj5cXG5cXG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cXFwic2VsZWN0aW9uTW9kZWwubGVuZ3RoOyBlbHNlIHBsYWNlaG9sZGVyVGVtcGxhdGVcXFwiPlxcbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XFxcImN1c3RvbUxhYmVsOyBlbHNlIGRlZmF1bHRTZWxlY3Rpb25UZW1wbGF0ZVxcXCI+XFxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLXNlbGVjdC1sYWJlbFxcXCI+PC9uZy1jb250ZW50PlxcbiAgICAgIDwvbmctY29udGFpbmVyPlxcblxcbiAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdFNlbGVjdGlvblRlbXBsYXRlPnt7IHNlbGVjdGlvblZpZXcgfX08L25nLXRlbXBsYXRlPlxcbiAgICA8L25nLWNvbnRhaW5lcj5cXG5cXG4gICAgPG5nLXRlbXBsYXRlICNwbGFjZWhvbGRlclRlbXBsYXRlPnt7IHBsYWNlaG9sZGVyIH19PC9uZy10ZW1wbGF0ZT5cXG5cXG4gICAgPG5iLWljb24gaWNvbj1cXFwiY2hldnJvbi1kb3duLW91dGxpbmVcXFwiIHBhY2s9XFxcIm5lYnVsYXItZXNzZW50aWFsc1xcXCIgKGNsaWNrKT1cXFwiZGlzYWJsZWQgJiYgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+XFxuICAgIDwvbmItaWNvbj5cXG48L2J1dHRvbj5cXG5cXG48bmItb3B0aW9uLWxpc3QgKm5iUG9ydGFsIFtzaXplXT1cXFwic2l6ZVxcXCIgW3Bvc2l0aW9uXT1cXFwib3ZlcmxheVBvc2l0aW9uXFxcIiBbc3R5bGUud2lkdGgucHhdPVxcXCJob3N0V2lkdGhcXFwiPlxcbiAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1vcHRpb24sIG5iLW9wdGlvbi1ncm91cFxcXCI+PC9uZy1jb250ZW50PlxcbjwvbmItb3B0aW9uLWxpc3Q+XFxuXCIsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE5iU2VsZWN0Q29tcG9uZW50XzE7IH0pLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfU0VMRUNUX0lOSkVDVElPTl9UT0tFTiwgdXNlRXhpc3Rpbmc6IE5iU2VsZWN0Q29tcG9uZW50XzEgfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5iRm9ybUZpZWxkQ29udHJvbCwgdXNlRXhpc3Rpbmc6IE5iU2VsZWN0Q29tcG9uZW50XzEgfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5iRm9ybUZpZWxkQ29udHJvbENvbmZpZywgdXNlRmFjdG9yeTogbmJTZWxlY3RGb3JtRmllbGRDb250cm9sQ29uZmlnRmFjdG9yeSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHN0eWxlczogW1wiLyohXFxuICogQGxpY2Vuc2VcXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXFxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cXG4gKi86aG9zdHtkaXNwbGF5OmlubGluZS1ibG9jazttYXgtd2lkdGg6MTAwJX1bZGlyPWx0cl0gOmhvc3QgLnNlbGVjdC1idXR0b257dGV4dC1hbGlnbjpsZWZ0fVtkaXI9bHRyXSA6aG9zdCAuc2VsZWN0LWJ1dHRvbiBuYi1pY29ue3JpZ2h0OjAuMmVtfVtkaXI9cnRsXSA6aG9zdCAuc2VsZWN0LWJ1dHRvbnt0ZXh0LWFsaWduOnJpZ2h0fVtkaXI9cnRsXSA6aG9zdCAuc2VsZWN0LWJ1dHRvbiBuYi1pY29ue2xlZnQ6MC4yZW19Omhvc3QoLmZ1bGwtd2lkdGgpe3dpZHRoOjEwMCV9Omhvc3QoLm5iLXRyYW5zaXRpb24pIC5zZWxlY3QtYnV0dG9ue3RyYW5zaXRpb24tZHVyYXRpb246MC4xNXM7dHJhbnNpdGlvbi1wcm9wZXJ0eTpiYWNrZ3JvdW5kLWNvbG9yLGJvcmRlci1jb2xvcixib3JkZXItcmFkaXVzLGJveC1zaGFkb3csY29sb3I7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbn0uc2VsZWN0LWJ1dHRvbntwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3RleHQtdHJhbnNmb3JtOm5vbmU7d2hpdGUtc3BhY2U6bm93cmFwfW5iLWljb257Zm9udC1zaXplOjEuNWVtO3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7dHJhbnNpdGlvbi1kdXJhdGlvbjowLjE1czt0cmFuc2l0aW9uLXByb3BlcnR5OnRyYW5zZm9ybTt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWlufVtkaXI9bHRyXSBuYi1pY29ue3JpZ2h0Oi41cmVtfVtkaXI9cnRsXSBuYi1pY29ue2xlZnQ6LjVyZW19Omhvc3QoLm9wZW4pIG5iLWljb257dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDE4MGRlZyl9XFxuXCJdXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDAsIEluamVjdChOQl9ET0NVTUVOVCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgTmJPdmVybGF5U2VydmljZSxcbiAgICAgICAgICAgIEVsZW1lbnRSZWYsXG4gICAgICAgICAgICBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UsXG4gICAgICAgICAgICBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBOYkZvY3VzS2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlLFxuICAgICAgICAgICAgTmJGb2N1c01vbml0b3IsXG4gICAgICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgICAgICBOZ1pvbmVdKVxuICAgIF0sIE5iU2VsZWN0Q29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJTZWxlY3RDb21wb25lbnQ7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogTmJPcHRpb25Hcm91cENvbXBvbmVudFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBvcHRpb24tZ3JvdXAtdGV4dC1jb2xvcjpcbiAqIG9wdGlvbi1ncm91cC10aW55LXN0YXJ0LXBhZGRpbmc6XG4gKiBvcHRpb24tZ3JvdXAtc21hbGwtc3RhcnQtcGFkZGluZzpcbiAqIG9wdGlvbi1ncm91cC1tZWRpdW0tc3RhcnQtcGFkZGluZzpcbiAqIG9wdGlvbi1ncm91cC1sYXJnZS1zdGFydC1wYWRkaW5nOlxuICogb3B0aW9uLWdyb3VwLWdpYW50LXN0YXJ0LXBhZGRpbmc6XG4gKiovXG52YXIgTmJPcHRpb25Hcm91cENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYk9wdGlvbkdyb3VwQ29tcG9uZW50KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPcHRpb25zRGlzYWJsZWRTdGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJPcHRpb25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRBdHRyaWJ1dGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkID8gJycgOiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYk9wdGlvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyQ29udGVudEluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFzeW5jVXBkYXRlT3B0aW9uc0Rpc2FibGVkU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMuY2hhbmdlc1xuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hc3luY1VwZGF0ZU9wdGlvbnNEaXNhYmxlZFN0YXRlKCk7IH0pO1xuICAgIH07XG4gICAgTmJPcHRpb25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIGRpc2FibGVkIHN0YXRlIGZvciBlYWNoIG9wdGlvbiB0byBjdXJyZW50IGdyb3VwIGRpc2FibGVkIHN0YXRlLlxuICAgICAqL1xuICAgIE5iT3B0aW9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLnVwZGF0ZU9wdGlvbnNEaXNhYmxlZFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7IHJldHVybiBvcHRpb24uc2V0RGlzYWJsZWRCeUdyb3VwU3RhdGUoX3RoaXMuZGlzYWJsZWQpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgb3B0aW9ucyBkaXNhYmxlZCBzdGF0ZSBhZnRlciBwcm9taXNlIHJlc29sdXRpb24uXG4gICAgICogVGhpcyB3YXkgY2hhbmdlIGRldGVjdGlvbiB3aWxsIGJlIHRyaWdnZXJlZCBhZnRlciBvcHRpb25zIHN0YXRlIHVwZGF0ZWQuXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHdoZW4gdXBkYXRpbmcgb3B0aW9ucyBkdXJpbmcgY2hhbmdlIGRldGVjdGlvbiBydW4gKGUuZy4gUXVlcnlMaXN0LmNoYW5nZXMsIGxpZmVjeWNsZSBob29rcykuXG4gICAgICovXG4gICAgTmJPcHRpb25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUuYXN5bmNVcGRhdGVPcHRpb25zRGlzYWJsZWRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy51cGRhdGVPcHRpb25zRGlzYWJsZWRTdGF0ZSgpOyB9KTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iT3B0aW9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYk9wdGlvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlzYWJsZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYk9wdGlvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZEF0dHJpYnV0ZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29udGVudENoaWxkcmVuKE5iT3B0aW9uQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iT3B0aW9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcIm9wdGlvbnNcIiwgdm9pZCAwKTtcbiAgICBOYk9wdGlvbkdyb3VwQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLW9wdGlvbi1ncm91cCcsXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8c3BhbiBjbGFzcz1cXFwib3B0aW9uLWdyb3VwLXRpdGxlXFxcIj57eyB0aXRsZSB9fTwvc3Bhbj5cXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1vcHRpb24sIG5nLWNvbnRhaW5lclxcXCI+PC9uZy1jb250ZW50PlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6YmxvY2t9Lm9wdGlvbi1ncm91cC10aXRsZXtkaXNwbGF5OmJsb2NrfVxcblwiXVxuICAgICAgICB9KVxuICAgIF0sIE5iT3B0aW9uR3JvdXBDb21wb25lbnQpO1xuICAgIHJldHVybiBOYk9wdGlvbkdyb3VwQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBUaGUgYE5iT3B0aW9uTGlzdENvbXBvbmVudGAgaXMgY29udGFpbmVyIGNvbXBvbmVudCBmb3IgYE5iT3B0aW9uR3JvdXBDb21wb25lbnRgIGFuZGBOYk9wdGlvbkNvbXBvbmVudGAgbGlzdC5cbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogb3B0aW9uLWxpc3QtbWF4LWhlaWdodDpcbiAqIG9wdGlvbi1saXN0LXNoYWRvdzpcbiAqIG9wdGlvbi1saXN0LWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tbGlzdC1ib3JkZXItc3R5bGU6XG4gKiBvcHRpb24tbGlzdC1ib3JkZXItd2lkdGg6XG4gKiBvcHRpb24tbGlzdC1ib3JkZXItY29sb3I6XG4gKiBvcHRpb24tbGlzdC1ib3JkZXItcmFkaXVzOlxuICogb3B0aW9uLWxpc3QtYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogb3B0aW9uLWxpc3QtYWRqYWNlbnQtYm9yZGVyLXN0eWxlOlxuICogb3B0aW9uLWxpc3QtYWRqYWNlbnQtYm9yZGVyLXdpZHRoOlxuICogKi9cbnZhciBOYk9wdGlvbkxpc3RDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJPcHRpb25MaXN0Q29tcG9uZW50KCkge1xuICAgICAgICB0aGlzLnNpemUgPSAnbWVkaXVtJztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25Ub3BcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLlRPUDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25Cb3R0b21cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLkJPVFRPTTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVRpbnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICd0aW55JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVNtYWxsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJPcHRpb25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplTWVkaXVtXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZUxhcmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbGFyZ2UnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJPcHRpb25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplR2lhbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnBvc2l0aW9uLXRvcCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYk9wdGlvbkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInBvc2l0aW9uVG9wXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MucG9zaXRpb24tYm90dG9tJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicG9zaXRpb25Cb3R0b21cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXRpbnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJPcHRpb25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplVGlueVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtc21hbGwnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJPcHRpb25MaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplU21hbGxcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLW1lZGl1bScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYk9wdGlvbkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVNZWRpdW1cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iT3B0aW9uTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZUxhcmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc2l6ZS1naWFudCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYk9wdGlvbkxpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVHaWFudFwiLCBudWxsKTtcbiAgICBOYk9wdGlvbkxpc3RDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItb3B0aW9uLWxpc3QnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDx1bCBjbGFzcz1cXFwib3B0aW9uLWxpc3RcXFwiPlxcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgPC91bD5cXG4gIFwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgfSlcbiAgICBdLCBOYk9wdGlvbkxpc3RDb21wb25lbnQpO1xuICAgIHJldHVybiBOYk9wdGlvbkxpc3RDb21wb25lbnQ7XG59KCkpO1xuXG52YXIgTkJfT1BUSU9OX0xJU1RfQ09NUE9ORU5UUyA9IFtcbiAgICBOYk9wdGlvbkxpc3RDb21wb25lbnQsXG4gICAgTmJPcHRpb25Db21wb25lbnQsXG4gICAgTmJPcHRpb25Hcm91cENvbXBvbmVudCxcbl07XG52YXIgTmJPcHRpb25Nb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJPcHRpb25Nb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iT3B0aW9uTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogX19zcHJlYWRBcnJheXMoTkJfT1BUSU9OX0xJU1RfQ09NUE9ORU5UUyksXG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iQ2hlY2tib3hNb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoTkJfT1BUSU9OX0xJU1RfQ09NUE9ORU5UUyksXG4gICAgICAgIH0pXG4gICAgXSwgTmJPcHRpb25Nb2R1bGUpO1xuICAgIHJldHVybiBOYk9wdGlvbk1vZHVsZTtcbn0oKSk7XG5cbnZhciBOQl9TRUxFQ1RfQ09NUE9ORU5UUyA9IFtcbiAgICBOYlNlbGVjdENvbXBvbmVudCxcbiAgICBOYlNlbGVjdExhYmVsQ29tcG9uZW50LFxuXTtcbnZhciBOYlNlbGVjdE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNlbGVjdE1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJTZWxlY3RNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iT3ZlcmxheU1vZHVsZSxcbiAgICAgICAgICAgICAgICBOYkJ1dHRvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBOYklucHV0TW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iQ2FyZE1vZHVsZSxcbiAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJPcHRpb25Nb2R1bGUsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoTkJfU0VMRUNUX0NPTVBPTkVOVFMsIFtcbiAgICAgICAgICAgICAgICBOYk9wdGlvbk1vZHVsZSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBfX3NwcmVhZEFycmF5cyhOQl9TRUxFQ1RfQ09NUE9ORU5UUyksXG4gICAgICAgIH0pXG4gICAgXSwgTmJTZWxlY3RNb2R1bGUpO1xuICAgIHJldHVybiBOYlNlbGVjdE1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8vIENvbXBvbmVudCBjbGFzcyBzY29wZWQgY291bnRlciBmb3IgYXJpYSBhdHRyaWJ1dGVzLlxudmFyIGxhc3RBdXRvY29tcGxldGVJZCA9IDA7XG4vKipcbiAqIFRoZSBgTmJBdXRvY29tcGxldGVDb21wb25lbnRgIG92ZXJsYXkgY29tcG9uZW50LlxuICogUHJvdmlkZXMgYW4gYE5iT3B0aW9uTGlzdGAgb3ZlcmxheSBjb21wb25lbnQuXG4gKiAqL1xudmFyIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50KGNkKSB7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb21wb25lbnQgc2NvcGVkIGlkIGZvciBhcmlhIGF0dHJpYnV0ZXMuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuaWQgPSBcIm5iLWF1dG9jb21wbGV0ZS1cIiArIGxhc3RBdXRvY29tcGxldGVJZCsrO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiBDdXJyZW50IG92ZXJsYXkgcG9zaXRpb24gYmVjYXVzZSBvZiB3ZSBoYXZlIHRvIHRvZ2dsZSBvdmVybGF5UG9zaXRpb25cbiAgICAgICAgICogaW4gW25nQ2xhc3NdIGRpcmVjdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX292ZXJsYXlQb3NpdGlvbiA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXV0b2NvbXBsZXRlIHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICAgICAgICogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCAoZGVmYXVsdCksIGBsYXJnZWAsIGBnaWFudGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmxhZyBwYXNzZWQgYXMgaW5wdXQgdG8gYWx3YXlzIG1ha2UgZmlyc3Qgb3B0aW9uIGFjdGl2ZS5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5hY3RpdmVGaXJzdCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2lsbCBiZSBlbWl0dGVkIHdoZW4gc2VsZWN0ZWQgdmFsdWUgY2hhbmdlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvdmVybGF5UG9zaXRpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vdmVybGF5UG9zaXRpb247XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5UG9zaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgIC8vIE5lZWQgcnVuIGNoYW5nZSBkZXRlY3Rpb24gYWZ0ZXIgZmlyc3Qgc2V0IGZyb20gTmJBdXRvY29tcGxldGVEaXJlY3RpdmVcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBdXRvY29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RXaWR0aFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHdpZHRoIG9mIHRoZSBpbnB1dC5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyQ29udGVudEluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jaGFuZ2VzXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmNkLmRldGVjdENoYW5nZXMoKTsgfSk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBdXRvY29tcGxldGUga25vd3Mgbm90aGluZyBhYm91dCBob3N0IGh0bWwgaW5wdXQgZWxlbWVudC5cbiAgICAgKiBTbywgYXR0YWNoIG1ldGhvZCBzZXQgaW5wdXQgaG9zdFJlZiBmb3Igc3R5bGluZy5cbiAgICAgKiAqL1xuICAgIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZS5zZXRIb3N0ID0gZnVuY3Rpb24gKGhvc3RSZWYpIHtcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFByb3BhZ2F0ZSBzZWxlY3RlZCB2YWx1ZS5cbiAgICAgKiAqL1xuICAgIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZS5lbWl0U2VsZWN0ZWQgPSBmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KHNlbGVjdGVkKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkF1dG9jb21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidGlueVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3RpbnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBdXRvY29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcInNtYWxsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBdXRvY29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcIm1lZGl1bVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkF1dG9jb21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibGFyZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdsYXJnZSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkF1dG9jb21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ2lhbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG4gICAgXSwgTmJBdXRvY29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImhhbmRsZURpc3BsYXlGblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3RpdmVGaXJzdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwic2VsZWN0ZWRDaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29udGVudENoaWxkcmVuKE5iT3B0aW9uQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcHRpb25zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZChOYlBvcnRhbERpcmVjdGl2ZSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOYlBvcnRhbERpcmVjdGl2ZSlcbiAgICBdLCBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9ydGFsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXRpbnknKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBdXRvY29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcInRpbnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLXNtYWxsJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzbWFsbFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtbWVkaXVtJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZWRpdW1cIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zaXplLWxhcmdlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXJnZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnNpemUtZ2lhbnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBdXRvY29tcGxldGVDb21wb25lbnQucHJvdG90eXBlLCBcImdpYW50XCIsIG51bGwpO1xuICAgIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWF1dG9jb21wbGV0ZScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bmItb3B0aW9uLWxpc3QgKm5iUG9ydGFsXFxuICAgICAgICAgICAgICAgIFtzaXplXT1cXFwic2l6ZVxcXCJcXG4gICAgICAgICAgICAgICAgW3Bvc2l0aW9uXT1cXFwib3ZlcmxheVBvc2l0aW9uXFxcIlxcbiAgICAgICAgICAgICAgICBbc3R5bGUud2lkdGgucHhdPVxcXCJob3N0V2lkdGhcXFwiXFxuICAgICAgICAgICAgICAgIHJvbGU9XFxcImxpc3Rib3hcXFwiXFxuICAgICAgICAgICAgICAgIFtpZF09XFxcImlkXFxcIlxcbiAgICAgICAgICAgICAgICBbY2xhc3MuZW1wdHldPVxcXCIhb3B0aW9ucz8ubGVuZ3RoXFxcIj5cXG4gIDxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItb3B0aW9uLCBuYi1vcHRpb24tZ3JvdXBcXFwiPjwvbmctY29udGVudD5cXG48L25iLW9wdGlvbi1saXN0PlxcblwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0KDpob3Zlcil7Y3Vyc29yOnBvaW50ZXJ9bmItb3B0aW9uLWxpc3QuZW1wdHl7Ym9yZGVyOm5vbmV9XFxuXCJdXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0NoYW5nZURldGVjdG9yUmVmXSlcbiAgICBdLCBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlYCBwcm92aWRlcyBhIGNhcGFiaWxpdHkgdG8gZXhwYW5kIGlucHV0IHdpdGhcbiAqIGBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudGAgb3ZlcmxheSBjb250YWluaW5nIG9wdGlvbnMgdG8gc2VsZWN0IGFuZCBmaWxsIGlucHV0IHdpdGguXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgYXV0b2NvbXBsZXRlL2F1dG9jb21wbGV0ZS1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJBdXRvY29tcGxldGVNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQXV0b2NvbXBsZXRlTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBZb3UgY2FuIGJpbmQgY29udHJvbCB3aXRoIGZvcm0gY29udHJvbHMgb3IgbmdNb2RlbC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF1dG9jb21wbGV0ZSBmb3JtIGJpbmRpbmcsIGF1dG9jb21wbGV0ZS9hdXRvY29tcGxldGUtZm9ybS5jb21wb25lbnQpXG4gKlxuICogT3B0aW9ucyBpbiB0aGUgYXV0b2NvbXBsZXRlIG1heSBiZSBncm91cGVkIHVzaW5nIGBuYi1vcHRpb24tZ3JvdXBgIGNvbXBvbmVudC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEdyb3VwaW5nLCBhdXRvY29tcGxldGUvYXV0b2NvbXBsZXRlLWdyb3VwLmNvbXBvbmVudClcbiAqXG4gKiBBdXRvY29tcGxldGUgbWF5IGNoYW5nZSBzZWxlY3RlZCBvcHRpb24gdmFsdWUgdmlhIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ3VzdG9tIGRpc3BsYXksIGF1dG9jb21wbGV0ZS9hdXRvY29tcGxldGUtY3VzdG9tLWRpc3BsYXkuY29tcG9uZW50KVxuICpcbiAqIEFsc28sIGF1dG9jb21wbGV0ZSBtYXkgbWFrZSBmaXJzdCBvcHRpb24gaW4gb3B0aW9uIGxpc3QgYWN0aXZlIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShBY3RpdmUgZmlyc3QsIGF1dG9jb21wbGV0ZS9hdXRvY29tcGxldGUtYWN0aXZlLWZpcnN0LmNvbXBvbmVudClcbiAqXG4gKiAqL1xudmFyIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlKGhvc3RSZWYsIG92ZXJsYXksIGNkLCB0cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyLCBwb3NpdGlvbkJ1aWxkZXIsIGFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeSkge1xuICAgICAgICB0aGlzLmhvc3RSZWYgPSBob3N0UmVmO1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5QnVpbGRlciA9IHRyaWdnZXJTdHJhdGVneUJ1aWxkZXI7XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLmFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeSA9IGFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeTtcbiAgICAgICAgdGhpcy5vdmVybGF5T2Zmc2V0ID0gODtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuX29uQ2hhbmdlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICB0aGlzLl9vblRvdWNoZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHRoaXMuX2ZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yb2xlID0gJ2NvbWJvYm94JztcbiAgICAgICAgdGhpcy5hcmlhQXV0b2NvbXBsZXRlID0gJ2xpc3QnO1xuICAgICAgICB0aGlzLmhhc1BvcHVwID0gJ3RydWUnO1xuICAgIH1cbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZV8xID0gTmJBdXRvY29tcGxldGVEaXJlY3RpdmU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpc09wZW5cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBhdXRvY29tcGxldGUgb3ZlcmxheSBvcGVuZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheVJlZiAmJiB0aGlzLm92ZXJsYXlSZWYuaGFzQXR0YWNoZWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpc0Nsb3NlZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIGF1dG9jb21wbGV0ZSBvdmVybGF5IGNsb3NlZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNPcGVuO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImF1dG9jb21wbGV0ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm92aWRlcyBhdXRvY29tcGxldGUgY29tcG9uZW50LlxuICAgICAgICAgKiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdXRvY29tcGxldGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGF1dG9jb21wbGV0ZSkge1xuICAgICAgICAgICAgdGhpcy5fYXV0b2NvbXBsZXRlID0gYXV0b2NvbXBsZXRlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgaWYgdGhlIGlucHV0IHdpbGwgYmUgZm9jdXNlZCB3aGVuIHRoZSBjb250cm9sIHZhbHVlIGlzIGNoYW5nZWRcbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9jdXNJbnB1dE9uVmFsdWVDaGFuZ2U7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c0lucHV0T25WYWx1ZUNoYW5nZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwidG9wXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc09wZW4gJiYgdGhpcy5hdXRvY29tcGxldGUub3B0aW9ucy5sZW5ndGggJiYgdGhpcy5hdXRvY29tcGxldGUub3ZlcmxheVBvc2l0aW9uID09PSBOYlBvc2l0aW9uLlRPUDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJib3R0b21cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzT3BlbiAmJiB0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zLmxlbmd0aCAmJiB0aGlzLmF1dG9jb21wbGV0ZS5vdmVybGF5UG9zaXRpb24gPT09IE5iUG9zaXRpb24uQk9UVE9NO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImFyaWFFeHBhbmRlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNPcGVuICYmIHRoaXMuaXNPcGVuLnRvU3RyaW5nKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYXJpYU93bnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzT3BlbiA/IHRoaXMuYXV0b2NvbXBsZXRlLmlkIDogbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJhcmlhQWN0aXZlRGVzY2VuZGFudFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmlzT3BlbiAmJiB0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbSkgPyB0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbS5pZCA6IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVUcmlnZ2VyU3RyYXRlZ3koKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPblRyaWdnZXJzKCk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnRyaWdnZXJTdHJhdGVneSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uU3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheVJlZikge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5UmVmLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLmhhbmRsZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgICAgIHRoaXMuX29uQ2hhbmdlKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIHRoaXMuc2V0SG9zdElucHV0VmFsdWUodGhpcy5nZXREaXNwbGF5VmFsdWUoY3VycmVudFZhbHVlKSk7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLmhhbmRsZUtleWRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLmhhbmRsZUJsdXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX29uVG91Y2hlZCgpO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFRvT3ZlcmxheSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVJdGVtKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVJlZi5kZXRhY2goKTtcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gdXBkYXRlIGNsYXNzIHZpYSBASG9zdEJpbmRpbmdcbiAgICAgICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS53cml0ZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXRWYWx1ZVVwZGF0ZSh2YWx1ZSk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUucmVnaXN0ZXJPbkNoYW5nZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB0aGlzLl9vbkNoYW5nZSA9IGZuO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLnJlZ2lzdGVyT25Ub3VjaGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHRoaXMuX29uVG91Y2hlZCA9IGZuO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLnN1YnNjcmliZU9uT3B0aW9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGUgdXNlciBjaGFuZ2VzIHByb3ZpZGVkIG9wdGlvbnMgbGlzdCBpbiB0aGUgcnVudGltZSB3ZSBoYXZlIHRvIGhhbmRsZSB0aGlzXG4gICAgICAgICAqIGFuZCByZXN1YnNjcmliZSBvbiBvcHRpb25zIHNlbGVjdGlvbiBjaGFuZ2VzIGV2ZW50LlxuICAgICAgICAgKiBPdGhlcndpc2UsIHRoZSB1c2VyIHdpbGwgbm90IGJlIGFibGUgdG8gc2VsZWN0IG5ldyBvcHRpb25zLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHRhcChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zZXRBY3RpdmVJdGVtKCk7IH0pLCBzdGFydFdpdGgodGhpcy5hdXRvY29tcGxldGUub3B0aW9ucyksIHN3aXRjaE1hcChmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIG1lcmdlLmFwcGx5KHZvaWQgMCwgb3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbikgeyByZXR1cm4gb3B0aW9uLmNsaWNrOyB9KSk7XG4gICAgICAgIH0pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uIChjbGlja2VkT3B0aW9uKSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dFZhbHVlVXBkYXRlKGNsaWNrZWRPcHRpb24udmFsdWUpOyB9KTtcbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5zdWJzY3JpYmVPblBvc2l0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3kucG9zaXRpb25DaGFuZ2VcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy5hdXRvY29tcGxldGUub3ZlcmxheVBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgICAgICBfdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLmdldEFjdGl2ZUl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbTtcbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5zZXR1cEF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hdXRvY29tcGxldGUuc2V0SG9zdCh0aGlzLmhvc3RSZWYpO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLmdldERpc3BsYXlWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZGlzcGxheUZuID0gdGhpcy5hdXRvY29tcGxldGUuaGFuZGxlRGlzcGxheUZuO1xuICAgICAgICByZXR1cm4gZGlzcGxheUZuID8gZGlzcGxheUZuKHZhbHVlKSA6IHZhbHVlO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLmdldENvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheVJlZiAmJiB0aGlzLmlzT3BlbiAmJiB7XG4gICAgICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgICAgICAgIG5hdGl2ZUVsZW1lbnQ6IHRoaXMub3ZlcmxheVJlZi5vdmVybGF5RWxlbWVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUuaGFuZGxlSW5wdXRWYWx1ZVVwZGF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0SG9zdElucHV0VmFsdWUodmFsdWUpO1xuICAgICAgICB0aGlzLl9vbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlLmVtaXRTZWxlY3RlZCh2YWx1ZSk7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH07XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLnN1YnNjcmliZU9uVHJpZ2dlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LnNob3ckXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaXNDbG9zZWQ7IH0pKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zaG93KCk7IH0pO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneS5oaWRlJFxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmlzT3BlbjsgfSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhpZGUoKTsgfSk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUuY3JlYXRlVHJpZ2dlclN0cmF0ZWd5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyXG4gICAgICAgICAgICAudHJpZ2dlcihOYlRyaWdnZXIuRk9DVVMpXG4gICAgICAgICAgICAuaG9zdCh0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudClcbiAgICAgICAgICAgIC5jb250YWluZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZ2V0Q29udGFpbmVyKCk7IH0pXG4gICAgICAgICAgICAuYnVpbGQoKTtcbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5jcmVhdGVLZXlNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmtleU1hbmFnZXIgPSB0aGlzLmFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeVxuICAgICAgICAgICAgLmNyZWF0ZSh0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zKTtcbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5zZXRIb3N0SW5wdXRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudC52YWx1ZSA9IHRoaXMuZ2V0RGlzcGxheVZhbHVlKHZhbHVlKTtcbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5jcmVhdGVQb3NpdGlvblN0cmF0ZWd5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbkJ1aWxkZXJcbiAgICAgICAgICAgIC5jb25uZWN0ZWRUbyh0aGlzLmhvc3RSZWYpXG4gICAgICAgICAgICAucG9zaXRpb24oTmJQb3NpdGlvbi5CT1RUT00pXG4gICAgICAgICAgICAub2Zmc2V0KHRoaXMub3ZlcmxheU9mZnNldClcbiAgICAgICAgICAgIC5hZGp1c3RtZW50KE5iQWRqdXN0bWVudC5WRVJUSUNBTCk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUuc3Vic2NyaWJlT25PdmVybGF5S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5vdmVybGF5UmVmLmtleWRvd25FdmVudHMoKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBFU0NBUEUgJiYgX3RoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSBFTlRFUikge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUl0ZW0gPSBfdGhpcy5nZXRBY3RpdmVJdGVtKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFhY3RpdmVJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlSW5wdXRWYWx1ZVVwZGF0ZShhY3RpdmVJdGVtLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmtleU1hbmFnZXIub25LZXlkb3duKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUuc2V0QWN0aXZlSXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSWYgYXV0b2NvbXBsZXRlIGhhcyBhY3RpdmVGaXJzdCBpbnB1dCBzZXQgdG8gdHJ1ZSxcbiAgICAgICAgLy8ga2V5TWFuYWdlciBzZXQgZmlyc3Qgb3B0aW9uIGFjdGl2ZSwgb3RoZXJ3aXNlIC0gcmVzZXQgYWN0aXZlIG9wdGlvbi5cbiAgICAgICAgdmFyIG1vZGUgPSB0aGlzLmF1dG9jb21wbGV0ZS5hY3RpdmVGaXJzdFxuICAgICAgICAgICAgPyBOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZS5GSVJTVF9BQ1RJVkVcbiAgICAgICAgICAgIDogTmJLZXlNYW5hZ2VyQWN0aXZlSXRlbU1vZGUuUkVTRVRfQUNUSVZFO1xuICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0QWN0aXZlSXRlbShtb2RlKTtcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUuYXR0YWNoVG9PdmVybGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMub3ZlcmxheVJlZikge1xuICAgICAgICAgICAgdGhpcy5zZXR1cEF1dG9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgdGhpcy5pbml0T3ZlcmxheSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheVJlZi5hdHRhY2godGhpcy5hdXRvY29tcGxldGUucG9ydGFsKTtcbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5jcmVhdGVPdmVybGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2Nyb2xsU3RyYXRlZ3kgPSB0aGlzLmNyZWF0ZVNjcm9sbFN0cmF0ZWd5KCk7XG4gICAgICAgIHRoaXMub3ZlcmxheVJlZiA9IHRoaXMub3ZlcmxheS5jcmVhdGUoeyBwb3NpdGlvblN0cmF0ZWd5OiB0aGlzLnBvc2l0aW9uU3RyYXRlZ3ksIHNjcm9sbFN0cmF0ZWd5OiBzY3JvbGxTdHJhdGVneSB9KTtcbiAgICB9O1xuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZS5pbml0T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVQb3NpdGlvblN0cmF0ZWd5KCk7XG4gICAgICAgIHRoaXMuY3JlYXRlS2V5TWFuYWdlcigpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uUG9zaXRpb25DaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbk9wdGlvbkNsaWNrKCk7XG4gICAgICAgIHRoaXMuY2hlY2tPdmVybGF5VmlzaWJpbGl0eSgpO1xuICAgICAgICB0aGlzLmNyZWF0ZU92ZXJsYXkoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbk92ZXJsYXlLZXlzKCk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUuY2hlY2tPdmVybGF5VmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5hdXRvY29tcGxldGUub3B0aW9ucy5jaGFuZ2VzXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUuY3JlYXRlU2Nyb2xsU3RyYXRlZ3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXkuc2Nyb2xsU3RyYXRlZ2llcy5ibG9jaygpO1xuICAgIH07XG4gICAgdmFyIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlXzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkF1dG9jb21wbGV0ZScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTmJBdXRvY29tcGxldGVDb21wb25lbnQpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iQXV0b2NvbXBsZXRlQ29tcG9uZW50XSlcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYXV0b2NvbXBsZXRlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubmItYXV0b2NvbXBsZXRlLXBvc2l0aW9uLXRvcCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwidG9wXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubmItYXV0b2NvbXBsZXRlLXBvc2l0aW9uLWJvdHRvbScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYm90dG9tXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnYXR0ci5yb2xlJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcInJvbGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1hdXRvY29tcGxldGUnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYXJpYUF1dG9jb21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnYXR0ci5oYXNwb3B1cCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJoYXNQb3B1cFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnYXR0ci5hcmlhLWV4cGFuZGVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImFyaWFFeHBhbmRlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1vd25zJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImFyaWFPd25zXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnYXR0ci5hcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYXJpYUFjdGl2ZURlc2NlbmRhbnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignaW5wdXQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiaGFuZGxlSW5wdXRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcigna2V5ZG93bi5hcnJvd0Rvd24nKSxcbiAgICAgICAgSG9zdExpc3RlbmVyKCdrZXlkb3duLmFycm93VXAnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm90b3R5cGUsIFwiaGFuZGxlS2V5ZG93blwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdExpc3RlbmVyKCdibHVyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG4gICAgXSwgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUucHJvdG90eXBlLCBcImhhbmRsZUJsdXJcIiwgbnVsbCk7XG4gICAgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUgPSBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ2lucHV0W25iQXV0b2NvbXBsZXRlXScsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZihmdW5jdGlvbiAoKSB7IHJldHVybiBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZV8xOyB9KSxcbiAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsXG4gICAgICAgICAgICBOYk92ZXJsYXlTZXJ2aWNlLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlLFxuICAgICAgICAgICAgTmJQb3NpdGlvbkJ1aWxkZXJTZXJ2aWNlLFxuICAgICAgICAgICAgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlXSlcbiAgICBdLCBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5CX0FVVE9DT01QTEVURV9DT01QT05FTlRTID0gW1xuICAgIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LFxuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLFxuXTtcbnZhciBOYkF1dG9jb21wbGV0ZU1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkF1dG9jb21wbGV0ZU1vZHVsZSgpIHtcbiAgICB9XG4gICAgTmJBdXRvY29tcGxldGVNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBGb3Jtc01vZHVsZSxcbiAgICAgICAgICAgICAgICBOYk92ZXJsYXlNb2R1bGUsXG4gICAgICAgICAgICAgICAgTmJDYXJkTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iT3B0aW9uTW9kdWxlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGV4cG9ydHM6IF9fc3ByZWFkQXJyYXlzKE5CX0FVVE9DT01QTEVURV9DT01QT05FTlRTLCBbXG4gICAgICAgICAgICAgICAgTmJPcHRpb25Nb2R1bGUsXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogX19zcHJlYWRBcnJheXMoTkJfQVVUT0NPTVBMRVRFX0NPTVBPTkVOVFMpLFxuICAgICAgICB9KVxuICAgIF0sIE5iQXV0b2NvbXBsZXRlTW9kdWxlKTtcbiAgICByZXR1cm4gTmJBdXRvY29tcGxldGVNb2R1bGU7XG59KCkpO1xuXG52YXIgTmJXaW5kb3dTdGF0ZTtcbihmdW5jdGlvbiAoTmJXaW5kb3dTdGF0ZSkge1xuICAgIE5iV2luZG93U3RhdGVbXCJNSU5JTUlaRURcIl0gPSBcIm1pbmltaXplZFwiO1xuICAgIE5iV2luZG93U3RhdGVbXCJNQVhJTUlaRURcIl0gPSBcIm1heGltaXplZFwiO1xuICAgIE5iV2luZG93U3RhdGVbXCJGVUxMX1NDUkVFTlwiXSA9IFwiZnVsbC1zY3JlZW5cIjtcbn0pKE5iV2luZG93U3RhdGUgfHwgKE5iV2luZG93U3RhdGUgPSB7fSkpO1xuLyoqXG4gKiBXaW5kb3cgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICovXG52YXIgTmJXaW5kb3dDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJXaW5kb3dDb25maWcoKSB7XG4gICAgICAgIHZhciBjb25maWdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBjb25maWdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdpbmRvdyB0aXRsZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGl0bGUgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgd2luZG93IHN0YXRlLiBGdWxsIHNjcmVlbiBieSBkZWZhdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsU3RhdGUgPSBOYldpbmRvd1N0YXRlLkZVTExfU0NSRUVOO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSB0aGFuIGJhY2tkcm9wIHdpbGwgYmUgcmVuZGVyZWQgYmVoaW5kIHdpbmRvdy5cbiAgICAgICAgICogQnkgZGVmYXVsdCBzZXQgdG8gdHJ1ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFzQmFja2Ryb3AgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgc2V0IHRvIHRydWUgbW91c2UgY2xpY2tzIG9uIGJhY2tkcm9wIHdpbGwgY2xvc2UgYSB3aW5kb3cuXG4gICAgICAgICAqIERlZmF1bHQgaXMgdHJ1ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2VPbkJhY2tkcm9wQ2xpY2sgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSB0aGVuIGVzY2FwZSBwcmVzcyB3aWxsIGNsb3NlIGEgd2luZG93LlxuICAgICAgICAgKiBEZWZhdWx0IGlzIHRydWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlT25Fc2MgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xhc3MgdG8gYmUgYXBwbGllZCB0byB0aGUgd2luZG93LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aW5kb3dDbGFzcyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQm90aCwgdGVtcGxhdGUgYW5kIGNvbXBvbmVudCBtYXkgcmVjZWl2ZSBkYXRhIHRocm91Z2ggYGNvbmZpZy5jb250ZXh0YCBwcm9wZXJ0eS5cbiAgICAgICAgICogRm9yIGNvbXBvbmVudHMsIHRoaXMgZGF0YSB3aWxsIGJlIHNldCBhcyBjb21wb25lbnQgcHJvcGVydGllcy5cbiAgICAgICAgICogRm9yIHRlbXBsYXRlcywgeW91IGNhbiBhY2Nlc3MgaXQgaW5zaWRlIHRlbXBsYXRlIGFzICRpbXBsaWNpdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hlcmUgdGhlIGF0dGFjaGVkIGNvbXBvbmVudCBzaG91bGQgbGl2ZSBpbiBBbmd1bGFyJ3MgKmxvZ2ljYWwqIGNvbXBvbmVudCB0cmVlLlxuICAgICAgICAgKiBUaGlzIGFmZmVjdHMgd2hhdCBpcyBhdmFpbGFibGUgZm9yIGluamVjdGlvbiBhbmQgdGhlIGNoYW5nZSBkZXRlY3Rpb24gb3JkZXIgZm9yIHRoZVxuICAgICAgICAgKiBjb21wb25lbnQgaW5zdGFudGlhdGVkIGluc2lkZSBvZiB0aGUgd2luZG93LiBUaGlzIGRvZXMgbm90IGFmZmVjdCB3aGVyZSB0aGUgd2luZG93XG4gICAgICAgICAqIGNvbnRlbnQgd2lsbCBiZSByZW5kZXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmlld0NvbnRhaW5lclJlZiA9IG51bGw7XG4gICAgICAgIE9iamVjdC5hc3NpZ24uYXBwbHkoT2JqZWN0LCBfX3NwcmVhZEFycmF5cyhbdGhpc10sIGNvbmZpZ3MpKTtcbiAgICB9XG4gICAgcmV0dXJuIE5iV2luZG93Q29uZmlnO1xufSgpKTtcbnZhciBOQl9XSU5ET1dfQ09OVEVOVCA9IG5ldyBJbmplY3Rpb25Ub2tlbignTmVidWxhciBXaW5kb3cgQ29udGVudCcpO1xudmFyIE5CX1dJTkRPV19DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05lYnVsYXIgV2luZG93IENvbmZpZycpO1xudmFyIE5CX1dJTkRPV19DT05URVhUID0gbmV3IEluamVjdGlvblRva2VuKCdOZWJ1bGFyIFdpbmRvdyBDb250ZXh0Jyk7XG5cbi8qKlxuICogVGhlIGBOYldpbmRvd1JlZmAgaGVscHMgdG8gbWFuaXB1bGF0ZSB3aW5kb3cgYWZ0ZXIgaXQgd2FzIGNyZWF0ZWQuXG4gKiBUaGUgd2luZG93IGNhbiBiZSBkaXNtaXNzZWQgYnkgdXNpbmcgYGNsb3NlYCBtZXRob2Qgb2YgdGhlIHdpbmRvd1JlZi5cbiAqIFlvdSBjYW4gYWNjZXNzIHJlbmRlcmVkIGNvbXBvbmVudCBhcyBgY29tcG9uZW50UmVmYCBwcm9wZXJ0eSBvZiB0aGUgd2luZG93UmVmLlxuICovXG52YXIgTmJXaW5kb3dSZWYgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJXaW5kb3dSZWYoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuICAgICAgICB0aGlzLl9jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbG9zZWQkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGNvbmZpZy5pbml0aWFsU3RhdGU7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYldpbmRvd1JlZi5wcm90b3R5cGUsIFwic3RhdGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3VycmVudCB3aW5kb3cgc3RhdGUuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1N0YXRlKSB7XG4gICAgICAgICAgICBpZiAobmV3U3RhdGUgJiYgdGhpcy5zdGF0ZVZhbHVlICE9PSBuZXdTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldlN0YXRlVmFsdWUgPSB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVWYWx1ZSA9IG5ld1N0YXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2UkLm5leHQoeyBvbGRTdGF0ZTogdGhpcy5wcmV2U3RhdGVWYWx1ZSwgbmV3U3RhdGU6IG5ld1N0YXRlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJXaW5kb3dSZWYucHJvdG90eXBlLCBcInN0YXRlQ2hhbmdlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW4gd2luZG93IHN0YXRlIGNoYW5nZS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVDaGFuZ2UkLmFzT2JzZXJ2YWJsZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJXaW5kb3dSZWYucHJvdG90eXBlLCBcIm9uQ2xvc2VcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgd2hlbiB3aW5kb3cgd2FzIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2VkJC5hc09ic2VydmFibGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogTWluaW1pemUgd2luZG93LlxuICAgICAqL1xuICAgIE5iV2luZG93UmVmLnByb3RvdHlwZS5taW5pbWl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE5iV2luZG93U3RhdGUuTUlOSU1JWkVEO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWF4aW1pemUgd2luZG93LlxuICAgICAqL1xuICAgIE5iV2luZG93UmVmLnByb3RvdHlwZS5tYXhpbWl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE5iV2luZG93U3RhdGUuTUFYSU1JWkVEO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdpbmRvdyBvbiB0b3AuXG4gICAgICovXG4gICAgTmJXaW5kb3dSZWYucHJvdG90eXBlLmZ1bGxTY3JlZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBOYldpbmRvd1N0YXRlLkZVTExfU0NSRUVOO1xuICAgIH07XG4gICAgTmJXaW5kb3dSZWYucHJvdG90eXBlLnRvUHJldmlvdXNTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucHJldlN0YXRlVmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbG9zZXMgd2luZG93LlxuICAgICAqICovXG4gICAgTmJXaW5kb3dSZWYucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlJC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmNsb3NlZCQubmV4dCgpO1xuICAgICAgICB0aGlzLmNsb3NlZCQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBOYldpbmRvd1JlZjtcbn0oKSk7XG5cbnZhciBOYldpbmRvd3NDb250YWluZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJXaW5kb3dzQ29udGFpbmVyQ29tcG9uZW50KCkge1xuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgVmlld0NoaWxkKCd2aWV3Q29udGFpbmVyUmVmJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IHRydWUgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBWaWV3Q29udGFpbmVyUmVmKVxuICAgIF0sIE5iV2luZG93c0NvbnRhaW5lckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmlld0NvbnRhaW5lclJlZlwiLCB2b2lkIDApO1xuICAgIE5iV2luZG93c0NvbnRhaW5lckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi13aW5kb3dzLWNvbnRhaW5lcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bmctY29udGFpbmVyICN2aWV3Q29udGFpbmVyUmVmPjwvbmctY29udGFpbmVyPlwiLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1lbmQ7b3ZlcmZsb3cteDphdXRvfTpob3N0IDo6bmctZGVlcCBuYi13aW5kb3c6bm90KC5mdWxsLXNjcmVlbil7bWFyZ2luOjAgMnJlbX1cXG5cIl1cbiAgICAgICAgfSlcbiAgICBdLCBOYldpbmRvd3NDb250YWluZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYldpbmRvd3NDb250YWluZXJDb21wb25lbnQ7XG59KCkpO1xuXG52YXIgTmJXaW5kb3dDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJXaW5kb3dDb21wb25lbnQoY29udGVudCwgY29udGV4dCwgd2luZG93UmVmLCBjb25maWcsIGZvY3VzVHJhcEZhY3RvcnksIGVsZW1lbnRSZWYsIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMud2luZG93UmVmID0gd2luZG93UmVmO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5mb2N1c1RyYXBGYWN0b3J5ID0gZm9jdXNUcmFwRmFjdG9yeTtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcImlzRnVsbFNjcmVlblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2luZG93UmVmLnN0YXRlID09PSBOYldpbmRvd1N0YXRlLkZVTExfU0NSRUVOO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcIm1heGltaXplZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2luZG93UmVmLnN0YXRlID09PSBOYldpbmRvd1N0YXRlLk1BWElNSVpFRDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5pbWl6ZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndpbmRvd1JlZi5zdGF0ZSA9PT0gTmJXaW5kb3dTdGF0ZS5NSU5JTUlaRUQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iV2luZG93Q29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mb2N1c1RyYXAgPSB0aGlzLmZvY3VzVHJhcEZhY3RvcnkuY3JlYXRlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgdGhpcy5mb2N1c1RyYXAuYmx1clByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCgpO1xuICAgICAgICB0aGlzLmZvY3VzVHJhcC5mb2N1c0luaXRpYWxFbGVtZW50KCk7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy53aW5kb3dDbGFzcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5jb25maWcud2luZG93Q2xhc3MpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYldpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlclZpZXdDaGVja2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMub3ZlcmxheUNvbnRhaW5lciB8fCB0aGlzLm92ZXJsYXlDb250YWluZXIuaXNBdHRhY2hlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikge1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hUZW1wbGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hDb21wb25lbnQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5mb2N1c1RyYXApIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLnJlc3RvcmVGb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9O1xuICAgIE5iV2luZG93Q29tcG9uZW50LnByb3RvdHlwZS5taW5pbWl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMud2luZG93UmVmLnN0YXRlID09PSBOYldpbmRvd1N0YXRlLk1JTklNSVpFRCkge1xuICAgICAgICAgICAgdGhpcy53aW5kb3dSZWYudG9QcmV2aW91c1N0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndpbmRvd1JlZi5taW5pbWl6ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYldpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUubWF4aW1pemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMud2luZG93UmVmLm1heGltaXplKCk7XG4gICAgfTtcbiAgICBOYldpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUuZnVsbFNjcmVlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy53aW5kb3dSZWYuZnVsbFNjcmVlbigpO1xuICAgIH07XG4gICAgTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLm1heGltaXplT3JGdWxsU2NyZWVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy53aW5kb3dSZWYuc3RhdGUgPT09IE5iV2luZG93U3RhdGUuTUlOSU1JWkVEKSB7XG4gICAgICAgICAgICB0aGlzLm1heGltaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxTY3JlZW4oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLndpbmRvd1JlZi5jbG9zZSgpO1xuICAgIH07XG4gICAgTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJcbiAgICAgICAgICAgIC5hdHRhY2hUZW1wbGF0ZVBvcnRhbChuZXcgTmJUZW1wbGF0ZVBvcnRhbCh0aGlzLmNvbnRlbnQsIG51bGwsIHRoaXMuY29udGV4dCkpO1xuICAgIH07XG4gICAgTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaENvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvcnRhbCA9IG5ldyBOYkNvbXBvbmVudFBvcnRhbCh0aGlzLmNvbnRlbnQsIG51bGwsIG51bGwsIHRoaXMuY2ZyKTtcbiAgICAgICAgdmFyIHJlZiA9IHRoaXMub3ZlcmxheUNvbnRhaW5lci5hdHRhY2hDb21wb25lbnRQb3J0YWwocG9ydGFsLCB0aGlzLmNvbnRleHQpO1xuICAgICAgICByZWYuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIpXG4gICAgXSwgTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcImNmclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZnVsbC1zY3JlZW4nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYldpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNGdWxsU2NyZWVuXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubWF4aW1pemVkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcIm1heGltaXplZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLm1pbmltaXplZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5pbWl6ZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZChOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50KVxuICAgIF0sIE5iV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvdmVybGF5Q29udGFpbmVyXCIsIHZvaWQgMCk7XG4gICAgTmJXaW5kb3dDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItd2luZG93JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmItY2FyZD5cXG4gICAgICA8bmItY2FyZC1oZWFkZXI+XFxuICAgICAgICA8ZGl2IGNka0ZvY3VzSW5pdGlhbCBjbGFzcz1cXFwidGl0bGVcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+e3sgY29uZmlnLnRpdGxlIH19PC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXG4gICAgICAgICAgPGJ1dHRvbiBuYkJ1dHRvbiBnaG9zdCAoY2xpY2spPVxcXCJtaW5pbWl6ZSgpXFxcIj5cXG4gICAgICAgICAgICA8bmItaWNvbiBpY29uPVxcXCJtaW51cy1vdXRsaW5lXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiPjwvbmItaWNvbj5cXG4gICAgICAgICAgPC9idXR0b24+XFxuICAgICAgICAgIDxidXR0b24gbmJCdXR0b24gZ2hvc3QgKm5nSWY9XFxcImlzRnVsbFNjcmVlblxcXCIgKGNsaWNrKT1cXFwibWF4aW1pemUoKVxcXCI+XFxuICAgICAgICAgICAgPG5iLWljb24gaWNvbj1cXFwiY29sbGFwc2Utb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj48L25iLWljb24+XFxuICAgICAgICAgIDwvYnV0dG9uPlxcbiAgICAgICAgICA8YnV0dG9uIG5iQnV0dG9uIGdob3N0ICpuZ0lmPVxcXCJtaW5pbWl6ZWQgfHwgbWF4aW1pemVkXFxcIiAoY2xpY2spPVxcXCJtYXhpbWl6ZU9yRnVsbFNjcmVlbigpXFxcIj5cXG4gICAgICAgICAgICA8bmItaWNvbiBpY29uPVxcXCJleHBhbmQtb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj48L25iLWljb24+XFxuICAgICAgICAgIDwvYnV0dG9uPlxcbiAgICAgICAgICA8YnV0dG9uIG5iQnV0dG9uIGdob3N0IChjbGljayk9XFxcImNsb3NlKClcXFwiPlxcbiAgICAgICAgICAgIDxuYi1pY29uIGljb249XFxcImNsb3NlLW91dGxpbmVcXFwiIHBhY2s9XFxcIm5lYnVsYXItZXNzZW50aWFsc1xcXCI+PC9uYi1pY29uPlxcbiAgICAgICAgICA8L2J1dHRvbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvbmItY2FyZC1oZWFkZXI+XFxuICAgICAgPG5iLWNhcmQtYm9keSAqbmdJZj1cXFwibWF4aW1pemVkIHx8IGlzRnVsbFNjcmVlblxcXCI+XFxuICAgICAgICA8bmItb3ZlcmxheS1jb250YWluZXI+PC9uYi1vdmVybGF5LWNvbnRhaW5lcj5cXG4gICAgICA8L25iLWNhcmQtYm9keT5cXG4gICAgPC9uYi1jYXJkPlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2ZsZXg6MSAwIGF1dG87bWluLXdpZHRoOjIwcmVtfTpob3N0IG5iLWNhcmR7bWFyZ2luOjB9Omhvc3QgbmItY2FyZC1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjtvdmVyZmxvdzpoaWRkZW59Omhvc3QgLnRpdGxle2ZsZXg6MSAwIGF1dG87bWFyZ2luLXJpZ2h0OjNyZW07b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwfTpob3N0IC5idXR0b25ze3dpZHRoOjkuNXJlbTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWV2ZW5seX06aG9zdCAuYnV0dG9ucyBbbmJCdXR0b25de2ZsZXg6MCAwIDNyZW19Omhvc3QoLmZ1bGwtc2NyZWVuKXtwb3NpdGlvbjpmaXhlZDt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwgLTUwJSl9Omhvc3QoLm1heGltaXplZCkgbmItY2FyZHtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MH06aG9zdCgubWluaW1pemVkKSBuYi1jYXJke2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowO2hlaWdodDphdXRvfTpob3N0KC5taW5pbWl6ZWQpIG5iLWNhcmQgbmItY2FyZC1oZWFkZXJ7Ym9yZGVyLWJvdHRvbTpub25lfVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSgwLCBJbmplY3QoTkJfV0lORE9XX0NPTlRFTlQpKSxcbiAgICAgICAgX19wYXJhbSgxLCBJbmplY3QoTkJfV0lORE9XX0NPTlRFWFQpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCxcbiAgICAgICAgICAgIE5iV2luZG93UmVmLFxuICAgICAgICAgICAgTmJXaW5kb3dDb25maWcsXG4gICAgICAgICAgICBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlLFxuICAgICAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgICAgIFJlbmRlcmVyMl0pXG4gICAgXSwgTmJXaW5kb3dDb21wb25lbnQpO1xuICAgIHJldHVybiBOYldpbmRvd0NvbXBvbmVudDtcbn0oKSk7XG5cbi8qKlxuICogVGhlIGBOYldpbmRvd1NlcnZpY2VgIGNhbiBiZSB1c2VkIHRvIG9wZW4gd2luZG93cy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCB3aW5kb3cvd2luZG93LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYldpbmRvd01vZHVsZWAgdG8geW91ciBhcHAgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYldpbmRvd01vZHVsZS5mb3JSb290KGNvbmZpZyksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqIElmIHlvdSBhcmUgdXNpbmcgaXQgaW4gYSBsYXp5IGxvYWRlZCBtb2R1bGUgdGhhbiB5b3UgaGF2ZSB0byBpbnN0YWxsIGBOYldpbmRvd01vZHVsZS5mb3JDaGlsZGA6XG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iV2luZG93TW9kdWxlLmZvckNoaWxkKGNvbmZpZyksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIExhenlMb2FkZWRNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBBIG5ldyB3aW5kb3cgY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHRoZSBgb3BlbmAgbWV0aG9kIHdpdGggYSBjb21wb25lbnQgb3IgdGVtcGxhdGUgdG8gYmUgbG9hZGVkXG4gKiBhbmQgYW4gb3B0aW9uYWwgY29uZmlndXJhdGlvbi5cbiAqIGBvcGVuYCBtZXRob2Qgd2lsbCByZXR1cm4gYE5iV2luZG93UmVmYCB0aGF0IGNhbiBiZSB1c2VkIGZvciB0aGUgZnVydGhlciBtYW5pcHVsYXRpb25zLlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCB3aW5kb3dSZWYgPSB0aGlzLndpbmRvd1NlcnZpY2Uub3BlbihNeUNvbXBvbmVudCwgeyAuLi4gfSk7XG4gKiBgYGBcbiAqXG4gKiBgTmJXaW5kb3dSZWZgIGdpdmVzIHlvdSBhYmlsaXR5IG1hbmlwdWxhdGUgb3BlbmVkIHdpbmRvdy5cbiAqIEFsc28sIHlvdSBjYW4gaW5qZWN0IGBOYldpbmRvd1JlZmAgaW5zaWRlIHByb3ZpZGVkIGNvbXBvbmVudCB3aGljaCByZW5kZXJlZCBpbiB3aW5kb3cuXG4gKlxuICogYGBgdHNcbiAqIHRoaXMud2luZG93U2VydmljZS5vcGVuKE15V2luZG93Q29tcG9uZW50LCB7IC4uLiB9KTtcbiAqXG4gKiAvLyBteS5jb21wb25lbnQudHNcbiAqIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB3aW5kb3dSZWY6IE5iV2luZG93UmVmKSB7XG4gKiB9XG4gKlxuICogbWluaW1pemUoKSB7XG4gKiAgIHRoaXMud2luZG93UmVmLm1pbmltaXplKCk7XG4gKiB9XG4gKlxuICogY2xvc2UoKSB7XG4gKiAgIHRoaXMud2luZG93UmVmLmNsb3NlKCk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBJbnN0ZWFkIG9mIGNvbXBvbmVudCB5b3UgY2FuIGNyZWF0ZSB3aW5kb3cgZnJvbSBUZW1wbGF0ZVJlZi4gQXMgdXN1YWwgeW91IGNhbiBhY2Nlc3MgY29udGV4dCBwcm92aWRlZCB2aWEgY29uZmlnXG4gKiB2aWEgYGxldC1gIHZhcmlhYmxlcy4gQWxzbyB5b3UgY2FuIGdldCByZWZlcmVuY2UgdG8gdGhlIGBOYldpbmRvd1JlZmAgaW4gY29udGV4dCdzIGB3aW5kb3dSZWZgIHByb3BlcnR5LlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoV2luZG93IGNvbnRlbnQgZnJvbSBUZW1wbGF0ZVJlZiwgd2luZG93L3RlbXBsYXRlLXdpbmRvdy5jb21wb25lbnQpXG4gKlxuICogIyMjIENvbmZpZ3VyYXRpb25cbiAqXG4gKiBBcyBtZW50aW9uZWQgYWJvdmUsIGBvcGVuYCBtZXRob2Qgb2YgdGhlIGBOYldpbmRvd1NlcnZpY2VgIG1heSByZWNlaXZlIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAqIEFsc28sIHlvdSBjYW4gbW9kaWZ5IGRlZmF1bHQgd2luZG93cyBjb25maWd1cmF0aW9uIHRocm91Z2ggYE5iV2luZG93TW9kdWxlLmZvclJvb3QoeyAuLi4gfSlgLlxuICogWW91IGNhbiByZWFkIGFib3V0IGFsbCBhdmFpbGFibGUgb3B0aW9ucyBvbiBbQVBJIHRhYl0oZG9jcy9jb21wb25lbnRzL3dpbmRvdy9hcGkjbmJ3aW5kb3djb25maWcpLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ29uZmlndXJhdGlvbiwgd2luZG93L3dpbmRvd3MtYmFja2Ryb3AuY29tcG9uZW50KVxuICovXG52YXIgTmJXaW5kb3dTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iV2luZG93U2VydmljZShjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIG92ZXJsYXlTZXJ2aWNlLCBvdmVybGF5UG9zaXRpb25CdWlsZGVyLCBibG9ja1Njcm9sbFN0cmF0ZWd5LCBkZWZhdWx0V2luZG93c0NvbmZpZywgY2ZyLCBkb2N1bWVudCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlciA9IGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjtcbiAgICAgICAgdGhpcy5vdmVybGF5U2VydmljZSA9IG92ZXJsYXlTZXJ2aWNlO1xuICAgICAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbkJ1aWxkZXIgPSBvdmVybGF5UG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLmJsb2NrU2Nyb2xsU3RyYXRlZ3kgPSBibG9ja1Njcm9sbFN0cmF0ZWd5O1xuICAgICAgICB0aGlzLmRlZmF1bHRXaW5kb3dzQ29uZmlnID0gZGVmYXVsdFdpbmRvd3NDb25maWc7XG4gICAgICAgIHRoaXMuY2ZyID0gY2ZyO1xuICAgICAgICB0aGlzLm9wZW5XaW5kb3dzID0gW107XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgbmV3IHdpbmRvdy5cbiAgICAgKiBAcGFyYW0gd2luZG93Q29udGVudFxuICAgICAqIEBwYXJhbSB3aW5kb3dDb25maWdcbiAgICAgKiAqL1xuICAgIE5iV2luZG93U2VydmljZS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICh3aW5kb3dDb250ZW50LCB3aW5kb3dDb25maWcpIHtcbiAgICAgICAgaWYgKHdpbmRvd0NvbmZpZyA9PT0gdm9pZCAwKSB7IHdpbmRvd0NvbmZpZyA9IHt9OyB9XG4gICAgICAgIGlmICh0aGlzLnNob3VsZENyZWF0ZVdpbmRvd3NDb250YWluZXIoKSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVXaW5kb3dzQ29udGFpbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbmZpZyA9IG5ldyBOYldpbmRvd0NvbmZpZyh0aGlzLmRlZmF1bHRXaW5kb3dzQ29uZmlnLCB3aW5kb3dDb25maWcpO1xuICAgICAgICB2YXIgd2luZG93UmVmID0gbmV3IE5iV2luZG93UmVmKGNvbmZpZyk7XG4gICAgICAgIHdpbmRvd1JlZi5jb21wb25lbnRSZWYgPSB0aGlzLmFwcGVuZFdpbmRvdyh3aW5kb3dDb250ZW50LCBjb25maWcsIHdpbmRvd1JlZik7XG4gICAgICAgIHRoaXMub3BlbldpbmRvd3MucHVzaCh3aW5kb3dSZWYpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvRXZlbnRzKHdpbmRvd1JlZik7XG4gICAgICAgIHJldHVybiB3aW5kb3dSZWY7XG4gICAgfTtcbiAgICBOYldpbmRvd1NlcnZpY2UucHJvdG90eXBlLnNob3VsZENyZWF0ZVdpbmRvd3NDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLndpbmRvd3NDb250YWluZXJWaWV3UmVmKSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyRWwgPSB0aGlzLndpbmRvd3NDb250YWluZXJWaWV3UmVmLmVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5kb2N1bWVudC5ib2R5LmNvbnRhaW5zKGNvbnRhaW5lckVsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIE5iV2luZG93U2VydmljZS5wcm90b3R5cGUuY3JlYXRlV2luZG93c0NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheVJlZikge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5UmVmLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm92ZXJsYXlSZWYgPSB0aGlzLm92ZXJsYXlTZXJ2aWNlLmNyZWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxTdHJhdGVneTogdGhpcy5vdmVybGF5U2VydmljZS5zY3JvbGxTdHJhdGVnaWVzLm5vb3AoKSxcbiAgICAgICAgICAgIHBvc2l0aW9uU3RyYXRlZ3k6IHRoaXMub3ZlcmxheVBvc2l0aW9uQnVpbGRlci5nbG9iYWwoKS5ib3R0b20oKS5yaWdodCgpLFxuICAgICAgICAgICAgaGFzQmFja2Ryb3A6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgd2luZG93c0NvbnRhaW5lclBvcnRhbCA9IG5ldyBOYkNvbXBvbmVudFBvcnRhbChOYldpbmRvd3NDb250YWluZXJDb21wb25lbnQsIG51bGwsIG51bGwsIHRoaXMuY2ZyKTtcbiAgICAgICAgdmFyIG92ZXJsYXlSZWYgPSB0aGlzLm92ZXJsYXlSZWYuYXR0YWNoKHdpbmRvd3NDb250YWluZXJQb3J0YWwpO1xuICAgICAgICB0aGlzLndpbmRvd3NDb250YWluZXJWaWV3UmVmID0gb3ZlcmxheVJlZi5pbnN0YW5jZS52aWV3Q29udGFpbmVyUmVmO1xuICAgIH07XG4gICAgTmJXaW5kb3dTZXJ2aWNlLnByb3RvdHlwZS5hcHBlbmRXaW5kb3cgPSBmdW5jdGlvbiAoY29udGVudCwgY29uZmlnLCB3aW5kb3dSZWYpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZW50IGluc3RhbmNlb2YgVGVtcGxhdGVSZWZcbiAgICAgICAgICAgID8geyAkaW1wbGljaXQ6IGNvbmZpZy5jb250ZXh0LCB3aW5kb3dSZWY6IHdpbmRvd1JlZiB9XG4gICAgICAgICAgICA6IGNvbmZpZy5jb250ZXh0O1xuICAgICAgICB2YXIgcHJvdmlkZXJzID0gW1xuICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9XSU5ET1dfQ09OVEVOVCwgdXNlVmFsdWU6IGNvbnRlbnQgfSxcbiAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfV0lORE9XX0NPTlRFWFQsIHVzZVZhbHVlOiBjb250ZXh0IH0sXG4gICAgICAgICAgICB7IHByb3ZpZGU6IE5iV2luZG93Q29uZmlnLCB1c2VWYWx1ZTogY29uZmlnIH0sXG4gICAgICAgICAgICB7IHByb3ZpZGU6IE5iV2luZG93UmVmLCB1c2VWYWx1ZTogd2luZG93UmVmIH0sXG4gICAgICAgIF07XG4gICAgICAgIHZhciBwYXJlbnRJbmplY3RvciA9IGNvbmZpZy52aWV3Q29udGFpbmVyUmVmXG4gICAgICAgICAgICA/IGNvbmZpZy52aWV3Q29udGFpbmVyUmVmLmluamVjdG9yXG4gICAgICAgICAgICA6IHRoaXMud2luZG93c0NvbnRhaW5lclZpZXdSZWYuaW5qZWN0b3I7XG4gICAgICAgIHZhciBpbmplY3RvciA9IEluamVjdG9yLmNyZWF0ZSh7IHBhcmVudDogcGFyZW50SW5qZWN0b3IsIHByb3ZpZGVyczogcHJvdmlkZXJzIH0pO1xuICAgICAgICB2YXIgd2luZG93RmFjdG9yeSA9IHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KE5iV2luZG93Q29tcG9uZW50KTtcbiAgICAgICAgdmFyIHJlZiA9IHRoaXMud2luZG93c0NvbnRhaW5lclZpZXdSZWYuY3JlYXRlQ29tcG9uZW50KHdpbmRvd0ZhY3RvcnksIG51bGwsIGluamVjdG9yKTtcbiAgICAgICAgcmVmLmluc3RhbmNlLmNmciA9IHRoaXMuY2ZyO1xuICAgICAgICByZWYuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICByZXR1cm4gcmVmO1xuICAgIH07XG4gICAgTmJXaW5kb3dTZXJ2aWNlLnByb3RvdHlwZS5zdWJzY3JpYmVUb0V2ZW50cyA9IGZ1bmN0aW9uICh3aW5kb3dSZWYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHdpbmRvd1JlZi5jb25maWcuY2xvc2VPbkJhY2tkcm9wQ2xpY2spIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVJlZi5iYWNrZHJvcENsaWNrKCkuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdpbmRvd1JlZi5jbG9zZSgpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93UmVmLmNvbmZpZy5jbG9zZU9uRXNjKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYua2V5ZG93bkV2ZW50cygpXG4gICAgICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gZXZlbnQua2V5Q29kZSA9PT0gMjc7IH0pKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gd2luZG93UmVmLmNsb3NlKCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvd1JlZi5zdGF0ZUNoYW5nZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2hlY2tBbmRVcGRhdGVPdmVybGF5KCk7IH0pO1xuICAgICAgICB3aW5kb3dSZWYub25DbG9zZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMub3BlbldpbmRvd3Muc3BsaWNlKF90aGlzLm9wZW5XaW5kb3dzLmluZGV4T2Yod2luZG93UmVmKSwgMSk7XG4gICAgICAgICAgICBfdGhpcy5jaGVja0FuZFVwZGF0ZU92ZXJsYXkoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYldpbmRvd1NlcnZpY2UucHJvdG90eXBlLmNoZWNrQW5kVXBkYXRlT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZ1bGxTY3JlZW5XaW5kb3dzID0gdGhpcy5vcGVuV2luZG93cy5maWx0ZXIoZnVuY3Rpb24gKHcpIHsgcmV0dXJuIHcuc3RhdGUgPT09IE5iV2luZG93U3RhdGUuRlVMTF9TQ1JFRU47IH0pO1xuICAgICAgICBpZiAoZnVsbFNjcmVlbldpbmRvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5ibG9ja1Njcm9sbFN0cmF0ZWd5LmVuYWJsZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ibG9ja1Njcm9sbFN0cmF0ZWd5LmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnVsbFNjcmVlbldpbmRvd3Muc29tZShmdW5jdGlvbiAodykgeyByZXR1cm4gdy5jb25maWcuaGFzQmFja2Ryb3A7IH0pKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYuYmFja2Ryb3BFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYuYmFja2Ryb3BFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYldpbmRvd1NlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX3BhcmFtKDQsIEluamVjdChOQl9XSU5ET1dfQ09ORklHKSksXG4gICAgICAgIF9fcGFyYW0oNiwgSW5qZWN0KE5CX0RPQ1VNRU5UKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgICAgICAgICAgTmJPdmVybGF5U2VydmljZSxcbiAgICAgICAgICAgIE5iT3ZlcmxheVBvc2l0aW9uQnVpbGRlcixcbiAgICAgICAgICAgIE5iQmxvY2tTY3JvbGxTdHJhdGVneUFkYXB0ZXIsXG4gICAgICAgICAgICBOYldpbmRvd0NvbmZpZyxcbiAgICAgICAgICAgIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgT2JqZWN0XSlcbiAgICBdLCBOYldpbmRvd1NlcnZpY2UpO1xuICAgIHJldHVybiBOYldpbmRvd1NlcnZpY2U7XG59KCkpO1xuXG52YXIgTmJXaW5kb3dNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJXaW5kb3dNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iV2luZG93TW9kdWxlXzEgPSBOYldpbmRvd01vZHVsZTtcbiAgICBOYldpbmRvd01vZHVsZS5mb3JSb290ID0gZnVuY3Rpb24gKGRlZmF1bHRDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYldpbmRvd01vZHVsZV8xLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgTmJXaW5kb3dTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfV0lORE9XX0NPTkZJRywgdXNlVmFsdWU6IGRlZmF1bHRDb25maWcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBOYldpbmRvd01vZHVsZS5mb3JDaGlsZCA9IGZ1bmN0aW9uIChkZWZhdWx0Q29uZmlnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJXaW5kb3dNb2R1bGVfMSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iV2luZG93U2VydmljZSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1dJTkRPV19DT05GSUcsIHVzZVZhbHVlOiBkZWZhdWx0Q29uZmlnIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgdmFyIE5iV2luZG93TW9kdWxlXzE7XG4gICAgTmJXaW5kb3dNb2R1bGUgPSBOYldpbmRvd01vZHVsZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIE5iT3ZlcmxheU1vZHVsZSwgTmJDYXJkTW9kdWxlLCBOYkljb25Nb2R1bGUsIE5iQnV0dG9uTW9kdWxlXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgIE5iV2luZG93c0NvbnRhaW5lckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBOYldpbmRvd0NvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBlbnRyeUNvbXBvbmVudHM6IFtOYldpbmRvd3NDb250YWluZXJDb21wb25lbnQsIE5iV2luZG93Q29tcG9uZW50XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYldpbmRvd01vZHVsZSk7XG4gICAgcmV0dXJuIE5iV2luZG93TW9kdWxlO1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFRoZSBgTmJEYXRlcGlja2VyQWRhcHRlcmAgaW5zdGFuY2VzIHByb3ZpZGUgd2F5IGhvdyB0byBwYXJzZSwgZm9ybWF0IGFuZCB2YWxpZGF0ZVxuICogZGlmZmVyZW50IGRhdGUgdHlwZXMuXG4gKiAqL1xudmFyIE5iRGF0ZXBpY2tlckFkYXB0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJEYXRlcGlja2VyQWRhcHRlcigpIHtcbiAgICB9XG4gICAgcmV0dXJuIE5iRGF0ZXBpY2tlckFkYXB0ZXI7XG59KCkpO1xuLyoqXG4gKiBEYXRlcGlja2VyIGlzIGFuIGNvbnRyb2wgdGhhdCBjYW4gcGljayBhbnkgdmFsdWVzIGFueXdheS5cbiAqIEl0IGhhcyB0byBiZSBib3VuZCB0byB0aGUgZGF0ZXBpY2tlciBkaXJlY3RpdmUgdGhyb3VnaCBuYkRhdGVwaWNrZXIgaW5wdXQuXG4gKiAqL1xudmFyIE5iRGF0ZXBpY2tlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkRhdGVwaWNrZXIoKSB7XG4gICAgfVxuICAgIHJldHVybiBOYkRhdGVwaWNrZXI7XG59KCkpO1xudmFyIE5CX0RBVEVfQURBUFRFUiA9IG5ldyBJbmplY3Rpb25Ub2tlbignRGF0ZXBpY2tlciBBZGFwdGVyJyk7XG52YXIgTkJfREFURV9TRVJWSUNFX09QVElPTlMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0RhdGUgc2VydmljZSBvcHRpb25zJyk7XG4vKipcbiAqIFRoZSBgTmJEYXRlcGlja2VyRGlyZWN0aXZlYCBpcyBmb3JtIGNvbnRyb2wgdGhhdCBnaXZlcyB5b3UgYWJpbGl0eSB0byBzZWxlY3QgZGF0ZXMgYW5kIHJhbmdlcy4gVGhlIGRhdGVwaWNrZXJcbiAqIGlzIHNob3duIHdoZW4gaW5wdXQgcmVjZWl2ZXMgYSBgZm9jdXNgIGV2ZW50LlxuICpcbiAqIGBgYGh0bWxcbiAqIDxpbnB1dCBbbmJEYXRlcGlja2VyXT1cImRhdGVwaWNrZXJcIj5cbiAqIDxuYi1kYXRlcGlja2VyICNkYXRlcGlja2VyPjwvbmItZGF0ZXBpY2tlcj5cbiAqIGBgYFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGRhdGVwaWNrZXIvZGF0ZXBpY2tlci1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJEYXRlcGlja2VyTW9kdWxlLmZvclJvb3QoKWAgdG8geW91ciByb290IG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJEYXRlcGlja2VyTW9kdWxlLmZvclJvb3QoKSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHsgfVxuICogYGBgXG4gKiBBbmQgYE5iRGF0ZXBpY2tlck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJEYXRlcGlja2VyTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB1c2UgcmFuZ2Ugc2VsZWN0aW9uLCB5b3UgaGF2ZSB0byB1c2UgYE5iUmFuZ2VwaWNrZXJDb21wb25lbnRgIGluc3RlYWQ6XG4gKlxuICogYGBgaHRtbFxuICogPGlucHV0IFtuYkRhdGVwaWNrZXJdPVwicmFuZ2VwaWNrZXJcIj5cbiAqIDxuYi1yYW5nZXBpY2tlciAjcmFuZ2VwaWNrZXI+PC9uYi1yYW5nZXBpY2tlcj5cbiAqIGBgYFxuICpcbiAqIEJvdGggcmFuZ2UgYW5kIGRhdGUgcGlja2VycyBzdXBwb3J0IGFsbCBwYXJhbWV0ZXJzIGFzIGNhbGVuZGFyLCBzbywgY2hlY2sgYE5iQ2FsZW5kYXJDb21wb25lbnRgIGZvciBhZGRpdGlvbmFsXG4gKiBpbmZvLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUmFuZ2Ugc2hvd2Nhc2UsIGRhdGVwaWNrZXIvcmFuZ2VwaWNrZXItc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIERhdGVwaWNrZXIgaXMgdGhlIGZvcm0gY29udHJvbCBzbyBpdCBjYW4gYmUgYm91bmQgd2l0aCBhbmd1bGFyIGZvcm1zIHRocm91Z2ggbmdNb2RlbCBhbmQgZm9ybSBjb250cm9scy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEZvcm1zLCBkYXRlcGlja2VyL2RhdGVwaWNrZXItZm9ybXMuY29tcG9uZW50KVxuICpcbiAqIGBOYkRhdGVwaWNrZXJEaXJlY3RpdmVgIG1heSBiZSB2YWxpZGF0ZWQgdXNpbmcgYG1pbmAgYW5kIGBtYXhgIGRhdGVzIHBhc3NlZCB0byB0aGUgZGF0ZXBpY2tlci5cbiAqIEFuZCBgZmlsdGVyYCBwcmVkaWNhdGUgdGhhdCByZWNlaXZlcyBkYXRlIG9iamVjdCBhbmQgaGFzIHRvIHJldHVybiBhIGJvb2xlYW4gdmFsdWUuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShWYWxpZGF0aW9uLCBkYXRlcGlja2VyL2RhdGVwaWNrZXItdmFsaWRhdGlvbi5jb21wb25lbnQpXG4gKlxuICogVGhlIGBOYkRhdGVwaWNrZXJDb21wb25lbnRgIHN1cHBvcnRzIGRhdGUgZm9ybWF0dGluZzpcbiAqXG4gKiBgYGBodG1sXG4gKiA8aW5wdXQgW25iRGF0ZXBpY2tlcl09XCJkYXRlcGlja2VyXCI+XG4gKiA8bmItZGF0ZXBpY2tlciAjZGF0ZXBpY2tlciBmb3JtYXQ9XCJNTVxcZGRcXHl5eXlcIj48L25iLWRhdGVwaWNrZXI+XG4gKiBgYGBcbiAqXG4gKiAjIyBGb3JtYXR0aW5nIElzc3VlXG4gKlxuICogQnkgZGVmYXVsdCwgZGF0ZXBpY2tlciB1c2VzIGFuZ3VsYXJzIGBMT0NBTEVfSURgIHRva2VuIGZvciBsb2NhbGl6YXRpb24gYW5kIGBEYXRlUGlwZWAgZm9yIGRhdGVzIGZvcm1hdHRpbmcuXG4gKiBBbmQgbmF0aXZlIGBEYXRlLnBhcnNlKC4uLilgIGZvciBkYXRlcyBwYXJzaW5nLiBCdXQgbmF0aXZlIGBEYXRlLnBhcnNlYCBmdW5jdGlvbiBkb2Vzbid0IHN1cHBvcnQgZm9ybWF0cy5cbiAqIFRvIHByb3ZpZGUgY3VzdG9tIGZvcm1hdHRpbmcgeW91IGhhdmUgdG8gdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHBhY2thZ2VzOlxuICpcbiAqIC0gYEBuZWJ1bGFyL21vbWVudGAgLSBwcm92aWRlcyBtb21lbnQgZGF0ZSBhZGFwdGVyIHRoYXQgdXNlcyBtb21lbnQgZm9yIGRhdGUgb2JqZWN0cy4gVGhpcyBtZWFucyBkYXRlcGlja2VyIHRoYW5cbiAqIHdpbGwgb3BlcmF0ZSBvbmx5IG1vbWVudCBkYXRlIG9iamVjdHMuIElmIHlvdSB3YW50IHRvIHVzZSBpdCB5b3UgaGF2ZSB0byBpbnN0YWxsIGl0OiBgbnBtIGkgQG5lYnVsYXIvbW9tZW50YCwgYW5kXG4gKiBpbXBvcnQgYE5iTW9tZW50RGF0ZU1vZHVsZWAgZnJvbSB0aGlzIHBhY2thZ2UuXG4gKlxuICogLSBgQG5lYnVsYXIvZGF0ZS1mbnNgIC0gYWRhcHRlciBmb3IgcG9wdWxhciBkYXRlLWZucyBsaWJyYXJ5LiBUaGlzIHdheSBpcyBwcmVmZXJyZWQgaWYgeW91IG5lZWQgb25seSBkYXRlIGZvcm1hdHRpbmcuXG4gKiBCZWNhdXNlIGRhdGUtZm5zIGlzIHRyZWVzaGFrYWJsZSwgdGlueSBhbmQgb3BlcmF0ZXMgbmF0aXZlIGRhdGUgb2JqZWN0cy4gSWYgeW91IHdhbnQgdG8gdXNlIGl0IHlvdSBoYXZlIHRvXG4gKiBpbnN0YWxsIGl0OiBgbnBtIGkgQG5lYnVsYXIvZGF0ZS1mbnNgLCBhbmQgaW1wb3J0IGBOYkRhdGVGbnNEYXRlTW9kdWxlYCBmcm9tIHRoaXMgcGFja2FnZS5cbiAqXG4gKiAjIyMgTmJEYXRlRm5zRGF0ZU1vZHVsZVxuICpcbiAqIEZvcm1hdCBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIGBOYkRhdGVGbnNEYXRlTW9kdWxlYC4gWW91IGNhbiBzZXQgaXQgdmlhIGBmb3JtYXRgIGlucHV0IG9uIGRhdGVwaWNrZXIgY29tcG9uZW50OlxuICogYGBgaHRtbFxuICogPG5iLWRhdGVwaWNrZXIgZm9ybWF0PVwiZGQuTU0ueXl5eVwiPjwvbmItZGF0ZXBpY2tlcj5cbiAqIGBgYFxuICogQWxzbyBmb3JtYXQgY2FuIGJlIHNldCBnbG9iYWxseSB3aXRoIGBOYkRhdGVGbnNEYXRlTW9kdWxlLmZvclJvb3QoeyBmb3JtYXQ6ICdkZC5NTS55eXl5JyB9KWAgYW5kXG4gKiBgTmJEYXRlRm5zRGF0ZU1vZHVsZS5mb3JDaGlsZCh7IGZvcm1hdDogJ2RkLk1NLnl5eXknIH0pYCBtZXRob2RzLlxuICpcbiAqIFBsZWFzZSBub3RlIHRvIHVzZSBzb21lIG9mIHRoZSBmb3JtYXR0aW5nIHRva2VucyB5b3UgYWxzbyBuZWVkIHRvIHBhc3NcbiAqIGB7IHVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2VuczogdHJ1ZSwgdXNlQWRkaXRpb25hbERheU9mWWVhclRva2VuczogdHJ1ZSB9YCB0byBkYXRlLWZucyBwYXJzZSBhbmQgZm9ybWF0IGZ1bmN0aW9ucy5cbiAqIFlvdSBjYW4gY29uZmlndXJlIG9wdGlvbnMgcGFzc2VkIHRoaXMgZnVuY3Rpb25zIGJ5IHNldHRpbmcgYGZvcm1hdE9wdGlvbnNgIGFuZFxuICogYHBhcnNlT3B0aW9uc2Agb2Ygb3B0aW9ucyBvYmplY3QgcGFzc2VkIHRvIGBOYkRhdGVGbnNEYXRlTW9kdWxlLmZvclJvb3RgIGFuZCBgTmJEYXRlRm5zRGF0ZU1vZHVsZS5mb3JDaGlsZGAgbWV0aG9kcy5cbiAqIGBgYHRzXG4gKiBOYkRhdGVGbnNEYXRlTW9kdWxlLmZvclJvb3Qoe1xuICogICBwYXJzZU9wdGlvbnM6IHsgdXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zOiB0cnVlLCB1c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zOiB0cnVlIH0sXG4gKiAgIGZvcm1hdE9wdGlvbnM6IHsgdXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zOiB0cnVlLCB1c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zOiB0cnVlIH0sXG4gKiB9KVxuICogYGBgXG4gKiBGdXJ0aGVyIGluZm8gb24gYGRhdGUtZm5zYCBmb3JtYXR0aW5nIHRva2VucyBjb3VsZCBiZSBmb3VuZCBhdFxuICogW2RhdGUtZm5zIGRvY3NdKGh0dHBzOi8vZGF0ZS1mbnMub3JnL3YyLjAuMC1hbHBoYS4yNy9kb2NzL1VuaWNvZGUtVG9rZW5zKS5cbiAqXG4gKiBZb3UgY2FuIGFsc28gdXNlIGBwYXJzZU9wdGlvbnNgIGFuZCBgZm9ybWF0T3B0aW9uc2AgdG8gcHJvdmlkZSBsb2NhbGUuXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZW8gfSBmcm9tICdkYXRlLWZucy9sb2NhbGUnO1xuICpcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICBOYkRhdGVGbnNEYXRlTW9kdWxlLmZvclJvb3Qoe1xuICogICAgICAgcGFyc2VPcHRpb25zOiB7IGxvY2FsZTogZW8gfSxcbiAqICAgICAgIGZvcm1hdE9wdGlvbnM6IHsgbG9jYWxlOiBlbyB9LFxuICogICAgIH0pLFxuICogICBdLFxuICogfSlcbiAqIGBgYFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBkYXRlcGlja2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBkYXRlcGlja2VyLWJvcmRlci1jb2xvcjpcbiAqIGRhdGVwaWNrZXItYm9yZGVyLXN0eWxlOlxuICogZGF0ZXBpY2tlci1ib3JkZXItd2lkdGg6XG4gKiBkYXRlcGlja2VyLWJvcmRlci1yYWRpdXM6XG4gKiBkYXRlcGlja2VyLXNoYWRvdzpcbiAqICovXG52YXIgTmJEYXRlcGlja2VyRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZShkb2N1bWVudCwgZGF0ZXBpY2tlckFkYXB0ZXJzLCBob3N0UmVmLCBkYXRlU2VydmljZSwgY2hhbmdlRGV0ZWN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLmRhdGVwaWNrZXJBZGFwdGVycyA9IGRhdGVwaWNrZXJBZGFwdGVycztcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmlzRGF0ZXBpY2tlclJlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybSBjb250cm9sIHZhbGlkYXRvcnMgd2lsbCBiZSBjYWxsZWQgaW4gdmFsaWRhdG9ycyBjb250ZXh0LCBzbywgd2UgbmVlZCB0byBiaW5kIHRoZW0uXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMudmFsaWRhdG9yID0gVmFsaWRhdG9ycy5jb21wb3NlKFtcbiAgICAgICAgICAgIHRoaXMucGFyc2VWYWxpZGF0b3IsXG4gICAgICAgICAgICB0aGlzLm1pblZhbGlkYXRvcixcbiAgICAgICAgICAgIHRoaXMubWF4VmFsaWRhdG9yLFxuICAgICAgICAgICAgdGhpcy5maWx0ZXJWYWxpZGF0b3IsXG4gICAgICAgIF0ubWFwKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4uYmluZChfdGhpcyk7IH0pKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbklucHV0Q2hhbmdlKCk7XG4gICAgfVxuICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZV8xID0gTmJEYXRlcGlja2VyRGlyZWN0aXZlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLCBcInNldFBpY2tlclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm92aWRlcyBkYXRlcGlja2VyIGNvbXBvbmVudC5cbiAgICAgICAgICogKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocGlja2VyKSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlciA9IHBpY2tlcjtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBQaWNrZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iRGF0ZXBpY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiaW5wdXRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBodG1sIGlucHV0IGVsZW1lbnQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpbnB1dFZhbHVlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgaG9zdCBpbnB1dCB2YWx1ZS5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC52YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyaXRlcyB2YWx1ZSBpbiBwaWNrZXIgYW5kIGh0bWwgaW5wdXQgZWxlbWVudC5cbiAgICAgKiAqL1xuICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pc0RhdGVwaWNrZXJSZWFkeSkge1xuICAgICAgICAgICAgdGhpcy53cml0ZVBpY2tlcih2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlSW5wdXQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLnJlZ2lzdGVyT25DaGFuZ2UgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICAgIH07XG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5yZWdpc3Rlck9uVG91Y2hlZCA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICAgIH07XG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5zZXREaXNhYmxlZFN0YXRlID0gZnVuY3Rpb24gKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5pbnB1dC5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGb3JtIGNvbnRyb2wgdmFsaWRhdGlvbiBiYXNlZCBvbiBwaWNrZXIgdmFsaWRhdG9yIGNvbmZpZy5cbiAgICAgKiAqL1xuICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRvcihudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhpZGVzIHBpY2tlciwgZm9jdXNlcyB0aGUgaW5wdXRcbiAgICAgKi9cbiAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLmhpZGVQaWNrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5waWNrZXIuaGlkZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHRoYXQgd2UgY2FuIHBhcnNlIHZhbHVlIGNvcnJlY3RseS5cbiAgICAgKiAqL1xuICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUucGFyc2VWYWxpZGF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEYXRlIHNlcnZpY2VzIHRyZWF0IGVtcHR5IHN0cmluZyBhcyBpbnZhbGlkIGRhdGUuXG4gICAgICAgICAqIFRoYXQncyB3aHkgd2UncmUgZ2V0dGluZyBpbnZhbGlkIGZvcm1Db250cm9sIGluIGNhc2Ugb2YgZW1wdHkgaW5wdXQgd2hpY2ggaXMgbm90IHJlcXVpcmVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICBpZiAodGhpcy5pbnB1dFZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLmRhdGVwaWNrZXJBZGFwdGVyLmlzVmFsaWQodGhpcy5pbnB1dFZhbHVlLCB0aGlzLnBpY2tlci5mb3JtYXQpO1xuICAgICAgICByZXR1cm4gaXNWYWxpZCA/IG51bGwgOiB7IG5iRGF0ZXBpY2tlclBhcnNlOiB7IHZhbHVlOiB0aGlzLmlucHV0VmFsdWUgfSB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHBhc3NlZCB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gbWluLlxuICAgICAqICovXG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5taW5WYWxpZGF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLnBpY2tlci5nZXRWYWxpZGF0b3JDb25maWcoKTtcbiAgICAgICAgdmFyIGRhdGUgPSB0aGlzLmRhdGVwaWNrZXJBZGFwdGVyLnBhcnNlKHRoaXMuaW5wdXRWYWx1ZSwgdGhpcy5waWNrZXIuZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICghY29uZmlnLm1pbiB8fCAhZGF0ZSB8fCB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyhjb25maWcubWluLCBkYXRlKSA8PSAwKSA/XG4gICAgICAgICAgICBudWxsIDogeyBuYkRhdGVwaWNrZXJNaW46IHsgbWluOiBjb25maWcubWluLCBhY3R1YWw6IGRhdGUgfSB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHBhc3NlZCB2YWx1ZSBpcyBzbWFsbGVyIHRoYW4gbWF4LlxuICAgICAqICovXG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5tYXhWYWxpZGF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLnBpY2tlci5nZXRWYWxpZGF0b3JDb25maWcoKTtcbiAgICAgICAgdmFyIGRhdGUgPSB0aGlzLmRhdGVwaWNrZXJBZGFwdGVyLnBhcnNlKHRoaXMuaW5wdXRWYWx1ZSwgdGhpcy5waWNrZXIuZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICghY29uZmlnLm1heCB8fCAhZGF0ZSB8fCB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyhjb25maWcubWF4LCBkYXRlKSA+PSAwKSA/XG4gICAgICAgICAgICBudWxsIDogeyBuYkRhdGVwaWNrZXJNYXg6IHsgbWF4OiBjb25maWcubWF4LCBhY3R1YWw6IGRhdGUgfSB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHBhc3NlZCB2YWx1ZSBzYXRpc2Z5IHRoZSBmaWx0ZXIuXG4gICAgICogKi9cbiAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLmZpbHRlclZhbGlkYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMucGlja2VyLmdldFZhbGlkYXRvckNvbmZpZygpO1xuICAgICAgICB2YXIgZGF0ZSA9IHRoaXMuZGF0ZXBpY2tlckFkYXB0ZXIucGFyc2UodGhpcy5pbnB1dFZhbHVlLCB0aGlzLnBpY2tlci5mb3JtYXQpO1xuICAgICAgICByZXR1cm4gKCFjb25maWcuZmlsdGVyIHx8ICFkYXRlIHx8IGNvbmZpZy5maWx0ZXIoZGF0ZSkpID9cbiAgICAgICAgICAgIG51bGwgOiB7IG5iRGF0ZXBpY2tlckZpbHRlcjogdHJ1ZSB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hvb3NlcyBkYXRlcGlja2VyIGFkYXB0ZXIgYmFzZWQgb24gcGFzc2VkIHBpY2tlciBjb21wb25lbnQuXG4gICAgICogKi9cbiAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLmNob29zZURhdGVwaWNrZXJBZGFwdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmRhdGVwaWNrZXJBZGFwdGVyID0gdGhpcy5kYXRlcGlja2VyQWRhcHRlcnMuZmluZChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBwaWNrZXIgPSBfYS5waWNrZXI7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucGlja2VyIGluc3RhbmNlb2YgcGlja2VyO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMubm9EYXRlcGlja2VyQWRhcHRlclByb3ZpZGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGF0ZXBpY2tlckFkYXB0ZXIgcHJvdmlkZWQgZm9yIHBpY2tlcicpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBwaWNrZXIgdG8gdGhlIGhvc3QgaW5wdXQgZWxlbWVudCBhbmQgc3Vic2NyaWJlcyBvbiB2YWx1ZSBjaGFuZ2VzLlxuICAgICAqICovXG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS5zZXR1cFBpY2tlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5jaG9vc2VEYXRlcGlja2VyQWRhcHRlcigpO1xuICAgICAgICB0aGlzLnBpY2tlci5hdHRhY2godGhpcy5ob3N0UmVmKTtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIudmFsdWUgPSB0aGlzLmRhdGVwaWNrZXJBZGFwdGVyLnBhcnNlKHRoaXMuaW5wdXRWYWx1ZSwgdGhpcy5waWNrZXIuZm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbiBjYXNlIGRhdGVwaWNrZXIgY29tcG9uZW50IHBsYWNlZCBhZnRlciB0aGUgaW5wdXQgd2l0aCBkYXRlcGlja2VyIGRpcmVjdGl2ZSxcbiAgICAgICAgLy8gd2UgY2FuJ3QgcmVhZCBgdGhpcy5waWNrZXIuZm9ybWF0YCBvbiBmaXJzdCBjaGFuZ2UgZGV0ZWN0aW9uIHJ1bixcbiAgICAgICAgLy8gc2luY2UgaXQncyBub3QgYm91bmQgeWV0LCBzbyB3ZSBoYXZlIHRvIHdhaXQgZm9yIGRhdGVwaWNrZXIgY29tcG9uZW50IGluaXRpYWxpemF0aW9uLlxuICAgICAgICBpZiAoIXRoaXMuaXNEYXRlcGlja2VyUmVhZHkpIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmluaXRcbiAgICAgICAgICAgICAgICAucGlwZSh0YWtlKDEpLCB0YXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaXNEYXRlcGlja2VyUmVhZHkgPSB0cnVlOyB9KSwgZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhX3RoaXMucXVldWU7IH0pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMud3JpdGVWYWx1ZShfdGhpcy5xdWV1ZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMub25DaGFuZ2UoX3RoaXMucXVldWUpO1xuICAgICAgICAgICAgICAgIF90aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGlja2VyLnZhbHVlQ2hhbmdlXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgX3RoaXMud3JpdGVQaWNrZXIodmFsdWUpO1xuICAgICAgICAgICAgX3RoaXMud3JpdGVJbnB1dCh2YWx1ZSk7XG4gICAgICAgICAgICBfdGhpcy5vbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoX3RoaXMucGlja2VyLnNob3VsZEhpZGUoKSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmhpZGVQaWNrZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1lcmdlKHRoaXMucGlja2VyLmJsdXIsIGZyb21FdmVudCh0aGlzLmlucHV0LCAnYmx1cicpLnBpcGUoZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuICFfdGhpcy5waWNrZXIuaXNTaG93biAmJiBfdGhpcy5kb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSBfdGhpcy5pbnB1dDsgfSkpKS5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMub25Ub3VjaGVkKCk7IH0pO1xuICAgIH07XG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS53cml0ZVBpY2tlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBpY2tlci52YWx1ZSA9IHZhbHVlO1xuICAgIH07XG4gICAgTmJEYXRlcGlja2VyRGlyZWN0aXZlLnByb3RvdHlwZS53cml0ZUlucHV0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBzdHJpbmdSZXByZXNlbnRhdGlvbiA9IHRoaXMuZGF0ZXBpY2tlckFkYXB0ZXIuZm9ybWF0KHZhbHVlLCB0aGlzLnBpY2tlci5mb3JtYXQpO1xuICAgICAgICB0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudC52YWx1ZSA9IHN0cmluZ1JlcHJlc2VudGF0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIGlmIG5vIGRhdGVwaWNrZXIgYWRhcHRlciBwcm92aWRlZC5cbiAgICAgKiAqL1xuICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUubm9EYXRlcGlja2VyQWRhcHRlclByb3ZpZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZGF0ZXBpY2tlckFkYXB0ZXIgfHwgISh0aGlzLmRhdGVwaWNrZXJBZGFwdGVyIGluc3RhbmNlb2YgTmJEYXRlcGlja2VyQWRhcHRlcik7XG4gICAgfTtcbiAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLnN1YnNjcmliZU9uSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGZyb21FdmVudCh0aGlzLmlucHV0LCAnaW5wdXQnKVxuICAgICAgICAgICAgLnBpcGUobWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmlucHV0VmFsdWU7IH0pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gX3RoaXMuaGFuZGxlSW5wdXRDaGFuZ2UodmFsdWUpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBhcnNlcyBpbnB1dCB2YWx1ZSBhbmQgd3JpdGUgaWYgaXQgaXNuJ3QgbnVsbC5cbiAgICAgKiAqL1xuICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUuaGFuZGxlSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSB0aGlzLnBhcnNlSW5wdXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMub25DaGFuZ2UoZGF0ZSk7XG4gICAgICAgIHRoaXMud3JpdGVQaWNrZXIoZGF0ZSk7XG4gICAgfTtcbiAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvdG90eXBlLnBhcnNlSW5wdXRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kYXRlcGlja2VyQWRhcHRlci5pc1ZhbGlkKHZhbHVlLCB0aGlzLnBpY2tlci5mb3JtYXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlcGlja2VyQWRhcHRlci5wYXJzZSh2YWx1ZSwgdGhpcy5waWNrZXIuZm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIHZhciBOYkRhdGVwaWNrZXJEaXJlY3RpdmVfMTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iRGF0ZXBpY2tlcicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTmJEYXRlcGlja2VyKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYkRhdGVwaWNrZXJdKVxuICAgIF0sIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwic2V0UGlja2VyXCIsIG51bGwpO1xuICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZSA9IE5iRGF0ZXBpY2tlckRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ2lucHV0W25iRGF0ZXBpY2tlcl0nLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoZnVuY3Rpb24gKCkgeyByZXR1cm4gTmJEYXRlcGlja2VyRGlyZWN0aXZlXzE7IH0pLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMSURBVE9SUyxcbiAgICAgICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoZnVuY3Rpb24gKCkgeyByZXR1cm4gTmJEYXRlcGlja2VyRGlyZWN0aXZlXzE7IH0pLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICAgIF9fcGFyYW0oMCwgSW5qZWN0KE5CX0RPQ1VNRU5UKSksXG4gICAgICAgIF9fcGFyYW0oMSwgSW5qZWN0KE5CX0RBVEVfQURBUFRFUikpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgQXJyYXksIEVsZW1lbnRSZWYsXG4gICAgICAgICAgICBOYkRhdGVTZXJ2aWNlLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWZdKVxuICAgIF0sIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZTtcbn0oKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iRGF0ZXBpY2tlckNvbnRhaW5lckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJEYXRlcGlja2VyQ29udGFpbmVyQ29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iRGF0ZXBpY2tlckNvbnRhaW5lckNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYkRhdGVwaWNrZXJDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uIChwb3J0YWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lci5hdHRhY2hDb21wb25lbnRQb3J0YWwocG9ydGFsKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBWaWV3Q2hpbGQoTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudClcbiAgICBdLCBOYkRhdGVwaWNrZXJDb250YWluZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm92ZXJsYXlDb250YWluZXJcIiwgdm9pZCAwKTtcbiAgICBOYkRhdGVwaWNrZXJDb250YWluZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZGF0ZXBpY2tlci1jb250YWluZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuYi1vdmVybGF5LWNvbnRhaW5lcj48L25iLW92ZXJsYXktY29udGFpbmVyPlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYkRhdGVwaWNrZXJDb250YWluZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYkRhdGVwaWNrZXJDb250YWluZXJDb21wb25lbnQ7XG59KE5iUG9zaXRpb25lZENvbnRhaW5lcikpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYkJhc2VQaWNrZXJgIGNvbXBvbmVudCBjb25jZW50cmF0ZXMgb3ZlcmxheSBtYW5pcHVsYXRpb24gbG9naWMuXG4gKiAqL1xudmFyIE5iQmFzZVBpY2tlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJCYXNlUGlja2VyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iQmFzZVBpY2tlcihvdmVybGF5LCBwb3NpdGlvbkJ1aWxkZXIsIHRyaWdnZXJTdHJhdGVneUJ1aWxkZXIsIGNmciwgZGF0ZVNlcnZpY2UsIGRhdGVTZXJ2aWNlT3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgX3RoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICBfdGhpcy50cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyID0gdHJpZ2dlclN0cmF0ZWd5QnVpbGRlcjtcbiAgICAgICAgX3RoaXMuY2ZyID0gY2ZyO1xuICAgICAgICBfdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICBfdGhpcy5kYXRlU2VydmljZU9wdGlvbnMgPSBkYXRlU2VydmljZU9wdGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaXplIG9mIHRoZSBjYWxlbmRhciBhbmQgZW50aXJlIGNvbXBvbmVudHMuXG4gICAgICAgICAqIENhbiBiZSAnbWVkaXVtJyB3aGljaCBpcyBkZWZhdWx0IG9yICdsYXJnZScuXG4gICAgICAgICAqICovXG4gICAgICAgIF90aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIF90aGlzLmluaXQkID0gbmV3IFJlcGxheVN1YmplY3QoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0cmVhbSBvZiBwaWNrZXIgY2hhbmdlcy4gUmVxdWlyZWQgdG8gYmUgdGhlIHN1YmplY3QgYmVjYXVzZSBwaWNrZXIgaGlkZXMgYW5kIHNob3dzIGFuZCBwaWNrZXJcbiAgICAgICAgICogY2hhbmdlIHN0cmVhbSBiZWNvbWVzIHJlY3JlYXRlZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgX3RoaXMub25DaGFuZ2UkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheU9mZnNldCA9IDg7XG4gICAgICAgIF90aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgX3RoaXMuYmx1ciQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhc2VQaWNrZXIucHJvdG90eXBlLCBcInBpY2tlclwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHBpY2tlciBpbnN0YW5jZS5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJSZWYgJiYgdGhpcy5waWNrZXJSZWYuaW5zdGFuY2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhc2VQaWNrZXIucHJvdG90eXBlLCBcInZhbHVlQ2hhbmdlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0cmVhbSBvZiBwaWNrZXIgdmFsdWUgY2hhbmdlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbkNoYW5nZSQuYXNPYnNlcnZhYmxlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkJhc2VQaWNrZXIucHJvdG90eXBlLCBcImlzU2hvd25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZiAmJiB0aGlzLnJlZi5oYXNBdHRhY2hlZCgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJCYXNlUGlja2VyLnByb3RvdHlwZSwgXCJpbml0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0JC5hc09ic2VydmFibGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFzZVBpY2tlci5wcm90b3R5cGUsIFwiYmx1clwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuIGRhdGVwaWNrZXIgbG9vc2VzIGZvY3VzLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibHVyJC5hc09ic2VydmFibGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGVja0Zvcm1hdCgpO1xuICAgIH07XG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5uZ09uQ2hhbmdlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmZvcm1hdCAmJiAhY2hhbmdlcy5mb3JtYXQuaXNGaXJzdENoYW5nZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9ybWF0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iQmFzZVBpY2tlci5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmluaXQkLm5leHQoKTtcbiAgICB9O1xuICAgIE5iQmFzZVBpY2tlci5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB0aGlzLmluaXQkLmNvbXBsZXRlKCk7XG4gICAgICAgIGlmICh0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5yZWYuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyaWdnZXJTdHJhdGVneSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEYXRlcGlja2VyIGtub3dzIG5vdGhpbmcgYWJvdXQgaG9zdCBodG1sIGlucHV0IGVsZW1lbnQuXG4gICAgICogU28sIGF0dGFjaCBtZXRob2QgYXR0YWNoZXMgZGF0ZXBpY2tlciB0byB0aGUgaG9zdCBpbnB1dCBlbGVtZW50LlxuICAgICAqICovXG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbiAoaG9zdFJlZikge1xuICAgICAgICB0aGlzLmhvc3RSZWYgPSBob3N0UmVmO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uVHJpZ2dlcnMoKTtcbiAgICB9O1xuICAgIE5iQmFzZVBpY2tlci5wcm90b3R5cGUuZ2V0VmFsaWRhdG9yQ29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4geyBtaW46IHRoaXMubWluLCBtYXg6IHRoaXMubWF4LCBmaWx0ZXI6IHRoaXMuZmlsdGVyIH07XG4gICAgfTtcbiAgICBOYkJhc2VQaWNrZXIucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlT3ZlcmxheSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3BlbkRhdGVwaWNrZXIoKTtcbiAgICB9O1xuICAgIE5iQmFzZVBpY2tlci5wcm90b3R5cGUuc2hvdWxkSGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlkZU9uU2VsZWN0ICYmICEhdGhpcy52YWx1ZTtcbiAgICB9O1xuICAgIE5iQmFzZVBpY2tlci5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVmKSB7XG4gICAgICAgICAgICB0aGlzLnJlZi5kZXRhY2goKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYXZlIGN1cnJlbnQgdmFsdWUgaWYgcGlja2VyIHdhcyByZW5kZXJlZFxuICAgICAgICBpZiAodGhpcy5waWNrZXIpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5waWNrZXJSZWYuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5waWNrZXJSZWYgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkJhc2VQaWNrZXIucHJvdG90eXBlLmNyZWF0ZU92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneSA9IHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpO1xuICAgICAgICB0aGlzLnJlZiA9IHRoaXMub3ZlcmxheS5jcmVhdGUoe1xuICAgICAgICAgICAgcG9zaXRpb25TdHJhdGVneTogdGhpcy5wb3NpdGlvblN0cmF0ZWd5LFxuICAgICAgICAgICAgc2Nyb2xsU3RyYXRlZ3k6IHRoaXMub3ZlcmxheS5zY3JvbGxTdHJhdGVnaWVzLnJlcG9zaXRpb24oKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25Qb3NpdGlvbkNoYW5nZSgpO1xuICAgIH07XG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5vcGVuRGF0ZXBpY2tlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLnJlZi5hdHRhY2gobmV3IE5iQ29tcG9uZW50UG9ydGFsKE5iRGF0ZXBpY2tlckNvbnRhaW5lckNvbXBvbmVudCwgbnVsbCwgbnVsbCwgdGhpcy5jZnIpKTtcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0ZVBpY2tlcigpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uVmFsdWVDaGFuZ2UoKTtcbiAgICAgICAgdGhpcy53cml0ZVF1ZXVlKCk7XG4gICAgICAgIHRoaXMucGF0Y2hXaXRoSW5wdXRzKCk7XG4gICAgfTtcbiAgICBOYkJhc2VQaWNrZXIucHJvdG90eXBlLmNyZWF0ZVBvc2l0aW9uU3RyYXRlZ3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uQnVpbGRlclxuICAgICAgICAgICAgLmNvbm5lY3RlZFRvKHRoaXMuaG9zdFJlZilcbiAgICAgICAgICAgIC5wb3NpdGlvbihOYlBvc2l0aW9uLkJPVFRPTSlcbiAgICAgICAgICAgIC5vZmZzZXQodGhpcy5vdmVybGF5T2Zmc2V0KVxuICAgICAgICAgICAgLmFkanVzdG1lbnQoTmJBZGp1c3RtZW50LkNPVU5URVJDTE9DS1dJU0UpO1xuICAgIH07XG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5zdWJzY3JpYmVPblBvc2l0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3kucG9zaXRpb25DaGFuZ2VcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKHBvc2l0aW9uKSB7IHJldHVybiBwYXRjaChfdGhpcy5jb250YWluZXIsIHsgcG9zaXRpb246IHBvc2l0aW9uIH0pOyB9KTtcbiAgICB9O1xuICAgIE5iQmFzZVBpY2tlci5wcm90b3R5cGUuY3JlYXRlVHJpZ2dlclN0cmF0ZWd5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyXG4gICAgICAgICAgICAudHJpZ2dlcihOYlRyaWdnZXIuRk9DVVMpXG4gICAgICAgICAgICAuaG9zdCh0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudClcbiAgICAgICAgICAgIC5jb250YWluZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY29udGFpbmVyOyB9KVxuICAgICAgICAgICAgLmJ1aWxkKCk7XG4gICAgfTtcbiAgICBOYkJhc2VQaWNrZXIucHJvdG90eXBlLnN1YnNjcmliZU9uVHJpZ2dlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVUcmlnZ2VyU3RyYXRlZ3koKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuc2hvdyQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNob3coKTsgfSk7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LmhpZGUkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5ibHVyJC5uZXh0KCk7XG4gICAgICAgICAgICBfdGhpcy5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5pbnN0YW50aWF0ZVBpY2tlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5waWNrZXJSZWYgPSB0aGlzLmNvbnRhaW5lci5pbnN0YW5jZS5hdHRhY2gobmV3IE5iQ29tcG9uZW50UG9ydGFsKHRoaXMucGlja2VyQ2xhc3MsIG51bGwsIG51bGwsIHRoaXMuY2ZyKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIG9uIHBpY2tlciB2YWx1ZSBjaGFuZ2VzIGFuZCBlbWl0IGRhdGEgdGhyb3VnaCB0aGlzLm9uQ2hhbmdlJCBzdWJqZWN0LlxuICAgICAqICovXG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5zdWJzY3JpYmVPblZhbHVlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBpY2tlclZhbHVlQ2hhbmdlLnN1YnNjcmliZShmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgX3RoaXMub25DaGFuZ2UkLm5leHQoZGF0ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJCYXNlUGlja2VyLnByb3RvdHlwZS5wYXRjaFdpdGhJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGlja2VyLmJvdW5kaW5nTW9udGggPSB0aGlzLmJvdW5kaW5nTW9udGg7XG4gICAgICAgIHRoaXMucGlja2VyLnN0YXJ0VmlldyA9IHRoaXMuc3RhcnRWaWV3O1xuICAgICAgICB0aGlzLnBpY2tlci5taW4gPSB0aGlzLm1pbjtcbiAgICAgICAgdGhpcy5waWNrZXIubWF4ID0gdGhpcy5tYXg7XG4gICAgICAgIHRoaXMucGlja2VyLmZpbHRlciA9IHRoaXMuZmlsdGVyO1xuICAgICAgICB0aGlzLnBpY2tlci5fY2VsbENvbXBvbmVudCA9IHRoaXMuZGF5Q2VsbENvbXBvbmVudDtcbiAgICAgICAgdGhpcy5waWNrZXIubW9udGhDZWxsQ29tcG9uZW50ID0gdGhpcy5tb250aENlbGxDb21wb25lbnQ7XG4gICAgICAgIHRoaXMucGlja2VyLl95ZWFyQ2VsbENvbXBvbmVudCA9IHRoaXMueWVhckNlbGxDb21wb25lbnQ7XG4gICAgICAgIHRoaXMucGlja2VyLnNpemUgPSB0aGlzLnNpemU7XG4gICAgICAgIHRoaXMucGlja2VyLnNob3dOYXZpZ2F0aW9uID0gdGhpcy5zaG93TmF2aWdhdGlvbjtcbiAgICAgICAgdGhpcy5waWNrZXIudmlzaWJsZURhdGUgPSB0aGlzLnZpc2libGVEYXRlO1xuICAgICAgICB0aGlzLnBpY2tlci5zaG93V2Vla051bWJlciA9IHRoaXMuc2hvd1dlZWtOdW1iZXI7XG4gICAgICAgIHRoaXMucGlja2VyLndlZWtOdW1iZXJTeW1ib2wgPSB0aGlzLndlZWtOdW1iZXJTeW1ib2w7XG4gICAgfTtcbiAgICBOYkJhc2VQaWNrZXIucHJvdG90eXBlLmNoZWNrRm9ybWF0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRlU2VydmljZS5nZXRJZCgpID09PSAnbmF0aXZlJyAmJiB0aGlzLmZvcm1hdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGZvcm1hdCBuYXRpdmUgZGF0ZS4gVG8gdXNlIGN1c3RvbSBmb3JtYXR0aW5nIHlvdSBoYXZlIHRvIGluc3RhbGwgQG5lYnVsYXIvbW9tZW50IG9yICcgK1xuICAgICAgICAgICAgICAgICdAbmVidWxhci9kYXRlLWZucyBwYWNrYWdlIGFuZCBpbXBvcnQgTmJNb21lbnREYXRlTW9kdWxlIG9yIE5iRGF0ZUZuc0RhdGVNb2R1bGUgYWNjb3JkaW5nbHkuJyArXG4gICAgICAgICAgICAgICAgJ01vcmUgaW5mb3JtYXRpb24gYXQgXCJGb3JtYXR0aW5nIGlzc3VlXCIgJyArXG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vYWt2ZW8uZ2l0aHViLmlvL25lYnVsYXIvZG9jcy9jb21wb25lbnRzL2RhdGVwaWNrZXIvb3ZlcnZpZXcjbmJkYXRlcGlja2VyY29tcG9uZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzRm9ybWF0U2V0ID0gdGhpcy5mb3JtYXQgfHwgKHRoaXMuZGF0ZVNlcnZpY2VPcHRpb25zICYmIHRoaXMuZGF0ZVNlcnZpY2VPcHRpb25zLmZvcm1hdCk7XG4gICAgICAgIGlmICh0aGlzLmRhdGVTZXJ2aWNlLmdldElkKCkgPT09ICdkYXRlLWZucycgJiYgIWlzRm9ybWF0U2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Zvcm1hdCBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIE5iRGF0ZUZuc0RhdGVNb2R1bGUnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE5iQmFzZVBpY2tlcjtcbn0oTmJEYXRlcGlja2VyKSk7XG52YXIgTmJCYXNlUGlja2VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkJhc2VQaWNrZXJDb21wb25lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJCYXNlUGlja2VyQ29tcG9uZW50KGRvY3VtZW50LCBwb3NpdGlvbkJ1aWxkZXIsIHRyaWdnZXJTdHJhdGVneUJ1aWxkZXIsIG92ZXJsYXksIGNmciwgZGF0ZVNlcnZpY2UsIGRhdGVTZXJ2aWNlT3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvdmVybGF5LCBwb3NpdGlvbkJ1aWxkZXIsIHRyaWdnZXJTdHJhdGVneUJ1aWxkZXIsIGNmciwgZGF0ZVNlcnZpY2UsIGRhdGVTZXJ2aWNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgd2Ugc2hvdWxkIHJlbmRlciBwcmV2aW91cyBhbmQgbmV4dCBtb250aHNcbiAgICAgICAgICogaW4gdGhlIGN1cnJlbnQgbW9udGggdmlldy5cbiAgICAgICAgICogKi9cbiAgICAgICAgX3RoaXMuYm91bmRpbmdNb250aCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHN0YXJ0aW5nIHZpZXcgZm9yIGNhbGVuZGFyLlxuICAgICAgICAgKiAqL1xuICAgICAgICBfdGhpcy5zdGFydFZpZXcgPSBOYkNhbGVuZGFyVmlld01vZGUuREFURTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpemUgb2YgdGhlIGNhbGVuZGFyIGFuZCBlbnRpcmUgY29tcG9uZW50cy5cbiAgICAgICAgICogQ2FuIGJlICdtZWRpdW0nIHdoaWNoIGlzIGRlZmF1bHQgb3IgJ2xhcmdlJy5cbiAgICAgICAgICogKi9cbiAgICAgICAgX3RoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUgcGlja2VyIHdoZW4gYSBkYXRlIG9yIGEgcmFuZ2UgaXMgc2VsZWN0ZWQsIGB0cnVlYCBieSBkZWZhdWx0XG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGlkZU9uU2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgc2hvdWxkIHdlIHNob3cgY2FsZW5kYXJzIG5hdmlnYXRpb24gb3Igbm90LlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNob3dOYXZpZ2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgc3ltYm9sIHVzZWQgYXMgYSBoZWFkZXIgZm9yIHdlZWsgbnVtYmVycyBjb2x1bW5cbiAgICAgICAgICogKi9cbiAgICAgICAgX3RoaXMud2Vla051bWJlclN5bWJvbCA9ICcjJztcbiAgICAgICAgX3RoaXMuX3Nob3dXZWVrTnVtYmVyID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd1dlZWtOdW1iZXJcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBzaG91bGQgd2Ugc2hvdyB3ZWVrIG51bWJlcnMgY29sdW1uLlxuICAgICAgICAgKiBGYWxzZSBieSBkZWZhdWx0LlxuICAgICAgICAgKiAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaG93V2Vla051bWJlcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dXZWVrTnVtYmVyID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwicGlja2VyVmFsdWVDaGFuZ2VcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUud3JpdGVRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9ybWF0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiYm91bmRpbmdNb250aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhcnRWaWV3XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJCYXNlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkJhc2VQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG4gICAgXSwgTmJCYXNlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmaWx0ZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFR5cGUpXG4gICAgXSwgTmJCYXNlUGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXlDZWxsQ29tcG9uZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwibW9udGhDZWxsQ29tcG9uZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUeXBlKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwieWVhckNlbGxDb21wb25lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkJhc2VQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkJhc2VQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInZpc2libGVEYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiaGlkZU9uU2VsZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd05hdmlnYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYkJhc2VQaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcIndlZWtOdW1iZXJTeW1ib2xcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic2hvd1dlZWtOdW1iZXJcIiwgbnVsbCk7XG4gICAgTmJCYXNlUGlja2VyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogJydcbiAgICAgICAgfSksXG4gICAgICAgIF9fcGFyYW0oMCwgSW5qZWN0KE5CX0RPQ1VNRU5UKSksXG4gICAgICAgIF9fcGFyYW0oNiwgT3B0aW9uYWwoKSksIF9fcGFyYW0oNiwgSW5qZWN0KE5CX0RBVEVfU0VSVklDRV9PUFRJT05TKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UsXG4gICAgICAgICAgICBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlLFxuICAgICAgICAgICAgTmJPdmVybGF5U2VydmljZSxcbiAgICAgICAgICAgIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICAgICAgICAgIE5iRGF0ZVNlcnZpY2UsIE9iamVjdF0pXG4gICAgXSwgTmJCYXNlUGlja2VyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJCYXNlUGlja2VyQ29tcG9uZW50O1xufShOYkJhc2VQaWNrZXIpKTtcbi8qKlxuICogVGhlIERhdGVQaWNrZXIgY29tcG9uZW50cyBpdHNlbGYuXG4gKiBQcm92aWRlcyBhIHByb3h5IHRvIGBOYkNhbGVuZGFyYCBvcHRpb25zIGFzIHdlbGwgYXMgY3VzdG9tIHBpY2tlciBvcHRpb25zLlxuICovXG52YXIgTmJEYXRlcGlja2VyQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYkRhdGVwaWNrZXJDb21wb25lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJEYXRlcGlja2VyQ29tcG9uZW50KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucGlja2VyQ2xhc3MgPSBOYkNhbGVuZGFyQ29tcG9uZW50O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkRhdGVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGF0ZSB3aGljaCB3aWxsIGJlIHJlbmRlcmVkIGFzIHNlbGVjdGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iRGF0ZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0ZUNoYW5nZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyBkYXRlIHdoZW4gc2VsZWN0ZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVDaGFuZ2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkRhdGVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXIgPyB0aGlzLnBpY2tlci5kYXRlIDogdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGlja2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IGRhdGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gZGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBpY2tlci52aXNpYmxlRGF0ZSA9IGRhdGU7XG4gICAgICAgICAgICAgICAgdGhpcy5waWNrZXIuZGF0ZSA9IGRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYkRhdGVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInBpY2tlclZhbHVlQ2hhbmdlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waWNrZXIuZGF0ZUNoYW5nZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJEYXRlcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS53cml0ZVF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5xdWV1ZSkge1xuICAgICAgICAgICAgdmFyIGRhdGUgPSB0aGlzLnF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZGF0ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG4gICAgXSwgTmJEYXRlcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYXRlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlciksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYkRhdGVwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRhdGVDaGFuZ2VcIiwgbnVsbCk7XG4gICAgTmJEYXRlcGlja2VyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLWRhdGVwaWNrZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICcnXG4gICAgICAgIH0pXG4gICAgXSwgTmJEYXRlcGlja2VyQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJEYXRlcGlja2VyQ29tcG9uZW50O1xufShOYkJhc2VQaWNrZXJDb21wb25lbnQpKTtcbi8qKlxuICogVGhlIFJhbmdlRGF0ZVBpY2tlciBjb21wb25lbnRzIGl0c2VsZi5cbiAqIFByb3ZpZGVzIGEgcHJveHkgdG8gYE5iQ2FsZW5kYXJSYW5nZWAgb3B0aW9ucyBhcyB3ZWxsIGFzIGN1c3RvbSBwaWNrZXIgb3B0aW9ucy5cbiAqL1xudmFyIE5iUmFuZ2VwaWNrZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iUmFuZ2VwaWNrZXJDb21wb25lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJSYW5nZXBpY2tlckNvbXBvbmVudCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnBpY2tlckNsYXNzID0gTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhbmdlcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyYW5nZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSYW5nZSB3aGljaCB3aWxsIGJlIHJlbmRlcmVkIGFzIHNlbGVjdGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHJhbmdlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJSYW5nZXBpY2tlckNvbXBvbmVudC5wcm90b3R5cGUsIFwicmFuZ2VDaGFuZ2VcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgcmFuZ2Ugd2hlbiBzdGFydCBzZWxlY3RlZCBhbmQgZW1pdHMgYWdhaW4gd2hlbiBlbmQgc2VsZWN0ZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVDaGFuZ2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhbmdlcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGlja2VyID8gdGhpcy5waWNrZXIucmFuZ2UgOiB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGlja2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IHJhbmdlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgICAgIHZhciB2aXNpYmxlRGF0ZSA9IHJhbmdlICYmIHJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZURhdGUgPSB2aXNpYmxlRGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBpY2tlci52aXNpYmxlRGF0ZSA9IHZpc2libGVEYXRlO1xuICAgICAgICAgICAgICAgIHRoaXMucGlja2VyLnJhbmdlID0gcmFuZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhbmdlcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwaWNrZXJWYWx1ZUNoYW5nZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGlja2VyLnJhbmdlQ2hhbmdlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYlJhbmdlcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZS5zaG91bGRIaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5zaG91bGRIaWRlLmNhbGwodGhpcykgJiYgISEodGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLnN0YXJ0ICYmIHRoaXMudmFsdWUuZW5kKTtcbiAgICB9O1xuICAgIE5iUmFuZ2VwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLndyaXRlUXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gcmFuZ2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE5iUmFuZ2VwaWNrZXJDb21wb25lbnQucHJvdG90eXBlLCBcInJhbmdlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlciksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlJhbmdlcGlja2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyYW5nZUNoYW5nZVwiLCBudWxsKTtcbiAgICBOYlJhbmdlcGlja2VyQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ25iLXJhbmdlcGlja2VyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnJ1xuICAgICAgICB9KVxuICAgIF0sIE5iUmFuZ2VwaWNrZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlJhbmdlcGlja2VyQ29tcG9uZW50O1xufShOYkJhc2VQaWNrZXJDb21wb25lbnQpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJEYXRlQWRhcHRlclNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iRGF0ZUFkYXB0ZXJTZXJ2aWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iRGF0ZUFkYXB0ZXJTZXJ2aWNlKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgICAgIF90aGlzLnBpY2tlciA9IE5iRGF0ZXBpY2tlckNvbXBvbmVudDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBOYkRhdGVBZGFwdGVyU2VydmljZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLnBhcnNlKGRhdGUsIGZvcm1hdCk7XG4gICAgfTtcbiAgICBOYkRhdGVBZGFwdGVyU2VydmljZS5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGRhdGUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5mb3JtYXQoZGF0ZSwgZm9ybWF0KTtcbiAgICB9O1xuICAgIE5iRGF0ZUFkYXB0ZXJTZXJ2aWNlLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKGRhdGUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1ZhbGlkRGF0ZVN0cmluZyhkYXRlLCBmb3JtYXQpO1xuICAgIH07XG4gICAgTmJEYXRlQWRhcHRlclNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iRGF0ZVNlcnZpY2VdKVxuICAgIF0sIE5iRGF0ZUFkYXB0ZXJTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJEYXRlQWRhcHRlclNlcnZpY2U7XG59KE5iRGF0ZXBpY2tlckFkYXB0ZXIpKTtcbnZhciBOYlJhbmdlQWRhcHRlclNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iUmFuZ2VBZGFwdGVyU2VydmljZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlJhbmdlQWRhcHRlclNlcnZpY2UoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgX3RoaXMucGlja2VyID0gTmJSYW5nZXBpY2tlckNvbXBvbmVudDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBOYlJhbmdlQWRhcHRlclNlcnZpY2UucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKHJhbmdlLCBmb3JtYXQpIHtcbiAgICAgICAgdmFyIF9hID0gcmFuZ2Uuc3BsaXQoJy0nKS5tYXAoZnVuY3Rpb24gKHN1YkRhdGUpIHsgcmV0dXJuIHN1YkRhdGUudHJpbSgpOyB9KSwgc3RhcnQgPSBfYVswXSwgZW5kID0gX2FbMV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydDogdGhpcy5kYXRlU2VydmljZS5wYXJzZShzdGFydCwgZm9ybWF0KSxcbiAgICAgICAgICAgIGVuZDogdGhpcy5kYXRlU2VydmljZS5wYXJzZShlbmQsIGZvcm1hdCksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBOYlJhbmdlQWRhcHRlclNlcnZpY2UucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChyYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmRhdGVTZXJ2aWNlLmZvcm1hdChyYW5nZS5zdGFydCwgZm9ybWF0KTtcbiAgICAgICAgdmFyIGlzU3RhcnRWYWxpZCA9IHRoaXMuZGF0ZVNlcnZpY2UuaXNWYWxpZERhdGVTdHJpbmcoc3RhcnQsIGZvcm1hdCk7XG4gICAgICAgIGlmICghaXNTdGFydFZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVuZCA9IHRoaXMuZGF0ZVNlcnZpY2UuZm9ybWF0KHJhbmdlLmVuZCwgZm9ybWF0KTtcbiAgICAgICAgdmFyIGlzRW5kVmFsaWQgPSB0aGlzLmRhdGVTZXJ2aWNlLmlzVmFsaWREYXRlU3RyaW5nKGVuZCwgZm9ybWF0KTtcbiAgICAgICAgaWYgKGlzRW5kVmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFydCArIFwiIC0gXCIgKyBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iUmFuZ2VBZGFwdGVyU2VydmljZS5wcm90b3R5cGUuaXNWYWxpZCA9IGZ1bmN0aW9uIChyYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIHZhciBfYSA9IHJhbmdlLnNwbGl0KCctJykubWFwKGZ1bmN0aW9uIChzdWJEYXRlKSB7IHJldHVybiBzdWJEYXRlLnRyaW0oKTsgfSksIHN0YXJ0ID0gX2FbMF0sIGVuZCA9IF9hWzFdO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1ZhbGlkRGF0ZVN0cmluZyhzdGFydCwgZm9ybWF0KSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmlzVmFsaWREYXRlU3RyaW5nKGVuZCwgZm9ybWF0KTtcbiAgICB9O1xuICAgIE5iUmFuZ2VBZGFwdGVyU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJEYXRlU2VydmljZV0pXG4gICAgXSwgTmJSYW5nZUFkYXB0ZXJTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJSYW5nZUFkYXB0ZXJTZXJ2aWNlO1xufShOYkRhdGVwaWNrZXJBZGFwdGVyKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iRGF0ZXBpY2tlck1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkRhdGVwaWNrZXJNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iRGF0ZXBpY2tlck1vZHVsZV8xID0gTmJEYXRlcGlja2VyTW9kdWxlO1xuICAgIE5iRGF0ZXBpY2tlck1vZHVsZS5mb3JSb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iRGF0ZXBpY2tlck1vZHVsZV8xLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgRGF0ZVBpcGUsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBOQl9EQVRFX0FEQVBURVIsXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB1c2VDbGFzczogTmJEYXRlQWRhcHRlclNlcnZpY2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5CX0RBVEVfQURBUFRFUixcbiAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHVzZUNsYXNzOiBOYlJhbmdlQWRhcHRlclNlcnZpY2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgTmJEYXRlcGlja2VyTW9kdWxlXzE7XG4gICAgTmJEYXRlcGlja2VyTW9kdWxlID0gTmJEYXRlcGlja2VyTW9kdWxlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW05iT3ZlcmxheU1vZHVsZSwgTmJDYWxlbmRhck1vZHVsZSwgTmJDYWxlbmRhclJhbmdlTW9kdWxlXSxcbiAgICAgICAgICAgIGV4cG9ydHM6IFtOYkRhdGVwaWNrZXJEaXJlY3RpdmUsIE5iRGF0ZXBpY2tlckNvbXBvbmVudCwgTmJSYW5nZXBpY2tlckNvbXBvbmVudF0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgTmJEYXRlcGlja2VyQ29udGFpbmVyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIE5iRGF0ZXBpY2tlckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBOYlJhbmdlcGlja2VyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIE5iQmFzZVBpY2tlckNvbXBvbmVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBlbnRyeUNvbXBvbmVudHM6IFtOYkNhbGVuZGFyQ29tcG9uZW50LCBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQsIE5iRGF0ZXBpY2tlckNvbnRhaW5lckNvbXBvbmVudF0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJEYXRlcGlja2VyTW9kdWxlKTtcbiAgICByZXR1cm4gTmJEYXRlcGlja2VyTW9kdWxlO1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFRoZSBgTmJSYWRpb0NvbXBvbmVudGAgcHJvdmlkZXMgdGhlIHNhbWUgZnVuY3Rpb25hbGl0eSBhcyBuYXRpdmUgYDxpbnB1dCB0eXBlPVwicmFkaW9cIj5gXG4gKiB3aXRoIE5lYnVsYXIgc3R5bGVzIGFuZCBhbmltYXRpb25zLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIHJhZGlvL3JhZGlvLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlJhZGlvTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICpcbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJSYWRpb01vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIFJhZGlvIGJ1dHRvbnMgc2hvdWxkIGJlIHdyYXBwZWQgaW4gYG5iLXJhZGlvLWdyb3VwYCB0byBwcm92aWRlIGZvcm0gYmluZGluZ3MuXG4gKlxuICogYGBgaHRtbFxuICogPG5iLXJhZGlvLWdyb3VwIFsobmdNb2RlbCldPVwic2VsZWN0ZWRPcHRpb25cIj5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiMVwiPk9wdGlvbiAxPC9uYi1yYWRpbz5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiMlwiPk9wdGlvbiAyPC9uYi1yYWRpbz5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiM1wiPk9wdGlvbiAzPC9uYi1yYWRpbz5cbiAqIDwvbmItcmFkaW8tZ3JvdXA+XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGRpc2FibGUgc29tZSByYWRpb3MgaW4gdGhlIGdyb3VwIHVzaW5nIGEgYGRpc2FibGVkYCBhdHRyaWJ1dGUuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlZCwgcmFkaW8vcmFkaW8tZGlzYWJsZWQuY29tcG9uZW50KVxuICpcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogcmFkaW8td2lkdGg6XG4gKiByYWRpby1oZWlnaHQ6XG4gKiByYWRpby1ib3JkZXItc3R5bGU6XG4gKiByYWRpby1ib3JkZXItd2lkdGg6XG4gKiByYWRpby10ZXh0LWZvbnQtZmFtaWx5OlxuICogcmFkaW8tdGV4dC1mb250LXNpemU6XG4gKiByYWRpby10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcmFkaW8tdGV4dC1saW5lLWhlaWdodDpcbiAqIHJhZGlvLW91dGxpbmUtY29sb3I6XG4gKiByYWRpby1vdXRsaW5lLXdpZHRoOlxuICogcmFkaW8tYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1iYXNpYy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1iYXNpYy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWZvY3VzLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1iYXNpYy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiByYWRpby1iYXNpYy1ob3Zlci1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1iYXNpYy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1iYXNpYy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtYWN0aXZlLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1iYXNpYy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1iYXNpYy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogcmFkaW8tYmFzaWMtZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtZGlzYWJsZWQtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1iYXNpYy1kaXNhYmxlZC1jaGVja2VkLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktZm9jdXMtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWhvdmVyLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1hY3RpdmUtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktZGlzYWJsZWQtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWRpc2FibGVkLWNoZWNrZWQtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1mb2N1cy1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtaG92ZXItaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWFjdGl2ZS1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1kaXNhYmxlZC1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtZGlzYWJsZWQtY2hlY2tlZC1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1pbmZvLXRleHQtY29sb3I6XG4gKiByYWRpby1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWluZm8tY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8taW5mby1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWluZm8taW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8taW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiByYWRpby1pbmZvLWZvY3VzLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWluZm8taG92ZXItYm9yZGVyLWNvbG9yOlxuICogcmFkaW8taW5mby1ob3Zlci1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1pbmZvLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWluZm8tYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWluZm8tYWN0aXZlLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWluZm8tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8taW5mby1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogcmFkaW8taW5mby1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1pbmZvLWRpc2FibGVkLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8taW5mby1kaXNhYmxlZC1jaGVja2VkLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctZm9jdXMtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWhvdmVyLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1hY3RpdmUtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctZGlzYWJsZWQtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWRpc2FibGVkLWNoZWNrZWQtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLXRleHQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiByYWRpby1kYW5nZXItZm9jdXMtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItaG92ZXItYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWhvdmVyLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1hY3RpdmUtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWRpc2FibGVkLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWRpc2FibGVkLWNoZWNrZWQtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC10ZXh0LWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1jb250cm9sLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1jb250cm9sLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1mb2N1cy1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtaG92ZXItaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiByYWRpby1jb250cm9sLWFjdGl2ZS1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1kaXNhYmxlZC1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtZGlzYWJsZWQtY2hlY2tlZC1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiAqL1xudmFyIE5iUmFkaW9Db21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJSYWRpb0NvbXBvbmVudChjZCwgcmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5ibHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUsIFwibmFtZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fbmFtZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tlZDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBib29sVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NoZWNrZWQgIT09IGJvb2xWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrZWQgPSBib29sVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkaXNhYmxlZCkge1xuICAgICAgICAgICAgdmFyIGJvb2xWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eShkaXNhYmxlZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGlzYWJsZWQgIT09IGJvb2xWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkID0gYm9vbFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIGVtcHR5U3RhdHVzV2FybmluZygnTmJSYWRpbycpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gJ2Jhc2ljJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0dXMgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc1ByaW1hcnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNTdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLCBcImlzV2FybmluZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0RhbmdlclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLCBcImlzSW5mb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0Jhc2ljXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0NvbnRyb2xcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMudmFsdWUpO1xuICAgIH07XG4gICAgTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuICAgIC8qXG4gICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAqIFdlIHVzZSB0aGlzIG1ldGhvZCB3aGVuIHNldHRpbmcgcmFkaW8gaW5wdXRzIGZyb20gcmFkaW8gZ3JvdXAgY29tcG9uZW50LlxuICAgICAqIE90aGVyd2lzZSBBbmd1bGFyIHdvbid0IGRldGVjdCBjaGFuZ2VzIGluIHJhZGlvIHRlbXBsYXRlIGFzIGNhY2hlZCBsYXN0IHJlbmRlcmVkXG4gICAgICogdmFsdWUgZGlkbid0IHVwZGF0ZWQuXG4gICAgICoqL1xuICAgIE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLl9tYXJrRm9yQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfTtcbiAgICAvKlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiBVc2UgdGhpcyBtZXRob2Qgd2hlbiBzZXR0aW5nIHJhZGlvIG5hbWUgZnJvbSByYWRpbyBncm91cCBjb21wb25lbnQuXG4gICAgICogSW4gY2FzZSBvcHRpb24gJ25hbWUnIGlzbid0IHNldCBvbiBuYi1yYWRpbyBjb21wb25lbnQgd2UgbmVlZCB0byBzZXQgbmFtZVxuICAgICAqIHJpZ2h0IGF3YXksIHNvIGl0IHdvbid0IG92ZXJsYXAgd2l0aCBvcHRpb25zIHdpdGhvdXQgbmFtZXMgZnJvbSBvdGhlciByYWRpb1xuICAgICAqIGdyb3Vwcy4gT3RoZXJ3aXNlIHRoZXkgYWxsIHdvdWxkIGhhdmUgc2FtZSBuYW1lIGFuZCB3aWxsIGJlIGNvbnNpZGVyZWQgYXNcbiAgICAgKiBvcHRpb25zIGZyb20gb25lIGdyb3VwIHNvIG9ubHkgdGhlIGxhc3Qgb3B0aW9uIHdpbGwgc3RheSBzZWxlY3RlZC5cbiAgICAgKiovXG4gICAgTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUuX3NldE5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICBpZiAodGhpcy5pbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQsICduYW1lJywgbmFtZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLCBcIm5hbWVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG4gICAgXSwgTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZUNoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJibHVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFZpZXdDaGlsZCgnaW5wdXQnLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFbGVtZW50UmVmKVxuICAgIF0sIE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLCBcImlucHV0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtcHJpbWFyeScpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc1ByaW1hcnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtc3VjY2VzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc1N1Y2Nlc3NcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtd2FybmluZycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc1dhcm5pbmdcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtZGFuZ2VyJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLCBcImlzRGFuZ2VyXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWluZm8nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJSYWRpb0NvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNJbmZvXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWJhc2ljJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iUmFkaW9Db21wb25lbnQucHJvdG90eXBlLCBcImlzQmFzaWNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtY29udHJvbCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlJhZGlvQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0NvbnRyb2xcIiwgbnVsbCk7XG4gICAgTmJSYWRpb0NvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1yYWRpbycsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgPGxhYmVsPlxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgI2lucHV0XFxuICAgICAgICB0eXBlPVxcXCJyYWRpb1xcXCJcXG4gICAgICAgIGNsYXNzPVxcXCJuYXRpdmUtaW5wdXQgdmlzdWFsbHktaGlkZGVuXFxcIlxcbiAgICAgICAgW25hbWVdPVxcXCJuYW1lXFxcIlxcbiAgICAgICAgW3ZhbHVlXT1cXFwidmFsdWVcXFwiXFxuICAgICAgICBbY2hlY2tlZF09XFxcImNoZWNrZWRcXFwiXFxuICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgIChjaGFuZ2UpPVxcXCJvbkNoYW5nZSgkZXZlbnQpXFxcIlxcbiAgICAgICAgKGNsaWNrKT1cXFwib25DbGljaygkZXZlbnQpXFxcIj5cXG4gICAgICA8c3BhbiBjbGFzcz1cXFwib3V0ZXItY2lyY2xlXFxcIj48L3NwYW4+XFxuICAgICAgPHNwYW4gY2xhc3M9XFxcImlubmVyLWNpcmNsZVxcXCI+PC9zcGFuPlxcbiAgICAgIDxzcGFuIGNsYXNzPVxcXCJ0ZXh0XFxcIj5cXG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICA8L3NwYW4+XFxuICAgIDwvbGFiZWw+XFxuICBcIixcbiAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlfTpob3N0IGxhYmVse2Rpc3BsYXk6aW5saW5lLWZsZXg7bWFyZ2luOjA7bWluLWhlaWdodDppbmhlcml0O3BhZGRpbmc6MC4zNzVyZW0gMDthbGlnbi1pdGVtczpjZW50ZXJ9W2Rpcj1sdHJdIDpob3N0IGxhYmVse3BhZGRpbmctcmlnaHQ6MS41cmVtfVtkaXI9cnRsXSA6aG9zdCBsYWJlbHtwYWRkaW5nLWxlZnQ6MS41cmVtfTpob3N0IC5vdXRlci1jaXJjbGUsOmhvc3QgLmlubmVyLWNpcmNsZXtib3JkZXItcmFkaXVzOjUwJTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfVtkaXI9bHRyXSA6aG9zdCAub3V0ZXItY2lyY2xlLFtkaXI9bHRyXSA6aG9zdCAuaW5uZXItY2lyY2xle2xlZnQ6MH1bZGlyPXJ0bF0gOmhvc3QgLm91dGVyLWNpcmNsZSxbZGlyPXJ0bF0gOmhvc3QgLmlubmVyLWNpcmNsZXtyaWdodDowfTpob3N0IC5pbm5lci1jaXJjbGV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSkgc2NhbGUoMC42KX1bZGlyPWx0cl0gOmhvc3QgLnRleHR7cGFkZGluZy1sZWZ0Oi41cmVtfVtkaXI9cnRsXSA6aG9zdCAudGV4dHtwYWRkaW5nLXJpZ2h0Oi41cmVtfVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgICAgIFJlbmRlcmVyMl0pXG4gICAgXSwgTmJSYWRpb0NvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iUmFkaW9Db21wb25lbnQ7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYlJhZGlvR3JvdXBDb21wb25lbnRgIGlzIHRoZSB3cmFwcGVyIGZvciBgbmItcmFkaW9gIGJ1dHRvbi5cbiAqIEl0IHByb3ZpZGVzIGZvcm0gYmluZGluZ3M6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLXJhZGlvLWdyb3VwIFsobmdNb2RlbCldPVwic2VsZWN0ZWRPcHRpb25cIj5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiMVwiPk9wdGlvbiAxPC9uYi1yYWRpbz5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiMlwiPk9wdGlvbiAyPC9uYi1yYWRpbz5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiM1wiPk9wdGlvbiAzPC9uYi1yYWRpbz5cbiAqIDwvbmItcmFkaW8tZ3JvdXA+XG4gKiBgYGBcbiAqXG4gKiBBbHNvLCB5b3UgY2FuIHVzZSBgdmFsdWVgIGFuZCBgdmFsdWVDaGFuZ2VgIGZvciBiaW5kaW5nIHdpdGhvdXQgZm9ybXMuXG4gKlxuICogYGBgaHRtbFxuICogPG5iLXJhZGlvLWdyb3VwIFsodmFsdWUpXT1cInNlbGVjdGVkT3B0aW9uXCI+XG4gKiAgIDxuYi1yYWRpbyB2YWx1ZT1cIjFcIj5PcHRpb24gMTwvbmItcmFkaW8+XG4gKiAgIDxuYi1yYWRpbyB2YWx1ZT1cIjJcIj5PcHRpb24gMjwvbmItcmFkaW8+XG4gKiAgIDxuYi1yYWRpbyB2YWx1ZT1cIjNcIj5PcHRpb24gMzwvbmItcmFkaW8+XG4gKiA8L25iLXJhZGlvLWdyb3VwPlxuICogYGBgXG4gKlxuICogUmFkaW8gaXRlbXMgbmFtZSBoYXMgdG8gYmUgcHJvdmlkZWQgdGhyb3VnaCBgbmFtZWAgaW5wdXQgcHJvcGVydHkgb2YgdGhlIHJhZGlvIGdyb3VwLlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1yYWRpby1ncm91cCBuYW1lPVwibXktcmFkaW8tZ3JvdXBcIj5cbiAqICAgLi4uXG4gKiA8L25iLXJhZGlvLWdyb3VwPlxuICogYGBgXG4gKlxuICogWW91IGNhbiBjaGFuZ2UgcmFkaW8gZ3JvdXAgc3RhdHVzIGJ5IHNldHRpbmcgYHN0YXR1c2AgaW5wdXQuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFN0YXR1c2VzLCByYWRpby9yYWRpby1zdGF0dXNlcy5jb21wb25lbnQpXG4gKlxuICogQWxzbywgeW91IGNhbiBkaXNhYmxlIHRoZSB3aG9sZSBncm91cCB1c2luZyBgZGlzYWJsZWRgIGF0dHJpYnV0ZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoRGlzYWJsZWQgZ3JvdXAsIHJhZGlvL3JhZGlvLWRpc2FibGVkLWdyb3VwLmNvbXBvbmVudClcbiAqXG4gKiAqL1xudmFyIE5iUmFkaW9Hcm91cENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlJhZGlvR3JvdXBDb21wb25lbnQoaG9zdEVsZW1lbnQsIHBsYXRmb3JtSWQsIGRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybUlkID0gcGxhdGZvcm1JZDtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgTmJSYWRpb0dyb3VwQ29tcG9uZW50XzEgPSBOYlJhZGlvR3JvdXBDb21wb25lbnQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iUmFkaW9Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlcygpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJSYWRpb0dyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJuYW1lXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU5hbWVzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eShkaXNhYmxlZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURpc2FibGVkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSYWRpbyBidXR0b25zIHN0YXR1cy5cbiAgICAgICAgICogUG9zc2libGUgdmFsdWVzIGFyZSBgcHJpbWFyeWAgKGRlZmF1bHQpLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBpbmZvYC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBlbXB0eVN0YXR1c1dhcm5pbmcoJ05iUmFkaW8nKTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICdiYXNpYyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fc3RhdHVzICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iUmFkaW9Hcm91cENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlckNvbnRlbnRJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLyBJbiBjYXNlIG9wdGlvbiAnbmFtZScgaXNuJ3Qgc2V0IG9uIG5iLXJhZGlvIGNvbXBvbmVudCxcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzZXQgaXQncyBuYW1lIHJpZ2h0IGF3YXksIHNvIGl0IHdvbid0IG92ZXJsYXAgd2l0aCBvcHRpb25zXG4gICAgICAgIC8vIHdpdGhvdXQgbmFtZXMgZnJvbSBvdGhlciByYWRpbyBncm91cHMuIE90aGVyd2lzZSB0aGV5IGFsbCB3b3VsZCBoYXZlXG4gICAgICAgIC8vIHNhbWUgbmFtZSBhbmQgd2lsbCBiZSBjb25zaWRlcmVkIGFzIG9wdGlvbnMgZnJvbSBvbmUgZ3JvdXAgc28gb25seSB0aGVcbiAgICAgICAgLy8gbGFzdCBvcHRpb24gd2lsbCBzdGF5IHNlbGVjdGVkLlxuICAgICAgICB0aGlzLnVwZGF0ZU5hbWVzKCk7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudXBkYXRlQW5kU3Vic2NyaWJlVG9SYWRpb3MoKTsgfSk7XG4gICAgICAgIHRoaXMucmFkaW9zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gJ2NoYW5nZXMnIGVtaXQgZHVyaW5nIGNoYW5nZSBkZXRlY3Rpb24gcnVuIGFuZCB3ZSBjYW4ndCB1cGRhdGVcbiAgICAgICAgICAgIC8vIG9wdGlvbiBwcm9wZXJ0aWVzIHJpZ2h0IG9mIHNpbmNlIHRoZXkgYWxyZWFkeSB3YXMgaW5pdGlhbGl6ZWQuXG4gICAgICAgICAgICAvLyBJbnN0ZWFkIHdlIHNjaGVkdWxlIG1pY3JvdGFzayB0byB1cGRhdGUgcmFkaW9zIGFmdGVyIGNoYW5nZSBkZXRlY3Rpb25cbiAgICAgICAgICAgIC8vIHJ1biBpcyBmaW5pc2hlZC5cbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudXBkYXRlQW5kU3Vic2NyaWJlVG9SYWRpb3MoKTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJSYWRpb0dyb3VwQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIE5iUmFkaW9Hcm91cENvbXBvbmVudC5wcm90b3R5cGUucmVnaXN0ZXJPbkNoYW5nZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgfTtcbiAgICBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLnJlZ2lzdGVyT25Ub3VjaGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gICAgfTtcbiAgICBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLndyaXRlVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZXMoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJSYWRpb0dyb3VwQ29tcG9uZW50LnByb3RvdHlwZS51cGRhdGVBbmRTdWJzY3JpYmVUb1JhZGlvcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVOYW1lcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZURpc2FibGVkKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25SYWRpb3NWYWx1ZUNoYW5nZSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uUmFkaW9zQmx1cigpO1xuICAgIH07XG4gICAgTmJSYWRpb0dyb3VwQ29tcG9uZW50LnByb3RvdHlwZS51cGRhdGVOYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMucmFkaW9zKSB7XG4gICAgICAgICAgICB0aGlzLnJhZGlvcy5mb3JFYWNoKGZ1bmN0aW9uIChyYWRpbykgeyByZXR1cm4gcmFkaW8uX3NldE5hbWUoX3RoaXMubmFtZSk7IH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLnVwZGF0ZVZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmRNYXJrRm9yQ2hlY2tSYWRpb3MoZnVuY3Rpb24gKHJhZGlvKSB7IHJldHVybiByYWRpby5jaGVja2VkID0gcmFkaW8udmFsdWUgPT09IF90aGlzLnZhbHVlOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJSYWRpb0dyb3VwQ29tcG9uZW50LnByb3RvdHlwZS51cGRhdGVEaXNhYmxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRpc2FibGVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmRNYXJrRm9yQ2hlY2tSYWRpb3MoZnVuY3Rpb24gKHJhZGlvKSB7IHJldHVybiByYWRpby5kaXNhYmxlZCA9IF90aGlzLmRpc2FibGVkOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJSYWRpb0dyb3VwQ29tcG9uZW50LnByb3RvdHlwZS5zdWJzY3JpYmVPblJhZGlvc1ZhbHVlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMucmFkaW9zIHx8ICF0aGlzLnJhZGlvcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBtZXJnZS5hcHBseSh2b2lkIDAsIHRoaXMucmFkaW9zLm1hcChmdW5jdGlvbiAocmFkaW8pIHsgcmV0dXJuIHJhZGlvLnZhbHVlQ2hhbmdlOyB9KSkucGlwZSh0YWtlVW50aWwobWVyZ2UodGhpcy5yYWRpb3MuY2hhbmdlcywgdGhpcy5kZXN0cm95JCkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIF90aGlzLndyaXRlVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgX3RoaXMucHJvcGFnYXRlVmFsdWUodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE5iUmFkaW9Hcm91cENvbXBvbmVudC5wcm90b3R5cGUucHJvcGFnYXRlVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSh2YWx1ZSk7XG4gICAgfTtcbiAgICBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLnN1YnNjcmliZU9uUmFkaW9zQmx1ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGhhc05vUmFkaW9zID0gIXRoaXMucmFkaW9zIHx8ICF0aGlzLnJhZGlvcy5sZW5ndGg7XG4gICAgICAgIGlmICghaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSB8fCBoYXNOb1JhZGlvcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBob3N0RWxlbWVudCA9IHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgZnJvbUV2ZW50KGhvc3RFbGVtZW50LCAnZm9jdXNpbicpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBob3N0RWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpOyB9KSwgc3dpdGNoTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1lcmdlKGZyb21FdmVudChfdGhpcy5kb2N1bWVudCwgJ2ZvY3VzaW4nKSwgZnJvbUV2ZW50KF90aGlzLmRvY3VtZW50LCAnY2xpY2snKSk7IH0pLCBmaWx0ZXIoZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiAhaG9zdEVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KTsgfSksIHRha2VVbnRpbChtZXJnZSh0aGlzLnJhZGlvcy5jaGFuZ2VzLCB0aGlzLmRlc3Ryb3kkKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm9uVG91Y2hlZCgpOyB9KTtcbiAgICB9O1xuICAgIE5iUmFkaW9Hcm91cENvbXBvbmVudC5wcm90b3R5cGUudXBkYXRlU3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnVwZGF0ZUFuZE1hcmtGb3JDaGVja1JhZGlvcyhmdW5jdGlvbiAocmFkaW8pIHsgcmV0dXJuIHJhZGlvLnN0YXR1cyA9IF90aGlzLnN0YXR1czsgfSk7XG4gICAgfTtcbiAgICBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLnVwZGF0ZUFuZE1hcmtGb3JDaGVja1JhZGlvcyA9IGZ1bmN0aW9uICh1cGRhdGVGbikge1xuICAgICAgICBpZiAodGhpcy5yYWRpb3MpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaW9zLmZvckVhY2goZnVuY3Rpb24gKHJhZGlvKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRm4ocmFkaW8pO1xuICAgICAgICAgICAgICAgIHJhZGlvLl9tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgTmJSYWRpb0dyb3VwQ29tcG9uZW50XzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG4gICAgXSwgTmJSYWRpb0dyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbiAgICBdLCBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcIm5hbWVcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbiAgICBdLCBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iUmFkaW9Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBDb250ZW50Q2hpbGRyZW4oTmJSYWRpb0NvbXBvbmVudCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFF1ZXJ5TGlzdClcbiAgICBdLCBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcInJhZGlvc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYlJhZGlvR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcInZhbHVlQ2hhbmdlXCIsIHZvaWQgMCk7XG4gICAgTmJSYWRpb0dyb3VwQ29tcG9uZW50ID0gTmJSYWRpb0dyb3VwQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItcmFkaW8tZ3JvdXAnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItcmFkaW9cXFwiPjwvbmctY29udGVudD5cIixcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE5iUmFkaW9Hcm91cENvbXBvbmVudF8xOyB9KSxcbiAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSgxLCBJbmplY3QoUExBVEZPUk1fSUQpKSxcbiAgICAgICAgX19wYXJhbSgyLCBJbmplY3QoTkJfRE9DVU1FTlQpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFbGVtZW50UmVmLCBPYmplY3QsIE9iamVjdF0pXG4gICAgXSwgTmJSYWRpb0dyb3VwQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJSYWRpb0dyb3VwQ29tcG9uZW50O1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJSYWRpb01vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlJhZGlvTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYlJhZGlvTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtdLFxuICAgICAgICAgICAgZXhwb3J0czogW05iUmFkaW9Db21wb25lbnQsIE5iUmFkaW9Hcm91cENvbXBvbmVudF0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYlJhZGlvQ29tcG9uZW50LCBOYlJhZGlvR3JvdXBDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iUmFkaW9Nb2R1bGUpO1xuICAgIHJldHVybiBOYlJhZGlvTW9kdWxlO1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTkJfREVGQVVMVF9ST1dfTEVWRUwgPSAwO1xuLyoqXG4gKiBJbXBsaWNpdCBjb250ZXh0IG9mIGNlbGxzIGFuZCByb3dzXG4gKi9cbnZhciBOYlRyZWVHcmlkUHJlc2VudGF0aW9uTm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkUHJlc2VudGF0aW9uTm9kZShcbiAgICAvKipcbiAgICAgKiBEYXRhIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggcm93XG4gICAgICovXG4gICAgZGF0YSwgY2hpbGRyZW4sIFxuICAgIC8qKlxuICAgICAqIFJvdyBleHBhbmQgc3RhdGVcbiAgICAgKi9cbiAgICBleHBhbmRlZCwgbGV2ZWwpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLmV4cGFuZGVkID0gZXhwYW5kZWQ7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiByb3cgaGFzIGNoaWxkIHJvd3NcbiAgICAgKi9cbiAgICBOYlRyZWVHcmlkUHJlc2VudGF0aW9uTm9kZS5wcm90b3R5cGUuaGFzQ2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuY2hpbGRyZW4gJiYgISF0aGlzLmNoaWxkcmVuLmxlbmd0aDtcbiAgICB9O1xuICAgIHJldHVybiBOYlRyZWVHcmlkUHJlc2VudGF0aW9uTm9kZTtcbn0oKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iVHJlZUdyaWREYXRhU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkRGF0YVNlcnZpY2UoKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdEdldHRlcnMgPSB7XG4gICAgICAgICAgICBkYXRhR2V0dGVyOiBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5kYXRhOyB9LFxuICAgICAgICAgICAgY2hpbGRyZW5HZXR0ZXI6IGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmNoaWxkcmVuIHx8IHVuZGVmaW5lZDsgfSxcbiAgICAgICAgICAgIGV4cGFuZGVkR2V0dGVyOiBmdW5jdGlvbiAoZCkgeyByZXR1cm4gISFkLmV4cGFuZGVkOyB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBOYlRyZWVHcmlkRGF0YVNlcnZpY2UucHJvdG90eXBlLnRvUHJlc2VudGF0aW9uTm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIGN1c3RvbUdldHRlcnMsIGxldmVsKSB7XG4gICAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7IGxldmVsID0gTkJfREVGQVVMVF9ST1dfTEVWRUw7IH1cbiAgICAgICAgdmFyIGdldHRlcnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5kZWZhdWx0R2V0dGVycyksIGN1c3RvbUdldHRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBOb2Rlcyhub2RlcywgZ2V0dGVycywgbGV2ZWwpO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZERhdGFTZXJ2aWNlLnByb3RvdHlwZS5tYXBOb2RlcyA9IGZ1bmN0aW9uIChub2RlcywgZ2V0dGVycywgbGV2ZWwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGRhdGFHZXR0ZXIgPSBnZXR0ZXJzLmRhdGFHZXR0ZXIsIGNoaWxkcmVuR2V0dGVyID0gZ2V0dGVycy5jaGlsZHJlbkdldHRlciwgZXhwYW5kZWRHZXR0ZXIgPSBnZXR0ZXJzLmV4cGFuZGVkR2V0dGVyO1xuICAgICAgICByZXR1cm4gbm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW5Ob2RlcyA9IGNoaWxkcmVuR2V0dGVyKG5vZGUpO1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuO1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzLnRvUHJlc2VudGF0aW9uTm9kZXMoY2hpbGRyZW5Ob2RlcywgZ2V0dGVycywgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgTmJUcmVlR3JpZFByZXNlbnRhdGlvbk5vZGUoZGF0YUdldHRlcihub2RlKSwgY2hpbGRyZW4sIGV4cGFuZGVkR2V0dGVyKG5vZGUpLCBsZXZlbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZERhdGFTZXJ2aWNlLnByb3RvdHlwZS5mbGF0dGVuRXhwYW5kZWQgPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5vZGVzLnJlZHVjZShmdW5jdGlvbiAocmVzLCBub2RlKSB7XG4gICAgICAgICAgICByZXMucHVzaChub2RlKTtcbiAgICAgICAgICAgIGlmIChub2RlLmV4cGFuZGVkICYmIG5vZGUuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoLmFwcGx5KHJlcywgX3RoaXMuZmxhdHRlbkV4cGFuZGVkKG5vZGUuY2hpbGRyZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0sIFtdKTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWREYXRhU2VydmljZS5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChub2Rlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW47XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNDaGlsZHJlbigpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcy5jb3B5KG5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOYlRyZWVHcmlkUHJlc2VudGF0aW9uTm9kZShub2RlLmRhdGEsIGNoaWxkcmVuLCBub2RlLmV4cGFuZGVkLCBub2RlLmxldmVsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRGF0YVNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpXG4gICAgXSwgTmJUcmVlR3JpZERhdGFTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZERhdGFTZXJ2aWNlO1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFNlcnZpY2UgdXNlZCB0byBmaWx0ZXIgdHJlZSBncmlkIGRhdGEuIFNlYXJjaGVkIHNlYXJjaFN0cmluZyBpbiBhbGwgb2JqZWN0IHZhbHVlcy5cbiAqIElmIHlvdSBuZWVkIGN1c3RvbSBmaWx0ZXIsIHlvdSBjYW4gZXh0ZW5kIHRoaXMgc2VydmljZSBhbmQgb3ZlcnJpZGUgZmlsdGVyUHJlZGljYXRlIG9yIHdob2xlIGZpbHRlciBtZXRob2QuXG4gKi9cbnZhciBOYlRyZWVHcmlkRmlsdGVyU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkRmlsdGVyU2VydmljZSgpIHtcbiAgICB9XG4gICAgTmJUcmVlR3JpZEZpbHRlclNlcnZpY2UucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChxdWVyeSwgZGF0YSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YS5yZWR1Y2UoZnVuY3Rpb24gKGZpbHRlcmVkLCBub2RlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWRDaGlsZHJlbjtcbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRDaGlsZHJlbiA9IF90aGlzLmZpbHRlcihxdWVyeSwgbm9kZS5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZHJlbiA9IGZpbHRlcmVkQ2hpbGRyZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRDaGlsZHJlbiAmJiBmaWx0ZXJlZENoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG5vZGUuZXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5maWx0ZXJQcmVkaWNhdGUobm9kZS5kYXRhLCBxdWVyeSkpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuICAgICAgICB9LCBbXSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRmlsdGVyU2VydmljZS5wcm90b3R5cGUuZmlsdGVyUHJlZGljYXRlID0gZnVuY3Rpb24gKGRhdGEsIHNlYXJjaFF1ZXJ5KSB7XG4gICAgICAgIHZhciBwcmVwYXJlZFF1ZXJ5ID0gc2VhcmNoUXVlcnkudHJpbSgpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QudmFsdWVzKGRhdGEpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHZhbCA9IF9hW19pXTtcbiAgICAgICAgICAgIHZhciBwcmVwYXJlZFZhbCA9IChcIlwiICsgdmFsKS50cmltKCkudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwcmVwYXJlZFZhbC5pbmNsdWRlcyhwcmVwYXJlZFF1ZXJ5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRGaWx0ZXJTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKVxuICAgIF0sIE5iVHJlZUdyaWRGaWx0ZXJTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZEZpbHRlclNlcnZpY2U7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYlNvcnREaXJlY3Rpb247XG4oZnVuY3Rpb24gKE5iU29ydERpcmVjdGlvbikge1xuICAgIE5iU29ydERpcmVjdGlvbltcIkFTQ0VORElOR1wiXSA9IFwiYXNjXCI7XG4gICAgTmJTb3J0RGlyZWN0aW9uW1wiREVTQ0VORElOR1wiXSA9IFwiZGVzY1wiO1xuICAgIE5iU29ydERpcmVjdGlvbltcIk5PTkVcIl0gPSBcIlwiO1xufSkoTmJTb3J0RGlyZWN0aW9uIHx8IChOYlNvcnREaXJlY3Rpb24gPSB7fSkpO1xudmFyIHNvcnREaXJlY3Rpb25zID0gW1xuICAgIE5iU29ydERpcmVjdGlvbi5BU0NFTkRJTkcsXG4gICAgTmJTb3J0RGlyZWN0aW9uLkRFU0NFTkRJTkcsXG4gICAgTmJTb3J0RGlyZWN0aW9uLk5PTkUsXG5dO1xuLyoqXG4gKiBEaXJlY3RpdmUgdHJpZ2dlcnMgc29ydCBtZXRob2Qgb2YgcGFzc2VkIG9iamVjdCB3aGVuIHNvcnQgaGVhZGVyIGNoYW5nZXMgZGlyZWN0aW9uXG4gKi9cbnZhciBOYlNvcnREaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTb3J0RGlyZWN0aXZlKCkge1xuICAgICAgICB0aGlzLnNvcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIE5iU29ydERpcmVjdGl2ZS5wcm90b3R5cGUuZW1pdFNvcnQgPSBmdW5jdGlvbiAoc29ydFJlcXVlc3QpIHtcbiAgICAgICAgaWYgKHRoaXMuc29ydGFibGUgJiYgdGhpcy5zb3J0YWJsZS5zb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRhYmxlLnNvcnQoc29ydFJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc29ydC5lbWl0KHNvcnRSZXF1ZXN0KTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJTb3J0JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJTb3J0RGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzb3J0YWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBOYlNvcnREaXJlY3RpdmUucHJvdG90eXBlLCBcInNvcnRcIiwgdm9pZCAwKTtcbiAgICBOYlNvcnREaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHsgc2VsZWN0b3I6ICdbbmJTb3J0XScgfSlcbiAgICBdLCBOYlNvcnREaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlNvcnREaXJlY3RpdmU7XG59KCkpO1xuLyoqXG4gKiBEaXJlY3RpdmUgZm9yIGhlYWRlcnMgc29ydCBpY29ucy4gTWFyayB5b3UgaWNvbiBpbXBsZW1lbnRhdGlvbiB3aXRoIHRoaXMgc3RydWN0dXJhbCBkaXJlY3RpdmUgYW5kXG4gKiBpdCdsbCBzZXQgdGVtcGxhdGUncyBpbXBsaWNpdCBjb250ZXh0IHdpdGggY3VycmVudCBkaXJlY3Rpb24uIENvbnRleHQgYWxzbyBoYXMgYGlzQXNjZW5kaW5nYCxcbiAqIGBpc0Rlc2NlbmRpbmdgIGFuZCBgaXNOb25lYCBwcm9wZXJ0aWVzLlxuICovXG52YXIgTmJTb3J0SGVhZGVySWNvbkRpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNvcnRIZWFkZXJJY29uRGlyZWN0aXZlKCkge1xuICAgIH1cbiAgICBOYlNvcnRIZWFkZXJJY29uRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7IHNlbGVjdG9yOiAnW25iU29ydEhlYWRlckljb25dJyB9KVxuICAgIF0sIE5iU29ydEhlYWRlckljb25EaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlNvcnRIZWFkZXJJY29uRGlyZWN0aXZlO1xufSgpKTtcbnZhciBOYlNvcnRJY29uQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iU29ydEljb25Db21wb25lbnQoKSB7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gTmJTb3J0RGlyZWN0aW9uLk5PTkU7XG4gICAgfVxuICAgIE5iU29ydEljb25Db21wb25lbnQucHJvdG90eXBlLmlzQXNjZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24gPT09IE5iU29ydERpcmVjdGlvbi5BU0NFTkRJTkc7XG4gICAgfTtcbiAgICBOYlNvcnRJY29uQ29tcG9uZW50LnByb3RvdHlwZS5pc0Rlc2NlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbiA9PT0gTmJTb3J0RGlyZWN0aW9uLkRFU0NFTkRJTkc7XG4gICAgfTtcbiAgICBOYlNvcnRJY29uQ29tcG9uZW50LnByb3RvdHlwZS5pc0RpcmVjdGlvblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBc2NlbmRpbmcoKSB8fCB0aGlzLmlzRGVzY2VuZGluZygpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJTb3J0SWNvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlyZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgTmJTb3J0SWNvbkNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zb3J0LWljb24nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XFxcImlzRGlyZWN0aW9uU2V0KClcXFwiPlxcbiAgICAgIDxuYi1pY29uICpuZ0lmPVxcXCJpc0FzY2VuZGluZygpXFxcIiBpY29uPVxcXCJjaGV2cm9uLWRvd24tb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9uYi1pY29uPlxcbiAgICAgIDxuYi1pY29uICpuZ0lmPVxcXCJpc0Rlc2NlbmRpbmcoKVxcXCIgaWNvbj1cXFwiY2hldnJvbi11cC1vdXRsaW5lXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIj48L25iLWljb24+XFxuICAgIDwvbmctY29udGFpbmVyPlxcbiAgXCJcbiAgICAgICAgfSlcbiAgICBdLCBOYlNvcnRJY29uQ29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJTb3J0SWNvbkNvbXBvbmVudDtcbn0oKSk7XG4vKipcbiAqIE1hcmtzIGhlYWRlciBhcyBzb3J0IGhlYWRlciBzbyBpdCBlbWl0dGluZyBzb3J0IGV2ZW50IHdoZW4gY2xpY2tlZC5cbiAqL1xudmFyIE5iU29ydEhlYWRlckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlNvcnRIZWFkZXJDb21wb25lbnQoc29ydCwgY29sdW1uRGVmKSB7XG4gICAgICAgIHRoaXMuc29ydCA9IHNvcnQ7XG4gICAgICAgIHRoaXMuY29sdW1uRGVmID0gY29sdW1uRGVmO1xuICAgICAgICB0aGlzLmRpc2FibGVkVmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iU29ydEhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkVmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlIHNvcnQgaGVhZGVyXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJTb3J0SGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZS5zb3J0SWZFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydERhdGEoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJTb3J0SGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZS5pc0FzY2VuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uID09PSBOYlNvcnREaXJlY3Rpb24uQVNDRU5ESU5HO1xuICAgIH07XG4gICAgTmJTb3J0SGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZS5pc0Rlc2NlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbiA9PT0gTmJTb3J0RGlyZWN0aW9uLkRFU0NFTkRJTkc7XG4gICAgfTtcbiAgICBOYlNvcnRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLnNvcnREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc29ydFJlcXVlc3QgPSB0aGlzLmNyZWF0ZVNvcnRSZXF1ZXN0KCk7XG4gICAgICAgIHRoaXMuc29ydC5lbWl0U29ydChzb3J0UmVxdWVzdCk7XG4gICAgfTtcbiAgICBOYlNvcnRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLmdldEljb25Db250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGltcGxpY2l0OiB0aGlzLmRpcmVjdGlvbixcbiAgICAgICAgICAgIGlzQXNjZW5kaW5nOiB0aGlzLmlzQXNjZW5kaW5nKCksXG4gICAgICAgICAgICBpc0Rlc2NlbmRpbmc6IHRoaXMuaXNEZXNjZW5kaW5nKCksXG4gICAgICAgICAgICBpc05vbmU6ICF0aGlzLmlzQXNjZW5kaW5nKCkgJiYgIXRoaXMuaXNEZXNjZW5kaW5nKCksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBOYlNvcnRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLmdldERpc2FibGVkQXR0cmlidXRlVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkID8gJycgOiBudWxsO1xuICAgIH07XG4gICAgTmJTb3J0SGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVTb3J0UmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLmdldE5leHREaXJlY3Rpb24oKTtcbiAgICAgICAgcmV0dXJuIHsgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiwgY29sdW1uOiB0aGlzLmNvbHVtbkRlZi5uYW1lIH07XG4gICAgfTtcbiAgICBOYlNvcnRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLmdldE5leHREaXJlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3J0RGlyZWN0aW9uQ3ljbGUgPSBzb3J0RGlyZWN0aW9ucztcbiAgICAgICAgdmFyIG5leHREaXJlY3Rpb25JbmRleCA9IHNvcnREaXJlY3Rpb25DeWNsZS5pbmRleE9mKHRoaXMuZGlyZWN0aW9uKSArIDE7XG4gICAgICAgIGlmIChuZXh0RGlyZWN0aW9uSW5kZXggPj0gc29ydERpcmVjdGlvbkN5Y2xlLmxlbmd0aCkge1xuICAgICAgICAgICAgbmV4dERpcmVjdGlvbkluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29ydERpcmVjdGlvbkN5Y2xlW25leHREaXJlY3Rpb25JbmRleF07XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29udGVudENoaWxkKE5iU29ydEhlYWRlckljb25EaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbiAgICBdLCBOYlNvcnRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcInNvcnRJY29uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYlNvcnRIZWFkZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlNvcnRIZWFkZXJDb21wb25lbnQucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MuZGlzYWJsZWQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG4gICAgXSwgTmJTb3J0SGVhZGVyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdExpc3RlbmVyKCdjbGljaycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iU29ydEhlYWRlckNvbXBvbmVudC5wcm90b3R5cGUsIFwic29ydElmRW5hYmxlZFwiLCBudWxsKTtcbiAgICBOYlNvcnRIZWFkZXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iU29ydEhlYWRlcl0nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxidXR0b25cXG4gICAgICBjbGFzcz1cXFwibmItdHJlZS1ncmlkLWhlYWRlci1jaGFuZ2Utc29ydC1idXR0b25cXFwiXFxuICAgICAgdHlwZT1cXFwiYnV0dG9uXFxcIlxcbiAgICAgIFthdHRyLmRpc2FibGVkXT1cXFwiZ2V0RGlzYWJsZWRBdHRyaWJ1dGVWYWx1ZSgpXFxcIlxcbiAgICAgIChjbGljayk9XFxcInNvcnREYXRhKClcXFwiPlxcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgPC9idXR0b24+XFxuICAgIDxuYi1zb3J0LWljb24gKm5nSWY9XFxcIiFzb3J0SWNvbjsgZWxzZSBjdXN0b21JY29uXFxcIiBbZGlyZWN0aW9uXT1cXFwiZGlyZWN0aW9uXFxcIj48L25iLXNvcnQtaWNvbj5cXG4gICAgPG5nLXRlbXBsYXRlICNjdXN0b21JY29uIFtuZ1RlbXBsYXRlT3V0bGV0XT1cXFwic29ydEljb25cXFwiIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XFxcImdldEljb25Db250ZXh0KClcXFwiPjwvbmctdGVtcGxhdGU+XFxuICBcIlxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSgxLCBJbmplY3QoTkJfU09SVF9IRUFERVJfQ09MVU1OX0RFRikpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iU29ydERpcmVjdGl2ZSwgT2JqZWN0XSlcbiAgICBdLCBOYlNvcnRIZWFkZXJDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlNvcnRIZWFkZXJDb21wb25lbnQ7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU2VydmljZSB1c2VkIHRvIHNvcnQgdHJlZSBncmlkIGRhdGEuIFVzZXMgQXJyYXkucHJvdG90eXBlLnNvcnQgbWV0aG9kLlxuICogSWYgeW91IG5lZWQgY3VzdG9tIHNvcnRpbmcsIHlvdSBjYW4gZXh0ZW5kIHRoaXMgc2VydmljZSBhbmQgb3ZlcnJpZGUgY29tcGFyYXRvciBvciB3aG9sZSBzb3J0IG1ldGhvZC5cbiAqL1xudmFyIE5iVHJlZUdyaWRTb3J0U2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkU29ydFNlcnZpY2UoKSB7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRTb3J0U2VydmljZS5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIChyZXF1ZXN0LCBkYXRhKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvcnRlZCA9IGRhdGEuc29ydChmdW5jdGlvbiAobmEsIG5iKSB7IHJldHVybiBfdGhpcy5jb21wYXJhdG9yKHJlcXVlc3QsIG5hLCBuYik7IH0pO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFfMSA9IGRhdGE7IF9pIDwgZGF0YV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBkYXRhXzFbX2ldO1xuICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuID0gdGhpcy5zb3J0KHJlcXVlc3QsIG5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3J0ZWQ7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkU29ydFNlcnZpY2UucHJvdG90eXBlLmNvbXBhcmF0b3IgPSBmdW5jdGlvbiAocmVxdWVzdCwgbmEsIG5iKSB7XG4gICAgICAgIHZhciBrZXkgPSByZXF1ZXN0LmNvbHVtbjtcbiAgICAgICAgdmFyIGRpciA9IHJlcXVlc3QuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgYSA9IG5hLmRhdGFba2V5XTtcbiAgICAgICAgdmFyIGIgPSBuYi5kYXRhW2tleV07XG4gICAgICAgIHZhciByZXMgPSAwO1xuICAgICAgICBpZiAoYSA+IGIpIHtcbiAgICAgICAgICAgIHJlcyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEgPCBiKSB7XG4gICAgICAgICAgICByZXMgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlyID09PSBOYlNvcnREaXJlY3Rpb24uQVNDRU5ESU5HID8gcmVzIDogcmVzICogLTE7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkU29ydFNlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpXG4gICAgXSwgTmJUcmVlR3JpZFNvcnRTZXJ2aWNlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZFNvcnRTZXJ2aWNlO1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJUcmVlR3JpZFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJUcmVlR3JpZFNlcnZpY2UoKSB7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiAoZGF0YSwgcm93LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5maW5kKGRhdGEsIHJvdyk7XG4gICAgICAgIG5vZGUuZXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICBpZiAob3B0aW9ucy5kZWVwICYmIG5vZGUuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7IHJldHVybiBfdGhpcy5leHBhbmQoZGF0YSwgbi5kYXRhLCBvcHRpb25zKTsgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iVHJlZUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uIChkYXRhLCByb3csIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmZpbmQoZGF0YSwgcm93KTtcbiAgICAgICAgbm9kZS5leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAob3B0aW9ucy5kZWVwICYmIG5vZGUuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7IHJldHVybiBfdGhpcy5jb2xsYXBzZShkYXRhLCBuLmRhdGEsIG9wdGlvbnMpOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJUcmVlR3JpZFNlcnZpY2UucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChkYXRhLCByb3csIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmZpbmQoZGF0YSwgcm93KTtcbiAgICAgICAgaWYgKG5vZGUuZXhwYW5kZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoZGF0YSwgcm93LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kKGRhdGEsIHJvdywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5iVHJlZUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGRhdGEsIHJvdykge1xuICAgICAgICB2YXIgdG9DaGVjayA9IF9fc3ByZWFkQXJyYXlzKGRhdGEpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRvQ2hlY2tfMSA9IHRvQ2hlY2s7IF9pIDwgdG9DaGVja18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0b0NoZWNrXzFbX2ldO1xuICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gcm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNDaGlsZHJlbigpKSB7XG4gICAgICAgICAgICAgICAgdG9DaGVjay5wdXNoLmFwcGx5KHRvQ2hlY2ssIG5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBJbmplY3RhYmxlKClcbiAgICBdLCBOYlRyZWVHcmlkU2VydmljZSk7XG4gICAgcmV0dXJuIE5iVHJlZUdyaWRTZXJ2aWNlO1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJUcmVlR3JpZERhdGFTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iVHJlZUdyaWREYXRhU291cmNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWREYXRhU291cmNlKHNvcnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlLCB0cmVlR3JpZFNlcnZpY2UsIHRyZWVHcmlkRGF0YVNlcnZpY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc29ydFNlcnZpY2UgPSBzb3J0U2VydmljZTtcbiAgICAgICAgX3RoaXMuZmlsdGVyU2VydmljZSA9IGZpbHRlclNlcnZpY2U7XG4gICAgICAgIF90aGlzLnRyZWVHcmlkU2VydmljZSA9IHRyZWVHcmlkU2VydmljZTtcbiAgICAgICAgX3RoaXMudHJlZUdyaWREYXRhU2VydmljZSA9IHRyZWVHcmlkRGF0YVNlcnZpY2U7XG4gICAgICAgIC8qKiBTdHJlYW0gZW1pdHRpbmcgcmVuZGVyIGRhdGEgdG8gdGhlIHRhYmxlIChkZXBlbmRzIG9uIG9yZGVyZWQgZGF0YSBjaGFuZ2VzKS4gKi9cbiAgICAgICAgX3RoaXMucmVuZGVyRGF0YSA9IG5ldyBCZWhhdmlvclN1YmplY3QoW10pO1xuICAgICAgICBfdGhpcy5maWx0ZXJSZXF1ZXN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdCgnJyk7XG4gICAgICAgIF90aGlzLnNvcnRSZXF1ZXN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBOYlRyZWVHcmlkRGF0YVNvdXJjZS5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uIChkYXRhLCBjdXN0b21HZXR0ZXJzKSB7XG4gICAgICAgIHZhciBwcmVzZW50YXRpb25EYXRhID0gW107XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBwcmVzZW50YXRpb25EYXRhID0gdGhpcy50cmVlR3JpZERhdGFTZXJ2aWNlLnRvUHJlc2VudGF0aW9uTm9kZXMoZGF0YSwgY3VzdG9tR2V0dGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IEJlaGF2aW9yU3ViamVjdChwcmVzZW50YXRpb25EYXRhKTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGFuZ2VTdWJzY3JpcHRpb24oKTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWREYXRhU291cmNlLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25WaWV3ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRGF0YTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWREYXRhU291cmNlLnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25WaWV3ZXIpIHtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWREYXRhU291cmNlLnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgIHRoaXMudHJlZUdyaWRTZXJ2aWNlLmV4cGFuZCh0aGlzLmRhdGEudmFsdWUsIHJvdyk7XG4gICAgICAgIHRoaXMuZGF0YS5uZXh0KHRoaXMuZGF0YS52YWx1ZSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRGF0YVNvdXJjZS5wcm90b3R5cGUuY29sbGFwc2UgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgIHRoaXMudHJlZUdyaWRTZXJ2aWNlLmNvbGxhcHNlKHRoaXMuZGF0YS52YWx1ZSwgcm93KTtcbiAgICAgICAgdGhpcy5kYXRhLm5leHQodGhpcy5kYXRhLnZhbHVlKTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWREYXRhU291cmNlLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAocm93LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMudHJlZUdyaWRTZXJ2aWNlLnRvZ2dsZSh0aGlzLmRhdGEudmFsdWUsIHJvdywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZGF0YS5uZXh0KHRoaXMuZGF0YS52YWx1ZSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRGF0YVNvdXJjZS5wcm90b3R5cGUudG9nZ2xlQnlJbmRleCA9IGZ1bmN0aW9uIChkYXRhSW5kZXgsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnJlbmRlckRhdGEudmFsdWUgJiYgdGhpcy5yZW5kZXJEYXRhLnZhbHVlW2RhdGFJbmRleF07XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZShub2RlLmRhdGEsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0TGV2ZWwgPSBmdW5jdGlvbiAocm93SW5kZXgpIHtcbiAgICAgICAgdmFyIHJvdyA9IHRoaXMucmVuZGVyRGF0YS52YWx1ZVtyb3dJbmRleF07XG4gICAgICAgIHJldHVybiByb3cgPyByb3cubGV2ZWwgOiBOQl9ERUZBVUxUX1JPV19MRVZFTDtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWREYXRhU291cmNlLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gKHNvcnRSZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMuc29ydFJlcXVlc3QubmV4dChzb3J0UmVxdWVzdCk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRGF0YVNvdXJjZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKHNlYXJjaFF1ZXJ5KSB7XG4gICAgICAgIHRoaXMuZmlsdGVyUmVxdWVzdC5uZXh0KHNlYXJjaFF1ZXJ5KTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWREYXRhU291cmNlLnByb3RvdHlwZS51cGRhdGVDaGFuZ2VTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhU3RyZWFtID0gdGhpcy5kYXRhO1xuICAgICAgICB2YXIgZmlsdGVyZWREYXRhID0gY29tYmluZUxhdGVzdChkYXRhU3RyZWFtLCB0aGlzLmZpbHRlclJlcXVlc3QpXG4gICAgICAgICAgICAucGlwZShtYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IF9hWzBdO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRyZWVHcmlkRGF0YVNlcnZpY2UuY29weShkYXRhKTtcbiAgICAgICAgfSksIG1hcChmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMuZmlsdGVyRGF0YShkYXRhKTsgfSkpO1xuICAgICAgICB2YXIgc29ydGVkRGF0YSA9IGNvbWJpbmVMYXRlc3QoZmlsdGVyZWREYXRhLCB0aGlzLnNvcnRSZXF1ZXN0KVxuICAgICAgICAgICAgLnBpcGUobWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBfYVswXTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zb3J0RGF0YShkYXRhKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBzb3J0ZWREYXRhXG4gICAgICAgICAgICAucGlwZShtYXAoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF90aGlzLnRyZWVHcmlkRGF0YVNlcnZpY2UuZmxhdHRlbkV4cGFuZGVkKGRhdGEpOyB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIF90aGlzLnJlbmRlckRhdGEubmV4dChkYXRhKTsgfSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRGF0YVNvdXJjZS5wcm90b3R5cGUuZmlsdGVyRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlclNlcnZpY2UuZmlsdGVyKHRoaXMuZmlsdGVyUmVxdWVzdC52YWx1ZSwgZGF0YSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkRGF0YVNvdXJjZS5wcm90b3R5cGUuc29ydERhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0U2VydmljZS5zb3J0KHRoaXMuc29ydFJlcXVlc3QudmFsdWUsIGRhdGEpO1xuICAgIH07XG4gICAgcmV0dXJuIE5iVHJlZUdyaWREYXRhU291cmNlO1xufShOYkRhdGFTb3VyY2UpKTtcbnZhciBOYlRyZWVHcmlkRGF0YVNvdXJjZUJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJUcmVlR3JpZERhdGFTb3VyY2VCdWlsZGVyKGZpbHRlclNlcnZpY2UsIHNvcnRTZXJ2aWNlLCB0cmVlR3JpZFNlcnZpY2UsIHRyZWVHcmlkRGF0YVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5maWx0ZXJTZXJ2aWNlID0gZmlsdGVyU2VydmljZTtcbiAgICAgICAgdGhpcy5zb3J0U2VydmljZSA9IHNvcnRTZXJ2aWNlO1xuICAgICAgICB0aGlzLnRyZWVHcmlkU2VydmljZSA9IHRyZWVHcmlkU2VydmljZTtcbiAgICAgICAgdGhpcy50cmVlR3JpZERhdGFTZXJ2aWNlID0gdHJlZUdyaWREYXRhU2VydmljZTtcbiAgICB9XG4gICAgTmJUcmVlR3JpZERhdGFTb3VyY2VCdWlsZGVyLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoZGF0YSwgY3VzdG9tR2V0dGVycykge1xuICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IG5ldyBOYlRyZWVHcmlkRGF0YVNvdXJjZSh0aGlzLnNvcnRTZXJ2aWNlLCB0aGlzLmZpbHRlclNlcnZpY2UsIHRoaXMudHJlZUdyaWRTZXJ2aWNlLCB0aGlzLnRyZWVHcmlkRGF0YVNlcnZpY2UpO1xuICAgICAgICBkYXRhU291cmNlLnNldERhdGEoZGF0YSwgY3VzdG9tR2V0dGVycyk7XG4gICAgICAgIHJldHVybiBkYXRhU291cmNlO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZERhdGFTb3VyY2VCdWlsZGVyID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYlRyZWVHcmlkRmlsdGVyU2VydmljZSxcbiAgICAgICAgICAgIE5iVHJlZUdyaWRTb3J0U2VydmljZSxcbiAgICAgICAgICAgIE5iVHJlZUdyaWRTZXJ2aWNlLFxuICAgICAgICAgICAgTmJUcmVlR3JpZERhdGFTZXJ2aWNlXSlcbiAgICBdLCBOYlRyZWVHcmlkRGF0YVNvdXJjZUJ1aWxkZXIpO1xuICAgIHJldHVybiBOYlRyZWVHcmlkRGF0YVNvdXJjZUJ1aWxkZXI7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOQl9UUkVFX0dSSUQgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05CX1RSRUVfR1JJRCcpO1xuXG52YXIgTmJDb2x1bW5zU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYkNvbHVtbnNTZXJ2aWNlKGRpZmZlcnMpIHtcbiAgICAgICAgdGhpcy5kaWZmZXJzID0gZGlmZmVycztcbiAgICAgICAgdGhpcy5jb2x1bW5IaWRlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuY29sdW1uU2hvdyQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICBOYkNvbHVtbnNTZXJ2aWNlLnByb3RvdHlwZS5zZXRDb2x1bW5zID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNoYW5nZXNEaWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlc0RpZmZlciA9IHRoaXMuZGlmZmVycy5maW5kKGNvbHVtbnMgfHwgW10pLmNyZWF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXNEaWZmZXIuZGlmZihjb2x1bW5zKSkge1xuICAgICAgICAgICAgdGhpcy5hbGxDb2x1bW5zID0gQXJyYXkuZnJvbShjb2x1bW5zKTtcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZUNvbHVtbnMgPSBBcnJheS5mcm9tKGNvbHVtbnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNvbHVtbnNTZXJ2aWNlLnByb3RvdHlwZS5nZXRWaXNpYmxlQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZUNvbHVtbnM7XG4gICAgfTtcbiAgICBOYkNvbHVtbnNTZXJ2aWNlLnByb3RvdHlwZS5oaWRlQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICB2YXIgdG9SZW1vdmUgPSB0aGlzLnZpc2libGVDb2x1bW5zLmluZGV4T2YoY29sdW1uKTtcbiAgICAgICAgaWYgKHRvUmVtb3ZlID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZUNvbHVtbnMuc3BsaWNlKHRvUmVtb3ZlLCAxKTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uSGlkZSQubmV4dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYkNvbHVtbnNTZXJ2aWNlLnByb3RvdHlwZS5zaG93Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICBpZiAodGhpcy52aXNpYmxlQ29sdW1ucy5pbmNsdWRlcyhjb2x1bW4pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpYmxlQ29sdW1ucy5zcGxpY2UodGhpcy5maW5kSW5zZXJ0SW5kZXgoY29sdW1uKSwgMCwgY29sdW1uKTtcbiAgICAgICAgdGhpcy5jb2x1bW5TaG93JC5uZXh0KCk7XG4gICAgfTtcbiAgICBOYkNvbHVtbnNTZXJ2aWNlLnByb3RvdHlwZS5vbkNvbHVtbnNDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtZXJnZSh0aGlzLmNvbHVtblNob3ckLCB0aGlzLmNvbHVtbkhpZGUkKTtcbiAgICB9O1xuICAgIE5iQ29sdW1uc1NlcnZpY2UucHJvdG90eXBlLmZpbmRJbnNlcnRJbmRleCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgdmFyIGluaXRpYWxJbmRleCA9IHRoaXMuYWxsQ29sdW1ucy5pbmRleE9mKGNvbHVtbik7XG4gICAgICAgIGlmIChpbml0aWFsSW5kZXggPT09IDAgfHwgIXRoaXMudmlzaWJsZUNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5pdGlhbEluZGV4ID09PSB0aGlzLmFsbENvbHVtbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZUNvbHVtbnMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZWZ0U2libGluZ0luZGV4ID0gaW5pdGlhbEluZGV4IC0gMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IGxlZnRTaWJsaW5nSW5kZXg7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgbGVmdFNpYmxpbmcgPSB0aGlzLmFsbENvbHVtbnNbaV07XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnZpc2libGVDb2x1bW5zLmluZGV4T2YobGVmdFNpYmxpbmcpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJpZ2h0U2libGluZ0luZGV4ID0gaW5pdGlhbEluZGV4ICsgMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHJpZ2h0U2libGluZ0luZGV4OyBpIDwgdGhpcy5hbGxDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcmlnaHRTaWJsaW5nID0gdGhpcy5hbGxDb2x1bW5zW2ldO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy52aXNpYmxlQ29sdW1ucy5pbmRleE9mKHJpZ2h0U2libGluZyk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHJlc3RvcmUgY29sdW1uIHBvc2l0aW9uLlwiKTtcbiAgICB9O1xuICAgIE5iQ29sdW1uc1NlcnZpY2UgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0l0ZXJhYmxlRGlmZmVyc10pXG4gICAgXSwgTmJDb2x1bW5zU2VydmljZSk7XG4gICAgcmV0dXJuIE5iQ29sdW1uc1NlcnZpY2U7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVHJlZSBncmlkIGNvbXBvbmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGRpc3BsYXkgbmVzdGVkIHJvd3Mgb2YgZGF0YS5cbiAqIFN1cHBvcnRzIGZpbHRlcmluZyBhbmQgc29ydGluZy5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIHRyZWUtZ3JpZC90cmVlLWdyaWQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iVHJlZUdyaWRNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iVHJlZUdyaWRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBBcyB0aGUgbW9zdCBiYXNpYyB1c2FnZSB5b3UgbmVlZCB0byBkZWZpbmUgW25iVHJlZUdyaWRSb3dEZWZdKGRvY3MvY29tcG9uZW50cy90cmVlZ3JpZC9hcGkjbmJ0cmVlZ3JpZHJvd2RlZmRpcmVjdGl2ZSlcbiAqIHdoZXJlIHlvdSBzaG91bGQgcGFzcyBjb2x1bW5zIHRvIGRpc3BsYXkgaW4gcm93cyBhbmRcbiAqIFtuYlRyZWVHcmlkQ29sdW1uRGVmXShkb2NzL2NvbXBvbmVudHMvdHJlZWdyaWQvYXBpI25idHJlZWdyaWRjb2x1bW5kZWZkaXJlY3RpdmUpIC0gY29tcG9uZW50IGNvbnRhaW5pbmcgY2VsbFxuICogZGVmaW5pdGlvbnMgZm9yIGVhY2ggY29sdW1uIHBhc3NlZCB0byByb3cgZGVmaW5pdGlvbi5cbiAqIEBzdGFja2VkLWV4YW1wbGUoQmFzaWMsIHRyZWUtZ3JpZC90cmVlLWdyaWQtYmFzaWMuY29tcG9uZW50KVxuICpcbiAqIGBOYlRyZWVHcmlkQ29tcG9uZW50YCdzIHNvdXJjZSBpbnB1dCBhbmQgYE5iVHJlZUdyaWREYXRhU291cmNlQnVpbGRlci5jcmVhdGVgIGV4cGVjdGluZyBkYXRhIHRvIGJlIGFuIGFycmF5IG9mXG4gKiBvYmplY3RzIHdpdGggYGRhdGFgLCBgY2hpbGRyZW5gIGFuZCBgZXhwYW5kZWRgIHByb3BlcnRpZXMuIElmIHlvdXIgZGF0YSBkb2Vzbid0IG1hdGNoIHRoaXMgaW50ZXJmYWNlLCB5b3UgY2FuIHBhc3NcbiAqIGdldHRlciBmdW5jdGlvbnMgZm9yIGVhY2ggcHJvcGVydHkgYXMgYXJndW1lbnRzIHRvIGBOYlRyZWVHcmlkRGF0YVNvdXJjZUJ1aWxkZXIuY3JlYXRlYCBtZXRob2QuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEN1c3RvbSBub2RlIHN0cnVjdHVyZSwgdHJlZS1ncmlkL3RyZWUtZ3JpZC1jdXN0b20tbm9kZS1zdHJ1Y3R1cmUuY29tcG9uZW50KVxuICpcbiAqIFRvIHVzZSBzb3J0aW5nIHlvdSBjYW4gYWRkIGBuYlNvcnRgIGRpcmVjdGl2ZSB0byB0YWJsZSBhbmQgc3Vic2NyaWJlIHRvIGBzb3J0YCBtZXRob2QuIFdoZW4gdXNlciBjbGljayBvbiBoZWFkZXIsXG4gKiBzb3J0IGV2ZW50IHdpbGwgYmUgZW1pdHRlZC4gRXZlbnQgb2JqZWN0IGNvbnRhaW4gY2xpY2tlZCBjb2x1bW4gbmFtZSBhbmQgZGVzaXJlZCBzb3J0IGRpcmVjdGlvbi5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU29ydGFibGUsIHRyZWUtZ3JpZC90cmVlLWdyaWQtc29ydGFibGUuY29tcG9uZW50KVxuICpcbiAqIFlvdSBjYW4gdXNlIGBEYXRhIFNvdXJjZSBCdWlsZGVyYCB0byBjcmVhdGUgYE5iVHJlZUdyaWREYXRhU291cmNlYCB3aGljaCB3b3VsZCBoYXZlIHRvZ2dsZSwgc29ydCBhbmRcbiAqIGZpbHRlciBtZXRob2RzLiBUaGVuIHlvdSBjYW4gY2FsbCB0aGlzIG1ldGhvZHMgdG8gY2hhbmdlIHNvcnQgb3IgdG9nZ2xlIHJvd3MgcHJvZ3JhbW1hdGljYWxseS4gQWxzbyBgbmJTb3J0YCBhbmRcbiAqIGBuYkZpbHRlcklucHV0YCBkaXJlY3RpdmVzIGJvdGggc3VwcG9ydCBgTmJUcmVlR3JpZERhdGFTb3VyY2VgLCBzbyB5b3UgY2FuIHBhc3MgaXQgZGlyZWN0bHkgYXMgYW4gaW5wdXQgYW5kXG4gKiBkaXJlY3RpdmVzIHdpbGwgdHJpZ2dlciBzb3J0LCB0b2dnbGUgdGhlbXNlbHZlcy5cbiAqIEBzdGFja2VkLWV4YW1wbGUoRGF0YSBTb3VyY2UgQnVpbGRlciwgdHJlZS1ncmlkL3RyZWUtZ3JpZC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogWW91IGNhbiBjcmVhdGUgcmVzcG9uc2l2ZSBncmlkIGJ5IHNldHRpbmcgYGhpZGVPbmAgYW5kIGBzaG93T25gIGlucHV0cyBvZlxuICogW25iVHJlZUdyaWRDb2x1bW5EZWZdKGRvY3MvY29tcG9uZW50cy90cmVlLWdyaWQvYXBpI25idHJlZWdyaWRjb2x1bW5kZWZkaXJlY3RpdmUpIGRpcmVjdGl2ZS5cbiAqIFdoZW4gdmlld3BvcnQgcmVhY2hlcyBzcGVjaWZpZWQgd2lkdGggZ3JpZCBoaWRlcyBvciBzaG93cyBjb2x1bW5zLlxuICogQHN0YWNrZWQtZXhhbXBsZShSZXNwb25zaXZlIGNvbHVtbnMsIHRyZWUtZ3JpZC90cmVlLWdyaWQtcmVzcG9uc2l2ZS5jb21wb25lbnQpXG4gKlxuICogVG8gY3VzdG9taXplIHNvcnQgb3Igcm93IHRvZ2dsZSBpY29ucyB5b3UgY2FuIHVzZSBgbmJTb3J0SGVhZGVySWNvbmAgYW5kIGBuYlRyZWVHcmlkUm93VG9nZ2xlYCBkaXJlY3RpdmVzXG4gKiByZXNwZWN0aXZlbHkuIGBuYlNvcnRIZWFkZXJJY29uYCBpcyBhIHN0cnVjdHVyYWwgZGlyZWN0aXZlIGFuZCBpdCdzIGltcGxpY2l0IGNvbnRleHQgc2V0IHRvIGN1cnJlbnQgZGlyZWN0aW9uLlxuICogQWxzbyBjb250ZXh0IGhhcyB0aHJlZSBwcm9wZXJ0aWVzOiBgaXNBc2NlbmRpbmdgLCBgaXNEZXNjZW5kaW5nYCBhbmQgYGlzTm9uZWAuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEN1c3RvbSBpY29ucywgdHJlZS1ncmlkL3RyZWUtZ3JpZC1jdXN0b20taWNvbnMuY29tcG9uZW50KVxuICpcbiAqIEJ5IGRlZmF1bHQsIHJvdyB0byB0b2dnbGUgaGFwcGVucyB3aGVuIHVzZXIgY2xpY2tzIGFueXdoZXJlIGluIHRoZSByb3cuIEFsc28gZG91YmxlIGNsaWNrIGV4cGFuZHMgcm93IGRlZXBseS5cbiAqIFRvIGRpc2FibGUgdGhpcyB5b3UgY2FuIHNldCBgW2NsaWNrVG9Ub2dnbGVdPVwiZmFsc2VcImAgaW5wdXQgb2YgYG5iVHJlZUdyaWRSb3dgLlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlIGNsaWNrIHRvZ2dsZSwgdHJlZS1ncmlkL3RyZWUtZ3JpZC1kaXNhYmxlLWNsaWNrLXRvZ2dsZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHRyZWUtZ3JpZC1jZWxsLWJvcmRlci13aWR0aDpcbiAqIHRyZWUtZ3JpZC1jZWxsLWJvcmRlci1zdHlsZTpcbiAqIHRyZWUtZ3JpZC1jZWxsLWJvcmRlci1jb2xvcjpcbiAqIHRyZWUtZ3JpZC1yb3ctbWluLWhlaWdodDpcbiAqIHRyZWUtZ3JpZC1jZWxsLXBhZGRpbmc6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLXRleHQtY29sb3I6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLXRleHQtZm9udC1zaXplOlxuICogdHJlZS1ncmlkLWhlYWRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdHJlZS1ncmlkLWhlYWRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdHJlZS1ncmlkLWZvb3Rlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdHJlZS1ncmlkLWZvb3Rlci10ZXh0LWNvbG9yOlxuICogdHJlZS1ncmlkLWZvb3Rlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogdHJlZS1ncmlkLWZvb3Rlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRyZWUtZ3JpZC1mb290ZXItdGV4dC1mb250LXdlaWdodDpcbiAqIHRyZWUtZ3JpZC1mb290ZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIHRyZWUtZ3JpZC1yb3ctYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRyZWUtZ3JpZC1yb3ctZXZlbi1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdHJlZS1ncmlkLXJvdy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdHJlZS1ncmlkLXJvdy10ZXh0LWNvbG9yOlxuICogdHJlZS1ncmlkLXJvdy10ZXh0LWZvbnQtZmFtaWx5OlxuICogdHJlZS1ncmlkLXJvdy10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRyZWUtZ3JpZC1yb3ctdGV4dC1mb250LXdlaWdodDpcbiAqIHRyZWUtZ3JpZC1yb3ctdGV4dC1saW5lLWhlaWdodDpcbiAqIHRyZWUtZ3JpZC1zb3J0LWhlYWRlci1idXR0b24tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRyZWUtZ3JpZC1zb3J0LWhlYWRlci1idXR0b24tYm9yZGVyOlxuICogdHJlZS1ncmlkLXNvcnQtaGVhZGVyLWJ1dHRvbi1wYWRkaW5nOlxuICovXG52YXIgTmJUcmVlR3JpZENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJUcmVlR3JpZENvbXBvbmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkQ29tcG9uZW50KGRhdGFTb3VyY2VCdWlsZGVyLCBkaWZmZXJzLCBjaGFuZ2VEZXRlY3RvclJlZiwgZWxlbWVudFJlZiwgcm9sZSwgZGlyLCBkb2N1bWVudCwgcGxhdGZvcm0sIHdpbmRvdykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkaWZmZXJzLCBjaGFuZ2VEZXRlY3RvclJlZiwgZWxlbWVudFJlZiwgcm9sZSwgZGlyLCBkb2N1bWVudCwgcGxhdGZvcm0pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRhdGFTb3VyY2VCdWlsZGVyID0gZGF0YVNvdXJjZUJ1aWxkZXI7XG4gICAgICAgIF90aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICAgICAgX3RoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICBfdGhpcy5sZXZlbFBhZGRpbmcgPSAnJztcbiAgICAgICAgX3RoaXMuZXF1YWxDb2x1bW5zV2lkdGhWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy50cmVlQ2xhc3MgPSB0cnVlO1xuICAgICAgICBfdGhpcy5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRDb21wb25lbnRfMSA9IE5iVHJlZUdyaWRDb21wb25lbnQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLCBcInNvdXJjZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGFibGUncyBkYXRhXG4gICAgICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICAgICAqIEB0eXBlIHs8VD5bXSB8IE5iVHJlZUdyaWREYXRhU291cmNlfVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBOYlRyZWVHcmlkRGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZSA9IGRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2UgPSB0aGlzLmRhdGFTb3VyY2VCdWlsZGVyLmNyZWF0ZShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IHRoaXMuX3NvdXJjZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLCBcImVxdWFsQ29sdW1uc1dpZHRoXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcXVhbENvbHVtbnNXaWR0aFZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFrZSBhbGwgY29sdW1ucyBlcXVhbCB3aWR0aC4gRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmVxdWFsQ29sdW1uc1dpZHRoVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYlRyZWVHcmlkQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuY2hlY2tEZWZzQ291bnQoKTtcbiAgICAgICAgdmFyIHJvd3NDaGFuZ2UkID0gbWVyZ2UodGhpcy5fY29udGVudFJvd0RlZnMuY2hhbmdlcywgdGhpcy5fY29udGVudEhlYWRlclJvd0RlZnMuY2hhbmdlcywgdGhpcy5fY29udGVudEZvb3RlclJvd0RlZnMuY2hhbmdlcyk7XG4gICAgICAgIHJvd3NDaGFuZ2UkLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5jaGVja0RlZnNDb3VudCgpOyB9KTtcbiAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0uaXNCcm93c2VyKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgd2luZG93UmVzaXplJCA9IGZyb21FdmVudCh0aGlzLndpbmRvdywgJ3Jlc2l6ZScpLnBpcGUoZGVib3VuY2VUaW1lKDUwKSk7XG4gICAgICAgICAgICBtZXJnZShyb3dzQ2hhbmdlJCwgdGhpcy5fY29udGVudENvbHVtbkRlZnMuY2hhbmdlcywgd2luZG93UmVzaXplJClcbiAgICAgICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy51cGRhdGVWaXNpYmxlQ29sdW1ucygpOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJUcmVlR3JpZENvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUubmdPbkRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZVJvdyA9IGZ1bmN0aW9uIChyb3csIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmdldFJvd0NvbnRleHQocm93KTtcbiAgICAgICAgdGhpcy5fc291cmNlLnRvZ2dsZShjb250ZXh0LiRpbXBsaWNpdC5kYXRhLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZUNlbGxSb3cgPSBmdW5jdGlvbiAoY2VsbCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuZ2V0Q2VsbENvbnRleHQoY2VsbCk7XG4gICAgICAgIHRoaXMuX3NvdXJjZS50b2dnbGUoY29udGV4dC4kaW1wbGljaXQuZGF0YSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkQ29tcG9uZW50LnByb3RvdHlwZS5nZXRDb2x1bW5XaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZXF1YWxDb2x1bW5zV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiAxMDAgLyB0aGlzLmdldENvbHVtbnNDb3VudCgpICsgXCIlXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZENvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q2VsbExldmVsID0gZnVuY3Rpb24gKGNlbGwsIGNvbHVtbk5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNGaXJzdENvbHVtbihjb2x1bW5OYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2VsbENvbnRleHQoY2VsbCkuJGltcGxpY2l0LmxldmVsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOQl9ERUZBVUxUX1JPV19MRVZFTDtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLmdldFJvd0NvbnRleHQgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbnRleHRCeVJvd0VsKHJvdy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZENvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q2VsbENvbnRleHQgPSBmdW5jdGlvbiAoY2VsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb250ZXh0QnlDZWxsRWwoY2VsbC5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZENvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q29udGV4dEJ5Q2VsbEVsID0gZnVuY3Rpb24gKGNlbGxFbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb250ZXh0QnlSb3dFbChjZWxsRWwucGFyZW50RWxlbWVudCk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkQ29tcG9uZW50LnByb3RvdHlwZS5nZXRDb250ZXh0QnlSb3dFbCA9IGZ1bmN0aW9uIChyb3dFbCkge1xuICAgICAgICB2YXIgcm93c0NvbnRhaW5lciA9IHRoaXMuX3Jvd091dGxldC52aWV3Q29udGFpbmVyO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd3NDb250YWluZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByb3dWaWV3UmVmID0gcm93c0NvbnRhaW5lci5nZXQoaSk7XG4gICAgICAgICAgICBpZiAocm93Vmlld1JlZi5yb290Tm9kZXMuaW5jbHVkZXMocm93RWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvd1ZpZXdSZWYuY29udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJUcmVlR3JpZENvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbHVtbnMgPSAodGhpcy5fY29udGVudEhlYWRlclJvd0RlZnMubGVuZ3RoXG4gICAgICAgICAgICA/IHRoaXMuX2NvbnRlbnRIZWFkZXJSb3dEZWZzLmZpcnN0XG4gICAgICAgICAgICA6IHRoaXMuX2NvbnRlbnRSb3dEZWZzLmZpcnN0KS5jb2x1bW5zO1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShjb2x1bW5zIHx8IFtdKTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLmdldENvbHVtbnNDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1ucygpLmxlbmd0aDtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLmlzRmlyc3RDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5zKClbMF0gPT09IGNvbHVtbk5hbWU7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkQ29tcG9uZW50LnByb3RvdHlwZS5jaGVja0RlZnNDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRSb3dEZWZzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvdW5kIG11bHRpcGxlIHJvdyBkZWZpbml0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY29udGVudEhlYWRlclJvd0RlZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm91bmQgbXVsdGlwbGUgaGVhZGVyIHJvdyBkZWZpbml0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY29udGVudEZvb3RlclJvd0RlZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm91bmQgbXVsdGlwbGUgZm9vdGVyIHJvdyBkZWZpbml0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJUcmVlR3JpZENvbXBvbmVudC5wcm90b3R5cGUudXBkYXRlVmlzaWJsZUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHRoaXMud2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHZhciBjb2x1bW5EZWZzID0gdGhpcy5fY29udGVudENvbHVtbkRlZnM7XG4gICAgICAgIHZhciBjb2x1bW5zVG9IaWRlID0gY29sdW1uRGVmc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY29sKSB7IHJldHVybiBjb2wuc2hvdWxkSGlkZSh3aWR0aCk7IH0pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjb2wpIHsgcmV0dXJuIGNvbC5uYW1lOyB9KTtcbiAgICAgICAgdmFyIGNvbHVtbnNUb1Nob3cgPSBjb2x1bW5EZWZzXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChjb2wpIHsgcmV0dXJuIGNvbC5zaG91bGRTaG93KHdpZHRoKTsgfSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGNvbCkgeyByZXR1cm4gY29sLm5hbWU7IH0pO1xuICAgICAgICBpZiAoIWNvbHVtbnNUb0hpZGUubGVuZ3RoICYmICFjb2x1bW5zVG9TaG93Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3dEZWZzID0gW1xuICAgICAgICAgICAgdGhpcy5fY29udGVudEhlYWRlclJvd0RlZnMuZmlyc3QsXG4gICAgICAgICAgICB0aGlzLl9jb250ZW50Um93RGVmcy5maXJzdCxcbiAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRGb290ZXJSb3dEZWZzLmZpcnN0LFxuICAgICAgICBdLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gISFkOyB9KTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dEZWZzXzEgPSByb3dEZWZzOyBfaSA8IHJvd0RlZnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciByb3dEZWYgPSByb3dEZWZzXzFbX2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBjb2x1bW5zVG9IaWRlXzEgPSBjb2x1bW5zVG9IaWRlOyBfYSA8IGNvbHVtbnNUb0hpZGVfMS5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1RvSGlkZV8xW19hXTtcbiAgICAgICAgICAgICAgICByb3dEZWYuaGlkZUNvbHVtbihjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBjb2x1bW5zVG9TaG93XzEgPSBjb2x1bW5zVG9TaG93OyBfYiA8IGNvbHVtbnNUb1Nob3dfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1RvU2hvd18xW19iXTtcbiAgICAgICAgICAgICAgICByb3dEZWYuc2hvd0NvbHVtbihjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgTmJUcmVlR3JpZENvbXBvbmVudF8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJUcmVlR3JpZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLCBcInNvdXJjZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbiAgICBdLCBOYlRyZWVHcmlkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsZXZlbFBhZGRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iVHJlZUdyaWRDb21wb25lbnQucHJvdG90eXBlLCBcImVxdWFsQ29sdW1uc1dpZHRoXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MubmItdHJlZS1ncmlkJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJUcmVlR3JpZENvbXBvbmVudC5wcm90b3R5cGUsIFwidHJlZUNsYXNzXCIsIHZvaWQgMCk7XG4gICAgTmJUcmVlR3JpZENvbXBvbmVudCA9IE5iVHJlZUdyaWRDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wb25lbnQoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICd0YWJsZVtuYlRyZWVHcmlkXScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogTkJfVEFCTEVfVEVNUExBVEUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1RSRUVfR1JJRCwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRDb21wb25lbnRfMSB9LFxuICAgICAgICAgICAgICAgIE5iQ29sdW1uc1NlcnZpY2UsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHt0YWJsZS1sYXlvdXQ6Zml4ZWQ7Ym9yZGVyLXNwYWNpbmc6MDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7d2lkdGg6MTAwJTttYXgtd2lkdGg6MTAwJTtvdmVyZmxvdzphdXRvfTo6bmctZGVlcCAubmItdHJlZS1ncmlkLWNlbGwsOjpuZy1kZWVwIC5uYi10cmVlLWdyaWQtaGVhZGVyLWNlbGwsOjpuZy1kZWVwIC5uYi10cmVlLWdyaWQtZm9vdGVyLWNlbGx7b3ZlcmZsb3c6aGlkZGVufVxcblwiXVxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSg0LCBBdHRyaWJ1dGUoJ3JvbGUnKSksXG4gICAgICAgIF9fcGFyYW0oNiwgSW5qZWN0KE5CX0RPQ1VNRU5UKSksXG4gICAgICAgIF9fcGFyYW0oOCwgSW5qZWN0KE5CX1dJTkRPVykpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iVHJlZUdyaWREYXRhU291cmNlQnVpbGRlcixcbiAgICAgICAgICAgIEl0ZXJhYmxlRGlmZmVycyxcbiAgICAgICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICAgICAgRWxlbWVudFJlZiwgU3RyaW5nLCBOYkRpcmVjdGlvbmFsaXR5LCBPYmplY3QsIE5iUGxhdGZvcm0sIE9iamVjdF0pXG4gICAgXSwgTmJUcmVlR3JpZENvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iVHJlZUdyaWRDb21wb25lbnQ7XG59KE5iVGFibGUpKTtcblxudmFyIE5iQ2RrUm93RGVmID0gQ2RrUm93RGVmO1xudmFyIE5iQ2RrUm93ID0gQ2RrUm93O1xudmFyIE5iQ2RrQ2VsbERlZiA9IENka0NlbGxEZWY7XG52YXIgTmJDZGtIZWFkZXJSb3dEZWYgPSBDZGtIZWFkZXJSb3dEZWY7XG52YXIgTmJDZGtIZWFkZXJSb3cgPSBDZGtIZWFkZXJSb3c7XG52YXIgTmJDZGtIZWFkZXJDZWxsRGVmID0gQ2RrSGVhZGVyQ2VsbERlZjtcbnZhciBOYkNka0Zvb3RlclJvd0RlZiA9IENka0Zvb3RlclJvd0RlZjtcbnZhciBOYkNka0Zvb3RlclJvdyA9IENka0Zvb3RlclJvdztcbnZhciBOYkNka0Zvb3RlckNlbGxEZWYgPSBDZGtGb290ZXJDZWxsRGVmO1xudmFyIE5iQ2RrQ29sdW1uRGVmID0gQ2RrQ29sdW1uRGVmO1xudmFyIE5iQ2RrQ2VsbCA9IENka0NlbGw7XG52YXIgTmJDZGtIZWFkZXJDZWxsID0gQ2RrSGVhZGVyQ2VsbDtcbnZhciBOYkNka0Zvb3RlckNlbGwgPSBDZGtGb290ZXJDZWxsO1xuXG4vKipcbiAqIERhdGEgcm93IGRlZmluaXRpb24gZm9yIHRoZSB0cmVlLWdyaWQuXG4gKiBDYXB0dXJlcyB0aGUgaGVhZGVyIHJvdydzIHRlbXBsYXRlIGFuZCBjb2x1bW5zIHRvIGRpc3BsYXkuXG4gKi9cbnZhciBOYlRyZWVHcmlkUm93RGVmRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlRyZWVHcmlkUm93RGVmRGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmUodGVtcGxhdGUsIGRpZmZlcnMsIGNvbHVtbnNTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRlbXBsYXRlLCBkaWZmZXJzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5jb2x1bW5zU2VydmljZSA9IGNvbHVtbnNTZXJ2aWNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmVfMSA9IE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcImNvbHVtbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnNTZXJ2aWNlLmdldFZpc2libGVDb2x1bW5zKCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2x1bW5zIHRvIGJlIGRpc3BsYXllZCBvbiB0aGlzIHJvd1xuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc1NlcnZpY2Uuc2V0Q29sdW1ucyh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgTmJUcmVlR3JpZFJvd0RlZkRpcmVjdGl2ZS5wcm90b3R5cGUuaGlkZUNvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZS5oaWRlQ29sdW1uKGNvbHVtbik7XG4gICAgfTtcbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmUucHJvdG90eXBlLnNob3dDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgIHRoaXMuY29sdW1uc1NlcnZpY2Uuc2hvd0NvbHVtbihjb2x1bW4pO1xuICAgIH07XG4gICAgdmFyIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmVfMTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iVHJlZUdyaWRSb3dEZWZDb2x1bW5zJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG4gICAgXSwgTmJUcmVlR3JpZFJvd0RlZkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCBudWxsKTtcbiAgICBOYlRyZWVHcmlkUm93RGVmRGlyZWN0aXZlID0gTmJUcmVlR3JpZFJvd0RlZkRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlRyZWVHcmlkUm93RGVmXScsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5iQ2RrUm93RGVmLCB1c2VFeGlzdGluZzogTmJUcmVlR3JpZFJvd0RlZkRpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZixcbiAgICAgICAgICAgIEl0ZXJhYmxlRGlmZmVycyxcbiAgICAgICAgICAgIE5iQ29sdW1uc1NlcnZpY2VdKVxuICAgIF0sIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlRyZWVHcmlkUm93RGVmRGlyZWN0aXZlO1xufShOYlJvd0RlZkRpcmVjdGl2ZSkpO1xudmFyIE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZSh0ZW1wbGF0ZSwgZGlmZmVycywgY29sdW1uc1NlcnZpY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGVtcGxhdGUsIGRpZmZlcnMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmNvbHVtbnNTZXJ2aWNlID0gY29sdW1uc1NlcnZpY2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZV8xID0gTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uc1NlcnZpY2UuZ2V0VmlzaWJsZUNvbHVtbnMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbHVtbnMgdG8gYmUgZGlzcGxheWVkIG9uIHRoaXMgcm93XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZS5zZXRDb2x1bW5zKHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBOYlRyZWVHcmlkSGVhZGVyUm93RGVmRGlyZWN0aXZlLnByb3RvdHlwZS5oaWRlQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICB0aGlzLmNvbHVtbnNTZXJ2aWNlLmhpZGVDb2x1bW4oY29sdW1uKTtcbiAgICB9O1xuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZS5wcm90b3R5cGUuc2hvd0NvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZS5zaG93Q29sdW1uKGNvbHVtbik7XG4gICAgfTtcbiAgICB2YXIgTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZV8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJUcmVlR3JpZEhlYWRlclJvd0RlZicpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuICAgIF0sIE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgbnVsbCk7XG4gICAgTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZSA9IE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJUcmVlR3JpZEhlYWRlclJvd0RlZl0nLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0hlYWRlclJvd0RlZiwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmVfMSB9XSxcbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVGVtcGxhdGVSZWYsXG4gICAgICAgICAgICBJdGVyYWJsZURpZmZlcnMsXG4gICAgICAgICAgICBOYkNvbHVtbnNTZXJ2aWNlXSlcbiAgICBdLCBOYlRyZWVHcmlkSGVhZGVyUm93RGVmRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZTtcbn0oTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUpKTtcbnZhciBOYlRyZWVHcmlkRm9vdGVyUm93RGVmRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlRyZWVHcmlkRm9vdGVyUm93RGVmRGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUodGVtcGxhdGUsIGRpZmZlcnMsIGNvbHVtbnNTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRlbXBsYXRlLCBkaWZmZXJzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5jb2x1bW5zU2VydmljZSA9IGNvbHVtbnNTZXJ2aWNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmVfMSA9IE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcImNvbHVtbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnNTZXJ2aWNlLmdldFZpc2libGVDb2x1bW5zKCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2x1bW5zIHRvIGJlIGRpc3BsYXllZCBvbiB0aGlzIHJvd1xuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc1NlcnZpY2Uuc2V0Q29sdW1ucyh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgTmJUcmVlR3JpZEZvb3RlclJvd0RlZkRpcmVjdGl2ZS5wcm90b3R5cGUuaGlkZUNvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZS5oaWRlQ29sdW1uKGNvbHVtbik7XG4gICAgfTtcbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUucHJvdG90eXBlLnNob3dDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgIHRoaXMuY29sdW1uc1NlcnZpY2Uuc2hvd0NvbHVtbihjb2x1bW4pO1xuICAgIH07XG4gICAgdmFyIE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmVfMTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoJ25iVHJlZUdyaWRGb290ZXJSb3dEZWYnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbiAgICBdLCBOYlRyZWVHcmlkRm9vdGVyUm93RGVmRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIG51bGwpO1xuICAgIE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUgPSBOYlRyZWVHcmlkRm9vdGVyUm93RGVmRGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iVHJlZUdyaWRGb290ZXJSb3dEZWZdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtGb290ZXJSb3dEZWYsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkRm9vdGVyUm93RGVmRGlyZWN0aXZlXzEgfV0sXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1RlbXBsYXRlUmVmLFxuICAgICAgICAgICAgSXRlcmFibGVEaWZmZXJzLFxuICAgICAgICAgICAgTmJDb2x1bW5zU2VydmljZV0pXG4gICAgXSwgTmJUcmVlR3JpZEZvb3RlclJvd0RlZkRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmU7XG59KE5iRm9vdGVyUm93RGVmRGlyZWN0aXZlKSk7XG4vKipcbiAqIENlbGwgZGVmaW5pdGlvbiBmb3IgYSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSB0ZW1wbGF0ZSBvZiBhIGNvbHVtbidzIGRhdGEgcm93IGNlbGwgYXMgd2VsbCBhcyBjZWxsLXNwZWNpZmljIHByb3BlcnRpZXMuXG4gKi9cbnZhciBOYlRyZWVHcmlkQ2VsbERlZkRpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJUcmVlR3JpZENlbGxEZWZEaXJlY3RpdmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJUcmVlR3JpZENlbGxEZWZEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJUcmVlR3JpZENlbGxEZWZEaXJlY3RpdmVfMSA9IE5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlO1xuICAgIHZhciBOYlRyZWVHcmlkQ2VsbERlZkRpcmVjdGl2ZV8xO1xuICAgIE5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlID0gTmJUcmVlR3JpZENlbGxEZWZEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJUcmVlR3JpZENlbGxEZWZdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtDZWxsRGVmLCB1c2VFeGlzdGluZzogTmJUcmVlR3JpZENlbGxEZWZEaXJlY3RpdmVfMSB9XSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlRyZWVHcmlkQ2VsbERlZkRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlO1xufShOYkNlbGxEZWZEaXJlY3RpdmUpKTtcbi8qKlxuICogSGVhZGVyIGNlbGwgZGVmaW5pdGlvbiBmb3IgdGhlIG5iLXRhYmxlLlxuICogQ2FwdHVyZXMgdGhlIHRlbXBsYXRlIG9mIGEgY29sdW1uJ3MgaGVhZGVyIGNlbGwgYW5kIGFzIHdlbGwgYXMgY2VsbC1zcGVjaWZpYyBwcm9wZXJ0aWVzLlxuICovXG52YXIgTmJUcmVlR3JpZEhlYWRlckNlbGxEZWZEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iVHJlZUdyaWRIZWFkZXJDZWxsRGVmRGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGVmRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGVmRGlyZWN0aXZlXzEgPSBOYlRyZWVHcmlkSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZTtcbiAgICB2YXIgTmJUcmVlR3JpZEhlYWRlckNlbGxEZWZEaXJlY3RpdmVfMTtcbiAgICBOYlRyZWVHcmlkSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSA9IE5iVHJlZUdyaWRIZWFkZXJDZWxsRGVmRGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iVHJlZUdyaWRIZWFkZXJDZWxsRGVmXScsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5iQ2RrSGVhZGVyQ2VsbERlZiwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRIZWFkZXJDZWxsRGVmRGlyZWN0aXZlXzEgfV0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJUcmVlR3JpZEhlYWRlckNlbGxEZWZEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlRyZWVHcmlkSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZTtcbn0oTmJIZWFkZXJDZWxsRGVmRGlyZWN0aXZlKSk7XG4vKipcbiAqIEZvb3RlciBjZWxsIGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSB0ZW1wbGF0ZSBvZiBhIGNvbHVtbidzIGZvb3RlciBjZWxsIGFuZCBhcyB3ZWxsIGFzIGNlbGwtc3BlY2lmaWMgcHJvcGVydGllcy5cbiAqL1xudmFyIE5iVHJlZUdyaWRGb290ZXJDZWxsRGVmRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZV8xID0gTmJUcmVlR3JpZEZvb3RlckNlbGxEZWZEaXJlY3RpdmU7XG4gICAgdmFyIE5iVHJlZUdyaWRGb290ZXJDZWxsRGVmRGlyZWN0aXZlXzE7XG4gICAgTmJUcmVlR3JpZEZvb3RlckNlbGxEZWZEaXJlY3RpdmUgPSBOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlRyZWVHcmlkRm9vdGVyQ2VsbERlZl0nLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0Zvb3RlckNlbGxEZWYsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KVxuICAgIF0sIE5iVHJlZUdyaWRGb290ZXJDZWxsRGVmRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZEZvb3RlckNlbGxEZWZEaXJlY3RpdmU7XG59KE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSkpO1xuXG52YXIgTkJfUk9XX0RPVUJMRV9DTElDS19ERUxBWSA9IDIwMDtcbi8qKlxuICogQ2VsbHMgY29udGFpbmVyLiBBZGRzIHRoZSByaWdodCBjbGFzcyBhbmQgcm9sZS5cbiAqL1xudmFyIE5iVHJlZUdyaWRSb3dDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iVHJlZUdyaWRSb3dDb21wb25lbnQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJUcmVlR3JpZFJvd0NvbXBvbmVudCh0cmVlLCBlbGVtZW50UmVmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICBfdGhpcy5kb3VibGVDbGljayQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGltZSB0byB3YWl0IGZvciBzZWNvbmQgY2xpY2sgdG8gZXhwYW5kIHJvdyBkZWVwbHkuXG4gICAgICAgICAqIDIwMG1zIGJ5IGRlZmF1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kb3VibGVDbGlja0RlbGF5ID0gTkJfUk9XX0RPVUJMRV9DTElDS19ERUxBWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRvZ2dsZSByb3cgb24gY2xpY2suIEVuYWJsZWQgYnkgZGVmYXVsdC5cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNsaWNrVG9Ub2dnbGUgPSB0cnVlO1xuICAgICAgICBfdGhpcy50cmVlID0gdHJlZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBOYlRyZWVHcmlkUm93Q29tcG9uZW50XzEgPSBOYlRyZWVHcmlkUm93Q29tcG9uZW50O1xuICAgIE5iVHJlZUdyaWRSb3dDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZUlmRW5hYmxlZE5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5jbGlja1RvVG9nZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGltZXIoTkJfUk9XX0RPVUJMRV9DTElDS19ERUxBWSlcbiAgICAgICAgICAgIC5waXBlKHRha2UoMSksIHRha2VVbnRpbCh0aGlzLmRvdWJsZUNsaWNrJCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnRyZWUudG9nZ2xlUm93KF90aGlzKTsgfSk7XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkUm93Q29tcG9uZW50LnByb3RvdHlwZS50b2dnbGVJZkVuYWJsZWROb2RlRGVlcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWNrVG9Ub2dnbGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRvdWJsZUNsaWNrJC5uZXh0KCk7XG4gICAgICAgIHRoaXMudHJlZS50b2dnbGVSb3codGhpcywgeyBkZWVwOiB0cnVlIH0pO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZFJvd0NvbXBvbmVudC5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZG91YmxlQ2xpY2skLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICB2YXIgTmJUcmVlR3JpZFJvd0NvbXBvbmVudF8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuICAgIF0sIE5iVHJlZUdyaWRSb3dDb21wb25lbnQucHJvdG90eXBlLCBcImRvdWJsZUNsaWNrRGVsYXlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG4gICAgXSwgTmJUcmVlR3JpZFJvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xpY2tUb1RvZ2dsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ2NsaWNrJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG4gICAgXSwgTmJUcmVlR3JpZFJvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwidG9nZ2xlSWZFbmFibGVkTm9kZVwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdExpc3RlbmVyKCdkYmxjbGljaycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuICAgIF0sIE5iVHJlZUdyaWRSb3dDb21wb25lbnQucHJvdG90eXBlLCBcInRvZ2dsZUlmRW5hYmxlZE5vZGVEZWVwXCIsIG51bGwpO1xuICAgIE5iVHJlZUdyaWRSb3dDb21wb25lbnQgPSBOYlRyZWVHcmlkUm93Q29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAndHJbbmJUcmVlR3JpZFJvd10nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG5nLWNvbnRhaW5lciBuYkNlbGxPdXRsZXQ+PC9uZy1jb250YWluZXI+XCIsXG4gICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXRyZWUtZ3JpZC1yb3cnLFxuICAgICAgICAgICAgICAgICdyb2xlJzogJ3JvdycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka1JvdywgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRSb3dDb21wb25lbnRfMSB9XVxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSgwLCBJbmplY3QoTkJfVFJFRV9HUklEKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBFbGVtZW50UmVmXSlcbiAgICBdLCBOYlRyZWVHcmlkUm93Q29tcG9uZW50KTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZFJvd0NvbXBvbmVudDtcbn0oTmJSb3dDb21wb25lbnQpKTtcbnZhciBOYlRyZWVHcmlkSGVhZGVyUm93Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlRyZWVHcmlkSGVhZGVyUm93Q29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWRIZWFkZXJSb3dDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTmJUcmVlR3JpZEhlYWRlclJvd0NvbXBvbmVudF8xID0gTmJUcmVlR3JpZEhlYWRlclJvd0NvbXBvbmVudDtcbiAgICB2YXIgTmJUcmVlR3JpZEhlYWRlclJvd0NvbXBvbmVudF8xO1xuICAgIE5iVHJlZUdyaWRIZWFkZXJSb3dDb21wb25lbnQgPSBOYlRyZWVHcmlkSGVhZGVyUm93Q29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAndHJbbmJUcmVlR3JpZEhlYWRlclJvd10nLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxuZy1jb250YWluZXIgbmJDZWxsT3V0bGV0PjwvbmctY29udGFpbmVyPlwiLFxuICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi10cmVlLWdyaWQtaGVhZGVyLXJvdycsXG4gICAgICAgICAgICAgICAgJ3JvbGUnOiAncm93JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5iQ2RrSGVhZGVyUm93LCB1c2VFeGlzdGluZzogTmJUcmVlR3JpZEhlYWRlclJvd0NvbXBvbmVudF8xIH1dXG4gICAgICAgIH0pXG4gICAgXSwgTmJUcmVlR3JpZEhlYWRlclJvd0NvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iVHJlZUdyaWRIZWFkZXJSb3dDb21wb25lbnQ7XG59KE5iSGVhZGVyUm93Q29tcG9uZW50KSk7XG52YXIgTmJUcmVlR3JpZEZvb3RlclJvd0NvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJUcmVlR3JpZEZvb3RlclJvd0NvbXBvbmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkRm9vdGVyUm93Q29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnRfMSA9IE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnQ7XG4gICAgdmFyIE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnRfMTtcbiAgICBOYlRyZWVHcmlkRm9vdGVyUm93Q29tcG9uZW50ID0gTmJUcmVlR3JpZEZvb3RlclJvd0NvbXBvbmVudF8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ3RyW25iVHJlZUdyaWRGb290ZXJSb3ddJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmctY29udGFpbmVyIG5iQ2VsbE91dGxldD48L25nLWNvbnRhaW5lcj5cIixcbiAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbmItdHJlZS1ncmlkLWZvb3Rlci1yb3cnLFxuICAgICAgICAgICAgICAgICdyb2xlJzogJ3JvdycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0Zvb3RlclJvdywgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnRfMSB9XVxuICAgICAgICB9KVxuICAgIF0sIE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlRyZWVHcmlkRm9vdGVyUm93Q29tcG9uZW50O1xufShOYkZvb3RlclJvd0NvbXBvbmVudCkpO1xuXG4vKipcbiAqIENvbHVtbiBkZWZpbml0aW9uIGZvciB0aGUgdHJlZS1ncmlkLlxuICogRGVmaW5lcyBhIHNldCBvZiBjZWxscyBhdmFpbGFibGUgZm9yIGEgdGFibGUgY29sdW1uLlxuICovXG52YXIgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaGlkZU9uVmFsdWUgPSBudWxsO1xuICAgICAgICBfdGhpcy5zaG93T25WYWx1ZSA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZV8xID0gTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiaGlkZU9uXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFtb3VudCBvZiBwaXhlbHMgb2Ygdmlld3BvcnQgYXQgd2hpY2ggY29sdW1uIHNob3VsZCBiZSBoaWRkZW4uXG4gICAgICAgICAqIHR5cGUgbnVtYmVyXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpZGVPblZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5oaWRlT25WYWx1ZSA9ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMFxuICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgIDogcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcInNob3dPblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbW91bnQgb2YgcGl4ZWxzIG9mIHZpZXdwb3J0IGF0IHdoaWNoIGNvbHVtbiBzaG91bGQgYmUgc2hvd24uXG4gICAgICAgICAqIHR5cGUgbnVtYmVyXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3dPblZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zaG93T25WYWx1ZSA9ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMFxuICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgIDogcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhpZGVPbiAhPSBudWxsICYmIHRoaXMuc2hvd09uICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImhpZGVPbiBhbmQgc2hvd09uIGFyZSBtdXR1YWxseSBleGNsdXNpdmUgYW5kIGNhbid0IGJlIHVzZWQgc2ltdWx0YW5lb3VzbHkuXCIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlLnByb3RvdHlwZS5zaG91bGRIaWRlID0gZnVuY3Rpb24gKHdpZHRoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5zaG91bGRTaG93KHdpZHRoKTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUucHJvdG90eXBlLnNob3VsZFNob3cgPSBmdW5jdGlvbiAod2lkdGgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGlkZU9uID09IG51bGwgJiYgdGhpcy5zaG93T24gPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGlkZU9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB3aWR0aCA+IHRoaXMuaGlkZU9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aWR0aCA+PSB0aGlzLnNob3dPbjtcbiAgICB9O1xuICAgIHZhciBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlXzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYlRyZWVHcmlkQ29sdW1uRGVmJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuICAgIF0sIE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUucHJvdG90eXBlLCBcImhpZGVPblwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbiAgICBdLCBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzaG93T25cIiwgbnVsbCk7XG4gICAgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZSA9IE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJUcmVlR3JpZENvbHVtbkRlZl0nLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOYkNka0NvbHVtbkRlZiwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmVfMSB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfU09SVF9IRUFERVJfQ09MVU1OX0RFRiwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmVfMSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZTtcbn0oTmJDb2x1bW5EZWZEaXJlY3RpdmUpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlKGNvbHVtbkRlZiwgZWxlbWVudFJlZiwgdHJlZSwgcGxhdGZvcm1JZCwgd2luZG93LCBzYW5pdGl6ZXIsIGRpcmVjdGlvblNlcnZpY2UsIGNvbHVtblNlcnZpY2UsIGNkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbHVtbkRlZiwgZWxlbWVudFJlZikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucGxhdGZvcm1JZCA9IHBsYXRmb3JtSWQ7XG4gICAgICAgIF90aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICAgICAgX3RoaXMuc2FuaXRpemVyID0gc2FuaXRpemVyO1xuICAgICAgICBfdGhpcy5kaXJlY3Rpb25TZXJ2aWNlID0gZGlyZWN0aW9uU2VydmljZTtcbiAgICAgICAgX3RoaXMuY29sdW1uU2VydmljZSA9IGNvbHVtblNlcnZpY2U7XG4gICAgICAgIF90aGlzLmNkID0gY2Q7XG4gICAgICAgIF90aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgX3RoaXMuaW5pdGlhbExlZnRQYWRkaW5nID0gJyc7XG4gICAgICAgIF90aGlzLmluaXRpYWxSaWdodFBhZGRpbmcgPSAnJztcbiAgICAgICAgX3RoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIF90aGlzLmNvbHVtbkRlZiA9IGNvbHVtbkRlZjtcbiAgICAgICAgX3RoaXMuZWxlbWVudFJlZiA9IGVsZW1lbnRSZWY7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmVfMSA9IE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRyZWVHcmlkQ2VsbERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29sdW1uV2lkdGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGF0ZXN0V2lkdGggPSB0aGlzLnRyZWUuZ2V0Q29sdW1uV2lkdGgoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxhdGVzdFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGF0ZXN0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJsZWZ0UGFkZGluZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uU2VydmljZS5pc0x0cigpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RhcnRQYWRkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJyaWdodFBhZGRpbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvblNlcnZpY2UuaXNSdGwoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0YXJ0UGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIHZhciBzdHlsZSQkMSA9IHRoaXMud2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsTGVmdFBhZGRpbmcgPSBzdHlsZSQkMS5wYWRkaW5nTGVmdDtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFJpZ2h0UGFkZGluZyA9IHN0eWxlJCQxLnBhZGRpbmdSaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbHVtblNlcnZpY2Uub25Db2x1bW5zQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5sYXRlc3RXaWR0aCAhPT0gX3RoaXMudHJlZS5nZXRDb2x1bW5XaWR0aCgpOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7IH0pO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUucHJvdG90eXBlLnRvZ2dsZVJvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmVlLnRvZ2dsZUNlbGxSb3codGhpcyk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUucHJvdG90eXBlLCBcImluaXRpYWxTdGFydFBhZGRpbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvblNlcnZpY2UuaXNMdHIoKVxuICAgICAgICAgICAgICAgID8gdGhpcy5pbml0aWFsTGVmdFBhZGRpbmdcbiAgICAgICAgICAgICAgICA6IHRoaXMuaW5pdGlhbFJpZ2h0UGFkZGluZztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUucHJvdG90eXBlLmdldFN0YXJ0UGFkZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJvd0xldmVsID0gdGhpcy50cmVlLmdldENlbGxMZXZlbCh0aGlzLCB0aGlzLmNvbHVtbkRlZi5uYW1lKTtcbiAgICAgICAgaWYgKHJvd0xldmVsID09PSBOQl9ERUZBVUxUX1JPV19MRVZFTCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5lc3RpbmdMZXZlbCA9IHJvd0xldmVsICsgMTtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSAnJztcbiAgICAgICAgaWYgKHRoaXMudHJlZS5sZXZlbFBhZGRpbmcpIHtcbiAgICAgICAgICAgIHBhZGRpbmcgPSBcImNhbGMoXCIgKyB0aGlzLnRyZWUubGV2ZWxQYWRkaW5nICsgXCIgKiBcIiArIG5lc3RpbmdMZXZlbCArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaW5pdGlhbFN0YXJ0UGFkZGluZykge1xuICAgICAgICAgICAgcGFkZGluZyA9IFwiY2FsYyhcIiArIHRoaXMuaW5pdGlhbFN0YXJ0UGFkZGluZyArIFwiICogXCIgKyBuZXN0aW5nTGV2ZWwgKyBcIilcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhZGRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0U3R5bGUocGFkZGluZyk7XG4gICAgfTtcbiAgICB2YXIgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmVfMTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ3N0eWxlLndpZHRoJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUucHJvdG90eXBlLCBcImNvbHVtbldpZHRoXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnc3R5bGUucGFkZGluZy1sZWZ0JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUucHJvdG90eXBlLCBcImxlZnRQYWRkaW5nXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnc3R5bGUucGFkZGluZy1yaWdodCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJyaWdodFBhZGRpbmdcIiwgbnVsbCk7XG4gICAgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUgPSBOYlRyZWVHcmlkQ2VsbERpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ3RkW25iVHJlZUdyaWRDZWxsXScsXG4gICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXRyZWUtZ3JpZC1jZWxsJyxcbiAgICAgICAgICAgICAgICAncm9sZSc6ICdncmlkY2VsbCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0NlbGwsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkQ2VsbERpcmVjdGl2ZV8xIH1dLFxuICAgICAgICB9KSxcbiAgICAgICAgX19wYXJhbSgyLCBJbmplY3QoTkJfVFJFRV9HUklEKSksXG4gICAgICAgIF9fcGFyYW0oMywgSW5qZWN0KFBMQVRGT1JNX0lEKSksXG4gICAgICAgIF9fcGFyYW0oNCwgSW5qZWN0KE5CX1dJTkRPVykpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUsXG4gICAgICAgICAgICBFbGVtZW50UmVmLCBPYmplY3QsIE9iamVjdCwgT2JqZWN0LCBEb21TYW5pdGl6ZXIsXG4gICAgICAgICAgICBOYkxheW91dERpcmVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBOYkNvbHVtbnNTZXJ2aWNlLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWZdKVxuICAgIF0sIE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZENlbGxEaXJlY3RpdmU7XG59KE5iQ2VsbERpcmVjdGl2ZSkpO1xudmFyIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZShjb2x1bW5EZWYsIGVsZW1lbnRSZWYsIHRyZWUsIGNvbHVtblNlcnZpY2UsIGNkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbHVtbkRlZiwgZWxlbWVudFJlZikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY29sdW1uU2VydmljZSA9IGNvbHVtblNlcnZpY2U7XG4gICAgICAgIF90aGlzLmNkID0gY2Q7XG4gICAgICAgIF90aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgX3RoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJUcmVlR3JpZEhlYWRlckNlbGxEaXJlY3RpdmVfMSA9IE5iVHJlZUdyaWRIZWFkZXJDZWxsRGlyZWN0aXZlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29sdW1uV2lkdGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGF0ZXN0V2lkdGggPSB0aGlzLnRyZWUuZ2V0Q29sdW1uV2lkdGgoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhdGVzdFdpZHRoIHx8IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5jb2x1bW5TZXJ2aWNlLm9uQ29sdW1uc0NoYW5nZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubGF0ZXN0V2lkdGggIT09IF90aGlzLnRyZWUuZ2V0Q29sdW1uV2lkdGgoKTsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpOyB9KTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHZhciBOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZV8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnc3R5bGUud2lkdGgnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29sdW1uV2lkdGhcIiwgbnVsbCk7XG4gICAgTmJUcmVlR3JpZEhlYWRlckNlbGxEaXJlY3RpdmUgPSBOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ3RoW25iVHJlZUdyaWRIZWFkZXJDZWxsXScsXG4gICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXRyZWUtZ3JpZC1oZWFkZXItY2VsbCcsXG4gICAgICAgICAgICAgICAgJ3JvbGUnOiAnY29sdW1uaGVhZGVyJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5iQ2RrSGVhZGVyQ2VsbCwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRIZWFkZXJDZWxsRGlyZWN0aXZlXzEgfV0sXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDIsIEluamVjdChOQl9UUkVFX0dSSUQpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlLFxuICAgICAgICAgICAgRWxlbWVudFJlZiwgT2JqZWN0LCBOYkNvbHVtbnNTZXJ2aWNlLFxuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWZdKVxuICAgIF0sIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZEhlYWRlckNlbGxEaXJlY3RpdmU7XG59KE5iSGVhZGVyQ2VsbERpcmVjdGl2ZSkpO1xudmFyIE5iVHJlZUdyaWRGb290ZXJDZWxsRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZShjb2x1bW5EZWYsIGVsZW1lbnRSZWYsIHRyZWUsIGNvbHVtblNlcnZpY2UsIGNkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbHVtbkRlZiwgZWxlbWVudFJlZikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY29sdW1uU2VydmljZSA9IGNvbHVtblNlcnZpY2U7XG4gICAgICAgIF90aGlzLmNkID0gY2Q7XG4gICAgICAgIF90aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgX3RoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTmJUcmVlR3JpZEZvb3RlckNlbGxEaXJlY3RpdmVfMSA9IE5iVHJlZUdyaWRGb290ZXJDZWxsRGlyZWN0aXZlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29sdW1uV2lkdGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGF0ZXN0V2lkdGggPSB0aGlzLnRyZWUuZ2V0Q29sdW1uV2lkdGgoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhdGVzdFdpZHRoIHx8IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iVHJlZUdyaWRGb290ZXJDZWxsRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5jb2x1bW5TZXJ2aWNlLm9uQ29sdW1uc0NoYW5nZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubGF0ZXN0V2lkdGggIT09IF90aGlzLnRyZWUuZ2V0Q29sdW1uV2lkdGgoKTsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpOyB9KTtcbiAgICB9O1xuICAgIE5iVHJlZUdyaWRGb290ZXJDZWxsRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHZhciBOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZV8xO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnc3R5bGUud2lkdGgnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY29sdW1uV2lkdGhcIiwgbnVsbCk7XG4gICAgTmJUcmVlR3JpZEZvb3RlckNlbGxEaXJlY3RpdmUgPSBOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ3RkW25iVHJlZUdyaWRGb290ZXJDZWxsXScsXG4gICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXRyZWUtZ3JpZC1mb290ZXItY2VsbCcsXG4gICAgICAgICAgICAgICAgJ3JvbGUnOiAnZ3JpZGNlbGwnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtGb290ZXJDZWxsLCB1c2VFeGlzdGluZzogTmJUcmVlR3JpZEZvb3RlckNlbGxEaXJlY3RpdmVfMSB9XSxcbiAgICAgICAgfSksXG4gICAgICAgIF9fcGFyYW0oMiwgSW5qZWN0KE5CX1RSRUVfR1JJRCkpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUsXG4gICAgICAgICAgICBFbGVtZW50UmVmLCBPYmplY3QsIE5iQ29sdW1uc1NlcnZpY2UsXG4gICAgICAgICAgICBDaGFuZ2VEZXRlY3RvclJlZl0pXG4gICAgXSwgTmJUcmVlR3JpZEZvb3RlckNlbGxEaXJlY3RpdmUpO1xuICAgIHJldHVybiBOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZTtcbn0oTmJGb290ZXJDZWxsRGlyZWN0aXZlKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iRmlsdGVyRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iRmlsdGVyRGlyZWN0aXZlKCkge1xuICAgIH1cbiAgICBOYkZpbHRlckRpcmVjdGl2ZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlclJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5maWx0ZXJhYmxlLmZpbHRlcihmaWx0ZXJSZXF1ZXN0KTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgnbmJGaWx0ZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBOYkZpbHRlckRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiZmlsdGVyYWJsZVwiLCB2b2lkIDApO1xuICAgIE5iRmlsdGVyRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7IHNlbGVjdG9yOiAnW25iRmlsdGVyXScgfSlcbiAgICBdLCBOYkZpbHRlckRpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iRmlsdGVyRGlyZWN0aXZlO1xufSgpKTtcbi8qKlxuICogSGVscGVyIGRpcmVjdGl2ZSB0byB0cmlnZ2VyIGRhdGEgc291cmNlJ3MgZmlsdGVyIG1ldGhvZCB3aGVuIHVzZXIgdHlwZXMgaW4gaW5wdXRcbiAqL1xudmFyIE5iRmlsdGVySW5wdXREaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5iRmlsdGVySW5wdXREaXJlY3RpdmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmJGaWx0ZXJJbnB1dERpcmVjdGl2ZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNlYXJjaCQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICBfdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWJvdW5jZSB0aW1lIGJlZm9yZSB0cmlnZ2VyaW5nIGZpbHRlciBtZXRob2QuIFNldCBpbiBtaWxsaXNlY29uZHMuXG4gICAgICAgICAqIERlZmF1bHQgMjAwLlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVib3VuY2VUaW1lID0gMjAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE5iRmlsdGVySW5wdXREaXJlY3RpdmVfMSA9IE5iRmlsdGVySW5wdXREaXJlY3RpdmU7XG4gICAgTmJGaWx0ZXJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2VhcmNoJFxuICAgICAgICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuZGVib3VuY2VUaW1lKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZmlsdGVyLmNhbGwoX3RoaXMsIHF1ZXJ5KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBOYkZpbHRlcklucHV0RGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5zZWFyY2gkLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBOYkZpbHRlcklucHV0RGlyZWN0aXZlLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zZWFyY2gkLm5leHQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9O1xuICAgIHZhciBOYkZpbHRlcklucHV0RGlyZWN0aXZlXzE7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCduYkZpbHRlcklucHV0JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJGaWx0ZXJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiZmlsdGVyYWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuICAgIF0sIE5iRmlsdGVySW5wdXREaXJlY3RpdmUucHJvdG90eXBlLCBcImRlYm91bmNlVGltZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ2lucHV0JywgWyckZXZlbnQnXSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG4gICAgXSwgTmJGaWx0ZXJJbnB1dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwiZmlsdGVyXCIsIG51bGwpO1xuICAgIE5iRmlsdGVySW5wdXREaXJlY3RpdmUgPSBOYkZpbHRlcklucHV0RGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgRGlyZWN0aXZlKHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iRmlsdGVySW5wdXRdJyxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJGaWx0ZXJEaXJlY3RpdmUsIHVzZUV4aXN0aW5nOiBOYkZpbHRlcklucHV0RGlyZWN0aXZlXzEgfV0sXG4gICAgICAgIH0pXG4gICAgXSwgTmJGaWx0ZXJJbnB1dERpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iRmlsdGVySW5wdXREaXJlY3RpdmU7XG59KE5iRmlsdGVyRGlyZWN0aXZlKSk7XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBXaGVuIHVzaW5nIGN1c3RvbSByb3cgdG9nZ2xlLCBhcHBseSB0aGlzIGRpcmVjdGl2ZSBvbiB5b3VyIHRvZ2dsZSB0byB0b2dnbGUgcm93IG9uIGVsZW1lbnQgY2xpY2suXG4gKi9cbnZhciBOYlRyZWVHcmlkUm93VG9nZ2xlRGlyZWN0aXZlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWRSb3dUb2dnbGVEaXJlY3RpdmUoY2VsbCkge1xuICAgICAgICB0aGlzLmNlbGwgPSBjZWxsO1xuICAgIH1cbiAgICBOYlRyZWVHcmlkUm93VG9nZ2xlRGlyZWN0aXZlLnByb3RvdHlwZS50b2dnbGVSb3cgPSBmdW5jdGlvbiAoJGV2ZW50KSB7XG4gICAgICAgIHRoaXMuY2VsbC50b2dnbGVSb3coKTtcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RMaXN0ZW5lcignY2xpY2snLCBbJyRldmVudCddKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbiAgICBdLCBOYlRyZWVHcmlkUm93VG9nZ2xlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ0b2dnbGVSb3dcIiwgbnVsbCk7XG4gICAgTmJUcmVlR3JpZFJvd1RvZ2dsZURpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBEaXJlY3RpdmUoe1xuICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJUcmVlR3JpZFJvd1RvZ2dsZV0nLFxuICAgICAgICB9KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOYlRyZWVHcmlkQ2VsbERpcmVjdGl2ZV0pXG4gICAgXSwgTmJUcmVlR3JpZFJvd1RvZ2dsZURpcmVjdGl2ZSk7XG4gICAgcmV0dXJuIE5iVHJlZUdyaWRSb3dUb2dnbGVEaXJlY3RpdmU7XG59KCkpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogTmJUcmVlR3JpZFJvd1RvZ2dsZUNvbXBvbmVudFxuICovXG52YXIgTmJUcmVlR3JpZFJvd1RvZ2dsZUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRyZWVHcmlkUm93VG9nZ2xlQ29tcG9uZW50KGNlbGwpIHtcbiAgICAgICAgdGhpcy5jZWxsID0gY2VsbDtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHBhbmRlZFZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZFZhbHVlID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZVJvdyA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgdGhpcy5jZWxsLnRvZ2dsZVJvdygpO1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyckZXZlbnQnXSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG4gICAgXSwgTmJUcmVlR3JpZFJvd1RvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwidG9nZ2xlUm93XCIsIG51bGwpO1xuICAgIE5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdHJlZS1ncmlkLXJvdy10b2dnbGUnLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxidXR0b24gY2xhc3M9XFxcInJvdy10b2dnbGUtYnV0dG9uXFxcIiBbYXR0ci5hcmlhLWxhYmVsXT1cXFwiZXhwYW5kZWQgPyAnY29sbGFwc2UnIDogJ2V4cGFuZCdcXFwiPlxcbiAgICAgIDxuYi1pY29uIFtpY29uXT1cXFwiZXhwYW5kZWQgPyAnY2hldnJvbi1kb3duLW91dGxpbmUnIDogJ2NoZXZyb24tcmlnaHQtb3V0bGluZSdcXFwiXFxuICAgICAgICAgICAgICAgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIlxcbiAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIj5cXG4gICAgICA8L25iLWljb24+XFxuICAgIDwvYnV0dG9uPlxcbiAgXCIsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIlxcbiAgICBidXR0b24ge1xcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcbiAgICAgIGJvcmRlcjogbm9uZTtcXG4gICAgICBwYWRkaW5nOiAwO1xcbiAgICB9XFxuICBcIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmJUcmVlR3JpZENlbGxEaXJlY3RpdmVdKVxuICAgIF0sIE5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQpO1xuICAgIHJldHVybiBOYlRyZWVHcmlkUm93VG9nZ2xlQ29tcG9uZW50O1xufSgpKTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG52YXIgQ09NUE9ORU5UUyQyID0gW1xuICAgIC8vIFRyZWUgR3JpZFxuICAgIE5iVHJlZUdyaWRDb21wb25lbnQsXG4gICAgTmJUcmVlR3JpZFJvd0RlZkRpcmVjdGl2ZSxcbiAgICBOYlRyZWVHcmlkUm93Q29tcG9uZW50LFxuICAgIE5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmUsXG4gICAgTmJUcmVlR3JpZEhlYWRlclJvd0NvbXBvbmVudCxcbiAgICBOYlRyZWVHcmlkSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSxcbiAgICBOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZSxcbiAgICBOYlRyZWVHcmlkRm9vdGVyUm93RGVmRGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnQsXG4gICAgTmJUcmVlR3JpZEZvb3RlckNlbGxEZWZEaXJlY3RpdmUsXG4gICAgTmJUcmVlR3JpZEZvb3RlckNlbGxEaXJlY3RpdmUsXG4gICAgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZSxcbiAgICAvLyBTb3J0IGRpcmVjdGl2ZXNcbiAgICBOYlNvcnREaXJlY3RpdmUsXG4gICAgTmJTb3J0SGVhZGVyQ29tcG9uZW50LFxuICAgIE5iU29ydEljb25Db21wb25lbnQsXG4gICAgLy8gRmlsdGVyIGRpcmVjdGl2ZXNcbiAgICBOYkZpbHRlckRpcmVjdGl2ZSxcbiAgICBOYkZpbHRlcklucHV0RGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRSb3dUb2dnbGVEaXJlY3RpdmUsXG4gICAgTmJUcmVlR3JpZFJvd1RvZ2dsZUNvbXBvbmVudCxcbiAgICBOYlNvcnRIZWFkZXJJY29uRGlyZWN0aXZlLFxuXTtcbnZhciBOYlRyZWVHcmlkTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVHJlZUdyaWRNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iVHJlZUdyaWRNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgTmdNb2R1bGUoe1xuICAgICAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgTmJUYWJsZU1vZHVsZSwgTmJJY29uTW9kdWxlXSxcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uczogX19zcHJlYWRBcnJheXMoQ09NUE9ORU5UUyQyKSxcbiAgICAgICAgICAgIGV4cG9ydHM6IF9fc3ByZWFkQXJyYXlzKFtOYlRhYmxlTW9kdWxlXSwgQ09NUE9ORU5UUyQyKSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iVHJlZUdyaWRTb3J0U2VydmljZSxcbiAgICAgICAgICAgICAgICBOYlRyZWVHcmlkRmlsdGVyU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYlRyZWVHcmlkU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYlRyZWVHcmlkRGF0YVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJUcmVlR3JpZERhdGFTb3VyY2VCdWlsZGVyLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSlcbiAgICBdLCBOYlRyZWVHcmlkTW9kdWxlKTtcbiAgICByZXR1cm4gTmJUcmVlR3JpZE1vZHVsZTtcbn0oKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVG9nZ2xlIGlzIGEgY29udHJvbCByZXByZXNlbnRpbmcgYG9uYCBhbmQgYG9mZmAgc3RhdGVzLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIHRvZ2dsZS90b2dnbGUtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iVG9nZ2xlQ29tcG9uZW50YCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYlRvZ2dsZU1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogVG9nZ2xlIG1heSBoYXZlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHN0YXR1c2VzOiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGluZm9gLCBgY29udHJvbGBcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFRvZ2dsZSBzdGF0dXMsIHRvZ2dsZS90b2dnbGUtc3RhdHVzLmNvbXBvbmVudClcbiAqXG4gKiBUb2dnbGUgY2FuIGJlIGRpc2FibGVkIHZpYSBgZGlzYWJsZWRgIGlucHV0LlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRGlzYWJsZWQgVG9nZ2xlcywgdG9nZ2xlL3RvZ2dsZS1kaXNhYmxlZC5jb21wb25lbnQpXG4gKlxuICogVG9nZ2xlIG1heSBoYXZlIGEgbGFiZWwgd2l0aCBmb2xsb3dpbmcgcG9zaXRpb25zOiBgbGVmdGAsIGByaWdodGAsIGBzdGFydGAsIGBlbmRgIChkZWZhdWx0KVxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVG9nZ2xlcyBXaXRoIExhYmVscywgdG9nZ2xlL3RvZ2dsZS1sYWJlbC1wb3NpdGlvbi5jb21wb25lbnQudHMpXG4gKlxuICogWW91IGNhbiBzZXQgY29udHJvbCBzdGF0ZSB2aWEgYGNoZWNrZWRgIGJpbmRpbmc6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLXRvZ2dsZSBbKGNoZWNrZWQpXT1cImNoZWNrZWRcIj48L25iLXRvZ2dsZT5cbiAqIGBgYFxuICpcbiAqIE9yIGl0IGNvdWxkIGJlIHNldCB2aWEgcmVhY3RpdmUgZm9ybXMgb3IgbmdNb2RlbCBiaW5kaW5nczpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFRvZ2dsZSBmb3JtIGJpbmRpbmcsIHRvZ2dsZS90b2dnbGUtZm9ybS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHRvZ2dsZS1oZWlnaHQ6XG4gKiB0b2dnbGUtd2lkdGg6XG4gKiB0b2dnbGUtYm9yZGVyLXdpZHRoOlxuICogdG9nZ2xlLWJvcmRlci1yYWRpdXM6XG4gKiB0b2dnbGUtb3V0bGluZS13aWR0aDpcbiAqIHRvZ2dsZS1vdXRsaW5lLWNvbG9yOlxuICogdG9nZ2xlLXN3aXRjaGVyLXNpemU6XG4gKiB0b2dnbGUtc3dpdGNoZXItaWNvbi1zaXplOlxuICogdG9nZ2xlLXRleHQtZm9udC1mYW1pbHk6XG4gKiB0b2dnbGUtdGV4dC1mb250LXNpemU6XG4gKiB0b2dnbGUtdGV4dC1mb250LXdlaWdodDpcbiAqIHRvZ2dsZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdG9nZ2xlLWN1cnNvcjpcbiAqIHRvZ2dsZS1kaXNhYmxlZC1jdXJzb3I6XG4gKiB0b2dnbGUtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtY2hlY2tlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWZvY3VzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWFjdGl2ZS1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1kaXNhYmxlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWRpc2FibGVkLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktY2hlY2tlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWRpc2FibGVkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1kaXNhYmxlZC1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtY2hlY2tlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWRpc2FibGVkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1kaXNhYmxlZC1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby10ZXh0LWNvbG9yOlxuICogdG9nZ2xlLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tY2hlY2tlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtaW5mby1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtaW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8taG92ZXItYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWluZm8taG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8taG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtaW5mby1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtaW5mby1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWRpc2FibGVkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1kaXNhYmxlZC1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy10ZXh0LWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctY2hlY2tlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWRpc2FibGVkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1kaXNhYmxlZC1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItY2hlY2tlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWZvY3VzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZGlzYWJsZWQtc3dpdGNoZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZGlzYWJsZWQtY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC10ZXh0LWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtY2hlY2tlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWRpc2FibGVkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1kaXNhYmxlZC1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKi9cbnZhciBOYlRvZ2dsZUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOYlRvZ2dsZUNvbXBvbmVudChjaGFuZ2VEZXRlY3RvciwgbGF5b3V0RGlyZWN0aW9uLCByZW5kZXJlciwgaG9zdEVsZW1lbnQsIHpvbmUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvciA9IGNoYW5nZURldGVjdG9yO1xuICAgICAgICB0aGlzLmxheW91dERpcmVjdGlvbiA9IGxheW91dERpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5fY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogVG9nZ2xlIGxhYmVsIHBvc2l0aW9uLlxuICAgICAgICAgKiBQb3NzaWJsZSB2YWx1ZXMgYXJlOiBgbGVmdGAsIGByaWdodGAsIGBzdGFydGAsIGBlbmRgIChkZWZhdWx0KVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYWJlbFBvc2l0aW9uID0gJ2VuZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdXRwdXQgd2hlbiBjaGVja2VkIHN0YXRlIGlzIGNoYW5nZWQgYnkgYSB1c2VyXG4gICAgICAgICAqIEB0eXBlIEV2ZW50RW1pdHRlcjxib29sZWFuPlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGVja2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBOYlRvZ2dsZUNvbXBvbmVudF8xID0gTmJUb2dnbGVDb21wb25lbnQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRvZ2dsZSBjaGVja2VkXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tlZDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRyb2xzIGlucHV0IGRpc2FibGVkIHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVG9nZ2xlIHN0YXR1cy5cbiAgICAgICAgICogUG9zc2libGUgdmFsdWVzIGFyZTogYGJhc2ljYCwgYHByaW1hcnlgLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBpbmZvYCwgYGNvbnRyb2xgLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIGVtcHR5U3RhdHVzV2FybmluZygnTmJUb2dnbGUnKTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICdiYXNpYyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmltYXJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3YXJuaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkYW5nZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiYmFzaWNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb250cm9sXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYWJlbExlZnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsUG9zaXRpb24gPT09ICdsZWZ0JztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYWJlbFJpZ2h0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYWJlbFBvc2l0aW9uID09PSAncmlnaHQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImxhYmVsU3RhcnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsUG9zaXRpb24gPT09ICdzdGFydCc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibGFiZWxFbmRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsUG9zaXRpb24gPT09ICdlbmQnO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uLm9uRGlyZWN0aW9uQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpOyB9KTtcbiAgICB9O1xuICAgIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIFRPRE86ICMyMjU0XG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlcmVyLmFkZENsYXNzKF90aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICduYi10cmFuc2l0aW9uJyk7XG4gICAgICAgIH0pOyB9KTtcbiAgICB9O1xuICAgIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZS5jaGVja1N0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXREaXJlY3Rpb24uaXNMdHIoKSA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0RGlyZWN0aW9uLmlzTHRyKCkgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgIH07XG4gICAgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLnJlZ2lzdGVyT25DaGFuZ2UgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICAgIH07XG4gICAgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLnJlZ2lzdGVyT25Ub3VjaGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gICAgfTtcbiAgICBOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgdGhpcy5jaGVja2VkID0gdmFsO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgIH07XG4gICAgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLnNldERpc2FibGVkU3RhdGUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9O1xuICAgIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZS51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgaW5wdXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIHRoaXMuY2hlY2tlZCA9IGlucHV0LmNoZWNrZWQ7XG4gICAgICAgIHRoaXMuY2hlY2tlZENoYW5nZS5lbWl0KHRoaXMuY2hlY2tlZCk7XG4gICAgICAgIHRoaXMub25DaGFuZ2UodGhpcy5jaGVja2VkKTtcbiAgICB9O1xuICAgIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZS5vbklucHV0Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfTtcbiAgICB2YXIgTmJUb2dnbGVDb21wb25lbnRfMTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuICAgIF0sIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG4gICAgXSwgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuICAgIF0sIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgXSwgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImxhYmVsUG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImNoZWNrZWRDaGFuZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1wcmltYXJ5JyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcInByaW1hcnlcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5zdGF0dXMtc3VjY2VzcycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWNjZXNzXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLXdhcm5pbmcnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwid2FybmluZ1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1kYW5nZXInKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGFuZ2VyXCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3Muc3RhdHVzLWluZm8nKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5mb1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1iYXNpYycpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJiYXNpY1wiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnN0YXR1cy1jb250cm9sJyksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG4gICAgXSwgTmJUb2dnbGVDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRyb2xcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy50b2dnbGUtbGFiZWwtbGVmdCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYWJlbExlZnRcIiwgbnVsbCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEhvc3RCaW5kaW5nKCdjbGFzcy50b2dnbGUtbGFiZWwtcmlnaHQnKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbiAgICBdLCBOYlRvZ2dsZUNvbXBvbmVudC5wcm90b3R5cGUsIFwibGFiZWxSaWdodFwiLCBudWxsKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgSG9zdEJpbmRpbmcoJ2NsYXNzLnRvZ2dsZS1sYWJlbC1zdGFydCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYWJlbFN0YXJ0XCIsIG51bGwpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBIb3N0QmluZGluZygnY2xhc3MudG9nZ2xlLWxhYmVsLWVuZCcpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuICAgIF0sIE5iVG9nZ2xlQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYWJlbEVuZFwiLCBudWxsKTtcbiAgICBOYlRvZ2dsZUNvbXBvbmVudCA9IE5iVG9nZ2xlQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdG9nZ2xlJyxcbiAgICAgICAgICAgIGFuaW1hdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKCdwb3NpdGlvbicsIFtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUoJ3JpZ2h0Jywgc3R5bGUoeyByaWdodDogMCwgbGVmdDogJyonIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUoJ2xlZnQnLCBzdHlsZSh7IGxlZnQ6IDAsIHJpZ2h0OiAnKicgfSkpLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCc6ZW50ZXInLCBbYW5pbWF0ZSgwKV0pLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCdyaWdodCA8PT4gbGVmdCcsIFthbmltYXRlKCcwLjE1cycpXSksXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxsYWJlbCBjbGFzcz1cXFwidG9nZ2xlLWxhYmVsXFxcIj5cXG4gICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiXFxuICAgICAgICAgICAgIGNsYXNzPVxcXCJuYXRpdmUtaW5wdXQgdmlzdWFsbHktaGlkZGVuXFxcIlxcbiAgICAgICAgICAgICByb2xlPVxcXCJzd2l0Y2hcXFwiXFxuICAgICAgICAgICAgIFthdHRyLmFyaWEtY2hlY2tlZF09XFxcImNoZWNrZWRcXFwiXFxuICAgICAgICAgICAgIFtkaXNhYmxlZF09XFxcImRpc2FibGVkXFxcIlxcbiAgICAgICAgICAgICBbY2hlY2tlZF09XFxcImNoZWNrZWRcXFwiXFxuICAgICAgICAgICAgIChjaGFuZ2UpPVxcXCJ1cGRhdGVWYWx1ZSgkZXZlbnQpXFxcIlxcbiAgICAgICAgICAgICAoYmx1cik9XFxcIm9uVG91Y2hlZCgpXFxcIlxcbiAgICAgICAgICAgICAoY2xpY2spPVxcXCJvbklucHV0Q2xpY2soJGV2ZW50KVxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwidG9nZ2xlXFxcIiBbY2xhc3MuY2hlY2tlZF09XFxcImNoZWNrZWRcXFwiPlxcbiAgICAgICAgPHNwYW4gW0Bwb3NpdGlvbl09XFxcImNoZWNrU3RhdGUoKVxcXCIgY2xhc3M9XFxcInRvZ2dsZS1zd2l0Y2hlclxcXCI+XFxuICAgICAgICAgIDxuYi1pY29uICpuZ0lmPVxcXCJjaGVja2VkXFxcIiBpY29uPVxcXCJjaGVja21hcmstYm9sZC1vdXRsaW5lXFxcIiBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiPjwvbmItaWNvbj5cXG4gICAgICAgIDwvc3Bhbj5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8c3BhbiBjbGFzcz1cXFwidGV4dFxcXCI+XFxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgPC9zcGFuPlxcbiAgICA8L2xhYmVsPlxcbiAgXCIsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZihmdW5jdGlvbiAoKSB7IHJldHVybiBOYlRvZ2dsZUNvbXBvbmVudF8xOyB9KSxcbiAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTppbmxpbmUtZmxleDtvdXRsaW5lOm5vbmV9Omhvc3QoLnRvZ2dsZS1sYWJlbC1sZWZ0KSAudGV4dDpub3QoOmVtcHR5KXtwYWRkaW5nLXJpZ2h0OjAuNjg3NXJlbX1bZGlyPWx0cl0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1sZWZ0KSAudGV4dDpub3QoOmVtcHR5KXtvcmRlcjotMX1bZGlyPXJ0bF0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1sZWZ0KSAudGV4dDpub3QoOmVtcHR5KXtvcmRlcjoxfTpob3N0KC50b2dnbGUtbGFiZWwtcmlnaHQpIC50ZXh0Om5vdCg6ZW1wdHkpe3BhZGRpbmctbGVmdDowLjY4NzVyZW19W2Rpcj1sdHJdIDpob3N0KC50b2dnbGUtbGFiZWwtcmlnaHQpIC50ZXh0Om5vdCg6ZW1wdHkpe29yZGVyOjF9W2Rpcj1ydGxdIDpob3N0KC50b2dnbGUtbGFiZWwtcmlnaHQpIC50ZXh0Om5vdCg6ZW1wdHkpe29yZGVyOi0xfTpob3N0KC50b2dnbGUtbGFiZWwtc3RhcnQpIC50b2dnbGUtbGFiZWx7ZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2V9W2Rpcj1sdHJdIDpob3N0KC50b2dnbGUtbGFiZWwtc3RhcnQpIC50b2dnbGUtbGFiZWwgLnRleHQ6bm90KDplbXB0eSl7cGFkZGluZy1yaWdodDouNjg3NXJlbX1bZGlyPXJ0bF0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1zdGFydCkgLnRvZ2dsZS1sYWJlbCAudGV4dDpub3QoOmVtcHR5KXtwYWRkaW5nLWxlZnQ6LjY4NzVyZW19W2Rpcj1sdHJdIDpob3N0KC50b2dnbGUtbGFiZWwtZW5kKSAudGV4dDpub3QoOmVtcHR5KXtwYWRkaW5nLWxlZnQ6LjY4NzVyZW19W2Rpcj1ydGxdIDpob3N0KC50b2dnbGUtbGFiZWwtZW5kKSAudGV4dDpub3QoOmVtcHR5KXtwYWRkaW5nLXJpZ2h0Oi42ODc1cmVtfTpob3N0KC5uYi10cmFuc2l0aW9uKSAudG9nZ2xle3RyYW5zaXRpb24tZHVyYXRpb246MC4xNXM7dHJhbnNpdGlvbi1wcm9wZXJ0eTpiYWNrZ3JvdW5kLWNvbG9yLGJvcmRlcixib3gtc2hhZG93O3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW59LnRvZ2dsZS1sYWJlbHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0udG9nZ2xle3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWZsZXg7Ym94LXNpemluZzpjb250ZW50LWJveH0udG9nZ2xlLXN3aXRjaGVye3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlci1yYWRpdXM6NTAlO21hcmdpbjoxcHh9LnRvZ2dsZS1zd2l0Y2hlciBuYi1pY29ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLCAtNTAlKX1cXG5cIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBOYkxheW91dERpcmVjdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICAgICAgTmdab25lXSlcbiAgICBdLCBOYlRvZ2dsZUNvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iVG9nZ2xlQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iVG9nZ2xlTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5iVG9nZ2xlTW9kdWxlKCkge1xuICAgIH1cbiAgICBOYlRvZ2dsZU1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7XG4gICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICAgICAgICAgIE5iSWNvbk1vZHVsZSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYlRvZ2dsZUNvbXBvbmVudF0sXG4gICAgICAgICAgICBleHBvcnRzOiBbTmJUb2dnbGVDb21wb25lbnRdLFxuICAgICAgICB9KVxuICAgIF0sIE5iVG9nZ2xlTW9kdWxlKTtcbiAgICByZXR1cm4gTmJUb2dnbGVNb2R1bGU7XG59KCkpO1xuXG52YXIgTmJQcmVmaXhEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJQcmVmaXhEaXJlY3RpdmUoKSB7XG4gICAgfVxuICAgIE5iUHJlZml4RGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlByZWZpeF0nLFxuICAgICAgICB9KVxuICAgIF0sIE5iUHJlZml4RGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJQcmVmaXhEaXJlY3RpdmU7XG59KCkpO1xuXG52YXIgTmJTdWZmaXhEaXJlY3RpdmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJTdWZmaXhEaXJlY3RpdmUoKSB7XG4gICAgfVxuICAgIE5iU3VmZml4RGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIERpcmVjdGl2ZSh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlN1ZmZpeF0nLFxuICAgICAgICB9KVxuICAgIF0sIE5iU3VmZml4RGlyZWN0aXZlKTtcbiAgICByZXR1cm4gTmJTdWZmaXhEaXJlY3RpdmU7XG59KCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5mdW5jdGlvbiB0aHJvd0Zvcm1Db250cm9sRWxlbWVudE5vdEZvdW5kKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5iRm9ybUZpZWxkQ29tcG9uZW50IG11c3QgY29udGFpbiBbbmJJbnB1dF1cIik7XG59XG4vKlxuICogTmJGb3JtRmllbGRDb21wb25lbnRcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogZm9ybS1maWVsZC1hZGRvbi1iYXNpYy10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1iYXNpYy1oaWdobGlnaHQtdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24tcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1wcmltYXJ5LWhpZ2hsaWdodC10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXN1Y2Nlc3MtaGlnaGxpZ2h0LXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWluZm8tdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24taW5mby1oaWdobGlnaHQtdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24td2FybmluZy10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi13YXJuaW5nLWhpZ2hsaWdodC10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24tZGFuZ2VyLWhpZ2hsaWdodC10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1jb250cm9sLXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWNvbnRyb2wtaGlnaGxpZ2h0LXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXRpbnktaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi10aW55LXdpZHRoOlxuICogZm9ybS1maWVsZC1hZGRvbi10aW55LWljb24tc2l6ZTpcbiAqIGZvcm0tZmllbGQtYWRkb24tdGlueS1mb250LXNpemU6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXRpbnktbGluZS1oZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXRpbnktZm9udC13ZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXNtYWxsLWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tc21hbGwtd2lkdGg6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXNtYWxsLWljb24tc2l6ZTpcbiAqIGZvcm0tZmllbGQtYWRkb24tc21hbGwtZm9udC1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1zbWFsbC1saW5lLWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tc21hbGwtZm9udC13ZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLW1lZGl1bS1oZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLW1lZGl1bS13aWR0aDpcbiAqIGZvcm0tZmllbGQtYWRkb24tbWVkaXVtLWljb24tc2l6ZTpcbiAqIGZvcm0tZmllbGQtYWRkb24tbWVkaXVtLWZvbnQtc2l6ZTpcbiAqIGZvcm0tZmllbGQtYWRkb24tbWVkaXVtLWxpbmUtaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi1tZWRpdW0tZm9udC13ZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWxhcmdlLWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tbGFyZ2Utd2lkdGg6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWxhcmdlLWljb24tc2l6ZTpcbiAqIGZvcm0tZmllbGQtYWRkb24tbGFyZ2UtZm9udC1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1sYXJnZS1saW5lLWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tbGFyZ2UtZm9udC13ZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWdpYW50LWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tZ2lhbnQtd2lkdGg6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWdpYW50LWljb24tc2l6ZTpcbiAqIGZvcm0tZmllbGQtYWRkb24tZ2lhbnQtZm9udC1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1naWFudC1saW5lLWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tZ2lhbnQtZm9udC13ZWlnaHQ6XG4gKiovXG52YXIgTmJGb3JtRmllbGRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJGb3JtRmllbGRDb21wb25lbnQoY2QsIHpvbmUsIGVsZW1lbnRSZWYsIHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5mb3JtQ29udHJvbFN0YXRlJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuICAgICAgICB0aGlzLnByZWZpeENsYXNzZXMkID0gdGhpcy5mb3JtQ29udHJvbFN0YXRlJC5waXBlKG1hcChmdW5jdGlvbiAocykgeyByZXR1cm4gX3RoaXMuZ2V0QWRkb25DbGFzc2VzKCdwcmVmaXgnLCBzKTsgfSkpO1xuICAgICAgICB0aGlzLnN1ZmZpeENsYXNzZXMkID0gdGhpcy5mb3JtQ29udHJvbFN0YXRlJC5waXBlKG1hcChmdW5jdGlvbiAocykgeyByZXR1cm4gX3RoaXMuZ2V0QWRkb25DbGFzc2VzKCdzdWZmaXgnLCBzKTsgfSkpO1xuICAgIH1cbiAgICBOYkZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlckNvbnRlbnRDaGVja2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZm9ybUNvbnRyb2wpIHtcbiAgICAgICAgICAgIHRocm93Rm9ybUNvbnRyb2xFbGVtZW50Tm90Rm91bmQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTmJGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLm5nQWZ0ZXJDb250ZW50SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb0Zvcm1Db250cm9sU3RhdGVDaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb0FkZG9uQ2hhbmdlKCk7XG4gICAgfTtcbiAgICBOYkZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLyBUT0RPOiAjMjI1NFxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhfdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICduYi10cmFuc2l0aW9uJyk7XG4gICAgICAgIH0pOyB9KTtcbiAgICB9O1xuICAgIE5iRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgfTtcbiAgICBOYkZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUuc2hvdWxkU2hvd1ByZWZpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9ybUNvbnRyb2xDb25maWcoKS5zdXBwb3J0c1ByZWZpeCAmJiAhIXRoaXMucHJlZml4Lmxlbmd0aDtcbiAgICB9O1xuICAgIE5iRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZS5zaG91bGRTaG93U3VmZml4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3JtQ29udHJvbENvbmZpZygpLnN1cHBvcnRzU3VmZml4ICYmICEhdGhpcy5zdWZmaXgubGVuZ3RoO1xuICAgIH07XG4gICAgTmJGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLnN1YnNjcmliZVRvRm9ybUNvbnRyb2xTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gdGhpcy5mb3JtQ29udHJvbCwgZGlzYWJsZWQkID0gX2EuZGlzYWJsZWQkLCBmb2N1c2VkJCA9IF9hLmZvY3VzZWQkLCBzaXplJCA9IF9hLnNpemUkLCBzdGF0dXMkID0gX2Euc3RhdHVzJDtcbiAgICAgICAgY29tYmluZUxhdGVzdChbZGlzYWJsZWQkLCBmb2N1c2VkJCwgc2l6ZSQsIHN0YXR1cyRdKVxuICAgICAgICAgICAgLnBpcGUobWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gX2FbMF0sIGZvY3VzZWQgPSBfYVsxXSwgc2l6ZSA9IF9hWzJdLCBzdGF0dXMgPSBfYVszXTtcbiAgICAgICAgICAgIHJldHVybiAoeyBkaXNhYmxlZDogZGlzYWJsZWQsIGZvY3VzZWQ6IGZvY3VzZWQsIHNpemU6IHNpemUsIHN0YXR1czogc3RhdHVzIH0pO1xuICAgICAgICB9KSwgZGlzdGluY3RVbnRpbENoYW5nZWQoZnVuY3Rpb24gKG9sZFN0YXRlLCBzdGF0ZSQkMSkgeyByZXR1cm4gX3RoaXMuaXNTdGF0ZXNFcXVhbChvbGRTdGF0ZSwgc3RhdGUkJDEpOyB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmZvcm1Db250cm9sU3RhdGUkKTtcbiAgICB9O1xuICAgIE5iRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZS5zdWJzY3JpYmVUb0FkZG9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBtZXJnZSh0aGlzLnByZWZpeC5jaGFuZ2VzLCB0aGlzLnN1ZmZpeC5jaGFuZ2VzKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTsgfSk7XG4gICAgfTtcbiAgICBOYkZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUuZ2V0QWRkb25DbGFzc2VzID0gZnVuY3Rpb24gKGFkZG9uLCBzdGF0ZSQkMSkge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IFtcbiAgICAgICAgICAgICduYi1mb3JtLWZpZWxkLWFkZG9uJyxcbiAgICAgICAgICAgIFwibmItZm9ybS1maWVsZC1cIiArIGFkZG9uICsgXCItXCIgKyBzdGF0ZSQkMS5zaXplLFxuICAgICAgICBdO1xuICAgICAgICBpZiAoc3RhdGUkJDEuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChcIm5iLWZvcm0tZmllbGQtYWRkb24tZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhdGUkJDEuZm9jdXNlZCkge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKFwibmItZm9ybS1maWVsZC1hZGRvbi1cIiArIHN0YXRlJCQxLnN0YXR1cyArIFwiLWhpZ2hsaWdodFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChcIm5iLWZvcm0tZmllbGQtYWRkb24tXCIgKyBzdGF0ZSQkMS5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGFzc2VzO1xuICAgIH07XG4gICAgTmJGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLmdldEZvcm1Db250cm9sQ29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtQ29udHJvbENvbmZpZyB8fCBuZXcgTmJGb3JtRmllbGRDb250cm9sQ29uZmlnKCk7XG4gICAgfTtcbiAgICBOYkZvcm1GaWVsZENvbXBvbmVudC5wcm90b3R5cGUuaXNTdGF0ZXNFcXVhbCA9IGZ1bmN0aW9uIChvbGRTdGF0ZSwgc3RhdGUkJDEpIHtcbiAgICAgICAgcmV0dXJuIG9sZFN0YXRlLnN0YXR1cyA9PT0gc3RhdGUkJDEuc3RhdHVzICYmXG4gICAgICAgICAgICBvbGRTdGF0ZS5kaXNhYmxlZCA9PT0gc3RhdGUkJDEuZGlzYWJsZWQgJiZcbiAgICAgICAgICAgIG9sZFN0YXRlLmZvY3VzZWQgPT09IHN0YXRlJCQxLmZvY3VzZWQgJiZcbiAgICAgICAgICAgIG9sZFN0YXRlLnNpemUgPT09IHN0YXRlJCQxLnNpemU7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29udGVudENoaWxkcmVuKE5iUHJlZml4RGlyZWN0aXZlLCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwcmVmaXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29udGVudENoaWxkcmVuKE5iU3VmZml4RGlyZWN0aXZlLCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuICAgIF0sIE5iRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzdWZmaXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29udGVudENoaWxkKE5iRm9ybUZpZWxkQ29udHJvbCwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTmJGb3JtRmllbGRDb250cm9sKVxuICAgIF0sIE5iRm9ybUZpZWxkQ29tcG9uZW50LnByb3RvdHlwZSwgXCJmb3JtQ29udHJvbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBDb250ZW50Q2hpbGQoTmJGb3JtRmllbGRDb250cm9sQ29uZmlnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOYkZvcm1GaWVsZENvbnRyb2xDb25maWcpXG4gICAgXSwgTmJGb3JtRmllbGRDb21wb25lbnQucHJvdG90eXBlLCBcImZvcm1Db250cm9sQ29uZmlnXCIsIHZvaWQgMCk7XG4gICAgTmJGb3JtRmllbGRDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZm9ybS1maWVsZCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZGl2ICpuZ0lmPVxcXCJzaG91bGRTaG93UHJlZml4KClcXFwiIFtuZ0NsYXNzXT1cXFwicHJlZml4Q2xhc3NlcyQgfCBhc3luY1xcXCI+XFxuICA8bmctY29udGVudCBzZWxlY3Q9XFxcIltuYlByZWZpeF1cXFwiPjwvbmctY29udGVudD5cXG48L2Rpdj5cXG5cXG48ZGl2IGNsYXNzPVxcXCJuYi1mb3JtLWNvbnRyb2wtY29udGFpbmVyXFxcIlxcbiAgICAgW2NsYXNzLm5iLWZvcm0tZmllbGQtY29udHJvbC13aXRoLXByZWZpeF09XFxcInNob3VsZFNob3dQcmVmaXgoKVxcXCJcXG4gICAgIFtjbGFzcy5uYi1mb3JtLWZpZWxkLWNvbnRyb2wtd2l0aC1zdWZmaXhdPVxcXCJzaG91bGRTaG93U3VmZml4KClcXFwiPlxcbiAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbjwvZGl2PlxcblxcbjxkaXYgKm5nSWY9XFxcInNob3VsZFNob3dTdWZmaXgoKVxcXCIgW25nQ2xhc3NdPVxcXCJzdWZmaXhDbGFzc2VzJCB8IGFzeW5jXFxcIj5cXG4gIDxuZy1jb250ZW50IHNlbGVjdD1cXFwiW25iU3VmZml4XVxcXCI+PC9uZy1jb250ZW50PlxcbjwvZGl2PlxcblwiLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9Lm5iLWZvcm0tY29udHJvbC1jb250YWluZXJ7d2lkdGg6MTAwJX1cXG5cIl1cbiAgICAgICAgfSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBOZ1pvbmUsXG4gICAgICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICAgICAgUmVuZGVyZXIyXSlcbiAgICBdLCBOYkZvcm1GaWVsZENvbXBvbmVudCk7XG4gICAgcmV0dXJuIE5iRm9ybUZpZWxkQ29tcG9uZW50O1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIENPTVBPTkVOVFMkMyA9IFtcbiAgICBOYkZvcm1GaWVsZENvbXBvbmVudCxcbiAgICBOYlByZWZpeERpcmVjdGl2ZSxcbiAgICBOYlN1ZmZpeERpcmVjdGl2ZSxcbl07XG52YXIgTmJGb3JtRmllbGRNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmJGb3JtRmllbGRNb2R1bGUoKSB7XG4gICAgfVxuICAgIE5iRm9ybUZpZWxkTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIE5nTW9kdWxlKHtcbiAgICAgICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdLFxuICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBfX3NwcmVhZEFycmF5cyhDT01QT05FTlRTJDMpLFxuICAgICAgICAgICAgZXhwb3J0czogX19zcHJlYWRBcnJheXMoQ09NUE9ORU5UUyQzKSxcbiAgICAgICAgfSlcbiAgICBdLCBOYkZvcm1GaWVsZE1vZHVsZSk7XG4gICAgcmV0dXJuIE5iRm9ybUZpZWxkTW9kdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLy8gVE9ETzogZXhwb3J0IGFsbCBjb21wb25lbnRzXG5cbi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0IHsgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlIGFzIMm1ZCwgTmJGb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSBhcyDJtWMsIE5iTWVudUludGVybmFsU2VydmljZSBhcyDJtWEsIE5iU2hhcmVkTW9kdWxlIGFzIMm1YiwgTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQsIE5iQ2FsZW5kYXJZZWFyUGlja2VyQ29tcG9uZW50LCBOYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQsIE1PTlRIU19JTl9WSUVXLCBNT05USFNfSU5fQ09MVU1OLCBOYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50LCBOYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQsIE5iQ2FsZW5kYXJQYWdlYWJsZU5hdmlnYXRpb25Db21wb25lbnQsIE5iQ2FsZW5kYXJEYXlzTmFtZXNDb21wb25lbnQsIE5iQ2FsZW5kYXJXZWVrTnVtYmVyQ29tcG9uZW50LCBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LCBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQsIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQsIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQsIE5iQ2FsZW5kYXJNb250aE1vZGVsU2VydmljZSwgTmJOYXRpdmVEYXRlU2VydmljZSwgTmJEYXRlU2VydmljZSwgTmJNZW51U2VydmljZSwgTmJNZW51SXRlbSwgTkJfVEhFTUVfT1BUSU9OUywgTkJfTUVESUFfQlJFQUtQT0lOVFMsIE5CX0JVSUxUX0lOX0pTX1RIRU1FUywgTkJfSlNfVEhFTUVTLCBOQl9XSU5ET1csIE5CX0RPQ1VNRU5ULCB3aW5kb3dGYWN0b3J5LCBOYlRoZW1lTW9kdWxlLCBOYlRoZW1lU2VydmljZSwgTmJTcGlubmVyU2VydmljZSwgREVGQVVMVF9NRURJQV9CUkVBS1BPSU5UUywgTmJNZWRpYUJyZWFrcG9pbnRzU2VydmljZSwgTmJDb2xvckhlbHBlciwgTmJMYXlvdXREaXJlY3Rpb24sIE5CX0xBWU9VVF9ESVJFQ1RJT04sIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSwgTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLCBOYkxheW91dFJ1bGVyU2VydmljZSwgQlVJTFRfSU5fVEhFTUVTLCBOYkpTVGhlbWVzUmVnaXN0cnksIENPUlBPUkFURV9USEVNRSwgQ09TTUlDX1RIRU1FLCBERUZBVUxUX1RIRU1FLCBEQVJLX1RIRU1FLCBOYkNhcmRNb2R1bGUsIE5iQ2FyZEhlYWRlckNvbXBvbmVudCwgTmJDYXJkQm9keUNvbXBvbmVudCwgTmJDYXJkRm9vdGVyQ29tcG9uZW50LCBOYkNhcmRDb21wb25lbnQsIE5iRmxpcENhcmRDb21wb25lbnQsIE5iUmV2ZWFsQ2FyZENvbXBvbmVudCwgTmJDYXJkRnJvbnRDb21wb25lbnQsIE5iQ2FyZEJhY2tDb21wb25lbnQsIE5iQ2FsZW5kYXJNb2R1bGUsIE5iQ2FsZW5kYXJDb21wb25lbnQsIE5iQ2FsZW5kYXJSYW5nZU1vZHVsZSwgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LCBOYkJhc2VDYWxlbmRhckNvbXBvbmVudCwgTmJCYXNlQ2FsZW5kYXJNb2R1bGUsIE5iQmFzZUNhbGVuZGFyUmFuZ2VDZWxsLCBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LCBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQsIE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LCBOYkNhbGVuZGFyWWVhck1vZGVsU2VydmljZSwgTmJDYWxlbmRhclZpZXdNb2RlLCBOYkNhbGVuZGFyU2l6ZSwgTmJDYWxlbmRhcktpdE1vZHVsZSwgTmJMYXlvdXRNb2R1bGUsIE5iTGF5b3V0Q29tcG9uZW50LCBOYkxheW91dENvbHVtbkNvbXBvbmVudCwgTmJMYXlvdXRIZWFkZXJDb21wb25lbnQsIE5iTGF5b3V0Rm9vdGVyQ29tcG9uZW50LCBOYlJlc3RvcmVTY3JvbGxUb3BIZWxwZXIsIE5iTWVudU1vZHVsZSwgTmJUb2dnbGVTdGF0ZXMsIE5iTWVudUl0ZW1Db21wb25lbnQsIE5iTWVudUNvbXBvbmVudCwgTmJSb3V0ZVRhYnNldE1vZHVsZSwgTmJSb3V0ZVRhYnNldENvbXBvbmVudCwgTmJTaWRlYmFyTW9kdWxlLCBOYlNpZGViYXJTZXJ2aWNlLCBOYlNpZGViYXJIZWFkZXJDb21wb25lbnQsIE5iU2lkZWJhckZvb3RlckNvbXBvbmVudCwgTmJTaWRlYmFyQ29tcG9uZW50LCBOYlRhYnNldE1vZHVsZSwgTmJUYWJDb21wb25lbnQsIE5iVGFic2V0Q29tcG9uZW50LCBOYlVzZXJNb2R1bGUsIE5iVXNlckNvbXBvbmVudCwgTmJBY3Rpb25zTW9kdWxlLCBOYkFjdGlvbkNvbXBvbmVudCwgTmJBY3Rpb25zQ29tcG9uZW50LCBOYlNlYXJjaE1vZHVsZSwgTmJTZWFyY2hTZXJ2aWNlLCBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LCBOYlNlYXJjaENvbXBvbmVudCwgTmJDaGVja2JveENvbXBvbmVudCwgTmJDaGVja2JveE1vZHVsZSwgTmJCYWRnZUNvbXBvbmVudCwgTmJCYWRnZU1vZHVsZSwgTmJQb3BvdmVyRGlyZWN0aXZlLCBOYlBvcG92ZXJNb2R1bGUsIE5iUG9wb3ZlckNvbXBvbmVudCwgTmJDb250ZXh0TWVudURpcmVjdGl2ZSwgTmJDb250ZXh0TWVudUNvbXBvbmVudCwgTmJDb250ZXh0TWVudU1vZHVsZSwgTmJQcm9ncmVzc0JhckNvbXBvbmVudCwgTmJQcm9ncmVzc0Jhck1vZHVsZSwgTmJBbGVydENvbXBvbmVudCwgTmJBbGVydE1vZHVsZSwgTmJDaGF0Q29tcG9uZW50LCBOYkNoYXRNZXNzYWdlQ29tcG9uZW50LCBOYkNoYXRNZXNzYWdlTWFwQ29tcG9uZW50LCBOYkNoYXRNZXNzYWdlRmlsZUNvbXBvbmVudCwgTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LCBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudCwgTmJDaGF0Rm9ybUNvbXBvbmVudCwgTmJDaGF0TW9kdWxlLCBOYkNoYXRPcHRpb25zLCBOYlNwaW5uZXJDb21wb25lbnQsIE5iU3Bpbm5lckRpcmVjdGl2ZSwgTmJTcGlubmVyTW9kdWxlLCBOQl9TVEVQUEVSLCBOYlN0ZXBwZXJDb21wb25lbnQsIE5iU3RlcENvbXBvbmVudCwgTmJTdGVwcGVyTmV4dERpcmVjdGl2ZSwgTmJTdGVwcGVyUHJldmlvdXNEaXJlY3RpdmUsIE5iU3RlcHBlck1vZHVsZSwgTmJBY2NvcmRpb25Db21wb25lbnQsIE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudCwgTmJBY2NvcmRpb25JdGVtQm9keUNvbXBvbmVudCwgTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50LCBOYkFjY29yZGlvbk1vZHVsZSwgTmJCdXR0b25Db21wb25lbnQsIE5iQnV0dG9uTW9kdWxlLCBOYkxpc3RDb21wb25lbnQsIE5iTGlzdEl0ZW1Db21wb25lbnQsIE5iTGlzdE1vZHVsZSwgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUsIE5iU2Nyb2xsYWJsZUNvbnRhaW5lckRpbWVudGlvbnMsIE5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLCBOYklucHV0RGlyZWN0aXZlLCBOYklucHV0TW9kdWxlLCBOYk92ZXJsYXlNb2R1bGUsIHBhdGNoLCBjcmVhdGVDb250YWluZXIsIE5iT3ZlcmxheVNlcnZpY2UsIE5iQWRqdXN0bWVudCwgTmJQb3NpdGlvbiwgTmJBZGp1c3RhYmxlQ29ubmVjdGVkUG9zaXRpb25TdHJhdGVneSwgTmJHbG9iYWxQb3NpdGlvblN0cmF0ZWd5LCBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UsIE5iUG9zaXRpb25lZENvbnRhaW5lciwgTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LCBOYlRyaWdnZXIsIE5iVHJpZ2dlclN0cmF0ZWd5QmFzZSwgTmJDbGlja1RyaWdnZXJTdHJhdGVneSwgTmJIb3ZlclRyaWdnZXJTdHJhdGVneSwgTmJIaW50VHJpZ2dlclN0cmF0ZWd5LCBOYkZvY3VzVHJpZ2dlclN0cmF0ZWd5LCBOYk5vb3BUcmlnZ2VyU3RyYXRlZ3ksIE5iVHJpZ2dlclN0cmF0ZWd5QnVpbGRlclNlcnZpY2UsIE5iUG9ydGFsRGlyZWN0aXZlLCBOYlBvcnRhbE91dGxldERpcmVjdGl2ZSwgTmJDb21wb25lbnRQb3J0YWwsIE5iT3ZlcmxheSwgTmJPdmVybGF5UG9zaXRpb25CdWlsZGVyLCBOYlRlbXBsYXRlUG9ydGFsLCBOYk92ZXJsYXlDb250YWluZXIsIE5iRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LCBOYlBvcnRhbEluamVjdG9yLCBOYkNka01hcHBpbmdNb2R1bGUsIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLCBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24sIE5iUG9zaXRpb25IZWxwZXIsIE5iRHluYW1pY092ZXJsYXksIE5iRHluYW1pY092ZXJsYXlDaGFuZ2UsIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLCBOYlBsYXRmb3JtLCBOYkZvY3VzTW9uaXRvciwgTmJBMTF5TW9kdWxlLCBOYkZvY3VzVHJhcCwgTmJGb2N1c1RyYXBGYWN0b3J5U2VydmljZSwgTmJDZGtBZGFwdGVyTW9kdWxlLCBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyLCBOYlNjcm9sbFN0cmF0ZWd5T3B0aW9ucywgTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlciwgTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlciwgTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciwgTmJEaXJlY3Rpb25hbGl0eSwgTmJCaWRpTW9kdWxlLCBOYkNlbGxEZWZEaXJlY3RpdmUsIE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSwgTmJGb290ZXJDZWxsRGVmRGlyZWN0aXZlLCBOQl9TT1JUX0hFQURFUl9DT0xVTU5fREVGLCBOYkNvbHVtbkRlZkRpcmVjdGl2ZSwgTmJIZWFkZXJDZWxsRGlyZWN0aXZlLCBOYkZvb3RlckNlbGxEaXJlY3RpdmUsIE5iQ2VsbERpcmVjdGl2ZSwgTmJEYXRhU291cmNlLCBOYkRhdGFSb3dPdXRsZXREaXJlY3RpdmUsIE5iSGVhZGVyUm93T3V0bGV0RGlyZWN0aXZlLCBOYkZvb3RlclJvd091dGxldERpcmVjdGl2ZSwgTmJDZWxsT3V0bGV0RGlyZWN0aXZlLCBOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZSwgTmJGb290ZXJSb3dEZWZEaXJlY3RpdmUsIE5iUm93RGVmRGlyZWN0aXZlLCBOYkhlYWRlclJvd0NvbXBvbmVudCwgTmJGb290ZXJSb3dDb21wb25lbnQsIE5iUm93Q29tcG9uZW50LCBOQl9UQUJMRV9URU1QTEFURSwgTmJUYWJsZSwgTmJUYWJsZU1vZHVsZSwgTkJfRElBTE9HX0NPTkZJRywgTmJEaWFsb2dDb25maWcsIE5iRGlhbG9nUmVmLCBOYkRpYWxvZ1NlcnZpY2UsIE5iRGlhbG9nTW9kdWxlLCBOYlRvYXN0ck1vZHVsZSwgTmJUb2FzdFJlZiwgTmJUb2FzdENvbnRhaW5lciwgTmJUb2FzdHJDb250YWluZXJSZWdpc3RyeSwgTmJUb2FzdHJTZXJ2aWNlLCBOYlRvYXN0LCBOYlRvYXN0Q29tcG9uZW50LCBOQl9UT0FTVFJfQ09ORklHLCBOYlRvYXN0ckNvbmZpZywgTmJUb2FzdHJDb250YWluZXJDb21wb25lbnQsIE5iVG9vbHRpcE1vZHVsZSwgTmJUb29sdGlwRGlyZWN0aXZlLCBOYlRvb2x0aXBDb21wb25lbnQsIE5iU2VsZWN0TW9kdWxlLCBOYlNlbGVjdExhYmVsQ29tcG9uZW50LCBuYlNlbGVjdEZvcm1GaWVsZENvbnRyb2xDb25maWdGYWN0b3J5LCBOYlNlbGVjdENvbXBvbmVudCwgTmJPcHRpb25Nb2R1bGUsIE5iT3B0aW9uQ29tcG9uZW50LCBOYk9wdGlvbkdyb3VwQ29tcG9uZW50LCBOYk9wdGlvbkxpc3RDb21wb25lbnQsIE5CX1NFTEVDVF9JTkpFQ1RJT05fVE9LRU4sIE5iQXV0b2NvbXBsZXRlTW9kdWxlLCBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudCwgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUsIE5iV2luZG93TW9kdWxlLCBOYldpbmRvd1NlcnZpY2UsIE5iV2luZG93UmVmLCBOYldpbmRvd1N0YXRlLCBOYldpbmRvd0NvbmZpZywgTkJfV0lORE9XX0NPTlRFTlQsIE5CX1dJTkRPV19DT05GSUcsIE5CX1dJTkRPV19DT05URVhULCBOYldpbmRvd0NvbXBvbmVudCwgTmJXaW5kb3dzQ29udGFpbmVyQ29tcG9uZW50LCBOYkRhdGVwaWNrZXJNb2R1bGUsIE5iRGF0ZXBpY2tlckFkYXB0ZXIsIE5iRGF0ZXBpY2tlciwgTkJfREFURV9BREFQVEVSLCBOQl9EQVRFX1NFUlZJQ0VfT1BUSU9OUywgTmJEYXRlcGlja2VyRGlyZWN0aXZlLCBOYkRhdGVBZGFwdGVyU2VydmljZSwgTmJSYW5nZUFkYXB0ZXJTZXJ2aWNlLCBOYkRhdGVwaWNrZXJDb250YWluZXJDb21wb25lbnQsIE5iQmFzZVBpY2tlciwgTmJCYXNlUGlja2VyQ29tcG9uZW50LCBOYkRhdGVwaWNrZXJDb21wb25lbnQsIE5iUmFuZ2VwaWNrZXJDb21wb25lbnQsIE5iRGlhbG9nQ29udGFpbmVyQ29tcG9uZW50LCBOYlJhZGlvTW9kdWxlLCBOYlJhZGlvR3JvdXBDb21wb25lbnQsIE5iUmFkaW9Db21wb25lbnQsIE5iVHJlZUdyaWRNb2R1bGUsIE5iVHJlZUdyaWRDb21wb25lbnQsIE5CX1JPV19ET1VCTEVfQ0xJQ0tfREVMQVksIE5iVHJlZUdyaWRSb3dDb21wb25lbnQsIE5iVHJlZUdyaWRIZWFkZXJSb3dDb21wb25lbnQsIE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnQsIE5CX1RSRUVfR1JJRCwgTmJTb3J0RGlyZWN0aW9uLCBOYlNvcnREaXJlY3RpdmUsIE5iU29ydEhlYWRlckljb25EaXJlY3RpdmUsIE5iU29ydEljb25Db21wb25lbnQsIE5iU29ydEhlYWRlckNvbXBvbmVudCwgTmJUcmVlR3JpZFJvd1RvZ2dsZUNvbXBvbmVudCwgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZSwgTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUsIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGlyZWN0aXZlLCBOYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZSwgTmJUcmVlR3JpZFJvd0RlZkRpcmVjdGl2ZSwgTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZSwgTmJUcmVlR3JpZEZvb3RlclJvd0RlZkRpcmVjdGl2ZSwgTmJUcmVlR3JpZENlbGxEZWZEaXJlY3RpdmUsIE5iVHJlZUdyaWRIZWFkZXJDZWxsRGVmRGlyZWN0aXZlLCBOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSwgTmJGaWx0ZXJEaXJlY3RpdmUsIE5iRmlsdGVySW5wdXREaXJlY3RpdmUsIE5iVHJlZUdyaWRSb3dUb2dnbGVEaXJlY3RpdmUsIE5CX0RFRkFVTFRfUk9XX0xFVkVMLCBOYlRyZWVHcmlkUHJlc2VudGF0aW9uTm9kZSwgTmJUcmVlR3JpZERhdGFTb3VyY2UsIE5iVHJlZUdyaWREYXRhU291cmNlQnVpbGRlciwgTmJUcmVlR3JpZERhdGFTZXJ2aWNlLCBOYlRyZWVHcmlkRmlsdGVyU2VydmljZSwgTmJUcmVlR3JpZFNlcnZpY2UsIE5iVHJlZUdyaWRTb3J0U2VydmljZSwgTmJDb2x1bW5zU2VydmljZSwgTmJJY29uTW9kdWxlLCBOYkljb25Db21wb25lbnQsIE5iRm9udEljb24sIE5iU3ZnSWNvbiwgTmJJY29uUGFja1R5cGUsIE5iSWNvbkRlZmluaXRpb24sIE5iSWNvbkxpYnJhcmllcywgTmJUb2dnbGVNb2R1bGUsIE5iVG9nZ2xlQ29tcG9uZW50LCBOYkZvcm1GaWVsZE1vZHVsZSwgTmJGb3JtRmllbGRDb21wb25lbnQsIE5iUHJlZml4RGlyZWN0aXZlLCBOYlN1ZmZpeERpcmVjdGl2ZSwgTmJGb3JtRmllbGRDb250cm9sLCBOYkZvcm1GaWVsZENvbnRyb2xDb25maWcgfTtcbiJdfQ==